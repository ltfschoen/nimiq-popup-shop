window.NimiqShop=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=491)}([
/*!*********************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/buffer/index.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(/*! base64-js */523),i=r(/*! ieee754 */276),s=r(/*! isarray */524);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),i=(e=a(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|d(t.length);return 0===(e=a(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):f(e,t);if("Buffer"===t.type&&s(t.data))return f(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(h(t),e=a(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|d(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(n)return z(e).length;t=(""+t).toLowerCase(),n=!0}}function A(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return C(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){var s,o=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var h=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===c)return h*o}else-1!==h&&(s-=s-h),h=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){for(var l=!0,f=0;f<c;f++)if(u(e,s+f)!==u(t,f)){l=!1;break}if(l)return s}return-1}function _(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function b(e,t,r,n){return H(z(t,e.length-r),e,r,n)}function w(e,t,r,n){return H(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function v(e,t,r,n){return w(e,t,r,n)}function E(e,t,r,n){return H(j(t),e,r,n)}function S(e,t,r,n){return H(function(e,t){for(var r,n,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function C(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,c,u=e[i],h=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l<=r)switch(l){case 1:u<128&&(h=u);break;case 2:128==(192&(s=e[i+1]))&&(c=(31&u)<<6|63&s)>127&&(h=c);break;case 3:s=e[i+1],o=e[i+2],128==(192&s)&&128==(192&o)&&(c=(15&u)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(c=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(h=c)}null===h?(h=65533,l=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=l}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return h(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return l(null,e)},c.allocUnsafeSlow=function(e){return l(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):A.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),u=this.slice(n,i),h=e.slice(t,r),l=0;l<a;++l)if(u[l]!==h[l]){s=u[l],o=h[l];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return v(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function T(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function N(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=F(e[s]);return i}function B(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,i,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function x(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-r,2);i<s;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function L(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-r,4);i<s;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function D(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,s){return s||D(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,s){return s||D(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;r=new c(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,s=n-r;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var o=c.isBuffer(e)?e:z(new c(e,n).toString()),a=o.length;for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var K=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function j(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(K,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(/*! ./../../../webpack/buildin/global.js */10))},
/*!*******************************************!*\
  !*** ./node_modules/debug/src/browser.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(n){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(/*! ./common */676)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(/*! ./../../process/browser.js */2))},
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r,n,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c,u=[],h=!1,l=-1;function f(){h&&c&&(h=!1,c.length?u=c.concat(u):l=-1,u.length&&d())}function d(){if(!h){var e=a(f);h=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function A(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=A,i.addListener=A,i.once=A,i.off=A,i.removeListener=A,i.removeAllListeners=A,i.emit=A,i.prependListener=A,i.prependOnceListener=A,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},
/*!***************************************************!*\
  !*** ./node_modules/inherits/inherits_browser.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},
/*!****************************************!*\
  !*** ./node_modules/cids/src/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! multihashes */13),i=r(/*! multibase */72),s=r(/*! multicodec */27),o=r(/*! multicodec/src/base-table */181),a=r(/*! ./cid-util */542);class c{constructor(e,r,o,a){if(u.isCID(e)){const r=e;return this.version=r.version,this.codec=r.codec,this.multihash=t.from(r.multihash),void(this.multibaseName=r.multibaseName||(0===r.version?"base58btc":"base32"))}if("string"==typeof e){const t=i.isEncoded(e);if(t){const r=i.decode(e);this.version=parseInt(r.slice(0,1).toString("hex"),16),this.codec=s.getCodec(r.slice(1)),this.multihash=s.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=n.fromB58String(e),this.multibaseName="base58btc";return c.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(t.isBuffer(e)){const t=e.slice(0,1),r=parseInt(t.toString("hex"),16);if(1===r){const t=e;this.version=r,this.codec=s.getCodec(t.slice(1)),this.multihash=s.rmPrefix(t.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";c.validateCID(this)}else this.version=e,this.codec=r,this.multihash=o,this.multibaseName=a||(0===e?"base58btc":"base32"),c.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");e=t.concat([t.from("01","hex"),s.getCodeVarint(this.codec),this.multihash])}Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return t.concat([t.from(`0${this.version}`,"hex"),s.getCodeVarint(this.codec),n.prefix(this.multihash)])}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=n.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new u(0,this.codec,this.multihash)}toV1(){return new u(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let t=null;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=n.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=i.encode(e,this.buffer).toString()}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){let t=a.checkCIDComponents(e);if(t)throw new Error(t)}}const u=r(/*! class-is */34)(c,{className:"CID",symbolName:"@ipld/js-cid/CID"});u.codecs=o,e.exports=u}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,s,o,a;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=u(e))>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,a=c,console&&console.warn&&console.warn(a)}return e}function l(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,s(this.listener,this.target,e))}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):A(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function A(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)s(c,this,t);else{var u=c.length,h=A(c,u);for(r=0;r<u;++r)s(h[r],this,t)}return!0},a.prototype.addListener=function(e,t){return h(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return h(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,i,s,o;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},
/*!*******************************************!*\
  !*** ./node_modules/safe-buffer/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! buffer */0),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},
/*!*******************************************!*\
  !*** ./node_modules/peer-id/src/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n){const i=r(/*! multihashes */13),s=r(/*! libp2p-crypto/src/keys */298),o=r(/*! assert */24),a=r(/*! async/waterfall */54);const c=r(/*! class-is */34)(class{constructor(e,t,r){o(n.isBuffer(e),"invalid id provided"),t&&r&&o(t.public.bytes.equals(r.bytes),"inconsistent arguments"),this._id=e,this._idB58String=i.toB58String(this.id),this._privKey=t,this._pubKey=r}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;const e=i.decode(this.id);return"identity"===e.name?(this._pubKey=s.unmarshalPublicKey(e.digest),this._pubKey):void 0}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return s.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return s.marshalPrivateKey(this.privKey)}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let t=6;return e.length<t&&(t=e.length),"<peer.ID "+e.substr(0,t)+">"}toJSON(){return{id:this.toB58String(),privKey:l(this.marshalPrivKey()),pubKey:l(this.marshalPubKey())}}toHexString(){return i.toHexString(this.id)}toBytes(){return this.id}toB58String(){return this._idB58String}isEqual(e){if(n.isBuffer(e))return this.id.equals(e);if(e.id)return this.id.equals(e.id);throw new Error("not valid Id")}isValid(e){this.privKey&&this.privKey.public&&this.privKey.public.bytes&&n.isBuffer(this.pubKey.bytes)&&this.privKey.public.bytes.equals(this.pubKey.bytes)?e():e(new Error("Keys not match"))}},{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});t=e.exports=c;const u=(e,t)=>{if(e.bytes.length<=42){const r=i.encode(e.bytes,"identity");t(null,r)}else e.hash((e,r)=>{t(e,r)})},h=(e,t,r)=>{u(t,(n,i)=>{null!=n?r(n):r(null,new c(i,e,t))})};function l(e){if(e)return e.toString("base64")}t.create=function(e,t){"function"==typeof e&&(t=e,e={}),(e=e||{}).bits=e.bits||2048,e.keyType=e.keyType||"RSA",s.generateKeyPair(e.keyType,e.bits,(e,r)=>{null!=e?t(e):h(r,r.public,t)})},t.createFromHexString=function(e){return new c(i.fromHexString(e))},t.createFromBytes=function(e){return new c(e)},t.createFromB58String=function(e){return new c(i.fromB58String(e))},t.createFromPubKey=function(e,t){if("function"!=typeof t)throw new Error("callback is required");let r;try{let t=e;if("string"==typeof t&&(t=n.from(e,"base64")),!n.isBuffer(t))throw new Error("Supplied key is neither a base64 string nor a buffer");r=s.unmarshalPublicKey(t)}catch(e){return t(e)}h(null,r,t)},t.createFromPrivKey=function(e,t){if("function"!=typeof t)throw new Error("callback is required");let r=e;try{if("string"==typeof r&&(r=n.from(e,"base64")),!n.isBuffer(r))throw new Error("Supplied key is neither a base64 string nor a buffer")}catch(e){return t(e)}s.unmarshalPrivateKey(r,(e,r)=>{null!=e?t(e):h(r,r.public,t)})},t.createFromJSON=function(e,t){if("function"!=typeof t)throw new Error("callback is required");let r,o,h,l;try{r=i.fromB58String(e.id),o=e.privKey&&n.from(e.privKey,"base64"),h=e.pubKey&&n.from(e.pubKey,"base64"),l=h&&s.unmarshalPublicKey(h)}catch(e){return t(e)}o?a([e=>s.unmarshalPrivateKey(o,e),(e,t)=>{u(e.public,(r,n)=>{t(r,n,e)})},(e,t,r)=>{l?u(l,(n,i)=>{r(n,e,t,i)}):r(null,e,t)}],(e,n,i,s)=>e?t(e):l&&!n.equals(s)?t(new Error("Public and private key do not match")):r&&!n.equals(r)?t(new Error("Id and private key do not match")):void t(null,new c(r,i,l))):t(null,new c(r,null,l))},t.isPeerId=function(e){return Boolean("object"==typeof e&&e._id&&e._idB58String)}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!****************************************!*\
  !*** ./node_modules/err-code/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=e instanceof Error?e:new Error(e);if("object"==typeof t?r=t:null!=t&&(i.code=t),r)for(n in r)i[n]=r[n];return i}},
/*!*********************************************!*\
  !*** ./node_modules/promisify-es6/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){
/** PROMISIFY CALLBACK-STYLE FUNCTIONS TO ES6 PROMISES
*
* EXAMPLE:
* const fn = promisify( (callback) => callback(null, "Hello world!") );
* fn((err, str) => console.log(str));
* fn().then((str) => console.log(str));
* //Both functions, will log 'Hello world!'
*
* Note: The function you pass, may have any arguments you want, but the latest
* have to be the callback, which you will call with: next(err, value)
*
* @param method: Function/Array/Map = The function(s) to promisify
* @param options: Map =
*  "context" (default is function): The context which to apply the called function
*  "replace" (default is falsy): When passed an array/map, if to replace the original object
*
* @return: A promise if passed a function, otherwise the object with the promises
*
* @license: MIT
* @version: 1.0.3
* @author: Manuel Di Iorio
**/
var n=function(e,t){return function(){var r=Array.prototype.slice.call(arguments),n=r.length-1,i=r&&r.length>0?r[n]:null,s="function"==typeof i?i:null;return s?e.apply(t,r):new Promise((function(n,i){r.push((function(e,t){if(e)return i(e);n(t)})),e.apply(t,r)}))}};e.exports=function(e,t){t=t||{};var r=Object.prototype.toString.call(e);if("[object Object]"===r||"[object Array]"===r){var i=t.replace?e:{};for(var s in e)e.hasOwnProperty(s)&&(i[s]=n(e[s]));return i}return n(e,t.context||e)}},
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/forge.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports={options:{usePureJavaScript:!1}}},
/*!***************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/forge.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports={options:{usePureJavaScript:!1}}},
/*!***********************************************!*\
  !*** ./node_modules/multihashes/src/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! bs58 */47),i=r(/*! ./constants */529);t.names=i.names,t.codes=i.codes,t.defaultLengths=i.defaultLengths;const s=r(/*! varint */23);function o(e){t.decode(e)}t.toHexString=function(t){if(!e.isBuffer(t))throw new Error("must be passed a buffer");return t.toString("hex")},t.fromHexString=function(t){return e.from(t,"hex")},t.toB58String=function(t){if(!e.isBuffer(t))throw new Error("must be passed a buffer");return n.encode(t)},t.fromB58String=function(t){let r=t;return e.isBuffer(t)&&(r=t.toString()),e.from(n.decode(r))},t.decode=function(r){if(!e.isBuffer(r))throw new Error("multihash must be a Buffer");if(r.length<3)throw new Error("multihash too short. must be > 3 bytes.");const n=s.decode(r);if(!t.isValidCode(n))throw new Error(`multihash unknown function code: 0x${n.toString(16)}`);r=r.slice(s.decode.bytes);const o=s.decode(r);if(o<1)throw new Error(`multihash invalid length: 0x${o.toString(16)}`);if((r=r.slice(s.decode.bytes)).length!==o)throw new Error(`multihash length inconsistent: 0x${r.toString("hex")}`);return{code:n,name:i.codes[n],length:o,digest:r}},t.encode=function(r,n,i){if(!r||void 0===n)throw new Error("multihash encode requires at least two args: digest, code");const o=t.coerceCode(n);if(!e.isBuffer(r))throw new Error("digest should be a Buffer");if(null==i&&(i=r.length),i&&r.length!==i)throw new Error("digest length should be equal to specified length.");return e.concat([e.from(s.encode(o)),e.from(s.encode(i)),r])},t.coerceCode=function(e){let r=e;if("string"==typeof e){if(void 0===i.names[e])throw new Error(`Unrecognized hash function named: ${e}`);r=i.names[e]}if("number"!=typeof r)throw new Error(`Hash function code should be a number. Got: ${r}`);if(void 0===i.codes[r]&&!t.isAppCode(r))throw new Error(`Unrecognized function code: ${r}`);return r},t.isAppCode=function(e){return e>0&&e<16},t.isValidCode=function(e){return!!t.isAppCode(e)||!!i.codes[e]},t.validate=o,t.prefix=function(e){return o(e),e.slice(0,2)}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************************!*\
  !*** ./node_modules/interface-datastore/src/index.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./key */346),i=r(/*! ./memory */683),s=r(/*! ./utils */349),o=r(/*! ./errors */350);t.Key=n,t.MemoryDatastore=i,t.utils=s,t.Errors=o},
/*!*********************************************!*\
  !*** ./node_modules/multiaddr/src/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ./codec */651),i=r(/*! ./protocols-table */204),s=r(/*! varint */23),o=r(/*! bs58 */47),a=r(/*! class-is */34).proto((function(e){if(!(this instanceof a))return new a(e);if(null==e&&(e=""),e instanceof t)this.buffer=n.fromBuffer(e);else if("string"==typeof e||e instanceof String){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.buffer=n.fromString(e)}else{if(!(e.buffer&&e.protos&&e.protoCodes))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.buffer=n.fromBuffer(e.buffer)}}),{className:"Multiaddr",symbolName:"@multiformats/js-multiaddr/multiaddr"});a.prototype.toString=function(){return n.bufferToString(this.buffer)},a.prototype.toJSON=a.prototype.toString,a.prototype.toOptions=function(){const e={},t=this.toString().split("/");return e.family="ip4"===t[1]?"ipv4":"ipv6",e.host=t[2],e.transport=t[3],e.port=t[4],e},a.prototype.inspect=function(){return"<Multiaddr "+this.buffer.toString("hex")+" - "+n.bufferToString(this.buffer)+">"},a.prototype.protos=function(){return this.protoCodes().map(e=>Object.assign({},i(e)))},a.prototype.protoCodes=function(){const e=[],t=this.buffer;let r=0;for(;r<t.length;){const o=s.decode(t,r),a=s.decode.bytes,c=i(o);r+=n.sizeForAddr(c,t.slice(r+a))+a,e.push(o)}return e},a.prototype.protoNames=function(){return this.protos().map(e=>e.name)},a.prototype.tuples=function(){return n.bufferToTuples(this.buffer)},a.prototype.stringTuples=function(){const e=n.bufferToTuples(this.buffer);return n.tuplesToStringTuples(e)},a.prototype.encapsulate=function(e){return e=a(e),a(this.toString()+e.toString())},a.prototype.decapsulate=function(e){e=e.toString();const t=this.toString(),r=t.lastIndexOf(e);if(r<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return a(t.slice(0,r))},a.prototype.getPeerId=function(){let e=null;try{e=this.stringTuples().filter(e=>{if(e[0]===i.names.ipfs.code)return!0}).pop()[1],o.decode(e)}catch(t){e=null}return e},a.prototype.getPath=function(){let e=null;try{e=this.stringTuples().filter(e=>{if(i(e[0]).path)return!0})[0][1]}catch(t){e=null}return e},a.prototype.equals=function(e){return this.buffer.equals(e.buffer)},a.prototype.nodeAddress=function(){const e=this.protoCodes(),t=this.protoNames(),r=this.toString().split("/").slice(1);if(r.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==e[0]&&41!==e[0]&&54!==e[0]&&55!==e[0])throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if("tcp"!==r[2]&&"udp"!==r[2])throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:41===e[0]||55===e[0]?6:4,address:r[1],port:r[3]}},a.fromNodeAddress=function(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");const r="IPv6"===e.family?"ip6":"ip4";return a("/"+[r,e.address,t,e.port].join("/"))},a.prototype.isThinWaistAddress=function(e){const t=(e||this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))},a.protocols=i,a.isName=function(e){return!!a.isMultiaddr(e)&&e.protos().some(e=>e.resolvable)},a.resolve=function(e,t){return a.isMultiaddr(e)&&a.isName(e)?t(new Error("not implemented yet")):t(new Error("not a valid name"))},e.exports=a}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/util.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t,n,i,s){var o=r(/*! ./forge */11),a=r(/*! ./baseN */580),c=e.exports=o.util=o.util||{};function u(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function h(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(c.isArrayBuffer(e)||c.isArrayBufferView(e))if(void 0!==s&&e instanceof s)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof h||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if(void 0!==t&&t.nextTick&&!t.browser)return c.nextTick=t.nextTick,void(c.setImmediate="function"==typeof n?n:c.nextTick);if("function"==typeof n)return c.setImmediate=function(){return n.apply(void 0,arguments)},void(c.nextTick=function(e){return n(e)});if(c.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",r=[];c.setImmediate=function(t){r.push(t),1===r.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(t){if(t.source===window&&t.data===e){t.stopPropagation();var n=r.slice();r.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!=typeof MutationObserver){var i=Date.now(),s=!0,o=document.createElement("div");r=[];new MutationObserver((function(){var e=r.slice();r.length=0,e.forEach((function(e){e()}))})).observe(o,{attributes:!0});var a=c.setImmediate;c.setImmediate=function(e){Date.now()-i>15?(i=Date.now(),a(e)):(r.push(e),1===r.length&&o.setAttribute("a",s=!s))}}c.nextTick=c.setImmediate}(),c.isNodejs=void 0!==t&&t.versions&&t.versions.node,c.globalScope=c.isNodejs?i:"undefined"==typeof self?window:self,c.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},c.isArrayBufferView=function(e){return e&&c.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},c.ByteBuffer=h,c.ByteStringBuffer=h;c.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},c.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},c.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},c.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},c.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},c.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},c.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(c.encodeUtf8(e))},c.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},c.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},c.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},c.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},c.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},c.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},c.ByteStringBuffer.prototype.putInt=function(e,t){u(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},c.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},c.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},c.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},c.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},c.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},c.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},c.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},c.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},c.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},c.ByteStringBuffer.prototype.getInt=function(e){u(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},c.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},c.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},c.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},c.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},c.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},c.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},c.ByteStringBuffer.prototype.copy=function(){var e=c.createBuffer(this.data);return e.read=this.read,e},c.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},c.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},c.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},c.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},c.ByteStringBuffer.prototype.toString=function(){return c.decodeUtf8(this.bytes())},c.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=c.isArrayBuffer(e),n=c.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},c.DataBuffer.prototype.length=function(){return this.write-this.read},c.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},c.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},c.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},c.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},c.DataBuffer.prototype.putBytes=function(e,t){if(c.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(c.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof c.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&c.isArrayBufferView(e.data)){n=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(e instanceof c.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var i;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.hex.decode(e,i,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.base64.decode(e,i,this.write),this;if("utf8"===t&&(e=c.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.raw.decode(i),this;if("utf16"===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=c.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},c.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},c.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},c.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},c.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},c.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},c.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},c.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},c.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},c.DataBuffer.prototype.putInt=function(e,t){u(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},c.DataBuffer.prototype.putSignedInt=function(e,t){return u(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},c.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},c.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},c.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},c.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},c.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},c.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},c.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},c.DataBuffer.prototype.getInt=function(e){u(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},c.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},c.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},c.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},c.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},c.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},c.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},c.DataBuffer.prototype.copy=function(){return new c.DataBuffer(this)},c.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},c.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},c.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},c.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},c.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return c.binary.raw.encode(t);if("hex"===e)return c.binary.hex.encode(t);if("base64"===e)return c.binary.base64.encode(t);if("utf8"===e)return c.text.utf8.decode(t);if("utf16"===e)return c.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},c.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=c.encodeUtf8(e)),new c.ByteBuffer(e)},c.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},c.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s},c.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},c.bytesToHex=function(e){return c.createBuffer(e).toHex()},c.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";c.encode64=function(e,t){for(var r,n,i,s="",o="",a=0;a<e.length;)r=e.charCodeAt(a++),n=e.charCodeAt(a++),i=e.charCodeAt(a++),s+=l.charAt(r>>2),s+=l.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=l.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":l.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+"\r\n",s=s.substr(t));return o+=s},c.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,s="",o=0;o<e.length;)t=f[e.charCodeAt(o++)-43],r=f[e.charCodeAt(o++)-43],n=f[e.charCodeAt(o++)-43],i=f[e.charCodeAt(o++)-43],s+=String.fromCharCode(t<<2|r>>4),64!==n&&(s+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(s+=String.fromCharCode((3&n)<<6|i)));return s},c.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},c.decodeUtf8=function(e){return decodeURIComponent(escape(e))},c.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a.encode,decode:a.decode}},c.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},c.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},c.binary.hex.encode=c.bytesToHex,c.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,s=r=r||0;for(1&e.length&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n},c.binary.base64.encode=function(e,t){for(var r,n,i,s="",o="",a=0;a<e.byteLength;)r=e[a++],n=e[a++],i=e[a++],s+=l.charAt(r>>2),s+=l.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=l.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":l.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+"\r\n",s=s.substr(t));return o+=s},c.binary.base64.decode=function(e,t,r){var n,i,s,o,a=t;a||(a=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,u=r=r||0;c<e.length;)n=f[e.charCodeAt(c++)-43],i=f[e.charCodeAt(c++)-43],s=f[e.charCodeAt(c++)-43],o=f[e.charCodeAt(c++)-43],a[u++]=n<<2|i>>4,64!==s&&(a[u++]=(15&i)<<4|s>>2,64!==o&&(a[u++]=(3&s)<<6|o));return t?u-r:a.subarray(0,u)},c.binary.base58.encode=function(e,t){return c.binary.baseN.encode(e,d,t)},c.binary.base58.decode=function(e,t){return c.binary.baseN.decode(e,d,t)},c.text={utf8:{},utf16:{}},c.text.utf8.encode=function(e,t,r){e=c.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},c.text.utf8.decode=function(e){return c.decodeUtf8(String.fromCharCode.apply(null,e))},c.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),s=r=r||0,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n},c.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},c.deflate=function(e,t,r){if(t=c.decode64(e.deflate(c.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},c.inflate=function(e,t,r){var n=e.inflate(c.encode64(t)).rval;return null===n?null:c.decode64(n)};var p=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=c.encode64(JSON.stringify(r)),n=e.setItem(t,r)),void 0!==n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},A=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(c.decode64(r))),r},g=function(e,t,r,n){var i=A(e,t);null===i&&(i={}),i[r]=n,p(e,t,i)},y=function(e,t,r){var n=A(e,t);return null!==n&&(n=r in n?n[r]:null),n},m=function(e,t,r){var n=A(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),p(e,t,n)}},_=function(e,t){p(e,t,null)},b=function(e,t,r){var n,i=null;void 0===r&&(r=["web","flash"]);var s=!1,o=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),s="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),s=!0)}catch(e){o=e}if(s)break}if(!s)throw o;return i};c.setItem=function(e,t,r,n,i){b(g,arguments,i)},c.getItem=function(e,t,r,n){return b(y,arguments,n)},c.removeItem=function(e,t,r,n){b(m,arguments,n)},c.clearItems=function(e,t,r){b(_,arguments,r)},c.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=null===r?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?80!==n.port&&"http"===n.scheme?n.fullHost+=":"+n.port:443!==n.port&&"https"===n.scheme&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var w=null;c.getQueryVariables=function(e){var t,r=function(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var i,s,o=r[n].indexOf("=");o>0?(i=r[n].substring(0,o),s=r[n].substring(o+1)):(i=r[n],s=null),i in t||(t[i]=[]),i in Object.prototype||null===s||t[i].push(unescape(s))}return t};return void 0===e?(null===w&&(w="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),t=w):t=r(e),t},c.parseFragment=function(e){var t=e,r="",n=e.indexOf("?");n>0&&(t=e.substring(0,n),r=e.substring(n+1));var i=t.split("/");return i.length>0&&""===i[0]&&i.shift(),{pathString:t,queryString:r,path:i,query:""===r?{}:c.getQueryVariables(r)}},c.makeRequest=function(e){var t=c.parseFragment(e),r={path:t.pathString,query:t.queryString,getPath:function(e){return void 0===e?t.path:t.path[e]},getQuery:function(e,r){var n;return void 0===e?n=t.query:(n=t.query[e])&&void 0!==r&&(n=n[r]),n},getQueryLast:function(e,t){var n=r.getQuery(e);return n?n[n.length-1]:t}};return r},c.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},c.setPath=function(e,t,r){if("object"==typeof e&&null!==e)for(var n=0,i=t.length;n<i;){var s=t[n++];if(n==i)e[s]=r;else{var o=s in e;(!o||o&&"object"!=typeof e[s]||o&&null===e[s])&&(e[s]={}),e=e[s]}}},c.getPath=function(e,t,r){for(var n=0,i=t.length,s=!0;s&&n<i&&"object"==typeof e&&null!==e;){var o=t[n++];(s=o in e)&&(e=e[o])}return s?e:r},c.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var r=0,n=t.length;r<n;){var i=t[r++];if(r==n)delete e[i];else{if(!(i in e)||"object"!=typeof e[i]||null===e[i])break;e=e[i]}}},c.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},c.format=function(e){for(var t,r,n=/%./g,i=0,s=[],o=0;t=n.exec(e);){(r=e.substring(o,n.lastIndex-2)).length>0&&s.push(r),o=n.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[1+i++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")},c.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,a=void 0===n?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",h=u.length>3?u.length%3:0;return c+(h?u.substr(0,h)+a:"")+u.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-u).toFixed(s).slice(2):"")},c.formatSize=function(e){return e=e>=1073741824?c.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?c.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?c.formatNumber(e/1024,0)+" KiB":c.formatNumber(e,0)+" bytes"},c.bytesFromIP=function(e){return-1!==e.indexOf(".")?c.bytesFromIPv4(e):-1!==e.indexOf(":")?c.bytesFromIPv6(e):null},c.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=c.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},c.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),n=c.createBuffer(),i=0;i<8;++i)if(e[i]&&0!==e[i].length){var s=c.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}else n.fillWithByte(0,r),r=0;return n.getBytes()},c.bytesToIP=function(e){return 4===e.length?c.bytesToIPv4(e):16===e.length?c.bytesToIPv6(e):null},c.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},c.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=c.bytesToHex(e[i]+e[i+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var o=r[r.length-1],a=t.length;o&&a===o.end+1?(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:a,end:a})}t.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),0===u.start&&t.unshift(""),7===u.end&&t.push(""))}return t.join(":")},c.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in c&&!e.update)return t(null,c.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return c.cores=navigator.hardwareConcurrency,t(null,c.cores);if("undefined"==typeof Worker)return c.cores=1,t(null,c.cores);if("undefined"==typeof Blob)return c.cores=2,t(null,c.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(n,i,s){if(0===i){var o=Math.floor(n.reduce((function(e,t){return e+t}),0)/n.length);return c.cores=Math.max(1,o),URL.revokeObjectURL(r),t(null,c.cores)}!function(e,t){for(var n=[],i=[],s=0;s<e;++s){var o=new Worker(r);o.addEventListener("message",(function(r){if(i.push(r.data),i.length===e){for(var s=0;s<e;++s)n[s].terminate();t(null,i)}})),n.push(o)}for(s=0;s<e;++s)n[s].postMessage(s)}(s,(function(t,r){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],s=r[n]=[],o=0;o<e;++o)if(n!==o){var a=t[o];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&s.push(o)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(s,r)),e(n,i-1,s)}))}([],5,16)}}).call(this,r(/*! ./../../../../process/browser.js */2),r(/*! ./../../../../timers-browserify/main.js */41).setImmediate,r(/*! ./../../../../webpack/buildin/global.js */10),r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************!*\
  !*** ./node_modules/pull-stream/pull.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function e(t){var r=arguments.length;if("function"==typeof t&&1===t.length){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(t){if(null==n)throw new TypeError("partial sink should only be called once!");var i=n;switch(n=null,r){case 1:return e(t,i[0]);case 2:return e(t,i[0],i[1]);case 3:return e(t,i[0],i[1],i[2]);case 4:return e(t,i[0],i[1],i[2],i[3]);default:return i.unshift(t),e.apply(null,i)}}}var s=t;s&&"function"==typeof s.source&&(s=s.source);for(i=1;i<r;i++){var o=arguments[i];"function"==typeof o?s=o(s):o&&"object"==typeof o&&(o.sink(s),s=o.source)}return s}},
/*!**************************************************************!*\
  !*** ./node_modules/lit-element/lit-element.js + 16 modules ***!
  \**************************************************************/
/*! exports provided: html, svg, TemplateResult, SVGTemplateResult, LitElement, defaultConverter, notEqual, UpdatingElement, customElement, property, query, queryAll, eventOptions, supportsAdoptingStyleSheets, CSSResult, unsafeCSS, css */
/*! exports used: LitElement, css, customElement, html, property */function(e,t,r){"use strict";
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const n=new WeakMap,i=e=>"function"==typeof e&&n.has(e),s=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,o=(e,t,r=null)=>{for(;t!==r;){const r=t.nextSibling;e.removeChild(t),t=r}},a={},c={},u=`{{lit-${String(Math.random()).slice(2)}}}`,h=`\x3c!--${u}--\x3e`,l=new RegExp(`${u}|${h}`),f="$lit$";class d{constructor(e,t){this.parts=[],this.element=t;const r=[],n=[],i=document.createTreeWalker(t.content,133,null,!1);let s=0,o=-1,a=0;const{strings:c,values:{length:h}}=e;for(;a<h;){const e=i.nextNode();if(null!==e){if(o++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:r}=t;let n=0;for(let e=0;e<r;e++)p(t[e].name,f)&&n++;for(;n-- >0;){const t=c[a],r=y.exec(t)[2],n=r.toLowerCase()+f,i=e.getAttribute(n);e.removeAttribute(n);const s=i.split(l);this.parts.push({type:"attribute",index:o,name:r,strings:s}),a+=s.length-1}}"TEMPLATE"===e.tagName&&(n.push(e),i.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(u)>=0){const n=e.parentNode,i=t.split(l),s=i.length-1;for(let t=0;t<s;t++){let r,s=i[t];if(""===s)r=g();else{const e=y.exec(s);null!==e&&p(e[2],f)&&(s=s.slice(0,e.index)+e[1]+e[2].slice(0,-f.length)+e[3]),r=document.createTextNode(s)}n.insertBefore(r,e),this.parts.push({type:"node",index:++o})}""===i[s]?(n.insertBefore(g(),e),r.push(e)):e.data=i[s],a+=s}}else if(8===e.nodeType)if(e.data===u){const t=e.parentNode;null!==e.previousSibling&&o!==s||(o++,t.insertBefore(g(),e)),s=o,this.parts.push({type:"node",index:o}),null===e.nextSibling?e.data="":(r.push(e),o--),a++}else{let t=-1;for(;-1!==(t=e.data.indexOf(u,t+1));)this.parts.push({type:"node",index:-1}),a++}}else i.currentNode=n.pop()}for(const e of r)e.parentNode.removeChild(e)}}const p=(e,t)=>{const r=e.length-t.length;return r>=0&&e.slice(r)===t},A=e=>-1!==e.index,g=()=>document.createComment(""),y=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class m{constructor(e,t,r){this.__parts=[],this.template=e,this.processor=t,this.options=r}update(e){let t=0;for(const r of this.__parts)void 0!==r&&r.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=s?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],r=this.template.parts,n=document.createTreeWalker(e,133,null,!1);let i,o=0,a=0,c=n.nextNode();for(;o<r.length;)if(i=r[o],A(i)){for(;a<i.index;)a++,"TEMPLATE"===c.nodeName&&(t.push(c),n.currentNode=c.content),null===(c=n.nextNode())&&(n.currentNode=t.pop(),c=n.nextNode());if("node"===i.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(c.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,i.name,i.strings,this.options));o++}else this.__parts.push(void 0),o++;return s&&(document.adoptNode(e),customElements.upgrade(e)),e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const _=` ${u} `;class b{constructor(e,t,r,n){this.strings=e,this.values=t,this.type=r,this.processor=n}getHTML(){const e=this.strings.length-1;let t="",r=!1;for(let n=0;n<e;n++){const e=this.strings[n],i=e.lastIndexOf("\x3c!--");r=(i>-1||r)&&-1===e.indexOf("--\x3e",i+1);const s=y.exec(e);t+=null===s?e+(r?_:h):e.substr(0,s.index)+s[1]+s[2]+f+s[3]+u}return t+=this.strings[e]}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const w=e=>null===e||!("object"==typeof e||"function"==typeof e),v=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class E{constructor(e,t,r){this.dirty=!0,this.element=e,this.name=t,this.strings=r,this.parts=[];for(let e=0;e<r.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new S(this)}_getValue(){const e=this.strings,t=e.length-1;let r="";for(let n=0;n<t;n++){r+=e[n];const t=this.parts[n];if(void 0!==t){const e=t.value;if(w(e)||!v(e))r+="string"==typeof e?e:String(e);else for(const t of e)r+="string"==typeof t?t:String(t)}}return r+=e[t]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class S{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===a||w(e)&&e===this.value||(this.value=e,i(e)||(this.committer.dirty=!0))}commit(){for(;i(this.value);){const e=this.value;this.value=a,e(this)}this.value!==a&&this.committer.commit()}}class C{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(g()),this.endNode=e.appendChild(g())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=g()),e.__insert(this.endNode=g())}insertAfterPart(e){e.__insert(this.startNode=g()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){for(;i(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=a,e(this)}const e=this.__pendingValue;e!==a&&(w(e)?e!==this.value&&this.__commitText(e):e instanceof b?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):v(e)?this.__commitIterable(e):e===c?(this.value=c,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,r="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=r:this.__commitNode(document.createTextNode(r)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof m&&this.value.template===t)this.value.update(e.values);else{const r=new m(t,e.processor,this.options),n=r._clone();r.update(e.values),this.__commitNode(n),this.value=r}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let r,n=0;for(const i of e)void 0===(r=t[n])&&(r=new C(this.options),t.push(r),0===n?r.appendIntoPart(this):r.insertAfterPart(t[n-1])),r.setValue(i),r.commit(),n++;n<t.length&&(t.length=n,this.clear(r&&r.endNode))}clear(e=this.startNode){o(this.startNode.parentNode,e.nextSibling,this.endNode)}}class k{constructor(e,t,r){if(this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=r}setValue(e){this.__pendingValue=e}commit(){for(;i(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=a,e(this)}if(this.__pendingValue===a)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=a}}class I extends E{constructor(e,t,r){super(e,t,r),this.single=2===r.length&&""===r[0]&&""===r[1]}_createPart(){return new T(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class T extends S{}let R=!1;try{const e={get capture(){return R=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}class N{constructor(e,t,r){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=r,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;i(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=a,e(this)}if(this.__pendingValue===a)return;const e=this.__pendingValue,t=this.value,r=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),n=null!=e&&(null==t||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=B(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=a}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const B=e=>e&&(R?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const O=new class{handleAttributeExpressions(e,t,r,n){const i=t[0];if("."===i){return new I(e,t.slice(1),r).parts}return"@"===i?[new N(e,t.slice(1),n.eventContext)]:"?"===i?[new k(e,t.slice(1),r)]:new E(e,t,r).parts}handleTextExpression(e){return new C(e)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function P(e){let t=x.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},x.set(e.type,t));let r=t.stringsArray.get(e.strings);if(void 0!==r)return r;const n=e.strings.join(u);return void 0===(r=t.keyString.get(n))&&(r=new d(e,e.getTemplateElement()),t.keyString.set(n,r)),t.stringsArray.set(e.strings,r),r}const x=new Map,L=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.2");const D=(e,...t)=>new b(e,t,"html",O),M=133;function U(e,t){const{element:{content:r},parts:n}=e,i=document.createTreeWalker(r,M,null,!1);let s=F(n),o=n[s],a=-1,c=0;const u=[];let h=null;for(;i.nextNode();){a++;const e=i.currentNode;for(e.previousSibling===h&&(h=null),t.has(e)&&(u.push(e),null===h&&(h=e)),null!==h&&c++;void 0!==o&&o.index===a;)o.index=null!==h?-1:o.index-c,o=n[s=F(n,s)]}u.forEach(e=>e.parentNode.removeChild(e))}const K=e=>{let t=11===e.nodeType?0:1;const r=document.createTreeWalker(e,M,null,!1);for(;r.nextNode();)t++;return t},F=(e,t=-1)=>{for(let r=t+1;r<e.length;r++){const t=e[r];if(A(t))return r}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const z=(e,t)=>`${e}--${t}`;let j=!0;void 0===window.ShadyCSS?j=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),j=!1);const H=e=>t=>{const r=z(t.type,e);let n=x.get(r);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},x.set(r,n));let i=n.stringsArray.get(t.strings);if(void 0!==i)return i;const s=t.strings.join(u);if(void 0===(i=n.keyString.get(s))){const r=t.getTemplateElement();j&&window.ShadyCSS.prepareTemplateDom(r,e),i=new d(t,r),n.keyString.set(s,i)}return n.stringsArray.set(t.strings,i),i},q=["html","svg"],V=new Set,G=(e,t,r)=>{V.add(e);const n=r?r.element:document.createElement("template"),i=t.querySelectorAll("style"),{length:s}=i;if(0===s)return void window.ShadyCSS.prepareTemplateStyles(n,e);const o=document.createElement("style");for(let e=0;e<s;e++){const t=i[e];t.parentNode.removeChild(t),o.textContent+=t.textContent}(e=>{q.forEach(t=>{const r=x.get(z(t,e));void 0!==r&&r.keyString.forEach(e=>{const{element:{content:t}}=e,r=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{r.add(e)}),U(e,r)})})})(e);const a=n.content;r?function(e,t,r=null){const{element:{content:n},parts:i}=e;if(null==r)return void n.appendChild(t);const s=document.createTreeWalker(n,M,null,!1);let o=F(i),a=0,c=-1;for(;s.nextNode();){for(c++,s.currentNode===r&&(a=K(t),r.parentNode.insertBefore(t,r));-1!==o&&i[o].index===c;){if(a>0){for(;-1!==o;)i[o].index+=a,o=F(i,o);return}o=F(i,o)}}}(r,o,a.firstChild):a.insertBefore(o,a.firstChild),window.ShadyCSS.prepareTemplateStyles(n,e);const c=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==c)t.insertBefore(c.cloneNode(!0),t.firstChild);else if(r){a.insertBefore(o,a.firstChild);const e=new Set;e.add(o),U(r,e)}};window.JSCompiler_renameProperty=(e,t)=>e;const W={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},Q=(e,t)=>t!==e&&(t==t||e==e),Y={attribute:!0,type:String,converter:W,reflect:!1,hasChanged:Q},X=Promise.resolve(!0),$=1,Z=4,J=8,ee=16,te=32,re="finalized";class ne extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=X,this._hasConnectedResolver=void 0,this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,r)=>{const n=this._attributeNameForProperty(r,t);void 0!==n&&(this._attributeToPropertyMap.set(n,r),e.push(n))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e,t=Y){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const r="symbol"==typeof e?Symbol():`__${e}`;Object.defineProperty(this.prototype,e,{get(){return this[r]},set(t){const n=this[e];this[r]=t,this._requestUpdate(e,n)},configurable:!0,enumerable:!0})}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty(re)||e.finalize(),this[re]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const r of t)this.createProperty(r,e[r])}}static _attributeNameForProperty(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,r=Q){return r(e,t)}static _propertyValueFromAttribute(e,t){const r=t.type,n=t.converter||W,i="function"==typeof n?n:n.fromAttribute;return i?i(e,r):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const r=t.type,n=t.converter;return(n&&n.toAttribute||W.toAttribute)(e,r)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this._updateState=this._updateState|te,this._hasConnectedResolver&&(this._hasConnectedResolver(),this._hasConnectedResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,r){t!==r&&this._attributeToProperty(e,r)}_propertyToAttribute(e,t,r=Y){const n=this.constructor,i=n._attributeNameForProperty(e,r);if(void 0!==i){const e=n._propertyValueToAttribute(t,r);if(void 0===e)return;this._updateState=this._updateState|J,null==e?this.removeAttribute(i):this.setAttribute(i,e),this._updateState=this._updateState&~J}}_attributeToProperty(e,t){if(this._updateState&J)return;const r=this.constructor,n=r._attributeToPropertyMap.get(e);if(void 0!==n){const e=r._classProperties.get(n)||Y;this._updateState=this._updateState|ee,this[n]=r._propertyValueFromAttribute(t,e),this._updateState=this._updateState&~ee}}_requestUpdate(e,t){let r=!0;if(void 0!==e){const n=this.constructor,i=n._classProperties.get(e)||Y;n._valueHasChanged(this[e],t,i.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==i.reflect||this._updateState&ee||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,i))):r=!1}!this._hasRequestedUpdate&&r&&this._enqueueUpdate()}requestUpdate(e,t){return this._requestUpdate(e,t),this.updateComplete}async _enqueueUpdate(){let e,t;this._updateState=this._updateState|Z;const r=this._updatePromise;this._updatePromise=new Promise((r,n)=>{e=r,t=n});try{await r}catch(e){}this._hasConnected||await new Promise(e=>this._hasConnectedResolver=e);try{const e=this.performUpdate();null!=e&&await e}catch(e){t(e)}e(!this._hasRequestedUpdate)}get _hasConnected(){return this._updateState&te}get _hasRequestedUpdate(){return this._updateState&Z}get hasUpdated(){return this._updateState&$}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{(e=this.shouldUpdate(t))&&this.update(t)}catch(t){throw e=!1,t}finally{this._markUpdated()}e&&(this._updateState&$||(this._updateState=this._updateState|$,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~Z}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0)}updated(e){}firstUpdated(e){}}ne[re]=!0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const ie=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:r,elements:n}=t;return{kind:r,elements:n,finisher(t){window.customElements.define(e,t)}}})(e,t),se=(e,t)=>"method"!==t.kind||!t.descriptor||"value"in t.descriptor?{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(r){r.createProperty(t.key,e)}}:Object.assign({},t,{finisher(r){r.createProperty(t.key,e)}}),oe=(e,t,r)=>{t.constructor.createProperty(r,e)};function ae(e){return(t,r)=>void 0!==r?oe(e,t,r):se(e,t)}const ce="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ue=Symbol();class he{constructor(e,t){if(t!==ue)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(ce?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const le=(e,...t)=>{const r=t.reduce((t,r,n)=>t+(e=>{if(e instanceof he)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(r)+e[n+1],e[0]);return new he(r,ue)};r.d(t,"a",(function(){return de})),r.d(t,"c",(function(){return ie})),r.d(t,"e",(function(){return ae})),r.d(t,"d",(function(){return D})),r.d(t,"b",(function(){return le})),
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.2.1");const fe=e=>e.flat?e.flat(1/0):function e(t,r=[]){for(let n=0,i=t.length;n<i;n++){const i=t[n];Array.isArray(i)?e(i,r):r.push(i)}return r}(e);class de extends ne{static finalize(){super.finalize.call(this),this._styles=this.hasOwnProperty(JSCompiler_renameProperty("styles",this))?this._getUniqueStyles():this._styles||[]}static _getUniqueStyles(){const e=this.styles,t=[];if(Array.isArray(e)){fe(e).reduceRight((e,t)=>(e.add(t),e),new Set).forEach(e=>t.unshift(e))}else e&&t.push(e);return t}initialize(){super.initialize(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?ce?this.renderRoot.adoptedStyleSheets=e.map(e=>e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){super.update(e);const t=this.render();t instanceof b&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){}}de.finalized=!0,de.render=(e,t,r)=>{if(!r||"object"!=typeof r||!r.scopeName)throw new Error("The `scopeName` option is required.");const n=r.scopeName,i=L.has(t),s=j&&11===t.nodeType&&!!t.host,a=s&&!V.has(n),c=a?document.createDocumentFragment():t;if(((e,t,r)=>{let n=L.get(t);void 0===n&&(o(t,t.firstChild),L.set(t,n=new C(Object.assign({templateFactory:P},r))),n.appendInto(t)),n.setValue(e),n.commit()})(e,c,Object.assign({templateFactory:H(n)},r)),a){const e=L.get(c);L.delete(c);const r=e.value instanceof m?e.value.template:void 0;G(n,c,r),o(t,t.firstChild),t.appendChild(c),L.set(t,e)}!i&&s&&window.ShadyCSS.styleElement(t.host)}},
/*!*******************************************!*\
  !*** ./node_modules/callbackify/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){var t=e.length;return function(){var r=[].slice.call(arguments),n=this;if(r.length!==t+1||"function"!=typeof r[t])return e.apply(n,arguments);var i=r.pop();e.apply(this,r).then((function(e){i.call(n,null,e)}),(function(e){i.call(n,e)}))}},e.exports.variadic=function(e){return function(){var t=[].slice.call(arguments),r=this;if(!(t.length>=1&&"function"==typeof t[t.length-1]))return e.apply(r,arguments);var n=t.pop();e.apply(this,t).then((function(e){n.call(r,null,e)}),(function(e){n.call(r,e)}))}}},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/util.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t,n,i,s){var o=r(/*! ./forge */12),a=r(/*! ./baseN */749),c=e.exports=o.util=o.util||{};function u(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function h(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(c.isArrayBuffer(e)||c.isArrayBufferView(e))if(void 0!==s&&e instanceof s)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof h||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if(void 0!==t&&t.nextTick&&!t.browser)return c.nextTick=t.nextTick,void(c.setImmediate="function"==typeof n?n:c.nextTick);if("function"==typeof n)return c.setImmediate=function(){return n.apply(void 0,arguments)},void(c.nextTick=function(e){return n(e)});if(c.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",r=[];c.setImmediate=function(t){r.push(t),1===r.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(t){if(t.source===window&&t.data===e){t.stopPropagation();var n=r.slice();r.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!=typeof MutationObserver){var i=Date.now(),s=!0,o=document.createElement("div");r=[];new MutationObserver((function(){var e=r.slice();r.length=0,e.forEach((function(e){e()}))})).observe(o,{attributes:!0});var a=c.setImmediate;c.setImmediate=function(e){Date.now()-i>15?(i=Date.now(),a(e)):(r.push(e),1===r.length&&o.setAttribute("a",s=!s))}}c.nextTick=c.setImmediate}(),c.isNodejs=void 0!==t&&t.versions&&t.versions.node,c.globalScope=c.isNodejs?i:"undefined"==typeof self?window:self,c.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},c.isArrayBufferView=function(e){return e&&c.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},c.ByteBuffer=h,c.ByteStringBuffer=h;c.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},c.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},c.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},c.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},c.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},c.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},c.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(c.encodeUtf8(e))},c.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},c.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},c.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},c.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},c.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},c.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},c.ByteStringBuffer.prototype.putInt=function(e,t){u(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},c.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},c.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},c.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},c.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},c.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},c.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},c.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},c.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},c.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},c.ByteStringBuffer.prototype.getInt=function(e){u(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},c.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},c.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},c.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},c.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},c.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},c.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},c.ByteStringBuffer.prototype.copy=function(){var e=c.createBuffer(this.data);return e.read=this.read,e},c.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},c.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},c.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},c.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},c.ByteStringBuffer.prototype.toString=function(){return c.decodeUtf8(this.bytes())},c.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=c.isArrayBuffer(e),n=c.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},c.DataBuffer.prototype.length=function(){return this.write-this.read},c.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},c.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},c.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},c.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},c.DataBuffer.prototype.putBytes=function(e,t){if(c.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(c.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof c.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&c.isArrayBufferView(e.data)){n=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(e instanceof c.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var i;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.hex.decode(e,i,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.base64.decode(e,i,this.write),this;if("utf8"===t&&(e=c.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=c.binary.raw.decode(i),this;if("utf16"===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=c.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},c.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},c.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},c.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},c.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},c.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},c.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},c.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},c.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},c.DataBuffer.prototype.putInt=function(e,t){u(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},c.DataBuffer.prototype.putSignedInt=function(e,t){return u(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},c.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},c.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},c.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},c.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},c.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},c.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},c.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},c.DataBuffer.prototype.getInt=function(e){u(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},c.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},c.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},c.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},c.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},c.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},c.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},c.DataBuffer.prototype.copy=function(){return new c.DataBuffer(this)},c.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},c.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},c.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},c.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},c.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return c.binary.raw.encode(t);if("hex"===e)return c.binary.hex.encode(t);if("base64"===e)return c.binary.base64.encode(t);if("utf8"===e)return c.text.utf8.decode(t);if("utf16"===e)return c.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},c.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=c.encodeUtf8(e)),new c.ByteBuffer(e)},c.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},c.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s},c.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},c.bytesToHex=function(e){return c.createBuffer(e).toHex()},c.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";c.encode64=function(e,t){for(var r,n,i,s="",o="",a=0;a<e.length;)r=e.charCodeAt(a++),n=e.charCodeAt(a++),i=e.charCodeAt(a++),s+=l.charAt(r>>2),s+=l.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=l.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":l.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+"\r\n",s=s.substr(t));return o+=s},c.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,s="",o=0;o<e.length;)t=f[e.charCodeAt(o++)-43],r=f[e.charCodeAt(o++)-43],n=f[e.charCodeAt(o++)-43],i=f[e.charCodeAt(o++)-43],s+=String.fromCharCode(t<<2|r>>4),64!==n&&(s+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(s+=String.fromCharCode((3&n)<<6|i)));return s},c.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},c.decodeUtf8=function(e){return decodeURIComponent(escape(e))},c.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a.encode,decode:a.decode}},c.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},c.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},c.binary.hex.encode=c.bytesToHex,c.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,s=r=r||0;for(1&e.length&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n},c.binary.base64.encode=function(e,t){for(var r,n,i,s="",o="",a=0;a<e.byteLength;)r=e[a++],n=e[a++],i=e[a++],s+=l.charAt(r>>2),s+=l.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=l.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":l.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+"\r\n",s=s.substr(t));return o+=s},c.binary.base64.decode=function(e,t,r){var n,i,s,o,a=t;a||(a=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,u=r=r||0;c<e.length;)n=f[e.charCodeAt(c++)-43],i=f[e.charCodeAt(c++)-43],s=f[e.charCodeAt(c++)-43],o=f[e.charCodeAt(c++)-43],a[u++]=n<<2|i>>4,64!==s&&(a[u++]=(15&i)<<4|s>>2,64!==o&&(a[u++]=(3&s)<<6|o));return t?u-r:a.subarray(0,u)},c.binary.base58.encode=function(e,t){return c.binary.baseN.encode(e,d,t)},c.binary.base58.decode=function(e,t){return c.binary.baseN.decode(e,d,t)},c.text={utf8:{},utf16:{}},c.text.utf8.encode=function(e,t,r){e=c.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},c.text.utf8.decode=function(e){return c.decodeUtf8(String.fromCharCode.apply(null,e))},c.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),s=r=r||0,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n},c.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},c.deflate=function(e,t,r){if(t=c.decode64(e.deflate(c.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},c.inflate=function(e,t,r){var n=e.inflate(c.encode64(t)).rval;return null===n?null:c.decode64(n)};var p=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=c.encode64(JSON.stringify(r)),n=e.setItem(t,r)),void 0!==n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},A=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(c.decode64(r))),r},g=function(e,t,r,n){var i=A(e,t);null===i&&(i={}),i[r]=n,p(e,t,i)},y=function(e,t,r){var n=A(e,t);return null!==n&&(n=r in n?n[r]:null),n},m=function(e,t,r){var n=A(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),p(e,t,n)}},_=function(e,t){p(e,t,null)},b=function(e,t,r){var n,i=null;void 0===r&&(r=["web","flash"]);var s=!1,o=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),s="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),s=!0)}catch(e){o=e}if(s)break}if(!s)throw o;return i};c.setItem=function(e,t,r,n,i){b(g,arguments,i)},c.getItem=function(e,t,r,n){return b(y,arguments,n)},c.removeItem=function(e,t,r,n){b(m,arguments,n)},c.clearItems=function(e,t,r){b(_,arguments,r)},c.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=null===r?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?80!==n.port&&"http"===n.scheme?n.fullHost+=":"+n.port:443!==n.port&&"https"===n.scheme&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var w=null;c.getQueryVariables=function(e){var t,r=function(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var i,s,o=r[n].indexOf("=");o>0?(i=r[n].substring(0,o),s=r[n].substring(o+1)):(i=r[n],s=null),i in t||(t[i]=[]),i in Object.prototype||null===s||t[i].push(unescape(s))}return t};return void 0===e?(null===w&&(w="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),t=w):t=r(e),t},c.parseFragment=function(e){var t=e,r="",n=e.indexOf("?");n>0&&(t=e.substring(0,n),r=e.substring(n+1));var i=t.split("/");return i.length>0&&""===i[0]&&i.shift(),{pathString:t,queryString:r,path:i,query:""===r?{}:c.getQueryVariables(r)}},c.makeRequest=function(e){var t=c.parseFragment(e),r={path:t.pathString,query:t.queryString,getPath:function(e){return void 0===e?t.path:t.path[e]},getQuery:function(e,r){var n;return void 0===e?n=t.query:(n=t.query[e])&&void 0!==r&&(n=n[r]),n},getQueryLast:function(e,t){var n=r.getQuery(e);return n?n[n.length-1]:t}};return r},c.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},c.setPath=function(e,t,r){if("object"==typeof e&&null!==e)for(var n=0,i=t.length;n<i;){var s=t[n++];if(n==i)e[s]=r;else{var o=s in e;(!o||o&&"object"!=typeof e[s]||o&&null===e[s])&&(e[s]={}),e=e[s]}}},c.getPath=function(e,t,r){for(var n=0,i=t.length,s=!0;s&&n<i&&"object"==typeof e&&null!==e;){var o=t[n++];(s=o in e)&&(e=e[o])}return s?e:r},c.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var r=0,n=t.length;r<n;){var i=t[r++];if(r==n)delete e[i];else{if(!(i in e)||"object"!=typeof e[i]||null===e[i])break;e=e[i]}}},c.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},c.format=function(e){for(var t,r,n=/%./g,i=0,s=[],o=0;t=n.exec(e);){(r=e.substring(o,n.lastIndex-2)).length>0&&s.push(r),o=n.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[1+i++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")},c.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,a=void 0===n?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",h=u.length>3?u.length%3:0;return c+(h?u.substr(0,h)+a:"")+u.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-u).toFixed(s).slice(2):"")},c.formatSize=function(e){return e=e>=1073741824?c.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?c.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?c.formatNumber(e/1024,0)+" KiB":c.formatNumber(e,0)+" bytes"},c.bytesFromIP=function(e){return-1!==e.indexOf(".")?c.bytesFromIPv4(e):-1!==e.indexOf(":")?c.bytesFromIPv6(e):null},c.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=c.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},c.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),n=c.createBuffer(),i=0;i<8;++i)if(e[i]&&0!==e[i].length){var s=c.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}else n.fillWithByte(0,r),r=0;return n.getBytes()},c.bytesToIP=function(e){return 4===e.length?c.bytesToIPv4(e):16===e.length?c.bytesToIPv6(e):null},c.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},c.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=c.bytesToHex(e[i]+e[i+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var o=r[r.length-1],a=t.length;o&&a===o.end+1?(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:a,end:a})}t.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),0===u.start&&t.unshift(""),7===u.end&&t.push(""))}return t.join(":")},c.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in c&&!e.update)return t(null,c.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return c.cores=navigator.hardwareConcurrency,t(null,c.cores);if("undefined"==typeof Worker)return c.cores=1,t(null,c.cores);if("undefined"==typeof Blob)return c.cores=2,t(null,c.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(n,i,s){if(0===i){var o=Math.floor(n.reduce((function(e,t){return e+t}),0)/n.length);return c.cores=Math.max(1,o),URL.revokeObjectURL(r),t(null,c.cores)}!function(e,t){for(var n=[],i=[],s=0;s<e;++s){var o=new Worker(r);o.addEventListener("message",(function(r){if(i.push(r.data),i.length===e){for(var s=0;s<e;++s)n[s].terminate();t(null,i)}})),n.push(o)}for(s=0;s<e;++s)n[s].postMessage(s)}(s,(function(t,r){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],s=r[n]=[],o=0;o<e;++o)if(n!==o){var a=t[o];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&s.push(o)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(s,r)),e(n,i-1,s)}))}([],5,16)}}).call(this,r(/*! ./../../../../process/browser.js */2),r(/*! ./../../../../timers-browserify/main.js */41).setImmediate,r(/*! ./../../../../webpack/buildin/global.js */10),r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************!*\
  !*** ./node_modules/peer-info/src/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! peer-id */7),{ensureMultiaddr:i}=r(/*! ./utils */332),s=r(/*! ./multiaddr-set */657),o=r(/*! assert */24);class a{constructor(e){o(e,"Missing peerId. Use Peer.create(cb) to create one"),this.id=e,this.multiaddrs=new s,this.protocols=new Set,this._connectedMultiaddr=void 0}connect(e){if(e=i(e),!this.multiaddrs.has(e)&&e.toString()!==`/ipfs/${this.id.toB58String()}`)throw new Error("can't be connected to missing multiaddr from set");this._connectedMultiaddr=e}disconnect(){this._connectedMultiaddr=void 0}isConnected(){return this._connectedMultiaddr}}a.create=(e,t)=>{if("function"==typeof e)return t=e,e=null,void n.create((e,r)=>{if(e)return t(e);t(null,new a(r))});"function"==typeof e.toJSON?t(null,new a(e)):n.createFromJSON(e,(e,r)=>t(e,new a(r)))},a.isPeerInfo=e=>Boolean("object"==typeof e&&e.id&&e.multiaddrs),e.exports=a},
/*!**********************************************************!*\
  !*** ./node_modules/ipfs/node_modules/err-code/index.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?r=t:null!=t&&(e.code=t),r)for(n in r)e[n]=r[n];return e}},
/*!**************************************!*\
  !*** ./node_modules/varint/index.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={encode:r(/*! ./encode.js */530),decode:r(/*! ./decode.js */531),encodingLength:r(/*! ./length.js */532)}},
/*!***************************************!*\
  !*** ./node_modules/assert/assert.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){var n=r(/*! object-assign */559);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function s(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=r(/*! util/ */99),a=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u="foo"===function(){}.name;function h(e){return Object.prototype.toString.call(e)}function l(e){return!s(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var f=e.exports=m,d=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(o.isFunction(e)){if(u)return e.name;var t=e.toString().match(d);return t&&t[1]}}function A(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(u||!o.isFunction(e))return o.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function y(e,t,r,n,i){throw new f.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function m(e,t){e||y(e,!0,t,"==",f.ok)}function _(e,t,r,n){if(e===t)return!0;if(s(e)&&s(t))return 0===i(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&h(e)===h(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(s(e)!==s(t))return!1;var a=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==a&&a===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=b(e),s=b(t);if(i&&!s||!i&&s)return!1;if(i)return e=c.call(e),t=c.call(t),_(e,t,r);var a,u,h=E(e),l=E(t);if(h.length!==l.length)return!1;for(h.sort(),l.sort(),u=h.length-1;u>=0;u--)if(h[u]!==l[u])return!1;for(u=h.length-1;u>=0;u--)if(a=h[u],!_(e[a],t[a],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function b(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function v(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&y(i,r,"Missing expected exception"+n);var s="string"==typeof n,a=!e&&i&&!r;if((!e&&o.isError(i)&&s&&w(i,r)||a)&&y(i,r,"Got unwanted exception"+n),e&&i&&r&&!w(i,r)||!e&&i)throw i}f.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return A(g(e.actual),128)+" "+e.operator+" "+A(g(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=p(t),s=n.indexOf("\n"+i);if(s>=0){var o=n.indexOf("\n",s+1);n=n.substring(o+1)}this.stack=n}}},o.inherits(f.AssertionError,Error),f.fail=y,f.ok=m,f.equal=function(e,t,r){e!=t&&y(e,t,r,"==",f.equal)},f.notEqual=function(e,t,r){e==t&&y(e,t,r,"!=",f.notEqual)},f.deepEqual=function(e,t,r){_(e,t,!1)||y(e,t,r,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,r){_(e,t,!0)||y(e,t,r,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,r){_(e,t,!1)&&y(e,t,r,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,r,n){_(t,r,!0)&&y(t,r,n,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,r){e!==t&&y(e,t,r,"===",f.strictEqual)},f.notStrictEqual=function(e,t,r){e===t&&y(e,t,r,"!==",f.notStrictEqual)},f.throws=function(e,t,r){v(!0,e,t,r)},f.doesNotThrow=function(e,t,r){v(!1,e,t,r)},f.ifError=function(e){if(e)throw e},f.strict=n((function e(t,r){t||y(t,!0,r,"==",e)}),f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var E=Object.keys||function(e){var t=[];for(var r in e)a.call(e,r)&&t.push(r);return t}}).call(this,r(/*! ./../webpack/buildin/global.js */10))},
/*!*******************************************!*\
  !*** ./node_modules/pull-stream/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./sources */784),i=r(/*! ./sinks */788),s=r(/*! ./throughs */793);for(var o in(t=e.exports=r(/*! ./pull */17)).pull=t,n)t[o]=n[o];for(var o in s)t[o]=s[o];for(var o in i)t[o]=i[o]},
/*!**************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/utils.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! debug */1),i=r(/*! multihashing-async */441),s=r(/*! multihashes */13),o=r(/*! interface-datastore */14).Key,a=r(/*! base32.js */142),c=r(/*! xor-distance */240),u=r(/*! async/map */116),h=r(/*! libp2p-record */118).Record,l=r(/*! async/setImmediate */32),f=r(/*! peer-id */7),d=r(/*! err-code */8);t.convertBuffer=(e,t)=>{i.digest(e,"sha2-256",t)},t.convertPeerId=(e,t)=>{i.digest(e.id,"sha2-256",t)},t.bufferToKey=e=>new o("/"+t.encodeBase32(e),!1),t.keyForPublicKey=t=>e.concat([e.from("/pk/"),t.id]),t.isPublicKeyKey=e=>"/pk/"===e.slice(0,4).toString(),t.fromPublicKeyKey=e=>new f(e.slice(4)),t.now=()=>Date.now(),t.encodeBase32=e=>{return(new a.Encoder).write(e).finalize()},t.decodeBase32=t=>{const r=new a.Decoder;return e.from(r.write(t).finalize())},t.sortClosestPeers=(e,r,n)=>{u(e,(e,n)=>{t.convertPeerId(e,(t,i)=>{if(t)return n(t);n(null,{peer:e,distance:c(i,r)})})},(e,r)=>{if(e)return n(e);n(null,r.sort(t.xorCompare).map(e=>e.peer))})},t.xorCompare=(e,t)=>c.compare(e.distance,t.distance),t.pathSize=(e,t)=>Math.ceil(e/t),t.createPutRecord=(e,t,r)=>{const n=new Date,i=new h(e,t,n);l(()=>{r(null,i.serialize())})},t.logger=(e,t)=>{const r=["libp2p","dht"];t&&r.push(t),e&&r.push(`${e.toB58String().slice(0,8)}`),n.formatters.b=e=>s.toB58String(e);const i=n(r.join(":"));return i.error=n(r.concat(["error"]).join(":")),i},t.TimeoutError=class extends Error{get code(){return"ETIMEDOUT"}},t.withTimeout=(e,t)=>async(...r)=>Promise.race([e(...r),new Promise((e,r)=>{setTimeout(()=>{r(d(new Error("Async function did not complete before timeout"),"ETIMEDOUT"))},t)})])}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/multicodec/src/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n){const i=r(/*! varint */23),s=r(/*! ./varint-table */539),o=r(/*! ./name-table */278),a=r(/*! ./util */277);(t=e.exports).addPrefix=(e,t)=>{let r;if(n.isBuffer(e))r=a.varintBufferEncode(e);else{if(!s[e])throw new Error("multicodec not recognized");r=s[e]}return n.concat([r,t])},t.rmPrefix=e=>(i.decode(e),e.slice(i.decode.bytes)),t.getCodec=e=>{const t=a.varintBufferDecode(e),r=o[t.toString("hex")];if(void 0===r)throw new Error("Code `0x"+t.toString("hex")+"` not found");return r},t.getName=e=>o[e.toString(16)],t.getNumber=e=>{const t=s[e];if(void 0===t)throw new Error("Codec `"+e+"` not found");return a.varintBufferDecode(t)[0]},t.getCode=e=>i.decode(e),t.getCodeVarint=e=>{const t=s[e];if(void 0===t)throw new Error("Codec `"+e+"` not found");return t},t.getVarint=e=>i.encode(e);const c=r(/*! ./constants */540);Object.assign(t,c),t.print=r(/*! ./print */541)}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************!*\
  !*** ./node_modules/protons/src/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){var n=r(/*! protocol-buffers-schema */562),i=r(/*! ./compile */566);e.exports=function(e,r){if(r||(r={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var s="object"!=typeof e||t.isBuffer(e)?n.parse(e):e,o=function(){var e=this;i(s,r.encodings||{}).forEach((function(t){e[t.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(r){t[r]=e[r].value})),t}(t.values)||t}))};return o.prototype.toString=function(){return n.stringify(s)},o.prototype.toJSON=function(){return s},new o}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.DAGNode=r(/*! ./dag-node */557),t.DAGLink=r(/*! ./dag-link */295),t.resolver=r(/*! ./resolver */576),t.util=r(/*! ./util */296),t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg},
/*!********************************************************!*\
  !*** ./node_modules/pull-length-prefixed/src/index.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./encode */781),i=r(/*! ./decode */782);t.encode=n,t.decode=i.decode,t.decodeFromReader=i.decodeFromReader},
/*!***********************************!*\
  !*** ./node_modules/once/once.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! wrappy */835);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(i),e.exports.strict=n(s),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},
/*!********************************************!*\
  !*** ./node_modules/async/setImmediate.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(/*! ./internal/setImmediate */135),s=(n=i)&&n.__esModule?n:{default:n};t.default=s.default,e.exports=t.default},
/*!**************************************************!*\
  !*** ./node_modules/async/internal/wrapAsync.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=void 0;var n,i=r(/*! ../asyncify */647),s=(n=i)&&n.__esModule?n:{default:n};var o="function"==typeof Symbol;function a(e){return o&&"AsyncFunction"===e[Symbol.toStringTag]}t.default=function(e){return a(e)?(0,s.default)(e):e},t.isAsync=a},
/*!****************************************!*\
  !*** ./node_modules/class-is/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,{className:t,symbolName:r}){const n=Symbol.for(r),i={[t]:class extends e{constructor(...e){super(...e),Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return t}}}[t];return i[`is${t}`]=e=>!(!e||!e[n]),i},e.exports.proto=function(e,{className:t,symbolName:r,withoutNew:n}){const i=Symbol.for(r),s={[t]:function(...t){if(n&&!(this instanceof s))return new s(...t);const r=e.call(this,...t)||this;return r&&!r[i]&&Object.defineProperty(r,i,{value:!0}),r}}[t];return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get:()=>t}),s[`is${t}`]=e=>!(!e||!e[i]),s}},
/*!****************************************!*\
  !*** ./node_modules/async/nextTick.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n,i){Object.defineProperty(t,"__esModule",{value:!0});var s,o=r(/*! ./internal/setImmediate */135);s=o.hasNextTick?n.nextTick:o.hasSetImmediate?i:o.fallback,t.default=(0,o.wrap)(s),e.exports=t.default}).call(this,r(/*! ./../process/browser.js */2),r(/*! ./../timers-browserify/main.js */41).setImmediate)},
/*!*************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./hmac */331),i=r(/*! ./aes */659),s=r(/*! ./keys */298);(t=e.exports).aes=i,t.hmac=n,t.keys=s,t.randomBytes=r(/*! ./random-bytes */192),t.pbkdf2=r(/*! ./pbkdf2 */671)},
/*!**********************************************************!*\
  !*** ./node_modules/readable-stream/readable-browser.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(t=e.exports=r(/*! ./lib/_stream_readable.js */357)).Stream=t,t.Readable=t,t.Writable=r(/*! ./lib/_stream_writable.js */361),t.Duplex=r(/*! ./lib/_stream_duplex.js */82),t.Transform=r(/*! ./lib/_stream_transform.js */362),t.PassThrough=r(/*! ./lib/_stream_passthrough.js */715),t.finished=r(/*! ./lib/internal/streams/end-of-stream.js */210),t.pipeline=r(/*! ./lib/internal/streams/pipeline.js */716)},
/*!********************************************************!*\
  !*** ./node_modules/interface-connection/src/index.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.Connection=r(/*! ./connection */892)},
/*!***********************************************!*\
  !*** ./node_modules/ipfs-unixfs/src/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! protons */28)(r(/*! ./unixfs.proto */1109)).Data,i=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],s=["directory","hamt-sharded-directory"];function o(e,t){if(!(this instanceof o))return new o(e,t);if(-1===i.indexOf(e))throw new Error("Type: "+e+" is not valid");this.type=e,this.data=t,this.blockSizes=[],this.addBlockSize=e=>{this.blockSizes.push(e)},this.removeBlockSize=e=>{this.blockSizes.splice(e,1)},this.fileSize=()=>{if(s.indexOf(this.type)>=0)return;let e=0;return this.blockSizes.forEach(t=>{e+=t}),t&&(e+=t.length),e},this.marshal=()=>{let e;switch(this.type){case"raw":e=n.DataType.Raw;break;case"directory":e=n.DataType.Directory;break;case"file":e=n.DataType.File;break;case"metadata":e=n.DataType.Metadata;break;case"symlink":e=n.DataType.Symlink;break;case"hamt-sharded-directory":e=n.DataType.HAMTShard;break;default:throw new Error(`Unkown type: "${this.type}"`)}let t=this.fileSize(),r=this.data;this.data&&this.data.length||(r=void 0);let i=this.blockSizes;return this.blockSizes&&this.blockSizes.length||(i=void 0),n.encode({Type:e,Data:r,filesize:t,blocksizes:i,hashType:this.hashType,fanout:this.fanout})}}o.unmarshal=e=>{const t=n.decode(e);t.Data||(t.Data=void 0);const r=new o(i[t.Type],t.Data);return r.blockSizes=t.blocksizes,r},e.exports=o},
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/global.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||Function("return this")()}).call(this,r(/*! ./../../webpack/buildin/global.js */10))},
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new s(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(/*! setimmediate */579),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(/*! ./../webpack/buildin/global.js */10))},
/*!*************************************!*\
  !*** ./node_modules/lodash/noop.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(){}},
/*!*****************************************!*\
  !*** ./node_modules/mafmt/src/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multiaddr */15),i=T("dns4"),s=T("dns6"),o=I(T("dns"),T("dnsaddr"),i,s),a=I(T("ip4"),T("ip6")),c=I(k(a,T("tcp")),k(o,T("tcp"))),u=k(a,T("udp")),h=k(u,T("utp")),l=I(k(c,T("ws")),k(o,T("ws"))),f=I(k(c,T("wss")),k(o,T("wss"))),d=I(k(c,T("http")),k(a,T("http")),k(o,T("http"))),p=I(k(c,T("https")),k(a,T("https")),k(o,T("https"))),A=I(k(l,T("p2p-webrtc-star"),T("ipfs")),k(f,T("p2p-webrtc-star"),T("ipfs")),k(l,T("p2p-webrtc-star"),T("p2p")),k(f,T("p2p-webrtc-star"),T("p2p"))),g=I(k(l,T("p2p-websocket-star"),T("ipfs")),k(f,T("p2p-websocket-star"),T("ipfs")),k(l,T("p2p-websocket-star"),T("p2p")),k(f,T("p2p-websocket-star"),T("p2p")),k(l,T("p2p-websocket-star")),k(f,T("p2p-websocket-star"))),y=I(k(d,T("p2p-webrtc-direct")),k(p,T("p2p-webrtc-direct"))),m=I(l,f,d,p,A,y,c,h),_=I(k(m,T("p2p-stardust"),T("ipfs")),k(m,T("p2p-stardust"))),b=I(k(m,T("ipfs")),k(m,T("p2p")),A,T("ipfs"),T("p2p")),w=I(k(b,T("p2p-circuit"),b),k(b,T("p2p-circuit")),k(T("p2p-circuit"),b),k(m,T("p2p-circuit")),k(T("p2p-circuit"),m),T("p2p-circuit")),v=()=>I(k(w,v),w),E=v(),S=I(k(E,b,E),k(b,E),k(E,b),E,b);function C(e){return function(t){if(!n.isMultiaddr(t))try{t=n(t)}catch(e){return!1}const r=e(t.protoNames());return null!==r&&0===r.length}}function k(){const e=Array.from(arguments);function t(t){return t.length<e.length?null:(e.some(e=>{if(null===(t="function"==typeof e?e().partialMatch(t):e.partialMatch(t)))return!0}),t)}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:C(t),partialMatch:t}}function I(){const e=Array.from(arguments);function t(t){let r=null;return e.some(e=>{const n="function"==typeof e?e().partialMatch(t):e.partialMatch(t);if(n)return r=n,!0}),r}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:C(t),partialMatch:t}}function T(e){const t=e;return{toString:function(){return t},matches:function(e){if("string"==typeof e)try{e=n(e)}catch(e){return!1}const r=e.protoNames();return 1===r.length&&r[0]===t},partialMatch:function(e){return 0===e.length?null:e[0]===t?e.slice(1):null}}}t.DNS=o,t.DNS4=i,t.DNS6=s,t.IP=a,t.TCP=c,t.UDP=u,t.UTP=h,t.HTTP=d,t.HTTPS=p,t.WebSockets=l,t.WebSocketsSecure=f,t.WebSocketStar=g,t.WebRTCStar=A,t.WebRTCDirect=y,t.Reliable=m,t.Stardust=_,t.Circuit=E,t.P2P=S,t.IPFS=S},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs-mfs/node_modules/err-code/index.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?r=t:null!=t&&(e.code=t),r)for(n in r)e[n]=r[n];return e}},
/*!********************************************!*\
  !*** ./node_modules/p-queue/dist/index.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(/*! eventemitter3 */685),i=r(/*! p-timeout */686),s=r(/*! ./priority-queue */688),o=()=>{},a=new i.TimeoutError;t.default=class extends n{constructor(e){if(super(),Object.defineProperty(this,"_carryoverConcurrencyCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isIntervalIgnored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalCap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalEnd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_timeoutId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queueClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pendingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_concurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_resolveEmpty",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_resolveIdle",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_throwOnTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o)}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this._queue.dequeue()(),e&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((r,n)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const s=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(a)});r(await s)}catch(e){n(e)}this._next()},t),this._tryToStartAnother()})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}set timeout(e){this._timeout=e}get timeout(){return this._timeout}}},
/*!***********************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/constants.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! interface-datastore */14).Key;e.exports={FILE_SEPARATOR:"/",MFS_ROOT_KEY:new n("/local/filesroot"),MAX_CHUNK_SIZE:262144,MAX_LINKS:174,FILE_TYPES:{file:0,directory:1,"hamt-sharded-directory":1}}},
/*!************************************!*\
  !*** ./node_modules/bs58/index.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! base-x */528);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},
/*!************************************************!*\
  !*** ./node_modules/bignumber.js/bignumber.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n;!function(i){"use strict";var s,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,c=Math.floor,u="[BigNumber Error] ",h=u+"Number primitive has more than 15 significant digits: ",l=1e14,f=14,d=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],A=1e7,g=1e9;function y(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=f-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function _(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function b(e,t,r,n){if(e<t||e>r||e!==c(e))throw Error(u+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function w(e){var t=e.c.length-1;return y(e.e/f)==t&&e.c[t]%2!=0}function v(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function E(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(s=function e(t){var r,n,i,s,S,C,k,I,T,R=j.prototype={constructor:j,toString:null,valueOf:null},N=new j(1),B=20,O=4,P=-7,x=21,L=-1e7,D=1e7,M=!1,U=1,K=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},z="0123456789abcdefghijklmnopqrstuvwxyz";function j(e,t){var r,s,a,u,l,p,A,g,y=this;if(!(y instanceof j))return new j(e,t);if(null==t){if(e&&!0===e._isBigNumber)return y.s=e.s,void(!e.c||e.e>D?y.c=y.e=null:e.e<L?y.c=[y.e=0]:(y.e=e.e,y.c=e.c.slice()));if((p="number"==typeof e)&&0*e==0){if(y.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,l=e;l>=10;l/=10,u++);return void(u>D?y.c=y.e=null:(y.e=u,y.c=[e]))}g=String(e)}else{if(!o.test(g=String(e)))return i(y,g,p);y.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(u=g.indexOf("."))>-1&&(g=g.replace(".","")),(l=g.search(/e/i))>0?(u<0&&(u=l),u+=+g.slice(l+1),g=g.substring(0,l)):u<0&&(u=g.length)}else{if(b(t,2,z.length,"Base"),10==t)return G(y=new j(e),B+y.e+1,O);if(g=String(e),p="number"==typeof e){if(0*e!=0)return i(y,g,p,t);if(y.s=1/e<0?(g=g.slice(1),-1):1,j.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(h+e)}else y.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(r=z.slice(0,t),u=l=0,A=g.length;l<A;l++)if(r.indexOf(s=g.charAt(l))<0){if("."==s){if(l>u){u=A;continue}}else if(!a&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){a=!0,l=-1,u=0;continue}return i(y,String(e),p,t)}p=!1,(u=(g=n(g,t,10,y.s)).indexOf("."))>-1?g=g.replace(".",""):u=g.length}for(l=0;48===g.charCodeAt(l);l++);for(A=g.length;48===g.charCodeAt(--A););if(g=g.slice(l,++A)){if(A-=l,p&&j.DEBUG&&A>15&&(e>d||e!==c(e)))throw Error(h+y.s*e);if((u=u-l-1)>D)y.c=y.e=null;else if(u<L)y.c=[y.e=0];else{if(y.e=u,y.c=[],l=(u+1)%f,u<0&&(l+=f),l<A){for(l&&y.c.push(+g.slice(0,l)),A-=f;l<A;)y.c.push(+g.slice(l,l+=f));l=f-(g=g.slice(l)).length}else l-=A;for(;l--;g+="0");y.c.push(+g)}}else y.c=[y.e=0]}function H(e,t,r,n){var i,s,o,a,c;if(null==r?r=O:b(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=m(e.c),c=1==n||2==n&&(o<=P||o>=x)?v(c,o):E(c,o,"0");else if(s=(e=G(new j(e),t,r)).e,a=(c=m(e.c)).length,1==n||2==n&&(t<=s||s<=P)){for(;a<t;c+="0",a++);c=v(c,s)}else if(t-=o,c=E(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=s-a)>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function q(e,t){for(var r,n=1,i=new j(e[0]);n<e.length;n++){if(!(r=new j(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function V(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*f-1)>D?e.c=e.e=null:r<L?e.c=[e.e=0]:(e.e=r,e.c=t),e}function G(e,t,r,n){var i,s,o,u,h,d,A,g=e.c,y=p;if(g){e:{for(i=1,u=g[0];u>=10;u/=10,i++);if((s=t-i)<0)s+=f,o=t,A=(h=g[d=0])/y[i-o-1]%10|0;else if((d=a((s+1)/f))>=g.length){if(!n)break e;for(;g.length<=d;g.push(0));h=A=0,i=1,o=(s%=f)-f+1}else{for(h=u=g[d],i=1;u>=10;u/=10,i++);A=(o=(s%=f)-f+i)<0?0:h/y[i-o-1]%10|0}if(n=n||t<0||null!=g[d+1]||(o<0?h:h%y[i-o-1]),n=r<4?(A||n)&&(0==r||r==(e.s<0?3:2)):A>5||5==A&&(4==r||n||6==r&&(s>0?o>0?h/y[i-o]:0:g[d-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=y[(f-t%f)%f],e.e=-t||0):g[0]=e.e=0,e;if(0==s?(g.length=d,u=1,d--):(g.length=d+1,u=y[f-s],g[d]=o>0?c(h/y[i-o]%y[o])*u:0),n)for(;;){if(0==d){for(s=1,o=g[0];o>=10;o/=10,s++);for(o=g[0]+=u,u=1;o>=10;o/=10,u++);s!=u&&(e.e++,g[0]==l&&(g[0]=1));break}if(g[d]+=u,g[d]!=l)break;g[d--]=0,u=1}for(s=g.length;0===g[--s];g.pop());}e.e>D?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}function W(e){var t,r=e.e;return null===r?e.toString():(t=m(e.c),t=r<=P||r>=x?v(t,r):E(t,r,"0"),e.s<0?"-"+t:t)}return j.clone=e,j.ROUND_UP=0,j.ROUND_DOWN=1,j.ROUND_CEIL=2,j.ROUND_FLOOR=3,j.ROUND_HALF_UP=4,j.ROUND_HALF_DOWN=5,j.ROUND_HALF_EVEN=6,j.ROUND_HALF_CEIL=7,j.ROUND_HALF_FLOOR=8,j.EUCLID=9,j.config=j.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(u+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(r=e[t],0,g,t),B=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(r=e[t],0,8,t),O=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(b(r[0],-g,0,t),b(r[1],0,g,t),P=r[0],x=r[1]):(b(r,-g,g,t),P=-(x=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)b(r[0],-g,-1,t),b(r[1],1,g,t),L=r[0],D=r[1];else{if(b(r,-g,g,t),!r)throw Error(u+t+" cannot be zero: "+r);L=-(D=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(u+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw M=!r,Error(u+"crypto unavailable");M=r}else M=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(r=e[t],0,9,t),U=r),e.hasOwnProperty(t="POW_PRECISION")&&(b(r=e[t],0,g,t),K=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(u+t+" not an object: "+r);F=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(u+t+" invalid: "+r);z=r}}return{DECIMAL_PLACES:B,ROUNDING_MODE:O,EXPONENTIAL_AT:[P,x],RANGE:[L,D],CRYPTO:M,MODULO_MODE:U,POW_PRECISION:K,FORMAT:F,ALPHABET:z}},j.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!j.DEBUG)return!0;var t,r,n=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&i>=-g&&i<=g&&i===c(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%f)<1&&(t+=f),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=l||r!==c(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(u+"Invalid BigNumber: "+e)},j.maximum=j.max=function(){return q(arguments,R.lt)},j.minimum=j.min=function(){return q(arguments,R.gt)},j.random=(s=9007199254740992*Math.random()&2097151?function(){return c(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,o,h=0,l=[],d=new j(N);if(null==e?e=B:b(e,0,g),i=a(e/f),M)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));h<i;)(o=131072*t[h]+(t[h+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[h]=r[0],t[h+1]=r[1]):(l.push(o%1e14),h+=2);h=i/2}else{if(!crypto.randomBytes)throw M=!1,Error(u+"crypto unavailable");for(t=crypto.randomBytes(i*=7);h<i;)(o=281474976710656*(31&t[h])+1099511627776*t[h+1]+4294967296*t[h+2]+16777216*t[h+3]+(t[h+4]<<16)+(t[h+5]<<8)+t[h+6])>=9e15?crypto.randomBytes(7).copy(t,h):(l.push(o%1e14),h+=7);h=i/7}if(!M)for(;h<i;)(o=s())<9e15&&(l[h++]=o%1e14);for(i=l[--h],e%=f,i&&e&&(o=p[f-e],l[h]=c(i/o)*o);0===l[h];l.pop(),h--);if(h<0)l=[n=0];else{for(n=-1;0===l[0];l.splice(0,1),n-=f);for(h=1,o=l[0];o>=10;o/=10,h++);h<f&&(n-=f-h)}return d.e=n,d.c=l,d}),j.sum=function(){for(var e=1,t=arguments,r=new j(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){function e(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(t,n,i,s,o){var a,c,u,h,l,f,d,p,A=t.indexOf("."),g=B,y=O;for(A>=0&&(h=K,K=0,t=t.replace(".",""),f=(p=new j(n)).pow(t.length-A),K=h,p.c=e(E(m(f.c),f.e,"0"),10,i,"0123456789"),p.e=p.c.length),u=h=(d=e(t,n,i,o?(a=z,"0123456789"):(a="0123456789",z))).length;0==d[--h];d.pop());if(!d[0])return a.charAt(0);if(A<0?--u:(f.c=d,f.e=u,f.s=s,d=(f=r(f,p,g,y,i)).c,l=f.r,u=f.e),A=d[c=u+g+1],h=i/2,l=l||c<0||null!=d[c+1],l=y<4?(null!=A||l)&&(0==y||y==(f.s<0?3:2)):A>h||A==h&&(4==y||l||6==y&&1&d[c-1]||y==(f.s<0?8:7)),c<1||!d[0])t=l?E(a.charAt(1),-g,a.charAt(0)):a.charAt(0);else{if(d.length=c,l)for(--i;++d[--c]>i;)d[c]=0,c||(++u,d=[1].concat(d));for(h=d.length;!d[--h];);for(A=0,t="";A<=h;t+=a.charAt(d[A++]));t=E(t,u,a.charAt(0))}return t}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%A,h=t/A|0;for(e=e.slice();c--;)a=((i=u*(s=e[c]%A)+(n=h*s+(o=e[c]/A|0)*u)%A*A+a)/r|0)+(n/A|0)+h*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,o,a){var u,h,d,p,A,g,m,_,b,w,v,E,S,C,k,I,T,R=n.s==i.s?1:-1,N=n.c,B=i.c;if(!(N&&N[0]&&B&&B[0]))return new j(n.s&&i.s&&(N?!B||N[0]!=B[0]:B)?N&&0==N[0]||!B?0*R:R/0:NaN);for(b=(_=new j(R)).c=[],R=s+(h=n.e-i.e)+1,a||(a=l,h=y(n.e/f)-y(i.e/f),R=R/f|0),d=0;B[d]==(N[d]||0);d++);if(B[d]>(N[d]||0)&&h--,R<0)b.push(1),p=!0;else{for(C=N.length,I=B.length,d=0,R+=2,(A=c(a/(B[0]+1)))>1&&(B=e(B,A,a),N=e(N,A,a),I=B.length,C=N.length),S=I,v=(w=N.slice(0,I)).length;v<I;w[v++]=0);T=B.slice(),T=[0].concat(T),k=B[0],B[1]>=a/2&&k++;do{if(A=0,(u=t(B,w,I,v))<0){if(E=w[0],I!=v&&(E=E*a+(w[1]||0)),(A=c(E/k))>1)for(A>=a&&(A=a-1),m=(g=e(B,A,a)).length,v=w.length;1==t(g,w,m,v);)A--,r(g,I<m?T:B,m,a),m=g.length,u=1;else 0==A&&(u=A=1),m=(g=B.slice()).length;if(m<v&&(g=[0].concat(g)),r(w,g,v,a),v=w.length,-1==u)for(;t(B,w,I,v)<1;)A++,r(w,I<v?T:B,v,a),v=w.length}else 0===u&&(A++,w=[0]);b[d++]=A,w[0]?w[v++]=N[S]||0:(w=[N[S]],v=1)}while((S++<C||null!=w[0])&&R--);p=null!=w[0],b[0]||b.splice(0,1)}if(a==l){for(d=1,R=b[0];R>=10;R/=10,d++);G(_,s+(_.e=d+h*f-1)+1,o,p)}else _.e=h,_.r=+p;return _}}(),S=/^(-?)0([xbo])(?=\w[\w.]*$)/i,C=/^([^.]+)\.$/,k=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(e,t,r,n){var i,s=r?t:t.replace(T,"");if(I.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(S,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(C,"$1").replace(k,"0.$1")),t!=s))return new j(s,i);if(j.DEBUG)throw Error(u+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},R.absoluteValue=R.abs=function(){var e=new j(this);return e.s<0&&(e.s=1),e},R.comparedTo=function(e,t){return _(this,new j(e,t))},R.decimalPlaces=R.dp=function(e,t){var r,n,i,s=this;if(null!=e)return b(e,0,g),null==t?t=O:b(t,0,8),G(new j(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-y(this.e/f))*f,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},R.dividedBy=R.div=function(e,t){return r(this,new j(e,t),B,O)},R.dividedToIntegerBy=R.idiv=function(e,t){return r(this,new j(e,t),0,1)},R.exponentiatedBy=R.pow=function(e,t){var r,n,i,s,o,h,l,d,p=this;if((e=new j(e)).c&&!e.isInteger())throw Error(u+"Exponent not an integer: "+W(e));if(null!=t&&(t=new j(t)),o=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new j(Math.pow(+W(p),o?2-w(e):+W(e))),t?d.mod(t):d;if(h=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new j(NaN);(n=!h&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||o&&p.c[1]>=24e7:p.c[0]<8e13||o&&p.c[0]<=9999975e7)))return s=p.s<0&&w(e)?-0:0,p.e>-1&&(s=1/s),new j(h?1/s:s);K&&(s=a(K/f+2))}for(o?(r=new j(.5),h&&(e.s=1),l=w(e)):l=(i=Math.abs(+W(e)))%2,d=new j(N);;){if(l){if(!(d=d.times(p)).c)break;s?d.c.length>s&&(d.c.length=s):n&&(d=d.mod(t))}if(i){if(0===(i=c(i/2)))break;l=i%2}else if(G(e=e.times(r),e.e+1,1),e.e>14)l=w(e);else{if(0===(i=+W(e)))break;l=i%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):n&&(p=p.mod(t))}return n?d:(h&&(d=N.div(d)),t?d.mod(t):s?G(d,K,O,void 0):d)},R.integerValue=function(e){var t=new j(this);return null==e?e=O:b(e,0,8),G(t,t.e+1,e)},R.isEqualTo=R.eq=function(e,t){return 0===_(this,new j(e,t))},R.isFinite=function(){return!!this.c},R.isGreaterThan=R.gt=function(e,t){return _(this,new j(e,t))>0},R.isGreaterThanOrEqualTo=R.gte=function(e,t){return 1===(t=_(this,new j(e,t)))||0===t},R.isInteger=function(){return!!this.c&&y(this.e/f)>this.c.length-2},R.isLessThan=R.lt=function(e,t){return _(this,new j(e,t))<0},R.isLessThanOrEqualTo=R.lte=function(e,t){return-1===(t=_(this,new j(e,t)))||0===t},R.isNaN=function(){return!this.s},R.isNegative=function(){return this.s<0},R.isPositive=function(){return this.s>0},R.isZero=function(){return!!this.c&&0==this.c[0]},R.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new j(e,t)).s,!a||!t)return new j(NaN);if(a!=t)return e.s=-t,o.plus(e);var c=o.e/f,u=e.e/f,h=o.c,d=e.c;if(!c||!u){if(!h||!d)return h?(e.s=-t,e):new j(d?o:NaN);if(!h[0]||!d[0])return d[0]?(e.s=-t,e):new j(h[0]?o:3==O?-0:0)}if(c=y(c),u=y(u),h=h.slice(),a=c-u){for((s=a<0)?(a=-a,i=h):(u=c,i=d),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=h.length)<(t=d.length))?a:t,a=t=0;t<n;t++)if(h[t]!=d[t]){s=h[t]<d[t];break}if(s&&(i=h,h=d,d=i,e.s=-e.s),(t=(n=d.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=l-1;n>a;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=l}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--u);return h[0]?V(e,h,u):(e.s=3==O?-1:1,e.c=[e.e=0],e)},R.modulo=R.mod=function(e,t){var n,i,s=this;return e=new j(e,t),!s.c||!e.s||e.c&&!e.c[0]?new j(NaN):!e.c||s.c&&!s.c[0]?new j(s):(9==U?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,U),(e=s.minus(n.times(e))).c[0]||1!=U||(e.s=s.s),e)},R.multipliedBy=R.times=function(e,t){var r,n,i,s,o,a,c,u,h,d,p,g,m,_,b,w=this,v=w.c,E=(e=new j(e,t)).c;if(!(v&&E&&v[0]&&E[0]))return!w.s||!e.s||v&&!v[0]&&!E||E&&!E[0]&&!v?e.c=e.e=e.s=null:(e.s*=w.s,v&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=y(w.e/f)+y(e.e/f),e.s*=w.s,(c=v.length)<(d=E.length)&&(m=v,v=E,E=m,i=c,c=d,d=i),i=c+d,m=[];i--;m.push(0));for(_=l,b=A,i=d;--i>=0;){for(r=0,p=E[i]%b,g=E[i]/b|0,s=i+(o=c);s>i;)r=((u=p*(u=v[--o]%b)+(a=g*u+(h=v[o]/b|0)*p)%b*b+m[s]+r)/_|0)+(a/b|0)+g*h,m[s--]=u%_;m[s]=r}return r?++n:m.splice(0,1),V(e,m,n)},R.negated=function(){var e=new j(this);return e.s=-e.s||null,e},R.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new j(e,t)).s,!i||!t)return new j(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/f,o=e.e/f,a=n.c,c=e.c;if(!s||!o){if(!a||!c)return new j(i/0);if(!a[0]||!c[0])return c[0]?e:new j(a[0]?n:0*i)}if(s=y(s),o=y(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/l|0,a[t]=l===a[t]?0:a[t]%l;return i&&(a=[i].concat(a),++o),V(e,a,o)},R.precision=R.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return b(e,1,g),null==t?t=O:b(t,0,8),G(new j(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*f+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},R.shiftedBy=function(e){return b(e,-d,d),this.times("1e"+e)},R.squareRoot=R.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,c=o.s,u=o.e,h=B+4,l=new j("0.5");if(1!==c||!a||!a[0])return new j(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+W(o)))||c==1/0?(((t=m(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=y((u+1)/2)-(u<0||u%2),n=new j(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new j(c+""),n.c[0])for((c=(u=n.e)+h)<3&&(c=0);;)if(s=n,n=l.times(s.plus(r(o,s,h,1))),m(s.c).slice(0,c)===(t=m(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(G(n,n.e+B+2,1),e=!n.times(n).eq(o));break}if(!i&&(G(s,s.e+B+2,0),s.times(s).eq(o))){n=s;break}h+=4,c+=4,i=1}return G(n,n.e+B+1,O,e)},R.toExponential=function(e,t){return null!=e&&(b(e,0,g),e++),H(this,e,t,1)},R.toFixed=function(e,t){return null!=e&&(b(e,0,g),e=e+this.e+1),H(this,e,t)},R.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=F;else if("object"!=typeof r)throw Error(u+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,o=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,h=r.groupSeparator||"",l=o[0],f=o[1],d=i.s<0,p=d?l.slice(1):l,A=p.length;if(c&&(s=a,a=c,c=s,A-=s),a>0&&A>0){for(s=A%a||a,l=p.substr(0,s);s<A;s+=a)l+=h+p.substr(s,a);c>0&&(l+=h+p.slice(s)),d&&(l="-"+l)}n=f?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):l}return(r.prefix||"")+n+(r.suffix||"")},R.toFraction=function(e){var t,n,i,s,o,a,c,h,l,d,A,g,y=this,_=y.c;if(null!=e&&(!(c=new j(e)).isInteger()&&(c.c||1!==c.s)||c.lt(N)))throw Error(u+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+W(c));if(!_)return new j(y);for(t=new j(N),l=n=new j(N),i=h=new j(N),g=m(_),o=t.e=g.length-y.e-1,t.c[0]=p[(a=o%f)<0?f+a:a],e=!e||c.comparedTo(t)>0?o>0?t:l:c,a=D,D=1/0,c=new j(g),h.c[0]=0;d=r(c,t,0,1),1!=(s=n.plus(d.times(i))).comparedTo(e);)n=i,i=s,l=h.plus(d.times(s=l)),h=s,t=c.minus(d.times(s=t)),c=s;return s=r(e.minus(n),i,0,1),h=h.plus(s.times(l)),n=n.plus(s.times(i)),h.s=l.s=y.s,A=r(l,i,o*=2,O).minus(y).abs().comparedTo(r(h,n,o,O).minus(y).abs())<1?[l,i]:[h,n],D=a,A},R.toNumber=function(){return+W(this)},R.toPrecision=function(e,t){return null!=e&&b(e,1,g),H(this,e,t,2)},R.toString=function(e){var t,r=this,i=r.s,s=r.e;return null===s?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=s<=P||s>=x?v(m(r.c),s):E(m(r.c),s,"0"):10===e?t=E(m((r=G(new j(r),B+s+1,O)).c),r.e,"0"):(b(e,2,z.length,"Base"),t=n(E(m(r.c),s,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},R.valueOf=R.toJSON=function(){return W(this)},R._isBigNumber=!0,null!=t&&j.set(t),j}()).default=s.BigNumber=s,void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},
/*!******************************************!*\
  !*** ./node_modules/js-sha3/src/sha3.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(n,i){var s;
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */!function(){"use strict";var o="input is invalid type",a="object"==typeof window,c=a?window:{};c.JS_SHA3_NO_WINDOW&&(a=!1);var u=!a&&"object"==typeof self;!c.JS_SHA3_NO_NODE_JS&&"object"==typeof n&&n.versions&&n.versions.node?c=i:u&&(c=self);var h=!c.JS_SHA3_NO_COMMON_JS&&"object"==typeof e&&e.exports,l=r(/*! !webpack amd options */287),f=!c.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,d="0123456789abcdef".split(""),p=[4,1024,262144,67108864],A=[0,8,16,24],g=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],m=[128,256],_=["hex","buffer","arrayBuffer","array","digest"],b={128:168,256:136};!c.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!f||!c.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var w=function(e,t,r){return function(n){return new D(e,t,e).update(n)[r]()}},v=function(e,t,r){return function(n,i){return new D(e,t,i).update(n)[r]()}},E=function(e,t,r){return function(t,n,i,s){return T["cshake"+e].update(t,n,i,s)[r]()}},S=function(e,t,r){return function(t,n,i,s){return T["kmac"+e].update(t,n,i,s)[r]()}},C=function(e,t,r,n){for(var i=0;i<_.length;++i){var s=_[i];e[s]=t(r,n,s)}return e},k=function(e,t){var r=w(e,t,"hex");return r.create=function(){return new D(e,t,e)},r.update=function(e){return r.create().update(e)},C(r,w,e,t)},I=[{name:"keccak",padding:[1,256,65536,16777216],bits:y,createMethod:k},{name:"sha3",padding:[6,1536,393216,100663296],bits:y,createMethod:k},{name:"shake",padding:[31,7936,2031616,520093696],bits:m,createMethod:function(e,t){var r=v(e,t,"hex");return r.create=function(r){return new D(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},C(r,v,e,t)}},{name:"cshake",padding:p,bits:m,createMethod:function(e,t){var r=b[e],n=E(e,0,"hex");return n.create=function(n,i,s){return i||s?new D(e,t,n).bytepad([i,s],r):T["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},C(n,E,e,t)}},{name:"kmac",padding:p,bits:m,createMethod:function(e,t){var r=b[e],n=S(e,0,"hex");return n.create=function(n,i,s){return new M(e,t,i).bytepad(["KMAC",s],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},C(n,S,e,t)}}],T={},R=[],N=0;N<I.length;++N)for(var B=I[N],O=B.bits,P=0;P<O.length;++P){var x=B.name+"_"+O[P];if(R.push(x),T[x]=B.createMethod(O[P],B.padding),"sha3"!==B.name){var L=B.name+O[P];R.push(L),T[L]=T[x]}}function D(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function M(e,t,r){D.call(this,e,t,r)}D.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(o);if(null===e)throw new Error(o);if(f&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||f&&ArrayBuffer.isView(e)))throw new Error(o);t=!0}for(var n,i,s=this.blocks,a=this.byteCount,c=e.length,u=this.blockCount,h=0,l=this.s;h<c;){if(this.reset)for(this.reset=!1,s[0]=this.block,n=1;n<u+1;++n)s[n]=0;if(t)for(n=this.start;h<c&&n<a;++h)s[n>>2]|=e[h]<<A[3&n++];else for(n=this.start;h<c&&n<a;++h)(i=e.charCodeAt(h))<128?s[n>>2]|=i<<A[3&n++]:i<2048?(s[n>>2]|=(192|i>>6)<<A[3&n++],s[n>>2]|=(128|63&i)<<A[3&n++]):i<55296||i>=57344?(s[n>>2]|=(224|i>>12)<<A[3&n++],s[n>>2]|=(128|i>>6&63)<<A[3&n++],s[n>>2]|=(128|63&i)<<A[3&n++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++h)),s[n>>2]|=(240|i>>18)<<A[3&n++],s[n>>2]|=(128|i>>12&63)<<A[3&n++],s[n>>2]|=(128|i>>6&63)<<A[3&n++],s[n>>2]|=(128|63&i)<<A[3&n++]);if(this.lastByteIndex=n,n>=a){for(this.start=n-a,this.block=s[u],n=0;n<u;++n)l[n]^=s[n];U(l),this.reset=!0}else this.start=n}return this},D.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},D.prototype.encodeString=function(e){var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(o);if(null===e)throw new Error(o);if(f&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||f&&ArrayBuffer.isView(e)))throw new Error(o);t=!0}var n=0,i=e.length;if(t)n=i;else for(var s=0;s<e.length;++s){var a=e.charCodeAt(s);a<128?n+=1:a<2048?n+=2:a<55296||a>=57344?n+=3:(a=65536+((1023&a)<<10|1023&e.charCodeAt(++s)),n+=4)}return n+=this.encode(8*n),this.update(e),n},D.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,s=[];return s.length=i,this.update(s),this},D.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];U(n)}},D.prototype.toString=D.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a="";o<n;){for(s=0;s<t&&o<n;++s,++o)e=r[s],a+=d[e>>4&15]+d[15&e]+d[e>>12&15]+d[e>>8&15]+d[e>>20&15]+d[e>>16&15]+d[e>>28&15]+d[e>>24&15];o%t==0&&(U(r),s=0)}return i&&(e=r[s],a+=d[e>>4&15]+d[15&e],i>1&&(a+=d[e>>12&15]+d[e>>8&15]),i>2&&(a+=d[e>>20&15]+d[e>>16&15])),a},D.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);o<n;){for(s=0;s<t&&o<n;++s,++o)c[o]=r[s];o%t==0&&U(r)}return i&&(c[s]=r[s],e=e.slice(0,a)),e},D.prototype.buffer=D.prototype.arrayBuffer,D.prototype.digest=D.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,c=[];a<i;){for(o=0;o<r&&a<i;++o,++a)e=a<<2,t=n[o],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&U(n)}return s&&(e=a<<2,t=n[o],c[e]=255&t,s>1&&(c[e+1]=t>>8&255),s>2&&(c[e+2]=t>>16&255)),c},M.prototype=new D,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),D.prototype.finalize.call(this)};var U=function(e){var t,r,n,i,s,o,a,c,u,h,l,f,d,p,A,y,m,_,b,w,v,E,S,C,k,I,T,R,N,B,O,P,x,L,D,M,U,K,F,z,j,H,q,V,G,W,Q,Y,X,$,Z,J,ee,te,re,ne,ie,se,oe,ae,ce,ue,he;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],h=e[6]^e[16]^e[26]^e[36]^e[46],l=e[7]^e[17]^e[27]^e[37]^e[47],t=(f=e[8]^e[18]^e[28]^e[38]^e[48])^(o<<1|a>>>31),r=(d=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|o>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=s^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=o^(h<<1|l>>>31),r=a^(l<<1|h>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(f<<1|d>>>31),r=u^(d<<1|f>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=h^(i<<1|s>>>31),r=l^(s<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,p=e[0],A=e[1],W=e[11]<<4|e[10]>>>28,Q=e[10]<<4|e[11]>>>28,R=e[20]<<3|e[21]>>>29,N=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,H=e[40]<<18|e[41]>>>14,q=e[41]<<18|e[40]>>>14,L=e[2]<<1|e[3]>>>31,D=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,m=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,B=e[33]<<13|e[32]>>>19,O=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,he=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,U=e[15]<<6|e[14]>>>26,_=e[25]<<11|e[24]>>>21,b=e[24]<<11|e[25]>>>21,$=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,P=e[45]<<29|e[44]>>>3,x=e[44]<<29|e[45]>>>3,C=e[6]<<28|e[7]>>>4,k=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,K=e[26]<<25|e[27]>>>7,F=e[27]<<25|e[26]>>>7,w=e[36]<<21|e[37]>>>11,v=e[37]<<21|e[36]>>>11,J=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,G=e[9]<<27|e[8]>>>5,I=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,se=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,z=e[38]<<8|e[39]>>>24,j=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,S=e[49]<<14|e[48]>>>18,e[0]=p^~y&_,e[1]=A^~m&b,e[10]=C^~I&R,e[11]=k^~T&N,e[20]=L^~M&K,e[21]=D^~U&F,e[30]=V^~W&Y,e[31]=G^~Q&X,e[40]=te^~ne&se,e[41]=re^~ie&oe,e[2]=y^~_&w,e[3]=m^~b&v,e[12]=I^~R&B,e[13]=T^~N&O,e[22]=M^~K&z,e[23]=U^~F&j,e[32]=W^~Y&$,e[33]=Q^~X&Z,e[42]=ne^~se&ae,e[43]=ie^~oe&ce,e[4]=_^~w&E,e[5]=b^~v&S,e[14]=R^~B&P,e[15]=N^~O&x,e[24]=K^~z&H,e[25]=F^~j&q,e[34]=Y^~$&J,e[35]=X^~Z&ee,e[44]=se^~ae&ue,e[45]=oe^~ce&he,e[6]=w^~E&p,e[7]=v^~S&A,e[16]=B^~P&C,e[17]=O^~x&k,e[26]=z^~H&L,e[27]=j^~q&D,e[36]=$^~J&V,e[37]=Z^~ee&G,e[46]=ae^~ue&te,e[47]=ce^~he&re,e[8]=E^~p&y,e[9]=S^~A&m,e[18]=P^~C&I,e[19]=x^~k&T,e[28]=H^~L&M,e[29]=q^~D&U,e[38]=J^~V&W,e[39]=ee^~G&Q,e[48]=ue^~te&ne,e[49]=he^~re&ie,e[0]^=g[n],e[1]^=g[n+1]};if(h)e.exports=T;else{for(N=0;N<R.length;++N)c[R[N]]=T[R[N]];l&&(void 0===(s=function(){return T}.call(t,r,t,e))||(e.exports=s))}}()}).call(this,r(/*! ./../../process/browser.js */2),r(/*! ./../../webpack/buildin/global.js */10))},
/*!***************************************!*\
  !*** ./node_modules/blakejs/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./blake2b */553),i=r(/*! ./blake2s */554);e.exports={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:i.blake2s,blake2sHex:i.blake2sHex,blake2sInit:i.blake2sInit,blake2sUpdate:i.blake2sUpdate,blake2sFinal:i.blake2sFinal}},
/*!*********************************************!*\
  !*** ./node_modules/merge-options/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! is-plain-obj */677),i=Object.prototype.hasOwnProperty,s=Object.propertyIsEnumerable,o=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1},u=e=>{const t=[];for(const r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(let n=0;n<r.length;n++)s.call(e,r[n])&&t.push(r[n])}return t};function h(e){return Array.isArray(e)?function(e){const t=e.slice(0,0);return u(e).forEach(r=>{o(t,r,h(e[r]))}),t}(e):n(e)?function(e){const t=null===Object.getPrototypeOf(e)?Object.create(null):{};return u(e).forEach(r=>{o(t,r,h(e[r]))}),t}(e):e}const l=(e,t,r,n)=>(r.forEach(r=>{r in e&&e[r]!==Object.getPrototypeOf(e)?o(e,r,d(e[r],t[r],n)):o(e,r,h(t[r]))}),e),f=(e,t,r)=>{let n=e.slice(0,0),s=0;return[e,t].forEach(t=>{const a=[];for(let r=0;r<t.length;r++)i.call(t,r)&&(a.push(String(r)),o(n,s++,t===e?t[r]:h(t[r])));n=l(n,t,u(t).filter(e=>-1===a.indexOf(e)),r)}),n};function d(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?f(e,t,r):n(t)&&n(e)?l(e,t,u(t),r):h(t)}e.exports=function(){const e=d(h(c),this!==a&&this||{},c);let t={foobar:{}};for(let r=0;r<arguments.length;r++){const i=arguments[r];if(void 0!==i){if(!n(i))throw new TypeError("`"+i+"` is not an Option Object");t=d(t,{foobar:i},e)}}return t.foobar}},
/*!********************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/index.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! err-code */70),i=r(/*! cids */4),s=r(/*! ./resolvers */1173),o=r(/*! async-iterator-last */169),a=e=>{if(t.isBuffer(e))return{cid:new i(e),toResolve:[]};if(i.isCID(e))return{cid:e,toResolve:[]};if("string"==typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));const t=((e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean))(e);return{cid:new i(t[0]),toResolve:t.slice(1)}}throw n(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")},c=async function*(e,t){let{cid:r,toResolve:i}=a(e),o=r.toBaseEncodedString(),c=o;const u=i.length;for(;;){const a=await s(r,o,c,i,u,t);if(!a.entry&&!a.next)throw n(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");if(a.entry&&(yield a.entry),!a.next)return;i=a.next.toResolve,r=a.next.cid,o=a.next.name,c=a.next.path}},u=(e,t)=>o(c(e,t));e.exports=u,e.exports.path=c,e.exports.recursive=async function*(e,t){const r=await u(e,t);if(yield r,r.unixfs&&r.unixfs.type.includes("dir"))for await(const e of async function*e(t){for await(const r of t.content())if(yield r,r.unixfs.type.includes("dir"))for await(const t of e(r))yield t}(r))yield e}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/apply-default-options.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */44);e.exports=(e={},t)=>{Array.isArray(e)&&(e=e.filter(e=>"object"==typeof e).pop()||{});const r={};for(const n in t)null!==e[n]&&void 0!==e[n]?r[n]=e[n]:r[n]=t[n];const i=r.format||r.codec;if(i&&isNaN(i)&&(r.format=i,delete r.codec),void 0!==e.count&&(r.length=e.count),void 0!==e.p&&(r.parents=e.p),void 0!==e.l&&(r.long=e.l),r.length||0===r.length||(r.length=1/0),r.offset<0)throw n(new Error("cannot have negative write offset"),"ERR_INVALID_PARAMS");if(r.length<0)throw n(new Error("cannot have negative byte count"),"ERR_INVALID_PARAMS");return r}},
/*!*****************************************!*\
  !*** ./node_modules/async/waterfall.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t=(0,s.default)(t||i.default),!(0,n.default)(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var r=0;function u(t){var n=(0,c.default)(e[r++]);t.push((0,a.default)(h)),n.apply(null,t)}function h(n){if(n||r===e.length)return t.apply(null,arguments);u((0,o.default)(arguments,1))}u([])};var n=u(r(/*! lodash/isArray */79)),i=u(r(/*! lodash/noop */42)),s=u(r(/*! ./internal/once */202)),o=u(r(/*! ./internal/slice */76)),a=u(r(/*! ./internal/onlyOnce */105)),c=u(r(/*! ./internal/wrapAsync */33));function u(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!****************************************************!*\
  !*** ./node_modules/pull-stream/sources/values.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ../util/abort-cb */381);e.exports=function(e,t){if(!e)return function(e,r){return e?n(r,e,t):r(!0)};Array.isArray(e)||(e=Object.keys(e).map((function(t){return e[t]})));var r=0;return function(i,s){if(i)return n(s,i,t);r>=e.length?s(!0):s(null,e[r++])}}},
/*!****************************************!*\
  !*** ./node_modules/async/parallel.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(n.default,e,t)};var n=s(r(/*! ./eachOf */227)),i=s(r(/*! ./internal/parallel */430));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!**********************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/message/index.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! assert */24),i=r(/*! peer-info */21),s=r(/*! peer-id */7),o=r(/*! protons */28),a=r(/*! libp2p-record */118).Record,c=o(r(/*! ./dht.proto */1008)),u=c.Message.MessageType,h=c.Message.ConnectionType;class l{constructor(e,r,i){r&&n(t.isBuffer(r)),this.type=e,this.key=r,this._clusterLevelRaw=i,this.closerPeers=[],this.providerPeers=[],this.record=null}get clusterLevel(){const e=this._clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this._clusterLevelRaw=e}serialize(){const e={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(f),providerPeers:this.providerPeers.map(f)};return this.record&&(t.isBuffer(this.record)?e.record=this.record:e.record=this.record.serialize()),c.Message.encode(e)}static deserialize(e){const t=c.Message.decode(e),r=new l(t.type,t.key,t.clusterLevelRaw);return r.closerPeers=t.closerPeers.map(d),r.providerPeers=t.providerPeers.map(d),t.record&&(r.record=a.deserialize(t.record)),r}}function f(e){const t={id:e.id.id,addrs:e.multiaddrs.toArray().map(e=>e.buffer)};return e.isConnected()?t.connection=h.CONNECTED:t.connection=h.NOT_CONNECTED,t}function d(e){const t=new i(new s(e.id));return e.addrs.forEach(e=>t.multiaddrs.add(e)),t}l.TYPES=u,l.CONNECTION_TYPES=h,e.exports=l}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/asn1.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./util */16),r(/*! ./oids */74);var i=e.exports=n.asn1=n.asn1||{};function s(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(e,t,r,s,o){if(n.util.isArray(s)){for(var a=[],c=0;c<s.length;++c)void 0!==s[c]&&a.push(s[c]);s=a}var u={tagClass:e,type:t,constructed:r,composed:r||n.util.isArray(s),value:s};return o&&"bitStringContents"in o&&(u.bitStringContents=o.bitStringContents,u.original=i.copy(u)),u},i.copy=function(e,t){var r;if(n.util.isArray(e)){r=[];for(var s=0;s<e.length;++s)r.push(i.copy(e[s],t));return r}return"string"==typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:i.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},i.equals=function(e,t,r){if(n.util.isArray(e)){if(!n.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(!i.equals(e[s],t[s]))return!1;return!0}if(typeof e!=typeof t)return!1;if("string"==typeof e)return e===t;var o=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&i.equals(e.value,t.value);return r&&r.includeBitStringContents&&(o=o&&e.bitStringContents===t.bitStringContents),o},i.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};var o=function(e,t){var r=e.getByte();if(128!==r){var n;if(128&r){var i=127&r;s(e,--t,i),n=e.getInt(i<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}};i.fromDer=function(e,t){return void 0===t&&(t={strict:!0,decodeBitStrings:!0}),"boolean"==typeof t&&(t={strict:t,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"==typeof e&&(e=n.util.createBuffer(e)),function e(t,r,n,a){var c;s(t,r,2);var u=t.getByte();r--;var h=192&u;var l=31&u;c=t.length();var f=o(t,r);r-=c-t.length();if(void 0!==f&&f>r){if(a.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=t.length(),d.remaining=r,d.requested=f,d}f=r}var p;var A;var g=32==(32&u);if(g)if(p=[],void 0===f)for(;;){if(s(t,r,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),r-=2;break}c=t.length(),p.push(e(t,r,n+1,a)),r-=c-t.length()}else for(;f>0;)c=t.length(),p.push(e(t,f,n+1,a)),r-=c-t.length(),f-=c-t.length();void 0===p&&h===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&(A=t.bytes(f));if(void 0===p&&a.decodeBitStrings&&h===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&f>1){var y=t.read,m=r,_=0;if(l===i.Type.BITSTRING&&(s(t,r,1),_=t.getByte(),r--),0===_)try{c=t.length();var b={verbose:a.verbose,strict:!0,decodeBitStrings:!0},w=e(t,r,n+1,b),v=c-t.length();r-=v,l==i.Type.BITSTRING&&v++;var E=w.tagClass;v!==f||E!==i.Class.UNIVERSAL&&E!==i.Class.CONTEXT_SPECIFIC||(p=[w])}catch(e){}void 0===p&&(t.read=y,r=m)}if(void 0===p){if(void 0===f){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=r}if(l===i.Type.BMPSTRING)for(p="";f>0;f-=2)s(t,r,2),p+=String.fromCharCode(t.getInt16()),r-=2;else p=t.getBytes(f)}var S=void 0===A?null:{bitStringContents:A};return i.create(h,l,g,p,S)}(e,e.length(),0,t)},i.toDer=function(e){var t=n.util.createBuffer(),r=e.tagClass|e.type,s=n.util.createBuffer(),o=!1;if("bitStringContents"in e&&(o=!0,e.original&&(o=i.equals(e,e.original))),o)s.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:s.putByte(0);for(var a=0;a<e.value.length;++a)void 0!==e.value[a]&&s.putBuffer(i.toDer(e.value[a]))}else if(e.type===i.Type.BMPSTRING)for(a=0;a<e.value.length;++a)s.putInt16(e.value.charCodeAt(a));else e.type===i.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?s.putBytes(e.value.substr(1)):s.putBytes(e.value);if(t.putByte(r),s.length()<=127)t.putByte(127&s.length());else{var c=s.length(),u="";do{u+=String.fromCharCode(255&c),c>>>=8}while(c>0);t.putByte(128|u.length);for(a=u.length-1;a>=0;--a)t.putByte(u.charCodeAt(a))}return t.putBuffer(s),t},i.oidToDer=function(e){var t,r,i,s,o=e.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var c=2;c<o.length;++c){t=!0,r=[],i=parseInt(o[c],10);do{s=127&i,i>>>=7,t||(s|=128),r.push(s),t=!1}while(i>0);for(var u=r.length-1;u>=0;--u)a.putByte(r[u])}return a},i.derToOid=function(e){var t;"string"==typeof e&&(e=n.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var i=0;e.length()>0;)i<<=7,128&(r=e.getByte())?i+=127&r:(t+="."+(i+r),i=0);return t},i.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var c=e.charAt(10),u=10;"+"!==c&&"-"!==c&&(a=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),u&&("+"===(c=e.charAt(u))||"-"===c)){var h=60*parseInt(e.substr(u+1,2),10)+parseInt(e.substr(u+4,2),10);h*=6e4,"+"===c?t.setTime(+t-h):t.setTime(+t+h)}return t},i.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),c=0,u=0,h=!1;"Z"===e.charAt(e.length-1)&&(h=!0);var l=e.length-5,f=e.charAt(l);"+"!==f&&"-"!==f||(u=60*parseInt(e.substr(l+1,2),10)+parseInt(e.substr(l+4,2),10),u*=6e4,"+"===f&&(u*=-1),h=!0);return"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),h?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,c),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(s,o,a,c)),t},i.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},i.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},i.integerToDer=function(e){var t=n.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},i.derToInteger=function(e){"string"==typeof e&&(e=n.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},i.validate=function(e,t,r,s){var o=!1;if(e.tagClass!==t.tagClass&&void 0!==t.tagClass||e.type!==t.type&&void 0!==t.type)s&&(e.tagClass!==t.tagClass&&s.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&s.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||void 0===t.constructed){if(o=!0,t.value&&n.util.isArray(t.value))for(var a=0,c=0;o&&c<t.value.length;++c)o=t.value[c].optional||!1,e.value[a]&&((o=i.validate(e.value[a],t.value[c],r,s))?++a:t.value[c].optional&&(o=!0)),!o&&s&&s.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(o&&r)if(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else s&&s.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return o};var a=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(e,t,r){var s="";r=r||2,(t=t||0)>0&&(s+="\n");for(var o="",c=0;c<t*r;++c)o+=" ";switch(s+=o+"Tag: ",e.tagClass){case i.Class.UNIVERSAL:s+="Universal:";break;case i.Class.APPLICATION:s+="Application:";break;case i.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case i.Class.PRIVATE:s+="Private:"}if(e.tagClass===i.Class.UNIVERSAL)switch(s+=e.type,e.type){case i.Type.NONE:s+=" (None)";break;case i.Type.BOOLEAN:s+=" (Boolean)";break;case i.Type.INTEGER:s+=" (Integer)";break;case i.Type.BITSTRING:s+=" (Bit string)";break;case i.Type.OCTETSTRING:s+=" (Octet string)";break;case i.Type.NULL:s+=" (Null)";break;case i.Type.OID:s+=" (Object Identifier)";break;case i.Type.ODESC:s+=" (Object Descriptor)";break;case i.Type.EXTERNAL:s+=" (External or Instance of)";break;case i.Type.REAL:s+=" (Real)";break;case i.Type.ENUMERATED:s+=" (Enumerated)";break;case i.Type.EMBEDDED:s+=" (Embedded PDV)";break;case i.Type.UTF8:s+=" (UTF8)";break;case i.Type.ROID:s+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:s+=" (Sequence)";break;case i.Type.SET:s+=" (Set)";break;case i.Type.PRINTABLESTRING:s+=" (Printable String)";break;case i.Type.IA5String:s+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:s+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case i.Type.BMPSTRING:s+=" (BMP String)"}else s+=e.type;if(s+="\n",s+=o+"Constructed: "+e.constructed+"\n",e.composed){var u=0,h="";for(c=0;c<e.value.length;++c)void 0!==e.value[c]&&(u+=1,h+=i.prettyPrint(e.value[c],t+1,r),c+1<e.value.length&&(h+=","));s+=o+"Sub values: "+u+h}else{if(s+=o+"Value: ",e.type===i.Type.OID){var l=i.derToOid(e.value);s+=l,n.pki&&n.pki.oids&&l in n.pki.oids&&(s+=" ("+n.pki.oids[l]+") ")}if(e.type===i.Type.INTEGER)try{s+=i.derToInteger(e.value)}catch(t){s+="0x"+n.util.bytesToHex(e.value)}else if(e.type===i.Type.BITSTRING){if(e.value.length>1?s+="0x"+n.util.bytesToHex(e.value.slice(1)):s+="(none)",e.value.length>0){var f=e.value.charCodeAt(0);1==f?s+=" (1 unused bit shown)":f>1&&(s+=" ("+f+" unused bits shown)")}}else e.type===i.Type.OCTETSTRING?(a.test(e.value)||(s+="("+e.value+") "),s+="0x"+n.util.bytesToHex(e.value)):e.type===i.Type.UTF8?s+=n.util.decodeUtf8(e.value):e.type===i.Type.PRINTABLESTRING||e.type===i.Type.IA5String?s+=e.value:a.test(e.value)?s+="0x"+n.util.bytesToHex(e.value):0===e.value.length?s+="[null]":s+=e.value}return s}},
/*!**********************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/md.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);e.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},
/*!*******************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! process-nextick-args */138),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var s=r(/*! core-util-is */104);s.inherits=r(/*! inherits */3);var o=r(/*! ./_stream_readable */319),a=r(/*! ./_stream_writable */200);s.inherits(l,o);for(var c=i(a.prototype),u=0;u<c.length;u++){var h=c[u];l.prototype[h]||(l.prototype[h]=a.prototype[h])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},
/*!*******************************************!*\
  !*** ./node_modules/cipher-base/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer,i=r(/*! stream */137).Transform,s=r(/*! string_decoder */77).StringDecoder;function o(e){i.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(/*! inherits */3)(o,i),o.prototype.update=function(e,t,r){"string"==typeof e&&(e=n.from(e,t));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},o.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},o.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},o.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new s(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},e.exports=o},
/*!*******************************************!*\
  !*** ./node_modules/is-ipfs/src/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! bs58 */47),i=r(/*! multihashes */13),s=r(/*! multibase */72),o=r(/*! multiaddr */15),a=r(/*! mafmt */43),c=r(/*! cids */4),u=/^https?:\/\/[^/]+\/(ip(f|n)s)\/((\w+).*)/,h=/^\/(ip(f|n)s)\/((\w+).*)/,l=1,f=4,d=/^https?:\/\/([^/]+)\.(ip(?:f|n)s)\.[^/]+/;function p(e){try{return new c(e),!0}catch(e){return!1}}function A(e){if(!e)return!1;if(o.isMultiaddr(e))return!0;try{return new o(e),!0}catch(e){return!1}}function g(e,t,r=l,n=f){const i=_(e);if(!i)return!1;const s=i.match(t);if(!s)return!1;if("ipfs"!==s[r])return!1;let o=s[n];return o&&t===d&&(o=o.toLowerCase()),p(o)}function y(e,t,r=l,n){const i=_(e);if(!i)return!1;const s=i.match(t);if(!s)return!1;if("ipns"!==s[r])return!1;if(n&&t===d){let e=s[n];return p(e=e.toLowerCase())}return!0}function m(e){return"string"==typeof e}function _(e){return t.isBuffer(e)?n.encode(e):!!m(e)&&e}const b=e=>g(e,d,2,1),w=e=>y(e,d,2,1);e.exports={multihash:function(e){const r=_(e);try{const e=t.from(n.decode(r));return i.decode(e),!0}catch(e){return!1}},multiaddr:A,peerMultiaddr:function(e){return A(e)&&a.IPFS.matches(e)},cid:p,base32cid:e=>"base32"===function(e){try{return s.isEncoded(e)}catch(e){return!1}}(e)&&p(e),ipfsSubdomain:b,ipnsSubdomain:w,subdomain:e=>b(e)||w(e),subdomainPattern:d,ipfsUrl:e=>g(e,u),ipnsUrl:e=>y(e,u),url:e=>g(e,u)||y(e,u),urlPattern:u,ipfsPath:e=>g(e,h),ipnsPath:e=>y(e,h),path:e=>g(e,h)||y(e,h),pathPattern:h,urlOrPath:e=>g(e,u)||y(e,u)||g(e,h)||y(e,h),cidPath:e=>m(e)&&!p(e)&&g(`/ipfs/${e}`,h)}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/utils.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1),i=(e,t,r)=>{let n=0;const i=r.length;for(;n<i;){if(e(t,r[n]))return!0;n+=1}return!1};e.exports={logger:(e,t)=>{const r=["bitswap"];t&&r.push(t),e&&r.push(`${e.toB58String().slice(0,8)}`);const i=n(r.join(":"));return i.error=n(r.concat(["error"]).join(":")),i},includesWith:i,uniqWith:(e,t)=>{let r=0;const n=t.length,s=[];let o;for(;r<n;)o=t[r],i(e,o,s)||(s[s.length]=o),r+=1;return s},groupBy:(e,t)=>t.reduce((t,r)=>{const n=e(r);return t[n]?t[n].push(r):t[n]=[r],t},{}),pullAllWith:(e,t,r)=>t.filter(t=>!i(e,t,r)),sortBy:(e,t)=>Array.prototype.slice.call(t,0).sort((t,r)=>{const n=e(t),i=e(r);return n<i?-1:n>i?1:0})}},
/*!*********************************************!*\
  !*** ./node_modules/pull-pushable/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){"function"==typeof e&&(t=e,e=!1);var r,n,i,s=[];function o(e,t){e&&(r=e,n&&h(r)),n=t,u()}function a(e){i=i||e||!0,u()}function c(e){i||(n?h(r,e):s.push(e))}if(e)return{push:c,end:a,source:o,buffer:s};return o.push=c,o.end=a,o.buffer=s,o;function u(){n&&(r?h(r):!s.length&&i?h(i):s.length&&h(null,s.shift()))}function h(e,r){var i=n;if(e&&t){var s=t;t=null,s(!0===e?null:e)}n=null,i(e,r)}}},
/*!**************************************************!*\
  !*** ./node_modules/pull-stream/throughs/map.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(e){return e}var i=r(/*! ../util/prop */111);e.exports=function(e){return e?(e=i(e),function(t){return function(r,n){t(r,(function(r,i){try{i=r?null:e(i)}catch(e){return t(e,(function(){return n(e)}))}n(r,i)}))}}):n}},
/*!*********************************************!*\
  !*** ./node_modules/ipfs/src/core/utils.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! is-ipfs */62),i=r(/*! cids */4);t.OFFLINE_ERROR="This command must be run in online mode. Try running 'ipfs daemon' first.";t.normalizePath=e=>{if(n.cid(e))return`/ipfs/${e}`;if(n.path(e))return e;throw Object.assign(new Error(`invalid ${e} path`),{code:"ERR_BAD_PATH"})},t.parseIpfsPath=function(e){const t=new Error("invalid ipfs ref path"),r=(e=e.replace(/^\/ipfs\//,"")).match(/([^/]+(?:\/[^/]+)*)\/?$/);if(!r)throw t;const[i,...s]=r[1].split("/");if(n.cid(i))return{hash:i,links:s};throw t},t.resolvePath=async function(e,r){Array.isArray(r)||(r=[r]);const n=[];for(const s of r){if("string"!=typeof s){n.push(new i(s));continue}const r=t.parseIpfsPath(s);let o=new i(r.hash),a=r.links;if(a.length)for(;;){const t=await e.get(o);if(!a.length){n.push(o);break}const r=a[0],i=t.Links.find(e=>e.Name===r);if(!i)throw new Error(`no link named "${r}" under ${o}`);o=i.Hash,a=a.slice(1)}else n.push(o)}return n}},
/*!**********************************************!*\
  !*** ./node_modules/pull-handshake/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! pull-reader */380),i=r(/*! pull-pushable */64),s=r(/*! pull-cat */411),o=r(/*! pull-pair */890);e.exports=function(e,t){"function"==typeof e&&(t=e,e={}),t=function(e){var t=0;return function(r,n,i){t++||e(r,n,i)}}(t||function(){});var r=n(e&&e.timeout||5e3),a=i((function(e){e&&t(e)})),c=o();return{handshake:{read:r.read,abort:function(e){a.end(e),r.abort(e,(function(e){})),t(e)},write:a.push,rest:function(){return a.end(),{source:r.read(),sink:c.sink}}},sink:r,source:s([a,c.source])}}},
/*!*****************************************************!*\
  !*** ./node_modules/pull-stream-to-stream/index.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t,n){var i=r(/*! stream */137);e.exports=o,e.exports.source=function(e){return o(null,e)},e.exports.sink=function(e){return o(e,null)};var s=void 0===t?n.nextTick:t;function o(e,t){e&&"object"==typeof e&&(t=e.source,e=e.sink);var r,n,o,a=[],c=[],u=new i;u.writable=u.readable=!0,u.write=function(e){return a.length?a.shift()(null,e):c.push(e),a.length||(n=!0),!!a.length},u.end=function(){t?c.length?p():t(r=!0,a.length?a.shift():function(){}):a.length&&a.shift()(!0)},u.source=function(e,t){c.length?(t(null,c.shift()),c.length||u.emit("drain")):((r=r||e)?t(r):a.push(t),n&&(n=!1,u.emit("drain")))},e&&(o=e(u.source)),o&&!t&&(t=o);var h=[],l=!1,f=!1;if(u.sink=function(e){t=e,s(p)},t){u.sink(t);var d=u.pipe.bind(u);u.pipe=function(e,t){var r=d(e,t);return u.paused&&u.resume(),r}}function p(){if(!1,t&&!f){for(;h.length&&!u.paused;)u.emit("data",h.shift());if(!u.paused){if(l)return u.emit("end");f=!0,t(null,(function e(n,i){f=!1,u.paused?(!0===n?l=n:n?u.emit("error",n):h.push(i),!0):n&&!0!==(r=n)?u.emit("error",n):(r=r||n)?u.emit("end"):(u.emit("data",i),f=!0,t(null,e))}))}}}return u.pause=function(){return u.paused=!0,u},u.resume=function(){return u.paused=!1,p(),u},u.destroy=function(){!r&&t&&t(r=!0,(function(){})),r=!0,a.length&&a.shift()(!0),u.emit("close")},u}}).call(this,r(/*! ./../timers-browserify/main.js */41).setImmediate,r(/*! ./../process/browser.js */2))},
/*!*************************************************************!*\
  !*** ./node_modules/async-iterator-to-pull-stream/index.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! get-iterator */458),i=r(/*! pull-stream-to-async-iterator */256);function s(e){return e=n(e),async(t,r)=>{if(t){if(e.return)try{await e.return()}catch(e){return r(e)}return r(t)}let n;try{n=await e.next()}catch(e){return r(e)}if(n.done)return r(!0);r(null,n.value)}}s.source=s,s.transform=s.through=e=>t=>s(e(i(t))),s.duplex=e=>({sink:s.sink(e.sink),source:s(e.source)}),s.sink=e=>t=>{e({[Symbol.asyncIterator](){return this},next:()=>new Promise((e,r)=>{t(null,(t,n)=>!0===t?e({done:!0,value:n}):t?r(t):void e({done:!1,value:n}))}),return:()=>new Promise((e,r)=>{t(!0,(t,n)=>{if(t&&!0!==t)return r(t);e({done:!0,value:n})})}),throw:e=>new Promise((r,n)=>{t(e,(e,t)=>{if(e&&!0!==e)return n(e);r({done:!0,value:t})})})})},e.exports=s},
/*!**************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/node_modules/err-code/index.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?r=t:null!=t&&(e.code=t),r)for(n in r)e[n]=r[n];return e}},
/*!*************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/to-mfs-path.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{FILE_SEPARATOR:n}=r(/*! ./constants */46),i=r(/*! ./with-mfs-root */477),s=r(/*! ./to-path-components */260),o=r(/*! ipfs-unixfs-exporter */52),a=r(/*! err-code */44);e.exports=async(e,t)=>{const r=Array.isArray(t);let c=Array.isArray(t)?t:[t];const u=await i(e);return c=c.map(e=>{if((e=(e=(e||"").trim()).replace(/(\/\/+)/g,"/")).endsWith("/")&&e.length>1&&(e=e.substring(0,e.length-1)),!e)throw a(new Error("paths must not be empty"),"ERR_NO_PATH");if(e.substring(0,1)!==n)throw a(new Error(`paths must start with a leading ${n}`),"ERR_INVALID_PATH");e.substring(e.length-n.length)===n&&(e=e.substring(0,e.length-n.length));const t=s(e);if("ipfs"===t[0]){let e;return e=2===t.length?`${n}${t.join(n)}`:`${n}${t.slice(0,t.length-1).join(n)}`,{type:"ipfs",depth:t.length-2,mfsPath:`${n}${t.join(n)}`,mfsDirectory:e,parts:t,path:`${n}${t.join(n)}`,name:t[t.length-1]}}const r=`/ipfs/${u}${t.length?"/"+t.join(n):""}`,i=`/ipfs/${u}/${t.slice(0,t.length-1).join(n)}`;return{type:"mfs",depth:t.length,mfsDirectory:i,mfsPath:r,parts:t,path:`${n}${t.join(n)}`,name:t[t.length-1]}}),await Promise.all(c.map(async t=>{const r="mfs"===t.type?t.mfsPath:t.path;try{const n=await o(r,e.ipld);t.cid=n.cid,t.mfsPath=`/ipfs/${n.path}`,t.unixfs=n.unixfs,t.content=n.content}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}t.exists=Boolean(t.cid)})),r?c:c[0]}},
/*!*********************************************!*\
  !*** ./node_modules/multibase/src/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n){const i=r(/*! ./constants */533);(t=e.exports=o).encode=function(e,t){const r=a(e);return o(r.name,n.from(r.encode(t)))},t.decode=function(e){n.isBuffer(e)&&(e=e.toString());const t=e.substring(0,1);"string"==typeof(e=e.substring(1,e.length))&&(e=n.from(e));const r=a(t);return n.from(r.decode(e.toString()))},t.isEncoded=function(e){n.isBuffer(e)&&(e=e.toString());if("[object String]"!==Object.prototype.toString.call(e))return!1;const t=e.substring(0,1);try{return a(t).name}catch(e){return!1}},t.names=Object.freeze(Object.keys(i.names)),t.codes=Object.freeze(Object.keys(i.codes));const s=new Error("Unsupported encoding");function o(e,t){if(!t)throw new Error("requires an encoded buffer");const r=a(e),i=n.from(r.code);return function(e,t){a(e).decode(t.toString())}(r.name,t),n.concat([i,t])}function a(e){let t;if(i.names[e])t=i.names[e];else{if(!i.codes[e])throw s;t=i.codes[e]}if(!t.isImplemented())throw new Error("Base "+e+" is not implemented yet");return t}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/dag-link/dagLink.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! cids */4),i=r(/*! assert */24),s=r(/*! class-is */34);e.exports=s(class{constructor(e,t,r){i(r,"A link requires a cid to point to"),this._name=e||"",this._nameBuf=null,this._size=t,this._cid=new n(r)}toString(){return`DAGLink <${this._cid.toBaseEncodedString()} - name: "${this.Name}", size: ${this.Tsize}>`}toJSON(){return this._json||(this._json=Object.freeze({name:this.Name,size:this.Tsize,cid:this.Hash.toBaseEncodedString()})),Object.assign({},this._json)}get Name(){return this._name}get nameAsBuffer(){return null!==this._nameBuf?this._nameBuf:(this._nameBuf=t.from(this._name),this._nameBuf)}set Name(e){throw new Error("Can't set property: 'name' is immutable")}get Tsize(){return this._size}set Tsize(e){throw new Error("Can't set property: 'size' is immutable")}get Hash(){return this._cid}set Hash(e){throw new Error("Can't set property: 'cid' is immutable")}},{className:"DAGLink",symbolName:"@ipld/js-ipld-dag-pb/daglink"})}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/oids.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);n.pki=n.pki||{};var i=e.exports=n.pki.oids=n.oids=n.oids||{};function s(e,t){i[e]=t,i[t]=e}function o(e,t){i[e]=t}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.101.112","EdDSA25519"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.5","serialName"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.9","streetAddress"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.13","description"),s("2.5.4.15","businessCategory"),s("2.5.4.17","postalCode"),s("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),s("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/random.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./aes */186),r(/*! ./sha256 */582),r(/*! ./prng */583),r(/*! ./util */16),n.random&&n.random.getBytes?e.exports=n.random:function(t){var r={},i=new Array(4),s=n.util.createBuffer();function o(){var e=n.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return n.aes._updateBlock(e,t,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},r.increment=function(e){return++e[3],e},r.md=n.md.sha256;var a=o(),c=null,u=n.util.globalScope,h=u.crypto||u.msCrypto;if(h&&h.getRandomValues&&(c=function(e){return h.getRandomValues(e)}),n.options.usePureJavaScript||!n.util.isNodejs&&!c){if("undefined"==typeof window||window.document,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var f in navigator)try{"string"==typeof navigator[f]&&(l+=navigator[f])}catch(e){}a.collect(l),l=null}t&&(t().mousemove((function(e){a.collectInt(e.clientX,16),a.collectInt(e.clientY,16)})),t().keypress((function(e){a.collectInt(e.charCode,8)})))}if(n.random)for(var f in a)n.random[f]=a[f];else n.random=a;n.random.createInstance=o,e.exports=n.random}("undefined"!=typeof jQuery?jQuery:null)},
/*!**********************************************!*\
  !*** ./node_modules/async/internal/slice.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t|=0;for(var r=Math.max(e.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=e[t+i];return n},e.exports=t.default},
/*!***********************************************************!*\
  !*** ./node_modules/string_decoder/lib/string_decoder.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! safe-buffer */6).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=h,this.end=l,t=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function h(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=o(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=o(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},
/*!*************************************!*\
  !*** ./node_modules/sha.js/hash.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer;function i(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,i=this._blockSize,s=e.length,o=this._len,a=0;a<s;){for(var c=o%i,u=Math.min(s-a,i-c),h=0;h<u;h++)r[c+h]=e[a+h];a+=u,(o+=u)%i==0&&this._update(r)}return this._len+=s,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return e?s.toString(e):s},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=i},
/*!****************************************!*\
  !*** ./node_modules/lodash/isArray.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=Array.isArray;e.exports=r},
/*!*****************************************!*\
  !*** ./node_modules/xtend/immutable.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty},
/*!********************************************************!*\
  !*** ./node_modules/readable-stream/errors-browser.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,o,a;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(s(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n},
/*!************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_duplex.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=u;var i=r(/*! ./_stream_readable */357),s=r(/*! ./_stream_writable */361);r(/*! inherits */3)(u,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||t.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,r(/*! ./../../process/browser.js */2))},
/*!****************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/random.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./aes */145),r(/*! ./sha256 */751),r(/*! ./prng */752),r(/*! ./util */20),n.random&&n.random.getBytes?e.exports=n.random:function(t){var r={},i=new Array(4),s=n.util.createBuffer();function o(){var e=n.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return n.aes._updateBlock(e,t,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},r.increment=function(e){return++e[3],e},r.md=n.md.sha256;var a=o(),c=null,u=n.util.globalScope,h=u.crypto||u.msCrypto;if(h&&h.getRandomValues&&(c=function(e){return h.getRandomValues(e)}),n.options.usePureJavaScript||!n.util.isNodejs&&!c){if("undefined"==typeof window||window.document,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var f in navigator)try{"string"==typeof navigator[f]&&(l+=navigator[f])}catch(e){}a.collect(l),l=null}t&&(t().mousemove((function(e){a.collectInt(e.clientX,16),a.collectInt(e.clientY,16)})),t().keypress((function(e){a.collectInt(e.charCode,8)})))}if(n.random)for(var f in a)n.random[f]=a[f];else n.random=a;n.random.createInstance=o,e.exports=n.random}("undefined"!=typeof jQuery?jQuery:null)},
/*!************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/md.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);e.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},
/*!***************************************************!*\
  !*** ./node_modules/pull-stream/sinks/collect.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./reduce */219);e.exports=function(e){return n((function(e,t){return e.push(t),e}),[],e)}},
/*!*************************************************!*\
  !*** ./node_modules/libp2p-pubsub/src/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5),i=r(/*! pull-stream/pull */17),s=r(/*! pull-stream/sources/empty */109),o=r(/*! async/each */152),a=r(/*! time-cache */878),c=r(/*! debug */1),u=r(/*! err-code */8),h=r(/*! ./peer */880),l=r(/*! ./message */232),{signMessage:f,verifySignature:d}=r(/*! ./message/sign */883),p=r(/*! ./utils */884),A=r(/*! async/nextTick */35);e.exports=class extends n{constructor(e,t,r,n){super(),n={signMessages:!0,strictSigning:!0,...n},this.log=c(e),this.log.err=c(`${e}:error`),this.multicodec=t,this.libp2p=r,this.started=!1,n.signMessages&&(this.peerId=this.libp2p.peerInfo.id),this.strictSigning=n.strictSigning,this.topics=new Map,this.seenCache=new a,this.peers=new Map,this._dials=new Set,this._onConnection=this._onConnection.bind(this),this._dialPeer=this._dialPeer.bind(this)}_addPeer(e){const t=e.info.id.toB58String();let r=this.peers.get(t);return r||(this.log("new peer",t),this.peers.set(t,e),r=e,e.once("close",()=>this._removePeer(e))),++r._references,r}_removePeer(e){const t=e.info.id.toB58String();return this.log("remove",t,e._references),0==--e._references&&(this.log("delete peer",t),this.peers.delete(t)),e}_dialPeer(e,t){t=t||function(){};const r=e.id.toB58String(),n=this.peers.get(r);return n&&n.isConnected?A(()=>t()):this._dials.has(r)?(this.log("already dialing %s, ignoring dial attempt",r),A(()=>t())):(this._dials.add(r),this.log("dialing %s",r),void this.libp2p.dialProtocol(e,this.multicodec,(n,i)=>{this.log("dial to %s complete",r);const s=!this._dials.has(r);return this._dials.delete(r),n?(this.log.err(n),t()):s?(this.log("pubsub was stopped, not processing dial to %s",r),t()):void this._onDial(e,i,t)}))}_onDial(e,t,r){const n=e.id.toB58String();this.log("connected",n),this._addPeer(new h(e)).attachConnection(t),A(()=>r())}_onConnection(e,t){t.getPeerInfo((e,r)=>{if(e)return this.log.err("Failed to identify incomming conn",e),i(s(),t);const n=r.id.toB58String(),o=this._addPeer(new h(r));this._processConnection(n,t,o)})}_processConnection(e,t,r){throw u("_processConnection must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}_onConnectionEnd(e,t,r){r&&"socket hang up"!==r.message&&this.log.err(r),this.log("connection ended",e,r?r.message:""),this._removePeer(t)}_buildMessage(e,t){const r=p.normalizeOutRpcMessage(e);this.peerId?f(this.peerId,r,t):A(t,null,r)}publish(e,t,r){throw u("publish must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}subscribe(e){throw u("subscribe must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}unsubscribe(e){throw u("unsubscribe must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}start(e){if(this.started)return A(()=>e(new Error("already started")));this.log("starting"),this.libp2p.handle(this.multicodec,this._onConnection),this.libp2p.on("peer:connect",this._dialPeer);const t=Object.values(this.libp2p.peerBook.getAll());o(t,(e,t)=>this._dialPeer(e,t),t=>{A(()=>{this.log("started"),this.started=!0,e(t)})})}stop(e){if(!this.started)return A(()=>e(new Error("not started yet")));this.libp2p.unhandle(this.multicodec),this.libp2p.removeListener("peer:connect",this._dialPeer),this._dials=new Set,this.log("stopping"),o(this.peers.values(),(e,t)=>e.close(t),t=>{if(t)return e(t);this.log("stopped"),this.peers=new Map,this.started=!1,e()})}validate(e,t){if(this.strictSigning&&!e.signature)return this.log("Signing required and no signature was present, dropping message:",e),A(t,null,!1);e.signature?d(e,(e,r)=>{if(e)return t(e);t(null,r)}):A(t,null,!0)}},e.exports.message=l,e.exports.utils=p},
/*!*************************************************!*\
  !*** ./node_modules/component-emitter/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},
/*!************************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/engine.io-parser/lib/browser.js ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n,i=r(/*! ./keys */924),s=r(/*! has-binary2 */423),o=r(/*! arraybuffer.slice */925),a=r(/*! after */926),c=r(/*! ./utf8 */927);"undefined"!=typeof ArrayBuffer&&(n=r(/*! base64-arraybuffer */928));var u="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),l=u||h;t.protocol=3;var f=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=i(f),p={type:"error",data:"parser error"},A=r(/*! blob */929);function g(e,t,r){for(var n=new Array(e.length),i=a(e.length,r),s=function(e,r,i){t(r,(function(t,r){n[e]=r,i(t,n)}))},o=0;o<e.length;o++)s(o,e[o],i)}t.encodePacket=function(e,r,n,i){"function"==typeof r&&(i=r,r=!1),"function"==typeof n&&(i=n,n=null);var s=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&s instanceof ArrayBuffer)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var i=e.data,s=new Uint8Array(i),o=new Uint8Array(1+i.byteLength);o[0]=f[e.type];for(var a=0;a<s.length;a++)o[a+1]=s[a];return n(o.buffer)}(e,r,i);if(void 0!==A&&s instanceof A)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);if(l)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var i=new FileReader;return i.onload=function(){t.encodePacket({type:e.type,data:i.result},r,!0,n)},i.readAsArrayBuffer(e.data)}(e,r,n);var i=new Uint8Array(1);i[0]=f[e.type];var s=new A([i.buffer,e.data]);return n(s)}(e,r,i);if(s&&s.base64)return function(e,r){var n="b"+t.packets[e.type]+e.data.data;return r(n)}(e,i);var o=f[e.type];return void 0!==e.data&&(o+=n?c.encode(String(e.data),{strict:!1}):String(e.data)),i(""+o)},t.encodeBase64Packet=function(e,r){var n,i="b"+t.packets[e.type];if(void 0!==A&&e.data instanceof A){var s=new FileReader;return s.onload=function(){var e=s.result.split(",")[1];r(i+e)},s.readAsDataURL(e.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var o=new Uint8Array(e.data),a=new Array(o.length),c=0;c<o.length;c++)a[c]=o[c];n=String.fromCharCode.apply(null,a)}return i+=btoa(n),r(i)},t.decodePacket=function(e,r,n){if(void 0===e)return p;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),r);if(n&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return p;var i=e.charAt(0);return Number(i)==i&&d[i]?e.length>1?{type:d[i],data:e.substring(1)}:{type:d[i]}:p}i=new Uint8Array(e)[0];var s=o(e,1);return A&&"blob"===r&&(s=new A([s])),{type:d[i],data:s}},t.decodeBase64Packet=function(e,t){var r=d[e.charAt(0)];if(!n)return{type:r,data:{base64:!0,data:e.substr(1)}};var i=n.decode(e.substr(1));return"blob"===t&&A&&(i=new A([i])),{type:r,data:i}},t.encodePayload=function(e,r,n){"function"==typeof r&&(n=r,r=null);var i=s(e);if(r&&i)return A&&!l?t.encodePayloadAsBlob(e,n):t.encodePayloadAsArrayBuffer(e,n);if(!e.length)return n("0:");g(e,(function(e,n){t.encodePacket(e,!!i&&r,!1,(function(e){n(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return n(t.join(""))}))},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);var i;if("function"==typeof r&&(n=r,r=null),""===e)return n(p,0,1);for(var s,o,a="",c=0,u=e.length;c<u;c++){var h=e.charAt(c);if(":"===h){if(""===a||a!=(s=Number(a)))return n(p,0,1);if(a!=(o=e.substr(c+1,s)).length)return n(p,0,1);if(o.length){if(i=t.decodePacket(o,r,!1),p.type===i.type&&p.data===i.data)return n(p,0,1);if(!1===n(i,c+s,u))return}c+=s,a=""}else a+=h}return""!==a?n(p,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,r){if(!e.length)return r(new ArrayBuffer(0));g(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){return r(null,e)}))}),(function(e,t){var n=t.reduce((function(e,t){var r;return e+(r="string"==typeof t?t.length:t.byteLength).toString().length+r+2}),0),i=new Uint8Array(n),s=0;return t.forEach((function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);r=n.buffer}i[s++]=t?0:1;var a=r.byteLength.toString();for(o=0;o<a.length;o++)i[s++]=parseInt(a[o]);i[s++]=255;for(n=new Uint8Array(r),o=0;o<n.length;o++)i[s++]=n[o]})),r(i.buffer)}))},t.encodePayloadAsBlob=function(e,r){g(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);e=n.buffer,t[0]=0}var s=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),o=new Uint8Array(s.length+1);for(i=0;i<s.length;i++)o[i]=parseInt(s[i]);if(o[s.length]=255,A){var a=new A([t.buffer,o.buffer,e]);r(null,a)}}))}),(function(e,t){return r(new A(t))}))},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var i=e,s=[];i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],u="",h=1;255!==a[h];h++){if(u.length>310)return n(p,0,1);u+=a[h]}i=o(i,2+u.length),u=parseInt(u);var l=o(i,0,u);if(c)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(e){var f=new Uint8Array(l);l="";for(h=0;h<f.length;h++)l+=String.fromCharCode(f[h])}s.push(l),i=o(i,u)}var d=s.length;s.forEach((function(e,i){n(t.decodePacket(e,r,!0),i,d)}))}},
/*!**************************************!*\
  !*** ./node_modules/async/series.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(i.default,e,t)};var n=s(r(/*! ./internal/parallel */430)),i=s(r(/*! ./eachOfSeries */948));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!***************************************************!*\
  !*** ./node_modules/promise-to-callback/index.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! is-fn */986),i=r(/*! set-immediate-shim */987);e.exports=function(e){if(!n(e.then))throw new TypeError("Expected a promise");return function(t){e.then((function(e){i(t,null,e)}),(function(e){i(t,e)}))}}},
/*!******************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/constants.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=t.second=1e3,i=t.minute=60*n,s=t.hour=60*i;t.MAX_RECORD_AGE=36*s,t.PROTOCOL_DHT="/ipfs/kad/1.0.0",t.PROVIDERS_KEY_PREFIX="/providers/",t.PROVIDERS_LRU_CACHE_SIZE=256,t.PROVIDERS_VALIDITY=24*s,t.PROVIDERS_CLEANUP_INTERVAL=s,t.READ_MESSAGE_TIMEOUT=10*n,t.GET_MANY_RECORD_COUNT=16,t.K=20,t.ALPHA=3,t.maxMessageSize=2<<22,t.defaultRandomWalk={enabled:!0,queriesPerPeriod:1,interval:5*i,timeout:10*n,delay:10*n}},
/*!*********************!*\
  !*** ./src/shop.ts ***!
  \*********************/
/*! exports provided: Shop */
/*! exports used: Shop */function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(/*! ./storage */485);class i{constructor(e){e.force=Object.assign({ipfs:!1,encryption:!1,mainnet:!1},e.force),"string"==typeof e.publicKey&&(e.publicKey=JSON.parse(e.publicKey));const{id:t,live:r,force:i}=e;try{new URL(e.logo)}catch(t){e.logo=location+e.logo}this.configuration=e,this.storage=new n.a(t,r||i.ipfs,r||i.encryption)}sumUp(e){return e.map(e=>e.price).reduce((e,t)=>e+t,0)}}},
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/descriptors.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/fails */94);e.exports=!n((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},
/*!*************************************************!*\
  !*** ./node_modules/core-js/internals/fails.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},
/*!***********************************************!*\
  !*** ./node_modules/core-js/internals/has.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},
/*!**************************************************************************!*\
  !*** ./node_modules/core-js/internals/create-non-enumerable-property.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/descriptors */93),i=r(/*! ../internals/object-define-property */177),s=r(/*! ../internals/create-property-descriptor */265);e.exports=n?function(e,t,r){return i.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e}},
/*!**********************************************!*\
  !*** ./node_modules/ipfs-block/src/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! cids */4),i=r(/*! class-is */34);e.exports=i(class{constructor(e,r){if(!e||!t.isBuffer(e))throw new Error("first argument  must be a buffer");if(!r||!n.isCID(r))throw new Error("second argument must be a CID");this._data=e,this._cid=r}get data(){return this._data}set data(e){throw new Error("Tried to change an immutable block")}get cid(){return this._cid}set cid(e){throw new Error("Tried to change an immutable block")}},{className:"Block",symbolName:"@ipfs/js-ipfs-block/block"})}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************************!*\
  !*** ./node_modules/multihashing-async/src/index.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! err-code */8),s=r(/*! multihashes */13),o=r(/*! ./crypto */548);async function a(e,t,r){const n=await a.digest(e,t,r);return s.encode(n,t,r)}a.Buffer=n,a.multihash=s,a.digest=async(e,t,r)=>{const n=a.createHash(t),i=await n(e);return r?i.slice(0,r):i},a.createHash=function(e){if(!e)throw i("hash algorithm must be specified","ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=s.coerceCode(e),!a.functions[e])throw i(`multihash function '${e}' not yet supported`,"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return a.functions[e]},a.functions={17:o.sha1,18:o.sha2256,19:o.sha2512,20:o.sha3512,21:o.sha3384,22:o.sha3256,23:o.sha3224,24:o.shake128,25:o.shake256,26:o.keccak224,27:o.keccak256,28:o.keccak384,29:o.keccak512,34:o.murmur3128,35:o.murmur332,86:o.dblSha2256},o.addBlake(a.functions),a.validate=async(e,t)=>{const r=await a(e,s.decode(t).name);return 0===n.compare(t,r)},e.exports=a},
/*!***********************************!*\
  !*** ./node_modules/util/util.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},i=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,s=n.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),c=n[r];r<s;c=n[++r])A(c)||!b(c)?o+=" "+c:o+=" "+a(c);return o},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var s,o={};function a(e,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(r)?n.showHidden=r:r&&t._extend(n,r),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),h(n,e,n.depth)}function c(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function u(e,t){return e}function h(e,r,n){if(e.customInspect&&r&&E(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return y(i)||(i=h(e,i,n)),i}var s=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(g(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(A(t))return e.stylize("null","null")}(e,r);if(s)return s;var o=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),v(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(r);if(0===o.length){if(E(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(_(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return e.stylize(Date.prototype.toString.call(r),"date");if(v(r))return l(r)}var u,b="",S=!1,C=["{","}"];(d(r)&&(S=!0,C=["[","]"]),E(r))&&(b=" [Function"+(r.name?": "+r.name:"")+"]");return _(r)&&(b=" "+RegExp.prototype.toString.call(r)),w(r)&&(b=" "+Date.prototype.toUTCString.call(r)),v(r)&&(b=" "+l(r)),0!==o.length||S&&0!=r.length?n<0?_(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=S?function(e,t,r,n,i){for(var s=[],o=0,a=t.length;o<a;++o)T(t,String(o))?s.push(f(e,t,r,n,String(o),!0)):s.push("");return i.forEach((function(i){i.match(/^\d+$/)||s.push(f(e,t,r,n,i,!0))})),s}(e,r,n,a,o):o.map((function(t){return f(e,r,n,a,t,S)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,b,C)):C[0]+b+C[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i,s){var o,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),T(n,i)||(o="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=A(r)?h(e,c.value,null):h(e,c.value,r-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),m(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function d(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function A(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function m(e){return void 0===e}function _(e){return b(e)&&"[object RegExp]"===S(e)}function b(e){return"object"==typeof e&&null!==e}function w(e){return b(e)&&"[object Date]"===S(e)}function v(e){return b(e)&&("[object Error]"===S(e)||e instanceof Error)}function E(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(m(s)&&(s=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!o[r])if(new RegExp("\\b"+r+"\\b","i").test(s)){var n=e.pid;o[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else o[r]=function(){};return o[r]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=p,t.isNull=A,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=m,t.isRegExp=_,t.isObject=b,t.isDate=w,t.isError=v,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(/*! ./support/isBuffer */560);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",I(),t.format.apply(t,arguments))},t.inherits=r(/*! inherits */561),t._extend=function(e,t){if(!t||!b(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function N(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!=typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=R,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};t.apply(this,r).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(N,t,o)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(/*! ./../process/browser.js */2))},
/*!***********************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/rsa.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);if(r(/*! ./asn1 */58),r(/*! ./jsbn */185),r(/*! ./oids */74),r(/*! ./pkcs1 */581),r(/*! ./prime */584),r(/*! ./random */75),r(/*! ./util */16),void 0===i)var i=n.jsbn.BigInteger;var s=n.util.isNodejs?r(/*! crypto */187):null,o=n.asn1,a=n.util;n.pki=n.pki||{},e.exports=n.pki.rsa=n.rsa=n.rsa||{};var c=n.pki,u=[6,4,2,4,2,4,6,2],h={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},l={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},f={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},d=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},p=function(e){var t;if(!(e.algorithm in c.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=c.oids[e.algorithm];var n=o.oidToDer(t).getBytes(),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),s=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);s.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,n)),s.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var a=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(a),o.toDer(i).getBytes()},A=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var s;t.dP||(t.dP=t.d.mod(t.p.subtract(i.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(i.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{s=new i(n.util.bytesToHex(n.random.getBytes(t.n.bitLength()/8)),16)}while(s.compareTo(t.n)>=0||!s.gcd(t.n).equals(i.ONE));for(var o=(e=e.multiply(s.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);o.compareTo(a)<0;)o=o.add(t.p);var c=o.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return c=c.multiply(s.modInverse(t.n)).mod(t.n)};function g(e,t,r){var i=n.util.createBuffer(),s=Math.ceil(t.n.bitLength()/8);if(e.length>s-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=s-11,o}i.putByte(0),i.putByte(r);var a,c=s-3-e.length;if(0===r||1===r){a=0===r?0:255;for(var u=0;u<c;++u)i.putByte(a)}else for(;c>0;){var h=0,l=n.random.getBytes(c);for(u=0;u<c;++u)0===(a=l.charCodeAt(u))?++h:i.putByte(a);c=h}return i.putByte(0),i.putBytes(e),i}function y(e,t,r,i){var s=Math.ceil(t.n.bitLength()/8),o=n.util.createBuffer(e),a=o.getByte(),c=o.getByte();if(0!==a||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&void 0===i)throw new Error("Encryption block is invalid.");var u=0;if(0===c){u=s-3-i;for(var h=0;h<u;++h)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===c)for(u=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++u}else if(2===c)for(u=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++u}if(0!==o.getByte()||u!==s-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function m(e,t,r){"function"==typeof t&&(r=t,t={});var s={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function o(){a(e.pBits,(function(t,n){return t?r(t):(e.p=n,null!==e.q?u(t,e.q):void a(e.qBits,u))}))}function a(e,t){n.prime.generateProbablePrime(e,s,t)}function u(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(i.ONE).gcd(e.e).compareTo(i.ONE))return e.p=null,void o();if(0!==e.q.subtract(i.ONE).gcd(e.e).compareTo(i.ONE))return e.q=null,void a(e.qBits,u);if(e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(i.ONE))return e.p=e.q=null,void o();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void a(e.qBits,u);var h=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"prng"in t&&(s.prng=t.prng),o()}function _(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=n.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function b(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function w(e){return n.util.isNodejs&&"function"==typeof s[e]}function v(e){return void 0!==a.globalScope&&"object"==typeof a.globalScope.crypto&&"object"==typeof a.globalScope.crypto.subtle&&"function"==typeof a.globalScope.crypto.subtle[e]}function E(e){return void 0!==a.globalScope&&"object"==typeof a.globalScope.msCrypto&&"object"==typeof a.globalScope.msCrypto.subtle&&"function"==typeof a.globalScope.msCrypto.subtle[e]}function S(e){for(var t=n.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}c.rsa.encrypt=function(e,t,r){var s,o=r,a=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(o=2===r,s=g(e,t,r)):(s=n.util.createBuffer()).putBytes(e);for(var c=new i(s.toHex(),16),u=A(c,t,o).toString(16),h=n.util.createBuffer(),l=a-Math.ceil(u.length/2);l>0;)h.putByte(0),--l;return h.putBytes(n.util.hexToBytes(u)),h.getBytes()},c.rsa.decrypt=function(e,t,r,s){var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=o,a}var c=new i(n.util.createBuffer(e).toHex(),16);if(c.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var u=A(c,t,r).toString(16),h=n.util.createBuffer(),l=o-Math.ceil(u.length/2);l>0;)h.putByte(0),--l;return h.putBytes(n.util.hexToBytes(u)),!1!==s?y(h.getBytes(),t,r):h.getBytes()},c.rsa.createKeyPairGenerationState=function(e,t,r){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var s,o=(r=r||{}).prng||n.random,a={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},c=r.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return(s={algorithm:c,state:0,bits:e,rng:a,eInt:t||65537,e:new i(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(s.eInt),s},c.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);for(var n,s=0,o=function(e,t){return e|t},a=+new Date,h=0;null===e.keys&&(t<=0||h<t);){if(0===e.state){var l=null===e.p?e.pBits:e.qBits,f=l-1;0===e.pqState?(e.num=new i(l,e.rng),e.num.testBit(f)||e.num.bitwiseTo(i.ONE.shiftLeft(f),o,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),s=0,++e.pqState):1===e.pqState?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(b(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(u[s++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(i.ONE).gcd(e.e).compareTo(i.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(i.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var d=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,d,e.p,e.q,d.mod(e.p1),d.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)}}h+=(n=+new Date)-a,a=n}return null!==e.keys},c.rsa.generateKeyPair=function(e,t,r,i){if(1===arguments.length?"object"==typeof e?(r=e,e=void 0):"function"==typeof e&&(i=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(i=t,t=void 0):"number"!=typeof t&&(r=t,t=void 0):(r=e,i=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(i=r,r=void 0):(i=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(i){if(w("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,r){if(e)return i(e);i(null,{privateKey:c.privateKeyFromPem(r),publicKey:c.publicKeyFromPem(t)})}));if(v("generateKey")&&v("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:S(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return a.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){i(e)})).then((function(e){if(e){var t=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(e)));i(null,{privateKey:t,publicKey:c.setRsaPublicKey(t.n,t.e)})}}));if(E("generateKey")&&E("exportKey")){var u=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:S(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return u.oncomplete=function(e){var t=e.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(t)));i(null,{privateKey:r,publicKey:c.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){i(e)}},void(u.onerror=function(e){i(e)})}}else if(w("generateKeyPairSync")){var h=s.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(h.privateKey),publicKey:c.publicKeyFromPem(h.publicKey)}}var l=c.rsa.createKeyPairGenerationState(e,t,r);if(!i)return c.rsa.stepKeyPairGenerationState(l,0),l.keys;m(l,r,i)},c.setRsaPublicKey=c.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,i){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return g(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return n.pkcs1.encode_rsa_oaep(t,e,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var s=t.encode(e,r,!0);return c.rsa.encrypt(s,r,!0)},verify:function(e,t,n){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===n?n={verify:function(e,t){return t=y(t,r,!0),e===o.fromDer(t).value[1].value}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(e,t){return e===(t=y(t,r,!0))}});var i=c.rsa.decrypt(t,r,!0,!1);return n.verify(e,i,r.n.bitLength())}};return r},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(e,t,r,i,s,o,a,u){var h={n:e,e:t,d:r,p:i,q:s,dP:o,dQ:a,qInv:u,decrypt:function(e,t,r){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var i=c.rsa.decrypt(e,h,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:y};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return n.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(i,h,!1)},sign:function(e,t){var r=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:p},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,h.n.bitLength());return c.rsa.encrypt(n,h,r)}};return h},c.wrapRsaPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(e).getBytes())])},c.privateKeyFromAsn1=function(e){var t,r,s,a,u,f,d,p,A={},g=[];if(o.validate(e,h,A,g)&&(e=o.fromDer(n.util.createBuffer(A.privateKey))),A={},g=[],!o.validate(e,l,A,g)){var y=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw y.errors=g,y}return t=n.util.createBuffer(A.privateKeyModulus).toHex(),r=n.util.createBuffer(A.privateKeyPublicExponent).toHex(),s=n.util.createBuffer(A.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(A.privateKeyPrime1).toHex(),u=n.util.createBuffer(A.privateKeyPrime2).toHex(),f=n.util.createBuffer(A.privateKeyExponent1).toHex(),d=n.util.createBuffer(A.privateKeyExponent2).toHex(),p=n.util.createBuffer(A.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new i(t,16),new i(r,16),new i(s,16),new i(a,16),new i(u,16),new i(f,16),new i(d,16),new i(p,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.qInv))])},c.publicKeyFromAsn1=function(e){var t={},r=[];if(o.validate(e,d,t,r)){var s,a=o.derToOid(t.publicKeyOid);if(a!==c.oids.rsaEncryption)throw(s=new Error("Cannot read public key. Unknown OID.")).oid=a,s;e=t.rsaPublicKey}if(r=[],!o.validate(e,f,t,r))throw(s=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,s;var u=n.util.createBuffer(t.publicKeyModulus).toHex(),h=n.util.createBuffer(t.publicKeyExponent).toHex();return c.setRsaPublicKey(new i(u,16),new i(h,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(e)])])},c.publicKeyToRSAPublicKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.e))])}},
/*!*********************************************!*\
  !*** ./node_modules/murmurhash3js/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ./lib/murmurHash3js */588)},
/*!***************************************!*\
  !*** ./node_modules/nodeify/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t,n){var i,s=r(/*! promise */590),o=r(/*! is-promise */306);function a(e,t){return"function"!=typeof t?e:e.then((function(e){i((function(){t(null,e)}))}),(function(e){i((function(){t(e)}))}))}function c(e){return a(this,e)}function u(e){if(e&&o(e)){e.nodeify=c;var t=e.then;return e.then=function(){return u(t.apply(this,arguments))},e}"function"==typeof e?e.prototype.nodeify=c:s.prototype.nodeify=c}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),u(this)}i="function"==typeof t?t:"object"==typeof n&&n&&n.nextTick?n.nextTick:function(e){setTimeout(e,0)},e.exports=a,a.extend=u,a.Promise=h,h.prototype=Object.create(s.prototype),h.prototype.constructor=h}).call(this,r(/*! ./../timers-browserify/main.js */41).setImmediate,r(/*! ./../process/browser.js */2))},
/*!******************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/base/buffer.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! inherits */3),i=r(/*! ../base/reporter */195).Reporter,s=r(/*! buffer */0).Buffer;function o(e,t){i.call(this,t),s.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function a(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return a.isEncoderBuffer(e)||(e=new a(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=s.byteLength(e);else{if(!s.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}n(o,i),t.DecoderBuffer=o,o.isDecoderBuffer=function(e){if(e instanceof o)return!0;return"object"==typeof e&&s.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},o.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},o.prototype.restore=function(e){const t=new o(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,i.prototype.restore.call(this,e.reporter),t},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},o.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const r=new o(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},o.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=a,a.isEncoderBuffer=function(e){if(e instanceof a)return!0;return"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},a.prototype.join=function(e,t){return e||(e=new s(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach((function(r){r.join(e,t),t+=r.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):s.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)}},
/*!***********************************************!*\
  !*** ./node_modules/core-util-is/lib/util.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************!*\
  !*** ./node_modules/async/internal/onlyOnce.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}},e.exports=t.default},
/*!******************************************!*\
  !*** ./node_modules/buffer-xor/index.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){e.exports=function(e,r){for(var n=Math.min(e.length,r.length),i=new t(n),s=0;s<n;++s)i[s]=e[s]^r[s];return i}}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/asn1.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./util */20),r(/*! ./oids */108);var i=e.exports=n.asn1=n.asn1||{};function s(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(e,t,r,s,o){if(n.util.isArray(s)){for(var a=[],c=0;c<s.length;++c)void 0!==s[c]&&a.push(s[c]);s=a}var u={tagClass:e,type:t,constructed:r,composed:r||n.util.isArray(s),value:s};return o&&"bitStringContents"in o&&(u.bitStringContents=o.bitStringContents,u.original=i.copy(u)),u},i.copy=function(e,t){var r;if(n.util.isArray(e)){r=[];for(var s=0;s<e.length;++s)r.push(i.copy(e[s],t));return r}return"string"==typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:i.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},i.equals=function(e,t,r){if(n.util.isArray(e)){if(!n.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(!i.equals(e[s],t[s]))return!1;return!0}if(typeof e!=typeof t)return!1;if("string"==typeof e)return e===t;var o=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&i.equals(e.value,t.value);return r&&r.includeBitStringContents&&(o=o&&e.bitStringContents===t.bitStringContents),o},i.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};var o=function(e,t){var r=e.getByte();if(128!==r){var n;if(128&r){var i=127&r;s(e,--t,i),n=e.getInt(i<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}};i.fromDer=function(e,t){return void 0===t&&(t={strict:!0,decodeBitStrings:!0}),"boolean"==typeof t&&(t={strict:t,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"==typeof e&&(e=n.util.createBuffer(e)),function e(t,r,n,a){var c;s(t,r,2);var u=t.getByte();r--;var h=192&u;var l=31&u;c=t.length();var f=o(t,r);r-=c-t.length();if(void 0!==f&&f>r){if(a.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=t.length(),d.remaining=r,d.requested=f,d}f=r}var p;var A;var g=32==(32&u);if(g)if(p=[],void 0===f)for(;;){if(s(t,r,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),r-=2;break}c=t.length(),p.push(e(t,r,n+1,a)),r-=c-t.length()}else for(;f>0;)c=t.length(),p.push(e(t,f,n+1,a)),r-=c-t.length(),f-=c-t.length();void 0===p&&h===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&(A=t.bytes(f));if(void 0===p&&a.decodeBitStrings&&h===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&f>1){var y=t.read,m=r,_=0;if(l===i.Type.BITSTRING&&(s(t,r,1),_=t.getByte(),r--),0===_)try{c=t.length();var b={verbose:a.verbose,strict:!0,decodeBitStrings:!0},w=e(t,r,n+1,b),v=c-t.length();r-=v,l==i.Type.BITSTRING&&v++;var E=w.tagClass;v!==f||E!==i.Class.UNIVERSAL&&E!==i.Class.CONTEXT_SPECIFIC||(p=[w])}catch(e){}void 0===p&&(t.read=y,r=m)}if(void 0===p){if(void 0===f){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=r}if(l===i.Type.BMPSTRING)for(p="";f>0;f-=2)s(t,r,2),p+=String.fromCharCode(t.getInt16()),r-=2;else p=t.getBytes(f)}var S=void 0===A?null:{bitStringContents:A};return i.create(h,l,g,p,S)}(e,e.length(),0,t)},i.toDer=function(e){var t=n.util.createBuffer(),r=e.tagClass|e.type,s=n.util.createBuffer(),o=!1;if("bitStringContents"in e&&(o=!0,e.original&&(o=i.equals(e,e.original))),o)s.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:s.putByte(0);for(var a=0;a<e.value.length;++a)void 0!==e.value[a]&&s.putBuffer(i.toDer(e.value[a]))}else if(e.type===i.Type.BMPSTRING)for(a=0;a<e.value.length;++a)s.putInt16(e.value.charCodeAt(a));else e.type===i.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?s.putBytes(e.value.substr(1)):s.putBytes(e.value);if(t.putByte(r),s.length()<=127)t.putByte(127&s.length());else{var c=s.length(),u="";do{u+=String.fromCharCode(255&c),c>>>=8}while(c>0);t.putByte(128|u.length);for(a=u.length-1;a>=0;--a)t.putByte(u.charCodeAt(a))}return t.putBuffer(s),t},i.oidToDer=function(e){var t,r,i,s,o=e.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var c=2;c<o.length;++c){t=!0,r=[],i=parseInt(o[c],10);do{s=127&i,i>>>=7,t||(s|=128),r.push(s),t=!1}while(i>0);for(var u=r.length-1;u>=0;--u)a.putByte(r[u])}return a},i.derToOid=function(e){var t;"string"==typeof e&&(e=n.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var i=0;e.length()>0;)i<<=7,128&(r=e.getByte())?i+=127&r:(t+="."+(i+r),i=0);return t},i.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var c=e.charAt(10),u=10;"+"!==c&&"-"!==c&&(a=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),u&&("+"===(c=e.charAt(u))||"-"===c)){var h=60*parseInt(e.substr(u+1,2),10)+parseInt(e.substr(u+4,2),10);h*=6e4,"+"===c?t.setTime(+t-h):t.setTime(+t+h)}return t},i.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),c=0,u=0,h=!1;"Z"===e.charAt(e.length-1)&&(h=!0);var l=e.length-5,f=e.charAt(l);"+"!==f&&"-"!==f||(u=60*parseInt(e.substr(l+1,2),10)+parseInt(e.substr(l+4,2),10),u*=6e4,"+"===f&&(u*=-1),h=!0);return"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),h?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,c),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(s,o,a,c)),t},i.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},i.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},i.integerToDer=function(e){var t=n.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},i.derToInteger=function(e){"string"==typeof e&&(e=n.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},i.validate=function(e,t,r,s){var o=!1;if(e.tagClass!==t.tagClass&&void 0!==t.tagClass||e.type!==t.type&&void 0!==t.type)s&&(e.tagClass!==t.tagClass&&s.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&s.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||void 0===t.constructed){if(o=!0,t.value&&n.util.isArray(t.value))for(var a=0,c=0;o&&c<t.value.length;++c)o=t.value[c].optional||!1,e.value[a]&&((o=i.validate(e.value[a],t.value[c],r,s))?++a:t.value[c].optional&&(o=!0)),!o&&s&&s.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(o&&r)if(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else s&&s.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return o};var a=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(e,t,r){var s="";r=r||2,(t=t||0)>0&&(s+="\n");for(var o="",c=0;c<t*r;++c)o+=" ";switch(s+=o+"Tag: ",e.tagClass){case i.Class.UNIVERSAL:s+="Universal:";break;case i.Class.APPLICATION:s+="Application:";break;case i.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case i.Class.PRIVATE:s+="Private:"}if(e.tagClass===i.Class.UNIVERSAL)switch(s+=e.type,e.type){case i.Type.NONE:s+=" (None)";break;case i.Type.BOOLEAN:s+=" (Boolean)";break;case i.Type.INTEGER:s+=" (Integer)";break;case i.Type.BITSTRING:s+=" (Bit string)";break;case i.Type.OCTETSTRING:s+=" (Octet string)";break;case i.Type.NULL:s+=" (Null)";break;case i.Type.OID:s+=" (Object Identifier)";break;case i.Type.ODESC:s+=" (Object Descriptor)";break;case i.Type.EXTERNAL:s+=" (External or Instance of)";break;case i.Type.REAL:s+=" (Real)";break;case i.Type.ENUMERATED:s+=" (Enumerated)";break;case i.Type.EMBEDDED:s+=" (Embedded PDV)";break;case i.Type.UTF8:s+=" (UTF8)";break;case i.Type.ROID:s+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:s+=" (Sequence)";break;case i.Type.SET:s+=" (Set)";break;case i.Type.PRINTABLESTRING:s+=" (Printable String)";break;case i.Type.IA5String:s+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:s+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case i.Type.BMPSTRING:s+=" (BMP String)"}else s+=e.type;if(s+="\n",s+=o+"Constructed: "+e.constructed+"\n",e.composed){var u=0,h="";for(c=0;c<e.value.length;++c)void 0!==e.value[c]&&(u+=1,h+=i.prettyPrint(e.value[c],t+1,r),c+1<e.value.length&&(h+=","));s+=o+"Sub values: "+u+h}else{if(s+=o+"Value: ",e.type===i.Type.OID){var l=i.derToOid(e.value);s+=l,n.pki&&n.pki.oids&&l in n.pki.oids&&(s+=" ("+n.pki.oids[l]+") ")}if(e.type===i.Type.INTEGER)try{s+=i.derToInteger(e.value)}catch(t){s+="0x"+n.util.bytesToHex(e.value)}else if(e.type===i.Type.BITSTRING){if(e.value.length>1?s+="0x"+n.util.bytesToHex(e.value.slice(1)):s+="(none)",e.value.length>0){var f=e.value.charCodeAt(0);1==f?s+=" (1 unused bit shown)":f>1&&(s+=" ("+f+" unused bits shown)")}}else e.type===i.Type.OCTETSTRING?(a.test(e.value)||(s+="("+e.value+") "),s+="0x"+n.util.bytesToHex(e.value)):e.type===i.Type.UTF8?s+=n.util.decodeUtf8(e.value):e.type===i.Type.PRINTABLESTRING||e.type===i.Type.IA5String?s+=e.value:a.test(e.value)?s+="0x"+n.util.bytesToHex(e.value):0===e.value.length?s+="[null]":s+=e.value}return s}},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/oids.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);n.pki=n.pki||{};var i=e.exports=n.pki.oids=n.oids=n.oids||{};function s(e,t){i[e]=t,i[t]=e}function o(e,t){i[e]=t}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.5","serialName"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.13","description"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},
/*!***************************************************!*\
  !*** ./node_modules/pull-stream/sources/empty.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(){return function(e,t){t(!0)}}},
/*!*************************************************!*\
  !*** ./node_modules/pull-stream/sinks/drain.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t){var r,n;function i(s){if(r=s,n)return i.abort();!function i(){for(var s=!0,o=!1;s;)if(o=!1,r(null,(function(a,c){if(o=!0,a=a||n){if(s=!1,t)t(!0===a?null:a);else if(a&&!0!==a)throw a}else e&&!1===e(c)||n?(s=!1,r(n||!0,t||function(){})):s||i()})),!o)return void(s=!1)}()}return i.abort=function(e,t){if("function"==typeof e&&(t=e,e=!0),n=e||!0,r)return r(n,t||function(){})},i}},
/*!***********************************************!*\
  !*** ./node_modules/pull-stream/util/prop.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return e&&("string"==typeof e?function(t){return t[e]}:"object"==typeof e&&"function"==typeof e.exec?function(t){var r=e.exec(t);return r&&r[0]}:e)}},
/*!****************************************!*\
  !*** ./node_modules/ipns/src/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! base32-encode */803),i=r(/*! timestamp-nano */804),{Key:s}=r(/*! interface-datastore */14),o=r(/*! libp2p-crypto */36),a=r(/*! peer-id */7),c=r(/*! multihashes */13),u=r(/*! err-code */805),h=r(/*! promisify-es6 */9),l=r(/*! debug */1),f=l("jsipns");f.error=l("jsipns:error");const d=r(/*! ./pb/ipns.proto */806),{parseRFC3339:p}=r(/*! ./utils */807),A=r(/*! ./errors */808),g=c.names.id,y=async(e,t,r,n,i)=>{const s={value:t,signature:await w(e,t,i,n),validityType:i,validity:n,sequence:r};return f(`ipns entry for ${t} created`),s},m=async(e,t)=>{const{value:r,validityType:n,validity:i}=t,s=v(r,n,i);let o;try{o=await h(e.verify,{context:e})(s,t.signature)}catch(e){o=!1}if(!o)throw f.error("record signature verification failed"),u(new Error("record signature verification failed"),A.ERR_SIGNATURE_VERIFICATION);if(n===d.ValidityType.EOL){let e;try{e=p(i.toString())}catch(e){throw f.error("unrecognized validity format (not an rfc3339 format)"),u(new Error("unrecognized validity format (not an rfc3339 format)"),A.ERR_UNRECOGNIZED_FORMAT)}if(e<Date.now())throw f.error("record has expired"),u(new Error("record has expired"),A.ERR_IPNS_EXPIRED_RECORD)}else if(n)throw f.error("unrecognized validity type"),u(new Error("unrecognized validity type"),A.ERR_UNRECOGNIZED_VALIDITY);f(`ipns entry for ${r} is valid`)},_=(e,t)=>{if(!t||!e){const e=new Error("one or more of the provided parameters are not defined");throw f.error(e),u(e,A.ERR_UNDEFINED_PARAMETER)}if(t.pubKey){let e;try{e=o.keys.unmarshalPublicKey(t.pubKey)}catch(e){throw f.error(e),e}return e}if(e.pubKey)return e.pubKey;throw Object.assign(new Error("no public key is available"),{code:A.ERR_UNDEFINED_PARAMETER})},b=e=>n(e,"RFC4648",{padding:!1}),w=(e,t,r,n)=>{try{const i=v(t,r,n);return h(e.sign,{context:e})(i)}catch(e){throw f.error("record signature creation failed"),u(new Error("record signature creation failed: "+e.message),A.ERR_SIGNATURE_CREATION)}},v=(e,r,n)=>{const i=t.from(e),s=t.from((e=>{if("0"===e.toString())return"EOL";const t=new Error(`unrecognized validity type ${e.toString()}`);throw f.error(t),u(t,A.ERR_UNRECOGNIZED_VALIDITY)})(r)),o=t.from(n);return t.concat([i,o,s])},E=e=>{const t=c.decode(e.id);return t.code!==g?null:o.keys.unmarshalPublicKey(t.digest)},S=d.encode,C=d.decode,k={validate:async(e,t)=>{const r=C(e),n=t.slice("/ipns/".length),i=a.createFromBytes(n),s=_(i,r);return await m(s,r),!0},select:(e,t)=>{const r=C(e),n=C(t);return r.sequence>n.sequence?0:1}};e.exports={create:(e,t,r,n)=>{const s=new i(Date.now()+Number(n)).toString(),o=d.ValidityType.EOL;return y(e,t,r,s,o)},createWithExpiration:(e,t,r,n)=>{const i=d.ValidityType.EOL;return y(e,t,r,n,i)},validate:m,embedPublicKey:async(e,t)=>{if(!e||!e.bytes||!t){const e=new Error("one or more of the provided parameters are not defined");throw f.error(e),u(e,A.ERR_UNDEFINED_PARAMETER)}let r,n;try{r=await h(a.createFromPubKey)(e.bytes)}catch(e){throw u(e,A.ERR_PEER_ID_FROM_PUBLIC_KEY)}try{n=E(r)}catch(e){throw f.error(e),u(e,A.ERR_PUBLIC_KEY_FROM_ID)}if(n)return null;try{t.pubKey=o.keys.marshalPublicKey(e)}catch(e){throw f.error(e),e}return t},extractPublicKey:_,getLocalKey:e=>new s(`/ipns/${b(e)}`),getIdKeys:e=>{const r=t.from("/pk/"),n=t.from("/ipns/");return{routingPubKey:new s(t.concat([r,e])),pkKey:new s(b(t.concat([r,e]))),routingKey:new s(t.concat([n,e])),ipnsKey:new s(b(t.concat([n,e])))}},marshal:S,unmarshal:C,validator:k,namespace:"/ipns/",namespaceLength:"/ipns/".length}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/utils/stream-to-value-with-transformer.js ***!
  \*************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./stream-to-value */226);e.exports=function(e,t,r){"function"==typeof e.pipe?n(e,(e,n)=>{if(e)return r(e);t(n,r)}):t(e,r)}},
/*!******************************************!*\
  !*** ./node_modules/pull-defer/index.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){t.source=r(/*! ./source */401),t.through=r(/*! ./through */856),t.sink=r(/*! ./sink */402),t.duplex=r(/*! ./duplex */403)},
/*!********************************************!*\
  !*** ./node_modules/lodash/isArrayLike.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./isFunction */228),i=r(/*! ./isLength */406);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},
/*!***********************************!*\
  !*** ./node_modules/async/map.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(/*! ./internal/doParallel */233)),i=s(r(/*! ./internal/map */888));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(i.default),e.exports=t.default},
/*!******************************************************!*\
  !*** ./node_modules/multistream-select/src/index.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.Listener=t.listener=r(/*! ./listener */889),t.Dialer=t.dialer=r(/*! ./dialer */897),t.matchSemver=r(/*! ./listener/match-semver */898),t.matchExact=r(/*! ./listener/match-exact */412),t.constants=r(/*! ./constants */157)},
/*!*****************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/index.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={Record:r(/*! ./record */970),validator:r(/*! ./validator */973),selection:r(/*! ./selection */980)}},
/*!*****************************************!*\
  !*** ./node_modules/fsm-event/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! events */5).EventEmitter,i=r(/*! assert */24),s=r(/*! fsm */1026);e.exports=function(e,t){"object"==typeof e&&(t=e,e="START");i.equal(typeof e,"string"),i.equal(typeof t,"object"),i.ok(t[e],"invalid starting state "+e),i.ok(s.validate(t));const r=new n;return o._graph=s.reachable(t),o._emitter=r,o._events=t,o._state=e,o.emit=o,o.on=function(e,t){r.on(e,t)},o;function o(e){const t=o._events[o._state][e];if(!function(e,t,r){if(!t)return!1;if(!e)return!0;const n=r[e];return!(!n||!n[t])&&1===n[t].length}(o._state,t,o._graph)){const t="invalid transition: "+o._state+" -> "+e;return r.emit("error",t)}const n=o._state+":leave",i=t+":enter";return o._state?void(r._events[n]?r.emit(n,s):s()):s();function s(){r._events[i]?r.emit(i,a):a()}function a(){o._state=t,r.emit(t),r.emit("done")}}}},
/*!**********************************************************!*\
  !*** ./node_modules/libp2p/src/circuit/circuit/utils.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multiaddr */15),i=r(/*! peer-info */21),s=r(/*! peer-id */7),o=r(/*! ../protocol */121),{getPeerInfo:a}=r(/*! ../../get-peer-info */161);e.exports=function(e){function t(e,t,r){return r=r||(()=>{}),e.write(o.CircuitRelay.encode({type:o.CircuitRelay.Type.STATUS,code:t})),r()}return{getB58String:function(e){let t=null;if(n.isMultiaddr(e)){t=n(e).getPeerId()}else i.isPeerInfo(e)&&(t=e.id.toB58String());return t},peerInfoFromMa:function(t){return a(t,e._peerBook)},isPeerConnected:function(t){return e.muxedConns[t]||e.conns[t]},validateAddrs:function(e,r,i,s){try{e.dstPeer.addrs.forEach(e=>n(e))}catch(e){return t(r,i===o.CircuitRelay.Type.HOP?o.CircuitRelay.Status.HOP_DST_MULTIADDR_INVALID:o.CircuitRelay.Status.STOP_DST_MULTIADDR_INVALID),s(e)}try{e.srcPeer.addrs.forEach(e=>n(e))}catch(e){return t(r,i===o.CircuitRelay.Type.HOP?o.CircuitRelay.Status.HOP_SRC_MULTIADDR_INVALID:o.CircuitRelay.Status.STOP_SRC_MULTIADDR_INVALID),s(e)}return s(null)},writeResponse:t,peerIdFromId:function(e){return"string"==typeof e?s.createFromB58String(e):s.createFromBytes(e)}}}},
/*!***********************************************************!*\
  !*** ./node_modules/libp2p/src/circuit/protocol/index.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! protons */28);e.exports=n("\nmessage CircuitRelay {\n\n  enum Status {\n    SUCCESS                    = 100;\n    HOP_SRC_ADDR_TOO_LONG      = 220;\n    HOP_DST_ADDR_TOO_LONG      = 221;\n    HOP_SRC_MULTIADDR_INVALID  = 250;\n    HOP_DST_MULTIADDR_INVALID  = 251;\n    HOP_NO_CONN_TO_DST         = 260;\n    HOP_CANT_DIAL_DST          = 261;\n    HOP_CANT_OPEN_DST_STREAM   = 262;\n    HOP_CANT_SPEAK_RELAY       = 270;\n    HOP_CANT_RELAY_TO_SELF     = 280;\n    STOP_SRC_ADDR_TOO_LONG     = 320;\n    STOP_DST_ADDR_TOO_LONG     = 321;\n    STOP_SRC_MULTIADDR_INVALID = 350;\n    STOP_DST_MULTIADDR_INVALID = 351;\n    STOP_RELAY_REFUSED         = 390;\n    MALFORMED_MESSAGE          = 400;\n  }\n\n  enum Type { // RPC identifier, either HOP, STOP or STATUS\n    HOP = 1;\n    STOP = 2;\n    STATUS = 3;\n    CAN_HOP = 4;\n  }\n\n  message Peer {\n    required bytes id = 1;    // peer id\n    repeated bytes addrs = 2; // peer's known addresses\n  }\n\n  optional Type type = 1;     // Type of the message\n\n  optional Peer srcPeer = 2;  // srcPeer and dstPeer are used when Type is HOP or STATUS\n  optional Peer dstPeer = 3;\n\n  optional Status code = 4;   // Status code, used when Type is STATUS\n}\n")},
/*!********************************************!*\
  !*** ./node_modules/ipfs/src/utils/cid.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! cids */4);t.cidToString=(e,t)=>{if((t=t||{}).upgrade=!1!==t.upgrade,n.isCID(e)||(e=new n(e)),0===e.version&&t.base&&"base58btc"!==t.base){if(!t.upgrade)return e.toString();e=e.toV1()}return e.toBaseEncodedString(t.base)}},
/*!**************************************************!*\
  !*** ./node_modules/async-iterator-all/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=async e=>{const t=[];for await(const r of e)t.push(r);return t}},
/*!**************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/node_modules/err-code/index.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?r=t:null!=t&&(e.code=t),r)for(n in r)e[n]=r[n];return e}},
/*!**********************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/utils.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! cids */4),{Buffer:i}=r(/*! buffer */0),{cidToString:s}=r(/*! ../../../utils/cid */122),o=r(/*! async-iterator-to-pull-stream */69),a=e=>{const t={},r=e.split("-");switch(r.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=c(r[1],"avg");break;case 4:t.minChunkSize=c(r[1],"min"),t.avgChunkSize=c(r[2],"avg"),t.maxChunkSize=c(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},c=(e,t)=>{const r=parseInt(e);if(isNaN(r))throw new Error(`Chunker parameter ${t} must be an integer`);return r};e.exports={normalizePath:e=>i.isBuffer(e)?new n(e).toString():n.isCID(e)?e.toString():(0===e.indexOf("/ipfs/")&&(e=e.substring("/ipfs/".length)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e),parseChunkSize:c,parseRabinString:a,parseChunkerString:e=>{if(e){if(e.startsWith("size-")){const t=e.split("-")[1],r=parseInt(t);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",chunkerOptions:{maxChunkSize:r}}}if(e.startsWith("rabin"))return{chunker:"rabin",chunkerOptions:a(e)};throw new Error(`Unrecognized chunker option: ${e}`)}return{chunker:"fixed"}},mapFile:e=>(e=e||{},t=>{let r=0,n="dir";t.unixfs&&"file"===t.unixfs.type&&(r=t.unixfs.fileSize(),n="file");const i={hash:s(t.cid,{base:e.cidBase}),path:t.path,name:t.name,depth:t.path.split("/").length,size:r,type:n};return e.includeContent&&t.unixfs&&"file"===t.unixfs.type&&(i.content=o.source(t.content())),i})}},
/*!*******************************************************!*\
  !*** ./src/components/checkout-button.ts + 3 modules ***!
  \*******************************************************/
/*! exports provided: TAG_NAME, CheckoutButton */
/*! exports used: CheckoutButton, TAG_NAME */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/lit-element/lit-element.js because of ./src/components/shop.ts */function(e,t,r){"use strict";var n=r(18),i=n.b`
  .nq-button::-moz-focus-inner,
  .nq-button-s::-moz-focus-inner {
    border: 0;
  }

  .nq-button {
    position: relative;
    height: 7.5rem;
    line-height: 2.5rem;
    background-image: var(--nimiq-blue-bg);
    color: white;
    font-size: 2rem;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.094em;
    border: none;
    padding: 0 4rem;
    border-radius: 500px;
    min-width: 25rem;
    margin: 2rem auto;
    box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.15);
    cursor: pointer;
    transition: transform 450ms var(--nimiq-ease),
      box-shadow 450ms var(--nimiq-ease);
    will-change: box-shadow;
    text-decoration: none;
    display: block;
    text-align: center;
    font-family: inherit;
  }

  a.nq-button {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .nq-button:not([disabled])::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    border-radius: 500px;
    background-image: var(--nimiq-blue-bg-darkened);
    opacity: 0;
    transition: opacity 300ms var(--nimiq-ease);
    z-index: -1;
  }

  .nq-button:hover,
  .nq-button:focus {
    box-shadow: 0 1rem 2.5rem rgba(0, 0, 0, 0.2);
    transform: translate3D(0, -2px, 0);
  }

  .nq-button:hover::before,
  .nq-button:active::before,
  .nq-button:focus::before {
    opacity: 1;
  }

  .nq-button:active {
    outline: none;
    box-shadow: 0 0.2rem 0.3rem rgba(0, 0, 0, 0.2);
    transform: translate3D(0, 1px, 0);
    transition: transform 200ms cubic-bezier(0.41, 0.34, 0.26, 1.55),
      box-shadow 200ms cubic-bezier(0.41, 0.34, 0.26, 1.55) !important;
  }

  .nq-button-s,
  .nq-button-pill {
    display: inline-block;
    font-size: 1.75rem;
    line-height: 3.375rem;
    height: 3.375rem;
    text-decoration: none;
    font-weight: bold;
    padding: 0 1.5rem;
    background-color: rgba(31, 35, 72, 0.07); /* Based on Nimiq Blue */
    color: var(--nimiq-blue);
    border-radius: 1.6875rem;
    transition: color 300ms var(--nimiq-ease),
      background-color 300ms var(--nimiq-ease);
    will-change: color, background-color;
    border: none;
    cursor: pointer;
    position: relative;
    font-family: inherit;
  }

  .nq-button-s[disabled] {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .nq-button-s::before,
  .nq-button-pill::before {
    content: '';
    display: block;
    position: absolute;
    left: -1.5rem;
    top: -1.5rem;
    right: -1.5rem;
    bottom: -1.5rem;
  }

  .nq-button-s:hover,
  .nq-button-s:active,
  .nq-button-s:focus {
    color: var(--nimiq-blue-darkened);
    background: rgba(31, 35, 72, 0.12); /* Based on Nimiq Blue */
  }

  .nq-button-s[disabled]:hover {
    background: rgba(31, 35, 72, 0.07); /* Based on Nimiq Blue */
  }

  .nq-button-pill {
    color: white;
    background: var(--nimiq-blue);
    background-image: var(--nimiq-blue-bg);
  }

  .nq-button-pill:hover,
  .nq-button-pill:active,
  .nq-button-pill:focus {
    background: var(--nimiq-blue-darkened);
    background-image: var(--nimiq-blue-bg-darkened);
  }

  /* Color variations */

  /* light blue */
  .nq-button.light-blue {
    background: var(--nimiq-light-blue);
    background-image: var(--nimiq-light-blue-bg);
  }

  .nq-button.light-blue::before {
    background-image: var(--nimiq-light-blue-bg-darkened);
  }

  .nq-button.light-blue.inverse {
    color: var(--nimiq-light-blue);
  }

  .nq-button.light-blue.inverse:hover,
  .nq-button.light-blue.inverse:active,
  .nq-button.light-blue.inverse:focus {
    color: var(--nimiq-light-blue-darkened);
  }

  .nq-button-s.light-blue {
    color: var(--nimiq-light-blue);
    background: rgba(5, 130, 202, 0.1); /* Based on Nimiq Light Blue */
  }

  .nq-button-s.light-blue:hover,
  .nq-button-s.light-blue:active,
  .nq-button-s.light-blue:focus {
    color: var(--nimiq-light-blue-darkened);
    background: rgba(5, 130, 202, 0.2); /* Based on Nimiq Light Blue */
  }

  .nq-button-s.light-blue[disabled]:hover {
    color: var(--nimiq-light-blue);
    background: rgba(5, 130, 202, 0.1); /* Based on Nimiq Light Blue */
  }

  .nq-button-pill.light-blue {
    background: var(--nimiq-light-blue);
    background-image: var(--nimiq-light-blue-bg);
  }

  .nq-button-pill.light-blue:hover,
  .nq-button-pill.light-blue:active,
  .nq-button-pill.light-blue:focus {
    background: var(--nimiq-light-blue-darkened);
    background-image: var(--nimiq-light-blue-bg-darkened);
  }

  /* green */
  .nq-button.green {
    background: var(--nimiq-green);
    background-image: var(--nimiq-green-bg);
  }

  .nq-button.green::before {
    background-image: var(--nimiq-green-bg-darkened);
  }

  .nq-button.green.inverse {
    color: var(--nimiq-green);
  }

  .nq-button.green.inverse:hover,
  .nq-button.green.inverse:active,
  .nq-button.green.inverse:focus {
    color: var(--nimiq-green-darkened);
  }

  .nq-button-s.green {
    color: var(--nimiq-green);
    background: rgba(33, 188, 165, 0.1); /* Based on Nimiq Green */
  }

  .nq-button-s.green:hover,
  .nq-button-s.green:active,
  .nq-button-s.green:focus {
    color: var(--nimiq-green-darkened);
    background: rgba(33, 188, 165, 0.2); /* Based on Nimiq Green */
  }

  .nq-button-s.green[disabled]:hover {
    color: var(--nimiq-green);
    background: rgba(33, 188, 165, 0.1); /* Based on Nimiq Green */
  }

  .nq-button-pill.green {
    background: var(--nimiq-green);
    background-image: var(--nimiq-green-bg);
  }

  .nq-button-pill.green:hover,
  .nq-button-pill.green:active,
  .nq-button-pill.green:focus {
    background: var(--nimiq-green-darkened);
    background-image: var(--nimiq-green-bg-darkened);
  }

  /* orange */
  .nq-button.orange {
    background: var(--nimiq-orange);
    background-image: var(--nimiq-orange-bg);
  }

  .nq-button.orange::before {
    background-image: var(--nimiq-orange-bg-darkened);
  }

  .nq-button.orange.inverse {
    color: var(--nimiq-orange);
  }

  .nq-button.orange.inverse:hover,
  .nq-button.orange.inverse:active,
  .nq-button.orange.inverse:focus {
    color: var(--nimiq-orange-darkened);
  }

  .nq-button-s.orange {
    color: var(--nimiq-orange);
    background: rgba(252, 135, 2, 0.1); /* Based on Nimiq Orange */
  }

  .nq-button-s.orange:hover,
  .nq-button-s.orange:active,
  .nq-button-s.orange:focus {
    color: var(--nimiq-orange-darkened);
    background: rgba(252, 135, 2, 0.2); /* Based on Nimiq Orange */
  }

  .nq-button-s.orange[disabled]:hover {
    color: var(--nimiq-orange);
    background: rgba(252, 135, 2, 0.1); /* Based on Nimiq Orange */
  }

  .nq-button-pill.orange {
    background: var(--nimiq-orange);
    background-image: var(--nimiq-orange-bg);
  }

  .nq-button-pill.orange:hover,
  .nq-button-pill.orange:active,
  .nq-button-pill.orange:focus {
    background: var(--nimiq-orange-darkened);
    background-image: var(--nimiq-orange-bg-darkened);
  }

  /* red */
  .nq-button.red {
    background: var(--nimiq-red);
    background-image: var(--nimiq-red-bg);
  }

  .nq-button.red::before {
    background: var(--nimiq-red-bg-darkened);
  }

  .nq-button.red.inverse {
    color: var(--nimiq-red);
  }

  .nq-button.red.inverse:hover,
  .nq-button.red.inverse:active,
  .nq-button.red.inverse:focus {
    color: var(--nimiq-red-darkened);
  }

  .nq-button-s.red {
    color: var(--nimiq-red);
    background: rgba(216, 65, 51, 0.1); /* Based on Nimiq Red */
  }

  .nq-button-s.red:hover,
  .nq-button-s.red:active,
  .nq-button-s.red:focus {
    color: var(--nimiq-red-darkened);
    background: rgba(216, 65, 51, 0.2); /* Based on Nimiq Red */
  }

  .nq-button-s.red[disabled]:hover {
    color: var(--nimiq-red);
    background: rgba(216, 65, 51, 0.1); /* Based on Nimiq Red */
  }

  .nq-button-pill.red {
    background: var(--nimiq-red);
    background-image: var(--nimiq-red-bg);
  }

  .nq-button-pill.red:hover,
  .nq-button-pill.red:active,
  .nq-button-pill.red:focus {
    background: var(--nimiq-red-darkened);
    background-image: var(--nimiq-red-bg-darkened);
  }

  /* gold */
  .nq-button.gold {
    background: var(--nimiq-gold);
    background-image: var(--nimiq-gold-bg);
  }

  .nq-button.gold:before {
    background: var(--nimiq-gold-bg-darkened);
  }

  .nq-button.gold.inverse {
    color: var(--nimiq-gold);
  }

  .nq-button.gold.inverse:hover,
  .nq-button.gold.inverse:active,
  .nq-button.gold.inverse:focus {
    color: var(--nimiq-gold-darkened);
  }

  .nq-button-pill.gold {
    background: var(--nimiq-gold);
    background-image: var(--nimiq-gold-bg);
  }

  .nq-button-pill.gold:hover,
  .nq-button-pill.gold:active,
  .nq-button-pill.gold:focus {
    background: var(--nimiq-gold-darkened);
    background-image: var(--nimiq-gold-bg-darkened);
  }

  /* Special styles */

  .nq-button.inverse {
    background: white;
    color: var(--nimiq-blue);
    transition: transform 450ms var(--nimiq-ease),
      box-shadow 450ms var(--nimiq-ease), color 300ms var(--nimiq-ease);
  }

  .nq-button.inverse::before {
    background: #eff0f2; /* Indigo 7% */
  }

  .nq-button-s.inverse {
    background: rgba(255, 255, 255, 0.2);
    color: white;
  }

  .nq-button-s.inverse:hover,
  .nq-button-s.inverse:focus,
  .nq-button-s.inverse:active {
    background: rgba(255, 255, 255, 0.25);
  }

  .nq-button[disabled] {
    background: rgba(31, 35, 72, 0.07);
    color: rgba(31, 35, 72, 0.3);
    box-shadow: none !important;
    transform: none;
    cursor: not-allowed;
  }

  .nq-button[disabled]:hover,
  .nq-button[disabled]:active {
    transform: none;
  }

  .nq-button.inverse[disabled],
  .nq-button.inverse[disabled]:hover,
  .nq-button.inverse[disabled]:active {
    background: rgba(255, 255, 255, 0.2);
    color: rgba(255, 255, 255, 0.5);
  }

  /* Focus Ring for Tabs – can be optimized in the future with better :focus-visible support */

  .nq-button::after,
  .nq-button-s::after,
  .nq-button-pill::after {
    content: '';
    position: absolute;
    left: -5px;
    top: -5px;
    right: -5px;
    bottom: -5px;
    border: 2px solid rgba(5, 130, 202, 0.5); /* Based on Nimiq Light Blue */
    border-radius: 500px;
    opacity: 0;
  }

  .nq-button.inverse::after,
  .nq-button-s.inverse::after,
  .nq-button-pill.inverse::after {
    border-color: rgba(255, 255, 255, 0.4);
  }

  .nq-button:focus,
  .nq-button-s:focus,
  .nq-button-pill:focus {
    outline: none;
  }

  .nq-button:focus::after,
  .nq-button-s:focus::after,
  .nq-button-pill:focus::after {
    opacity: 1;
  }
`,s=n.b`
  html {
    font-size: 8px;
    --nimiq-size: 8px;

    font-family: 'Muli', system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    font-size: 2.25rem; /* 18px */
  }

  .nq-h1,
  .nq-style h1 {
    font-size: 3rem;
    line-height: 1.2;
    font-weight: bold;
    margin: 3rem 0;
  }

  .nq-h2,
  .nq-style h2 {
    font-size: 2.5rem;
    line-height: 1.2;
    font-weight: bold;
    margin: 2.5rem 0;
  }

  .nq-h3,
  .nq-style h3 {
    font-size: 2rem;
    line-height: 1.2;
    font-weight: bold;
    margin: 2rem 0;
  }

  .nq-text,
  .nq-style p {
    font-size: 2rem;
    line-height: 1.3125;
    color: rgba(31, 35, 72, 0.7); /* Based on Nimiq Blue */
    margin: 2rem 0;
  }

  .nq-text-s {
    font-size: 1.75rem;
    line-height: 1.2;
    font-weight: 600;
    margin: 1rem 0;
  }

  .nq-label {
    font-size: 1.75rem;
    line-height: 0.857;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.107em;
    margin: 1rem 0;
    color: rgba(31, 35, 72, 0.7); /* Based on Nimiq Blue */
  }

  .nq-notice {
    font-weight: 600;
    font-size: 2rem;
  }

  .nq-notice.info {
    color: var(--nimiq-light-blue);
  }

  .nq-notice.success {
    color: var(--nimiq-green);
  }

  .nq-notice.warning {
    color: var(--nimiq-orange);
  }

  .nq-notice.error {
    color: var(--nimiq-red);
  }

  .nq-link,
  .nq-text a,
  .nq-style a {
    color: var(--nimiq-light-blue);
    text-decoration: none;
  }

  .nq-link:active,
  .nq-link:hover {
    text-decoration: underline;
  }

  .nq-list,
  .nq-style ul,
  .nq-style ol {
    font-size: 2rem;
    margin: 2rem 0;
  }

  .nq-list li,
  .nq-style li {
    margin: 0.5rem 0;
  }
`,o=n.b`
  html {
    /* Nimiq color palette */
    --nimiq-blue: #1f2348; /* rgb(31, 35, 72) */
    --nimiq-light-blue: #0582ca; /* rgb(5, 130, 202) */
    --nimiq-gold: #e9b213; /* rgb(233, 178, 19) */
    --nimiq-green: #21bca5; /* rgb(33, 188, 165) */
    --nimiq-orange: #fc8702; /* rgb(252, 135, 2) */
    --nimiq-red: #d94432; /* rgb(216, 65, 51) */
    --nimiq-purple: #5f4b8b; /* rgb(95, 75, 139) */
    --nimiq-pink: #fa7268; /* rgb(250, 114, 104) */
    --nimiq-light-green: #88b04b; /* rgb(136, 176, 75) */
    --nimiq-brown: #795548; /* rgb(121, 85, 72) */
    --nimiq-gray: #f4f4f4;
    --nimiq-light-gray: #fafafa;

    /* Nimiq color palette adaptions on dark background */
    --nimiq-light-blue-on-dark: #0ca6fe; /* rgb(12, 166, 254) */
    --nimiq-red-on-dark: #ff5c48; /* rgb(255, 92, 72) */

    /* Nimiq main colors darkened (hover states) */
    --nimiq-blue-darkened: #151833; /* rgb(21, 24, 51) */
    --nimiq-light-blue-darkened: #0071c3; /* rgb(0, 113, 195) */
    --nimiq-gold-darkened: #e5a212; /* rgb(229, 162, 18) */
    --nimiq-green-darkened: #20b29e; /* rgb(32, 178, 158) */
    --nimiq-orange-darkened: #fc7500; /* rgb(252, 117, 0) */
    --nimiq-red-darkened: #d13030; /* rgb(209, 48, 48) */
    /* Background gradients */
    --nimiq-blue-bg: radial-gradient(
      ellipse at bottom right,
      #260133,
      var(--nimiq-blue)
    );
    --nimiq-light-blue-bg: radial-gradient(
      ellipse at bottom right,
      #265dd7,
      var(--nimiq-light-blue)
    );
    --nimiq-gold-bg: radial-gradient(
      ellipse at bottom right,
      #ec991c,
      var(--nimiq-gold)
    );
    --nimiq-green-bg: radial-gradient(
      ellipse at bottom right,
      #41a38e,
      var(--nimiq-green)
    );
    --nimiq-orange-bg: radial-gradient(
      ellipse at bottom right,
      #fd6216,
      var(--nimiq-orange)
    );
    --nimiq-red-bg: radial-gradient(
      ellipse at bottom right,
      #cc3047,
      var(--nimiq-red)
    );
    --nimiq-purple-bg: radial-gradient(
      ellipse at bottom right,
      #4d4c96,
      var(--nimiq-purple)
    );
    --nimiq-pink-bg: radial-gradient(
      ellipse at bottom right,
      #e0516b,
      var(--nimiq-pink)
    );
    --nimiq-light-green-bg: radial-gradient(
      ellipse at bottom right,
      #70b069,
      var(--nimiq-light-green)
    );
    --nimiq-brown-bg: radial-gradient(
      ellipse at bottom right,
      #724147,
      var(--nimiq-brown)
    );

    /* Background gradients darkened (hover states) */
    --nimiq-blue-bg-darkened: radial-gradient(
      ellipse at bottom right,
      #180021,
      var(--nimiq-blue-darkened)
    );
    --nimiq-light-blue-bg-darkened: radial-gradient(
      ellipse at bottom right,
      #2355c4,
      var(--nimiq-light-blue-darkened)
    );
    --nimiq-gold-bg-darkened: radial-gradient(
      ellipse at bottom right,
      #e58a1b,
      var(--nimiq-gold-darkened)
    );
    --nimiq-green-bg-darkened: radial-gradient(
      ellipse at bottom right,
      #3d9988,
      var(--nimiq-green-darkened)
    );
    --nimiq-orange-bg-darkened: radial-gradient(
      ellipse at bottom right,
      #ea5200,
      var(--nimiq-orange-darkened)
    );
    --nimiq-red-bg-darkened: radial-gradient(
      ellipse at bottom right,
      #bf2d46,
      var(--nimiq-red-darkened)
    );

    /* Special colors */
    --nimiq-highlight-bg: rgba(31, 35, 72, 0.06); /* Based on Nimiq Blue */
    --nimiq-card-bg: white;
  }

  body {
    color: var(--nimiq-blue);
    background: var(--nimiq-gray);
    margin: 0;
  }

  .nq-blue {
    color: var(--nimiq-blue) !important;
  }

  .nq-light-blue {
    color: var(--nimiq-light-blue) !important;
  }

  .nq-gold {
    color: var(--nimiq-gold) !important;
  }

  .nq-green {
    color: var(--nimiq-green) !important;
  }

  .nq-orange {
    color: var(--nimiq-orange) !important;
  }

  .nq-red {
    color: var(--nimiq-red) !important;
  }

  .nq-purple {
    color: var(--nimiq-purple) !important;
  }

  .nq-pink {
    color: var(--nimiq-pink) !important;
  }

  .nq-light-green {
    color: var(--nimiq-light-green) !important;
  }

  .nq-brown {
    color: var(--nimiq-brown) !important;
  }

  .nq-blue-bg {
    background: var(--nimiq-blue);
    background-image: var(--nimiq-blue-bg);
  }

  .nq-light-blue-bg {
    background: var(--nimiq-light-blue);
    background-image: var(--nimiq-light-blue-bg);
  }

  .nq-gold-bg {
    background: var(--nimiq-gold);
    background-image: var(--nimiq-gold-bg);
  }

  .nq-green-bg {
    background: var(--nimiq-green);
    background-image: var(--nimiq-green-bg);
  }

  .nq-orange-bg {
    background: var(--nimiq-orange);
    background-image: var(--nimiq-orange-bg);
  }

  .nq-red-bg {
    background: var(--nimiq-red);
    background-image: var(--nimiq-red-bg);
  }

  .nq-purple-bg {
    background: var(--nimiq-purple);
    background-image: var(--nimiq-purple-bg);
  }

  .nq-pink-bg {
    background: var(--nimiq-pink);
    background-image: var(--nimiq-pink-bg);
  }

  .nq-light-green-bg {
    background: var(--nimiq-light-green);
    background-image: var(--nimiq-light-green-bg);
  }

  .nq-brown-bg {
    background: var(--nimiq-brown);
    background-image: var(--nimiq-brown-bg);
  }

  .nq-gray-bg {
    background: var(--nimiq-gray);
  }
`;r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return u}));var a=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};const c="nimiq-shop-checkout-button";let u=class extends n.a{constructor(){super(...arguments),this.label="",this.name="",this.price=0,this.inverse=!1,this.small=!1,this.pill=!1,this.disable=!1,this.buttonColor=""}static get styles(){return[o,i,s]}get hasLabel(){return this.label.trim().length>0}get buttonInverseClass(){return this.inverse?"inverse":""}get buttonClass(){return this.small?"nq-button-s":this.pill?"nq-button-pill":"nq-button"}get buttonColorClass(){return["light-blue","green","orange","red","gold"].includes(this.buttonColor)?this.buttonColor:""}get classNames(){return[this.buttonClass,this.buttonColorClass,this.buttonInverseClass].join(" ")}clickHandler(){const e=new CustomEvent("checkout",{detail:{product:this.name,price:this.price}});this.dispatchEvent(e)}render(){return n.d`
      <button
        class="${this.classNames}"
        ?disabled="${this.disable}"
        class="nq-button"
        @click="${this.clickHandler}"
      >
        ${this.hasLabel?this.label:this.name}
      </button>
    `}};a([Object(n.e)({type:String})],u.prototype,"label",void 0),a([Object(n.e)({type:String})],u.prototype,"name",void 0),a([Object(n.e)({type:Number})],u.prototype,"price",void 0),a([Object(n.e)({type:Boolean})],u.prototype,"inverse",void 0),a([Object(n.e)({type:Boolean})],u.prototype,"small",void 0),a([Object(n.e)({type:Boolean})],u.prototype,"pill",void 0),a([Object(n.e)({type:Boolean})],u.prototype,"disable",void 0),a([Object(n.e)({type:String})],u.prototype,"buttonColor",void 0),u=a([Object(n.c)(c)],u)},
/*!*************************************************!*\
  !*** ./node_modules/@nimiq/core-web/web.esm.js ***!
  \*************************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module uses injected variables (Buffer, __dirname, global) */function(e,t,r){"use strict";(function(e,n,i){if(void 0===s)var s={};!function(t){t=void 0!==t?t:{};class r{static register(e){void 0!==t&&(t[e.name]=e)}}r.register(r);class n{constructor(){this._global_level=A.TRACE,this._tag_levels={};try{if(window.localStorage)try{let e=window.localStorage.getItem("log_tag_levels");e&&"string"==typeof e&&(e=JSON.parse(e)),e&&"object"==typeof e&&(this._tag_levels=e)}catch(e){console.warn("Failed to load log configuration from local storage.")}}catch(e){}}isLoggable(e,t){return e&&this._tag_levels[e]?this._tag_levels[e]<=t:this._tag_levels["*"]?this._tag_levels["*"]<=t:this._global_level<=t}setLoggable(e,t){e&&e.name&&(e=e.name),this._tag_levels[e]=t,window.localStorage&&window.localStorage.setItem("log_tag_levels",JSON.stringify(this._tag_levels))}msg(e,t,r){t&&t.name&&(t=t.name),this.isLoggable(t,e)&&(t&&r.unshift(t+":"),r.unshift(`[${A.Level.toStringTag(e)} ${(new Date).toTimeString().substr(0,8)}]`),console.error&&e>=A.ERROR?console.error.apply(console,r):console.warn&&e>=A.WARNING?console.warn.apply(console,r):console.info&&e>=A.INFO?console.info.apply(console,r):console.debug&&e>=A.DEBUG?console.debug.apply(console,r):console.trace&&e<=A.TRACE?console.trace.apply(console,r):console.log.apply(console,r))}}r.register(n);class i{static convertKeyRange(e){return e instanceof I?e.exactMatch?IDBKeyRange.only(e.lower):void 0!==e.lower&&void 0===e.upper?IDBKeyRange.lowerBound(e.lower,e.lowerOpen):void 0!==e.upper&&void 0===e.lower?IDBKeyRange.upperBound(e.upper,e.upperOpen):IDBKeyRange.bound(e.lower,e.upper,e.lowerOpen,e.upperOpen):e}}r.register(i);class s{constructor(e,t,r=null){this._db=e,this._tableName=t,this._indices=new Map,this._indicesToCreate=new Map,this._indicesToDelete=[],this._codec=r}get connected(){return this._db.connected}get _backend(){if(!this.connected)throw new Error("Requires a connected database");return this._db.backend}get indices(){return this._indices}init(e,t,r){for(const{indexName:n,upgradeCondition:i}of this._indicesToDelete)e.indexNames.contains(n)&&(null===i||!0===i||"function"==typeof i&&i(t,r))&&e.deleteIndex(n);this._indicesToDelete=[];for(const[n,{index:i,upgradeCondition:s}]of this._indicesToCreate)if(!e.indexNames.contains(n)&&(null===s||!0===s||"function"==typeof s&&s(t,r))){const t=Array.isArray(i.keyPath)?i.keyPath.join("."):i.keyPath;e.createIndex(n,t,{unique:i.unique,multiEntry:i.multiEntry})}this._indicesToCreate.clear()}decode(e,t){return void 0===e?void 0:null!==this._codec&&void 0!==this._codec?this._codec.decode(e,t):e}encode(e){return void 0===e?void 0:null!==this._codec&&void 0!==this._codec?this._codec.encode(e):e}async get(e,t={}){const r=this._backend;return new Promise((n,i)=>{const s=r.transaction([this._tableName]).objectStore(this._tableName).get(e);s.onsuccess=r=>{try{n(t&&t.raw?r.target.result:this.decode(r.target.result,e))}catch(e){i(e)}},s.onerror=i})}async values(e=null,t=null){if(null!==e&&e instanceof N)return e.values(this,t);e=i.convertKeyRange(e);const r=this._backend;return new Promise((n,i)=>{const s=[],o=r.transaction([this._tableName],"readonly").objectStore(this._tableName).openCursor(e);o.onsuccess=e=>{const r=e.target.result;if(r){if(null!==t&&s.length>=t)return void n(s);try{s.push(this.decode(r.value,r.primaryKey))}catch(e){i(e)}r.continue()}else n(s)},o.onerror=()=>i(o.error)})}async keys(e=null,t=null){if(null!==e&&e instanceof N)return e.keys(this,t);e=i.convertKeyRange(e);const r=this._backend;return new Promise((n,i)=>{const s=new Set,o=r.transaction([this._tableName],"readonly").objectStore(this._tableName),a=o.openKeyCursor?o.openKeyCursor(e):o.openCursor(e);a.onsuccess=e=>{const r=e.target.result;if(r){if(null!==t&&s.size>=t)return void n(s);s.add(r.primaryKey),r.continue()}else n(s)},a.onerror=()=>i(a.error)})}keyStream(e,t=!0,r=null){r=i.convertKeyRange(r);const n=this._backend;return new Promise((i,s)=>{const o=n.transaction([this._tableName],"readonly").objectStore(this._tableName),a=o.openKeyCursor?o.openKeyCursor(r,t?"next":"prev"):o.openCursor(r,t?"next":"prev");a.onsuccess=t=>{const r=t.target.result;if(r)try{e(r.primaryKey)?r.continue():i()}catch(e){s(e)}else i()},a.onerror=()=>s(a.error)})}valueStream(e,t=!0,r=null){r=i.convertKeyRange(r);const n=this._backend;return new Promise((i,s)=>{const o=n.transaction([this._tableName],"readonly").objectStore(this._tableName).openCursor(r,t?"next":"prev");o.onsuccess=t=>{const r=t.target.result;if(r)try{e(this.decode(r.value,r.primaryKey),r.primaryKey)?r.continue():i()}catch(e){s(e)}else i()},o.onerror=()=>s(o.error)})}async maxValue(e=null){e=i.convertKeyRange(e);const t=this._backend;return new Promise((r,n)=>{const i=t.transaction([this._tableName],"readonly").objectStore(this._tableName).openCursor(e,"prev");i.onsuccess=e=>{try{const t=e.target.result;r(t?this.decode(t.value,t.primaryKey):void 0)}catch(e){n(e)}},i.onerror=()=>n(i.error)})}async maxKey(e=null){e=i.convertKeyRange(e);const t=this._backend;return new Promise((r,n)=>{const i=t.transaction([this._tableName],"readonly").objectStore(this._tableName),s=i.openKeyCursor?i.openKeyCursor(e,"prev"):i.openCursor(e,"prev");s.onsuccess=()=>r(s.result?s.result.primaryKey:void 0),s.onerror=()=>n(s.error)})}async minValue(e=null){e=i.convertKeyRange(e);const t=this._backend;return new Promise((r,n)=>{const i=t.transaction([this._tableName],"readonly").objectStore(this._tableName).openCursor(e,"next");i.onsuccess=e=>{try{const t=e.target.result;r(t?this.decode(t.value,t.primaryKey):void 0)}catch(e){n(e)}},i.onerror=()=>n(i.error)})}async minKey(e=null){e=i.convertKeyRange(e);const t=this._backend;return new Promise((r,n)=>{const i=t.transaction([this._tableName],"readonly").objectStore(this._tableName),s=i.openKeyCursor?i.openKeyCursor(e,"next"):i.openCursor(e,"next");s.onsuccess=()=>r(s.result?s.result.primaryKey:void 0),s.onerror=()=>n(s.error)})}async count(e=null){e=i.convertKeyRange(e);const t=this._backend;return new Promise((r,n)=>{let i;(i=e?t.transaction([this._tableName],"readonly").objectStore(this._tableName).count(e):t.transaction([this._tableName],"readonly").objectStore(this._tableName).count()).onsuccess=()=>r(i.result),i.onerror=()=>n(i.error)})}index(e){return this._indices.get(e)}get backend(){return this._db.backend}get tableName(){return this._tableName}async _apply(e){const t=this._backend;return new Promise((r,n)=>{const i=t.transaction([this._tableName],"readwrite"),s=i.objectStore(this._tableName);e._truncated&&s.clear();for(const t of e._removed)s.delete(t);for(const[t,r]of e._modified)s.put(this.encode(r),t);i.oncomplete=()=>r(!0),i.onerror=n,i.onabort=n})}async truncate(){const e=this._backend;return new Promise((t,r)=>{const n=e.transaction([this._tableName],"readonly").objectStore(this._tableName).clear();n.onsuccess=t,n.onerror=()=>r(n.error)})}createIndex(e,t,r={}){let{multiEntry:n=!1,upgradeCondition:i=null,unique:s=!1}=r||{};if(this._db.connected)throw new Error("Cannot create index while connected");const o=new a(this,e,t=t||e,n,s);this._indices.set(e,o),this._indicesToCreate.set(e,{index:o,upgradeCondition:i})}deleteIndex(e,t={}){let{upgradeCondition:r=null}=t||{};if(this._db.connected)throw new Error("Cannot delete index while connected");this._indicesToDelete.push({indexName:e,upgradeCondition:r})}close(){return this._db.close()}async applyCombined(e){const t=new v(this._tableName);e._truncated&&t.truncate();for(const r of e._removed)t.remove(r);for(const[r,n]of e._modified)t.put(r,this.encode(n));return t}isSynchronous(){return!1}}r.register(s);class o{constructor(e,t,r={}){if(t<=0)throw new Error("The version provided must not be less or equal to 0");this._databaseDir=e,this._dbVersion=t,this._oldDbVersion=null,this._onUpgradeNeeded=r.onUpgradeNeeded,this._connected=!1,this._objectStores=new Map,this._objectStoreBackends=new Map,this._objectStoresToDelete=[]}get _indexedDB(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB}connect(){if(this._db)return Promise.resolve(this._db);const e=this._indexedDB.open(this._databaseDir,this._dbVersion),t=this;return new Promise((r,n)=>{e.onsuccess=async()=>{t._connected=!0,t._db=e.result,null!==t._oldDbVersion&&t._onUpgradeNeeded&&await t._onUpgradeNeeded(t._oldDbVersion,t._dbVersion,t),r(e.result)},e.onerror=n,e.onupgradeneeded=r=>t._initDB(r,e)})}async _initDB(e,t){const r=e.target.result;for(const{tableName:t,upgradeCondition:n}of this._objectStoresToDelete)r.objectStoreNames.contains(t)&&(null===n||!0===n||"function"==typeof n&&n(e.oldVersion,e.newVersion))&&r.deleteObjectStore(t);this._objectStoresToDelete=[];for(const[n,{backend:i,upgradeCondition:s}]of this._objectStoreBackends){let o;o=!r.objectStoreNames.contains(n)&&(null===s||!0===s||"function"==typeof s&&s(e.oldVersion,e.newVersion))?r.createObjectStore(n):t.transaction.objectStore(n),i.init(o,e.oldVersion,e.newVersion)}this._oldDbVersion=e.oldVersion,this._objectStoreBackends.clear()}get backend(){return this._db}get connected(){return this._connected}getObjectStore(e){return this._objectStores.get(e)}static createVolatileObjectStore(e={}){const{codec:t=null}=e||{};return new T(new k("",t),null)}createObjectStore(e,t={}){const{codec:r=null,persistent:n=!0,upgradeCondition:i=null,enableLruCache:o=!0,lruCacheSize:a=S.MAX_CACHE_SIZE,rawLruCacheSize:c=0}=t||{};if(this._connected)throw new Error("Cannot create ObjectStore while connected");if(this._objectStores.has(e))return this._objectStores.get(e);let u=null,h=u=n?new s(this,e,r):new k(e,r);n&&o&&(h=new S(u,a,c));const l=new T(h,this,e);return this._objectStores.set(e,l),this._objectStoreBackends.set(e,{backend:u,upgradeCondition:i}),l}deleteObjectStore(e,t={}){let{upgradeCondition:r=null}=t||{};if(this._connected)throw new Error("Cannot delete ObjectStore while connected");this._objectStoresToDelete.push({tableName:e,upgradeCondition:r})}async close(){this._connected&&(this._connected=!1,this.backend.close())}async destroy(){return await this.close(),new Promise((e,t)=>{const r=this._indexedDB.deleteDatabase(this._databaseDir);r.onsuccess=e,r.onerror=t})}static async commitCombined(e,t,...r){if(e instanceof D){const t=[],r=[],n=[],i=await Promise.all(e.transactions.map(e=>e.objectStore._backend.applyCombined(e)));for(const e of i){let i=e;Array.isArray(e)||(i=[e]);for(const e of i)"function"==typeof e?t.push(e):(r.push(e),n.push(e.tableName))}const s=null!==e.backend?e.backend.backend:null;return new Promise((e,i)=>{if(n.length>0){const o=s.transaction(n,"readwrite");for(const e of r){const t=o.objectStore(e.tableName);e.truncated&&t.clear();for(const r of e.removed)t.delete(r);for(const[r,n]of e.modified)t.put(n,r)}o.oncomplete=()=>{Promise.all(t.map(e=>e())).then(()=>{e(!0)})},o.onerror=i,o.onabort=i}else Promise.all(t.map(e=>e())).then(()=>{e(!0)})})}if(r.push(e),r.push(t),!r.every(e=>e instanceof O))throw new Error("Invalid arguments supplied");return new D(...r).commit()}toString(){return`JungleDB{name=${this._databaseDir}}`}}o.JSON_ENCODING={},o.BINARY_ENCODING={},o.STRING_ENCODING={},o.NUMBER_ENCODING={},o.GENERIC_ENCODING={},r.register(o);class a{constructor(e,t,r,n=!1,i=!1){this._objectStore=e,this._indexName=t,this._keyPath=r,this._multiEntry=n,this._unique=i}async truncate(){}get keyPath(){return this._keyPath}get multiEntry(){return this._multiEntry}get unique(){return this._unique}_index(e){return e.transaction([this._objectStore.tableName],"readonly").objectStore(this._objectStore.tableName).index(this._indexName)}async values(e=null,t=null){e=i.convertKeyRange(e);const r=await this._objectStore.backend;return new Promise((n,i)=>{const s=[],o=this._index(r).openCursor(e);o.onsuccess=e=>{const r=e.target.result;if(r){if(null!==t&&s.length>=t)return void n(s);try{s.push(this._objectStore.decode(r.value,r.primaryKey))}catch(e){i(e)}r.continue()}else n(s)},o.onerror=()=>i(o.error)})}async keys(e=null,t=null){e=i.convertKeyRange(e);const r=await this._objectStore.backend;return new Promise((n,i)=>{const s=new Set,o=this._index(r),a=o.openKeyCursor?o.openKeyCursor(e):o.openCursor(e);a.onsuccess=e=>{const r=e.target.result;if(r){if(null!==t&&s.size>=t)return void n(s);s.add(r.primaryKey),r.continue()}else n(s)},a.onerror=()=>i(a.error)})}async maxValues(e=null){e=i.convertKeyRange(e);const t=await this._objectStore.backend;return new Promise((r,n)=>{const i=[];let s=null;const o=this._index(t).openCursor(e,"prev");o.onsuccess=e=>{const t=e.target.result;if(t&&null===s&&(s=t.key),t&&d.equals(s,t.key)){try{i.push(this._objectStore.decode(t.value,t.primaryKey))}catch(e){n(e)}t.continue()}else r(i)},o.onerror=()=>n(o.error)})}async maxKeys(e=null){e=i.convertKeyRange(e);const t=await this._objectStore.backend;return new Promise((r,n)=>{const i=new Set;let s=null;const o=this._index(t),a=o.openKeyCursor?o.openKeyCursor(e,"prev"):o.openCursor(e,"prev");a.onsuccess=e=>{const t=e.target.result;t&&null===s&&(s=t.key),t&&d.equals(s,t.key)?(i.add(t.primaryKey),t.continue()):r(i)},a.onerror=()=>n(a.error)})}async minValues(e=null){e=i.convertKeyRange(e);const t=await this._objectStore.backend;return new Promise((r,n)=>{const i=[];let s=null;const o=this._index(t).openCursor(e,"next");o.onsuccess=e=>{const t=e.target.result;if(t&&null===s&&(s=t.key),t&&d.equals(s,t.key)){try{i.push(this._objectStore.decode(t.value,t.primaryKey))}catch(e){n(e)}t.continue()}else r(i)},o.onerror=()=>n(o.error)})}async minKeys(e=null){e=i.convertKeyRange(e);const t=await this._objectStore.backend;return new Promise((r,n)=>{const i=new Set;let s=null;const o=this._index(t),a=o.openKeyCursor?o.openKeyCursor(e,"next"):o.openCursor(e,"next");a.onsuccess=e=>{const t=e.target.result;t&&null===s&&(s=t.key),t&&d.equals(s,t.key)?(i.add(t.primaryKey),t.continue()):r(i)},a.onerror=()=>n(a.error)})}async keyStream(e,t=!0,r=null){r=i.convertKeyRange(r);const n=await this._objectStore.backend;return new Promise((i,s)=>{const o=this._index(n),a=o.openKeyCursor?o.openKeyCursor(r,t?"next":"prev"):o.openCursor(r,t?"next":"prev");a.onsuccess=t=>{const r=t.target.result;if(r)try{e(r.primaryKey)?r.continue():i()}catch(e){s(e)}else i()},a.onerror=()=>s(a.error)})}async valueStream(e,t=!0,r=null){r=i.convertKeyRange(r);const n=await this._objectStore.backend;return new Promise((i,s)=>{const o=this._index(n).openCursor(r,t?"next":"prev");o.onsuccess=t=>{const r=t.target.result;if(r)try{e(this._objectStore.decode(r.value,r.primaryKey),r.primaryKey)?r.continue():i()}catch(e){s(e)}else i()},o.onerror=()=>s(o.error)})}async count(e=null){e=i.convertKeyRange(e);const t=await this._objectStore.backend;return new Promise((r,n)=>{let i;(i=e?this._index(t).count(e):this._index(t).count()).onsuccess=()=>r(i.result),i.onerror=()=>n(i.error)})}}r.register(a),Object.defineProperty(Array.prototype,"iterator",{value:function(e=!0){let t=e?0:this.length-1;return{next:()=>t>=0&&t<this.length?this[e?t++:t--]:void 0,hasNext:()=>t>=0&&t<this.length,peek:()=>t>=0&&t<this.length?this[t]:void 0}}});class c{constructor(e=[]){this._keys=e}get keys(){return this._keys}}r.register(c);class u extends c{constructor(e=[],t=[]){if(e.length!==t.length)throw new Error("Keys and records must have the same length");super(e),this._records=t,this.prevLeaf=null,this.nextLeaf=null}get records(){return this._records}isLeaf(){return!0}getItem(e,t){const r=this._keys;if(t===l.NEAR_MODE.GE){for(let t=0,n=r.length;t<n;++t)if(d.compare(e,r[t])<=0)return t}else if(t===l.NEAR_MODE.LE){for(let t=r.length-1;t>=0;--t)if(d.compare(e,r[t])>=0)return t}else for(let t=0,n=r.length;t<n;++t)if(d.equals(e,r[t]))return t;return-1}addKey(e,t){let r=this._keys.length;for(let t=0,n=r;t<n;++t){if(d.equals(e,this._keys[t]))return-1;if(d.compare(e,this._keys[t])<=0){r=t;break}}return this._keys.splice(r,0,e),this._records.splice(r,0,t),r}split(){const e=Math.floor(this._keys.length/2),t=[],r=[];for(let n=0;n<e;++n)t.unshift(this._keys.pop()),r.unshift(this._records.pop());const n=new u(t,r);return n.prevLeaf=this,n.nextLeaf=this.nextLeaf,null!==this.nextLeaf&&(this.nextLeaf.prevLeaf=n),this.nextLeaf=n,n}merge(e,t,r){for(let t=0,r=e.keys.length;t<r;++t)this._keys.push(e.keys[t]),this._records.push(e.records[t]);this.nextLeaf=e.nextLeaf,null!==e.nextLeaf&&(e.nextLeaf.prevLeaf=this),e.prevLeaf=null,e.nextLeaf=null;let n=t.keys.length-1;for(let e=n;e>=0;--e)if(d.equals(t.keys[e],r)){n=e;break}t.keys.splice(n,1),t.nodePointers.splice(n+1,1)}}r.register(u);class h extends c{constructor(e=[],t=[]){super(e),this._nodePointers=t}isLeaf(){return!1}get nodePointers(){return this._nodePointers}getItem(e){const t=this._keys.length;for(let r=0;r<t;++r)if(e<this._keys[r])return r;return this._keys.length}addKey(e,t,r){const n=this._keys.length;let i=n;for(let t=0;t<n;++t)if(d.compare(e,this._keys[t])<=0){i=t;break}this._keys.splice(i,0,e),this._nodePointers.splice(i,0,t),this._nodePointers[i+1]=r}split(){const e=Math.ceil(this._keys.length/2)-1,t=[this._nodePointers.pop()],r=[];for(let n=e-1;n>=0;--n)r.unshift(this._keys.pop()),t.unshift(this._nodePointers.pop());return new h(r,t)}merge(e,t,r){const n=t.keys[r];this._keys.push(n);for(let t=0,r=e.keys.length;t<r;++t)this._keys.push(e.keys[t]),this._nodePointers.push(e.nodePointers[t]);return this._nodePointers.push(e.nodePointers[e.nodePointers.length-1]),t.keys.splice(r,1),t.nodePointers.splice(r+1,1),n}}r.register(h);class l{constructor(e=7){this._root=new u,this._maxkey=e-1,this._minkyl=Math.floor(e/2),this._minkyn=Math.floor(this._maxkey/2),this._leaf=null,this._item=-1,this._key=null,this._record=null,this._length=0,this._eof=!0,this._found=!1}get length(){return this._length}get currentKey(){return this._key}get currentRecord(){return this._record}insert(e,t){const r=[];for(this._leaf=this._root;!this._leaf.isLeaf();)r.push(this._leaf),this._item=this._leaf.getItem(e),this._leaf=this._leaf.nodePointers[this._item];if(this._item=this._leaf.addKey(e,t),this._key=e,this._eof=!1,-1===this._item)this._found=!0,this._item=this._leaf.getItem(e,!1),this._record=this._leaf.records[this._item];else if(this._found=!1,this._record=t,this._length++,this._leaf.keys.length>this._maxkey){let t=this._leaf,n=this._leaf.split(),i=n.keys[0];for(this._item=this._leaf.getItem(e,!1),-1===this._item&&(this._leaf=this._leaf.nextLeaf,this._item=this._leaf.getItem(e,!1));;){if(0===r.length){const e=new h;e.keys[0]=i,e.nodePointers[0]=t,e.nodePointers[1]=n,this._root=e;break}const e=r.pop();if(e.addKey(i,t,n),e.keys.length<=this._maxkey)break;t=e,n=e.split(),i=e.keys.pop()}}return!this._found}remove(e){if(void 0===e){if(-1===this._item)return this._eof=!0,this._found=!1,!1;e=this._leaf.keys[this._item]}return this._del(e),this._found?(this.seek(e,l.NEAR_MODE.GE),this._found=!0):(this._item=-1,this._eof=!0,this._key=null,this._record=null),this._found}seek(e,t=l.NEAR_MODE.NONE){for(this._leaf=this._root;!this._leaf.isLeaf();)this._item=this._leaf.getItem(e),this._leaf=this._leaf.nodePointers[this._item];return this._item=this._leaf.getItem(e,t),t===l.NEAR_MODE.GE&&-1===this._item&&null!==this._leaf.nextLeaf&&(this._leaf=this._leaf.nextLeaf,this._item=0),t===l.NEAR_MODE.LE&&-1===this._item&&null!==this._leaf.prevLeaf&&(this._leaf=this._leaf.prevLeaf,this._item=this._leaf.records.length-1),-1===this._item?(this._eof=!0,this._key=null,this._found=!1,this._record=null):(this._eof=!1,this._found=this._leaf.keys[this._item]===e,this._key=this._leaf.keys[this._item],this._record=this._leaf.records[this._item]),!this._eof}skip(e=1){if("number"!=typeof e&&(e=1),-1!==this._item&&null!==this._leaf||(this._eof=!0),e>0){for(;!this._eof&&this._leaf.keys.length-this._item-1<e;)e=e-this._leaf.keys.length+this._item,this._leaf=this._leaf.nextLeaf,null===this._leaf?this._eof=!0:this._item=0;this._eof||(this._item=this._item+e)}else{for(e=-e;!this._eof&&this._item<e;)e=e-this._item-1,this._leaf=this._leaf.prevLeaf,null===this._leaf?this._eof=!0:this._item=this._leaf.keys.length-1;this._eof||(this._item=this._item-e)}return this._eof?(this._item=-1,this._found=!1,this._key=null,this._record=null):(this._found=!0,this._key=this._leaf.keys[this._item],this._record=this._leaf.records[this._item]),this._found}goto(e){return e<0?(this.goBottom(),this._eof||this.skip(e+1)):(this.goTop(),this._eof||this.skip(e-1)),this._found}keynum(){if(null===this._leaf||-1===this._item)return-1;let e=this._item+1,t=this._leaf;for(;null!==t.prevLeaf;)e+=(t=t.prevLeaf).keys.length;return e}goTop(){for(this._leaf=this._root;!this._leaf.isLeaf();)this._leaf=this._leaf.nodePointers[0];return 0===this._leaf.keys.length?(this._item=-1,this._eof=!0,this._found=!1,this._key=null,this._record=null):(this._item=0,this._eof=!1,this._found=!0,this._key=this._leaf.keys[0],this._record=this._leaf.records[0]),this._found}goBottom(){for(this._leaf=this._root;!this._leaf.isLeaf();)this._leaf=this._leaf.nodePointers[this._leaf.nodePointers.length-1];return 0===this._leaf.keys.length?(this._item=-1,this._eof=!0,this._found=!1,this._key=null,this._record=null):(this._item=this._leaf.keys.length-1,this._eof=!1,this._found=!0,this._key=this._leaf.keys[this._item],this._record=this._leaf.records[this._item]),this._found}pack(){let e,t;if(this.goTop(0),this._leaf===this._root)return!1;let r=new u,n=0,i=this._leaf,s=0,o=[],a=[];for(;;){if(r.keys[n]=i.keys[s],r.records[n]=i.records[s],0===n&&a.push(r),s===i.keys.length-1){if(null===i.nextLeaf)break;i=i.nextLeaf,s=0}else s++;if(n===this._maxkey-1){const e=new u;r.nextLeaf=e,e.prevLeaf=r,r=e,n=0}else n++}let c,l,f=this._minkyl-r.keys.length;if(i=r.prevLeaf,f>0&&null!==i)for(t=f-1;t>=0;--t)r.keys.unshift(i.keys.pop()),r.records.unshift(i.records.pop());for(t=1,e=a.length;t<e;++t)o.push(a[t].keys[0]);for(o[o.length]=null;null!==o[0];){for(c=o,l=a,o=[],a=[],n=this._maxkey+1,t=0,e=c.length;t<e;t++)n>this._maxkey&&(r=new h,n=0,a.push(r)),r.keys[n]=c[t],r.nodePointers[n]=l[t],n++;if((f=this._minkyn-r.keys.length+1)>0&&a.length>1)for(i=a[a.length-2],t=f-1;t>=0;--t)r.keys.unshift(i.keys.pop()),r.nodePointers.unshift(i.nodePointers.pop());for(t=0,e=a.length;t<e;++t)o.push(a[t].keys.pop())}return this._root=a[0],this.goTop(),this._found}_del(e){const t=[];let r,n=null,i=-1;for(this._leaf=this._root;!this._leaf.isLeaf();)t.push(this._leaf),n=this._leaf,i=this._leaf.getItem(e),this._leaf=this._leaf.nodePointers[i];if(this._item=this._leaf.getItem(e,!1),-1===this._item)return void(this._found=!1);if(this._found=!0,this._leaf.keys.splice(this._item,1),this._leaf.records.splice(this._item,1),this._length--,this._leaf===this._root)return;if(this._leaf.keys.length>=this._minkyl)return void(0===this._item&&l._fixNodes(t,e,this._leaf.keys[0]));let s=0===i?null:n.nodePointers[i-1];if(null!==s&&s.keys.length>this._minkyl)return r=0===this._item?e:this._leaf.keys[0],this._leaf.keys.unshift(s.keys.pop()),this._leaf.records.unshift(s.records.pop()),void l._fixNodes(t,r,this._leaf.keys[0]);let o=i===n.keys.length?null:n.nodePointers[i+1];if(null!==o&&o.keys.length>this._minkyl)return this._leaf.keys.push(o.keys.shift()),this._leaf.records.push(o.records.shift()),0===this._item&&l._fixNodes(t,e,this._leaf.keys[0]),void l._fixNodes(t,this._leaf.keys[this._leaf.keys.length-1],o.keys[0]);if(null!==s?(r=0===this._item?e:this._leaf.keys[0],s.merge(this._leaf,n,r),this._leaf=s):(r=o.keys[0],this._leaf.merge(o,n,r),0===this._item&&l._fixNodes(t,e,this._leaf.keys[0])),1===t.length&&0===n.keys.length)return void(this._root=this._leaf);let a,c=t.pop();for(;c.keys.length<this._minkyn&&t.length>0;){if(null!==(o=(a=(n=t.pop()).getItem(r))===n.keys.length?null:n.nodePointers[a+1])&&o.keys.length>this._minkyn){c.keys.push(n.keys[a]),n.keys[a]=o.keys.shift(),c.nodePointers.push(o.nodePointers.shift());break}if(null!==(s=0===a?null:n.nodePointers[a-1])&&s.keys.length>this._minkyn){c.keys.unshift(n.keys[a-1]),n.keys[a-1]=s.keys.pop(),c.nodePointers.unshift(s.nodePointers.pop());break}if(null!==s?(r=s.merge(c,n,a-1),c=s):null!==o&&(r=c.merge(o,n,a)),0===t.length&&0===n.keys.length){this._root=c;break}c=n}}static _fixNodes(e,t,r){let n,i=e.length,s=!0;do{for(let o=(n=e[--i].keys).length-1;o>=0;--o)if(n[o]===t){n[o]=r,s=!1;break}}while(s&&i>0)}goToLowerBound(e,t=!1){if(void 0!==e){let r=this.seek(e,l.NEAR_MODE.GE);return r&&t&&d.equals(e,this.currentKey)&&(r=this.skip()),r}return this.goTop()}goToUpperBound(e,t=!1){if(void 0!==e){let r=this.seek(e,l.NEAR_MODE.LE);return r&&t&&d.equals(e,this.currentKey)&&(r=this.skip(-1)),r}return this.goBottom()}}l.NEAR_MODE={NONE:0,LE:1,GE:2},r.register(l);class f{static _codePointTextDecoder(e){if("undefined"==typeof TextDecoder)throw new Error("TextDecoder not supported");if(null===f._ISO_8859_15_DECODER)throw new Error("TextDecoder does not supprot iso-8859-15");if(void 0===f._ISO_8859_15_DECODER)try{f._ISO_8859_15_DECODER=new TextDecoder("iso-8859-15")}finally{f._ISO_8859_15_DECODER=null}return f._ISO_8859_15_DECODER.decode(e).replace("€","¤").replace("Š","¦").replace("š","¨").replace("Ž","´").replace("ž","¸").replace("Œ","¼").replace("œ","½").replace("Ÿ","¾")}static _tripletToBase64(e){return f._BASE64_LOOKUP[e>>18&63]+f._BASE64_LOOKUP[e>>12&63]+f._BASE64_LOOKUP[e>>6&63]+f._BASE64_LOOKUP[63&e]}static _base64encodeChunk(e,t,r){let n;const i=[];for(let s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(f._tripletToBase64(n));return i.join("")}static _base64fromByteArray(e){let t;const r=e.length,n=r%3;let i="";const s=[];for(let t=0,i=r-n;t<i;t+=16383)s.push(f._base64encodeChunk(e,t,t+16383>i?i:t+16383));return 1===n?(t=e[r-1],i+=f._BASE64_LOOKUP[t>>2],i+=f._BASE64_LOOKUP[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=f._BASE64_LOOKUP[t>>10],i+=f._BASE64_LOOKUP[t>>4&63],i+=f._BASE64_LOOKUP[t<<2&63],i+="="),s.push(i),s.join("")}static toBase64(t){if(void 0!==e&&"undefined"==typeof window)return e.from(t).toString("base64");if("undefined"!=typeof TextDecoder&&null!==f._ISO_8859_15_DECODER)try{return btoa(f._codePointTextDecoder(new Uint8Array(t)))}catch(e){}return f._base64fromByteArray(new Uint8Array(t))}static fromBase64(e){if(!/^([0-9a-zA-Z+\/]{4})*(([0-9a-zA-Z+\/]{2}==)|([0-9a-zA-Z+\/]{3}=))?$/.test(e))throw new Error("Invalid base64");return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}static toBase64lex(e){const t=f.toBase64(e);let r="";for(let e=0;e<t.length;e++)r+=f.BASE64_TO_BASE64_LEX[t[e]];return r}static fromBase64lex(e){let t="";for(let r=0;r<e.length;r++)t+=f.BASE64_LEX_TO_BASE64[e[r]];return f.fromBase64(t)}static equals(e,t){if(e.length!==t.length)return!1;const r=new Uint8Array(e),n=new Uint8Array(t);for(let t=0;t<e.length;t++)if(r[t]!==n[t])return!1;return!0}static compare(e,t){if(e.length<t.length)return-1;if(e.length>t.length)return 1;for(let r=0;r<e.length;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0}}f.BASE64_ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f._BASE64_LOOKUP=[];for(let e=0,t=f.BASE64_ALPHABET.length;e<t;++e)f._BASE64_LOOKUP[e]=f.BASE64_ALPHABET[e];f.BASE64_LEX_ALPHABET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~",f.BASE64_TO_BASE64_LEX={"=":"-"},f.BASE64_LEX_TO_BASE64={"-":"="};for(let e=0,t=f.BASE64_ALPHABET.length;e<t;++e)f.BASE64_TO_BASE64_LEX[f.BASE64_ALPHABET[e]]=f.BASE64_LEX_ALPHABET[e],f.BASE64_LEX_TO_BASE64[f.BASE64_LEX_ALPHABET[e]]=f.BASE64_ALPHABET[e];r.register(f);class d{static equals(e,t){return e===t||(e instanceof Set&&t instanceof Set?e.equals(t):!(!d.isUint8Array(e)||!d.isUint8Array(t))&&f.equals(new Uint8Array(e),new Uint8Array(t)))}static compare(e,t){return d.isUint8Array(e)&&d.isUint8Array(t)?f.compare(new Uint8Array(e),new Uint8Array(t)):e<t?-1:e>t?1:0}static isUint8Array(t){return void 0!==e&&"undefined"==typeof window&&t instanceof e||ArrayBuffer.isView(t)||t instanceof ArrayBuffer}}r.register(d);class p{static stringify(e){return JSON.stringify(e,p.jsonifyType)}static parse(e){return JSON.parse(e,p.parseType)}static parseType(e,t){if(t&&t[p.TYPE_SYMBOL])switch(t[p.TYPE_SYMBOL]){case"Uint8Array":return f.fromBase64(t[p.VALUE_SYMBOL]);case"Set":return Set.from(t[p.VALUE_SYMBOL])}return t}static jsonifyType(e,t){return t instanceof Uint8Array?p.typedObject("Uint8Array",f.toBase64(t)):t instanceof Set?p.typedObject("Set",Array.from(t)):t}static typedObject(e,t){const r={};return r[p.TYPE_SYMBOL]=e,r[p.VALUE_SYMBOL]=t,r}}p.TYPE_SYMBOL="__",p.VALUE_SYMBOL="value",r.register(p);class A{static get instance(){return A._instance||(A._instance=new A(new n)),A._instance}constructor(e){this._native=e}setLoggable(e,t){this._native.setLoggable(e,t)}get level(){return this._native._global_level}set level(e){this._native._global_level=e}msg(e,t,r){if(this._native.isLoggable(t,e)){for(let e=0;e<r.length;++e)"function"==typeof r[e]&&(r[e]=r[e]()),"object"==typeof r[e]&&("function"==typeof r[e].toString?r[e]=r[e].toString():r[e].constructor&&r[e].constructor.name?r[e]=`{Object: ${r[e].constructor.name}}`:r[e]="{Object}");this._native.msg(e,t,r)}}static d(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),A.instance.msg(A.DEBUG,e,r)}static e(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),A.instance.msg(A.ERROR,e,r)}static i(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),A.instance.msg(A.INFO,e,r)}static v(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),A.instance.msg(A.VERBOSE,e,r)}static w(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),A.instance.msg(A.WARNING,e,r)}static t(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),A.instance.msg(A.TRACE,e,r)}}A.Level={TRACE:1,VERBOSE:2,DEBUG:3,INFO:4,WARNING:5,ERROR:6,ASSERT:7,toStringTag:function(e){switch(e){case A.TRACE:return"T";case A.VERBOSE:return"V";case A.DEBUG:return"D";case A.INFO:return"I";case A.WARNING:return"W";case A.ERROR:return"E";case A.ASSERT:return"A";default:return"*"}}},A.TRACE=A.Level.TRACE,A.VERBOSE=A.Level.VERBOSE,A.DEBUG=A.Level.DEBUG,A.INFO=A.Level.INFO,A.WARNING=A.Level.WARNING,A.ERROR=A.Level.ERROR,A.ASSERT=A.Level.ASSERT,A._instance=null,A.d.tag=e=>A.d.bind(null,e),A.e.tag=e=>A.e.bind(null,e),A.i.tag=e=>A.i.bind(null,e),A.v.tag=e=>A.v.bind(null,e),A.w.tag=e=>A.w.bind(null,e),A.t.tag=e=>A.t.bind(null,e),r.register(A);class g{constructor(...e){this._length=0,this._head=null,this._tail=null;const t=1===e.length&&Array.isArray(e[0])?e[0]:e;for(const e of t)this.push(e)}push(e){const t={next:null,prev:this._head,value:e};this._push(t)}_push(e){this._length++,this._head?(this._head.next=e,this._head=e):(this._head=e,this._tail=e)}unshift(e){const t={next:this._tail,prev:null,value:e};this._unshift(t)}_unshift(e){this._length++,this._head?(this._tail.prev=e,this._tail=e):(this._head=e,this._tail=e)}pop(){if(!this._head)return null;this._length--;const e=this._head,t=e.prev;return t?(t.next=null,this._head=t,e.value):(this._head=null,this._tail=null,e.value)}shift(){if(!this._head)return null;this._length--;const e=this._tail,t=e.next;return t?(t.prev=null,this._tail=t,e.value):(this._head=null,this._tail=null,e.value)}_remove(e){e===this._head?this.pop():e===this._tail?this.shift():(this._length--,e.prev.next=e.next,e.next.prev=e.prev)}clear(){this._length=0,this._head=null,this._tail=null}[Symbol.iterator](){return this.iterator()}*iterator(){let e=this._tail;for(;e;)yield e.value,e=e.next}isEmpty(){return 0===this._length}get first(){return this._tail?this._tail.value:null}get last(){return this._head?this._head.value:null}get length(){return this._length}}r.register(g);class y extends g{constructor(){super(),this._map=new Map}push(e){this._map.has(e)||super.push(e)}_push(e){super._push(e),this._map.set(e.value,e)}unshift(e){this._map.has(e)||super.unshift(e)}_unshift(e){super._unshift(e),this._map.set(e.value,e)}pop(){const e=super.pop();return this._map.delete(e),e}shift(){const e=super.shift();return this._map.delete(e),e}clear(){super.clear(),this._map.clear()}contains(e){return this._map.has(e)}remove(e){const t=this._map.get(e);t&&(super._remove(t),this._map.delete(e))}moveBack(e){const t=this._map.get(e);if(t){if(t===this._head)return;t===this._tail?(t.next.prev=null,this._tail=t.next):(t.prev.next=t.next,t.next.prev=t.prev),t.next=null,t.prev=this._head,this._head.next=t,this._head=t}else super.push(e)}}r.register(y);class m{constructor(e){this._maxSize=e,this._map=new Map,this._accessQueue=new y}get size(){return this._map.size}clear(){return this._accessQueue.clear(),this._map.clear()}delete(e){return this._accessQueue.remove(e),this._map.delete(e)}entries(){return this._map.entries()}forEach(e,t){return this._map.forEach(e,t)}get(e){return this._access(e),this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}evict(e=1){for(;e>0&&this._accessQueue.length>0;){const t=this._accessQueue.shift();this._map.delete(t),--e}}_access(e){this._accessQueue.moveBack(e)}set(e,t){this.size>=this._maxSize&&this.evict(),this.size<this._maxSize&&(this._map.set(e,t),this._access(e))}values(){return this._map.values()}[Symbol.iterator](){return this._map.entries()}}r.register(m);class _{static byKeyPath(e,t){if(!Array.isArray(t))return e[t];let r=e;for(const e of t){if(void 0===r)return;r=r[e]}return r}}r.register(_),Set.prototype.union=function(e){const t=new Set(this);for(const r of e)t.add(r);return t},Set.prototype.intersection=function(e){const t=new Set;for(const r of e)this.has(r)&&t.add(r);return t},Set.prototype.difference=function(e){const t=new Set(this);for(const r of e)t.delete(r);return t},Set.prototype.equals=function(e){if(this.size!==e.size)return!1;for(const t of e)if(!this.has(t))return!1;return!0},Set.prototype.limit=function(e=null){if(null===e)return this;const t=new Set;let r=0;for(const n of this){if(null!==e&&r>=e)break;t.add(n),r++}return t},Set.from=function(e){return e&&"function"==typeof e[Symbol.iterator]&&"string"!=typeof e?new Set(e):new Set([e])},Set.sampleElement=function(e){return e.size>0?e.values().next().value:void 0};class b{constructor(e=[],t){this._list=e,this._compare=t||b._compare}static _compare(e,t){return e.compare?e.compare(t):e>t?1:e<t?-1:0}indexOf(e){let t=0,r=this._list.length-1,n=null,i=null;for(;t<=r;)if(n=Math.round((t+r)/2),i=this._list[n],this._compare(i,e)<0)t=n+1;else{if(!(this._compare(i,e)>0))return n;r=n-1}return-1}_insertionIndex(e){let t=0,r=this._list.length-1,n=null,i=null;for(;t<=r;)if(n=Math.round((t+r)/2),i=this._list[n],this._compare(i,e)<0)t=n+1;else{if(!(this._compare(i,e)>0))break;r=n-1}return t}add(e){this._list.splice(this._insertionIndex(e),0,e)}has(e){return this.indexOf(e)>=0}shift(){return this._list.shift()}pop(){return this._list.pop()}peekFirst(){return this._list[0]}peekLast(){return this._list[this._list.length-1]}remove(e){const t=this.indexOf(e);t>-1&&this._list.splice(t,1)}clear(){this._list=[]}values(){return this._list}[Symbol.iterator](){return this._list[Symbol.iterator]()}copy(){return new b(this._list.slice(),this._compare)}get length(){return this._list.length}}r.register(b);class w{constructor(){this._queue=[],this._working=!1}push(e){return new Promise((t,r)=>{this._queue.push({fn:e,resolve:t,error:r}),this._working||this._doWork().catch(A.w.tag(w))})}async _doWork(){for(this._working=!0;this._queue.length;){const e=this._queue.shift();try{const t=await e.fn();e.resolve(t)}catch(t){e.error&&e.error(t)}}this._working=!1}get working(){return this._working}}r.register(w);class v{constructor(e){this._tableName=e,this._modified=new Map,this._removed=new Set,this._truncated=!1}get tableName(){return this._tableName}get modified(){return this._modified}get removed(){return this._removed}get truncated(){return this._truncated}truncate(){this._truncated=!0,this._modified.clear(),this._removed.clear()}put(e,t){this._removed.delete(e),this._modified.set(e,t)}get(e){return this._modified.get(e)}remove(e){this._removed.add(e),this._modified.delete(e)}}r.register(v);class E{static _encodeInteger(e){const t=new Uint8Array(9),r=new DataView(t.buffer);return r.setUint8(0,E.Type.INTEGER),r.setUint32(1,Math.floor(e/Math.pow(2,32))),r.setUint32(5,e),t}static _decodeInteger(e){const t=new DataView(e.buffer);return t.getUint32(1)*Math.pow(2,32)+t.getUint32(5)}static _encodeString(e,t=E.Type.STRING){const r=new Uint8Array(e.length+1);r[0]=t;for(let t=0;t<e.length;++t)r[t+1]=e.charCodeAt(t);return r}static _decodeString(e){return String.fromCharCode.apply(null,e.subarray(1))}static _encodeOther(e){return E._encodeString(p.stringify(e),E.Type.JSON)}static _decodeOther(e){const t=E._decodeString(e);return p.parse(t)}static _encodeBuffer(e){const t=new Uint8Array(e.byteLength+1);return t[0]=E.Type.BUFFER,t.set(e,1),t}static _decodeBuffer(e){return e.subarray(1)}static encode(e){return Number.isInteger(e)?E._encodeInteger(e):"string"==typeof e?this._encodeString(e):e instanceof Uint8Array?E._encodeBuffer(e):E._encodeOther(e)}static decode(e){switch((e=new Uint8Array(e))[0]){case E.Type.INTEGER:return E._decodeInteger(e);case E.Type.STRING:return E._decodeString(e);case E.Type.BUFFER:return E._decodeBuffer(e);default:return E._decodeOther(e)}}static get encoding(){return o.Encoding.BINARY}}E.Type={INTEGER:0,STRING:1,JSON:2,BUFFER:3},r.register(E);class S{constructor(e,t=S.MAX_CACHE_SIZE,r=0){this._backend=e,this._cache=new m(t),this._rawCache=new m(r)}get connected(){return this._backend.connected}get indices(){return this._backend.indices}async _retrieveValues(e){const t=[];for(const r of e)t.push(this.get(r));return Promise.all(t)}_has(e){return this._cache.has(e)||this._rawCache.has(e)}_get(e,t){if(t&&t.raw){if(this._rawCache.has(e))return this._rawCache.get(e);{const t=this.encode(this._cache.get(e));return this._rawCache.set(e,t),t}}if(this._cache.has(e))return this._cache.get(e);{const t=this.decode(this._rawCache.get(e),e);return this._cache.set(e,t),t}}getSync(e,t={}){if(this._has(e))return this._get(e,t);if(this._backend.isSynchronous()){const r=this._backend.getSync(e,t);return t&&t.raw?this._rawCache.set(e,r):this._cache.set(e,r),r}if(t&&t.expectPresence)throw new Error(`Missing key in cached backend: ${e}`)}isCached(e){return!1}async get(e,t={}){if(this._has(e))return this._get(e,t);const r=await this._backend.get(e,t);return t&&t.raw?this._rawCache.set(e,r):this._cache.set(e,r),r}keys(e=null,t=null){return this._backend.keys(e,t)}values(e=null,t=null){return this._backend.values(e,t)}keyStream(e,t=!0,r=null){return this._backend.keyStream(e,t,r)}valueStream(e,t=!0,r=null){return this._backend.valueStream(e,t,r)}maxValue(e=null){return this._backend.maxValue(e)}maxKey(e=null){return this._backend.maxKey(e)}minKey(e=null){return this._backend.minKey(e)}minValue(e=null){return this._backend.minValue(e)}count(e=null){return this._backend.count(e)}_apply(e){return this._applyLocally(e),this._backend._apply(e)}_applyLocally(e){e._truncated&&this._cache.clear();for(const t of e._removed)this._cache.delete(t);for(const[t,r]of e._modified)this._cache.set(t,r)}async truncate(){return this._cache.clear(),this._backend.truncate()}index(e){return this._backend.index(e)}createIndex(e,t,r={}){return this._backend.createIndex(e,t,r)}deleteIndex(e,t={}){return this._backend.deleteIndex(e,t)}close(){return this._backend.close()}async applyCombined(e){return[await this._backend.applyCombined(e),()=>this._applyLocally(e)]}isSynchronous(){return!0}decode(e,t){return this._backend.decode(e,t)}encode(e){return this._backend.encode(e)}}S.MAX_CACHE_SIZE=5e3,r.register(S);class C{constructor(e,t,r=!1,n=!1){this._objectStore=e,this._keyPath=t,this._multiEntry=r,this._unique=n,this._tree=new l}truncate(){this._tree=new l}_indexKey(e,t){return void 0===t?void 0:this.keyPath?_.byKeyPath(t,this.keyPath):e}get keyPath(){return this._keyPath}get multiEntry(){return this._multiEntry}get unique(){return this._unique}_insert(e,t){const r=this._tree;this._multiEntry&&Array.isArray(t)||(t=[t]);for(const n of t)if(r.seek(n)){if(this._unique)throw new Error(`Uniqueness constraint violated for key ${e} on path ${this._keyPath}`);r.currentRecord.add(e)}else r.insert(n,this._unique?e:new b([e],d.compare))}put(e,t,r){const n=this._indexKey(e,r),i=this._indexKey(e,t);d.equals(n,i)||(void 0!==n&&this._remove(e,n),void 0!==i&&this._insert(e,i))}remove(e,t){const r=this._indexKey(e,t);void 0!==r&&this._remove(e,r)}_remove(e,t){const r=this._tree;this._multiEntry&&Array.isArray(t)||(t=[t]);for(const n of t)r.seek(n)&&(!this._unique&&r.currentRecord.length>1?r.currentRecord.remove(e):r.remove(n))}async _retrieveValues(e){const t=[];for(const r of e)t.push(this._objectStore.get(r));return Promise.all(t)}async values(e=null,t=null){const r=await this.keys(e,t);return this._retrieveValues(r)}async keys(e=null,t=null){let r=new Set;if(e instanceof I&&e.exactMatch)return this._tree.seek(e.lower)&&(r=Set.from(this._tree.currentRecord)),r.limit(t);if(e instanceof I){if(!this._tree.goToLowerBound(e.lower,e.lowerOpen))return r}else if(!this._tree.goTop())return r;for(;(!(e instanceof I)||e.includes(this._tree.currentKey))&&!(null!==t&&r.size>=t)&&(r=r.union(Set.from(this._tree.currentRecord)),this._tree.skip()););return r.limit(t)}keyStream(e,t=!0,r=null){if(r instanceof I){if(t){if(!this._tree.goToLowerBound(r.lower,r.lowerOpen))return Promise.resolve()}else if(!this._tree.goToUpperBound(r.upper,r.upperOpen))return Promise.resolve()}else if(t){if(!this._tree.goTop())return Promise.resolve()}else if(!this._tree.goBottom())return Promise.resolve();e:for(;!(r instanceof I)||r.includes(this._tree.currentKey);){if(this._unique){if(!e(this._tree.currentRecord))break}else{const r=this._tree.currentRecord.values();if(t){for(let t=0;t<r.length;t++)if(!e(r[t]))break e}else for(let t=r.length-1;t>=0;t--)if(!e(r[t]))break e}if(!this._tree.skip(t?1:-1))break}return Promise.resolve()}async valueStream(e,t=!0,r=null){if(r instanceof I){if(t){if(!this._tree.goToLowerBound(r.lower,r.lowerOpen))return}else if(!this._tree.goToUpperBound(r.upper,r.upperOpen))return}else if(t){if(!this._tree.goTop())return}else if(!this._tree.goBottom())return;e:for(;!(r instanceof I)||r.includes(this._tree.currentKey);){if(this._unique){if(!e(await this._objectStore.get(this._tree.currentRecord),this._tree.currentRecord))break}else{const r=this._tree.currentRecord.values();if(t){for(let t=0;t<r.length;t++)if(!e(await this._objectStore.get(r[t]),r[t]))break e}else for(let t=r.length-1;t>=0;t--)if(!e(await this._objectStore.get(r[t]),r[t]))break e}if(!this._tree.skip(t?1:-1))break}}async maxValues(e=null){const t=await this.maxKeys(e);return this._retrieveValues(t)}async maxKeys(e=null){const t=e instanceof I;return this._tree.goToUpperBound(t?e.upper:void 0,!!t&&e.upperOpen)?Set.from(this._tree.currentRecord):new Set}async minValues(e=null){const t=await this.minKeys(e);return this._retrieveValues(t)}async minKeys(e=null){const t=e instanceof I;return this._tree.goToLowerBound(t?e.lower:void 0,!!t&&e.lowerOpen)?Set.from(this._tree.currentRecord):new Set}async count(e=null){return(await this.keys(e)).size}}r.register(C);class k{constructor(e,t=null){this._cache=new Map,this._indices=new Map,this._primaryIndex=new C(this,void 0,!1,!0),this._tableName=e,this._codec=t}get connected(){return!0}get indices(){return this._indices}getSync(e,t={}){const r=this._cache.get(e);return t&&t.raw?r:this.decode(r,e)}get(e,t={}){try{return Promise.resolve(this.getSync(e,t))}catch(e){return Promise.reject(e)}}async values(e=null,t=null){if(null!==e&&e instanceof N)return e.values(this,t);const r=[];for(const n of await this.keys(e,t))r.push(await this.get(n));return Promise.resolve(r)}keys(e=null,t=null){return null!==e&&e instanceof N?e.keys(this,t):this._primaryIndex.keys(e,t)}keyStream(e,t=!0,r=null){return this._primaryIndex.keyStream(e,t,r)}valueStream(e,t=!0,r=null){return this._primaryIndex.valueStream(e,t,r)}async maxValue(e=null){const t=await this.maxKey(e);return this.get(t)}async maxKey(e=null){const t=await this._primaryIndex.maxKeys(e);return Set.sampleElement(t)}async minValue(e=null){const t=await this.minKey(e);return this.get(t)}async minKey(e=null){const t=await this._primaryIndex.minKeys(e);return Set.sampleElement(t)}async count(e=null){return(await this.keys(e)).size}index(e){return this._indices.get(e)}async _apply(e){e._truncated&&this.truncateSync();const t=new Map;for(const r of e._removed){const e=this.getSync(r);e&&t.set(r,e),this._cache.delete(r)}for(const[r,n]of e._modified){const e=this.getSync(r);e&&t.set(r,e),this._cache.set(r,this.encode(n))}k._indexApply(this._primaryIndex,e,t);for(const r of this._indices.values())k._indexApply(r,e,t)}static _indexApply(e,t,r){t._truncated&&e.truncate();for(const n of t._removed)e.remove(n,r.get(n));for(const[n,i]of t._modified)e.put(n,i,r.get(n))}async truncate(){this.truncateSync()}truncateSync(){this._cache.clear(),this._primaryIndex.truncate();for(const e of this._indices.values())e.truncate()}async map(e){for(const[t,r]of this._cache)e(t,r)}createIndex(e,t,r={}){let{multiEntry:n=!1,unique:i=!1,upgradeCondition:s=null}=r||{};const o=new C(this,t=t||e,n,i);this._indices.set(e,o)}deleteIndex(e,t={}){let{upgradeCondition:r=null}=t||{};this._indices.delete(e)}decode(e,t){return void 0===e?void 0:null!==this._codec&&void 0!==this._codec?this._codec.decode(e,t):e}encode(e){return void 0===e?void 0:null!==this._codec&&void 0!==this._codec?this._codec.encode(e):e}get tableName(){return this._tableName}async applyCombined(e){return()=>this._apply(e)}isSynchronous(){return!0}isCached(e){return!0}}r.register(k);class I{constructor(e,t,r,n){this._lower=e,this._upper=t,this._lowerOpen=r,this._upperOpen=n}get lower(){return this._lower}get upper(){return this._upper}get lowerOpen(){return this._lowerOpen}get upperOpen(){return this._upperOpen}get exactMatch(){return this._lower===this._upper&&!this._lowerOpen&&!this.upperOpen}includes(e){return(void 0===this._lower||d.compare(this._lower,e)<0||!this._lowerOpen&&d.equals(this._lower,e))&&(void 0===this._upper||d.compare(this._upper,e)>0||!this._upperOpen&&d.equals(this._upper,e))}static upperBound(e,t=!1){return new I(void 0,e,!1,t)}static lowerBound(e,t=!1){return new I(e,void 0,t,!1)}static bound(e,t,r=!1,n=!1){return new I(e,t,r,n)}static only(e){return new I(e,e,!1,!1)}}r.register(I);class T{constructor(e,t,r){this._backend=e,this._db=t,this._name=r,this._stateStack=[],this._backendInfo=new R(this._backend,null),this._transactions=new Map,this._transactions.set(T.BACKEND_ID,this._backendInfo),this._snapshotManager=new L,this._synchronizer=new w}get jungleDB(){return this._db}get connected(){return this._backend.connected}get _currentState(){return this._stateStack.length>0?this._stateStack[this._stateStack.length-1].transaction:this._backend}get _currentStateInfo(){return this._stateStack.length>0?this._stateStack[this._stateStack.length-1]:this._backendInfo}get _currentStateId(){return this._stateStack.length>0?this._stateStack[this._stateStack.length-1].id:T.BACKEND_ID}get indices(){if(!this._backend.connected)throw new Error("JungleDB is not connected");return this._currentState.indices}get(e,t={}){if(!this._backend.connected)throw new Error("JungleDB is not connected");return this._currentState.get(e,t)}async put(e,t){if(!this._backend.connected)throw new Error("JungleDB is not connected");const r=this.transaction();try{await r.put(e,t)}catch(e){throw await r.abort(),e}return r.commit()}async remove(e){if(!this._backend.connected)throw new Error("JungleDB is not connected");const t=this.transaction();try{await t.remove(e)}catch(e){throw await t.abort(),e}return t.commit()}getSync(e,t={}){if(!this._backend.connected)throw new Error("JungleDB is not connected");if(!this._currentState.isSynchronous())throw new Error("Only works on synchronous backends");return this._currentState.getSync(e,t)}isCached(e){if(!this._backend.connected)throw new Error("JungleDB is not connected");if(!this._currentState.isSynchronous())throw new Error("Only works on synchronous backends");return this._currentState.isCached(e)}keys(e=null,t=null){if(!this._backend.connected)throw new Error("JungleDB is not connected");return null!==e&&e instanceof N?e.keys(this._currentState,t):this._currentState.keys(e,t)}values(e=null,t=null){if(!this._backend.connected)throw new Error("JungleDB is not connected");return null!==e&&e instanceof N?e.values(this._currentState,t):this._currentState.values(e,t)}keyStream(e,t=!0,r=null){return this._currentState.keyStream(e,t,r)}valueStream(e,t=!0,r=null){return this._currentState.valueStream(e,t,r)}maxValue(e=null){if(!this._backend.connected)throw new Error("JungleDB is not connected");return this._currentState.maxValue(e)}maxKey(e=null){if(!this._backend.connected)throw new Error("JungleDB is not connected");return this._currentState.maxKey(e)}minKey(e=null){if(!this._backend.connected)throw new Error("JungleDB is not connected");return this._currentState.minKey(e)}minValue(e=null){if(!this._backend.connected)throw new Error("JungleDB is not connected");return this._currentState.minValue(e)}count(e=null){if(!this._backend.connected)throw new Error("JungleDB is not connected");return this._currentState.count(e)}async commit(e){return this._isCommittable(e)?(await this._commitInternal(e),!0):(await this.abort(e),!1)}_isCommittable(e){if(!this._backend.connected)throw new Error("JungleDB is not connected");if(!(e instanceof O&&e.state===O.STATE.OPEN&&this._transactions.has(e.id)))throw new Error("Can only commit open transactions");return this._transactions.get(e.id).isCommittable()}async _commitBackend(){throw new Error("Cannot commit object stores")}async _commitInternal(e){const t=this._transactions.get(e.id);if(this._stateStack.length>=T.MAX_STACK_SIZE)throw A.e(T,`Transaction stack size exceeded ${this.toStringFull()}`),new Error("Transaction stack size exceeded");this._stateStack.push(t),t.close(),t.isFlushable()&&await this._flattenState(e)}_setParent(e){throw new Error("Unsupported operation")}async abort(e){if(!this._backend.connected)throw new Error("JungleDB is not connected");if(e instanceof x)return this._snapshotManager.abortSnapshot(e);if(!(e instanceof O&&e.state===O.STATE.OPEN&&this._transactions.has(e.id)))throw new Error("Can only abort open transactions");const t=this._transactions.get(e.id);return t.abort(),t.parent&&0===t.parent.numOpenChildren&&await this._flattenState(),this._transactions.delete(e.id),!0}_flattenState(e){return this._synchronizer.push(()=>this._flattenStateInternal(e))}async _flattenStateInternal(e){if(e&&e instanceof O){const t=this._transactions.get(e.id);if(!t.isFlushable())return!1;const r=t.parent.transaction,n=()=>{t.flush(),this._transactions.delete(e.id);const r=this._stateStack.indexOf(t);r>=0&&this._stateStack.splice(r,1),this._flattenState().catch(A.w.tag(T))};if(null===e.dependency){t.parent.isBackend()&&await this._snapshotManager.applyTx(e,r);try{await r._apply(e)}catch(r){t.abort(),this._transactions.delete(e.id);const n=this._stateStack.indexOf(t);n>=0&&this._stateStack.splice(n,1),e._setAborted(),A.e(T,"Error while applying transaction",r)}return n(),!0}return await e.dependency.onFlushable(e,n,()=>this._snapshotManager.applyTx(e,r))}for(;this._stateStack.length>0&&await this._flattenStateInternal(this._currentState););for(;this._stateStack.length>0&&await this._flattenStateInternal(this._stateStack[0].transaction););return!1}index(e){if(!this._backend.connected)throw new Error("JungleDB is not connected");return this._currentState.index(e)}createIndex(e,t,r={}){return this._backend.createIndex(e,t,r)}deleteIndex(e,t={}){return this._backend.deleteIndex(e,t)}transaction(e=!0){if(!this._backend.connected)throw new Error("JungleDB is not connected");if(this._backend.isSynchronous())return this.synchronousTransaction(e);const t=new O(this,this._currentState,this,e);return this._transactions.set(t.id,new R(t,this._currentStateInfo)),t}synchronousTransaction(e=!0){if(!this._backend.connected)throw new Error("JungleDB is not connected");const t=new P(this,this._currentState,this,e);return this._transactions.set(t.id,new R(t,this._currentStateInfo)),t}isSynchronous(){return this._backend.isSynchronous()}snapshot(){return this._currentStateId!==T.BACKEND_ID?this._currentState.snapshot():this._snapshotManager.createSnapshot(this,this._currentState)}async _apply(e){throw new Error("Unsupported operation")}async truncate(){if(!this._backend.connected)throw new Error("JungleDB is not connected");const e=this.transaction();return await e.truncate(),e.commit()}close(){if(this._stateStack.length>0)throw new Error("Cannot close database while transactions are active");return this._backend.close()}decode(e,t){return this._backend.decode(e,t)}encode(e){return this._backend.encode(e)}toStringFull(){return`ObjectStore{\n    stack=[${this._stateStack.map(e=>`{tx=${e}, open=${e.numOpenChildren}}`)}],\n    db=${this._db}/${this._name?this._name:"unnamed"}\n}`}toString(){return`ObjectStore{stackSize=${this._stateStack.length}, db=${this._db}/${this._name?this._name:"unnamed"}}`}}T.MAX_STACK_SIZE=10,T.BACKEND_ID="backend",r.register(T);class R{constructor(e,t,r=[]){this.transaction=e,this.children=r,this._parentInfo=t,this._open=!0,this._parentInfo&&this._parentInfo.addChild(this)}addChild(e){this.children.push(e)}removeChild(e){const t=this.children.indexOf(e);t>=0&&this.children.splice(t,1)}flush(){if(!this.isBackend()){const e=this.parent;this.parent.removeChild(this);for(const t of this.children.slice())t.parent=e;this.children=[],this._parentInfo=null}}abort(){this.isBackend()||this.parent.removeChild(this)}close(){this._open=!1}get parent(){return this._parentInfo}set parent(e){this.parent.removeChild(this),this._parentInfo=e,this.parent.addChild(this),this.transaction._setParent(e.transaction)}get id(){return this.isBackend()?T.BACKEND_ID:this.transaction.id}isBackend(){return null===this._parentInfo}isOpen(){return this._open}get numOpenChildren(){return this.children.filter(e=>e.isOpen()).length}isCommittable(){return this._parentInfo&&this._parentInfo.children.every(e=>e.isOpen())}isFlushable(){return this.parent&&0===this.parent.numOpenChildren&&(null===this.transaction.dependency||this.parent.isBackend())}toString(){return this.transaction.toStringShort()}}class N{static _parseKeyRange(e,t,r){switch(e){case N.OPERATORS.GT:return I.lowerBound(t,!0);case N.OPERATORS.GE:return I.lowerBound(t,!1);case N.OPERATORS.LT:return I.upperBound(t,!0);case N.OPERATORS.LE:return I.upperBound(t,!1);case N.OPERATORS.EQ:return I.only(t);case N.OPERATORS.BETWEEN:return I.bound(t,r,!0,!0);case N.OPERATORS.WITHIN:return I.bound(t,r,!1,!1)}throw A.e(`Unknown operator: ${e}`),new Error("Unknown operator")}static and(e){const t=Array.from(arguments);return new N(t,N.OPERATORS.AND)}static or(e){const t=Array.from(arguments);return new N(t,N.OPERATORS.OR)}static max(e){return new N(e,N.OPERATORS.MAX)}static min(e){return new N(e,N.OPERATORS.MIN)}static lt(e,t){return new N(e,N.OPERATORS.LT,t)}static le(e,t){return new N(e,N.OPERATORS.LE,t)}static gt(e,t){return new N(e,N.OPERATORS.GT,t)}static ge(e,t){return new N(e,N.OPERATORS.GE,t)}static eq(e,t){return new N(e,N.OPERATORS.EQ,t)}static between(e,t,r){return new N(e,N.OPERATORS.BETWEEN,t,r)}static within(e,t,r){return new N(e,N.OPERATORS.WITHIN,t,r)}constructor(e,t,r,n){if(Array.isArray(e)){if(e.some(e=>!(e instanceof N)))throw new Error("Invalid query");if(N.COMBINED_OPERATORS.indexOf(t)<0)throw new Error("Unknown operator");this._queryType=N.Type.COMBINED,this._queries=e,this._op=t}else{if(N.RANGE_OPERATORS.indexOf(t)>=0)this._queryType=N.Type.RANGE,this._keyRange=N._parseKeyRange(t,r,n);else{if(!(N.ADVANCED_OPERATORS.indexOf(t)>=0))throw new Error("Unknown operator");this._queryType=N.Type.ADVANCED,this._op=t}this._indexName=e}}async values(e,t=null){const r=await this._execute(e,t),n=[];for(const t of r)n.push(e.get(t));return Promise.all(n)}keys(e,t=null){return this._execute(e,t)}async _execute(e,t=null){switch(this._queryType){case N.Type.COMBINED:return Promise.resolve(this._executeCombined(e,t));case N.Type.ADVANCED:return Promise.resolve(this._executeAdvanced(e,t));case N.Type.RANGE:return this._executeRange(e,t)}return Promise.resolve(new Set)}async _executeCombined(e,t=null){const r=[];for(const n of this._queries)r.push(n._execute(e,t));const n=await Promise.all(r);if(this._op===N.OPERATORS.AND){if(0===n.length)return new Set;if(1===n.length)return null===t||t>=1?n[0]:new Set;const e=n.shift(),r=new Set;let i=0;for(const s of e)if(n.every(e=>e.has(s))){if(null!==t&&i>=t)break;r.add(s),i++}return r}if(this._op===N.OPERATORS.OR){const e=new Set;let r=0;for(const i of n){for(const n of i){if(null!==t&&r>=t)break;e.add(n),r++}if(null!==t&&r>=t)break}return e}return new Set}async _executeAdvanced(e,t=null){const r=e.index(this._indexName);let n=new Set;switch(this._op){case N.OPERATORS.MAX:n=await r.maxKeys();break;case N.OPERATORS.MIN:n=await r.minKeys()}return new Set(n.limit(t))}async _executeRange(e,t=null){const r=e.index(this._indexName);return new Set(await r.keys(this._keyRange,t))}}N.OPERATORS={GT:0,GE:1,LT:2,LE:3,EQ:4,BETWEEN:7,WITHIN:8,MAX:9,MIN:10,AND:11,OR:12},N.RANGE_OPERATORS=[N.OPERATORS.GT,N.OPERATORS.GE,N.OPERATORS.LT,N.OPERATORS.LE,N.OPERATORS.EQ,N.OPERATORS.BETWEEN,N.OPERATORS.WITHIN],N.ADVANCED_OPERATORS=[N.OPERATORS.MAX,N.OPERATORS.MIN],N.COMBINED_OPERATORS=[N.OPERATORS.AND,N.OPERATORS.OR],N.Type={RANGE:0,ADVANCED:1,COMBINED:2},r.register(N);class B extends C{static derive(e,t){const r=new Map;for(const[n,i]of t.indices)r.set(n,new B(e,t,n,i.keyPath,i.multiEntry,i.unique));return r}get _index(){return this._backend.index(this._databaseDir)}constructor(e,t,r,n,i=!1,s=!1){super(e,n,i,s),this._backend=t,this._databaseDir=r}async checkUniqueConstraint(e,t,r=!0){if(!this.unique)return;let n=this._indexKey(e,t);if(void 0!==n){this.multiEntry&&Array.isArray(n)||(n=[n]);for(const e of n)if(await this.count(I.only(e))>(r?1:0))throw new Error(`Uniqueness constraint violated for key ${e} on path ${this._keyPath}`)}}async keys(e=null,t=null){const r=[];this._objectStore._truncated?r.push(new Set):r.push(this._index.keys(e,t)),r.push(C.prototype.keys.call(this,e,t));let[n,i]=await Promise.all(r);return(n=(n=n.difference(this._objectStore._removed)).difference(this._objectStore._modified.keys())).union(i).limit(t)}async values(e=null,t=null){const r=await this.keys(e,t);return C.prototype._retrieveValues.call(this,r)}async maxValues(e=null){const t=await this.maxKeys(e);return C.prototype._retrieveValues.call(this,t)}async maxKeys(e=null){let t;t=this._objectStore._truncated?new Set:await this._index.maxKeys(e);let r=Set.sampleElement(t),n=void 0,i=void 0;for(void 0!==r&&(n=await this._backend.get(r),i=_.byKeyPath(n,this.keyPath)),t=(t=t.difference(this._objectStore._removed)).difference(this._objectStore._modified.keys());void 0!==r&&0===t.size;){const s=I.upperBound(i,!0);if(t=await this._index.maxKeys(s),void 0!==(r=Set.sampleElement(t))&&(n=await this._backend.get(r),i=_.byKeyPath(n,this.keyPath)),t=(t=t.difference(this._objectStore._removed)).difference(this._objectStore._modified.keys()),i&&null!==e&&!e.includes(i)){t=new Set;break}}const s=await C.prototype.maxKeys.call(this,e);if(0===t.size)return s;if(0===s.size)return t;const o=await this._objectStore.get(Set.sampleElement(s)),a=i,c=_.byKeyPath(o,this.keyPath);return d.compare(a,c)>0?t:d.compare(a,c)<0?s:t.union(s)}async minValues(e=null){const t=await this.minKeys(e);return C.prototype._retrieveValues.call(this,t)}async minKeys(e=null){let t;t=this._objectStore._truncated?new Set:await this._index.minKeys(e);let r=Set.sampleElement(t),n=void 0,i=void 0;for(void 0!==r&&(n=await this._backend.get(r),i=_.byKeyPath(n,this.keyPath)),t=(t=t.difference(this._objectStore._removed)).difference(this._objectStore._modified.keys());void 0!==r&&0===t.size;){const s=I.lowerBound(i,!0);if(t=await this._index.minKeys(s),void 0!==(r=Set.sampleElement(t))&&(n=await this._backend.get(r),i=_.byKeyPath(n,this.keyPath)),t=(t=t.difference(this._objectStore._removed)).difference(this._objectStore._modified.keys()),i&&null!==e&&!e.includes(i)){t=new Set;break}}const s=await C.prototype.minKeys.call(this,e);if(0===t.size)return s;if(0===s.size)return t;const o=await this._objectStore.get(Set.sampleElement(s)),a=i,c=_.byKeyPath(o,this.keyPath);return d.compare(a,c)<0?t:d.compare(a,c)>0?s:t.union(s)}async count(e=null){return(await this.keys(e)).size}}r.register(B);class O{constructor(e,t,r,n=!0){this._id=O._instanceCount++,this._objectStore=e,this._parent=t,this._managingBackend=r||t,this._modified=new Map,this._removed=new Set,this._truncated=!1,this._indices=B.derive(this,t),this._state=O.STATE.OPEN,this._nested=new Set,this._nestedCommitted=!1,this._dependency=null,this._snapshotManager=new L,this._startTime=Date.now(),this._enableWatchdog=n,this._enableWatchdog&&(this._watchdog=setTimeout(()=>{A.w(O,`Violation: tx id ${this._id} took longer than expected (still open after ${O.WATCHDOG_TIMER/1e3}s), ${this.toString()}.`)},O.WATCHDOG_TIMER))}get objectStore(){return this._objectStore}get nested(){return this._managingBackend instanceof O}get dependency(){return this._dependency}get connected(){return this._managingBackend.connected}get id(){return this._id}get indices(){return this._indices}get state(){return this._state}_applySync(e){e._truncated&&this.truncateSync();for(const[t,r]of e._modified)this._put(t,r);for(const t of e._removed)this._remove(t)}async truncate(){return this.truncateSync()}truncateSync(){if(this._state!==O.STATE.OPEN)throw new Error("Transaction already closed");this._truncated=!0,this._modified.clear(),this._removed.clear();for(const e of this._indices.values())e.truncate()}async get(e,t={}){return this._removed.has(e)?void 0:this._modified.has(e)?t&&t.raw?this.encode(this._modified.get(e)):this._modified.get(e):this._truncated?void 0:this._parent.get(e,t)}async put(e,t){if(this._state!==O.STATE.OPEN)throw new Error("Transaction already closed");const r=[];for(const n of this._indices.values())r.push(n.checkUniqueConstraint(e,t,!1));await Promise.all(r),this._put(e,t)}putSync(e,t){if(this._state!==O.STATE.OPEN)throw new Error("Transaction already closed");this._put(e,t)}async remove(e){if(this._state!==O.STATE.OPEN)throw new Error("Transaction already closed");this._remove(e)}removeSync(e){if(this._state!==O.STATE.OPEN)throw new Error("Transaction already closed");this._remove(e)}async keys(e=null){if(null!==e&&e instanceof N)return e.keys(this);let t=new Set;this._truncated||(t=await this._parent.keys(e)),t=t.difference(this._removed);for(const r of this._modified.keys())(null===e||e.includes(r))&&t.add(r);return t}async values(e=null){if(null!==e&&e instanceof N)return e.values(this);const t=await this.keys(e),r=[];for(const e of t)r.push(this.get(e));return Promise.all(r)}async keyStream(e,t=!0,r=null){let n=Array.from(this._modified.keys());r instanceof I&&(n=n.filter(e=>r.includes(e)));let i=(n=n.sort()).iterator(t);if(!this._truncated){let n=!1;if(await this._parent.keyStream(r=>{for(;i.hasNext()&&(t&&d.compare(i.peek(),r)<0||!t&&d.compare(i.peek(),r)>0);){const t=i.next();if(!e(t))return n=!0,!1}if(i.hasNext()&&d.equals(i.peek(),r)){const t=i.next();return!!e(t)||(n=!0,!1)}return!(!this._removed.has(r)&&!e(r))||(n=!0,!1)},t,r),n)return}for(;i.hasNext()&&e(i.next()););}async valueStream(e,t=!0,r=null){let n=Array.from(this._modified.keys());r instanceof I&&(n=n.filter(e=>r.includes(e)));let i=(n=n.sort()).iterator(t);if(!this._truncated){let n=!1;if(await this._parent.valueStream((r,s)=>{for(;i.hasNext()&&(t&&d.compare(i.peek(),s)<0||!t&&d.compare(i.peek(),s)>0);){const t=i.next(),r=this._modified.get(t);if(!e(r,t))return n=!0,!1}if(i.hasNext()&&d.equals(i.peek(),s)){const t=i.next(),r=this._modified.get(t);return!!e(r,t)||(n=!0,!1)}return!(!this._removed.has(s)&&!e(r,s))||(n=!0,!1)},t,r),n)return}for(;i.hasNext();){const t=i.next(),r=await this.get(t);if(!e(r,t))break}}async maxValue(e=null){const t=await this.maxKey(e);return this.get(t)}async maxKey(e=null){let t=void 0;for(this._truncated||(t=await this._parent.maxKey(e));void 0!==t&&this._removed.has(t);){const r=I.upperBound(t,!0);if(t=await this._parent.maxKey(r),null!==e&&!e.includes(t)){t=void 0;break}}for(const r of this._modified.keys())(null===e||e.includes(r))&&(void 0===t||d.compare(r,t)>0)&&(t=r);return t}async minValue(e=null){const t=await this.minKey(e);return this.get(t)}async minKey(e=null){let t=void 0;for(this._truncated||(t=await this._parent.minKey(e));void 0!==t&&this._removed.has(t);){const r=I.lowerBound(t,!0);if(t=await this._parent.minKey(r),null!==e&&!e.includes(t)){t=void 0;break}}for(const r of this._modified.keys())(null===e||e.includes(r))&&(void 0===t||r<t)&&(t=r);return t}async count(e=null){return(await this.keys(e)).size}index(e){return this._indices.get(e)}close(){return this.abort()}transaction(e=!0){if(this._state!==O.STATE.OPEN&&this._state!==O.STATE.NESTED)throw new Error("Transaction already closed");const t=new O(this._objectStore,this,this,e);return this._nested.add(t),this._state=O.STATE.NESTED,t}synchronousTransaction(e=!0){if(this._state!==O.STATE.OPEN&&this._state!==O.STATE.NESTED)throw new Error("Transaction already closed");const t=new P(this._objectStore,this,this,e);return this._nested.add(t),this._state=O.STATE.NESTED,t}isSynchronous(){return!1}snapshot(){if(this.state!==O.STATE.COMMITTED){const e=this._managingBackend.snapshot();return e.inherit(this),e}return this._snapshotManager.createSnapshot(this._objectStore,this)}toString(){return`Transaction{id=${this._id}, changes=±${this._modified.size+this._removed.size}, truncated=${this._truncated}, objectStore=${this._objectStore}, state=${this._state}, dependency=${this._dependency}}`}toStringShort(){return`Transaction{id=${this._id}, changes=±${this._modified.size+this._removed.size}, truncated=${this._truncated}, state=${this._state}, dependency=${this._dependency}}`}async commit(e){return void 0!==e?this._isCommittable(e)?(await this._commitInternal(e),!0):(await this.abort(e),!1):null!==this._dependency?this._dependency.commit():(await this._checkConstraints(),this._commitBackend())}async abort(e){if(void 0!==e){if(e instanceof x)return this._snapshotManager.abortSnapshot(e);if(!this._nested.has(e)||e.state!==O.STATE.OPEN)throw new Error("Can only abort open, nested transactions");return this._nested.delete(e),0===this._nested.size&&(this._state=O.STATE.OPEN,this._nestedCommitted=!1),!0}return null!==this._dependency?this._dependency.abort():this._abortBackend()}async _apply(e){if(!(e instanceof O))throw new Error("Can only apply transactions");await this._snapshotManager.applyTx(e,this),this._applySync(e)}async _commitBackend(){if(this._state!==O.STATE.OPEN)throw new Error("Transaction already closed or in nested state");this._enableWatchdog&&clearTimeout(this._watchdog);const e=Date.now();return await this._managingBackend.commit(this)?(this._state=O.STATE.COMMITTED,this._performanceCheck(e,"commit"),this._performanceCheck(),!0):(this._state=O.STATE.CONFLICTED,this._performanceCheck(e,"commit"),this._performanceCheck(),!1)}_performanceCheck(e=this._startTime,t=null){const r=Date.now()-e;t=t?` function '${t}'`:"",r>O.WATCHDOG_TIMER&&A.w(O,`Violation: tx id ${this._id}${t} took ${(r/1e3).toFixed(2)}s (${this.toString()}).`)}_isCommittable(e){if(void 0!==e){if(!this._nested.has(e)||e.state!==O.STATE.OPEN)throw new Error("Can only commit open, nested transactions");return!this._nestedCommitted}return this._managingBackend._isCommittable(this)}async _commitInternal(e){this._nested.delete(e),this._nestedCommitted=!0,await this._apply(e),0===this._nested.size&&(this._state=O.STATE.OPEN,this._nestedCommitted=!1)}_setParent(e){this._parent=e}async _abortBackend(){if(this._state===O.STATE.ABORTED||this._state===O.STATE.CONFLICTED)return!0;if(this._state!==O.STATE.OPEN&&this._state!==O.STATE.NESTED)throw new Error("Transaction already closed");this._state===O.STATE.NESTED&&await Promise.all(Array.from(this._nested).map(e=>e.abort())),this._enableWatchdog&&clearTimeout(this._watchdog);const e=Date.now();return await this._managingBackend.abort(this),this._setAborted(),this._performanceCheck(e,"abort"),this._performanceCheck(),!0}_setAborted(){this._state=O.STATE.ABORTED}_put(e,t){this._removed.delete(e);const r=this._modified.get(e);this._modified.set(e,t);for(const n of this._indices.values())n.put(e,t,r)}_remove(e){this._removed.add(e);const t=this._modified.get(e);this._modified.delete(e);for(const r of this._indices.values())r.remove(e,t)}async _checkConstraints(){const e=[];for(const t of this._indices.values())if(t.unique)for(const[r,n]of this._modified)e.push(t.checkUniqueConstraint(r,n));if(e.length>0)try{await Promise.all(e)}catch(e){throw await this.abort(),e}}decode(e,t){return this._objectStore.decode(e,t)}encode(e){return this._objectStore.encode(e)}}O.WATCHDOG_TIMER=5e3,O.STATE={OPEN:0,COMMITTED:1,ABORTED:2,CONFLICTED:3,NESTED:4},O._instanceCount=0,r.register(O);class P extends O{constructor(e,t,r,n=!0){super(e,t,r,n),this._cache=new Map}preload(e){return e=e.filter(e=>!this.isCached(e)),Promise.all(e.map(e=>this.get(e)))}isCached(e){return this._cache.has(e)||!!this._parent.isSynchronous()&&this._parent.isCached(e)}async get(e,t={}){let r;return t.expectPresence=!1,this.isCached(e)?r=this.getSync(e,t):(r=await O.prototype.get.call(this,e,t),t&&t.raw?this._cache.set(e,this.decode(r,e)):this._cache.set(e,r)),r}_getCached(e,t={}){const{expectPresence:r=!0}=t||{};let n=this._cache.get(e);if(!n&&this._parent.isSynchronous())return this._parent.getSync(e,t);if(r&&!n)throw new Error(`Missing key in cache: ${e}`);return t&&t.raw&&(n=this.encode(n)),n}getSync(e,t={}){return this._removed.has(e)?void 0:this._modified.has(e)?t&&t.raw?this.encode(this._modified.get(e)):this._modified.get(e):this._truncated?void 0:this._getCached(e,t)}isSynchronous(){return!0}}r.register(P);class x extends O{constructor(e,t){super(e,t,e,!1)}inherit(e){if(!(e instanceof O))throw new Error("Can only inherit transactions");return super._applySync(e)}async _apply(e){if(!(e instanceof O))throw new Error("Can only apply transactions");e._truncated&&await this.valueStream((e,t)=>(this._modified.has(t)||this._put(t,e),!0));for(const[t,r]of e._modified){if(this._modified.has(t))continue;let e=await this.get(t);e?this._put(t,e,r):this._remove(t,r)}for(const t of e._removed){if(this._modified.has(t))continue;let e=await this.get(t);this._put(t,e)}}async truncate(){throw new Error("Unsupported operation on snapshots: truncate")}truncateSync(){throw new Error("Unsupported operation on snapshots: truncateSync")}async commit(e){throw new Error("Cannot commit snapshots: commit")}_isCommittable(e){return!1}async _commitInternal(e){throw new Error("Cannot commit snapshots")}async _commitBackend(){throw new Error("Cannot commit snapshots")}abort(e){return this._abortBackend()}async _abortBackend(){if(this._state!==O.STATE.OPEN)throw new Error("Snapshot already closed");if(!await this._managingBackend.abort(this))return!1;this._state=O.STATE.ABORTED,this._truncated=!0,this._modified.clear(),this._removed.clear();for(const e of this._indices.values())e.truncate();return!0}async put(e,t){throw new Error("Unsupported operation on snapshots: put")}putSync(e,t){throw new Error("Unsupported operation on snapshots: putSync")}async remove(e){throw new Error("Unsupported operation on snapshots: remove")}removeSync(e){throw new Error("Unsupported operation on snapshots: removeSync")}close(){return this.abort()}transaction(){throw new Error("Unsupported operation on snapshots: transaction")}synchronousTransaction(){throw new Error("Unsupported operation on snapshots: synchronousTransaction")}snapshot(){throw new Error("Unsupported operation on snapshots: snapshot")}}r.register(x);class L{constructor(){this._snapshots=new Set}createSnapshot(e,t){const r=new x(e,t);return this._snapshots.add(r),r}abortSnapshot(e){return this._snapshots.delete(e)}async applyTx(e,t){if(!(e instanceof O))throw new Error("Can only apply transactions");const r=[];for(const t of this._snapshots)r.push(t._apply(e));for(const r of e._snapshotManager)r._backend=t,this._snapshots.add(r);return Promise.all(r)}[Symbol.iterator](){return this._snapshots.values()}}r.register(L);class D{constructor(...e){if(!this.isConsistent(e))throw new Error("Given set of transactions violates rules for combined transactions");this._transactions=e,this._flushable=new Map,this._preprocessing=[],this._dependency=this}get backend(){return this._jdb}get transactions(){return this._transactions}isConsistent(e){const t=new Set;this._jdb=null;for(const r of e){if(r.state!==O.STATE.OPEN)return!1;if(r.nested)return!1;if(t.has(r._objectStore))return!1;if(null===this._jdb)this._jdb=r._objectStore.jungleDB;else if(this._jdb!==r._objectStore.jungleDB&&null!==r._objectStore.jungleDB)return!1;t.add(r._objectStore)}return!0}async onFlushable(e,t=null,r=null){if(this._flushable.set(e,t),null!==r&&this._preprocessing.push(r),this._transactions.every(e=>this._flushable.has(e))){const e=[];for(const t of this._preprocessing)e.push(t());await Promise.all(e),await o.commitCombined(this);for(const e of this._flushable.values())e();return!0}return!1}async commit(){return this._isCommittable()?(await this._checkConstraints(),await this._commitBackend(),!0):(await this.abort(),!1)}abort(){return this._abortBackend()}async _abortBackend(){return(await Promise.all(this._transactions.map(e=>e._abortBackend()))).every(e=>e)}transaction(e){throw new Error("Unsupported operation")}snapshot(){throw new Error("Unsupported operation")}_isCommittable(){return this._transactions.every(e=>e._isCommittable())}async _checkConstraints(){try{await Promise.all(this._transactions.map(e=>e._checkConstraints()))}catch(e){throw await this.abort(),e}}async _commitBackend(){return(await Promise.all(this._transactions.map(e=>e._commitBackend()))).every(e=>e)}async _commitInternal(e){throw new Error("Cannot commit transactions to a combined transaction")}_setParent(e){throw new Error("Unsupported operation")}set _dependency(e){for(const t of this._transactions)t._dependency=e}get dependency(){return this}get objectStore(){throw new Error("Unsupported operation")}toString(){return`CombinedTransaction{size=${this._transactions.length}, states=[${this._transactions.map(e=>e.state)}]}`}}r.register(D),t._loaded=!0,"function"==typeof t._onload&&t._onload()}(s);var o={},a=o;if(a._currentScript||(a._currentScript=document.currentScript),!a._currentScript){const e=document.getElementsByTagName("script");a._currentScript=e[e.length-1]}a._path||(a._currentScript&&-1!==a._currentScript.src.indexOf("/")?a._path=a._currentScript.src.substring(0,a._currentScript.src.lastIndexOf("/")+1):a._path="./");class c{static get scope(){return void 0!==o?o:"undefined"!=typeof self?self:window}static register(e){void 0!==o&&(o[e.name]=e)}}c.register(c);class u{constructor(){this._global_level=h.INFO,this._tag_levels={};try{if(window.localStorage)try{let e=window.localStorage.getItem("log_tag_levels");e&&"string"==typeof e&&(e=JSON.parse(e)),e&&"object"==typeof e&&(this._tag_levels=e)}catch(e){console.warn("Failed to load log configuration from local storage.")}}catch(e){}}isLoggable(e,t){return e&&this._tag_levels[e]?this._tag_levels[e]<=t:this._tag_levels["*"]?this._tag_levels["*"]<=t:this._global_level<=t}setLoggable(e,t){e&&e.name&&(e=e.name),this._tag_levels[e]=t,window.localStorage&&window.localStorage.setItem("log_tag_levels",JSON.stringify(this._tag_levels))}msg(e,t,r){t&&t.name&&(t=t.name),this.isLoggable(t,e)&&(t&&r.unshift(t+":"),r.unshift(`[${h.Level.toStringTag(e)} ${(new Date).toTimeString().substr(0,8)}]`),console.error&&e>=h.ERROR?console.error.apply(console,r):console.warn&&e>=h.WARNING?console.warn.apply(console,r):console.info&&e>=h.INFO?console.info.apply(console,r):console.debug&&e>=h.DEBUG?console.debug.apply(console,r):console.trace&&e<=h.TRACE?console.trace.apply(console,r):console.log.apply(console,r))}}c.register(u);class h{static get instance(){return h._instance||(h._instance=new h(new u)),h._instance}constructor(e){this._native=e}setLoggable(e,t){this._native.setLoggable(e,h.Level.get(t))}get level(){return this._native._global_level}set level(e){this._native._global_level=h.Level.get(e)}msg(e,t,r){if(this._native.isLoggable(t,e)){for(let e=0;e<r.length;++e)"function"==typeof r[e]&&(r[e]=r[e]()),"object"==typeof r[e]&&("function"==typeof r[e].toString?r[e]=r[e].toString():r[e].constructor&&r[e].constructor.name?r[e]=`{Object: ${r[e].constructor.name}}`:r[e]="{Object}");this._native.msg(e,t,r)}}static d(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),h.instance.msg(h.DEBUG,e,r)}static e(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),h.instance.msg(h.ERROR,e,r)}static i(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),h.instance.msg(h.INFO,e,r)}static v(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),h.instance.msg(h.VERBOSE,e,r)}static w(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),h.instance.msg(h.WARNING,e,r)}static t(e,t,...r){arguments.length>=2?(e=arguments[0],r=Array.prototype.slice.call(arguments,1)):(e=void 0,r=Array.prototype.slice.call(arguments,0)),h.instance.msg(h.TRACE,e,r)}}h.Level={TRACE:1,VERBOSE:2,DEBUG:3,INFO:4,WARNING:5,ERROR:6,ASSERT:7,toStringTag:function(e){switch(e){case h.Level.TRACE:return"T";case h.Level.VERBOSE:return"V";case h.Level.DEBUG:return"D";case h.Level.INFO:return"I";case h.Level.WARNING:return"W";case h.Level.ERROR:return"E";case h.Level.ASSERT:return"A";default:return"*"}},toString:function(e){switch(e){case h.Level.TRACE:return"trace";case h.Level.VERBOSE:return"verbose";case h.Level.DEBUG:return"debug";case h.Level.INFO:return"info";case h.Level.WARNING:return"warn";case h.Level.ERROR:return"error";case h.Level.ASSERT:return"assert";default:return"unknown"}},get:function(e){if("number"==typeof e)return e;if(!isNaN(parseInt(e)))return parseInt(e);switch(e.toLowerCase()){case"t":case"trace":return h.Level.TRACE;case"v":case"verbose":return h.Level.VERBOSE;case"d":case"debug":return h.Level.DEBUG;case"i":case"info":return h.Level.INFO;case"w":case"warn":case"warning":return h.Level.WARNING;case"e":case"error":case"exception":return h.Level.ERROR;case"a":case"assert":case"assertion":return h.Level.ASSERT}return 0}},h.TRACE=h.Level.TRACE,h.VERBOSE=h.Level.VERBOSE,h.DEBUG=h.Level.DEBUG,h.INFO=h.Level.INFO,h.WARNING=h.Level.WARNING,h.ERROR=h.Level.ERROR,h.ASSERT=h.Level.ASSERT,h._instance=null,h.d.tag=e=>h.d.bind(null,e),h.e.tag=e=>h.e.bind(null,e),h.i.tag=e=>h.i.bind(null,e),h.v.tag=e=>h.v.bind(null,e),h.w.tag=e=>h.w.bind(null,e),h.t.tag=e=>h.t.bind(null,e),c.register(h);class l{static get WILDCARD(){return"*"}constructor(){this._listeners=new Map}_offAll(){this._listeners.clear()}on(e,t){return this._listeners.has(e)?this._listeners.get(e).push(t)-1:(this._listeners.set(e,[t]),0)}off(e,t){this._listeners.has(e)&&this._listeners.get(e)[t]&&delete this._listeners.get(e)[t]}fire(e,...t){const r=[];if(this._listeners.has(e)){const n=this._listeners.get(e);for(const e in n){if(!n.hasOwnProperty(e))continue;const i=n[e].apply(null,t);i instanceof Promise&&r.push(i)}}if(this._listeners.has(l.WILDCARD)){const e=this._listeners.get(l.WILDCARD);for(const t in e){if(!e.hasOwnProperty(t))continue;const n=e[t].apply(null,arguments);n instanceof Promise&&r.push(n)}}return r.length>0?Promise.all(r):null}bubble(e,...t){for(const r of t){let t;t=r===l.WILDCARD?function(){this.fire.apply(this,arguments)}:function(){this.fire.apply(this,[r,...arguments])},e.on(r,t.bind(this))}}}c.register(l);class f extends l{constructor(){super(),this._buffer=null,this._currentMessageLength=0,this._msgType=0,this._receivingTag=-1,this._sendingTag=0,this._expectedMessagesByType=new Map,this._timers=new v,this._lastChunkReceivedAt=0,this._closed=!1}isExpectingMessage(e){return this._expectedMessagesByType.has(e)}confirmExpectedMessage(e,t){const r=this._expectedMessagesByType.get(e);if(r){this._timers.clearTimeout(`chunk-${r.id}`),this._timers.clearTimeout(`msg-${r.id}`);for(const e of r.types)this._expectedMessagesByType.delete(e);t||r.timeoutCallback()}}expectMessage(e,t,r=f.MESSAGE_TIMEOUT,n=f.CHUNK_TIMEOUT){if(Array.isArray(e)||(e=[e]),0===e.length)return;const i=new d(e,t,r,n);for(const t of e)this._expectedMessagesByType.set(t,i);this._timers.resetTimeout(`chunk-${i.id}`,this._onTimeout.bind(this,i),n),this._timers.resetTimeout(`msg-${i.id}`,this._onTimeout.bind(this,i),r)}close(){this._closed||(this._closed=!0,this._timers.clearAll(),this._close(),this.fire("close",this),this._offAll())}_close(){throw new Error("Not implemented")}_error(e){this.fire("error",e,this),h.e(f,e),this.close()}_onMessage(e){try{if(this.readyState!==f.ReadyState.OPEN)return;const t=new j(e);if(0===t.byteLength)return;if(t.byteLength>f.CHUNK_SIZE_MAX)return void this._error("Received chunk larger than maximum chunk size, discarding");const r=t.readUint8(),n=t.byteLength-t.readPos,i=t.read(n);if(null===this._buffer&&r===(this._receivingTag+1)%ee.UINT8_MAX){const e=new j(i),t=Ut.peekLength(e);if(t>f.MESSAGE_SIZE_MAX)return void this._error(`Received message with excessive message size ${t} > ${f.MESSAGE_SIZE_MAX}`);this._buffer=new j(Math.min(t,f.CHUNK_SIZE_MAX)),this._currentMessageLength=t,this._receivingTag=r,this._msgType=Ut.peekType(e)}if(null===this._buffer)return void h.e(f,`Message does not start with next tag ${this._receivingTag+1} (got ${r} instead), but buffer is null`);if(r!==this._receivingTag)return void this._error(`Received message with wrong message tag ${r}, expected ${this._receivingTag}`);let s=this._currentMessageLength-this._buffer.writePos;if(n>s)return void this._error("Received chunk larger than remaining bytes to read, discarding");if(t.byteLength!==f.CHUNK_SIZE_MAX&&n!==s)return void this._error("Received chunk that is neither max chunk size nor the final chunk");if(this._buffer.byteLength<this._buffer.writePos+n){const e=new j(Math.min(2*this._buffer.byteLength,this._currentMessageLength));e.set(this._buffer),e.writePos=this._buffer.writePos,this._buffer=e}this._buffer.write(i),s-=n,this._lastChunkReceivedAt=Date.now();const o=this._expectedMessagesByType.get(this._msgType);if(0===s){const e=this._buffer.buffer;this._buffer=null,this._currentMessageLength=0,this._timers.clearTimeout("next-chunk"),this.fire("message",e,this)}else o?this._timers.resetTimeout(`chunk-${o.id}`,this._onTimeout.bind(this,o),o.chunkTimeout):this._timers.resetTimeout("next-chunk",this._onTimeout.bind(this),f.CHUNK_TIMEOUT),this.fire("chunk",this._buffer)}catch(e){this._error(`Error occurred while parsing incoming message: ${e.message||e}`)}}_onTimeout(e){if(e){this._timers.clearTimeout(`chunk-${e.id}`),this._timers.clearTimeout(`msg-${e.id}`);for(const t of e.types)this._expectedMessagesByType.delete(t);e.timeoutCallback()}else h.w(f,"DataChannel receive timeout");this._buffer=null}send(e){F.that(e.byteLength<=f.MESSAGE_SIZE_MAX,"DataChannel.send() max message size exceeded");const t=this._sendingTag;this._sendingTag=(this._sendingTag+1)%ee.UINT8_MAX,this._sendChunked(e,t)}_sendChunked(e,t){let r=e.byteLength,n=null;for(;r>0;){let i=null;r+1>=f.CHUNK_SIZE_MAX?((i=new j(f.CHUNK_SIZE_MAX)).writeUint8(t),n=new Uint8Array(e.buffer,e.byteLength-r,f.CHUNK_SIZE_MAX-1)):((i=new j(r+1)).writeUint8(t),n=new Uint8Array(e.buffer,e.byteLength-r,r)),i.write(n),this.sendChunk(i),r-=n.byteLength}}sendChunk(e){throw new Error("Not implemented")}get readyState(){throw new Error("Not implemented")}get lastMessageReceivedAt(){return this._lastChunkReceivedAt}}f.CHUNK_SIZE_MAX=16384,f.MESSAGE_SIZE_MAX=10485760,f.CHUNK_TIMEOUT=5e3,f.MESSAGE_TIMEOUT=f.MESSAGE_SIZE_MAX/f.CHUNK_SIZE_MAX*f.CHUNK_TIMEOUT,c.register(f);class d{constructor(e,t,r=f.MESSAGE_TIMEOUT,n=f.CHUNK_TIMEOUT){this.id=e.join(":"),this.types=e,this.timeoutCallback=t,this.msgTimeout=r,this.chunkTimeout=n}}f.ReadyState={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3,fromString:function(e){switch(e){case"connecting":return f.ReadyState.CONNECTING;case"open":return f.ReadyState.OPEN;case"closing":return f.ReadyState.CLOSING;case"closed":return f.ReadyState.CLOSED;default:throw new Error("Invalid string")}}};class p{static get instance(){if(!p._instance){const e={};e.getRandomValues=(window.crypto||window.msCrypto).getRandomValues.bind(window.crypto),p._instance=e}return p._instance}}p._instance=null,c.register(p);class A{static newPeerConnection(e){return new RTCPeerConnection(e)}static newSessionDescription(e){return new RTCSessionDescription(e)}static newIceCandidate(e){return new RTCIceCandidate(e)}}c.register(A);class g{static newWebSocketServer(){return new l}static newWebSocket(e){return new WebSocket(e)}}c.register(g);class y{static get(e,t=5e3,r=-1){return new Promise((r,n)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="text",i.timeout=t,i.onload=()=>{i.readyState===XMLHttpRequest.DONE&&200===i.status?r(i.responseText):n(new Error(`Request failed (status ${i.status})`))},i.onerror=n,i.onabort=n,i.ontimeout=n,i.send(),setTimeout(()=>i.abort(),t)})}}c.register(y);class m{static isBrowser(){return!0}static isWeb(){return"undefined"!=typeof window}static isNodeJs(){return!1}static supportsWebRTC(){const e=m.isBrowser()?window.RTCPeerConnection||window.webkitRTCPeerConnection:null;return!!e&&"function"==typeof e.prototype.createDataChannel}static supportsWS(){return location&&"http:"===location.protocol}static isOnline(){return!("onLine"in window.navigator)||window.navigator.onLine}static isWindows(){return/^win/.test(window.navigator.platform)}static get userAgentString(){try{return window.navigator.platform}catch(e){return"unknown"}}static get hardwareConcurrency(){return"object"==typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:1}}c.register(m);class _{static async doImport(){return _.doImportBrowser()}static async doImportBrowser(){_._importBrowserPromise=_._importBrowserPromise||(async()=>{await _.importWasmBrowser("worker-wasm.wasm")?await _.importScriptBrowser("worker-wasm.js"):await _.importScriptBrowser("worker-js.js")})();try{await _._importBrowserPromise}catch(e){throw _._importBrowserPromise=null,e}}static async importWasm(e,t="Module"){return _.importWasmBrowser(e,t)}static async importWasmBrowser(e,t="Module"){return e=_._adjustWasmPath(e),_._global.WebAssembly?new Promise(r=>{try{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){_._global[t]=_._global[t]||{},_._global[t].wasmBinary=n.response,r(!0)},n.onerror=function(){h.w(_,`Failed to access WebAssembly module ${e}`),r(!1)},n.send(null)}catch(t){h.w(_,`Failed to access WebAssembly module ${e}`),r(!1)}}):(h.w(_,"No support for WebAssembly available."),Promise.resolve(!1))}static async importScript(e,t="Module"){return _.importScriptBrowser(e,t)}static async importScriptBrowser(e,t="Module"){if(t&&_._global[t]&&_._global[t].asm)return!1;e=_._adjustScriptPath(e);const n=_._global[t]||{};return new Promise(async(i,s)=>{const o=new Promise(e=>{n.onRuntimeInitialized=()=>e(!0)});"function"==typeof importScripts?(await new Promise(r=>{_._moduleLoadedCallbacks[t]=r,importScripts(e)}),_._global[t]=_._global[t](n)):"object"==typeof window?(await new Promise(r=>{_._moduleLoadedCallbacks[t]=r,_._loadBrowserScript(e)}),_._global[t]=_._global[t](n)):_._global[t]=r(1246)(e)(n),await o,n.asm&&!_._global[t].asm&&(_._global[t]=n),i(!0)})}static fireModuleLoaded(e="Module"){"function"==typeof _._moduleLoadedCallbacks[e]&&(_._moduleLoadedCallbacks[e](),_._moduleLoadedCallbacks[e]=null)}static _loadBrowserScript(e){const t=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src=e,t.appendChild(r)}static _adjustWasmPath(e){return void 0!==a&&a._path&&(e=`${a._path}${e}`),-1===e.indexOf("/")&&(e=`${n}/${e}`),e}static _adjustScriptPath(e){return void 0!==a&&a._path&&(e=`${a._path}${e}`),-1===e.indexOf("/")&&(e=`${n}/${e}`),e}static get _global(){return void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:null}}_._moduleLoadedCallbacks={},c.register(_);class b{constructor(){this._originalValues=new Map}static get instance(){return b._instance||(b._instance=new b),b._instance}isConstant(e){if(e.indexOf(".")<1)return!1;const t=e.split(".",2)[0];return!(e=e.split(".",2)[1]).startsWith("_")&&e.toUpperCase()===e&&t in c.scope&&!!c.scope[t]&&!!c.scope[t].hasOwnProperty&&!!c.scope[t].hasOwnProperty(e)&&!!Object.keys(c.scope[t]).includes(e)&&"number"==typeof c.scope[t][e]}_ensureIsConstant(e){if(!this.isConstant(e))throw new Error(`${e} is not a numerical constant.`)}get(e){this._ensureIsConstant(e);const t=e.split(".",2)[0];return e=e.split(".",2)[1],c.scope[t][e]}set(e,t){this._ensureIsConstant(e),this._originalValues.has(e)||this._originalValues.set(e,this.get(e));const r=e.split(".",2)[0];e=e.split(".",2)[1],c.scope[r][e]=t}reset(e){this._ensureIsConstant(e),this._originalValues.has(e)&&(this.set(e,this._originalValues.get(e)),this._originalValues.delete(e))}resetAll(){for(const e of this._originalValues.keys())this.set(e,this._originalValues.get(e));this._originalValues.clear()}}c.register(b);class w{constructor(e=w.NONE,t=w.NONE){this._provided=e,this._accepted=t}get provided(){return this._provided}get accepted(){return this._accepted}set provided(e){this._provided=e}set accepted(e){this._accepted=e}static isFullNode(e){return 0!=(e&w.FLAG_FULL)}static isLightNode(e){return 0!=(e&w.FLAG_LIGHT)}static isNanoNode(e){return e===w.FLAG_NANO}static providesServices(e,...t){e=w.legacyProvideToCurrent(e);const r=t.reduce((e,t)=>e|t)&w.ALL_CURRENT;return(e&r)===r}static legacyProvideToCurrent(e){return e===w.FLAG_NANO&&(e=w.PROVIDES_NANO),e===w.FLAG_LIGHT&&(e=w.PROVIDES_LIGHT),e===w.FLAG_FULL&&(e=w.PROVIDES_FULL),e}static toNameArray(e){const t=[];let r=1;do{e%r===r&&w.NAMES[r]&&t.push(w.NAMES[r]),r<<=1}while(r<w.ALL_CURRENT);return t}}w.NONE=0,w.FLAG_NANO=1,w.FLAG_LIGHT=2,w.FLAG_FULL=4,w.ALL_LEGACY=7,w.FULL_BLOCKS=8,w.BLOCK_HISTORY=16,w.BLOCK_PROOF=32,w.CHAIN_PROOF=64,w.ACCOUNTS_PROOF=128,w.ACCOUNTS_CHUNKS=256,w.MEMPOOL=512,w.TRANSACTION_INDEX=1024,w.BODY_PROOF=2048,w.ALL_CURRENT=4095-w.ALL_LEGACY,w.NAMES={},w.NAMES[w.FULL_BLOCKS]="FULL_BLOCKS",w.NAMES[w.BLOCK_HISTORY]="BLOCK_HISTORY",w.NAMES[w.BLOCK_PROOF]="BLOCK_PROOF",w.NAMES[w.CHAIN_PROOF]="CHAIN_PROOF",w.NAMES[w.ACCOUNTS_PROOF]="ACCOUNTS_PROOF",w.NAMES[w.ACCOUNTS_CHUNKS]="ACCOUNTS_CHUNKS",w.NAMES[w.MEMPOOL]="MEMPOOL",w.NAMES[w.TRANSACTION_INDEX]="TRANSACTION_INDEX",w.NAMES[w.BODY_PROOF]="BODY_PROOF",w.PROVIDES_FULL=w.FLAG_FULL|w.ALL_CURRENT,w.PROVIDES_LIGHT=w.FLAG_LIGHT|w.FULL_BLOCKS|w.BLOCK_PROOF|w.CHAIN_PROOF|w.ACCOUNTS_PROOF|w.ACCOUNTS_CHUNKS|w.MEMPOOL|w.BODY_PROOF,w.PROVIDES_NANO=w.FLAG_NANO|w.CHAIN_PROOF,w.PROVIDES_PICO=w.NONE,w.ACCEPTS_FULL=w.FLAG_FULL|w.FULL_BLOCKS|w.BLOCK_HISTORY,w.ACCEPTS_LIGHT=w.FLAG_LIGHT|w.FLAG_FULL|w.FULL_BLOCKS|w.CHAIN_PROOF|w.ACCOUNTS_CHUNKS,w.ACCEPTS_NANO=w.FLAG_NANO|w.FLAG_LIGHT|w.FLAG_FULL|w.CHAIN_PROOF,w.ACCEPTS_PICO=w.FLAG_NANO|w.FLAG_LIGHT|w.FLAG_FULL,w.ACCEPTS_SPV=w.BLOCK_PROOF|w.ACCOUNTS_PROOF|w.MEMPOOL|w.TRANSACTION_INDEX|w.BODY_PROOF,c.register(w);class v{constructor(){this._timeouts=Object.create(null),this._intervals=Object.create(null)}setTimeout(e,t,r){if(this._timeouts[e])throw new Error(`Duplicate timeout for key ${e}`);this._timeouts[e]=setTimeout(t,r)}clearTimeout(e){clearTimeout(this._timeouts[e]),delete this._timeouts[e]}resetTimeout(e,t,r){clearTimeout(this._timeouts[e]),this._timeouts[e]=setTimeout(t,r)}timeoutExists(e){return void 0!==this._timeouts[e]}setInterval(e,t,r){if(this._intervals[e])throw new Error(`Duplicate interval for key ${e}`);this._intervals[e]=setInterval(t,r)}clearInterval(e){clearInterval(this._intervals[e]),delete this._intervals[e]}resetInterval(e,t,r){clearInterval(this._intervals[e]),this._intervals[e]=setInterval(t,r)}intervalExists(e){return void 0!==this._intervals[e]}clearAll(){for(const e in this._timeouts)this.clearTimeout(e);for(const e in this._intervals)this.clearInterval(e)}}c.register(v);class E{static isCompatible(e){return e>=1}static createUserAgent(e){(e=e?e.trim():"").length>0&&(e=` ${e}`);const t=m.isBrowser()?"browser; ":m.isNodeJs()?"nodejs; ":"";return`core-js/${E.CORE_JS_VERSION} (${t}${m.userAgentString})${e}`}}E.CODE=2,E.CORE_JS_VERSION="<filled-by-build-system>",c.register(E),E.CORE_JS_VERSION="1.5.3";class S{constructor(e=0){this._offset=e}get offset(){return this._offset}set offset(e){this._offset=e}now(){return Date.now()+this._offset}}c.register(S);class C{static webYield(){return m.isWeb()?C.yield():Promise.resolve()}static yield(){return new Promise(e=>setTimeout(e))}}c.register(C);class k{static alternate(...e){const t=e.length;let r=0,n=!1;const i=()=>{if(!n)for(let n=0;n<t;n++){const n=e[r].next();if(r=(r+1)%t,!n.done)return n}return n=!0,{done:!0}};return{next:i,[Symbol.iterator]:()=>({next:i})}}}c.register(k);class I{static randomElement(e){return e[Math.floor(Math.random()*e.length)]}static subarray(e,t,r){function n(e,t,r){return e<t?t:e>r?r:e}void 0===t&&(t=0),void 0===r&&(r=e.byteLength),t=n(t,0,e.byteLength);let i=(r=n(r,0,e.byteLength))-t;return i<0&&(i=0),new Uint8Array(e.buffer,e.byteOffset+t,i)}static*k_combinations(e,t){const r=e.length;if(t>r)return;const n=Array.from(new Array(t),(e,t)=>t);yield n.map(t=>e[t]);const i=Array.from(new Array(t),(e,r)=>t-r-1);for(;;){let s=t-1,o=!1;for(s of i)if(n[s]!==s+r-t){o=!0;break}if(!o)return;n[s]+=1;for(const e of Array.from(new Array(t-s-1),(e,t)=>s+t+1))n[e]=n[e-1]+1;yield n.map(t=>e[t])}}}c.register(I);class T{constructor(e=T._hash){this._map=new Map,this._fnHash=e}static _hash(e){return null==e?e:e.hashCode?e.hashCode():e.toString()}get(e){return this._map.get(this._fnHash(e))}put(e,t){this._map.set(this._fnHash(e),t)}remove(e){this._map.delete(this._fnHash(e))}clear(){this._map.clear()}contains(e){return this._map.has(this._fnHash(e))}keys(){return Array.from(this._map.keys())}keyIterator(){return this._map.keys()}values(){return Array.from(this._map.values())}valueIterator(){return this._map.values()}entries(){return Array.from(this._map.entries())}entryIterator(){return this._map.entries()}get length(){return this._map.size}isEmpty(){return 0===this._map.size}}c.register(T);class R{constructor(e=R._hash){this._map=new Map,this._fnHash=e}static _hash(e){return null==e?e:e.hashCode?e.hashCode():e.toString()}add(e){this._map.set(this._fnHash(e),e)}addAll(e){for(const t of e)this.add(t)}get(e){return this._map.get(this._fnHash(e))}remove(e){this._map.delete(this._fnHash(e))}removeAll(e){for(const t of e)this.remove(t)}clear(){this._map.clear()}contains(e){return this._map.has(this._fnHash(e))}values(){return Array.from(this._map.values())}valueIterator(){return this._map.values()}[Symbol.iterator](){return this.valueIterator()}get length(){return this._map.size}isEmpty(){return 0===this._map.size}}c.register(R);class N{constructor(e,t=N._hash){if(e<=0)throw new Error("Invalid limit");this._limit=e,this._fnHash=t,this._list=new L(t)}static _hash(e){return null==e?e:e.hashCode?e.hashCode():e.toString()}add(e){this._list.push(e,!0),this._list.length>this._limit&&this._list.shift()}addAll(e){for(const t of e)this.add(t)}get(e){return this._list.get(e)}remove(e){this._list.remove(e)}removeAll(e){for(const t of e)this.remove(t)}clear(){this._list.clear()}contains(e){return this._list.contains(e)}values(){return Array.from(this._list.iterator())}valueIterator(){return this._list.iterator()}[Symbol.iterator](){return this.valueIterator()}get length(){return this._list.length}isEmpty(){return 0===this._list.length}}c.register(N);class B{constructor(e=B._hash){this._set=new Set,this._fnHash=e}static _hash(e){return null==e?e:e.hashCode?e.hashCode():e.toString()}add(e){this._set.add(this._fnHash(e))}addAll(e){for(const t of e)this.add(t)}remove(e){this._set.delete(this._fnHash(e))}removeAll(e){for(const t of e)this.remove(t)}clear(){this._set.clear()}contains(e){return this._set.has(this._fnHash(e))}values(){return Array.from(this._set.values())}valueIterator(){return this._set.values()}[Symbol.iterator](){return this.valueIterator()}get length(){return this._set.size}isEmpty(){return 0===this._set.size}_addHashed(e){this._set.add(e)}clone(){const e=new B(this._fnHash);for(const t of this)e._addHashed(t);return e}}c.register(B);class O{constructor(e,t=O._hash){if(e<=0)throw new Error("Invalid limit");this._limit=e,this._fnHash=t,this._list=new L(e=>e)}static _hash(e){return null==e?e:e.hashCode?e.hashCode():e.toString()}add(e){this.length>=this._limit&&this._list.shift(),this._list.push(this._fnHash(e))}addAll(e){for(const t of e)this.add(t)}remove(e){this._list.remove(this._fnHash(e))}removeAll(e){for(const t of e)this.remove(t)}clear(){this._list.clear()}contains(e){return this._list.contains(this._fnHash(e))}values(){return Array.from(this._list)}valueIterator(){return this._list.iterator()}[Symbol.iterator](){return this.valueIterator()}get length(){return this._list.length}isEmpty(){return 0===this._list.length}_addHashed(e){this._list.push(e)}clone(){const e=new O(this._limit,this._fnHash);for(const t of this)e._addHashed(t);return e}}c.register(O);class P{constructor(e,t){this._iterator=e[Symbol.iterator]?e[Symbol.iterator]():e,this._limit=t}[Symbol.iterator](){return P.iterator(this._iterator,this._limit)}static iterator(e,t){let r=0;return{next:()=>{const n=r++>=t,i=e.next();return{value:n?void 0:i.value,done:n||i.done}}}}}c.register(P);class x{constructor(...e){this._length=0,this._head=null,this._tail=null;const t=1===e.length&&Array.isArray(e[0])?e[0]:e;for(const e of t)this.push(e)}push(e){const t={next:null,prev:this._head,value:e};this._push(t)}_push(e){this._length++,this._head?(this._head.next=e,this._head=e):(this._head=e,this._tail=e)}unshift(e){const t={next:this._tail,prev:null,value:e};this._unshift(t)}_unshift(e){this._length++,this._head?(this._tail.prev=e,this._tail=e):(this._head=e,this._tail=e)}pop(){if(!this._head)return null;this._length--;const e=this._head,t=e.prev;return t?(t.next=null,this._head=t,e.value):(this._head=null,this._tail=null,e.value)}shift(){if(!this._head)return null;this._length--;const e=this._tail,t=e.next;return t?(t.prev=null,this._tail=t,e.value):(this._head=null,this._tail=null,e.value)}_remove(e){e===this._head?this.pop():e===this._tail?this.shift():(this._length--,e.prev.next=e.next,e.next.prev=e.prev)}clear(){this._length=0,this._head=null,this._tail=null}[Symbol.iterator](){return this.iterator()}*iterator(){let e=this._tail;for(;e;)yield e.value,e=e.next}isEmpty(){return 0===this._length}get first(){return this._tail?this._tail.value:null}get last(){return this._head?this._head.value:null}get length(){return this._length}}c.register(x);class L extends x{constructor(e){super(),this._map=new T(e)}push(e,t=!1){const r=this._map.get(e);r?(r.value=e,t&&this._moveBack(r)):super.push(e)}_push(e){super._push(e),this._map.put(e.value,e)}unshift(e){this._map.contains(e)||super.unshift(e)}_unshift(e){super._unshift(e),this._map.put(e.value,e)}pop(){const e=super.pop();return this._map.remove(e),e}shift(){const e=super.shift();return this._map.remove(e),e}clear(){super.clear(),this._map.clear()}get(e){const t=this._map.get(e);return t&&t.value}contains(e){return this._map.contains(e)}remove(e){const t=this._map.get(e);t&&(super._remove(t),this._map.remove(e))}moveBack(e){const t=this._map.get(e);t?this._moveBack(t):super.push(e)}_moveBack(e){e!==this._head&&(e===this._tail?(e.next.prev=null,this._tail=e.next):(e.prev.next=e.next,e.next.prev=e.prev),e.next=null,e.prev=this._head,this._head.next=e,this._head=e)}}c.register(L);class D{constructor(...e){this._queue=this._newQueue(...e)}_newQueue(...e){return new x(...e)}enqueue(e){this._queue.push(e)}enqueueAll(e){for(const t of e)this.enqueue(t)}dequeue(){return this._queue.shift()}dequeueMulti(e){e=Math.min(this._queue.length,e);const t=[];for(let r=0;r<e;r++)t.push(this.dequeue());return t}peek(){return this._queue.first}clear(){this._queue.clear()}isEmpty(){return this._queue.isEmpty()}get length(){return this._queue.length}}c.register(D);class M extends D{constructor(e){super(e)}_newQueue(...e){return new L(...e)}contains(e){return this._queue.contains(e)}remove(e){this._queue.remove(e)}requeue(e){this._queue.moveBack(e)}}c.register(M);class U extends M{constructor(e=Number.POSITIVE_INFINITY,t=e,r=1e3,n=Number.POSITIVE_INFINITY,i){super(),this._maxSize=n,this._maxAtOnce=e,this._availableNow=this._maxAtOnce,this._timers=new v,this._timers.setInterval("allowance",()=>{this._availableNow=Math.min(this._maxAtOnce,this._availableNow+t),"function"==typeof i&&this.isAvailable()&&i()},r)}stop(){this._timers.clearAll()}enqueue(e){this.length>=this._maxSize&&super.dequeue(),super.enqueue(e)}dequeue(){return this.available>0?(this._availableNow--,super.dequeue()):null}dequeueMulti(e){return e=Math.min(this.available,e),super.dequeueMulti(e)}isAvailable(){return this.available>0}get available(){return Math.min(this._availableNow,this.length)}}c.register(U);class K{constructor(e=[],t){this._list=e,this._compare=t||K._compare}static _compare(e,t){return e.compare?e.compare(t):e>t?1:e<t?-1:0}indexOf(e){let t=0,r=this._list.length-1,n=null,i=null;for(;t<=r;)if(n=Math.round((t+r)/2),i=this._list[n],this._compare(i,e)<0)t=n+1;else{if(!(this._compare(i,e)>0))return n;r=n-1}return-1}_insertionIndex(e){let t=0,r=this._list.length-1,n=null,i=null;for(;t<=r;)if(n=Math.round((t+r)/2),i=this._list[n],this._compare(i,e)<0)t=n+1;else{if(!(this._compare(i,e)>0))break;r=n-1}return t}add(e){this._list.splice(this._insertionIndex(e),0,e)}shift(){return this._list.shift()}pop(){return this._list.pop()}peekFirst(){return this._list[0]}peekLast(){return this._list[this._list.length-1]}remove(e){const t=this.indexOf(e);t>-1&&this._list.splice(t,1)}clear(){this._list=[]}values(){return this._list}[Symbol.iterator](){return this._list[Symbol.iterator]()}copy(){return new K(this._list.slice(),this._compare)}get length(){return this._list.length}}c.register(K);class F{static that(e,t="Assertion failed"){if(!e)throw new Error(t)}}c.register(F);class z{static toAscii(e){const t=z._toUint8View(e);let r="";for(let e=0;e<t.length;e+=8192)r+=String.fromCharCode.apply(null,t.subarray(e,e+8192));return r}static fromAscii(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}static _codePointTextDecoder(e){if("undefined"==typeof TextDecoder)throw new Error("TextDecoder not supported");if(null===z._ISO_8859_15_DECODER)throw new Error("TextDecoder does not support iso-8859-15");if(void 0===z._ISO_8859_15_DECODER)try{z._ISO_8859_15_DECODER=new TextDecoder("iso-8859-15")}catch(e){throw z._ISO_8859_15_DECODER=null,new Error("TextDecoder does not support iso-8859-15")}const t=z._toUint8View(e);return z._ISO_8859_15_DECODER.decode(t).replace("€","¤").replace("Š","¦").replace("š","¨").replace("Ž","´").replace("ž","¸").replace("Œ","¼").replace("œ","½").replace("Ÿ","¾")}static _tripletToBase64(e){return z._BASE64_LOOKUP[e>>18&63]+z._BASE64_LOOKUP[e>>12&63]+z._BASE64_LOOKUP[e>>6&63]+z._BASE64_LOOKUP[63&e]}static _base64encodeChunk(e,t,r){let n;const i=[];for(let s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(z._tripletToBase64(n));return i.join("")}static _base64fromByteArray(e){let t;const r=e.length,n=r%3;let i="";const s=[];for(let t=0,i=r-n;t<i;t+=16383)s.push(z._base64encodeChunk(e,t,t+16383>i?i:t+16383));return 1===n?(t=e[r-1],i+=z._BASE64_LOOKUP[t>>2],i+=z._BASE64_LOOKUP[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=z._BASE64_LOOKUP[t>>10],i+=z._BASE64_LOOKUP[t>>4&63],i+=z._BASE64_LOOKUP[t<<2&63],i+="="),s.push(i),s.join("")}static toBase64(t){if(m.isNodeJs())return e.from(t).toString("base64");if("undefined"!=typeof TextDecoder&&null!==z._ISO_8859_15_DECODER)try{return btoa(z._codePointTextDecoder(t))}catch(e){}return z._base64fromByteArray(z._toUint8View(t))}static fromBase64(e,t){const r=Uint8Array.from(atob(e),e=>e.charCodeAt(0));if(void 0!==t&&r.length!==t)throw new Error("Decoded length does not match expected length");return new j(r)}static toBase64Url(e){return z.toBase64(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,".")}static fromBase64Url(e,t){return z.fromBase64(e.replace(/_/g,"/").replace(/-/g,"+").replace(/\./g,"="),t)}static toBase32(e,t=z.BASE32_ALPHABET.NIMIQ){let r,n,i,s=3,o=0,a="";for(i=0;i<e.length;i++)a+=t[31&(n=o|(r=e[i])>>s)],s>5&&(a+=t[31&(n=r>>(s-=5))]),o=r<<(s=5-s),s=8-s;for(3!==s&&(a+=t[31&o]);a.length%8!=0&&33===t.length;)a+=t[32];return a}static fromBase32(e,t=z.BASE32_ALPHABET.NIMIQ){const r=[];t.toUpperCase().split("").forEach((e,t)=>{e in r||(r[e]=t)});let n,i=8,s=0,o=[];return e.toUpperCase().split("").forEach(e=>{33===t.length&&e===t[32]||(n=255&r[e],(i-=5)>0?s|=n<<i:i<0?(o.push(s|n>>-i),s=n<<(i+=8)&255):(o.push(s|n),i=8,s=0))}),8!==i&&0!==s&&o.push(s),new Uint8Array(o)}static toHex(e){let t="";for(let r=0;r<e.length;r++){const n=e[r];t+=z.HEX_ALPHABET[n>>>4],t+=z.HEX_ALPHABET[15&n]}return t}static fromHex(e,t){if(e=e.trim(),!oe.isHexBytes(e,t))throw new Error("String is not an hex string (of matching length)");return new j(Uint8Array.from(e.match(/.{2}/g)||[],e=>parseInt(e,16)))}static toBinary(e){let t="";for(let r=0;r<e.length;r++){const n=e[r];t+=oe.lpad(n.toString(2),"0",8)}return t}static _strToUint8Array(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296==(64512&i)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return new Uint8Array(t)}static _utf8TextEncoder(e){if("undefined"==typeof TextEncoder)throw new Error("TextEncoder not supported");if(null===z._UTF8_ENCODER)throw new Error("TextEncoder does not support utf8");if(void 0===z._UTF8_ENCODER)try{z._UTF8_ENCODER=new TextEncoder}catch(e){throw z._UTF8_ENCODER=null,new Error("TextEncoder does not support utf8")}return z._UTF8_ENCODER.encode(e)}static fromUtf8(t){if(m.isNodeJs())return e.from(t);if("undefined"!=typeof TextEncoder&&null!==z._UTF8_ENCODER)try{return z._utf8TextEncoder(t)}catch(e){}return z._strToUint8Array(t)}static fromAny(e,t){if(""===e)return j.EMPTY;if(!e)throw new Error("Invalid buffer format");if(e instanceof Uint8Array)return new j(e);try{return z.fromHex(e,t)}catch(e){}try{return z.fromBase64(e,t)}catch(e){}throw new Error("Invalid buffer format")}static concatTypedArrays(e,t){const r=new e.constructor(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}static equals(e,t){if((e.byteLength||e.length)!==(t.byteLength||t.length))return!1;const r=z._toUint8View(e),n=z._toUint8View(t);for(let e=0;e<r.length;e++)if(r[e]!==n[e])return!1;return!0}static compare(e,t){if(e.length<t.length)return-1;if(e.length>t.length)return 1;for(let r=0;r<e.length;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0}static xor(e,t){const r=new Uint8Array(e.byteLength);for(let n=0;n<e.byteLength;++n)r[n]=e[n]^t[n];return r}static _toUint8View(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):Uint8Array.from(e)}}z.BASE64_ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z.BASE32_ALPHABET={RFC4648:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",RFC4648_HEX:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",NIMIQ:"0123456789ABCDEFGHJKLMNPQRSTUVXY"},z.HEX_ALPHABET="0123456789abcdef",z._BASE64_LOOKUP=[];for(let e=0,t=z.BASE64_ALPHABET.length;e<t;++e)z._BASE64_LOOKUP[e]=z.BASE64_ALPHABET[e];c.register(z);class j extends Uint8Array{constructor(e){super(e),this._view=new DataView(this.buffer),this._readPos=0,this._writePos=0}subarray(e,t){return I.subarray(this,e,t)}get readPos(){return this._readPos}set readPos(e){if(e<0||e>this.byteLength)throw`Invalid readPos ${e}`;this._readPos=e}get writePos(){return this._writePos}set writePos(e){if(e<0||e>this.byteLength)throw`Invalid writePos ${e}`;this._writePos=e}reset(){this._readPos=0,this._writePos=0}read(e){const t=this.subarray(this._readPos,this._readPos+e);return this._readPos+=e,new Uint8Array(t)}write(e){this.set(e,this._writePos),this._writePos+=e.byteLength}readUint8(){return this._view.getUint8(this._readPos++)}writeUint8(e){this._view.setUint8(this._writePos++,e)}readUint16(){const e=this._view.getUint16(this._readPos);return this._readPos+=2,e}writeUint16(e){this._view.setUint16(this._writePos,e),this._writePos+=2}readUint32(){const e=this._view.getUint32(this._readPos);return this._readPos+=4,e}writeUint32(e){this._view.setUint32(this._writePos,e),this._writePos+=4}readUint64(){const e=this._view.getUint32(this._readPos)*Math.pow(2,32)+this._view.getUint32(this._readPos+4);if(!ee.isUint64(e))throw new Error("Malformed value");return this._readPos+=8,e}writeUint64(e){if(!ee.isUint64(e))throw new Error("Malformed value");this._view.setUint32(this._writePos,Math.floor(e/Math.pow(2,32))),this._view.setUint32(this._writePos+4,e),this._writePos+=8}readVarUint(){const e=this.readUint8();return e<253?e:253===e?this.readUint16():254===e?this.readUint32():this.readUint64()}writeVarUint(e){if(!ee.isUint64(e))throw new Error("Malformed value");e<253?this.writeUint8(e):e<=65535?(this.writeUint8(253),this.writeUint16(e)):e<=4294967295?(this.writeUint8(254),this.writeUint32(e)):(this.writeUint8(255),this.writeUint64(e))}static varUintSize(e){if(!ee.isUint64(e))throw new Error("Malformed value");return e<253?1:e<=65535?3:e<=4294967295?5:9}readFloat64(){const e=this._view.getFloat64(this._readPos);return this._readPos+=8,e}writeFloat64(e){this._view.setFloat64(this._writePos,e),this._writePos+=8}readString(e){const t=this.read(e);return z.toAscii(t)}writeString(e,t){if(oe.isMultibyte(e)||e.length!==t)throw new Error("Malformed value/length");const r=z.fromAscii(e);this.write(r)}readPaddedString(e){const t=this.read(e);let r=0;for(;r<e&&0!==t[r];)r++;const n=new Uint8Array(t.buffer,t.byteOffset,r);return z.toAscii(n)}writePaddedString(e,t){if(oe.isMultibyte(e)||e.length>t)throw new Error("Malformed value/length");const r=z.fromAscii(e);this.write(r);const n=t-r.byteLength;this.write(new Uint8Array(n))}readVarLengthString(){const e=this.readUint8();if(this._readPos+e>this.length)throw new Error("Malformed length");const t=this.read(e);return z.toAscii(t)}writeVarLengthString(e){if(oe.isMultibyte(e)||!ee.isUint8(e.length))throw new Error("Malformed value");const t=z.fromAscii(e);this.writeUint8(t.byteLength),this.write(t)}static varLengthStringSize(e){if(oe.isMultibyte(e)||!ee.isUint8(e.length))throw new Error("Malformed value");return 1+e.length}}j.EMPTY=new j(0),c.register(j);class H extends l{constructor(e,t){super(),this._queue=new x,this._working=!1,this._throttleAfter=e,this._throttleWait=t,this._elapsed=0,this._totalElapsed=0,this._totalJobs=0,this._totalThrottles=0}push(e){return new Promise((t,r)=>{this._queue.push({fn:e,resolve:t,reject:r}),this._working||(this.fire("work-start",this),this._doWork().catch(h.w.tag(H)))})}clear(){for(const e of this._queue)e.reject&&e.reject();this._queue.clear()}async _doWork(){for(this._working=!0;this._queue.length>0;){const e=Date.now(),t=this._queue.shift();try{const e=await t.fn();t.resolve(e)}catch(e){t.reject&&t.reject(e)}if(this._totalJobs++,void 0!==this._throttleAfter&&(this._elapsed+=Date.now()-e,this._elapsed>=this._throttleAfter))return this._totalElapsed+=this._elapsed,this._totalThrottles++,this._elapsed=0,void setTimeout(this._doWork.bind(this),this._throttleWait)}this._working=!1,this._totalElapsed+=this._elapsed,this._elapsed=0,this.fire("work-end",this)}get working(){return this._working}get length(){return this._queue.length}get totalElapsed(){return this._totalElapsed}get totalJobs(){return this._totalJobs}get totalThrottles(){return this._totalThrottles}}c.register(H);class q extends l{constructor(e,t){super(),this._synchronizers=new Map,this._throttleAfter=e,this._throttleWait=t}push(e,t){let r=this._synchronizers.get(e);return r||((r=new H(this._throttleAfter,this._throttleWait)).on("work-start",()=>this.fire("work-start",r,e,this)),r.on("work-end",()=>this.fire("work-end",r,e,this)),this._synchronizers.set(e,r)),r.push(t)}clear(){for(const e of this._synchronizers.values())e.clear();this._synchronizers.clear()}isWorking(e){const t=this._synchronizers.get(e);return!!t&&t.working}}c.register(q);class V extends l{constructor(e,t,r){super(),this._queues=[];for(let t=0;t<e;t++)this._queues[t]=new x;this._working=!1,this._throttleAfter=t,this._throttleWait=r,this._elapsed=0,this._totalElapsed=0,this._totalJobs=0,this._totalThrottles=0}push(e,t){return F.that(e>=0&&e<this._queues.length&&Number.isInteger(e),"Invalid priority"),new Promise((r,n)=>{this._queues[e].push({fn:t,resolve:r,reject:n}),this._working||(this.fire("work-start",this),this._doWork().catch(h.w.tag(V)))})}clear(){for(const e of this._queues){for(const t of e)t.reject&&t.reject();e.clear()}}async _doWork(){this._working=!0;for(const e of this._queues)for(;e.length>0;){const t=Date.now(),r=e.shift();try{const e=await r.fn();r.resolve(e)}catch(e){r.reject&&r.reject(e)}if(this._totalJobs++,void 0!==this._throttleAfter&&(this._elapsed+=Date.now()-t,this._elapsed>=this._throttleAfter))return this._totalElapsed+=this._elapsed,this._totalThrottles++,this._elapsed=0,void setTimeout(this._doWork.bind(this),this._throttleWait)}this._working=!1,this._totalElapsed+=this._elapsed,this._elapsed=0,this.fire("work-end",this)}get working(){return this._working}get length(){return this._queues.reduce((e,t)=>e+t.length,0)}get totalElapsed(){return this._totalElapsed}get totalJobs(){return this._totalJobs}get totalThrottles(){return this._totalThrottles}}c.register(V);class G{constructor(e,t=6e4){this._allowedOccurrences=e,this._timeRange=t,this._lastReset=0,this._counter=0}note(e=1){const t=Date.now();return this._lastReset<t-this._timeRange&&(this._lastReset=t,this._counter=0),(this._counter+=e)<=this._allowedOccurrences}get lastReset(){return this._lastReset}}c.register(G);class W{static async createProxy(e,t,r){return new(W.Proxy(e))(r,t)}static async startWorkerForProxy(e,t,r){return W._workersSupported?(r||(r=`${a._path}worker.js`),W.createProxy(e,t,new Worker(URL.createObjectURL(new Blob([`Nimiq = {_path: '${a._path}'}; importScripts('${r.replace(/'/g,"")}');`]))))):(await W._workerImplementation[e.name].init(t),W._workerImplementation[e.name])}static async startWorkerPoolForProxy(e,t,r,n){return new(W.Pool(e))(t=>W.startWorkerForProxy(e,t,n),t,r).start()}static async stubBaseOnMessage(e){try{if("init"===e.data.command)if(W._workerImplementation[e.data.args[0]]){const t=await W._workerImplementation[e.data.args[0]].init(e.data.args[1]);self.postMessage({status:"OK",result:t,id:e.data.id})}else self.postMessage({status:"error",result:"Unknown worker!",id:e.data.id});else self.postMessage({status:"error",result:"Worker not yet initialized!",id:e.data.id})}catch(t){self.postMessage({status:"error",result:t,id:e.data.id})}}static get _workersSupported(){return"undefined"!=typeof Worker}static get areWorkersAsync(){return W._workersSupported}static get _insideWebWorker(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}static get _global(){return void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:null}static prepareForWorkerUse(e,t){W._insideWebWorker&&(self.onmessage=W.stubBaseOnMessage),W._workerImplementation=W._workerImplementation||{},W._workerImplementation[e.name]=t}static _loadBrowserScript(e,t){const r=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=e;const i=()=>setTimeout(t,100);n.onreadystatechange=i,n.onload=i,r.appendChild(n)}static Proxy(e){const t=class extends e{constructor(t,r){return super(),this._name=r,this._messageId=0,this._worker=t,this._worker.onmessage=this._receive.bind(this),this._waiting=new Map,this._invoke("init",[e.name,r]).then(()=>this)}_receive(e){const t=this._waiting.get(e.data.id);t?(this._waiting.delete(e.data.id),"OK"===e.data.status?t.resolve(e.data.result):"error"===e.data.status&&t.error(e.data.result)):h.w(WorkerProxy,"Unknown reply",e)}_invoke(e,t=[]){return new Promise((r,n)=>{const i={command:e,args:t,id:this._messageId++};this._waiting.set(i.id,{resolve:r,error:n}),this._worker.postMessage(i)})}destroy(){return this._invoke("destroy")}};for(const r of Object.getOwnPropertyNames(e.prototype))"function"==typeof e.prototype[r]&&"constructor"!==r&&(t.prototype[r]=function(...e){return this._invoke(r,e)});return t}static Stub(e){const t=class extends e{constructor(){super()}_result(e,t,r){self.postMessage({status:t,result:r,id:e.data.id})}_onmessage(e){try{const t=this._invoke(e.data.command,e.data.args);t instanceof Promise?t.then(t=>{this._result(e,"OK",t)}):this._result(e,"OK",t)}catch(t){this._result(e,"error",t.message||t)}}init(e){this._name=e,W._insideWebWorker&&(self.name=e,self.onmessage=e=>this._onmessage(e))}_invoke(e,t){return this[e].apply(this,t)}destroy(){W._insideWebWorker&&self.close()}};for(const r of Object.getOwnPropertyNames(e.prototype))"function"==typeof e.prototype[r]&&"constructor"!==r&&(t.prototype[r]=function(){throw`Not implemented in IWorker Stub: ${r}`});return t}static Pool(e){const t=class extends e{constructor(e,t="pool",r=1){super(),this._proxyInitializer=e,this._name=t,this._poolSize=r,this._workers=[],this._freeWorkers=[],this._waitingCalls=[]}async start(){return await this._updateToSize(),this}get poolSize(){return this._poolSize}set poolSize(e){this._poolSize=e,this._updateToSize().catch(h.w.tag(W))}destroy(){return this._poolSize=0,this._updateToSize()}_invoke(e,t){return W._workersSupported?new Promise((r,n)=>{this._waitingCalls.push({name:e,args:t,resolve:r,error:n});const i=this._freeWorkers.shift();i&&this._step(i).catch(h.w.tag(W))}):this._workers[0][e].apply(this._workers[0],t)}async _step(e){let t=this._waitingCalls.shift();for(;t;){try{t.resolve(await e[t.name].apply(e,t.args))}catch(e){t.error(e)}if(-1===this._workers.indexOf(e))return void e.destroy();t=this._waitingCalls.shift()}this._freeWorkers.push(e)}async _updateToSize(){"undefined"==typeof Worker&&this._poolSize>1&&(h.d(W,"Pool of size larger than 1 requires WebWorker support."),this._poolSize=1);const e=[];for(;this._workers.length+e.length<this._poolSize;)e.push(this._proxyInitializer(`${this._name}#${this._workers.length+e.length}`));const t=await Promise.all(e);for(const e of t)this._workers.push(e),this._step(e).catch(h.w.tag(W));for(;this._workers.length>this._poolSize;){const e=this._freeWorkers.shift()||this._workers.pop(),t=this._workers.indexOf(e);t>=0&&(this._workers.splice(t,1),e.destroy())}return this}};for(const r of Object.getOwnPropertyNames(e.prototype))"function"==typeof e.prototype[r]&&"constructor"!==r&&(t.prototype[r]=function(...e){return this._invoke(r,e)});return t}}W._moduleLoadedCallbacks={},W._workerImplementation={},c.register(W);class Q{static get lib(){return p.instance}static async getInstanceAsync(){return Q._workerAsync||(Q._workerAsync=await W.startWorkerPoolForProxy(Q,"crypto",4)),Q._workerAsync}async computeArgon2d(e){}async computeArgon2dBatch(e){}async kdfLegacy(e,t,r,n){}async kdf(e,t,r,n){}async blockVerify(e,t,r,n,i){}}Q._workerAsync=null,c.register(Q);class Y extends(W.Stub(Q)){constructor(){super(),this._superInit=super.init}async init(e){await this._superInit.call(this,e),m.isBrowser()&&await _.doImportBrowser(),Q._workerAsync=this}computeArgon2d(e){if(m.isNodeJs()){const t=new Uint8Array(ue.getSize(ue.Algorithm.ARGON2D)),r=NodeNative.node_argon2(t,new Uint8Array(e),512);if(0!==r)throw r;return t}{let t;try{t=Module.stackSave();const r=ue.getSize(ue.Algorithm.ARGON2D),n=Module.stackAlloc(r),i=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,i,e.length).set(e);const s=Module._nimiq_argon2(n,i,e.length,512);if(0!==s)throw s;const o=new Uint8Array(r);return o.set(new Uint8Array(Module.HEAPU8.buffer,n,r)),o}catch(e){throw h.w(Y,e),e}finally{void 0!==t&&Module.stackRestore(t)}}}computeArgon2dBatch(e){const t=[];if(m.isNodeJs()){for(const r of e){const e=new Uint8Array(ue.getSize(ue.Algorithm.ARGON2D)),n=NodeNative.node_argon2(e,new Uint8Array(r),512);if(0!==n)throw n;t.push(e)}return t}{let r;try{r=Module.stackSave();const n=ue.getSize(ue.Algorithm.ARGON2D),i=Module.stackAlloc(n),s=Module.stackSave();for(const r of e){Module.stackRestore(s);const e=Module.stackAlloc(r.length);new Uint8Array(Module.HEAPU8.buffer,e,r.length).set(r);const o=Module._nimiq_argon2(i,e,r.length,512);if(0!==o)throw o;const a=new Uint8Array(n);a.set(new Uint8Array(Module.HEAPU8.buffer,i,n)),t.push(a)}return t}catch(e){throw h.w(Y,e),e}finally{void 0!==r&&Module.stackRestore(r)}}}kdfLegacy(e,t,r,n=ue.getSize(ue.Algorithm.ARGON2D)){if(m.isNodeJs()){const i=new Uint8Array(n),s=NodeNative.node_kdf_legacy(i,new Uint8Array(e),new Uint8Array(t),512,r);if(0!==s)throw s;return i}{let i;try{i=Module.stackSave();const s=Module.stackAlloc(n),o=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);const a=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,a,t.length).set(t);const c=Module._nimiq_kdf_legacy(s,n,o,e.length,a,t.length,512,r);if(0!==c)throw c;const u=new Uint8Array(n);return u.set(new Uint8Array(Module.HEAPU8.buffer,s,n)),u}catch(e){throw h.w(Y,e),e}finally{void 0!==i&&Module.stackRestore(i)}}}kdf(e,t,r,n=ue.getSize(ue.Algorithm.ARGON2D)){if(m.isNodeJs()){const i=new Uint8Array(n),s=NodeNative.node_kdf(i,new Uint8Array(e),new Uint8Array(t),512,r);if(0!==s)throw s;return i}{let i;try{i=Module.stackSave();const s=Module.stackAlloc(n),o=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);const a=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,a,t.length).set(t);const c=Module._nimiq_kdf(s,n,o,e.length,a,t.length,512,r);if(0!==c)throw c;const u=new Uint8Array(n);return u.set(new Uint8Array(Module.HEAPU8.buffer,s,n)),u}catch(e){throw h.w(Y,e),e}finally{void 0!==i&&Module.stackRestore(i)}}}async blockVerify(e,t,r,n,i){Wr={GENESIS_HASH:ue.unserialize(new j(n)),NETWORK_ID:i};const s=Je.unserialize(new j(e));for(let e=0;e<t.length;e++)s.body.transactions[e]._valid=t[e];const o=await s._verify(r),a=await s.header.pow(),c=s.interlink.hash(),u=s.body.hash();return{valid:o,pow:a.serialize(),interlinkHash:c.serialize(),bodyHash:u.serialize()}}}W.prepareForWorkerUse(Q,new Y);class X{static computeHmacSha512(e,t){e.length>X.SHA512_BLOCK_SIZE&&(e=new j(ue.computeSha512(e)));const r=new j(X.SHA512_BLOCK_SIZE),n=new j(X.SHA512_BLOCK_SIZE);for(let t=0;t<X.SHA512_BLOCK_SIZE;++t){const i=e[t]||0;r[t]=54^i,n[t]=92^i}const i=ue.computeSha512(z.concatTypedArrays(r,t));return ue.computeSha512(z.concatTypedArrays(n,i))}static computePBKDF2sha512(e,t,r,n){const i=ue.SIZE.get(ue.Algorithm.SHA512);if(n>(Math.pow(2,32)-1)*i)throw new Error("Derived key too long");const s=Math.ceil(n/i),o=n-(s-1)*i,a=new j(n);for(let n=1;n<=s;n++){let i=new j(t.length+4);i.write(t),i.writeUint32(n);const c=i=X.computeHmacSha512(e,i);for(let t=1;t<r;t++){i=X.computeHmacSha512(e,i);for(let e=0;e<c.length;e++)c[e]^=i[e]}n<s?a.write(c):a.write(c.slice(0,o))}return a}static async otpKdfLegacy(e,t,r,n){const i=await Q.getInstanceAsync(),s=await i.kdfLegacy(t,r,n,e.byteLength);return z.xor(e,s)}static async otpKdf(e,t,r,n){const i=await Q.getInstanceAsync(),s=await i.kdf(t,r,n,e.byteLength);return z.xor(e,s)}}X.SHA512_BLOCK_SIZE=128,c.register(X);class ${static _createTable(){const e=[];for(let t=0;t<256;++t){let r=t;for(let e=0;e<8;++e)r=0!=(128&r)?(r<<1^151)%256:(r<<1)%256;e[t]=r}return e}static compute(e){$._table||($._table=$._createTable());let t=0;for(let r=0;r<e.length;r++)t=$._table[(t^e[r])%256];return t}}$._table=null,c.register($);class Z{static _createTable(){let e;const t=[];for(let r=0;r<256;++r){e=r;for(let t=0;t<8;++t)e=1&e?Z._POLYNOMIAL^e>>>1:e>>>1;t[r]=e>>>0}return t}static compute(e){Z._table||(Z._table=Z._createTable()),Z._hex_chars||(Z._hex_chars="0123456789abcdef".split(""));const t=new Uint8Array(e);let r=-1,n="";for(let e=0;e<t.length;++e)r=Z._table[255&(r^t[e])]^r>>>8;return r^=-1,n+=Z._hex_chars[r>>28&15]+Z._hex_chars[r>>24&15]+Z._hex_chars[r>>20&15]+Z._hex_chars[r>>16&15]+Z._hex_chars[r>>12&15]+Z._hex_chars[r>>8&15]+Z._hex_chars[r>>4&15]+Z._hex_chars[15&r],parseInt(n,16)}}Z._table=null,Z._hex_chars=null,Z._POLYNOMIAL=3988292384,c.register(Z),function(e){var t,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",a=1e14,c=14,u=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],l=1e7,f=1e9;function d(e){var t=0|e;return e>0||e===t?t:t-1}function p(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=c-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function A(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function g(e,t,r,o){if(e<t||e>r||e!==(e<0?n(e):i(e)))throw Error(s+(o||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+e)}function y(e){return"[object Array]"==Object.prototype.toString.call(e)}function m(e){var t=e.c.length-1;return d(e.e/c)==t&&e.c[t]%2!=0}function _(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function b(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(t=function e(t){var w,v,E,S,C,k,I,T,R,N=H.prototype={constructor:H,toString:null,valueOf:null},B=new H(1),O=20,P=4,x=-7,L=21,D=-1e7,M=1e7,U=!1,K=1,F=0,z={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0},j="0123456789abcdefghijklmnopqrstuvwxyz";function H(e,t){var n,s,a,h,l,f,d,p=this;if(!(p instanceof H))return new H(e,t);if(null==t){if(e instanceof H)return p.s=e.s,p.e=e.e,void(p.c=(e=e.c)?e.slice():e);if((l="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,h=e;h>=10;h/=10,a++);return p.e=a,void(p.c=[e])}d=e+""}else{if(!r.test(d=e+""))return E(p,d,l);p.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}}else{if(g(t,2,j.length,"Base"),d=e+"",10==t)return W(p=new H(e instanceof H?e:d),O+p.e+1,P);if(l="number"==typeof e){if(0*e!=0)return E(p,d,l,t);if(p.s=1/e<0?(d=d.slice(1),-1):1,H.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(o+e);l=!1}else p.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1,t>10&&t<37&&(d=d.toLowerCase());for(n=j.slice(0,t),a=h=0,f=d.length;h<f;h++)if(n.indexOf(s=d.charAt(h))<0){if("."==s&&h>a){a=f;continue}return E(p,e+"",l,t)}d=v(d,t,10,p.s)}for((a=d.indexOf("."))>-1&&(d=d.replace(".","")),(h=d.search(/e/i))>0?(a<0&&(a=h),a+=+d.slice(h+1),d=d.substring(0,h)):a<0&&(a=d.length),h=0;48===d.charCodeAt(h);h++);for(f=d.length;48===d.charCodeAt(--f););if(d=d.slice(h,++f)){if(f-=h,l&&H.DEBUG&&f>15&&(e>u||e!==i(e)))throw Error(o+p.s*e);if((a=a-h-1)>M)p.c=p.e=null;else if(a<D)p.c=[p.e=0];else{if(p.e=a,p.c=[],h=(a+1)%c,a<0&&(h+=c),h<f){for(h&&p.c.push(+d.slice(0,h)),f-=c;h<f;)p.c.push(+d.slice(h,h+=c));d=d.slice(h),h=c-d.length}else h-=f;for(;h--;d+="0");p.c.push(+d)}}else p.c=[p.e=0]}function q(e,t,r,n){var i,s,o,a,c;if(null==r?r=P:g(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=p(e.c),c=1==n||2==n&&o<=x?_(c,o):b(c,o,"0");else if(s=(e=W(new H(e),t,r)).e,a=(c=p(e.c)).length,1==n||2==n&&(t<=s||s<=x)){for(;a<t;c+="0",a++);c=_(c,s)}else if(t-=o,c=b(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=s-a)>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function V(e,t){var r,n,i=0;for(y(e[0])&&(e=e[0]),r=new H(e[0]);++i<e.length;){if(!(n=new H(e[i])).s){r=n;break}t.call(r,n)&&(r=n)}return r}function G(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*c-1)>M?e.c=e.e=null:r<D?e.c=[e.e=0]:(e.e=r,e.c=t),e}function W(e,t,r,s){var o,u,l,f,d,p,A,g=e.c,y=h;if(g){e:{for(o=1,f=g[0];f>=10;f/=10,o++);if((u=t-o)<0)u+=c,l=t,A=(d=g[p=0])/y[o-l-1]%10|0;else if((p=n((u+1)/c))>=g.length){if(!s)break e;for(;g.length<=p;g.push(0));d=A=0,o=1,l=(u%=c)-c+1}else{for(d=f=g[p],o=1;f>=10;f/=10,o++);A=(l=(u%=c)-c+o)<0?0:d/y[o-l-1]%10|0}if(s=s||t<0||null!=g[p+1]||(l<0?d:d%y[o-l-1]),s=r<4?(A||s)&&(0==r||r==(e.s<0?3:2)):A>5||5==A&&(4==r||s||6==r&&(u>0?l>0?d/y[o-l]:0:g[p-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,s?(t-=e.e+1,g[0]=y[(c-t%c)%c],e.e=-t||0):g[0]=e.e=0,e;if(0==u?(g.length=p,f=1,p--):(g.length=p+1,f=y[c-u],g[p]=l>0?i(d/y[o-l]%y[l])*f:0),s)for(;;){if(0==p){for(u=1,l=g[0];l>=10;l/=10,u++);for(l=g[0]+=f,f=1;l>=10;l/=10,f++);u!=f&&(e.e++,g[0]==a&&(g[0]=1));break}if(g[p]+=f,g[p]!=a)break;g[p--]=0,f=1}for(u=g.length;0===g[--u];g.pop());}e.e>M?e.c=e.e=null:e.e<D&&(e.c=[e.e=0])}return e}return H.clone=e,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(g(r=e[t],0,f,t),O=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(g(r=e[t],0,8,t),P=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(y(r=e[t])?(g(r[0],-f,0,t),g(r[1],0,f,t),x=r[0],L=r[1]):(g(r,-f,f,t),x=-(L=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if(y(r=e[t]))g(r[0],-f,-1,t),g(r[1],1,f,t),D=r[0],M=r[1];else{if(g(r,-f,f,t),!r)throw Error(s+t+" cannot be zero: "+r);D=-(M=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(s+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!r,Error(s+"crypto unavailable");U=r}else U=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(g(r=e[t],0,9,t),K=r),e.hasOwnProperty(t="POW_PRECISION")&&(g(r=e[t],0,f,t),F=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(s+t+" not an object: "+r);z=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|\.|(.).*\1/.test(r))throw Error(s+t+" invalid: "+r);j=r}}return{DECIMAL_PLACES:O,ROUNDING_MODE:P,EXPONENTIAL_AT:[x,L],RANGE:[D,M],CRYPTO:U,MODULO_MODE:K,POW_PRECISION:F,FORMAT:z,ALPHABET:j}},H.isBigNumber=function(e){return e instanceof H||e&&!0===e._isBigNumber||!1},H.maximum=H.max=function(){return V(arguments,N.lt)},H.minimum=H.min=function(){return V(arguments,N.gt)},H.random=(S=9007199254740992*Math.random()&2097151?function(){return i(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,o,a,u,l=0,d=[],p=new H(B);if(null==e?e=O:g(e,0,f),a=n(e/c),U)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)(u=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(d.push(u%1e14),l+=2);l=a/2}else{if(!crypto.randomBytes)throw U=!1,Error(s+"crypto unavailable");for(t=crypto.randomBytes(a*=7);l<a;)(u=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(d.push(u%1e14),l+=7);l=a/7}if(!U)for(;l<a;)(u=S())<9e15&&(d[l++]=u%1e14);for(a=d[--l],e%=c,a&&e&&(u=h[c-e],d[l]=i(a/u)*u);0===d[l];d.pop(),l--);if(l<0)d=[o=0];else{for(o=-1;0===d[0];d.splice(0,1),o-=c);for(l=1,u=d[0];u>=10;u/=10,l++);l<c&&(o-=c-l)}return p.e=o,p.c=d,p}),v=function(){function e(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(t,r,n,i,s){var o,a,c,u,h,l,f,d,A=t.indexOf("."),g=O,y=P;for(A>=0&&(u=F,F=0,t=t.replace(".",""),l=(d=new H(r)).pow(t.length-A),F=u,d.c=e(b(p(l.c),l.e,"0"),10,n,"0123456789"),d.e=d.c.length),c=u=(f=e(t,r,n,s?(o=j,"0123456789"):(o="0123456789",j))).length;0==f[--u];f.pop());if(!f[0])return o.charAt(0);if(A<0?--c:(l.c=f,l.e=c,l.s=i,f=(l=w(l,d,g,y,n)).c,h=l.r,c=l.e),A=f[a=c+g+1],u=n/2,h=h||a<0||null!=f[a+1],h=y<4?(null!=A||h)&&(0==y||y==(l.s<0?3:2)):A>u||A==u&&(4==y||h||6==y&&1&f[a-1]||y==(l.s<0?8:7)),a<1||!f[0])t=h?b(o.charAt(1),-g,o.charAt(0)):o.charAt(0);else{if(f.length=a,h)for(--n;++f[--a]>n;)f[a]=0,a||(++c,f=[1].concat(f));for(u=f.length;!f[--u];);for(A=0,t="";A<=u;t+=o.charAt(f[A++]));t=b(t,c,o.charAt(0))}return t}}(),w=function(){function e(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%l,h=t/l|0;for(e=e.slice();c--;)a=((i=u*(s=e[c]%l)+(n=h*s+(o=e[c]/l|0)*u)%l*l+a)/r|0)+(n/l|0)+h*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,s,o,u,h){var l,f,p,A,g,y,m,_,b,w,v,E,S,C,k,I,T,R=n.s==s.s?1:-1,N=n.c,B=s.c;if(!(N&&N[0]&&B&&B[0]))return new H(n.s&&s.s&&(N?!B||N[0]!=B[0]:B)?N&&0==N[0]||!B?0*R:R/0:NaN);for(b=(_=new H(R)).c=[],R=o+(f=n.e-s.e)+1,h||(h=a,f=d(n.e/c)-d(s.e/c),R=R/c|0),p=0;B[p]==(N[p]||0);p++);if(B[p]>(N[p]||0)&&f--,R<0)b.push(1),A=!0;else{for(C=N.length,I=B.length,p=0,R+=2,(g=i(h/(B[0]+1)))>1&&(B=e(B,g,h),N=e(N,g,h),I=B.length,C=N.length),S=I,v=(w=N.slice(0,I)).length;v<I;w[v++]=0);T=B.slice(),T=[0].concat(T),k=B[0],B[1]>=h/2&&k++;do{if(g=0,(l=t(B,w,I,v))<0){if(E=w[0],I!=v&&(E=E*h+(w[1]||0)),(g=i(E/k))>1)for(g>=h&&(g=h-1),m=(y=e(B,g,h)).length,v=w.length;1==t(y,w,m,v);)g--,r(y,I<m?T:B,m,h),m=y.length,l=1;else 0==g&&(l=g=1),m=(y=B.slice()).length;if(m<v&&(y=[0].concat(y)),r(w,y,v,h),v=w.length,-1==l)for(;t(B,w,I,v)<1;)g++,r(w,I<v?T:B,v,h),v=w.length}else 0===l&&(g++,w=[0]);b[p++]=g,w[0]?w[v++]=N[S]||0:(w=[N[S]],v=1)}while((S++<C||null!=w[0])&&R--);A=null!=w[0],b[0]||b.splice(0,1)}if(h==a){for(p=1,R=b[0];R>=10;R/=10,p++);W(_,o+(_.e=p+f*c-1)+1,u,A)}else _.e=f,_.r=+A;return _}}(),C=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,I=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g,E=function(e,t,r,n){var i,o=r?t:t.replace(R,"");if(T.test(o))e.s=isNaN(o)?null:o<0?-1:1,e.c=e.e=null;else{if(!r&&(o=o.replace(C,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,o=o.replace(k,"$1").replace(I,"0.$1")),t!=o))return new H(o,i);if(H.DEBUG)throw Error(s+"Not a"+(n?" base "+n:"")+" number: "+t);e.c=e.e=e.s=null}},N.absoluteValue=N.abs=function(){var e=new H(this);return e.s<0&&(e.s=1),e},N.comparedTo=function(e,t){return A(this,new H(e,t))},N.decimalPlaces=N.dp=function(e,t){var r,n,i,s=this;if(null!=e)return g(e,0,f),null==t?t=P:g(t,0,8),W(new H(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-d(this.e/c))*c,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},N.dividedBy=N.div=function(e,t){return w(this,new H(e,t),O,P)},N.dividedToIntegerBy=N.idiv=function(e,t){return w(this,new H(e,t),0,1)},N.exponentiatedBy=N.pow=function(e,t){var r,o,a,u,h,l,f,d=this;if((e=new H(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+e);if(null!=t&&(t=new H(t)),u=e.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!e.c||!e.c[0])return f=new H(Math.pow(+d.valueOf(),u?2-m(e):+e)),t?f.mod(t):f;if(h=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new H(NaN);(o=!h&&d.isInteger()&&t.isInteger())&&(d=d.mod(t))}else{if(e.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||u&&d.c[1]>=24e7:d.c[0]<8e13||u&&d.c[0]<=9999975e7)))return a=d.s<0&&m(e)?-0:0,d.e>-1&&(a=1/a),new H(h?1/a:a);F&&(a=n(F/c+2))}for(u?(r=new H(.5),l=m(e)):l=e%2,h&&(e.s=1),f=new H(B);;){if(l){if(!(f=f.times(d)).c)break;a?f.c.length>a&&(f.c.length=a):o&&(f=f.mod(t))}if(u){if(W(e=e.times(r),e.e+1,1),!e.c[0])break;u=e.e>14,l=m(e)}else{if(!(e=i(e/2)))break;l=e%2}d=d.times(d),a?d.c&&d.c.length>a&&(d.c.length=a):o&&(d=d.mod(t))}return o?f:(h&&(f=B.div(f)),t?f.mod(t):a?W(f,F,P,void 0):f)},N.integerValue=function(e){var t=new H(this);return null==e?e=P:g(e,0,8),W(t,t.e+1,e)},N.isEqualTo=N.eq=N.equals=function(e,t){return 0===A(this,new H(e,t))},N.isFinite=function(){return!!this.c},N.isGreaterThan=N.gt=function(e,t){return A(this,new H(e,t))>0},N.isGreaterThanOrEqualTo=N.gte=function(e,t){return 1===(t=A(this,new H(e,t)))||0===t},N.isInteger=function(){return!!this.c&&d(this.e/c)>this.c.length-2},N.isLessThan=N.lt=function(e,t){return A(this,new H(e,t))<0},N.isLessThanOrEqualTo=N.lte=function(e,t){return-1===(t=A(this,new H(e,t)))||0===t},N.isNaN=function(){return!this.s},N.isNegative=function(){return this.s<0},N.isPositive=function(){return this.s>0},N.isZero=function(){return!!this.c&&0==this.c[0]},N.minus=function(e,t){var r,n,i,s,o=this,u=o.s;if(t=(e=new H(e,t)).s,!u||!t)return new H(NaN);if(u!=t)return e.s=-t,o.plus(e);var h=o.e/c,l=e.e/c,f=o.c,p=e.c;if(!h||!l){if(!f||!p)return f?(e.s=-t,e):new H(p?o:NaN);if(!f[0]||!p[0])return p[0]?(e.s=-t,e):new H(f[0]?o:3==P?-0:0)}if(h=d(h),l=d(l),f=f.slice(),u=h-l){for((s=u<0)?(u=-u,i=f):(l=h,i=p),i.reverse(),t=u;t--;i.push(0));i.reverse()}else for(n=(s=(u=f.length)<(t=p.length))?u:t,u=t=0;t<n;t++)if(f[t]!=p[t]){s=f[t]<p[t];break}if(s&&(i=f,f=p,p=i,e.s=-e.s),(t=(n=p.length)-(r=f.length))>0)for(;t--;f[r++]=0);for(t=a-1;n>u;){if(f[--n]<p[n]){for(r=n;r&&!f[--r];f[r]=t);--f[r],f[n]+=a}f[n]-=p[n]}for(;0==f[0];f.splice(0,1),--l);return f[0]?G(e,f,l):(e.s=3==P?-1:1,e.c=[e.e=0],e)},N.modulo=N.mod=function(e,t){var r,n,i=this;return e=new H(e,t),!i.c||!e.s||e.c&&!e.c[0]?new H(NaN):!e.c||i.c&&!i.c[0]?new H(i):(9==K?(n=e.s,e.s=1,r=w(i,e,0,3),e.s=n,r.s*=n):r=w(i,e,0,K),(e=i.minus(r.times(e))).c[0]||1!=K||(e.s=i.s),e)},N.multipliedBy=N.times=function(e,t){var r,n,i,s,o,u,h,f,p,A,g,y,m,_,b,w=this,v=w.c,E=(e=new H(e,t)).c;if(!(v&&E&&v[0]&&E[0]))return!w.s||!e.s||v&&!v[0]&&!E||E&&!E[0]&&!v?e.c=e.e=e.s=null:(e.s*=w.s,v&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=d(w.e/c)+d(e.e/c),e.s*=w.s,(h=v.length)<(A=E.length)&&(m=v,v=E,E=m,i=h,h=A,A=i),i=h+A,m=[];i--;m.push(0));for(_=a,b=l,i=A;--i>=0;){for(r=0,g=E[i]%b,y=E[i]/b|0,s=i+(o=h);s>i;)r=((f=g*(f=v[--o]%b)+(u=y*f+(p=v[o]/b|0)*g)%b*b+m[s]+r)/_|0)+(u/b|0)+y*p,m[s--]=f%_;m[s]=r}return r?++n:m.splice(0,1),G(e,m,n)},N.negated=function(){var e=new H(this);return e.s=-e.s||null,e},N.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new H(e,t)).s,!i||!t)return new H(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/c,o=e.e/c,u=n.c,h=e.c;if(!s||!o){if(!u||!h)return new H(i/0);if(!u[0]||!h[0])return h[0]?e:new H(u[0]?n:0*i)}if(s=d(s),o=d(o),u=u.slice(),i=s-o){for(i>0?(o=s,r=h):(i=-i,r=u),r.reverse();i--;r.push(0));r.reverse()}for((i=u.length)-(t=h.length)<0&&(r=h,h=u,u=r,t=i),i=0;t;)i=(u[--t]=u[t]+h[t]+i)/a|0,u[t]=a===u[t]?0:u[t]%a;return i&&(u=[i].concat(u),++o),G(e,u,o)},N.precision=N.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return g(e,1,f),null==t?t=P:g(t,0,8),W(new H(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*c+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},N.shiftedBy=function(e){return g(e,-u,u),this.times("1e"+e)},N.squareRoot=N.sqrt=function(){var e,t,r,n,i,s=this,o=s.c,a=s.s,c=s.e,u=O+4,h=new H("0.5");if(1!==a||!o||!o[0])return new H(!a||a<0&&(!o||o[0])?NaN:o?s:1/0);if(0==(a=Math.sqrt(+s))||a==1/0?(((t=p(o)).length+c)%2==0&&(t+="0"),a=Math.sqrt(t),c=d((c+1)/2)-(c<0||c%2),r=new H(t=a==1/0?"1e"+c:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new H(a+""),r.c[0])for((a=(c=r.e)+u)<3&&(a=0);;)if(i=r,r=h.times(i.plus(w(s,i,u,1))),p(i.c).slice(0,a)===(t=p(r.c)).slice(0,a)){if(r.e<c&&--a,"9999"!=(t=t.slice(a-3,a+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(r,r.e+O+2,1),e=!r.times(r).eq(s));break}if(!n&&(W(i,i.e+O+2,0),i.times(i).eq(s))){r=i;break}u+=4,a+=4,n=1}return W(r,r.e+O+1,P,e)},N.toExponential=function(e,t){return null!=e&&(g(e,0,f),e++),q(this,e,t,1)},N.toFixed=function(e,t){return null!=e&&(g(e,0,f),e=e+this.e+1),q(this,e,t)},N.toFormat=function(e,t){var r=this.toFixed(e,t);if(this.c){var n,i=r.split("."),s=+z.groupSize,o=+z.secondaryGroupSize,a=z.groupSeparator,c=i[0],u=i[1],h=this.s<0,l=h?c.slice(1):c,f=l.length;if(o&&(n=s,s=o,o=n,f-=n),s>0&&f>0){for(n=f%s||s,c=l.substr(0,n);n<f;n+=s)c+=a+l.substr(n,s);o>0&&(c+=a+l.slice(n)),h&&(c="-"+c)}r=u?c+z.decimalSeparator+((o=+z.fractionGroupSize)?u.replace(new RegExp("\\d{"+o+"}\\B","g"),"$&"+z.fractionGroupSeparator):u):c}return r},N.toFraction=function(e){var t,r,n,i,o,a,u,l,f,d,A,g,y=this,m=y.c;if(null!=e&&(!(l=new H(e)).isInteger()&&(l.c||1!==l.s)||l.lt(B)))throw Error(s+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+e);if(!m)return y.toString();for(r=new H(B),d=n=new H(B),i=f=new H(B),g=p(m),a=r.e=g.length-y.e-1,r.c[0]=h[(u=a%c)<0?c+u:u],e=!e||l.comparedTo(r)>0?a>0?r:d:l,u=M,M=1/0,l=new H(g),f.c[0]=0;A=w(l,r,0,1),1!=(o=n.plus(A.times(i))).comparedTo(e);)n=i,i=o,d=f.plus(A.times(o=d)),f=o,r=l.minus(A.times(o=r)),l=o;return o=w(e.minus(n),i,0,1),f=f.plus(o.times(d)),n=n.plus(o.times(i)),f.s=d.s=y.s,t=w(d,i,a*=2,P).minus(y).abs().comparedTo(w(f,n,a,P).minus(y).abs())<1?[d.toString(),i.toString()]:[f.toString(),n.toString()],M=u,t},N.toNumber=function(){return+this},N.toPrecision=function(e,t){return null!=e&&g(e,1,f),q(this,e,t,2)},N.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(t=p(r.c),null==e?t=i<=x||i>=L?_(t,i):b(t,i,"0"):(g(e,2,j.length,"Base"),t=v(b(t,i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},N.valueOf=N.toJSON=function(){var e,t=this,r=t.e;return null===r?t.toString():(e=p(t.c),e=r<=x||r>=L?_(e,r):b(e,r,"0"),t.s<0?"-"+e:e)},N._isBigNumber=!0,null!=t&&H.set(t),H}()).default=t.BigNumber=t,e.BigNumber=t}(c.scope);const J=c.scope.BigNumber;J.config({DECIMAL_PLACES:10});class ee{static isUint8(e){return Number.isInteger(e)&&e>=0&&e<=ee.UINT8_MAX}static isUint16(e){return Number.isInteger(e)&&e>=0&&e<=ee.UINT16_MAX}static isUint32(e){return Number.isInteger(e)&&e>=0&&e<=ee.UINT32_MAX}static isUint64(e){return Number.isInteger(e)&&e>=0&&e<=ee.UINT64_MAX}static randomUint32(){return Math.floor(Math.random()*(ee.UINT32_MAX+1))}static randomUint64(){return Math.floor(Math.random()*(ee.UINT64_MAX+1))}static fromBinary(e){return parseInt(e,2)}}ee.UINT8_MAX=255,ee.UINT16_MAX=65535,ee.UINT32_MAX=4294967295,ee.UINT64_MAX=Number.MAX_SAFE_INTEGER,c.register(ee);class te{static computeRoot(e,t=te._hash){return te._computeRoot(e,t)}static _computeRoot(e,t){const r=e.length;if(0===r)return ue.light(new Uint8Array(0));if(1===r)return t(e[0]);const n=Math.round(r/2),i=e.slice(0,n),s=e.slice(n),o=te._computeRoot(i,t),a=te._computeRoot(s,t);return ue.light(z.concatTypedArrays(o.serialize(),a.serialize()))}static _hash(e){if(e instanceof ue)return e;if("function"==typeof e.hash)return e.hash();if("function"==typeof e.serialize)return ue.light(e.serialize());if(e instanceof Uint8Array)return ue.light(e);throw new Error("MerkleTree objects must be Uint8Array or have a .hash()/.serialize() method")}}c.register(te);class re{constructor(e){if(!Array.isArray(e)||!ee.isUint8(e.length)||e.some(e=>!(e instanceof ne)))throw new Error("Malformed nodes");this._nodes=e}static compute(e,t,r=te._hash){const n=r(t),i=[];return re._compute(e,n,i,r),new re(i)}static _compute(e,t,r,n){const i=e.length;let s;if(0===i)return{containsLeaf:!1,inner:s=ue.light(new Uint8Array(0))};if(1===i)return{containsLeaf:(s=n(e[0])).equals(t),inner:s};const o=Math.round(i/2),a=e.slice(0,o),c=e.slice(o),{containsLeaf:u,inner:h}=re._compute(a,t,r,n),{containsLeaf:l,inner:f}=re._compute(c,t,r,n);return s=ue.light(z.concatTypedArrays(h.serialize(),f.serialize())),u?(r.push(new ne(f,!1)),{containsLeaf:!0,inner:s}):l?(r.push(new ne(h,!0)),{containsLeaf:!0,inner:s}):{containsLeaf:!1,inner:s}}computeRoot(e,t=te._hash){let r=t(e);for(const e of this._nodes){const t=e.left,n=e.hash,i=new j(2*n.serializedSize);t&&n.serialize(i),r.serialize(i),t||n.serialize(i),r=ue.light(i)}return r}static _compress(e){const t=e.length,r=Math.ceil(t/8),n=new Uint8Array(r);for(let r=0;r<t;r++)e[r].left&&(n[Math.floor(r/8)]|=128>>>r%8);return n}static unserialize(e){const t=e.readUint8(),r=Math.ceil(t/8),n=e.read(r),i=[];for(let r=0;r<t;r++){const t=0!=(n[Math.floor(r/8)]&128>>>r%8),s=ue.unserialize(e);i.push(new ne(s,t))}return new re(i)}serialize(e){(e=e||new j(this.serializedSize)).writeUint8(this._nodes.length),e.write(re._compress(this._nodes));for(const t of this._nodes)t.hash.serialize(e);return e}get serializedSize(){return 1+Math.ceil(this._nodes.length/8)+this._nodes.reduce((e,t)=>e+t.hash.serializedSize,0)}equals(e){return e instanceof re&&this._nodes.length===e._nodes.length&&this._nodes.every((t,r)=>t.equals(e._nodes[r]))}get nodes(){return this._nodes}}c.register(re);class ne{constructor(e,t){this._hash=e,this._left=t}get hash(){return this._hash}get left(){return this._left}equals(e){return e instanceof ne&&this._hash.equals(e.hash)&&this._left===e.left}}c.register(ne);class ie{constructor(e,t){if(!Array.isArray(e)||!ee.isUint16(e.length))throw new Error("Malformed nodes");if(!Array.isArray(t)||!ee.isUint16(t.length))throw new Error("Malformed operations");this._nodes=e,this._operations=t}static compute(e,t,r=te._hash){const n=t.map(r),{containsLeaf:i,operations:s,path:o,inner:a}=ie._compute(e,n,r);return new ie(o,s)}static computeWithAbsence(e,t,r,n=te._hash){const i=new Set;(t=t.slice()).sort(r);let s=0,o=0;for(;o<e.length&&s<t.length;){const n=e[o],a=r(n,t[s]);0===a?(i.add(t[s]),++s):a>0?(o>0&&i.add(e[o-1]),i.add(n),++s):++o}return s<t.length&&e.length>0&&i.add(e[e.length-1]),ie.compute(e,Array.from(i),n)}static _compute(e,t,r){const n=e.length;let i;if(0===n)return i=ue.light(new Uint8Array(0)),{containsLeaf:!1,operations:[ie.Operation.CONSUME_PROOF],path:[i],inner:i};if(1===n){i=r(e[0]);const n=t.some(e=>i.equals(e));return{containsLeaf:n,operations:[n?ie.Operation.CONSUME_INPUT:ie.Operation.CONSUME_PROOF],path:n?[]:[i],inner:i}}const s=Math.round(n/2),o=e.slice(0,s),a=e.slice(s),{containsLeaf:c,operations:u,path:h,inner:l}=ie._compute(o,t,r),{containsLeaf:f,operations:d,path:p,inner:A}=ie._compute(a,t,r);if(i=ue.light(z.concatTypedArrays(l.serialize(),A.serialize())),!c&&!f)return{containsLeaf:!1,operations:[ie.Operation.CONSUME_PROOF],path:[i],inner:i};let g=u;g=g.concat(d);let y=h;return y=y.concat(p),g.push(ie.Operation.HASH),{containsLeaf:!0,operations:g,path:y,inner:i}}computeRoot(e,t=te._hash){const r=e.map(t),n=[],i=this._nodes.slice();for(const e of this._operations)switch(e){case ie.Operation.CONSUME_PROOF:if(0===i.length)throw new Error("Invalid operation.");n.push(i.shift());break;case ie.Operation.CONSUME_INPUT:if(0===r.length)throw new Error("Invalid operation.");n.push(r.shift());break;case ie.Operation.HASH:{if(n.length<2)throw new Error("Invalid operation.");const e=n.splice(-2,2),t=new j(e.reduce((e,t)=>e+t.serializedSize,0)),[r,i]=e;r.serialize(t),i.serialize(t),n.push(ue.light(t));break}default:throw new Error("Invalid operation.")}if(1!==n.length||0!==i.length||0!==r.length)throw Error("Did not consume all nodes.");return n[0]}static _compress(e){const t=e.length,r=Math.ceil(t/4),n=new Uint8Array(r);for(let r=0;r<t;r++){const t=3&e[r];n[Math.floor(r/4)]|=t<<r%4*2}return n}static unserialize(e){const t=e.readUint16(),r=Math.ceil(t/4),n=e.read(r),i=[];for(let e=0;e<t;e++){const t=n[Math.floor(e/4)]>>>e%4*2&3;i.push(t)}const s=e.readUint16(),o=[];for(let t=0;t<s;t++)o.push(ue.unserialize(e));return new ie(o,i)}serialize(e){(e=e||new j(this.serializedSize)).writeUint16(this._operations.length),e.write(ie._compress(this._operations)),e.writeUint16(this._nodes.length);for(const t of this._nodes)t.serialize(e);return e}get serializedSize(){return 4+Math.ceil(this._operations.length/4)+this._nodes.reduce((e,t)=>e+t.serializedSize,0)}equals(e){return e instanceof ie&&this._nodes.length===e._nodes.length&&this._nodes.every((t,r)=>t.equals(e._nodes[r]))&&this._operations.length===e._operations.length&&this._operations.every((t,r)=>t===e._operations[r])}get nodes(){return this._nodes}}ie.Operation={CONSUME_PROOF:0,CONSUME_INPUT:1,HASH:2},c.register(ie);class se{static _crcChecksum(e){const t=8*e.length/32,r=$.compute(e);return z.toBinary([r]).slice(0,t)}static _sha256Checksum(e){const t=8*e.length/32,r=ue.computeSha256(e);return z.toBinary(r).slice(0,t)}static _entropyToBits(e){if(e.length<16)throw new Error("Invalid key, length < 16");if(e.length>32)throw new Error("Invalid key, length > 32");if(e.length%4!=0)throw new Error("Invalid key, length % 4 != 0");return z.toBinary(e)}static _normalizeEntropy(e){return"string"==typeof e&&(e=z.fromHex(e)),e instanceof pe&&(e=e.serialize()),e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e}static _bitsToMnemonic(e,t){return e.match(/(.{11})/g).map(e=>{const r=ee.fromBinary(e);return t[r]})}static _mnemonicToBits(e,t){const r=e;if(r.length<12)throw new Error("Invalid mnemonic, less than 12 words");if(r.length>24)throw new Error("Invalid mnemonic, more than 24 words");if(r.length%3!=0)throw new Error("Invalid mnemonic, words % 3 != 0");return r.map((function(e){const r=t.indexOf(e.toLowerCase());if(-1===r)throw new Error(`Invalid mnemonic, word >${e}< is not in wordlist`);return oe.lpad(r.toString(2),"0",11)})).join("")}static _bitsToEntropy(e,t=!1){const r=e.length-(e.length%8||8),n=e.slice(0,r),i=e.slice(r),s=n.match(/(.{8})/g).map(ee.fromBinary);if(s.length<16)throw new Error("Invalid generated key, length < 16");if(s.length>32)throw new Error("Invalid generated key, length > 32");if(s.length%4!=0)throw new Error("Invalid generated key, length % 4 != 0");const o=new Uint8Array(s);if((t?se._crcChecksum(o):se._sha256Checksum(o))!==i)throw new Error("Invalid checksum");return o}static entropyToMnemonic(e,t){t=t||se.DEFAULT_WORDLIST,e=se._normalizeEntropy(e);const r=se._entropyToBits(e)+se._sha256Checksum(e);return se._bitsToMnemonic(r,t)}static entropyToLegacyMnemonic(e,t){t=t||se.DEFAULT_WORDLIST,e=se._normalizeEntropy(e);const r=se._entropyToBits(e)+se._crcChecksum(e);return se._bitsToMnemonic(r,t)}static mnemonicToEntropy(e,t){Array.isArray(e)||(e=e.trim().split(/\s+/g)),t=t||se.DEFAULT_WORDLIST;const r=se._mnemonicToBits(e,t);return new pe(se._bitsToEntropy(r,!1))}static legacyMnemonicToEntropy(e,t){Array.isArray(e)||(e=e.trim().split(/\s+/g)),t=t||se.DEFAULT_WORDLIST;const r=se._mnemonicToBits(e,t);return new pe(se._bitsToEntropy(r,!0))}static _salt(e){return`mnemonic${e||""}`}static mnemonicToSeed(e,t){Array.isArray(e)&&(e=e.join(" "));const r=z.fromAscii(e),n=z.fromAscii(se._salt(t));return X.computePBKDF2sha512(r,n,2048,64)}static mnemonicToExtendedPrivateKey(e,t){const r=se.mnemonicToSeed(e,t);return Ae.generateMasterKey(r)}static isCollidingChecksum(e){const t=se._normalizeEntropy(e);return se._crcChecksum(t)===se._sha256Checksum(t)}static getMnemonicType(e,t){Array.isArray(e)||(e=e.trim().split(/\s+/g)),t=t||se.DEFAULT_WORDLIST;const r=se._mnemonicToBits(e,t);let n=!0;try{se._bitsToEntropy(r,!1)}catch(e){n=!1}let i=!0;try{se._bitsToEntropy(r,!0)}catch(e){i=!1}if(n&&i)return se.MnemonicType.UNKNOWN;if(!n&&!i)throw new Error("Invalid checksum");return n?se.MnemonicType.BIP39:se.MnemonicType.LEGACY}}se.ENGLISH_WORDLIST=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],se.DEFAULT_WORDLIST=se.ENGLISH_WORDLIST,se.MnemonicType={UNKNOWN:-1,LEGACY:0,BIP39:1},Object.freeze(se),c.register(se);class oe{static isMultibyte(e){return/[\uD800-\uDFFF]/.test(e)}static isHex(e){return/^[0-9A-Fa-f]*$/.test(e)}static isHexBytes(e,t){return!!oe.isHex(e)&&e.length%2==0&&("number"!=typeof t||e.length/2===t)}static commonPrefix(e,t){let r=0;for(;r<e.length&&e[r]===t[r];++r);return e.substr(0,r)}static lpad(e,t,r){for(;e.length<r;)e=t+e;return e}}c.register(oe);class ae{static coinsToLunas(e){return Math.round(e*ae.LUNAS_PER_COIN)}static lunasToCoins(e){return e/ae.LUNAS_PER_COIN}static coinsToSatoshis(e){return ae.coinsToLunas(e)}static satoshisToCoins(e){return ae.lunasToCoins(e)}static get SATOSHIS_PER_COIN(){return ae.LUNAS_PER_COIN}static supplyAfter(e){let t=Math.floor(e/ae._supplyCacheInterval)*ae._supplyCacheInterval;const r=(t=Math.max(0,Math.min(t,ae._supplyCacheMax)))/ae._supplyCacheInterval,n=Math.floor(e/ae._supplyCacheInterval);let i=0===t?ae.INITIAL_SUPPLY:ae._supplyCache.get(t);for(let e=r;e<n;++e){t=e*ae._supplyCacheInterval;const r=(e+1)*ae._supplyCacheInterval-1;i=ae._supplyAfter(i,r,t),ae._supplyCache.set(r+1,i),ae._supplyCacheMax=r+1}return ae._supplyAfter(i,e,n*ae._supplyCacheInterval)}static _supplyAfter(e,t,r=0){let n=e;for(let e=r;e<=t;++e)n+=ae._blockRewardAt(n,e);return n}static blockRewardAt(e){const t=ae.supplyAfter(e-1);return ae._blockRewardAt(t,e)}static _blockRewardAt(e,t){if(t<=0)return 0;const r=ae.TOTAL_SUPPLY-e;return t>=ae.EMISSION_TAIL_START&&r>=ae.EMISSION_TAIL_REWARD?ae.EMISSION_TAIL_REWARD:(r-r%ae.EMISSION_SPEED)/ae.EMISSION_SPEED}}ae.BLOCK_TIME=60,ae.BLOCK_SIZE_MAX=1e5,ae.BLOCK_TARGET_MAX=new J(2).pow(240),ae.DIFFICULTY_BLOCK_WINDOW=120,ae.DIFFICULTY_MAX_ADJUSTMENT_FACTOR=2,ae.TRANSACTION_VALIDITY_WINDOW=120,ae.LUNAS_PER_COIN=1e5,ae.TOTAL_SUPPLY=21e14,ae.INITIAL_SUPPLY=252e12,ae.EMISSION_SPEED=Math.pow(2,22),ae.EMISSION_TAIL_START=48692960,ae.EMISSION_TAIL_REWARD=4e3,ae.M=240,ae.K=120,ae.DELTA=.15,ae.NUM_BLOCKS_VERIFICATION=250,ae.NUM_SNAPSHOTS_MAX=20,ae._supplyCache=new Map,ae._supplyCacheMax=0,ae._supplyCacheInterval=5e3,c.register(ae);class ce{equals(e){return e instanceof ce&&z.equals(this.serialize(),e.serialize())}compare(e){return z.compare(this.serialize(),e.serialize())}hashCode(){return this.toBase64()}serialize(e){}toString(){return this.toBase64()}toBase64(){return z.toBase64(this.serialize())}toHex(){return z.toHex(this.serialize())}}c.register(ce);class ue extends ce{constructor(e,t=ue.Algorithm.BLAKE2B){if(null===e)e=new Uint8Array(ue.getSize(t));else{if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==ue.getSize(t))throw new Error("Primitive: Invalid length")}super(),this._obj=e,this._algorithm=t}static light(e){return ue.blake2b(e)}static blake2b(e){return new ue(ue.computeBlake2b(e),ue.Algorithm.BLAKE2B)}static hard(e){return ue.argon2d(e)}static async argon2d(e){return new ue(await(await Q.getInstanceAsync()).computeArgon2d(e),ue.Algorithm.ARGON2D)}static sha256(e){return new ue(ue.computeSha256(e),ue.Algorithm.SHA256)}static sha512(e){return new ue(ue.computeSha512(e),ue.Algorithm.SHA512)}static compute(e,t){switch(t){case ue.Algorithm.BLAKE2B:return ue.blake2b(e);case ue.Algorithm.SHA256:return ue.sha256(e);default:throw new Error("Invalid hash algorithm")}}static unserialize(e,t=ue.Algorithm.BLAKE2B){return new ue(e.read(ue.getSize(t)),t)}serialize(e){return(e=e||new j(this.serializedSize)).write(this._obj),e}subarray(e,t){return this._obj.subarray(e,t)}get serializedSize(){return ue.SIZE.get(this._algorithm)}get array(){return this._obj}get algorithm(){return this._algorithm}equals(e){return e instanceof ue&&e._algorithm===this._algorithm&&super.equals(e)}static fromAny(e,t=ue.Algorithm.BLAKE2B){if(e instanceof ue)return e;try{return new ue(z.fromAny(e,ue.SIZE.get(t)),t)}catch(e){throw new Error("Invalid hash format")}}toPlain(){return this.toHex()}static fromBase64(e){return new ue(z.fromBase64(e))}static fromHex(e){return new ue(z.fromHex(e))}static fromPlain(e){return ue.fromString(e)}static fromString(e){try{return ue.fromHex(e)}catch(e){}try{return ue.fromBase64(e)}catch(e){}throw new Error("Invalid hash format")}static isHash(e){return e instanceof ue}static getSize(e){const t=ue.SIZE.get(e);if("number"!=typeof t)throw new Error("Invalid hash algorithm");return t}static computeBlake2b(e){if(m.isNodeJs()){const t=new Uint8Array(ue.getSize(ue.Algorithm.BLAKE2B));return NodeNative.node_blake2(t,new Uint8Array(e)),t}{let t;try{t=Module.stackSave();const r=ue.getSize(ue.Algorithm.BLAKE2B),n=Module.stackAlloc(r),i=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,i,e.length).set(e);const s=Module._nimiq_blake2(n,i,e.length);if(0!==s)throw s;const o=new Uint8Array(r);return o.set(new Uint8Array(Module.HEAPU8.buffer,n,r)),o}catch(e){throw h.w(ue,e),e}finally{void 0!==t&&Module.stackRestore(t)}}}static computeSha256(e){if(m.isNodeJs()){const t=new Uint8Array(ue.getSize(ue.Algorithm.SHA256));return NodeNative.node_sha256(t,new Uint8Array(e)),t}{let t;try{t=Module.stackSave();const r=ue.getSize(ue.Algorithm.SHA256),n=Module.stackAlloc(r),i=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,i,e.length).set(e),Module._nimiq_sha256(n,i,e.length);const s=new Uint8Array(r);return s.set(new Uint8Array(Module.HEAPU8.buffer,n,r)),s}catch(e){throw h.w(ue,e),e}finally{void 0!==t&&Module.stackRestore(t)}}}static computeSha512(e){if(m.isNodeJs()){const t=new Uint8Array(ue.getSize(ue.Algorithm.SHA512));return NodeNative.node_sha512(t,new Uint8Array(e)),t}{let t;try{t=Module.stackSave();const r=ue.getSize(ue.Algorithm.SHA512),n=Module.stackAlloc(r),i=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,i,e.length).set(e),Module._nimiq_sha512(n,i,e.length);const s=new Uint8Array(r);return s.set(new Uint8Array(Module.HEAPU8.buffer,n,r)),s}catch(e){throw h.w(ue,e),e}finally{void 0!==t&&Module.stackRestore(t)}}}}ue.Algorithm={BLAKE2B:1,ARGON2D:2,SHA256:3,SHA512:4},ue.Algorithm.toString=function(e){switch(e){case ue.Algorithm.BLAKE2B:return"blake2b";case ue.Algorithm.ARGON2D:return"argon2d";case ue.Algorithm.SHA256:return"sha256";case ue.Algorithm.SHA512:return"sha512"}throw new Error("Invalid hash algorithm")},ue.SIZE=new Map,ue.SIZE.set(ue.Algorithm.BLAKE2B,32),ue.SIZE.set(ue.Algorithm.ARGON2D,32),ue.SIZE.set(ue.Algorithm.SHA256,32),ue.SIZE.set(ue.Algorithm.SHA512,64),ue.NULL=new ue(new Uint8Array(32)),c.register(ue);class he extends ce{constructor(e,t){super(),this._type=e,this._purposeId=t}static fromEncrypted(e,t){const r=e.readUint8(),n=e.readUint8();if(n>32)throw new Error("Rounds out-of-bounds");const i=Math.pow(2,n);switch(r){case 1:return he._decryptV1(e,t,i);case 2:return he._decryptV2(e,t,i);case 3:return he._decryptV3(e,t,i);default:throw new Error("Unsupported version")}}static async _decryptV1(e,t,r){const n=e.read(he.SIZE),i=e.read(he.ENCRYPTION_SALT_SIZE),s=e.read(he.ENCRYPTION_CHECKSUM_SIZE),o=await X.otpKdfLegacy(n,t,i,r),a=new le(o),c=fe.derive(a).hash().subarray(0,he.ENCRYPTION_CHECKSUM_SIZE);if(!z.equals(s,c))throw new Error("Invalid key");return a}static async _decryptV2(e,t,r){const n=e.read(he.SIZE),i=e.read(he.ENCRYPTION_SALT_SIZE),s=e.read(he.ENCRYPTION_CHECKSUM_SIZE),o=await X.otpKdfLegacy(n,t,i,r),a=ue.computeBlake2b(o).subarray(0,he.ENCRYPTION_CHECKSUM_SIZE);if(!z.equals(s,a))throw new Error("Invalid key");return new le(o)}static async _decryptV3(e,t,r){const n=e.read(he.ENCRYPTION_SALT_SIZE),i=e.read(he.ENCRYPTION_CHECKSUM_SIZE_V3+4+he.SIZE),s=await X.otpKdf(i,t,n,r),o=s.subarray(0,he.ENCRYPTION_CHECKSUM_SIZE_V3),a=s.subarray(he.ENCRYPTION_CHECKSUM_SIZE_V3),c=ue.computeBlake2b(a).subarray(0,he.ENCRYPTION_CHECKSUM_SIZE_V3);if(!z.equals(o,c))throw new Error("Invalid key");const u=a[0]<<24|a[1]<<16|a[2]<<8|a[3],h=a.subarray(4);switch(u){case le.PURPOSE_ID:return new le(h);case pe.PURPOSE_ID:default:return new pe(h)}}async exportEncrypted(e){const t=new Uint8Array(he.ENCRYPTION_SALT_SIZE);Q.lib.getRandomValues(t);const r=new j(4+he.SIZE);r.writeUint32(this._purposeId),r.write(this.serialize());const n=ue.computeBlake2b(r).subarray(0,he.ENCRYPTION_CHECKSUM_SIZE_V3),i=new j(n.byteLength+r.byteLength);i.write(n),i.write(r);const s=await X.otpKdf(i,e,t,he.ENCRYPTION_KDF_ROUNDS),o=new j(2+t.byteLength+s.byteLength);return o.writeUint8(3),o.writeUint8(Math.log2(he.ENCRYPTION_KDF_ROUNDS)),o.write(t),o.write(s),o}get encryptedSize(){return 2+he.ENCRYPTION_SALT_SIZE+he.ENCRYPTION_CHECKSUM_SIZE_V3+4+he.SIZE}get type(){return this._type}}he.Type={PRIVATE_KEY:1,ENTROPY:2},he.SIZE=32,he.ENCRYPTION_SALT_SIZE=16,he.ENCRYPTION_KDF_ROUNDS=256,he.ENCRYPTION_CHECKSUM_SIZE=4,he.ENCRYPTION_CHECKSUM_SIZE_V3=2,c.register(he);class le extends he{constructor(e){if(super(he.Type.PRIVATE_KEY,le.PURPOSE_ID),!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==le.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static generate(){const e=new Uint8Array(le.SIZE);return Q.lib.getRandomValues(e),new le(e)}static unserialize(e){return new le(e.read(le.SIZE))}serialize(e){return(e=e||new j(this.serializedSize)).write(this._obj),e}get serializedSize(){return le.SIZE}overwrite(e){this._obj.set(e._obj)}equals(e){return e instanceof le&&super.equals(e)}static _privateKeyDelinearize(e,t,r){if(e.byteLength!==le.SIZE||t.byteLength!==fe.SIZE||r.byteLength!==ue.getSize(ue.Algorithm.SHA512))throw Error("Wrong buffer size.");if(m.isNodeJs()){const n=new Uint8Array(fe.SIZE);return NodeNative.node_ed25519_derive_delinearized_private_key(n,new Uint8Array(r),new Uint8Array(t),new Uint8Array(e)),n}{let n;try{n=Module.stackSave();const i=Module.stackAlloc(fe.SIZE),s=Module.stackAlloc(e.length),o=Module.stackAlloc(t.length),a=Module.stackAlloc(r.length);new Uint8Array(Module.HEAPU8.buffer,s,e.length).set(e),new Uint8Array(Module.HEAPU8.buffer,o,t.length).set(t),new Uint8Array(Module.HEAPU8.buffer,a,r.length).set(r),Module._ed25519_derive_delinearized_private_key(i,a,o,s);const c=new Uint8Array(le.SIZE);return c.set(new Uint8Array(Module.HEAPU8.buffer,i,le.SIZE)),c}catch(e){throw h.w(Y,e),e}finally{void 0!==n&&Module.stackRestore(n)}}}}le.SIZE=he.SIZE,le.PURPOSE_ID=1107296257,c.register(le);class fe extends ce{static copy(e){return e?new fe(new Uint8Array(e._obj)):e}constructor(e){if(super(),!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==fe.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static derive(e){return new fe(fe._publicKeyDerive(e._obj))}static sum(e){return(e=e.slice()).sort((e,t)=>e.compare(t)),fe._delinearizeAndAggregatePublicKeys(e)}static unserialize(e){return new fe(e.read(fe.SIZE))}static fromAny(e){if(!e)throw new Error("Invalid public key format");if(e instanceof fe)return e;try{return new fe(z.fromAny(e,fe.SIZE))}catch(e){throw new Error("Invalid public key format")}}serialize(e){return(e=e||new j(this.serializedSize)).write(this._obj),e}get serializedSize(){return fe.SIZE}equals(e){return e instanceof fe&&super.equals(e)}hash(){return ue.light(this.serialize())}compare(e){return z.compare(this._obj,e._obj)}toAddress(){return we.fromHash(this.hash())}toPeerId(){return new Pr(this.hash().subarray(0,16))}static _delinearizeAndAggregatePublicKeys(e){const t=e.map(e=>e.serialize()),r=fe._publicKeysHash(t),n=fe._publicKeysDelinearizeAndAggregate(t,r);return new fe(n)}static _publicKeyDerive(e){if(e.byteLength!==le.SIZE)throw Error("Wrong buffer size.");if(m.isNodeJs()){const t=new Uint8Array(fe.SIZE);return NodeNative.node_ed25519_public_key_derive(t,new Uint8Array(e)),t}{let t;try{t=Module.stackSave();const r=Module.stackAlloc(fe.SIZE),n=new Uint8Array(Module.HEAP8.buffer,r,le.SIZE);n.set(e);const i=Module.stackAlloc(e.length),s=new Uint8Array(Module.HEAP8.buffer,i,le.SIZE);s.set(e),Module._ed25519_public_key_derive(r,i),s.fill(0);const o=new Uint8Array(fe.SIZE);return o.set(n),o}catch(e){throw h.w(fe,e),e}finally{void 0!==t&&Module.stackRestore(t)}}}static _publicKeysHash(e){if(e.some(e=>e.byteLength!==fe.SIZE))throw Error("Wrong buffer size.");const t=new Uint8Array(e.length*fe.SIZE);for(let r=0;r<e.length;++r)t.set(e[r],r*fe.SIZE);if(m.isNodeJs()){const r=new Uint8Array(ue.getSize(ue.Algorithm.SHA512));return NodeNative.node_ed25519_hash_public_keys(r,t,e.length),r}{let r;try{r=Module.stackSave();const n=ue.getSize(ue.Algorithm.SHA512),i=Module.stackAlloc(n),s=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,s,t.length).set(t),Module._ed25519_hash_public_keys(i,s,e.length);const o=new Uint8Array(n);return o.set(new Uint8Array(Module.HEAPU8.buffer,i,n)),o}catch(e){throw h.w(fe,e),e}finally{void 0!==r&&Module.stackRestore(r)}}}static _publicKeyDelinearize(e,t){if(e.byteLength!==fe.SIZE||t.byteLength!==ue.getSize(ue.Algorithm.SHA512))throw Error("Wrong buffer size.");if(m.isNodeJs()){const r=new Uint8Array(fe.SIZE);return NodeNative.node_ed25519_delinearize_public_key(r,new Uint8Array(t),new Uint8Array(e)),r}{let r;try{r=Module.stackSave();const n=Module.stackAlloc(fe.SIZE),i=Module.stackAlloc(e.length),s=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,i,e.length).set(e),new Uint8Array(Module.HEAPU8.buffer,s,t.length).set(t),Module._ed25519_delinearize_public_key(n,s,i);const o=new Uint8Array(fe.SIZE);return o.set(new Uint8Array(Module.HEAPU8.buffer,n,fe.SIZE)),o}catch(e){throw h.w(fe,e),e}finally{void 0!==r&&Module.stackRestore(r)}}}static _publicKeysDelinearizeAndAggregate(e,t){if(e.some(e=>e.byteLength!==fe.SIZE)||t.byteLength!==ue.getSize(ue.Algorithm.SHA512))throw Error("Wrong buffer size.");const r=new Uint8Array(e.length*fe.SIZE);for(let t=0;t<e.length;++t)r.set(e[t],t*fe.SIZE);if(m.isNodeJs()){const n=new Uint8Array(fe.SIZE);return NodeNative.node_ed25519_aggregate_delinearized_public_keys(n,new Uint8Array(t),r,e.length),n}{let n;try{n=Module.stackSave();const i=Module.stackAlloc(fe.SIZE),s=Module.stackAlloc(r.length),o=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,s,r.length).set(r),new Uint8Array(Module.HEAPU8.buffer,o,t.length).set(t),Module._ed25519_aggregate_delinearized_public_keys(i,o,s,e.length);const a=new Uint8Array(fe.SIZE);return a.set(new Uint8Array(Module.HEAPU8.buffer,i,fe.SIZE)),a}catch(e){throw h.w(fe,e),e}finally{void 0!==n&&Module.stackRestore(n)}}}}fe.SIZE=32,c.register(fe);class de extends ce{constructor(e,t,r=!1,n=null){if(!(e instanceof Object))throw new Error("Primitive: Invalid type");if(!(t instanceof Object))throw new Error("Primitive: Invalid type");super(),this._locked=r,this._lockedInternally=r,this._lockSalt=n,this._publicKey=t,this._internalPrivateKey=new le(e.serialize())}static generate(){const e=le.generate();return new de(e,fe.derive(e))}static derive(e){return new de(e,fe.derive(e))}static fromHex(e){return de.unserialize(z.fromHex(e))}static unserialize(e){const t=le.unserialize(e),r=fe.unserialize(e);let n=!1,i=null;return e.readPos<e.byteLength&&1===e.readUint8()&&(n=!0,i=e.read(32)),new de(t,r,n,i)}serialize(e){return e=e||new j(this.serializedSize),this._privateKey.serialize(e),this.publicKey.serialize(e),this._locked?(e.writeUint8(1),e.write(this._lockSalt)):e.writeUint8(0),e}get privateKey(){if(this.isLocked)throw new Error("KeyPair is locked");return this._privateKey}get _privateKey(){return this._unlockedPrivateKey||this._internalPrivateKey}get publicKey(){return this._publicKey||(this._publicKey=new fe(this._obj.publicKey))}get serializedSize(){return this._privateKey.serializedSize+this.publicKey.serializedSize+(this._locked?this._lockSalt.byteLength+1:1)}async lock(e,t){if(this._locked)throw new Error("KeyPair already locked");t&&(this._lockSalt=t),this._lockSalt&&0!==this._lockSalt.length||(this._lockSalt=new Uint8Array(32),Q.lib.getRandomValues(this._lockSalt)),this._internalPrivateKey.overwrite(await this._otpPrivateKey(e)),this._clearUnlockedPrivateKey(),this._locked=!0,this._lockedInternally=!0}async unlock(e){if(!this._locked)throw new Error("KeyPair not locked");const t=await this._otpPrivateKey(e);if(!fe.derive(t).equals(this.publicKey))throw new Error("Invalid key");this._unlockedPrivateKey=t,this._locked=!1}relock(){if(this._locked)throw new Error("KeyPair already locked");if(!this._lockedInternally)throw new Error("KeyPair was never locked");this._clearUnlockedPrivateKey(),this._locked=!0}_clearUnlockedPrivateKey(){this._lockedInternally&&!this._locked&&(this._unlockedPrivateKey.overwrite(le.unserialize(new j(this._unlockedPrivateKey.serializedSize))),this._unlockedPrivateKey=null)}async _otpPrivateKey(e){return new le(await X.otpKdfLegacy(this._privateKey.serialize(),e,this._lockSalt,de.LOCK_KDF_ROUNDS))}get isLocked(){return this._locked}static async fromEncrypted(e,t){const r=await he.fromEncrypted(e,t);if(r.type!==he.Type.PRIVATE_KEY)throw new Error("Expected privateKey, got Entropy");return de.derive(r)}exportEncrypted(e){return this._privateKey.exportEncrypted(e)}get encryptedSize(){return this._privateKey.encryptedSize}equals(e){return e instanceof de&&super.equals(e)}}de.LOCK_KDF_ROUNDS=256,c.register(de);class pe extends he{constructor(e){if(super(he.Type.ENTROPY,pe.PURPOSE_ID),!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==pe.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static generate(){const e=new Uint8Array(pe.SIZE);return Q.lib.getRandomValues(e),new pe(e)}toExtendedPrivateKey(e,t){return se.mnemonicToExtendedPrivateKey(this.toMnemonic(t),e)}toMnemonic(e){return se.entropyToMnemonic(this,e)}static unserialize(e){return new pe(e.read(pe.SIZE))}serialize(e){return(e=e||new j(this.serializedSize)).write(this._obj),e}get serializedSize(){return pe.SIZE}overwrite(e){this._obj.set(e._obj)}equals(e){return e instanceof pe&&super.equals(e)}}pe.SIZE=he.SIZE,pe.PURPOSE_ID=1107296258,c.register(pe);class Ae extends ce{constructor(e,t){if(super(),!(e instanceof le))throw new Error("ExtendedPrivateKey: Invalid key");if(!(t instanceof Uint8Array))throw new Error("ExtendedPrivateKey: Invalid chainCode");if(t.length!==Ae.CHAIN_CODE_SIZE)throw new Error("ExtendedPrivateKey: Invalid chainCode length");this._key=e,this._chainCode=t}static generateMasterKey(e){const t=z.fromAscii("ed25519 seed"),r=X.computeHmacSha512(t,e);return new Ae(new le(r.slice(0,32)),r.slice(32))}derive(e){e<2147483648&&(e+=2147483648);const t=new j(1+le.SIZE+4);t.writeUint8(0),this._key.serialize(t),t.writeUint32(e);const r=X.computeHmacSha512(this._chainCode,t);return new Ae(new le(r.slice(0,32)),r.slice(32))}static isValidPath(e){if(null===e.match(/^m(\/[0-9]+')*$/))return!1;const t=e.split("/");for(let e=1;e<t.length;e++)if(!ee.isUint32(parseInt(t[e])))return!1;return!0}derivePath(e){if(!Ae.isValidPath(e))throw new Error("Invalid path");let t=this;const r=e.split("/");for(let e=1;e<r.length;e++){const n=parseInt(r[e]);t=t.derive(n)}return t}static derivePathFromSeed(e,t){return Ae.generateMasterKey(t).derivePath(e)}static unserialize(e){const t=le.unserialize(e),r=e.read(Ae.CHAIN_CODE_SIZE);return new Ae(t,r)}serialize(e){return e=e||new j(this.serializedSize),this._key.serialize(e),e.write(this._chainCode),e}get serializedSize(){return this._key.serializedSize+Ae.CHAIN_CODE_SIZE}equals(e){return e instanceof Ae&&super.equals(e)}get privateKey(){return this._key}toAddress(){return fe.derive(this._key).toAddress()}}Ae.CHAIN_CODE_SIZE=32,c.register(Ae);class ge extends ce{constructor(e){if(super(),!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==ge.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static unserialize(e){return new ge(e.read(ge.SIZE))}serialize(e){return(e=e||new j(this.serializedSize)).write(this._obj),e}get serializedSize(){return ge.SIZE}equals(e){return e instanceof ge&&super.equals(e)}}ge.SIZE=32,c.register(ge);class ye extends ce{static copy(e){if(!e)return e;const t=new Uint8Array(e._obj);return new ye(t)}constructor(e){if(super(),!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==ye.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static create(e,t,r){return new ye(ye._signatureCreate(e._obj,t._obj,r))}static fromPartialSignatures(e,t){const r=ye._combinePartialSignatures(e.serialize(),t.map(e=>e.serialize()));return new ye(r)}static unserialize(e){return new ye(e.read(ye.SIZE))}static fromAny(e){if(!e)throw new Error("Invalid signature format");if(e instanceof ye)return e;try{return new ye(z.fromAny(e,ye.SIZE))}catch(e){throw new Error("Invalid signature format")}}serialize(e){return(e=e||new j(this.serializedSize)).write(this._obj),e}get serializedSize(){return ye.SIZE}verify(e,t){return ye._signatureVerify(e._obj,t,this._obj)}equals(e){return e instanceof ye&&super.equals(e)}static _combinePartialSignatures(e,t){const r=ye._aggregatePartialSignatures(t);return z.concatTypedArrays(e,r)}static _aggregatePartialSignatures(e){return e.reduce((e,t)=>ye._scalarsAdd(e,t))}static _scalarsAdd(e,t){if(e.byteLength!==be.SIZE||t.byteLength!==be.SIZE)throw Error("Wrong buffer size.");if(m.isNodeJs()){const r=new Uint8Array(be.SIZE);return NodeNative.node_ed25519_add_scalars(r,new Uint8Array(e),new Uint8Array(t)),r}{let r;try{r=Module.stackSave();const n=Module.stackAlloc(be.SIZE),i=Module.stackAlloc(e.length),s=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,i,e.length).set(e),new Uint8Array(Module.HEAPU8.buffer,s,t.length).set(t),Module._ed25519_add_scalars(n,i,s);const o=new Uint8Array(be.SIZE);return o.set(new Uint8Array(Module.HEAPU8.buffer,n,be.SIZE)),o}catch(e){throw h.w(ye,e),e}finally{void 0!==r&&Module.stackRestore(r)}}}static _signatureCreate(e,t,r){if(t.byteLength!==fe.SIZE||e.byteLength!==le.SIZE)throw Error("Wrong buffer size.");if(m.isNodeJs()){const n=new Uint8Array(ye.SIZE);return NodeNative.node_ed25519_sign(n,new Uint8Array(r),new Uint8Array(t),new Uint8Array(e)),n}{let n;try{n=Module.stackSave();const i=Module.stackAlloc(ye.SIZE),s=new Uint8Array(Module.HEAP8.buffer,i,ye.SIZE),o=Module.stackAlloc(r.length);new Uint8Array(Module.HEAP8.buffer,o,r.length).set(r);const a=Module.stackAlloc(t.length);new Uint8Array(Module.HEAP8.buffer,a,t.length).set(t);const c=Module.stackAlloc(e.length),u=new Uint8Array(Module.HEAP8.buffer,c,e.length);u.set(e),Module._ed25519_sign(i,o,r.byteLength,a,c),u.fill(0);const h=new Uint8Array(ye.SIZE);return h.set(s),h}catch(e){throw h.w(ye,e),e}finally{void 0!==n&&Module.stackRestore(n)}}}static _signatureVerify(e,t,r){if(m.isNodeJs())return!!NodeNative.node_ed25519_verify(new Uint8Array(r),new Uint8Array(t),new Uint8Array(e));{let n;try{n=Module.stackSave();const i=Module.stackAlloc(e.length);new Uint8Array(Module.HEAP8.buffer,i,e.length).set(e);const s=Module.stackAlloc(t.length);new Uint8Array(Module.HEAP8.buffer,s,t.length).set(t);const o=Module.stackAlloc(r.length);return new Uint8Array(Module.HEAP8.buffer,o,r.length).set(r),!!Module._ed25519_verify(o,s,t.byteLength,i)}catch(e){throw h.w(ye,e),e}finally{void 0!==n&&Module.stackRestore(n)}}}}ye.SIZE=64,c.register(ye);class me extends ce{static copy(e){return e?new me(new Uint8Array(e._obj)):e}static sum(e){return new me(me._commitmentsAggregate(e.map(e=>e._obj)))}constructor(e){if(super(),!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==me.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static unserialize(e){return new me(e.read(me.SIZE))}serialize(e){return(e=e||new j(this.serializedSize)).write(this._obj),e}get serializedSize(){return me.SIZE}equals(e){return e instanceof me&&super.equals(e)}static _commitmentsAggregate(e){if(e.some(e=>e.byteLength!==fe.SIZE))throw Error("Wrong buffer size.");const t=new Uint8Array(e.length*fe.SIZE);for(let r=0;r<e.length;++r)t.set(e[r],r*fe.SIZE);if(m.isNodeJs()){const r=new Uint8Array(fe.SIZE);return NodeNative.node_ed25519_aggregate_commitments(r,t,e.length),r}{let r;try{r=Module.stackSave();const n=Module.stackAlloc(fe.SIZE),i=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,i,t.length).set(t),Module._ed25519_aggregate_commitments(n,i,e.length);const s=new Uint8Array(fe.SIZE);return s.set(new Uint8Array(Module.HEAPU8.buffer,n,fe.SIZE)),s}catch(e){throw h.w(Y,e),e}finally{void 0!==r&&Module.stackRestore(r)}}}}me.SIZE=32,c.register(me);class _e extends ce{constructor(e,t){if(super(),!(e instanceof ge))throw new Error("Primitive: Invalid type");if(!(t instanceof me))throw new Error("Primitive: Invalid type");this._secret=e,this._commitment=t}static generate(){const e=new Uint8Array(_e.RANDOMNESS_SIZE);Q.lib.getRandomValues(e);const t=_e._commitmentCreate(e);return new _e(new ge(t.secret),new me(t.commitment))}static unserialize(e){const t=ge.unserialize(e),r=me.unserialize(e);return new _e(t,r)}static fromHex(e){return this.unserialize(z.fromHex(e))}serialize(e){return e=e||new j(this.serializedSize),this.secret.serialize(e),this.commitment.serialize(e),e}get secret(){return this._secret}get commitment(){return this._commitment}get serializedSize(){return this.secret.serializedSize+this.commitment.serializedSize}equals(e){return e instanceof _e&&super.equals(e)}static _commitmentCreate(e){if(m.isNodeJs()){const t=new Uint8Array(fe.SIZE),r=new Uint8Array(le.SIZE);return NodeNative.node_ed25519_create_commitment(r,t,e),{commitment:t,secret:r}}{let t;try{t=Module.stackSave();const r=Module.stackAlloc(fe.SIZE),n=Module.stackAlloc(le.SIZE),i=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,i,e.length).set(e);const s=Module._ed25519_create_commitment(n,r,i);if(1!==s)throw new Error(`Secret must not be 0 or 1: ${s}`);const o=new Uint8Array(fe.SIZE),a=new Uint8Array(le.SIZE);return o.set(new Uint8Array(Module.HEAPU8.buffer,r,fe.SIZE)),a.set(new Uint8Array(Module.HEAPU8.buffer,n,le.SIZE)),{commitment:o,secret:a}}catch(e){throw h.w(_e,e),e}finally{void 0!==t&&Module.stackRestore(t)}}}}_e.SERIALIZED_SIZE=ge.SIZE+ye.SIZE,_e.RANDOMNESS_SIZE=32,c.register(_e);class be extends ce{constructor(e){if(super(),!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==be.SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static create(e,t,r,n,i,s){const o=be._delinearizedPartialSignatureCreate(r.map(e=>e._obj),e._obj,t._obj,n._obj,i._obj,s);return new be(o)}static unserialize(e){return new be(e.read(be.SIZE))}serialize(e){return(e=e||new j(this.serializedSize)).write(this._obj),e}get serializedSize(){return be.SIZE}equals(e){return e instanceof be&&super.equals(e)}static _delinearizedPartialSignatureCreate(e,t,r,n,i,s){if(e.some(e=>e.byteLength!==fe.SIZE)||t.byteLength!==le.SIZE||r.byteLength!==fe.SIZE||n.byteLength!==ge.SIZE||i.byteLength!==me.SIZE)throw Error("Wrong buffer size.");const o=new Uint8Array(e.length*fe.SIZE);for(let t=0;t<e.length;++t)o.set(e[t],t*fe.SIZE);if(m.isNodeJs()){const a=new Uint8Array(be.SIZE);return NodeNative.node_ed25519_delinearized_partial_sign(a,new Uint8Array(s),new Uint8Array(i),new Uint8Array(n),new Uint8Array(o),e.length,new Uint8Array(r),new Uint8Array(t)),a}{let a;try{a=Module.stackSave();const c=Module.stackAlloc(be.SIZE),u=Module.stackAlloc(o.length),h=Module.stackAlloc(t.length),l=Module.stackAlloc(r.length),f=Module.stackAlloc(n.length),d=Module.stackAlloc(i.length),p=Module.stackAlloc(s.length);new Uint8Array(Module.HEAPU8.buffer,u,o.length).set(o),new Uint8Array(Module.HEAPU8.buffer,h,t.length).set(t),new Uint8Array(Module.HEAPU8.buffer,l,r.length).set(r),new Uint8Array(Module.HEAPU8.buffer,f,n.length).set(n),new Uint8Array(Module.HEAPU8.buffer,d,i.length).set(i),new Uint8Array(Module.HEAPU8.buffer,p,s.length).set(s),Module._ed25519_delinearized_partial_sign(c,p,s.length,d,f,u,e.length,l,h);const A=new Uint8Array(be.SIZE);return A.set(new Uint8Array(Module.HEAPU8.buffer,c,be.SIZE)),A}catch(e){throw h.w(Y,e),e}finally{void 0!==a&&Module.stackRestore(a)}}}}be.SIZE=32,c.register(be);class we extends ce{static copy(e){if(!e)return e;const t=new Uint8Array(e._obj);return new we(t)}static fromHash(e){return new we(e.subarray(0,we.SERIALIZED_SIZE))}constructor(e){if(super(),!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==we.SERIALIZED_SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static unserialize(e){return new we(e.read(we.SERIALIZED_SIZE))}serialize(e){return(e=e||new j(this.serializedSize)).write(this._obj),e}subarray(e,t){return this._obj.subarray(e,t)}get serializedSize(){return we.SERIALIZED_SIZE}equals(e){return e instanceof we&&super.equals(e)}static fromAny(e){if(e instanceof we)return e;if("string"==typeof e)return we.fromString(e);throw new Error("Invalid address format")}toPlain(){return this.toUserFriendlyAddress()}static fromString(e){try{return we.fromUserFriendlyAddress(e)}catch(e){}try{return we.fromHex(e)}catch(e){}try{return we.fromBase64(e)}catch(e){}throw new Error("Invalid address format")}static fromBase64(e){return new we(z.fromBase64(e))}static fromHex(e){return new we(z.fromHex(e))}static fromUserFriendlyAddress(e){if((e=e.replace(/ /g,"")).substr(0,2).toUpperCase()!==we.CCODE)throw new Error("Invalid Address: Wrong country code");if(36!==e.length)throw new Error("Invalid Address: Should be 36 chars (ignoring spaces)");if(1!==we._ibanCheck(e.substr(4)+e.substr(0,4)))throw new Error("Invalid Address: Checksum invalid");return new we(z.fromBase32(e.substr(4)))}static _ibanCheck(e){const t=e.split("").map(e=>{const t=e.toUpperCase().charCodeAt(0);return t>=48&&t<=57?e:(t-55).toString()}).join("");let r="";for(let e=0;e<Math.ceil(t.length/6);e++)r=(parseInt(r+t.substr(6*e,6))%97).toString();return parseInt(r)}toUserFriendlyAddress(e=!0){const t=z.toBase32(this.serialize()),r=("00"+(98-we._ibanCheck(t+we.CCODE+"00"))).slice(-2);let n=we.CCODE+r+t;return e&&(n=n.replace(/.{4}/g,"$& ").trim()),n}}we.CCODE="NQ",we.SERIALIZED_SIZE=20,we.HEX_SIZE=40,we.NULL=new we(new Uint8Array(we.SERIALIZED_SIZE)),we.CONTRACT_CREATION=new we(new Uint8Array(we.SERIALIZED_SIZE)),c.register(we);class ve{constructor(e,t){if(!ee.isUint8(e))throw new Error("Malformed type");if(!ee.isUint64(t))throw new Error("Malformed balance");this._type=e,this._balance=t}static unserialize(e){const t=e.readUint8();if(e.readPos--,!ve.TYPE_MAP.has(t))throw new Error("Unknown account type");return ve.TYPE_MAP.get(t).unserialize(e)}serialize(e){return(e=e||new j(this.serializedSize)).writeUint8(this._type),e.writeUint64(this._balance),e}get serializedSize(){return 9}equals(e){return z.equals(this.serialize(),e.serialize())}toString(){return`Account{type=${this._type}, balance=${this._balance.toString()}`}static fromAny(e){return e instanceof ve?e:ve.fromPlain(e)}static fromPlain(e){if(!e||void 0===e.type)throw new Error("Invalid account");const t=ve.Type.fromAny(e.type);return ve.TYPE_MAP.get(t).fromPlain(e)}toPlain(){return{type:ve.Type.toString(this.type),balance:this.balance}}get balance(){return this._balance}get type(){return this._type}withBalance(e){throw new Error("Not yet implemented.")}withOutgoingTransaction(e,t,r,n=!1){if(n){if(t<e.validityStartHeight||t>=e.validityStartHeight+ae.TRANSACTION_VALIDITY_WINDOW)throw new ve.ValidityError;return this.withBalance(this._balance+e.value+e.fee)}{const n=this._balance-e.value-e.fee;if(n<0)throw new ve.BalanceError;if(t<e.validityStartHeight||t>=e.validityStartHeight+ae.TRANSACTION_VALIDITY_WINDOW)throw new ve.ValidityError;if(r.containsTransaction(e))throw new ve.DoubleTransactionError;return this.withBalance(n)}}withIncomingTransaction(e,t,r=!1){if(r){const t=this._balance-e.value;if(t<0)throw new ve.BalanceError;return this.withBalance(t)}return this.withBalance(this._balance+e.value)}withContractCommand(e,t,r=!1){throw new Error("Not yet implemented")}isInitial(){return this===ve.INITIAL}isToBePruned(){return 0===this._balance&&!this.isInitial()}static dataToPlain(e){return{}}static proofToPlain(e){return{}}}ve.Type={BASIC:0,VESTING:1,HTLC:2},ve.Type.toString=function(e){switch(e){case ve.Type.BASIC:return"basic";case ve.Type.VESTING:return"vesting";case ve.Type.HTLC:return"htlc"}throw new Error("Invalid account type")},ve.Type.fromAny=function(e){if("number"==typeof e)return e;switch(e){case"basic":return ve.Type.BASIC;case"vesting":return ve.Type.VESTING;case"htlc":return ve.Type.HTLC}throw new Error("Invalid account type")},ve.TYPE_MAP=new Map,ve.BalanceError=class extends Error{constructor(){super("Balance Error!")}},ve.DoubleTransactionError=class extends Error{constructor(){super("Double Transaction Error!")}},ve.ProofError=class extends Error{constructor(){super("Proof Error!")}},ve.ValidityError=class extends Error{constructor(){super("Validity Error!")}},c.register(ve);class Ee{constructor(e,t){if(!(e instanceof we))throw new Error("Malformed address");this._address=e,this._account=t}static unserialize(e){return new Ee(we.unserialize(e),ve.unserialize(e))}static fromAny(e){return e instanceof Ee?e:Ee.fromPlain(e)}static fromPlain(e){return new Ee(we.fromAny(e.address),ve.fromAny(e.account))}compare(e){return this._address.compare(e._address)}get address(){return this._address}get account(){return this._account}serialize(e){return e=e||new j(this.serializedSize),this._address.serialize(e),this._account.serialize(e),this}get serializedSize(){return this._address.serializedSize+this._account.serializedSize}hashCode(){return this._address.hashCode()}toPlain(){return{address:this.address.toPlain(),account:this.account.toPlain()}}}c.register(Ee);class Se extends ve{static copy(e){return e?new Se(e._balance):e}constructor(e=0){super(ve.Type.BASIC,e)}static unserialize(e){if(e.readUint8()!==ve.Type.BASIC)throw new Error("Invalid account type");const t=e.readUint64();return new Se(t)}static fromPlain(e){if(!e)throw new Error("Invalid account");return new Se(e.balance)}equals(e){return e instanceof Se&&this._type===e._type&&this._balance===e._balance}toString(){return`BasicAccount{balance=${this._balance}}`}static verifyOutgoingTransaction(e){return qe.verifyTransaction(e)}static verifyIncomingTransaction(e){return!(e.data.byteLength>64)}withBalance(e){return new Se(e)}withIncomingTransaction(e,t,r=!1){if(!r&&e.hasFlag(He.Flag.CONTRACT_CREATION)!==(e.recipientType!==this._type))throw new Error("Data Error!");return super.withIncomingTransaction(e,t,r)}withContractCommand(e,t,r=!1){return!r&&e.recipientType!==this._type&&e.hasFlag(He.Flag.CONTRACT_CREATION)?ve.TYPE_MAP.get(e.recipientType).create(this._balance,t,e):this}isInitial(){return 0===this._balance}static dataToPlain(e){return ve.dataToPlain(e)}static proofToPlain(e){try{const t=qe.unserialize(new j(e));return{signature:t.signature.toHex(),publicKey:t.publicKey.toHex(),signer:t.publicKey.toAddress().toPlain(),pathLength:t.merklePath.nodes.length}}catch(t){return ve.proofToPlain(e)}}}ve.INITIAL=new Se(0),ve.TYPE_MAP.set(ve.Type.BASIC,Se),c.register(Se);class Ce extends ve{constructor(e,t){super(e,t)}static verifyIncomingTransaction(e){return!!e.recipient.equals(e.getContractCreationAddress())}withIncomingTransaction(e,t,r=!1){if(!r&&e.hasFlag(He.Flag.CONTRACT_CREATION))throw new Error("Data error");return super.withIncomingTransaction(e,t,r)}withContractCommand(e,t,r=!1){return r&&e.hasFlag(He.Flag.CONTRACT_CREATION)?new Se(this.balance):this}}c.register(Ce);class ke extends Ce{constructor(e=0,t=we.NULL,r=we.NULL,n=ue.NULL,i=1,s=0,o=e){if(super(ve.Type.HTLC,e),!(t instanceof we))throw new Error("Malformed address");if(!(r instanceof we))throw new Error("Malformed address");if(!(n instanceof ue))throw new Error("Malformed address");if(!ee.isUint8(i)||0===i)throw new Error("Malformed hashCount");if(!ee.isUint32(s))throw new Error("Malformed timeout");if(!ee.isUint64(o))throw new Error("Malformed totalAmount");this._sender=t,this._recipient=r,this._hashRoot=n,this._hashCount=i,this._timeout=s,this._totalAmount=o}static create(e,t,r){const n=new j(r.data),i=we.unserialize(n),s=we.unserialize(n),o=n.readUint8(),a=ue.unserialize(n,o),c=n.readUint8(),u=n.readUint32();return new ke(e,i,s,a,c,u)}static unserialize(e){if(e.readUint8()!==ve.Type.HTLC)throw new Error("Invalid account type");const t=e.readUint64(),r=we.unserialize(e),n=we.unserialize(e),i=e.readUint8(),s=ue.unserialize(e,i),o=e.readUint8(),a=e.readUint32(),c=e.readUint64();return new ke(t,r,n,s,o,a,c)}static fromPlain(e){if(!e)throw new Error("Invalid account");return new ke(e.balance,we.fromAny(e.sender),we.fromAny(e.recipient),ue.fromAny(e.hashRoot),e.hashCount,e.timeout,e.totalAmount)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._sender.serialize(e),this._recipient.serialize(e),e.writeUint8(this._hashRoot.algorithm),this._hashRoot.serialize(e),e.writeUint8(this._hashCount),e.writeUint32(this._timeout),e.writeUint64(this._totalAmount),e}get serializedSize(){return super.serializedSize+this._sender.serializedSize+this._recipient.serializedSize+1+this._hashRoot.serializedSize+1+4+8}get sender(){return this._sender}get recipient(){return this._recipient}get hashRoot(){return this._hashRoot}get hashCount(){return this._hashCount}get timeout(){return this._timeout}get totalAmount(){return this._totalAmount}toString(){return`HashedTimeLockedContract{balance=${this._balance}, sender=${this._sender.toUserFriendlyAddress(!1)}, recipient=${this._sender.toUserFriendlyAddress(!1)}, amount=${this._totalAmount}/${this._hashCount}, timeout=${this._timeout}}`}toPlain(){const e=super.toPlain();return e.sender=this.sender.toPlain(),e.recipient=this.recipient.toPlain(),e.hashRoot=this.hashRoot.toPlain(),e.hashCount=this.hashCount,e.timeout=this.timeout,e.totalAmount=this.totalAmount,e}equals(e){return e instanceof ke&&this._type===e._type&&this._balance===e._balance&&this._sender.equals(e._sender)&&this._recipient.equals(e._recipient)&&this._hashRoot.equals(e._hashRoot)&&this._hashCount===e._hashCount&&this._timeout===e._timeout&&this._totalAmount===e._totalAmount}static verifyOutgoingTransaction(e){try{const t=new j(e.proof);switch(t.readUint8()){case ke.ProofType.REGULAR_TRANSFER:{const r=t.readUint8(),n=t.readUint8(),i=ue.unserialize(t,r);let s=ue.unserialize(t,r);for(let e=0;e<n;++e)s=ue.compute(s.array,r);if(!i.equals(s))return!1;if(!qe.unserialize(t).verify(null,e.serializeContent()))return!1;break}case ke.ProofType.EARLY_RESOLVE:if(!qe.unserialize(t).verify(null,e.serializeContent()))return!1;if(!qe.unserialize(t).verify(null,e.serializeContent()))return!1;break;case ke.ProofType.TIMEOUT_RESOLVE:if(!qe.unserialize(t).verify(null,e.serializeContent()))return!1;break;default:return!1}return t.readPos===t.byteLength}catch(e){return!1}}static verifyIncomingTransaction(e){try{const t=new j(e.data);we.unserialize(t),we.unserialize(t);const r=t.readUint8();return ue.unserialize(t,r),t.readUint8(),t.readUint32(),r!==ue.Algorithm.ARGON2D&&t.readPos===t.byteLength&&Ce.verifyIncomingTransaction(e)}catch(e){return!1}}withBalance(e){return new ke(e,this._sender,this._recipient,this._hashRoot,this._hashCount,this._timeout,this._totalAmount)}withOutgoingTransaction(e,t,r,n=!1){const i=new j(e.proof);let s=0;switch(i.readUint8()){case ke.ProofType.REGULAR_TRANSFER:{if(this._timeout<t)throw new ve.ProofError;const e=i.readUint8(),r=i.readUint8();if(!ue.unserialize(i,e).equals(this._hashRoot))throw new ve.ProofError;if(ue.unserialize(i,e),!qe.unserialize(i).isSignedBy(this._recipient))throw new ve.ProofError;s=Math.max(0,Math.floor((1-r/this._hashCount)*this._totalAmount));break}case ke.ProofType.EARLY_RESOLVE:if(!qe.unserialize(i).isSignedBy(this._recipient))throw new ve.ProofError;if(!qe.unserialize(i).isSignedBy(this._sender))throw new ve.ProofError;break;case ke.ProofType.TIMEOUT_RESOLVE:if(this._timeout>=t)throw new ve.ProofError;if(!qe.unserialize(i).isSignedBy(this._sender))throw new ve.ProofError;break;default:throw new ve.ProofError}if(!n&&this._balance-e.value-e.fee<s)throw new ve.BalanceError;return super.withOutgoingTransaction(e,t,r,n)}withIncomingTransaction(e,t,r=!1){throw new Error("Illegal incoming transaction")}static dataToPlain(e){try{const e=new j(proof),t=we.unserialize(e),r=we.unserialize(e),n=e.readUint8(),i=ue.unserialize(e,n),s=e.readUint8(),o=e.readUint32();return{sender:t.toPlain(),recipient:r.toPlain(),hashAlgorithm:ue.Algorithm.toString(n),hashRoot:i.toPlain(),hashCount:s,timeout:o}}catch(t){return ve.dataToPlain(e)}}static proofToPlain(e){try{const t=new j(e),r=t.readUint8();switch(r){case ke.ProofType.REGULAR_TRANSFER:{const e=t.readUint8(),n=t.readUint8(),i=ue.unserialize(t,e),s=ue.unserialize(t,e),o=qe.unserialize(t);return{type:ke.ProofType.toString(r),hashAlgorithm:ue.Algorithm.toString(e),hashDepth:n,hashRoot:i.toPlain(),preImage:s.toPlain(),signer:o.publicKey.toAddress().toPlain(),signature:o.signature.toHex(),publicKey:o.publicKey.toHex(),pathLength:o.merklePath.nodes.length}}case ke.ProofType.EARLY_RESOLVE:{const e=qe.unserialize(t),n=qe.unserialize(t);return{type:ke.ProofType.toString(r),signer:e.publicKey.toAddress().toPlain(),signature:e.signature.toHex(),publicKey:e.publicKey.toHex(),pathLength:e.merklePath.nodes.length,creator:n.publicKey.toAddress().toPlain(),creatorSignature:n.signature.toHex(),creatorPublicKey:n.publicKey.toHex(),creatorPathLength:n.merklePath.nodes.length}}case ke.ProofType.TIMEOUT_RESOLVE:{const e=qe.unserialize(t);return{type:ke.ProofType.toString(r),creator:e.publicKey.toAddress().toPlain(),creatorSignature:e.signature.toHex(),creatorPublicKey:e.publicKey.toHex(),creatorPathLength:e.merklePath.nodes.length}}default:return!1}}catch(t){return ve.proofToPlain(e)}}}ke.ProofType={REGULAR_TRANSFER:1,EARLY_RESOLVE:2,TIMEOUT_RESOLVE:3},ke.ProofType.toString=function(e){switch(e){case ke.ProofType.REGULAR_TRANSFER:return"regular-transfer";case ke.ProofType.EARLY_RESOLVE:return"early-resolve";case ke.ProofType.TIMEOUT_RESOLVE:return"timeout-resolve"}throw new Error("Invalid proof type")},ve.TYPE_MAP.set(ve.Type.HTLC,ke),c.register(ke);class Ie extends Ce{constructor(e=0,t=we.NULL,r=0,n=0,i=e,s=e){if(super(ve.Type.VESTING,e),!(t instanceof we))throw new Error("Malformed address");if(!ee.isUint32(r))throw new Error("Malformed vestingStart");if(!ee.isUint32(n))throw new Error("Malformed vestingStepBlocks");if(!ee.isUint64(i))throw new Error("Malformed vestingStepAmount");if(!ee.isUint64(s))throw new Error("Malformed lowerCap");this._owner=t,this._vestingStart=r,this._vestingStepBlocks=n,this._vestingStepAmount=i,this._vestingTotalAmount=s}static create(e,t,r){let n,i,s,o;const a=new j(r.data),c=we.unserialize(a);switch(o=r.value,r.data.length){case we.SERIALIZED_SIZE+4:n=0,i=a.readUint32(),s=o;break;case we.SERIALIZED_SIZE+16:n=a.readUint32(),i=a.readUint32(),s=a.readUint64();break;case we.SERIALIZED_SIZE+24:n=a.readUint32(),i=a.readUint32(),s=a.readUint64(),o=a.readUint64();break;default:throw new Error("Invalid transaction data")}return new Ie(e,c,n,i,s,o)}static unserialize(e){if(e.readUint8()!==ve.Type.VESTING)throw new Error("Invalid account type");const t=e.readUint64(),r=we.unserialize(e),n=e.readUint32(),i=e.readUint32(),s=e.readUint64(),o=e.readUint64();return new Ie(t,r,n,i,s,o)}static fromPlain(e){if(!e)throw new Error("Invalid account");return new Ie(e.balance,we.fromAny(e.owner),e.vestingStart,e.vestingStepBlocks,e.vestingStepAmount,e.vestingTotalAmount)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._owner.serialize(e),e.writeUint32(this._vestingStart),e.writeUint32(this._vestingStepBlocks),e.writeUint64(this._vestingStepAmount),e.writeUint64(this._vestingTotalAmount),e}get serializedSize(){return super.serializedSize+this._owner.serializedSize+4+4+8+8}get owner(){return this._owner}get vestingStart(){return this._vestingStart}get vestingStepBlocks(){return this._vestingStepBlocks}get vestingStepAmount(){return this._vestingStepAmount}get vestingTotalAmount(){return this._vestingTotalAmount}toString(){return`VestingAccount{balance=${this._balance}, owner=${this._owner.toUserFriendlyAddress()}`}toPlain(){const e=super.toPlain();return e.owner=this.owner.toPlain(),e.vestingStart=this.vestingStart,e.vestingStepBlocks=this.vestingStepBlocks,e.vestingStepAmount=this.vestingStepAmount,e.vestingTotalAmount=this.vestingTotalAmount,e}equals(e){return e instanceof Ie&&this._type===e._type&&this._balance===e._balance&&this._owner.equals(e._owner)&&this._vestingStart===e._vestingStart&&this._vestingStepBlocks===e._vestingStepBlocks&&this._vestingStepAmount===e._vestingStepAmount&&this._vestingTotalAmount===e._vestingTotalAmount}static verifyOutgoingTransaction(e){const t=new j(e.proof);return!!qe.unserialize(t).verify(null,e.serializeContent())&&t.readPos===t.byteLength}static verifyIncomingTransaction(e){switch(e.data.length){case we.SERIALIZED_SIZE+4:case we.SERIALIZED_SIZE+16:case we.SERIALIZED_SIZE+24:return Ce.verifyIncomingTransaction(e);default:return!1}}withBalance(e){return new Ie(e,this._owner,this._vestingStart,this._vestingStepBlocks,this._vestingStepAmount,this._vestingTotalAmount)}withOutgoingTransaction(e,t,r,n=!1){if(!n){const r=this.getMinCap(t);if(this._balance-e.value-e.fee<r)throw new ve.BalanceError;const n=new j(e.proof);if(!qe.unserialize(n).isSignedBy(this._owner))throw new ve.ProofError}return super.withOutgoingTransaction(e,t,r,n)}withIncomingTransaction(e,t,r=!1){throw new Error("Illegal incoming transaction")}getMinCap(e){return this._vestingStepBlocks&&this._vestingStepAmount>0?Math.max(0,this._vestingTotalAmount-Math.floor((e-this._vestingStart)/this._vestingStepBlocks)*this._vestingStepAmount):0}static dataToPlain(e){try{let t,r,n,i;const s=new j(e),o=we.unserialize(s);switch(transaction.data.length){case we.SERIALIZED_SIZE+4:t=0,r=s.readUint32();break;case we.SERIALIZED_SIZE+16:t=s.readUint32(),r=s.readUint32(),n=s.readUint64();break;case we.SERIALIZED_SIZE+24:t=s.readUint32(),r=s.readUint32(),n=s.readUint64(),i=s.readUint64();break;default:throw new Error("Invalid transaction data")}return{owner:o.toPlain(),vestingStart:t,vestingStepBlocks:r,vestingStepAmount:n,vestingTotalAmount:i}}catch(t){return ve.dataToPlain(e)}}static proofToPlain(e){try{const t=qe.unserialize(new j(e));return{signature:t.signature.toHex(),publicKey:t.publicKey.toHex(),signer:t.publicKey.toAddress().toPlain(),pathLength:t.merklePath.nodes.length}}catch(t){return ve.proofToPlain(e)}}}ve.TYPE_MAP.set(ve.Type.VESTING,Ie),c.register(Ie);class Te{static terminalNode(e,t){return new Te(Te.TERMINAL,e,t)}static branchNode(e,t=[],r=[]){if(t.length!==r.length)throw new Error("Invalid list of children for branch node");return new Te(Te.BRANCH,e,t,r)}constructor(e,t="",r,n=[]){if(this._type=e,this._prefix=t,this.isBranch())this._childrenSuffixes=r,this._childrenHashes=n;else{if(!this.isTerminal())throw`Invalid AccountsTreeNode type: ${e}`;this._account=r}}static isTerminalType(e){return e===Te.TERMINAL}static isBranchType(e){return e===Te.BRANCH}static unserialize(e){const t=e.readUint8(),r=e.readVarLengthString();if(Te.isTerminalType(t)){const t=ve.unserialize(e);return Te.terminalNode(r,t)}if(Te.isBranchType(t)){const t=[],n=[],i=e.readUint8();for(let r=0;r<i;++r){const r=e.readVarLengthString(),i=ue.unserialize(e),s=parseInt(r[0],16);t[s]=r,n[s]=i}return Te.branchNode(r,t,n)}throw`Invalid AccountsTreeNode type: ${t}`}serialize(e){if((e=e||new j(this.serializedSize)).writeUint8(this._type),e.writeVarLengthString(this._prefix),this.isTerminal())this._account.serialize(e);else{const t=this._childrenSuffixes.reduce((e,t)=>e+!!t,0);e.writeUint8(t);for(let t=0;t<this._childrenSuffixes.length;++t)this._childrenHashes[t]&&(e.writeVarLengthString(this._childrenSuffixes[t]),this._childrenHashes[t].serialize(e))}return e}get serializedSize(){let e;return e=this.isTerminal()?this._account.serializedSize:1+this._childrenHashes.reduce((e,t,r)=>e+(t?t.serializedSize+j.varLengthStringSize(this._childrenSuffixes[r]):0),0),1+j.varLengthStringSize(this._prefix)+e}getChildHash(e){return this._childrenHashes&&this._childrenHashes[this._getChildIndex(e)]}getChild(e){const t=this._childrenSuffixes&&this._childrenSuffixes[this._getChildIndex(e)];return t?this.prefix+t:t}withChild(e,t){const r=this._childrenSuffixes.slice()||[],n=this._childrenHashes.slice()||[];return r[this._getChildIndex(e)]=e.substr(this.prefix.length),n[this._getChildIndex(e)]=t,Te.branchNode(this._prefix,r,n)}withoutChild(e){const t=this._childrenSuffixes.slice()||[],r=this._childrenHashes.slice()||[];return delete t[this._getChildIndex(e)],delete r[this._getChildIndex(e)],Te.branchNode(this._prefix,t,r)}hasChildren(){return this._childrenSuffixes&&this._childrenSuffixes.some(e=>!!e)}hasSingleChild(){return this._childrenSuffixes&&1===this._childrenSuffixes.reduce((e,t)=>e+!!t,0)}getFirstChild(){if(!this._childrenSuffixes)return;const e=this._childrenSuffixes.find(e=>!!e);return e?this.prefix+e:void 0}getLastChild(){if(this._childrenSuffixes)for(let e=this._childrenSuffixes.length-1;e>=0;--e)if(this._childrenSuffixes[e])return this.prefix+this._childrenSuffixes[e]}getChildren(){return this._childrenSuffixes?this._childrenSuffixes.filter(e=>!!e).map(e=>this.prefix+e):void 0}get account(){return this._account}get prefix(){return this._prefix}set prefix(e){this._prefix=e,this._hash=void 0}withAccount(e){return Te.terminalNode(this._prefix,e)}hash(){return this._hash||(this._hash=ue.light(this.serialize())),this._hash}isChildOf(e){return e.getChildren()&&e.getChildren().includes(this._prefix)}isTerminal(){return Te.isTerminalType(this._type)}isBranch(){return Te.isBranchType(this._type)}_getChildIndex(e){return F.that(e.substr(0,this.prefix.length)===this.prefix,`Prefix ${e} is not a child of the current node ${this.prefix}`),parseInt(e[this.prefix.length],16)}equals(e){if(!(e instanceof Te))return!1;if(!Object.is(this.prefix,e.prefix))return!1;if(this.isTerminal())return e.isTerminal()&&e._account.equals(this._account);if(!e.isBranch())return!1;if(this._childrenSuffixes.length!==e._childrenSuffixes.length)return!1;if(e._childrenSuffixes.length!==e._childrenHashes.length)return!1;for(let t=0;t<this._childrenSuffixes.length;++t){const r=this._childrenHashes[t],n=e._childrenHashes[t];if(r){if(!n||!r.equals(n))return!1}else if(n)return!1;if(this._childrenSuffixes[t]!==e._childrenSuffixes[t])return!1}return!0}}Te.BRANCH=0,Te.TERMINAL=255,c.register(Te);class Re{static initPersistent(e){e.createObjectStore("Accounts",{codec:new Ne})}static getPersistent(e){return new Re(e.getObjectStore("Accounts"))}static createVolatile(){const e=s.JungleDB.createVolatileObjectStore();return new Re(e)}constructor(e){this._store=e}get(e){return this._store.get(e)}async put(e){const t=e.prefix;return await this._store.put(t,e),t}async remove(e){const t=e.prefix;return await this._store.remove(t),t}getRootNode(){return this.get("")}async getTerminalNodes(e,t){const r=[];await this._store.keyStream(e=>e.length!==we.HEX_SIZE||(r.push(e),r.length!==t),!0,s.KeyRange.lowerBound(e,!0));const n=[];for(const e of r)n.push(this._store.get(e));return Promise.all(n)}snapshot(e){const t=this._store.snapshot();return e&&t.inherit(e._store),new Re(t)}transaction(e=!0){const t=this._store.transaction(e);return new Re(t)}synchronousTransaction(e=!0){const t=this._store.synchronousTransaction(e);return new Be(t)}truncate(){return this._store.truncate()}commit(){return this._store.commit()}abort(){return this._store.abort()}get tx(){return this._store instanceof s.Transaction?this._store:void 0}}c.register(Re);class Ne{encode(e){return e.serialize()}decode(e,t){return Te.unserialize(new j(e))}get valueEncoding(){return s.JungleDB.BINARY_ENCODING}}class Be extends Re{constructor(e){super(e),this._syncStore=e}async preload(e){await this._syncStore.preload(e)}getSync(e,t=!0){return this._syncStore.getSync(e,{expectPresence:t})}putSync(e){const t=e.prefix;return this._syncStore.putSync(t,e),t}removeSync(e){const t=e.prefix;return this._syncStore.removeSync(t),t}getRootNodeSync(){return this.getSync("")}}c.register(Be);class Oe{constructor(e){if(!e||!Array.isArray(e)||!ee.isUint16(e.length)||e.some(e=>!(e instanceof Te)))throw new Error("Malformed nodes");this._nodes=e,this._index=null}static unserialize(e){const t=e.readUint16(),r=[];for(let n=0;n<t;n++)r.push(Te.unserialize(e));return new Oe(r)}serialize(e){(e=e||new j(this.serializedSize)).writeUint16(this._nodes.length);for(const t of this._nodes)t.serialize(e);return e}get serializedSize(){let e=2;for(const t of this._nodes)e+=t.serializedSize;return e}verify(){const e=[];this._index=new T;for(const t of this._nodes){if(t.isBranch()){let r;for(;r=e.pop();){if(!r.isChildOf(t)){e.push(r);break}{const e=r.hash();if(!t.getChildHash(r.prefix).equals(e)||t.getChild(r.prefix)!==r.prefix)return!1;this._index.put(e,r)}}}e.push(t)}return 1===e.length&&""===e[0].prefix&&e[0].isBranch()}getAccount(e){if(!this._index)throw new Error("AccountsProof must be verified before retrieving accounts. Call verify() first.");const t=this._nodes[this._nodes.length-1],r=e.toHex();return this._getAccount(t,r)}_getAccount(e,t){const r=oe.commonPrefix(e.prefix,t);if(r.length!==e.prefix.length)return ve.INITIAL;if(r===t)return e.account;const n=e.getChildHash(t);if(n){const e=this._index.get(n);if(!e)throw new Error("Requested address not part of AccountsProof");return this._getAccount(e,t)}return ve.INITIAL}toString(){return`AccountsProof{length=${this.length}}`}root(){return this._nodes[this._nodes.length-1].hash()}get length(){return this._nodes.length}get nodes(){return this._nodes}}c.register(Oe);class Pe{constructor(e,t){if(!e||!ee.isUint16(e.length)||e.some(e=>!(e instanceof Te&&e.isTerminal())))throw new Error("Malformed nodes");this._nodes=e,this._proof=t}static unserialize(e){const t=e.readUint16(),r=[];for(let n=0;n<t;n++)r.push(Te.unserialize(e));const n=Oe.unserialize(e);return new Pe(r,n)}serialize(e){(e=e||new j(this.serializedSize)).writeUint16(this._nodes.length);for(const t of this._nodes)t.serialize(e);return this._proof.serialize(e),e}get serializedSize(){let e=2;for(const t of this._nodes)e+=t.serializedSize;return e+this._proof.serializedSize}verify(){if(!this._proof.verify())return!1;let e=null;for(let t=0;t<=this._nodes.length;++t){const r=t<this._nodes.length?this._nodes[t]:this.tail;if(e&&e>=r.prefix)return!1;e=r.prefix}return!0}toString(){return`AccountsTreeChunk{length=${this.length}}`}root(){return this._proof.root()}get terminalNodes(){return this._nodes.concat([this.tail])}get proof(){return this._proof}get head(){return this._nodes.length>0?this._nodes[0]:this.tail}get tail(){return this._proof.nodes[0]}get length(){return this._nodes.length+1}}Pe.SIZE_MAX=5e3,Pe.EMPTY=new Pe([],new Oe([])),c.register(Pe);class xe extends l{static async getPersistent(e){const t=Re.getPersistent(e);return new xe(t)._init()}static async createVolatile(){const e=Re.createVolatile();return new xe(e)._init()}constructor(e){super(),this._store=e,this._synchronizer=new H}async _init(){let e=await this._store.getRootNode();return e||(e=Te.branchNode("",[],[]),await this._store.put(e)),this}put(e,t){return this._synchronizer.push(()=>this._put(e,t))}async _put(e,t){if(t.isInitial()&&!await this.get(e))return;const r=await this._store.getRootNode();F.that(!!r,"Corrupted store: Failed to fetch AccountsTree root node");const n=e.toHex();await this._insert(r,n,t,[])}async _insert(e,t,r,n){const i=oe.commonPrefix(e.prefix,t);if(i.length!==e.prefix.length){const s=Te.terminalNode(t,r),o=s.hash();await this._store.put(s);const a=Te.branchNode(i).withChild(e.prefix,e.hash()).withChild(s.prefix,o),c=a.hash();return await this._store.put(a),this._updateKeys(a.prefix,c,n)}if(i===t){if(r.isInitial())return await this._store.remove(e),this._prune(e.prefix,n);const t=(e=e.withAccount(r)).hash();return await this._store.put(e),this._updateKeys(e.prefix,t,n)}const s=e.getChild(t);if(s){const i=await this._store.get(s);return n.push(e),this._insert(i,t,r,n)}const o=Te.terminalNode(t,r),a=o.hash();await this._store.put(o);const c=(e=e.withChild(o.prefix,a)).hash();return await this._store.put(e),this._updateKeys(e.prefix,c,n)}async _prune(e,t){let r=t.length-1;for(;r>=0;--r){let n=t[r];if((n=n.withoutChild(e)).hasSingleChild()&&""!==n.prefix){await this._store.remove(n);const e=n.getFirstChild(),i=await this._store.get(e);await this._store.put(i);const s=i.hash();return this._updateKeys(i.prefix,s,t.slice(0,r))}if(n.hasChildren()||""===n.prefix){const e=n.hash();return await this._store.put(n),this._updateKeys(n.prefix,e,t.slice(0,r))}e=n.prefix}}async _updateKeys(e,t,r){let n=r.length-1;for(;n>=0;--n){let i=r[n];i=i.withChild(e,t),await this._store.put(i),t=i.hash(),e=i.prefix}return t}async get(e){const t=await this._store.get(e.toHex());return void 0!==t?t.account:null}async getAccountsProof(e){const t=await this._store.getRootNode();F.that(!!t,"Corrupted store: Failed to fetch AccountsTree root node");const r=[];for(const t of e)r.push(t.toHex());r.sort();const n=[];return await this._getAccountsProof(t,r,n),new Oe(n)}async _getAccountsProof(e,t,r){let n=!1;for(let i=0;i<t.length;){let s=t[i];if(oe.commonPrefix(e.prefix,s).length!==e.prefix.length||e.prefix===s){n=!0,i++;continue}const o=e.getChild(s);if(o){const e=await this._store.get(o),a=[s];let c=i+1;for(;c<t.length&&t[c].startsWith(e.prefix);++c)a.push(t[c]);i=c,n=await this._getAccountsProof(e,a,r)||n}else n=!0,i++}return n&&r.push(e),n}async getChunk(e,t){const r=await this._store.getTerminalNodes(e,t),n=r.pop();let i;return i=n?await this.getAccountsProof([we.fromHex(n.prefix)]):await this.getAccountsProof([we.fromHex("ffffffffffffffffffffffffffffffffffffffff")]),new Pe(r,i)}transaction(e=!0){return new xe(this._store.transaction(e))._init()}synchronousTransaction(e=!0){const t=this._store.synchronousTransaction(e);return new Le(t)._init()}async partialTree(){const e=this._store.synchronousTransaction(!1);return await e.truncate(),new De(e)._init()}snapshot(e){return new xe(this._store.snapshot(e?e._store:void 0))._init()}async commit(){return F.that(!(await this.root()).equals(new ue(null))),this._store.commit()}abort(){return this._store.abort()}async root(){const e=await this._store.getRootNode();return e&&e.hash()}get tx(){return this._store.tx}async isEmpty(){return!(await this._store.getRootNode()).hasChildren()}}c.register(xe);class Le extends xe{constructor(e){super(e),this._syncStore=e}async preloadAddresses(e){const t=await this._syncStore.getRootNode();F.that(!!t,"Corrupted store: Failed to fetch AccountsTree root node");const r=[];for(const t of e)r.push(t.toHex());r.sort(),await this._preloadAddresses(t,r)}async _preloadAddresses(e,t){e.hasChildren()&&await this._syncStore.preload(e.getChildren());for(let r=0;r<t.length;){const n=t[r];if(oe.commonPrefix(e.prefix,n).length!==e.prefix.length||e.prefix===n){r++;continue}const i=e.getChild(n);if(i){const e=this._syncStore.getSync(i),s=[n];let o=r+1;for(;o<t.length&&t[o].startsWith(e.prefix);++o)s.push(t[o]);r=o,await this._preloadAddresses(e,s)}else r++}}putSync(e,t){this.putBatch(e,t),this.finalizeBatch()}finalizeBatch(){const e=this._syncStore.getRootNodeSync();this._updateHashes(e)}putBatch(e,t){if(t.isInitial()&&!this.getSync(e,!1))return;const r=this._syncStore.getRootNodeSync();F.that(!!r,"Corrupted store: Failed to fetch AccountsTree root node");const n=e.toHex();this._insertBatch(r,n,t,[])}_insertBatch(e,t,r,n){const i=oe.commonPrefix(e.prefix,t);if(i.length!==e.prefix.length){const s=Te.terminalNode(t,r);this._syncStore.putSync(s);const o=Te.branchNode(i).withChild(e.prefix,new ue(null)).withChild(s.prefix,new ue(null));return this._syncStore.putSync(o),this._updateKeysBatch(o.prefix,n)}if(i===t)return r.isInitial()?(this._syncStore.removeSync(e),this._pruneBatch(e.prefix,n)):(e=e.withAccount(r),this._syncStore.putSync(e),this._updateKeysBatch(e.prefix,n));const s=e.getChild(t);if(s){const i=this._syncStore.getSync(s);return n.push(e),this._insertBatch(i,t,r,n)}const o=Te.terminalNode(t,r);return this._syncStore.putSync(o),e=e.withChild(o.prefix,new ue(null)),this._syncStore.putSync(e),this._updateKeysBatch(e.prefix,n)}_pruneBatch(e,t){let r=t.length-1;for(;r>=0;--r){let n=t[r];if((n=n.withoutChild(e)).hasSingleChild()&&""!==n.prefix){this._syncStore.removeSync(n);const e=n.getFirstChild(),i=this._syncStore.getSync(e);return this._syncStore.putSync(i),this._updateKeysBatch(i.prefix,t.slice(0,r))}if(n.hasChildren()||""===n.prefix)return this._syncStore.putSync(n),this._updateKeysBatch(n.prefix,t.slice(0,r));e=n.prefix}}_updateKeysBatch(e,t){let r=t.length-1;for(;r>=0;--r){let n=t[r];n=n.withChild(e,new ue(null)),this._syncStore.putSync(n),e=n.prefix}}_updateHashes(e){if(e.isTerminal())return e.hash();const t=new ue(null),r=e.getChildren().map(r=>{const n=e.getChildHash(r);if(!n.equals(t))return n;const i=this._syncStore.getSync(r);return this._updateHashes(i)});let n=e;return e.getChildren().forEach((e,t)=>{n=n.withChild(e,r[t])}),this._syncStore.putSync(n),n.hash()}getSync(e,t=!0){const r=this._syncStore.getSync(e.toHex(),t);return void 0!==r?r.account:null}rootSync(){const e=this._syncStore.getRootNodeSync();return e&&e.hash()}}c.register(Le);class De extends Le{constructor(e){super(e),this._complete=!1,this._lastPrefix=""}async pushChunk(e){if(!e.verify())return De.Status.ERR_INCORRECT_PROOF;const t=this.synchronousTransaction();return t._putLight(e.terminalNodes),t._mergeProof(e.proof,e.tail.prefix)?(this._complete=t.complete,await t.commit(),this._lastPrefix=e.tail.prefix,this._complete?De.Status.OK_COMPLETE:De.Status.OK_UNFINISHED):(await t.abort(),De.Status.ERR_UNMERGEABLE)}_mergeProof(e,t){let r=this._store.getRootNodeSync(),n=r.getChildren(),i=!0,s=e.length-1;for(;s>0;--s){const o=e.nodes[s];if(oe.commonPrefix(r.prefix,o.prefix)!==r.prefix)return!1;const a=o.getChildren();if(n.length>a.length)return!1;const c=r.getLastChild();let u=!1,h=0;for(const e of a){if(!(e<=t.substr(0,e.length)))break;{const t=n.shift();if(oe.commonPrefix(c,e)===e){e!==c&&(u=!0);continue}if(t!==e)return!1;const i=r.getChildHash(t),s=o.getChildHash(t);if(!i||!s||!i.equals(s))return!1}++h}if(0!==n.length)return!1;if(i=i&&h===a.length-1,u)n=[c];else{if(r.isTerminal())return!1;if(n=(r=this._store.getSync(r.getLastChild())).getChildren(),r.isTerminal())break}}return!!r.equals(e.nodes[0])&&(this._complete=i,!0)}_putLight(e){F.that(e.every(e=>e.isTerminal()),"Can only build tree from terminal nodes");let t=this._store.getRootNodeSync();F.that(!!t,"Corrupted store: Failed to fetch AccountsTree root node");for(const r of e)this._insertBatch(t,r.prefix,r.account,[]),t=this._store.getRootNodeSync(),F.that(!!t,"Corrupted store: Failed to fetch AccountsTree root node");this._updateHashes(t)}get complete(){return this._complete}get missingPrefix(){return this._lastPrefix}synchronousTransaction(e=!0){const t=new De(this._store.synchronousTransaction(e));return t._complete=this._complete,t._lastPrefix=this._lastPrefix,t}transaction(e=!0){if(!this.complete)throw new Error("Can only construct AccountsTree from complete PartialAccountsTree");return new xe(this._store.synchronousTransaction(e))}commit(){return this._store.commit()}abort(){return this._store.abort()}}De.Status={ERR_HASH_MISMATCH:-3,ERR_INCORRECT_PROOF:-2,ERR_UNMERGEABLE:-1,OK_COMPLETE:0,OK_UNFINISHED:1},c.register(De);class Me extends l{static async getPersistent(e){const t=await xe.getPersistent(e);return new Me(t)}static async createVolatile(){const e=await xe.createVolatile();return new Me(e)}constructor(e){super(),this._tree=e,this.bubble(this._tree,"*")}async initialize(e,t){F.that(await this._tree.isEmpty());const r=await this._tree.synchronousTransaction();try{const n=z.fromBase64(t),i=n.readUint16();for(let e=0;e<i;e++){const e=we.unserialize(n),t=ve.unserialize(n);r.putSync(e,t)}await this._commitBlockBody(r,e.body,e.height,new Qe),r.finalizeBatch()}catch(e){throw await r.abort(),e}const n=r.rootSync();if(!e.accountsHash.equals(n))throw await r.abort(),new Error("Genesis AccountsHash mismatch");return r.commit()}getAccountsProof(e){return this._tree.getAccountsProof(e)}getAccountsTreeChunk(e){return this._tree.getChunk(e,Pe.SIZE_MAX)}async commitBlock(e,t){const r=await this._tree.synchronousTransaction();await r.preloadAddresses(e.body.getAddresses());try{this._commitBlockBody(r,e.body,e.height,t)}catch(e){throw await r.abort(),e}r.finalizeBatch();const n=r.rootSync();if(!e.accountsHash.equals(n))throw await r.abort(),new Error("AccountsHash mismatch");return r.commit()}async commitBlockBody(e,t,r){const n=await this._tree.synchronousTransaction();await n.preloadAddresses(e.getAddresses());try{this._commitBlockBody(n,e,t,r)}catch(e){throw await n.abort(),e}return n.finalizeBatch(),n.commit()}async gatherToBePrunedAccounts(e,t,r){const n=await this._tree.synchronousTransaction(),i=[];for(const t of e)i.push(t.sender,t.recipient);await n.preloadAddresses(i);try{this._processSenderAccounts(n,e,t,r),this._processRecipientAccounts(n,e,t),this._processContracts(n,e,t);const i=new R;for(const t of e){const e=this._getSync(t.sender,void 0,n);e.isToBePruned()&&i.add(new Ee(t.sender,e))}return i.values().sort((e,t)=>e.compare(t))}finally{await n.abort()}}async revertBlock(e,t){if(!e)throw new Error("block undefined");const r=await this._tree.root();if(!e.accountsHash.equals(r))throw new Error("AccountsHash mismatch");return this.revertBlockBody(e.body,e.height,t)}async revertBlockBody(e,t,r){const n=await this._tree.synchronousTransaction();await n.preloadAddresses(e.getAddresses());try{this._revertBlockBody(n,e,t,r)}catch(e){throw await n.abort(),e}return n.finalizeBatch(),n.commit()}async get(e,t,r=this._tree){const n=await r.get(e);if(!n){if(void 0===t)return ve.INITIAL;throw new Error("Account type was given but account not present")}if(void 0!==t&&n.type!==t)throw new Error("Account type does match actual account");return n}_getSync(e,t,r){const n=r.getSync(e,!1);if(!n){if(void 0===t)return ve.INITIAL;throw new Error("Account type was given but account not present")}if(void 0!==t&&n.type!==t)throw new Error("Account type does match actual account");return n}async transaction(e=!0){return new Me(await this._tree.transaction(e))}async snapshot(e){return new Me(await this._tree.snapshot(e?e._tree:void 0))}partialAccountsTree(){return this._tree.partialTree()}commit(){return this._tree.commit()}abort(){return this._tree.abort()}_processSenderAccounts(e,t,r,n,i=!1){for(const s of t){const t=this._getSync(s.sender,i?void 0:s.senderType,e);e.putBatch(s.sender,t.withOutgoingTransaction(s,r,n,i))}}_processRecipientAccounts(e,t,r,n=!1){for(const i of t){const t=this._getSync(i.recipient,void 0,e);e.putBatch(i.recipient,t.withIncomingTransaction(i,r,n))}}_processContracts(e,t,r,n=!1){n&&(t=t.slice().reverse());for(const i of t){const t=this._getSync(i.recipient,n?i.recipientType:void 0,e);e.putBatch(i.recipient,t.withContractCommand(i,r,n))}}_commitBlockBody(e,t,r,n){this._processSenderAccounts(e,t.transactions,r,n),this._processRecipientAccounts(e,t.transactions,r),this._processContracts(e,t.transactions,r);const i=t.prunedAccounts.slice();for(const r of t.transactions){const t=this._getSync(r.sender,void 0,e);if(t.isToBePruned()){const n=i.findIndex(e=>e.address.equals(r.sender));if(-1===n||!t.equals(i[n].account))throw new Error("Account was not pruned correctly");e.putBatch(r.sender,ve.INITIAL),i.splice(n,1)}}if(i.length>0)throw new Error("Account was invalidly pruned");this._rewardMiner(e,t,r,!1)}_revertBlockBody(e,t,r,n){this._rewardMiner(e,t,r,!0);for(const r of t.prunedAccounts)e.putBatch(r.address,r.account);this._processContracts(e,t.transactions,r,!0),this._processRecipientAccounts(e,t.transactions,r,!0),this._processSenderAccounts(e,t.transactions,r,n,!0)}_rewardMiner(e,t,r,n=!1){const i=t.transactions.reduce((e,t)=>e+t.fee,0),s=new Ge(we.NULL,ve.Type.BASIC,t.minerAddr,ve.Type.BASIC,i+ae.blockRewardAt(r),0,0,He.Flag.NONE,new Uint8Array(0)),o=this._getSync(t.minerAddr,void 0,e);e.putBatch(t.minerAddr,o.withIncomingTransaction(s,r,n))}hash(){return this._tree.root()}get tx(){return this._tree.tx}}c.register(Me);class Ue{constructor(e,t,r,n,i,s,o,a,c=Ue.CURRENT_VERSION){if(!ee.isUint16(c))throw new Error("Malformed version");if(!ue.isHash(e))throw new Error("Malformed prevHash");if(!ue.isHash(t))throw new Error("Malformed interlinkHash");if(!ue.isHash(r))throw new Error("Malformed bodyHash");if(!ue.isHash(n))throw new Error("Malformed accountsHash");if(!ee.isUint32(i)||!ze.isValidCompact(i))throw new Error("Malformed nBits");if(!ee.isUint32(s))throw new Error("Invalid height");if(!ee.isUint32(o))throw new Error("Malformed timestamp");if(!ee.isUint32(a))throw new Error("Malformed nonce");this._version=c,this._prevHash=e,this._interlinkHash=t,this._bodyHash=r,this._accountsHash=n,this._nBits=i,this._height=s,this._timestamp=o,this._nonce=a}static unserialize(e){const t=e.readUint16();if(!Ue.SUPPORTED_VERSIONS.includes(t))throw new Error(`Unsupported block version ${t}`);const r=ue.unserialize(e),n=ue.unserialize(e),i=ue.unserialize(e),s=ue.unserialize(e),o=e.readUint32(),a=e.readUint32(),c=e.readUint32(),u=e.readUint32();return new Ue(r,n,i,s,o,a,c,u,t)}serialize(e){return(e=e||new j(this.serializedSize)).writeUint16(this._version),this._prevHash.serialize(e),this._interlinkHash.serialize(e),this._bodyHash.serialize(e),this._accountsHash.serialize(e),e.writeUint32(this._nBits),e.writeUint32(this._height),e.writeUint32(this._timestamp),e.writeUint32(this._nonce),e}get serializedSize(){return 2+this._prevHash.serializedSize+this._interlinkHash.serializedSize+this._bodyHash.serializedSize+this._accountsHash.serializedSize+4+4+4+4}async verifyProofOfWork(e){const t=await this.pow(e);return ze.isProofOfWork(t,this.target)}isImmediateSuccessorOf(e){if(this.height!==e.height+1)return!1;if(this.timestamp<e.timestamp)return!1;const t=e.hash();return!!this.prevHash.equals(t)}hash(e){return this._hash=this._hash||ue.light(this.serialize(e)),this._hash}async pow(e){return this._pow=this._pow||await ue.hard(this.serialize(e)),this._pow}equals(e){return e instanceof Ue&&this._prevHash.equals(e.prevHash)&&this._interlinkHash.equals(e.interlinkHash)&&this._bodyHash.equals(e.bodyHash)&&this._accountsHash.equals(e.accountsHash)&&this._nBits===e.nBits&&this._height===e.height&&this._timestamp===e.timestamp&&this._nonce===e.nonce}toString(){return"BlockHeader{"+`prevHash=${this._prevHash}, `+`interlinkHash=${this._interlinkHash}, `+`bodyHash=${this._bodyHash}, `+`accountsHash=${this._accountsHash}, `+`nBits=${this._nBits.toString(16)}, `+`height=${this._height}, `+`timestamp=${this._timestamp}, `+`nonce=${this._nonce}`+"}"}get version(){return this._version}get prevHash(){return this._prevHash}get interlinkHash(){return this._interlinkHash}get bodyHash(){return this._bodyHash}get accountsHash(){return this._accountsHash}get nBits(){return this._nBits}get target(){return ze.compactToTarget(this._nBits)}get difficulty(){return ze.compactToDifficulty(this._nBits)}get height(){return this._height}get timestamp(){return this._timestamp}get nonce(){return this._nonce}set nonce(e){this._nonce=e,this._hash=null,this._pow=null}}Ue.Version={V1:1},Ue.CURRENT_VERSION=Ue.Version.V1,Ue.SUPPORTED_VERSIONS=[Ue.Version.V1],Ue.SERIALIZED_SIZE=146,c.register(Ue);class Ke{static _compress(e,t){const r=e.length,n=Math.ceil(r/8),i=new Uint8Array(n);let s=t;const o=[];for(let t=0;t<r;t++){const r=e[t];r.equals(s)?i[Math.floor(t/8)]|=128>>>t%8:(o.push(r),s=r)}return{repeatBits:i,compressed:o}}constructor(e,t,r,n){if(!Array.isArray(e)||!ee.isUint8(e.length)||e.some(e=>!(e instanceof ue)))throw new Error("Malformed hashes");if((r||n)&&(!r||!n))throw new Error("Malformed repeatBits/compressed");if(!t&&!r)throw new Error("Either prevHash or repeatBits/compressed required");r||({repeatBits:r,compressed:n}=Ke._compress(e,t)),this._hashes=e,this._repeatBits=r,this._compressed=n}static unserialize(e,t){const r=e.readUint8(),n=Math.ceil(r/8),i=e.read(n);let s=t;const o=[],a=[];for(let t=0;t<r;t++)0==(i[Math.floor(t/8)]&128>>>t%8)&&(s=ue.unserialize(e),a.push(s)),o.push(s);return new Ke(o,t,i,a)}serialize(e){(e=e||new j(this.serializedSize)).writeUint8(this._hashes.length),e.write(this._repeatBits);for(const t of this._compressed)t.serialize(e);return e}get serializedSize(){return 1+this._repeatBits.length+this._compressed.reduce((e,t)=>e+t.serializedSize,0)}equals(e){return e instanceof Ke&&this._hashes.length===e._hashes.length&&this._hashes.every((t,r)=>t.equals(e.hashes[r]))}hash(){return this._hash||(this._hash=te.computeRoot([this._repeatBits,Wr.GENESIS_HASH,...this._compressed])),this._hash}get hashes(){return this._hashes}get length(){return this._hashes.length}}c.register(Ke);class Fe{static getMetadataSize(e){return we.SERIALIZED_SIZE+1+e.byteLength+2+2}constructor(e,t,r=new Uint8Array(0),n=[]){if(!(e instanceof we))throw new Error("Malformed minerAddr");if(!Array.isArray(t)||t.some(e=>!(e instanceof He)))throw new Error("Malformed transactions");if(!(r instanceof Uint8Array&&ee.isUint8(r.byteLength)))throw new Error("Malformed extraData");this._minerAddr=e,this._extraData=r,this._transactions=t,this._prunedAccounts=n,this._hash=null}static unserialize(e){const t=we.unserialize(e),r=e.readUint8(),n=e.read(r),i=e.readUint16(),s=new Array(i);for(let t=0;t<i;t++)s[t]=He.unserialize(e);const o=e.readUint16(),a=[];for(let t=0;t<o;t++)a.push(Ee.unserialize(e));return new Fe(t,s,n,a)}serialize(e){e=e||new j(this.serializedSize),this._minerAddr.serialize(e),e.writeUint8(this._extraData.byteLength),e.write(this._extraData),e.writeUint16(this._transactions.length);for(const t of this._transactions)t.serialize(e);e.writeUint16(this._prunedAccounts.length);for(const t of this._prunedAccounts)t.serialize(e);return e}get serializedSize(){let e=this._minerAddr.serializedSize+1+this._extraData.byteLength+2+2;for(const t of this._transactions)e+=t.serializedSize;return e+this._prunedAccounts.reduce((e,t)=>e+t.serializedSize,0)}verify(){let e=null;for(const t of this._transactions){if(e&&e.compareBlockOrder(t)>=0)return h.w(Fe,"Invalid block - transactions not ordered."),!1;if(e=t,!t.verify())return h.w(Fe,"Invalid block - invalid transaction"),!1}let t=null;for(const e of this._prunedAccounts){if(t&&t.compare(e)>=0)return h.w(Fe,"Invalid block - pruned accounts not ordered."),!1;if(t=e,!e.account.isToBePruned())return h.w(Fe,"Invalid block - invalid pruned account"),!1}return!0}getMerkleLeafs(){return[this._minerAddr,this._extraData,...this._transactions,...this.prunedAccounts]}hash(){return this._hash||(this._hash=te.computeRoot(this.getMerkleLeafs())),this._hash}equals(e){return e instanceof Fe&&this._minerAddr.equals(e.minerAddr)&&z.equals(this._extraData,e.extraData)&&this._transactions.length===e.transactions.length&&this._transactions.every((t,r)=>t.equals(e.transactions[r]))}getAddresses(){const e=[this._minerAddr];for(const t of this._transactions)e.push(t.sender,t.recipient);return e}get extraData(){return this._extraData}get minerAddr(){return this._minerAddr}get transactions(){return this._transactions}get transactionCount(){return this._transactions.length}get prunedAccounts(){return this._prunedAccounts}}c.register(Fe);class ze{static compactToTarget(e){return new J(16777215&e).times(new J(2).pow(8*Math.max((e>>24)-3,0)))}static targetToCompact(e){if(!e.isFinite()||e.isNaN())throw new Error("Invalid Target");let t=Math.max(Math.ceil(Math.log2(e.toNumber())/8),1);return e/Math.pow(2,8*(t-1))>=128&&t>=3&&t++,(t<<24)+(e/Math.pow(2,8*Math.max(t-3,0))&16777215)}static getTargetHeight(e){return Math.ceil(Math.log2(e.toNumber()))}static getTargetDepth(e){return ze.getTargetHeight(ae.BLOCK_TARGET_MAX)-ze.getTargetHeight(e)}static compactToDifficulty(e){return ae.BLOCK_TARGET_MAX.div(ze.compactToTarget(e))}static difficultyToCompact(e){return ze.targetToCompact(ze.difficultyToTarget(e))}static difficultyToTarget(e){return ae.BLOCK_TARGET_MAX.div(e)}static targetToDifficulty(e){return ae.BLOCK_TARGET_MAX.div(e)}static hashToTarget(e){return new J(e.toHex(),16)}static realDifficulty(e){return ze.targetToDifficulty(ze.hashToTarget(e))}static getHashDepth(e){return ze.getTargetDepth(ze.hashToTarget(e))}static isProofOfWork(e,t){return new J(e.toHex(),16).lte(t)}static isValidCompact(e){return ze.isValidTarget(ze.compactToTarget(e))}static isValidTarget(e){return null!==e&&e.gte(1)&&e.lte(ae.BLOCK_TARGET_MAX)}static getNextTarget(e,t,r){F.that(e.height-t.height===ae.DIFFICULTY_BLOCK_WINDOW||e.height<=ae.DIFFICULTY_BLOCK_WINDOW&&1===t.height,`Tail and head block must be ${ae.DIFFICULTY_BLOCK_WINDOW} blocks apart`);let n=e.timestamp-t.timestamp;e.height<=ae.DIFFICULTY_BLOCK_WINDOW&&(n+=(ae.DIFFICULTY_BLOCK_WINDOW-e.height+1)*ae.BLOCK_TIME,r=r.plus(ae.DIFFICULTY_BLOCK_WINDOW-e.height+1));let i=n/(ae.DIFFICULTY_BLOCK_WINDOW*ae.BLOCK_TIME);i=Math.max(i,1/ae.DIFFICULTY_MAX_ADJUSTMENT_FACTOR),i=Math.min(i,ae.DIFFICULTY_MAX_ADJUSTMENT_FACTOR);const s=r.div(ae.DIFFICULTY_BLOCK_WINDOW);let o=ze.difficultyToTarget(s).times(i);o=J.min(o,ae.BLOCK_TARGET_MAX),o=J.max(o,1);const a=ze.targetToCompact(o);return ze.compactToTarget(a)}}c.register(ze);class je{static fromAddresses(e){return new je(je.Type.ADDRESSES,e)}static fromMinFeePerByte(e){return new je(je.Type.MIN_FEE,e)}constructor(e,t=null){if(!ee.isUint8(e))throw new Error("Invalid type");if(e===je.Type.ADDRESSES&&(!Array.isArray(t)||!ee.isUint16(t.length)||t.some(e=>!(e instanceof we))))throw new Error("Invalid addresses");if(e===je.Type.MIN_FEE&&!ee.isUint64(t))throw new Error("Invalid minFeePerByte");switch(this._type=e,this._addresses=new R,this._minFeePerByte=0,e){case je.Type.ADDRESSES:this._addresses.addAll(t);break;case je.Type.MIN_FEE:this._minFeePerByte=t}}static unserialize(e){const t=e.readUint8();let r=null;switch(t){case je.Type.ADDRESSES:{r=[];const t=e.readUint16();for(let n=0;n<t;++n)r.push(we.unserialize(e));break}case je.Type.MIN_FEE:r=e.readUint64()}return new je(t,r)}serialize(e){switch((e=e||new j(this.serializedSize)).writeUint8(this._type),this._type){case je.Type.ADDRESSES:e.writeUint16(this._addresses.length);for(const t of this._addresses)t.serialize(e);break;case je.Type.MIN_FEE:e.writeUint64(this._minFeePerByte)}return e}get serializedSize(){let e=0;switch(this._type){case je.Type.ADDRESSES:e=2;for(const t of this._addresses)e+=t.serializedSize;break;case je.Type.MIN_FEE:e=8}return 1+e}matchesBlock(e){switch(this._type){case je.Type.NONE:return!1;case je.Type.ANY:case je.Type.ADDRESSES:case je.Type.MIN_FEE:return!0;default:throw new Error("Unknown type")}}matchesTransaction(e){switch(this._type){case je.Type.NONE:return!1;case je.Type.ANY:return!0;case je.Type.ADDRESSES:return this._addresses.contains(e.recipient)||this._addresses.contains(e.sender);case je.Type.MIN_FEE:return e.fee/e.serializedSize>=this._minFeePerByte;default:throw new Error("Unknown type")}}isSubsetOf(e){if(e.type===je.Type.ANY||this.type===je.Type.NONE)return!0;if(e.type!==this.type)return!1;switch(this.type){case je.Type.ADDRESSES:return this.addresses.reduce((t,r)=>t&&e.addresses.find(e=>e.equals(r)),!0);case je.Type.MIN_FEE:return this.minFeePerByte>e.minFeePerByte}return!1}toString(){return`Subscription{type=${this._type}, addresses=[${this._addresses.values()}], minFeePerByte=${this._minFeePerByte}}`}get type(){return this._type}get addresses(){return this._addresses.values()}get minFeePerByte(){return this._minFeePerByte}}je.Type={NONE:0,ANY:1,ADDRESSES:2,MIN_FEE:3},je.NONE=new je(je.Type.NONE),je.BLOCKS_ONLY=new je(je.Type.ADDRESSES,[]),je.ANY=new je(je.Type.ANY),c.register(je);class He{constructor(e,t,r,n,i,s,o,a,c,u,h,l=Wr.NETWORK_ID){if(!(t instanceof we))throw new Error("Malformed sender");if(!ee.isUint8(r))throw new Error("Malformed sender type");if(!(n instanceof we))throw new Error("Malformed recipient");if(!ee.isUint8(i))throw new Error("Malformed recipient type");if(!ee.isUint64(s)||0===s)throw new Error("Malformed value");if(!ee.isUint64(o))throw new Error("Malformed fee");if(!ee.isUint32(a))throw new Error("Malformed validityStartHeight");if(!ee.isUint8(c)&&(c&~He.Flag.ALL)>0)throw new Error("Malformed flags");if(!(u instanceof Uint8Array&&ee.isUint16(u.byteLength)))throw new Error("Malformed data");if(h&&(!(h instanceof Uint8Array)||!ee.isUint16(h.byteLength)))throw new Error("Malformed proof");if(!ee.isUint8(l))throw new Error("Malformed networkId");this._format=e,this._sender=t,this._senderType=r,this._recipient=n,this._recipientType=i,this._value=s,this._fee=o,this._networkId=l,this._validityStartHeight=a,this._flags=c,this._data=u,this._proof=h,this._recipient===we.CONTRACT_CREATION&&(this._recipient=this.getContractCreationAddress())}static unserialize(e){const t=e.readUint8();if(e.readPos--,!He.FORMAT_MAP.has(t))throw new Error("Invalid transaction type");return He.FORMAT_MAP.get(t).unserialize(e)}serializeContent(e){return(e=e||new j(this.serializedContentSize)).writeUint16(this._data.byteLength),e.write(this._data),this._sender.serialize(e),e.writeUint8(this._senderType),this._recipient.serialize(e),e.writeUint8(this._recipientType),e.writeUint64(this._value),e.writeUint64(this._fee),e.writeUint32(this._validityStartHeight),e.writeUint8(this._networkId),e.writeUint8(this._flags),e}get serializedContentSize(){return 2+this._data.byteLength+this._sender.serializedSize+1+this._recipient.serializedSize+1+8+8+4+1+1}verify(e){return void 0===this._valid&&(this._valid=this._verify(e)),this._valid}_verify(e=Wr.NETWORK_ID){return this._networkId!==e?(h.w(He,"Transaction is not valid in this network",this),!1):this._recipient.equals(this._sender)?(h.w(He,"Sender and recipient must not match",this),!1):ve.TYPE_MAP.has(this._senderType)&&ve.TYPE_MAP.has(this._recipientType)?ve.TYPE_MAP.get(this._senderType).verifyOutgoingTransaction(this)?!!ve.TYPE_MAP.get(this._recipientType).verifyIncomingTransaction(this)||(h.w(He,"Invalid for recipient",this),!1):(h.w(He,"Invalid for sender",this),!1):(h.w(He,"Invalid account type",this),!1)}get serializedSize(){throw new Error("Getter needs to be overwritten by subclasses")}serialize(e){throw new Error("Method needs to be overwritten by subclasses")}hash(){return this._hash=this._hash||ue.light(this.serializeContent()),this._hash}compare(e){return this.fee/this.serializedSize>e.fee/e.serializedSize?-1:this.fee/this.serializedSize<e.fee/e.serializedSize?1:this.serializedSize>e.serializedSize?-1:this.serializedSize<e.serializedSize?1:this.fee>e.fee?-1:this.fee<e.fee?1:this.value>e.value?-1:this.value<e.value?1:this.compareBlockOrder(e)}compareBlockOrder(e){const t=this._recipient.compare(e._recipient);if(0!==t)return t;if(this._validityStartHeight<e._validityStartHeight)return-1;if(this._validityStartHeight>e._validityStartHeight)return 1;if(this._fee>e._fee)return-1;if(this._fee<e._fee)return 1;if(this._value>e._value)return-1;if(this._value<e._value)return 1;const r=this._sender.compare(e._sender);return 0!==r?r:this._recipientType<e._recipientType?-1:this._recipientType>e._recipientType?1:this._senderType<e._senderType?-1:this._senderType>e._senderType?1:this._flags<e._flags?-1:this._flags>e._flags?1:z.compare(this._data,e._data)}equals(e){return e instanceof He&&this._sender.equals(e._sender)&&this._senderType===e._senderType&&this._recipient.equals(e._recipient)&&this._recipientType===e._recipientType&&this._value===e._value&&this._fee===e._fee&&this._validityStartHeight===e._validityStartHeight&&this._networkId===e._networkId&&this._flags===e._flags&&z.equals(this._data,e._data)}toString(){return"Transaction{"+`sender=${this._sender.toBase64()}, `+`recipient=${this._recipient.toBase64()}, `+`value=${this._value}, `+`fee=${this._fee}, `+`validityStartHeight=${this._validityStartHeight}, `+`networkId=${this._networkId}`+"}"}toPlain(){const e=ve.TYPE_MAP.get(this.recipientType).dataToPlain(this.data);e.raw=z.toHex(this.data);const t=ve.TYPE_MAP.get(this.senderType).proofToPlain(this.proof);return t.raw=z.toHex(this.proof),{transactionHash:this.hash().toPlain(),format:He.Format.toString(this._format),sender:this.sender.toPlain(),senderType:ve.Type.toString(this.senderType),recipient:this.recipient.toPlain(),recipientType:ve.Type.toString(this.recipientType),value:this.value,fee:this.fee,feePerByte:this.feePerByte,validityStartHeight:this.validityStartHeight,network:Wr.networkIdToNetworkName(this.networkId),flags:this.flags,data:e,proof:t,size:this.serializedSize,valid:this.verify()}}static fromPlain(e){if(!e)throw new Error("Invalid transaction format");const t=He.Format.fromAny(e.format);if(!He.FORMAT_MAP.has(t))throw new Error("Invalid transaction type");return He.FORMAT_MAP.get(t).fromPlain(e)}static fromAny(e){if(e instanceof He)return e;if("object"==typeof e)return He.fromPlain(e);if("string"==typeof e)return He.unserialize(new j(z.fromHex(e)));throw new Error("Invalid transaction format")}getContractCreationAddress(){const e=He.unserialize(this.serialize());return e._recipient=we.NULL,e._hash=null,we.fromHash(e.hash())}get format(){return this._format}get sender(){return this._sender}get senderType(){return this._senderType}get recipient(){return this._recipient}get recipientType(){return this._recipientType}get value(){return this._value}get fee(){return this._fee}get feePerByte(){return this._fee/this.serializedSize}get networkId(){return this._networkId}get validityStartHeight(){return this._validityStartHeight}get flags(){return this._flags}hasFlag(e){return(this._flags&e)>0}get data(){return this._data}get proof(){return this._proof}set proof(e){this._proof=e}}He.Format={BASIC:0,EXTENDED:1},He.Format.toString=function(e){switch(e){case He.Format.BASIC:return"basic";case He.Format.EXTENDED:return"extended"}throw new Error("Invalid transaction format")},He.Format.fromAny=function(e){if("number"==typeof e)return e;switch(e){case"basic":return He.Format.BASIC;case"extended":return He.Format.EXTENDED}throw new Error("Invalid transaction format")},He.Flag={NONE:0,CONTRACT_CREATION:1,ALL:1},He.FORMAT_MAP=new Map,c.register(He);class qe{static verifyTransaction(e){try{const t=new j(e.proof),r=qe.unserialize(t);return t.readPos!==t.byteLength?(h.w(qe,"Invalid SignatureProof - overlong"),!1):r.verify(e.sender,e.serializeContent())}catch(e){return h.w(qe,`Failed to verify transaction: ${e.message||e}`),!1}}static singleSig(e,t){return new qe(e,new re([]),t)}static multiSig(e,t,r){const n=re.compute(t,e);return new qe(e,n,r)}constructor(e,t,r){if(!(e instanceof fe))throw new Error("Malformed publickKey");if(!(t instanceof re))throw new Error("Malformed merklePath");if(r&&!(r instanceof ye))throw new Error("Malformed signature");this._publicKey=e,this._merklePath=t,this._signature=r}static unserialize(e){const t=fe.unserialize(e),r=re.unserialize(e),n=ye.unserialize(e);return new qe(t,r,n)}serialize(e){return e=e||new j(this.serializedSize),this._publicKey.serialize(e),this._merklePath.serialize(e),this._signature&&this._signature.serialize(e),e}get serializedSize(){return this._publicKey.serializedSize+this._merklePath.serializedSize+(this._signature?this._signature.serializedSize:0)}static get SINGLE_SIG_SIZE(){return fe.SIZE+new re([]).serializedSize+ye.SIZE}equals(e){return e instanceof qe&&this._publicKey.equals(e._publicKey)&&this._merklePath.equals(e._merklePath)&&(this._signature?this._signature.equals(e._signature):this._signature===e._signature)}verify(e,t){return null===e||this.isSignedBy(e)?this._signature?!!this._signature.verify(this._publicKey,t)||(h.w(qe,"Invalid SignatureProof - signature is invalid"),!1):(h.w(qe,"Invalid SignatureProof - signature is missing"),!1):(h.w(qe,"Invalid SignatureProof - signer does not match sender address"),!1)}isSignedBy(e){const t=this._merklePath.computeRoot(this._publicKey);return we.fromHash(t).equals(e)}get publicKey(){return this._publicKey}get merklePath(){return this._merklePath}get signature(){return this._signature}set signature(e){this._signature=e}}c.register(qe);class Ve extends He{constructor(e,t,r,n,i,s,o){if(!(e instanceof fe))throw new Error("Malformed senderPubKey");if(void 0!==s&&!(s instanceof ye))throw new Error("Malformed signature");const a=qe.singleSig(e,s);super(He.Format.BASIC,e.toAddress(),ve.Type.BASIC,t,ve.Type.BASIC,r,n,i,He.Flag.NONE,new Uint8Array(0),a.serialize(),o),this._signatureProof=a}static unserialize(e){const t=e.readUint8();F.that(t===He.Format.BASIC);const r=fe.unserialize(e),n=we.unserialize(e),i=e.readUint64(),s=e.readUint64(),o=e.readUint32(),a=e.readUint8(),c=ye.unserialize(e);return new Ve(r,n,i,s,o,c,a)}static fromPlain(e){if(!e)throw new Error("Invalid transaction format");return new Ve(fe.fromAny(e.proof.publicKey||e.senderPubKey),we.fromAny(e.recipient),e.value,e.fee,e.validityStartHeight,ye.fromAny(e.proof.signature||e.signature),Wr.networkIdFromAny(e.network||e.networkId))}serialize(e){return(e=e||new j(this.serializedSize)).writeUint8(He.Format.BASIC),this.senderPubKey.serialize(e),this._recipient.serialize(e),e.writeUint64(this._value),e.writeUint64(this._fee),e.writeUint32(this._validityStartHeight),e.writeUint8(this._networkId),this.signature.serialize(e),e}get serializedSize(){return 1+this.senderPubKey.serializedSize+this._recipient.serializedSize+8+8+4+1+this.signature.serializedSize}get senderPubKey(){return this._signatureProof.publicKey}get signature(){return this._signatureProof.signature}set signature(e){this._signatureProof.signature=e,this._proof=this._signatureProof.serialize()}}He.FORMAT_MAP.set(He.Format.BASIC,Ve),c.register(Ve);class Ge extends He{constructor(e,t,r,n,i,s,o,a,c,u=new Uint8Array(0),h){super(He.Format.EXTENDED,e,t,r,n,i,s,o,a,c,u,h)}static unserialize(e){const t=e.readUint8();F.that(t===He.Format.EXTENDED);const r=e.readUint16(),n=e.read(r),i=we.unserialize(e),s=e.readUint8(),o=we.unserialize(e),a=e.readUint8(),c=e.readUint64(),u=e.readUint64(),h=e.readUint32(),l=e.readUint8(),f=e.readUint8(),d=e.readUint16(),p=e.read(d);return new Ge(i,s,o,a,c,u,h,f,n,p,l)}static fromPlain(e){if(!e)throw new Error("Invalid transaction format");return new Ge(we.fromAny(e.sender),ve.Type.fromAny(e.senderType),we.fromAny(e.recipient),ve.Type.fromAny(e.recipientType),e.value,e.fee,e.validityStartHeight,e.flags,z.fromAny(void 0===e.data.raw?e.data:e.data.raw),z.fromAny(void 0===e.proof.raw?e.proof:e.proof.raw),Wr.networkIdFromAny(e.network||e.networkId))}serialize(e){return(e=e||new j(this.serializedSize)).writeUint8(He.Format.EXTENDED),this.serializeContent(e),e.writeUint16(this._proof.byteLength),e.write(this._proof),e}get serializedSize(){return 1+this.serializedContentSize+2+this._proof.byteLength}}He.FORMAT_MAP.set(He.Format.EXTENDED,Ge),c.register(Ge);class We{constructor(e,t){if(!Array.isArray(e)||!ee.isUint16(e.length)||e.some(e=>!(e instanceof He)))throw new Error("Malformed transactions");if(!(t instanceof ie))throw new Error("Malformed merkle proof");this._transactions=e,this._proof=t}static unserialize(e){const t=e.readUint16(),r=[];for(let n=0;n<t;++n)r.push(He.unserialize(e));const n=ie.unserialize(e);return new We(r,n)}serialize(e){(e=e||new j(this.serializedSize)).writeUint16(this._transactions.length);for(const t of this._transactions)t.serialize(e);return this._proof.serialize(e),e}get serializedSize(){return 2+this._transactions.reduce((e,t)=>e+t.serializedSize,0)+this._proof.serializedSize}toString(){return`TransactionsProof{length=${this.length}}`}root(){return this._proof.computeRoot(this._transactions)}get length(){return this._transactions.length}get transactions(){return this._transactions}get proof(){return this._proof}}c.register(We);class Qe{constructor(e=null,t=[]){this._transactionHashes=e||new B(e=>e.toBase64()),this._blockOrder=t}containsTransaction(e){return this._transactionHashes.contains(e.hash())}static _getBlockDescriptor(e){return{hash:e.hash(),prevHash:e.prevHash,transactionHashes:e.transactions.map(e=>e.hash())}}pushBlock(e){F.that(!this.head||e.prevHash.equals(this.head.hash),"Not a successor of head");const t=Qe._getBlockDescriptor(e);this._blockOrder.push(t),this._transactionHashes.addAll(t.transactionHashes),this._blockOrder.length>ae.TRANSACTION_VALIDITY_WINDOW&&this.shiftBlock()}shiftBlock(){const e=this._blockOrder.shift();e&&this._transactionHashes.removeAll(e.transactionHashes)}revertBlock(e){const t=this._blockOrder.pop();return t&&(F.that(t.hash.equals(e.hash()),"Invalid block to revert"),this._transactionHashes.removeAll(t.transactionHashes)),this.missingBlocks}prependBlocks(e){if(e.length+this._blockOrder.length>ae.TRANSACTION_VALIDITY_WINDOW)throw new Error("Exceeding transaction cache size");F.that(!this.tail||0===e.length||this.tail.prevHash.equals(e[e.length-1].hash()),"Not a predecessor of tail");const t=e.map(e=>Qe._getBlockDescriptor(e));this._blockOrder.unshift(...t),t.forEach(e=>this._transactionHashes.addAll(e.transactionHashes))}get missingBlocks(){return ae.TRANSACTION_VALIDITY_WINDOW-this._blockOrder.length}get transactions(){return this._transactionHashes}clone(){return new Qe(this._transactionHashes.clone(),this._blockOrder.slice())}isEmpty(){return 0===this._blockOrder.length}get head(){return 0===this._blockOrder.length?null:this._blockOrder[this._blockOrder.length-1]}get tail(){return 0===this._blockOrder.length?null:this._blockOrder[0]}}c.register(Qe);class Ye{constructor(e,t,r,n,i,s){this._transactionHash=e,this._sender=t,this._recipient=r,this._blockHeight=n,this._blockHash=i,this._index=s,this.senderBuffer=this._sender.serialize(),this.recipientBuffer=this._recipient.serialize(),this.transactionHashBuffer=this._transactionHash.serialize()}static fromBlock(e){const t=e.hash(),r=[];for(let n=0;n<e.transactions.length;++n){const i=e.transactions[n];r.push(new Ye(i.hash(),i.sender,i.recipient,e.height,t,n))}return r}static fromJSON(e,t){return new Ye(ue.unserialize(new j(t.transactionHashBuffer)),we.unserialize(new j(t.senderBuffer)),we.unserialize(new j(t.recipientBuffer)),t.blockHeight,ue.fromBase64(t.blockHash),t.index)}toJSON(){return{transactionHashBuffer:this.transactionHashBuffer,senderBuffer:this.senderBuffer,recipientBuffer:this.recipientBuffer,blockHeight:this.blockHeight,blockHash:this.blockHash.toBase64(),index:this.index}}get transactionHash(){return this._transactionHash}get sender(){return this._sender}get recipient(){return this._recipient}get blockHeight(){return this._blockHeight}get blockHash(){return this._blockHash}get index(){return this._index}}c.register(Ye);class Xe{static initPersistent(e){e.deleteObjectStore("Transactions",{upgradeCondition:e=>e<4,indexNames:["sender","recipient"]}),e.deleteObjectStore("Transactions",{upgradeCondition:e=>e>=4&&e<8,indexNames:["sender","recipient","transactionHash"]});const t=e.createObjectStore("Transactions",{codec:new $e,keyEncoding:s.JungleDB.NUMBER_ENCODING});t.createIndex("sender",["senderBuffer"],{keyEncoding:s.JungleDB.BINARY_ENCODING}),t.createIndex("recipient",["recipientBuffer"],{keyEncoding:s.JungleDB.BINARY_ENCODING}),t.createIndex("transactionHash",["transactionHashBuffer"],{keyEncoding:s.JungleDB.BINARY_ENCODING})}static getPersistent(e){return new Xe(e.getObjectStore("Transactions"))}static createVolatile(){const e=s.JungleDB.createVolatileObjectStore();return e.createIndex("sender",["senderBuffer"]),e.createIndex("recipient",["recipientBuffer"]),e.createIndex("transactionHash",["transactionHashBuffer"],{unique:!0}),new Xe(e)}constructor(e){this._store=e}async _getCurrentId(e){return e=e||this._store,await e.get(Xe.CURRENT_ID_KEY)||1}_setCurrentId(e,t){return(t=t||this._store).put(Xe.CURRENT_ID_KEY,e)}async _idForHash(e,t){const r=(t=t||this._store).index("transactionHash"),n=await r.keys(s.KeyRange.only(e.serialize()));for(const e of n)return e;return null}async get(e){const t=this._store.index("transactionHash"),r=await t.values(s.KeyRange.only(e.serialize()));return r&&r.length>0?r[0]:null}async getBySender(e,t=null){const r=this._store.index("sender"),n=[];return await r.valueStream((e,r)=>!(null!==t&&n.length>=t)&&(n.push(e),!0),!1,s.KeyRange.only(e.serialize())),n}async getByRecipient(e,t=null){const r=this._store.index("recipient"),n=[];return await r.valueStream((e,r)=>!(null!==t&&n.length>=t)&&(n.push(e),!0),!1,s.KeyRange.only(e.serialize())),n}async put(e){const t=Ye.fromBlock(e),r=this._store.transaction();let n=await this._getCurrentId(r);for(const e of t)r.putSync(n,e),n++;return await this._setCurrentId(n,r),r.commit()}async remove(e){const t=this._store.transaction();for(const r of e.transactions)t.removeSync(await this._idForHash(r.hash(),t));return t.commit()}snapshot(e){const t=this._store.snapshot();return e&&t.inherit(e._store),new Xe(t)}transaction(e=!0){const t=this._store.transaction(e);return new Xe(t)}truncate(){return this._store.truncate()}commit(){return this._store.commit()}abort(){return this._store.abort()}get tx(){return this._store instanceof s.Transaction?this._store:void 0}}Xe.CURRENT_ID_KEY=0,c.register(Xe);class $e{encode(e){return e instanceof Ye?e.toJSON():e}decode(e,t){return 0===t?e:Ye.fromJSON(t,e)}get valueEncoding(){return s.JungleDB.JSON_ENCODING}}class Ze{constructor(e,t,r){this._transactionHash=e,this._blockHash=t,this._blockHeight=r}static unserialize(e){const t=ue.unserialize(e),r=ue.unserialize(e),n=e.readUint32();return new Ze(t,r,n)}serialize(e){return e=e||new j(this.serializedSize),this._transactionHash.serialize(e),this._blockHash.serialize(e),e.writeUint32(this._blockHeight),e}get serializedSize(){return this._transactionHash.serializedSize+this._blockHash.serializedSize+4}get transactionHash(){return this._transactionHash}get blockHash(){return this._blockHash}get blockHeight(){return this._blockHeight}equals(e){return e instanceof Ze&&this.transactionHash.equals(e.transactionHash)&&this.blockHash.equals(e.blockHash)&&this.blockHeight===e.blockHeight}toPlain(){return{transactionHash:this.transactionHash.toPlain(),blockHash:this.blockHash.toPlain(),blockHeight:this.blockHeight}}static fromPlain(e){if(!e)throw new Error("invalid transaction receipt");return new Ze(ue.fromAny(e.transactionHash),ue.fromAny(e.blockHash),e.blockHeight)}static fromAny(e){if(e instanceof Ze)return e;if("string"==typeof e)return Ze.unserialize(z.fromHex(e));if("object"==typeof e)return Ze.fromPlain(e);throw new Error("invalid transaction receipt")}}c.register(Ze);class Je{constructor(e,t,r){if(!(e instanceof Ue))throw new Error("Malformed header");if(!(t instanceof Ke))throw new Error("Malformed interlink");if(r&&!(r instanceof Fe))throw new Error("Malformed body");this._header=e,this._interlink=t,this._body=r}static unserialize(e){const t=Ue.unserialize(e),r=Ke.unserialize(e,t.prevHash);let n=void 0;return e.readUint8()&&(n=Fe.unserialize(e)),new Je(t,r,n)}serialize(e){return e=e||new j(this.serializedSize),this._header.serialize(e),this._interlink.serialize(e),this._body?(e.writeUint8(1),this._body.serialize(e)):e.writeUint8(0),e}get serializedSize(){return this._header.serializedSize+this._interlink.serializedSize+1+(this._body?this._body.serializedSize:0)}async verify(e){if(void 0===this._valid)if(this.isLight()||this.body.transactions.length<150||!W.areWorkersAsync)this._valid=await this._verify(e.now());else{const t=this.body.transactions.map(e=>e._valid),r=await Q.getInstanceAsync(),{valid:n,pow:i,interlinkHash:s,bodyHash:o}=await r.blockVerify(this.serialize(),t,e.now(),Wr.GENESIS_HASH.serialize(),Wr.NETWORK_ID);this._valid=n,this.header._pow=ue.unserialize(new j(i)),this.interlink._hash=ue.unserialize(new j(s)),this.body._hash=ue.unserialize(new j(o))}return this._valid}async _verify(e){return 1e3*this._header.timestamp>e+1e3*Je.TIMESTAMP_DRIFT_MAX?(h.w(Je,"Invalid block - timestamp too far in the future"),!1):await this._header.verifyProofOfWork()?this.serializedSize>ae.BLOCK_SIZE_MAX?(h.w(Je,"Invalid block - max block size exceeded"),!1):!(!this._verifyInterlink()||this.isFull()&&!this._verifyBody()):(h.w(Je,"Invalid block - PoW verification failed"),!1)}_verifyInterlink(){if(1===this.height&&this._header.interlinkHash.equals(new ue(null)))return!0;const e=this._interlink.hash();return!!this._header.interlinkHash.equals(e)||(h.w(Je,"Invalid block - interlink hash mismatch"),!1)}_verifyBody(){if(!this._body.verify())return!1;const e=this._body.hash();return!!this._header.bodyHash.equals(e)||(h.w(Je,"Invalid block - body hash mismatch"),!1)}async isImmediateSuccessorOf(e){if(!this._header.isImmediateSuccessorOf(e.header))return!1;const t=await e.getNextInterlink(this.target,this.version);return!!this._interlink.equals(t)}async isInterlinkSuccessorOf(e){if(this._header.height<=e.header.height)return h.v(Je,"No interlink successor - height"),!1;if(this._header.timestamp<e.header.timestamp)return h.v(Je,"No interlink successor - timestamp"),!1;const t=e.hash();if(!Wr.GENESIS_HASH.equals(t)){const r=await e.pow(),n=ze.getTargetHeight(this.target);let i=!1,s=0;for(;s<this._interlink.length;s++)if(t.equals(this._interlink.hashes[s])){i=!0;const e=new J(2).pow(n-s);if(!ze.isProofOfWork(r,e))return h.v(Je,"No interlink successor - invalid position in interlink"),!1}if(!i)return h.v(Je,"No interlink successor - not in interlink"),!1}if(this._header.prevHash.equals(t)){if(this._header.height!==e.header.height+1)return h.v(Je,"No interlink successor - immediate height"),!1;const t=(await e.getNextInterlink(this.target,this.version)).hash();if(!this._header.interlinkHash.equals(t))return h.v(Je,"No interlink successor - immediate interlink"),!1}else{if(this._header.height===e.header.height+1)return h.v(Je,"No interlink successor - immediate height (2)"),!1;{const t=new R;if(t.addAll(this._interlink.hashes),t.removeAll(e.interlink.hashes),t.length>this._header.height-e.header.height)return h.v(Je,"No interlink successor - too many new blocks"),!1;const r=ze.getTargetDepth(this.target)-ze.getTargetDepth(e.target);if(this._interlink.length<e.interlink.length-r)return h.v(Je,"No interlink successor - interlink too short"),!1;let n=!1;const i=this._interlink.hashes,s=e.interlink.hashes;for(let e=1;e<s.length&&e-r<i.length;e++)if(s[e].equals(i[e-r]))n=!0;else if(n)return h.v(Je,"No interlink successor - invalid common suffix"),!1}}return!0}async isSuccessorOf(e){return await this.isImmediateSuccessorOf(e)||await this.isInterlinkSuccessorOf(e)}async getNextInterlink(e,t=Ue.CURRENT_VERSION){const r=[],n=this.hash(),i=ze.getHashDepth(await this.pow()),s=ze.getTargetDepth(e),o=Math.max(i-s+1,0);for(let e=0;e<o;e++)r.push(n);for(let e=o+(s-ze.getTargetDepth(this.target));e<this.interlink.length;e++)r.push(this.interlink.hashes[e]);return new Ke(r,n)}shallowCopy(){return new Je(this._header,this._interlink,this._body)}equals(e){return e instanceof Je&&this._header.equals(e._header)&&this._interlink.equals(e._interlink)&&(this._body?this._body.equals(e._body):!e._body)}isLight(){return!this._body}isFull(){return!!this._body}toLight(){return this.isLight()?this:new Je(this._header,this._interlink)}toFull(e){return this.isFull()?this:new Je(this._header,this._interlink,e)}get header(){return this._header}get interlink(){return this._interlink}get body(){if(this.isLight())throw new Error("Cannot access body of light block");return this._body}get version(){return this._header.version}get prevHash(){return this._header.prevHash}get interlinkHash(){return this._header.interlinkHash}get bodyHash(){return this._header.bodyHash}get accountsHash(){return this._header.accountsHash}get nBits(){return this._header.nBits}get target(){return this._header.target}get difficulty(){return this._header.difficulty}get height(){return this._header.height}get timestamp(){return this._header.timestamp}get nonce(){return this._header.nonce}get minerAddr(){return this._body?this._body.minerAddr:void 0}get transactions(){return this._body?this._body.transactions:void 0}get extraData(){return this._body?this._body.extraData:void 0}get prunedAccounts(){return this._body?this._body.prunedAccounts:void 0}get transactionCount(){return this._body?this._body.transactionCount:void 0}hash(e){return this._header.hash(e)}pow(e){return this._header.pow(e)}static fromAny(e){if(e instanceof Je)return e;if("object"==typeof e)return Je.fromPlain(e);if("string"==typeof e)return Je.unserialize(z.fromHex(e));throw new Error("Invalid block")}static fromPlain(e){const t=new Ue(ue.fromAny(e.prevHash),ue.fromAny(e.interlinkHash),ue.fromAny(e.bodyHash),ue.fromAny(e.accountsHash),e.nBits,e.height,e.timestamp,e.nonce,e.version),r=new Ke((e.interlink.hashes||e.interlink).map(e=>ue.fromAny(e)),ue.fromAny(e.prevHash));let n=null;return e.minerAddr&&void 0!==e.extraData&&Array.isArray(e.transactions)&&Array.isArray(e.prunedAccounts)&&(n=new Fe(we.fromAny(e.minerAddr),e.transactions.map(e=>He.fromAny(e)),z.fromAny(e.extraData),e.prunedAccounts.map(e=>Ee.fromAny(e)))),new Je(t,r,n)}toString(){return`Block{height=${this.height},prev=${this.prevHash}}`}toPlain(){const e={version:this.version,hash:this.hash().toPlain(),prevHash:this.prevHash.toPlain(),interlinkHash:this.interlinkHash.toPlain(),bodyHash:this.bodyHash.toPlain(),accountsHash:this.accountsHash.toPlain(),nBits:this.nBits,difficulty:this.difficulty.toString(),height:this.height,timestamp:this.timestamp,nonce:this.nonce,interlink:this.interlink.hashes.map(e=>e.toPlain())};return this.isFull()&&(e.minerAddr=this.minerAddr.toPlain(),e.transactions=this.transactions.map(e=>e.toPlain()),e.extraData=z.toHex(this.extraData),e.prunedAccounts=this.prunedAccounts.map(e=>e.toPlain())),e}}Je.TIMESTAMP_DRIFT_MAX=600,c.register(Je);class et extends l{get head(){}get headHash(){}get height(){}}c.register(et);class tt extends et{constructor(e){super(),this._store=e}async getBlock(e,t=!1,r=!1){const n=await this._store.getChainData(e,r);return n&&(n.onMainChain||t)?n.head:null}getRawBlock(e,t=!1){return this._store.getRawBlock(e,t)}getBlockAt(e,t=!1){return this._store.getBlockAt(e,t)||null}getNearestBlockAt(e,t=!0){return this._store.getNearestBlockAt(e,t)||null}async getSuccessorBlocks(e){return this._store.getSuccessorBlocks(e)}async getBlockLocators(){const e=[this.headHash];let t=this.head;for(let r=Math.min(10,this.height)-1;r>0&&t;r--)e.push(t.prevHash),t=await this.getBlock(t.prevHash);let r=2;for(let n=this.height-10-r;n>0&&((t=await this.getBlockAt(n))&&e.push(await t.hash()),r*=2,!(e.length>=Ht.LOCATORS_MAX_COUNT));n-=r);return 0!==e.length&&e[e.length-1].equals(Wr.GENESIS_HASH)||(e.length>=Ht.LOCATORS_MAX_COUNT&&e.pop(),e.push(Wr.GENESIS_HASH)),e}async getNextTarget(e,t){let r;if(e){const t=e.hash();r=await this._store.getChainData(t),F.that(!!r)}else e=this.head,r=this._mainChain;t&&(r=await r.nextChainData(t),e=t);const n=Math.max(e.height-ae.DIFFICULTY_BLOCK_WINDOW,1);let i;if(r.onMainChain)i=await this._store.getChainDataAt(n);else{let e=r;for(let t=0;t<ae.DIFFICULTY_BLOCK_WINDOW&&!e.onMainChain;t++)if(!(e=await this._store.getChainData(e.head.prevHash)))return null;i=e.onMainChain&&e.head.height>n?await this._store.getChainDataAt(n):e}if(!i||i.totalDifficulty.lt(1))return null;const s=r.totalDifficulty.minus(i.totalDifficulty);return ze.getNextTarget(r.head.header,i.head.header,s)}_getChainProof(){return this._prove(ae.M,ae.K,ae.DELTA)}async _prove(e,t,r){F.that(e>=1,"m must be >= 1"),F.that(r>0,"delta must be > 0");let n=new rt([]),i=1;const s=await this._store.getChainDataAt(Math.max(this.height-t,1));for(let t=s.superBlockCounts.getCandidateDepth(e);t>=0;t--){const o=await this._getSuperChain(t,s,i);n=rt.merge(n,new rt(o.map(e=>e.head.toLight()))),tt._isGoodSuperChain(o,t,e,r)&&(F.that(o.length>=e,`Good superchain expected to be at least ${e} long`),h.v(tt,()=>`Found good superchain at depth ${t} with length ${o.length} (#${i} - #${s.head.height})`),i=o[o.length-e].head.height)}const o=await this._getHeaderChain(this.height-s.head.height);return new st(n,o)}async _getSuperChain(e,t,r=1){F.that(r>=1,"tailHeight must be >= 1");const n=[];ze.getHashDepth(await t.head.pow())>=e&&n.push(t);let i=t,s=Math.max(e-ze.getTargetDepth(i.head.target),-1);for(;s<i.head.interlink.hashes.length&&i.head.height>r;){const t=s<0?i.head.prevHash:i.head.interlink.hashes[s];if(!(i=await this._store.getChainData(t))){h.w(tt,`Failed to find block ${t} while constructing SuperChain at depth ${e} - returning truncated chain`);break}n.push(i),s=Math.max(e-ze.getTargetDepth(i.head.target),-1)}return(0===n.length||n[n.length-1].head.height>1)&&1===r&&n.push(await ot.initial(Wr.GENESIS_BLOCK)),n.reverse()}static _isGoodSuperChain(e,t,r,n){return tt._hasSuperQuality(e,t,r,n)&&tt._hasMultiLevelQuality(e,t,r,n)}static _hasSuperQuality(e,t,r,n){if(F.that(r>=1,"m must be >= 1"),e.length<r)return!1;for(let i=r;i<=e.length;i++){const r=e[e.length-1].head.height-e[e.length-i].head.height+1;if(!tt._isLocallyGood(i,r,t,n))return!1}return!0}static _hasMultiLevelQuality(e,t,r,n){if(t<=0)return!0;for(let i=0;i<e.length-r;i++){const s=e[i],o=e[i+r];for(let e=t;e>=1;e--){const a=o.superBlockCounts.get(e)-s.superBlockCounts.get(e);switch(tt.MULTILEVEL_STRATEGY){case tt.MultilevelStrategy.STRICT:{const r=o.superBlockCounts.get(e-1)-s.superBlockCounts.get(e-1);if(2*a<Math.pow(1-n,1/t)*r)return h.d(tt,`Chain badness detected at depth ${t}, failing at ${e}/${e-1}`+` with ${a}/${Math.pow(1-n,1/t)*r}/${r} blocks`),!1;break}default:case tt.MultilevelStrategy.MODERATE:for(let c=e-1;c>=0;c--){const u=o.superBlockCounts.get(c)-s.superBlockCounts.get(c);if(!tt._isLocallyGood(a,u,e-c,n))return h.d(tt,`Chain badness detected at depth ${t}[${i}:${i+r}], failing at ${e}/${c}`),!1}break;case tt.MultilevelStrategy.RELAXED:{const a=o.superBlockCounts.get(e-1)-s.superBlockCounts.get(e-1),c=o.head.height-s.head.height+1;if(!tt._isLocallyGood(a,c,t,n))return h.d(tt,`Chain badness detected at depth ${t}[${i}:${i+r}], failing at ${e}`),!1;break}}}}return!0}static _isLocallyGood(e,t,r,n){return e>(1-n)*Math.pow(2,-r)*t}async _getHeaderChain(e,t=this.head){const r=[];for(;t&&r.length<e;)r.push(t.header),t=await this.getBlock(t.prevHash);return new it(r.reverse())}async _extendChainProof(e,t,r=!0){const n=e.suffix.headers.slice();n.push(t);const i=e.prefix.blocks.slice();if(n.length<=ae.K)return new st(new rt(i),new it(n));const s=n.shift(),o=await e.prefix.head.getNextInterlink(s.target,s.version),a=new Je(s,o);i.push(a);const c=(await e.prefix.getSuperChains()).slice(),u=ze.getHashDepth(await a.pow());for(let e=u;e>=0;e--)c[e]?c[e]=new rt([...c[e].blocks,a]):c[e]=new rt([a]);if(u-ze.getTargetDepth(a.target)<=0)return new st(new rt(i,c),new it(n));const l=new Set;for(let e=u;e>=0;e--){const t=c[e];if(t.length<ae.M)continue;const n=t.blocks.map(e=>({head:e}));if(!tt._hasSuperQuality(n,e,ae.M,ae.DELTA)){if(h.w(tt,`Chain quality badness detected at depth ${e}`),r)return null;continue}const i=t.blocks[t.length-ae.M];for(let t=e-1;t>=0;t--){let e=0,r=c[t].blocks[e];for(;r.height<=i.height;)ze.getHashDepth(await r.pow())===t&&r.height>1&&l.add(r.height),e++,r=c[t].blocks[e];e>0&&(c[t]=new rt(c[t].blocks.slice(e)))}}const f=new rt(i.filter(e=>!l.has(e.height)),c);return new st(f,new it(n))}async _getBlockProof(e,t){const r=(e,t)=>{const r=Math.min(t-ze.getTargetDepth(e.target),e.interlink.length-1);return r<0?e.prevHash:e.interlink.hashes[r]},n=[],i=e.hash(),s=ze.hashToTarget(await e.pow()),o=ze.getTargetDepth(s);let a=ze.getTargetDepth(t.target)+t.interlink.length-1,c=t,u=r(c,a);for(;!i.equals(u);){const t=await this.getBlock(u);if(!t)return h.w(tt,`Failed to find block ${u} while constructing inclusion proof`),null;if(t.height<e.height){if(a<=o)return null;u=r(c,--a)}else{if(!(t.height>e.height))return h.w(tt,`Failed to prove block ${i} - different block ${u} at its height ${c.height}`),null;n.push(t.toLight()),u=r(c=t,a)}}return n.push(e.toLight()),new rt(n.reverse())}static async manyPow(e){const t=await Q.getInstanceAsync(),r=t.poolSize||1,n=[];let i=0;for(let t=0;t<r;++t)for(n.push([]);i<(t+1)/r*e.length;++i)n[t].push(e[i].serialize());const s=[];for(const e of n)s.push(t.computeArgon2dBatch(e));const o=(await Promise.all(s)).reduce((e,t)=>[...e,...t],[]);for(let t=0;t<e.length;++t)e[t]._pow=new ue(o[t])}static async isBetterProof(e,t,r){const n=rt.lowestCommonAncestor(e.prefix,t.prefix),i=await It._getProofScore(e.prefix,n,r),s=await It._getProofScore(t.prefix,n,r);return i===s?e.suffix.totalDifficulty().gt(t.suffix.totalDifficulty()):i>s}static async _getProofScore(e,t,r){const n=[];for(const r of e.blocks){if(r.height<t.height)continue;const e=ze.getHashDepth(await r.pow());n[e]=n[e]?n[e]+1:1}let i,s=0;for(i=n.length-1;s<r&&i>=0;i--)s+=n[i]?n[i]:0;let o=Math.pow(2,i+1)*s,a=s;for(let e=i;e>=0;e--){a+=n[e]?n[e]:0;const t=Math.pow(2,e)*a;o=Math.max(o,t)}return o}}tt.MultilevelStrategy={STRICT:1,MODERATE:2,RELAXED:3},tt.MULTILEVEL_STRATEGY=tt.MultilevelStrategy.MODERATE,c.register(tt);class rt{static merge(e,t){const r=[];let n=0,i=0;for(;n<e.length&&i<t.length;){const s=e.blocks[n],o=t.blocks[i];s.height===o.height?(F.that(s.equals(o),"Encountered different blocks at same height during chain merge"),r.push(s),n++,i++):s.height<o.height?(r.push(s),n++):(r.push(o),i++)}for(;n<e.length;n++)r.push(e.blocks[n]);for(;i<t.length;i++)r.push(t.blocks[i]);return new rt(r)}static lowestCommonAncestor(e,t){let r=e.length-1,n=t.length-1;for(;r>=0&&n>=0;){const i=e.blocks[r],s=t.blocks[n];if(i.equals(s))return i;i.height>s.height?r--:n--}}constructor(e,t){if(!Array.isArray(e)||!ee.isUint16(e.length)||e.some(e=>!(e instanceof Je&&e.isLight())))throw new Error("Malformed blocks");this._blocks=e,this._chains=t}static unserialize(e){const t=e.readUint16(),r=[];for(let n=0;n<t;n++)r.push(Je.unserialize(e));return new rt(r)}serialize(e){(e=e||new j(this.serializedSize)).writeUint16(this._blocks.length);for(const t of this._blocks)t.serialize(e);return e}get serializedSize(){return 2+this._blocks.reduce((e,t)=>e+t.serializedSize,0)}async verify(){for(let e=this._blocks.length-1;e>=1;e--)if(e%100==99&&await C.webYield(),!await this._blocks[e].isSuccessorOf(this._blocks[e-1]))return!1;return!0}denseSuffix(){const e=[this.head];let t=this.head;for(let r=this.length-2;r>=0;r--){const n=this.blocks[r];if(!n.hash().equals(t.prevHash))break;e.push(n),t=n}return e.reverse(),e}async getSuperChains(){if(!this._chains){this._chains=[];for(let e=0;e<this.length;e++){const t=this.blocks[e],r=ze.getHashDepth(await t.pow());this._chains[r]?this._chains[r].blocks.push(t):this._chains[r]||(this._chains[r]=new rt([t]));for(let e=r-1;e>=0;e--)this._chains[e]&&this._chains[e].blocks.push(t)}for(let e=0;e<this._chains.length;e++)this._chains[e]||(this._chains[e]=new rt([]))}return this._chains}isAnchored(){return Wr.GENESIS_HASH.equals(this.tail.hash())}toString(){return`BlockChain{length=${this.length}}`}get length(){return this._blocks.length}get blocks(){return this._blocks}get head(){return this._blocks[this.length-1]}get tail(){return this._blocks[0]}totalDifficulty(){return this._blocks.reduce((e,t)=>e+ze.targetToDifficulty(t.target),0)}}c.register(rt);class nt{constructor(e,t,r,n){this._blockchain=e,this._accounts=t,this._mempool=r,this._time=n}async getNextBlock(e,t=new Uint8Array(0)){const r=await this._blockchain.getNextTarget(),n=await this._getNextInterlink(r),i=await this._getNextBody(n.serializedSize,e,t),s=await this._getNextHeader(r,n,i);return(await this._blockchain.getNextTarget()).equals(r)?new Je(s,n,i):this.getNextBlock(e,t)}async _getNextHeader(e,t,r){const n=this._blockchain.headHash,i=t.hash(),s=this._blockchain.height+1,o=await this._accounts.transaction();let a;try{await o.commitBlockBody(r,s,this._blockchain.transactionCache),a=await o.hash()}catch(e){throw new Error(`Invalid block body: ${e.message}`)}finally{await o.abort()}const c=r.hash(),u=this._getNextTimestamp(),h=ze.targetToCompact(e);return new Ue(n,i,c,a,h,s,u,0)}_getNextInterlink(e){return this._blockchain.head.getNextInterlink(e)}async _getNextBody(e,t,r){const n=ae.BLOCK_SIZE_MAX-Ue.SERIALIZED_SIZE-e-Fe.getMetadataSize(r),i=await this._mempool.getTransactionsForBlock(n),s=await this._accounts.gatherToBePrunedAccounts(i,this._blockchain.height+1,this._blockchain.transactionCache);return new Fe(t,i,r,s)}_getNextTimestamp(){const e=Math.floor(this._time.now()/1e3);return Math.max(e,this._blockchain.head.timestamp+1)}}c.register(nt);class it{constructor(e){if(!e||!Array.isArray(e)||!ee.isUint16(e.length)||e.some(e=>!(e instanceof Ue)))throw new Error("Malformed headers");this._headers=e}static unserialize(e){const t=e.readUint16(),r=[];for(let n=0;n<t;n++)r.push(Ue.unserialize(e));return new it(r)}serialize(e){(e=e||new j(this.serializedSize)).writeUint16(this._headers.length);for(const t of this._headers)t.serialize(e);return e}get serializedSize(){return 2+this._headers.reduce((e,t)=>e+t.serializedSize,0)}async verify(){for(let e=this._headers.length-1;e>=1;e--)if(!this._headers[e].isImmediateSuccessorOf(this._headers[e-1]))return!1;return!0}toString(){return`HeaderChain{length=${this.length}}`}get length(){return this._headers.length}get headers(){return this._headers}get head(){return this._headers[this.length-1]}get tail(){return this._headers[0]}totalDifficulty(){let e=new J(0);for(const t of this._headers)e=e.plus(t.difficulty);return e}}c.register(it);class st{constructor(e,t){if(!(e instanceof rt&&e.length))throw new Error("Malformed prefix");if(!(t instanceof it))throw new Error("Malformed suffix");this._prefix=e,this._suffix=t}static unserialize(e){const t=rt.unserialize(e),r=it.unserialize(e);return new st(t,r)}serialize(e){return e=e||new j(this.serializedSize),this._prefix.serialize(e),this._suffix.serialize(e),e}get serializedSize(){return this._prefix.serializedSize+this._suffix.serializedSize}async verify(){return!(!this._prefix.isAnchored()||!await this._prefix.verify()||!await this._suffix.verify()||this._suffix.length>0&&!this._suffix.tail.isImmediateSuccessorOf(this._prefix.head.header)||!this._verifyDifficulty())}_verifyDifficulty(){const e=this.prefix.denseSuffix().map(e=>e.header).concat(this.suffix.headers);let t=new J(0);const r=[];for(let n=0;n<e.length;n++)t=t.plus(e[n].difficulty),r[n]=new J(t);let n=e.length-2,i=n-ae.DIFFICULTY_BLOCK_WINDOW;for(;i>=0&&n>=0;){const t=e[n],s=e[i],o=r[n].minus(r[i]),a=ze.getNextTarget(t,s,o),c=ze.targetToCompact(a),u=e[n+1];if(u.nBits!==c)return h.w(st,`Block target mismatch: expected=${c}, got=${u.nBits}`),!1;--n,0===i&&1===s.height||--i}return!0}toString(){return`ChainProof{prefix=${this._prefix.length}, suffix=${this._suffix.length}, height=${this.head.height}}`}get prefix(){return this._prefix}get suffix(){return this._suffix}get head(){return this._suffix.length>0?this._suffix.head:this._prefix.head.header}}c.register(st);class ot{static async initial(e,t){const r=await e.pow(),n=ze.realDifficulty(r),i=ze.getHashDepth(r);return t?t=t.copyAndAdd(i):(t=new at).add(i),new ot(e,e.difficulty,n,t,!0)}constructor(e,t,r,n,i=!1,s=null){this._head=e,this._totalDifficulty=t,this._totalWork=r,this._superBlockCounts=n,this._onMainChain=i,this._mainChainSuccessor=s,this._height=e.height}toObj(){return F.that(this._head.header._pow instanceof ue,"Expected cached PoW hash"),{_head:this._head.toLight().serialize(),_totalDifficulty:this._totalDifficulty.toString(),_totalWork:this._totalWork.toString(),_superBlockCounts:this._superBlockCounts.array,_onMainChain:this._onMainChain,_mainChainSuccessor:this._mainChainSuccessor?this._mainChainSuccessor.serialize():null,_height:this._head.height,_pow:this._head.header._pow.serialize()}}static fromObj(e,t){if(!e)return null;const r=Je.unserialize(new j(e._head));r.header._pow=ue.unserialize(new j(e._pow)),r.header._hash=t?ue.fromBase64(t):null;const n=new at(e._superBlockCounts),i=e._mainChainSuccessor?ue.unserialize(new j(e._mainChainSuccessor)):null;return new ot(r,new J(e._totalDifficulty),new J(e._totalWork),n,e._onMainChain,i)}shallowCopy(){return new ot(this.head.shallowCopy(),this.totalDifficulty,this.totalWork,this.superBlockCounts,this.onMainChain,this.mainChainSuccessor)}async nextChainData(e){F.that(this._totalDifficulty>0);const t=await e.pow(),r=this.totalDifficulty.plus(e.difficulty),n=this.totalWork.plus(ze.realDifficulty(t)),i=this.superBlockCounts.copyAndAdd(ze.getHashDepth(t));return new ot(e,r,n,i)}async previousChainData(e){F.that(this._totalDifficulty>0);const t=await this.head.pow(),r=this.totalDifficulty.minus(this.head.difficulty),n=this.totalWork.minus(ze.realDifficulty(t)),i=this.superBlockCounts.copyAndSubtract(ze.getHashDepth(t));return new ot(e,r,n,i)}get head(){return this._head}get totalDifficulty(){return this._totalDifficulty}get totalWork(){return this._totalWork}get superBlockCounts(){return this._superBlockCounts}get onMainChain(){return this._onMainChain}set onMainChain(e){this._onMainChain=e}get mainChainSuccessor(){return this._mainChainSuccessor}set mainChainSuccessor(e){this._mainChainSuccessor=e}}c.register(ot);class at{constructor(e=[]){this._arr=e}add(e){F.that(ee.isUint8(e));for(let t=0;t<=e;t++)this._arr[t]=this.get(t)+1}subtract(e){F.that(ee.isUint8(e));for(let t=0;t<=e;t++)this._arr[t]--,F.that(this._arr[t]>=0)}copyAndAdd(e){const t=new at(this._arr.slice());return t.add(e),t}copyAndSubtract(e){const t=new at(this._arr.slice());return t.subtract(e),t}get(e){return F.that(ee.isUint8(e)),this._arr[e]||0}getCandidateDepth(e){for(let t=this._arr.length-1;t>=0;t--)if(this._arr[t]>=e)return t;return 0}get length(){return this._arr.length}get array(){return this._arr}}c.register(at);class ct{static initPersistent(e){const t=e.createObjectStore("ChainData",{codec:new ut,enableLruCache:ct.CHAINDATA_CACHING_ENABLED,lruCacheSize:ct.CHAINDATA_CACHE_SIZE});ct._createIndexes(t),e.createObjectStore("Block",{codec:new ht,enableLruCache:ct.BLOCKS_CACHING_ENABLED,lruCacheSize:ct.BLOCKS_CACHE_SIZE,rawLruCacheSize:ct.BLOCKS_RAW_CACHE_SIZE})}static getPersistent(e){const t=e.getObjectStore("ChainData"),r=e.getObjectStore("Block");return new ct(t,r)}static createVolatile(){const e=s.JungleDB.createVolatileObjectStore({codec:new ut}),t=s.JungleDB.createVolatileObjectStore({codec:new ht});return ct._createIndexes(e),new ct(e,t)}static _createIndexes(e){e.createIndex("height",["_height"],{lmdbKeyEncoding:s.JungleDB.NUMBER_ENCODING,leveldbKeyEncoding:s.JungleDB.NUMBER_ENCODING})}constructor(e,t){this._chainStore=e,this._blockStore=t}async getChainData(e,t=!1){let r=await this._chainStore.get(e.toBase64());if(r&&(r=r.shallowCopy()),!r||!t)return r;const n=await this._blockStore.get(e.toBase64());return n&&n.isFull()&&(r.head._body=n.body),r}putChainData(e,t,r=!0){const n=t.shallowCopy();if(n.head._body=null,this._chainStore instanceof s.Transaction)return this._chainStore.putSync(e.toBase64(),n),r&&t.head.isFull()&&this._blockStore.putSync(e.toBase64(),t.head),Promise.resolve(!0);if(r&&t.head.isFull()){const r=this._chainStore.synchronousTransaction();r.putSync(e.toBase64(),n);const i=this._blockStore.synchronousTransaction();return i.putSync(e.toBase64(),t.head),s.JungleDB.commitCombined(r,i)}return this._chainStore.put(e.toBase64(),n)}putChainDataSync(e,t,r=!0){const n=t.shallowCopy();n.head._body=null,F.that(this._chainStore instanceof s.Transaction),this._chainStore.putSync(e.toBase64(),n),r&&t.head.isFull()&&this._blockStore.putSync(e.toBase64(),t.head)}removeChainDataSync(e){F.that(this._chainStore instanceof s.Transaction),this._chainStore.removeSync(e.toBase64()),this._blockStore.removeSync(e.toBase64())}async getBlock(e,t=!1){if(t){const t=await this._blockStore.get(e.toBase64());if(t)return t}const r=await this._chainStore.get(e.toBase64());return r?r.head:null}async getRawBlock(e,t=!1){const r=await this._chainStore.get(e.toBase64());if(!r||!r.onMainChain&&!t)return null;const n=await this._blockStore.get(e.toBase64(),{raw:!0});return n?new Uint8Array(n):null}async getChainDataCandidatesAt(e){const t=await this._chainStore.values(s.Query.eq("height",e));return t&&t.length?t:void 0}async getChainDataAt(e,t=!1){const r=await this.getChainDataCandidatesAt(e);if(r){for(const e of r)if(e.onMainChain){const r=e.shallowCopy();if(t){const t=await this._blockStore.get(e.head.hash().toBase64());t&&(r.head._body=t.body)}return r}return null}}async getBlockAt(e,t=!1){const r=await this.getChainDataAt(e,t);return r?r.head:null}async getSuccessorBlocks(e){const t=await this.getChainDataCandidatesAt(e.height+1);if(!t)return[];const r=[];for(const n of t)n.head.prevHash.equals(e.hash())&&r.push(n.head);return r}async getNearestBlockAt(e,t=!0){const r=this._chainStore.index("height"),n=t?await r.maxValues(s.KeyRange.upperBound(e)):await r.minValues(s.KeyRange.lowerBound(e));if(n&&n.length){for(const e of n)if(e.onMainChain)return e.head;return null}}getBlocks(e,t=500,r=!0){return t<=0?Promise.resolve([]):r?this.getBlocksForward(e,t):this.getBlocksBackward(e,t)}async getBlocksForward(e,t=500){let r=await this._chainStore.get(e.toBase64());if(!r)return[];const n=[];for(;n.length<t&&r.mainChainSuccessor;){if(!(r=await this._chainStore.get(r.mainChainSuccessor.toBase64())))return n;n.push(r.head)}return n}async getBlocksBackward(e,t=500,r=!1){const n=r?e=>this._blockStore.get(e):e=>this._chainStore.get(e).then(e=>e.head),i=await this._chainStore.get(e.toBase64());if(!i)return[];let s=i.head;const o=[];for(;o.length<t&&s.height>1;){if(!(s=await n(s.prevHash.toBase64())))return o;o.push(s)}return o}async getHead(){const e=await this._chainStore.get("main");return e?ue.fromBase64(e):void 0}setHead(e){return this._chainStore.put("main",e.toBase64())}setHeadSync(e){F.that(this._chainStore instanceof s.SynchronousTransaction),this._chainStore.putSync("main",e.toBase64())}transaction(e=!0){const t=this._chainStore.transaction(e),r=this._blockStore.transaction(e);return new ct(t,r)}synchronousTransaction(e=!0){const t=this._chainStore.synchronousTransaction(e),r=this._blockStore.synchronousTransaction(e);return new ct(t,r)}commit(){return this._chainStore instanceof s.Transaction?s.JungleDB.commitCombined(this._chainStore,this._blockStore):Promise.resolve()}abort(){return Promise.all([this._chainStore.abort(),this._blockStore.abort()])}snapshot(){const e=this._chainStore.snapshot(),t=this._blockStore.snapshot();return new ct(e,t)}truncate(){if(this._chainStore instanceof s.Transaction)return this._chainStore.truncateSync(),this._blockStore.truncateSync(),Promise.resolve(!0);const e=this._chainStore.transaction();e.truncateSync();const t=this._blockStore.transaction();return t.truncateSync(),s.JungleDB.commitCombined(e,t)}get txs(){return this._chainStore instanceof s.Transaction?[this._chainStore,this._blockStore]:[]}}ct.CHAINDATA_CACHING_ENABLED=!0,ct.CHAINDATA_CACHE_SIZE=5e3,ct.BLOCKS_CACHING_ENABLED=!0,ct.BLOCKS_CACHE_SIZE=0,ct.BLOCKS_RAW_CACHE_SIZE=500,c.register(ct);class ut{encode(e){return"string"==typeof e?e:e.toObj()}decode(e,t){return"string"==typeof e?e:ot.fromObj(e,t)}get valueEncoding(){return s.JungleDB.JSON_ENCODING}}class ht{encode(e){return e.serialize()}decode(e,t){const r=Je.unserialize(new j(e));return r.header._hash=ue.fromBase64(t),r}get valueEncoding(){return s.JungleDB.BINARY_ENCODING}}class lt{constructor(e){this._transactions=new K(e)}add(e){return this._transactions.add(e),this}remove(e){return this._transactions.remove(e),this}copyAndAdd(e){const t=this._transactions.copy();return t.add(e),new lt(t.values())}get transactions(){return this._transactions.values()}get sender(){return this._transactions.length>0?this._transactions.values()[0].sender:null}get senderType(){return this._transactions.length>0?this._transactions.values()[0].senderType:void 0}get length(){return this._transactions.length}numBelowFeePerByte(e){let t=0;for(const r of this._transactions)r.feePerByte<e&&t++;return t}toString(){return`MempoolTransactionSet{length=${this.length}}`}}c.register(lt);class ft{constructor(){this._blacklist=new O(ft.BLACKLIST_SIZE)}acceptsTransaction(e){return e.fee>=ft.FEE&&e.value>=ft.VALUE&&e.value+e.fee>=ft.TOTAL_VALUE&&(!e.hasFlag(He.Flag.CONTRACT_CREATION)||e.fee>=ft.CONTRACT_FEE&&e.feePerByte>=ft.CONTRACT_FEE_PER_BYTE&&e.value>=ft.CONTRACT_VALUE)}acceptsRecipientAccount(e,t,r){return r.balance>=ft.RECIPIENT_BALANCE&&(!t.isInitial()||e.fee>=ft.CREATION_FEE&&e.feePerByte>=ft.CREATION_FEE_PER_BYTE&&e.value>=ft.CREATION_VALUE)}acceptsSenderAccount(e,t,r){return r.balance>=ft.SENDER_BALANCE||r.isInitial()||r.isToBePruned()}blacklist(e){this._blacklist.add(e)}isBlacklisted(e){return this._blacklist.contains(e)}}ft.BLACKLIST_SIZE=25e3,ft.FEE=0,ft.VALUE=0,ft.TOTAL_VALUE=0,ft.RECIPIENT_BALANCE=0,ft.SENDER_BALANCE=0,ft.CREATION_FEE=0,ft.CREATION_FEE_PER_BYTE=0,ft.CREATION_VALUE=0,ft.CONTRACT_FEE=0,ft.CONTRACT_FEE_PER_BYTE=0,ft.CONTRACT_VALUE=0,c.register(ft);class dt extends l{constructor(e,t){super(),this._blockchain=e,this._accounts=t,this._transactionsByFeePerByte=new K,this._transactionsByHash=new T,this._transactionSetBySender=new T,this._transactionSetByRecipient=new T,this._filter=new ft,this._synchronizer=new H,e.on("head-changed",(e,t)=>{t||this._evictTransactions().catch(h.e.tag(dt))}),e.on("rebranched",async e=>{await this._evictTransactions(),await this._restoreTransactions(e)})}pushTransaction(e){return this._synchronizer.push(()=>this._pushTransaction(e))}async _pushTransaction(e){const t=e.hash();if(this._transactionsByHash.contains(t))return dt.ReturnCode.KNOWN;if(!this._filter.acceptsTransaction(e))return this._filter.blacklist(t),dt.ReturnCode.FILTERED;const r=this._transactionSetBySender.get(e.sender)||new lt;if(e.fee/e.serializedSize<dt.TRANSACTION_RELAY_FEE_MIN&&r.numBelowFeePerByte(dt.TRANSACTION_RELAY_FEE_MIN)>=dt.FREE_TRANSACTIONS_PER_SENDER_MAX)return dt.ReturnCode.FEE_TOO_LOW;if(!e.verify())return dt.ReturnCode.INVALID;try{const r=await this._accounts.get(e.recipient),n=r.withIncomingTransaction(e,this._blockchain.height+1);if(!this._filter.acceptsRecipientAccount(e,r,n))return this._filter.blacklist(t),dt.ReturnCode.FILTERED}catch(r){return h.d(dt,()=>`Rejected transaction ${t.toHex()} from ${e.sender.toUserFriendlyAddress()} - ${r.message}`),dt.ReturnCode.INVALID}let n;try{n=await this._accounts.get(e.sender,e.senderType)}catch(r){return h.d(dt,()=>`Rejected transaction ${t.toHex()} from ${e.sender.toUserFriendlyAddress()} - ${r.message}`),dt.ReturnCode.INVALID}const i=[],s=[];let o=n;for(const t of r.copyAndAdd(e).transactions){let r,n="transactions per sender exceeded";try{if(i.length<dt.TRANSACTIONS_PER_SENDER_MAX){o=o.withOutgoingTransaction(t,this._blockchain.height+1,this._blockchain.transactionCache),i.push(t);continue}}catch(e){r=e,n=e.message}if(t.equals(e))return h.d(dt,()=>`Rejected transaction from ${e.sender.toUserFriendlyAddress()} - ${n}`),r instanceof ve.DoubleTransactionError?dt.ReturnCode.MINED:r instanceof ve.ValidityError?dt.ReturnCode.EXPIRED:dt.ReturnCode.INVALID;s.push(t)}if(!this._filter.acceptsSenderAccount(e,n,o))return this._filter.blacklist(t),dt.ReturnCode.FILTERED;for(const e of s)this._removeTransaction(e);this._transactionsByFeePerByte.add(e),this._transactionsByHash.put(t,e),this._transactionSetBySender.put(e.sender,new lt(i));const a=this._transactionSetByRecipient.get(e.recipient)||new R;return a.add(e.hash()),this._transactionSetByRecipient.put(e.recipient,a),this.fire("transaction-added",e),this._transactionsByFeePerByte.length>dt.SIZE_MAX&&this._popLowFeeTransaction(),dt.ReturnCode.ACCEPTED}_popLowFeeTransaction(){const e=this._transactionsByFeePerByte.pop(),t=this._transactionSetBySender.get(e.sender);t.remove(e),0===t.length&&this._transactionSetBySender.remove(e.sender);const r=this._transactionSetByRecipient.get(e.recipient);r?1===r.length?this._transactionSetByRecipient.remove(e.recipient):r.remove(e.hash()):h.e(dt,`Invalid state: no transactionsByRecipient for ${e}`),this._transactionsByHash.remove(e.hash()),this.fire("transaction-removed",e)}_removeTransaction(e){this._transactionsByHash.remove(e.hash()),this._transactionsByFeePerByte.remove(e);const t=this._transactionSetByRecipient.get(e.recipient);t?(1===t.length?this._transactionSetByRecipient.remove(e.recipient):t.remove(e.hash()),this.fire("transaction-removed",e)):h.e(dt,`Invalid state: no transactionsByRecipient for ${e}`)}getTransaction(e){return this._transactionsByHash.get(e)}*transactionGenerator(e=1/0,t=0){let r=0;for(const n of this._transactionsByFeePerByte){const i=n.serializedSize;if(!(r+i>=e)){if(n.feePerByte<t)break;yield n,r+=i}}}getTransactions(e=1/0,t=0){return Array.from(this.transactionGenerator(e,t))}async getTransactionsForBlock(e){const t=this.getTransactions(e);let r=(await this._accounts.gatherToBePrunedAccounts(t,this._blockchain.height+1,this._blockchain.transactionCache)).reduce((e,t)=>e+t.serializedSize,0)+t.reduce((e,t)=>e+t.serializedSize,0);for(;r>e;)r-=t.pop().serializedSize;return t.sort((e,t)=>e.compareBlockOrder(t)),t}getPendingTransactions(e){return this.getTransactionsBySender(e)}getTransactionsBySender(e){const t=this._transactionSetBySender.get(e);return t?t.transactions:[]}getTransactionsByRecipient(e){const t=this._transactionSetByRecipient.get(e);if(!t)return[];const r=[];for(const e of t.valueIterator()){const t=this._transactionsByHash.get(e);F.that(!!t),r.push(t)}return r}getTransactionsByAddresses(e,t=1/0){const r=[];for(const n of e){const e=this.getTransactionsBySender(n);for(const n of e){if(r.length>=t)return r;r.push(n)}const i=this.getTransactionsByRecipient(n);for(const e of i){if(r.length>=t)return r;r.push(e)}}return r}evictBelowMinFeePerByte(e){let t=this._transactionsByFeePerByte.peekLast();for(;t&&t.feePerByte<e;){this._transactionsByFeePerByte.pop(),this._transactionsByHash.remove(t.hash());const e=this._transactionSetBySender.get(t.sender);1===e.length?this._transactionSetBySender.remove(t.sender):e.remove(t);const r=this._transactionSetByRecipient.get(t.recipient);1===r.length?this._transactionSetByRecipient.remove(t.recipient):r.remove(t.hash()),t=this._transactionsByFeePerByte.peekLast()}}isFiltered(e){return this._filter.isBlacklisted(e)}_restoreTransactions(e){return this._synchronizer.push(async()=>{for(let t=e.length-1;t>=0;t--)for(const r of e[t].transactions)await this._pushTransaction(r)})}_evictTransactions(){return this._synchronizer.push(()=>this.__evictTransactions())}async __evictTransactions(){for(const e of this._transactionSetBySender.keys()){const t=this._transactionSetBySender.get(e);try{const r=await this._accounts.get(t.sender,t.senderType),n=[];let i=r;for(const e of t.transactions)try{const t=i.withOutgoingTransaction(e,this._blockchain.height+1,this._blockchain.transactionCache);(await this._accounts.get(e.recipient)).withIncomingTransaction(e,this._blockchain.height+1),n.push(e),i=t}catch(t){this._removeTransaction(e)}0===n.length?this._transactionSetBySender.remove(e):this._transactionSetBySender.put(e,new lt(n))}catch(r){for(const e of t.transactions)this._removeTransaction(e);this._transactionSetBySender.remove(e)}}this.fire("transactions-ready")}get length(){return this._transactionsByHash.length}get queue(){return this._synchronizer}}dt.TRANSACTION_RELAY_FEE_MIN=1,dt.TRANSACTIONS_PER_SENDER_MAX=500,dt.FREE_TRANSACTIONS_PER_SENDER_MAX=10,dt.SIZE_MAX=5e4,dt.ReturnCode={EXPIRED:-5,MINED:-4,FILTERED:-3,FEE_TOO_LOW:-2,INVALID:-1,ACCEPTED:1,KNOWN:2},c.register(dt);class pt{constructor(){this._vectorsToRequest=new T,this._timers=new v}askToRequestVector(e,t){if(e.syncing||this._vectorsToRequest.length>pt.MAX_INV_MANAGED)e.requestVector(t);else if(this._vectorsToRequest.contains(t)){const r=this._vectorsToRequest.get(t);r.current.peer.channel.closed&&(r.current=null),null===r.current?(r.current=e,this._request(t)):r.waiting.add(e)}else this._vectorsToRequest.put(t,{current:e,waiting:new Set}),this._request(t)}_request(e){F.that(this._vectorsToRequest.contains(e));const t=this._vectorsToRequest.get(e).current;F.that(t),t.requestVector(e),this._timers.resetTimeout(e.hash,()=>this.noteVectorNotReceived(t,e),pt.MAX_TIME_PER_VECTOR)}noteVectorNotReceived(e,t){if(this._vectorsToRequest.contains(t)){const r=this._vectorsToRequest.get(t);r.current!==e?r.waiting.delete(e):(this._timers.clearTimeout(t.hash),r.current=null,0!==r.waiting.size&&(r.current=r.waiting.values().next().value,r.waiting.delete(r.current),this._request(t)),null===r.current&&this._vectorsToRequest.remove(t))}}noteVectorReceived(e){this._timers.clearTimeout(e.hash),this._vectorsToRequest.remove(e)}}pt.MAX_TIME_PER_VECTOR=1e4,pt.MAX_INV_MANAGED=1e4,c.register(pt);class At extends l{constructor(e,t,r,n){super(),this._time=e,this._peer=t,this._synced=!1,this._knownObjects=new O(At.KNOWN_OBJECTS_COUNT_MAX),this._knownObjects.add(new Vt(Vt.Type.BLOCK,t.headHash)),this._blocksToRequest=new M,this._txsToRequest=new U(At.TRANSACTIONS_AT_ONCE+At.FREE_TRANSACTIONS_AT_ONCE,At.TRANSACTIONS_PER_SECOND+At.FREE_TRANSACTIONS_PER_SECOND,1e3,At.REQUEST_TRANSACTIONS_WAITING_MAX),this._objectsInFlight=new R,this._objectsThatFlew=new R,this._objectsProcessing=new R,this._remoteSubscription=je.NONE,this._localSubscription=je.NONE,this._lastSubscriptionChange=null,this._targetSubscription=n||je.ANY,this._timers=new v,this._waitingInvVectors=new U(At.TRANSACTIONS_AT_ONCE,At.TRANSACTIONS_PER_SECOND,1e3,At.REQUEST_TRANSACTIONS_WAITING_MAX),this._timers.setInterval("invVectors",()=>this._sendWaitingInvVectors(),At.TRANSACTION_RELAY_INTERVAL),this._waitingFreeInvVectors=new U(At.FREE_TRANSACTIONS_AT_ONCE,At.FREE_TRANSACTIONS_PER_SECOND,1e3,At.REQUEST_TRANSACTIONS_WAITING_MAX),this._timers.setInterval("freeInvVectors",()=>this._sendFreeWaitingInvVectors(),At.FREE_TRANSACTION_RELAY_INTERVAL),this._blockProofRequest=null,this._transactionsProofRequest=null,this._transactionReceiptsRequest=null,this._pendingRequests=new T,this._synchronizer=new q,this._invRequestManager=r,this._listenersToDisconnect=new Set,this._onToDisconnect(t.channel,"inv",e=>this._onInv(e)),this._onToDisconnect(t.channel,"block",e=>this._onBlock(e)),this._onToDisconnect(t.channel,"header",e=>this._onHeader(e)),this._onToDisconnect(t.channel,"tx",e=>this._onTx(e)),this._onToDisconnect(t.channel,"not-found",e=>this._onNotFound(e)),this._onToDisconnect(t.channel,"subscribe",e=>this._onSubscribe(e)),this._onToDisconnect(t.channel,"get-data",e=>this._onGetData(e)),this._onToDisconnect(t.channel,"get-header",e=>this._onGetHeader(e)),this._onToDisconnect(t.channel,"block-proof",e=>this._onBlockProof(e)),this._onToDisconnect(t.channel,"transactions-proof",e=>this._onTransactionsProof(e)),this._onToDisconnect(t.channel,"transaction-receipts",e=>this._onTransactionReceipts(e)),this._onToDisconnect(t.channel,"mempool",e=>this._onMempool(e)),this._onToDisconnect(t.channel,"get-head",e=>this._onGetHead(e)),this._onToDisconnect(t.channel,"head",e=>this._onHead(e)),this._onToDisconnect(t.channel,"close",()=>this._onClose()),this._requestHead()}_onToDisconnect(e,t,r){const n=e.on(t,r);this._listenersToDisconnect.add({obj:e,type:t,id:n})}_disconnectListeners(){for(const e of this._listenersToDisconnect)e.obj.off(e.type,e.id);this._offAll()}providesServices(...e){return w.providesServices(this._peer.peerAddress.services,...e)}_requestHead(){this._peer.channel.getHead()}onHeadUpdated(){this._timers.resetTimeout("get-next-head",()=>this._requestHead(),At.HEAD_REQUEST_INTERVAL)}_onGetHead(e){this._peer.channel.head(this._blockchain.head.header)}_onHead(e){this._peer.head=e.header,this.onHeadUpdated()}subscribe(e){this._targetSubscription=e,this._subscribe(e)}_subscribeTarget(){this._subscribe(this._targetSubscription)}_subscribe(e){this._localSubscription=e,this._lastSubscriptionChange=Date.now(),this._peer.channel.subscribe(this._localSubscription)}relayBlock(e){if(!this._synced)return!1;if(!this._remoteSubscription.matchesBlock(e))return!1;const t=Vt.fromBlock(e);return!this._knownObjects.contains(t)&&(this._peer.channel.inv([t,...this._waitingInvVectors.dequeueMulti(Gt.VECTORS_MAX_COUNT-1)]),this._timers.setTimeout(`knows-block-${t.hash.toBase64()}`,()=>{this._knownObjects.add(t)},At.KNOWS_OBJECT_AFTER_INV_DELAY),!0)}requestBlock(e){return new Promise((t,r)=>{const n=new Vt(Vt.Type.BLOCK,e);this._pendingRequests.contains(n)?this._pendingRequests.get(n).push({resolve:t,reject:r}):(this._pendingRequests.put(n,[{resolve:t,reject:r}]),this._peer.channel.getData([n]),this._timers.setTimeout(`block-request-${n.hash.toBase64()}`,()=>{const e=this._pendingRequests.get(n);if(e){this._pendingRequests.remove(n);for(const{reject:t}of e)t(new Error("Timeout"))}},At.REQUEST_TIMEOUT))})}requestTransaction(e){return new Promise((t,r)=>{const n=new Vt(Vt.Type.TRANSACTION,e);this._pendingRequests.contains(n)?this._pendingRequests.get(n).push({resolve:t,reject:r}):(this._pendingRequests.put(n,[{resolve:t,reject:r}]),this._objectsInFlight.contains(n)||(this._peer.channel.getData([n]),this._objectsInFlight.add(n)),this._timers.setTimeout(`tx-request-${n.hash.toBase64()}`,()=>{const e=this._pendingRequests.get(n);if(e){this._pendingRequests.remove(n);for(const{reject:t}of e)t(new Error("Timeout"))}},At.REQUEST_TIMEOUT))})}_sendWaitingInvVectors(){const e=this._waitingInvVectors.dequeueMulti(Gt.VECTORS_MAX_COUNT);e.length>0&&(this._peer.channel.inv(e),h.v(At,()=>`[INV] Sent ${e.length} vectors to ${this._peer.peerAddress}`))}_sendFreeWaitingInvVectors(){const e=[];let t=0;for(;e.length<Gt.VECTORS_MAX_COUNT&&this._waitingFreeInvVectors.isAvailable()&&t<At.FREE_TRANSACTION_SIZE_PER_INTERVAL;){const r=this._waitingFreeInvVectors.dequeue();e.push(r.inv),t+=r.serializedSize}e.length>0&&(this._peer.channel.inv(e),h.v(At,()=>`[INV] Sent ${e.length} vectors to ${this._peer.peerAddress}`))}relayTransaction(e){if(!this._remoteSubscription.matchesTransaction(e))return h.v(At,`Not sending ${e.hash()} to ${this.peer.peerAddress}: not subscribed`),!1;const t=Vt.fromTransaction(e);if(this._knownObjects.contains(t))return h.v(At,`Not sending ${e.hash()} to ${this.peer.peerAddress}: already knows`),!1;const r=e.serializedSize;return e.fee/r<At.TRANSACTION_RELAY_FEE_MIN?this._waitingFreeInvVectors.enqueue(new gt(t,r)):this._waitingInvVectors.enqueue(t),this._timers.setTimeout(`knows-tx-${t.hash.toBase64()}`,()=>{this._knownObjects.add(t)},At.KNOWS_OBJECT_AFTER_INV_DELAY),h.v(At,`Sending ${e.hash()} to ${this.peer.peerAddress}`),!0}removeTransaction(e){const t=Vt.fromTransaction(e);this._waitingFreeInvVectors.remove(t),this._waitingInvVectors.remove(t)}knowsBlock(e){const t=new Vt(Vt.Type.BLOCK,e);return this._knownObjects.contains(t)}knowsTransaction(e){const t=new Vt(Vt.Type.TRANSACTION,e);return this._knownObjects.contains(t)}_onSubscribe(e){this._remoteSubscription=e.subscription}async _onMempool(e){const t=this._getSubscribedMempoolTransactions();let r=[];for(const e of t)r.push(Vt.fromTransaction(e)),r.length>=Gt.VECTORS_MAX_COUNT&&(this._peer.channel.inv(r),r=[],await new Promise(e=>setTimeout(e,wt.MEMPOOL_THROTTLE)));r.length>0&&this._peer.channel.inv(r)}_getSubscribedMempoolTransactions(){return[]}_onInv(e){return this._synchronizer.push("onInv",this.__onInv.bind(this,e))}async __onInv(e){for(const t of e.vectors)this._knownObjects.add(t),this._waitingInvVectors.remove(t),this._waitingFreeInvVectors.remove(t);const t=[],r=[];for(const n of e.vectors)if(!this._objectsInFlight.contains(n)&&!this._objectsProcessing.contains(n)&&this._shouldRequestData(n))switch(n.type){case Vt.Type.BLOCK:{const e=await this._getBlock(n.hash,!0);e?this._onKnownBlockAnnounced(n.hash,e):(t.push(n),this._onNewBlockAnnounced(n.hash));break}case Vt.Type.TRANSACTION:{const e=this._getTransaction(n.hash);e?this._onKnownTransactionAnnounced(n.hash,e):(r.push(n),this._onNewTransactionAnnounced(n.hash));break}}if(h.v(At,()=>`[INV] ${e.vectors.length} vectors (${t.length} new blocks, ${r.length} new txs) received from ${this._peer.peerAddress}`),t.length>0||r.length>0){for(const e of t)this._invRequestManager.askToRequestVector(this,e);for(const e of r)this._invRequestManager.askToRequestVector(this,e)}else this._onNoUnknownObjects()}requestVector(...e){this._blocksToRequest.enqueueAll(e.filter(e=>e.type===Vt.Type.BLOCK)),this._txsToRequest.enqueueAll(e.filter(e=>e.type===Vt.Type.TRANSACTION)),this._timers.clearTimeout("inv"),this._blocksToRequest.length+this._txsToRequest.available>=At.REQUEST_THRESHOLD?this._requestData():this._timers.setTimeout("inv",()=>this._requestData(),At.REQUEST_THROTTLE)}_shouldRequestData(e){return!0}_getBlock(e,t=!1,r=!1){throw new Error("not implemented")}_getRawBlock(e,t=!1){throw new Error("not implemented")}_getTransaction(e){throw new Error("not implemented")}_onNewBlockAnnounced(e){}_onKnownBlockAnnounced(e,t){}_onNewTransactionAnnounced(e){}_onKnownTransactionAnnounced(e,t){}_requestData(){if(!this._objectsInFlight.isEmpty())return;if(this._blocksToRequest.isEmpty()&&!this._txsToRequest.isAvailable())return;const e=Gt.VECTORS_MAX_COUNT;let t=this._blocksToRequest.dequeueMulti(e);t.length<e&&(t=t.concat(this._txsToRequest.dequeueMulti(e-t.length))),this._objectsInFlight.addAll(t),this._doRequestData(t),this._timers.setTimeout("getData",()=>this._noMoreData(),At.REQUEST_TIMEOUT)}_doRequestData(e){if(this._willRequestHeaders()){const t=[],r=[];for(const n of e)n.type===Vt.Type.BLOCK?t.push(n):r.push(n);this._peer.channel.getHeader(t),this._peer.channel.getData(r)}else this._peer.channel.getData(e)}_willRequestHeaders(){return!1}async _onBlock(e){const t=e.block.hash(),r=new Vt(Vt.Type.BLOCK,t),n=this._pendingRequests.get(r);if(!n&&!this._objectsInFlight.contains(r)&&!this._objectsThatFlew.contains(r))return void h.w(At,`Unsolicited block ${t} received from ${this._peer.peerAddress}, discarding`);const i=e.block.isFull()?e.block.body.transactions:[],s=i.map(e=>this._getTransaction(e.hash()));for(let e=0;e<i.length;e++){const t=s[e];t&&(i[e]=t)}if(n){this._pendingRequests.remove(r),this._timers.clearTimeout(`block-request-${r.hash.toBase64()}`);for(const{resolve:t}of n)try{t(e.block)}catch(e){}}else(!this._peer.head&&this._peer.headHash.equals(t)||this._peer.head&&this._peer.head.height<e.block.height)&&(this._peer.head=e.block.header,this.onHeadUpdated()),this._onObjectReceived(r),this._objectsProcessing.add(r),await this._processBlock(t,e.block),this._onObjectProcessed(r),this._invRequestManager.noteVectorReceived(Vt.fromBlock(e.block))}async _processBlock(e,t){}async _onHeader(e){const t=e.header.hash(),r=new Vt(Vt.Type.BLOCK,t);this._objectsInFlight.contains(r)||this._objectsThatFlew.contains(r)?((!this._peer.head&&this._peer.headHash.equals(t)||this._peer.head&&this._peer.head.height<e.header.height)&&(this._peer.head=e.header,this.onHeadUpdated()),this._onObjectReceived(r),this._objectsProcessing.add(r),await this._processHeader(t,e.header),this._onObjectProcessed(r)):h.w(At,`Unsolicited header ${t} received from ${this._peer.peerAddress}, discarding`)}async _processHeader(e,t){}async _onTx(e){const t=e.transaction.hash(),r=new Vt(Vt.Type.TRANSACTION,t);if(!this._objectsInFlight.contains(r)&&!this._objectsThatFlew.contains(r))return void h.w(At,`Unsolicited transaction ${t} received from ${this._peer.peerAddress}, discarding`);this._invRequestManager.noteVectorReceived(Vt.fromTransaction(e.transaction)),this._onObjectReceived(r),this._objectsProcessing.add(r),this._localSubscription.matchesTransaction(e.transaction)&&await this._processTransaction(t,e.transaction);const n=this._pendingRequests.get(r);if(n){this._pendingRequests.remove(r),this._timers.clearTimeout(`tx-request-${r.hash.toBase64()}`);for(const{resolve:t}of n)try{t(e.transaction)}catch(e){}}else!this._localSubscription.matchesTransaction(e.transaction)&&this._lastSubscriptionChange+At.SUBSCRIPTION_CHANGE_GRACE_PERIOD>Date.now()&&this._peer.channel.close(Qr.TRANSACTION_NOT_MATCHING_SUBSCRIPTION,"received transaction not matching our subscription");this._onObjectProcessed(r)}async _processTransaction(e,t){}_onNotFound(e){h.d(At,`[NOTFOUND] ${e.vectors.length} unknown objects received from ${this._peer.peerAddress}`);for(const t of e.vectors){const e=this._pendingRequests.get(t);if(e){this._pendingRequests.remove(t),this._timers.clearTimeout((t.type===Vt.Type.BLOCK?"block":"tx")+"-request-"+t.hash.toBase64());for(const{reject:t}of e)try{t(new Error("Not found"))}catch(e){}}this._objectsInFlight.contains(t)&&(this._invRequestManager.noteVectorNotReceived(this,t),this._onObjectReceived(t))}}_onObjectReceived(e){this._objectsInFlight.isEmpty()||(this._objectsInFlight.remove(e),this._objectsInFlight.isEmpty()?this._noMoreData():this._timers.resetTimeout("getData",()=>this._noMoreData(),At.REQUEST_TIMEOUT))}_noMoreData(){this._timers.clearTimeout("getData");for(const e of this._objectsInFlight.values())this._invRequestManager.noteVectorNotReceived(this,e);this._objectsThatFlew.addAll(this._objectsInFlight.values()),this._objectsInFlight.clear(),!this._blocksToRequest.isEmpty()||this._txsToRequest.isAvailable()?this._requestData():this._onAllObjectsReceived()}_onNoUnknownObjects(){}_onAllObjectsReceived(){}_onObjectProcessed(e){this._objectsProcessing.remove(e),this._objectsProcessing.isEmpty()&&this._onAllObjectsProcessed()}_onAllObjectsProcessed(){}async _onGetData(e){for(const t of e.vectors)this._knownObjects.add(t);const t=[];for(const r of e.vectors)switch(r.type){case Vt.Type.BLOCK:{const e=await this._getRawBlock(r.hash,!1);e?this._peer.channel.rawBlock(e):t.push(r);break}case Vt.Type.TRANSACTION:{const e=this._getTransaction(r.hash);e?(this._peer.channel.tx(e),this.fire("transaction-relayed",e)):t.push(r);break}}t.length&&this._peer.channel.notFound(t)}async _onGetHeader(e){for(const t of e.vectors)this._knownObjects.add(t);const t=[];for(const r of e.vectors)switch(r.type){case Vt.Type.BLOCK:{const e=await this._getBlock(r.hash);e?this._peer.channel.header(e.header):t.push(r);break}case Vt.Type.TRANSACTION:}t.length&&this._peer.channel.notFound(t)}getBlockProof(e,t){return this._synchronizer.push("getBlockProof",this._getBlockProof.bind(this,e,t))}_getBlockProof(e,t){return F.that(null===this._blockProofRequest),h.v(At,()=>`Requesting BlockProof for ${e} from ${this._peer.peerAddress}`),new Promise((r,n)=>{this._blockProofRequest={blockHashToProve:e,knownBlock:t,resolve:r,reject:n},this._peer.channel.getBlockProof(e,t.hash()),this._peer.channel.expectMessage(Ut.Type.BLOCK_PROOF,()=>{this._blockProofRequest=null,n(new Error("Timeout"))},At.BLOCK_PROOF_REQUEST_TIMEOUT)})}getBlockProofAt(e,t){if(this._peer.version<2)throw new Error("Request not supported by peer version");return this._synchronizer.push("getBlockProof",this._getBlockProofAt.bind(this,e,t))}_getBlockProofAt(e,t){return F.that(null===this._blockProofRequest),h.v(At,()=>`Requesting BlockProof at ${e} from ${this._peer.peerAddress}`),new Promise((r,n)=>{this._blockProofRequest={blockHeightToProve:e,knownBlock:t,resolve:r,reject:n},this._peer.channel.getBlockProofAt(e,t.hash()),this._peer.channel.expectMessage(Ut.Type.BLOCK_PROOF,()=>{this._blockProofRequest=null,n(new Error("Timeout"))},At.BLOCK_PROOF_REQUEST_TIMEOUT)})}async _onBlockProof(e){if(h.v(At,()=>`[BLOCK-PROOF] Received from ${this._peer.peerAddress}: proof=${e.proof} (${e.serializedSize} bytes)`),!this._blockProofRequest)return void h.w(At,`Unsolicited header proof received from ${this._peer.peerAddress}`);const{blockHashToProve:t,blockHeightToProve:r,knownBlock:n,resolve:i,reject:s}=this._blockProofRequest;if(this._blockProofRequest=null,!e.hasProof()||0===e.proof.length)return void s(new Error("Block proof request was rejected"));const o=e.proof;o.tail.hash().equals(t)||o.tail.height===r?await n.isInterlinkSuccessorOf(o.head)?await o.verify()&&(await Promise.all(o.blocks.map(e=>e.verify(this._time)))).every(e=>e)?i(o.tail):(h.w(At,`Invalid BlockProof received from ${this._peer.peerAddress}`),this._peer.channel.close(Qr.INVALID_BLOCK_PROOF,"Invalid BlockProof"),s(new Error("Invalid BlockProof"))):(h.w(At,`Received BlockProof with invalid head block from ${this._peer.peerAddress}`),s(new Error("Invalid head block"))):(h.w(At,`Received BlockProof with invalid tail block from ${this._peer.peerAddress}`),s(new Error("Invalid tail block")))}getTransactionsProof(e,t){return this.getTransactionsProofByAddresses(e,t)}getTransactionsProofByAddresses(e,t){return this._synchronizer.push("getTransactionsProof",this._getTransactionsProofByAddresses.bind(this,e,t))}getTransactionsProofByHashes(e,t){if(this._peer.version<2)throw new Error("Request not supported by peer version");return this._synchronizer.push("getTransactionsProof",this._getTransactionsProofByHashes.bind(this,e,t))}_getTransactionsProofByAddresses(e,t){return F.that(null===this._transactionsProofRequest),h.v(At,()=>`Requesting TransactionsProof for ${t}@${e.height} from ${this._peer.peerAddress}`),new Promise((r,n)=>{this._transactionsProofRequest={addresses:t,block:e,resolve:r,reject:n},this._peer.channel.getTransactionsProofByAddresses(e.hash(),t),this._peer.channel.expectMessage(Ut.Type.TRANSACTIONS_PROOF,()=>{this._transactionsProofRequest=null,this._peer.channel.close(Qr.GET_TRANSACTIONS_PROOF_TIMEOUT,"getTransactionsProof timeout"),n(new Error("Timeout"))},At.TRANSACTIONS_PROOF_REQUEST_TIMEOUT)})}_getTransactionsProofByHashes(e,t){return F.that(null===this._transactionsProofRequest),h.v(At,()=>`Requesting TransactionsProof for ${t}@${e.height} from ${this._peer.peerAddress}`),new Promise((r,n)=>{this._transactionsProofRequest={hashes:t,block:e,resolve:r,reject:n},this._peer.channel.getTransactionsProofByHashes(e.hash(),t),this._peer.channel.expectMessage(Ut.Type.TRANSACTIONS_PROOF,()=>{this._transactionsProofRequest=null,this._peer.channel.close(Qr.GET_TRANSACTIONS_PROOF_TIMEOUT,"getTransactionsProof timeout"),n(new Error("Timeout"))},At.TRANSACTIONS_PROOF_REQUEST_TIMEOUT)})}_onTransactionsProof(e){if(h.v(At,()=>`[TRANSACTIONS-PROOF] Received from ${this._peer.peerAddress}:`+` blockHash=${e.blockHash}, proof=${e.proof} (${e.serializedSize} bytes)`),!this._transactionsProofRequest)return void h.w(At,`Unsolicited transactions proof received from ${this._peer.peerAddress}`);const{addresses:t=[],hashes:r=[],block:n,resolve:i,reject:s}=this._transactionsProofRequest;if(this._transactionsProofRequest=null,!e.hasProof())return h.w(At,`TransactionsProof request was rejected by ${this._peer.peerAddress}`),void s(new Error("TransactionsProof request was rejected"));if(!n.hash().equals(e.blockHash))return h.w(At,`Received TransactionsProof for invalid reference block from ${this._peer.peerAddress}`),void s(new Error("Invalid reference block"));const o=e.proof;let a=null;try{a=o.root()}catch(e){}if(n.bodyHash.equals(a)){for(const e of o.transactions)if(!t.some(t=>e.sender.equals(t)||e.recipient.equals(t))&&!r.some(t=>e.hash().equals(t)))return h.w(At,`TransactionsProof with unwanted transactions received from ${this._peer.peer}`),this._peer.channel.close(Qr.INVALID_TRANSACTION_PROOF,"TransactionsProof contains unwanted transactions"),void s(new Error("TransactionsProof contains unwanted transactions"));i(o.transactions)}else h.w(At,`Invalid TransactionsProof received from ${this._peer.peerAddress}`),this._peer.channel.close(Qr.INVALID_TRANSACTION_PROOF,"Invalid TransactionsProof"),s(new Error("Invalid TransactionsProof"))}getTransactionReceipts(e){return this.getTransactionReceiptsByAddress(e)}getTransactionReceiptsByAddress(e,t){return this._synchronizer.push("getTransactionReceipts",this._getTransactionReceiptsByAddress.bind(this,e,t))}getTransactionReceiptsByHashes(e){if(this._peer.version<2)throw new Error("Request not supported by peer version");return this._synchronizer.push("getTransactionReceipts",this._getTransactionReceiptsByHashes.bind(this,e))}_getTransactionReceiptsByAddress(e,t){return F.that(null===this._transactionReceiptsRequest),new Promise((r,n)=>{this._transactionReceiptsRequest={address:e,limit:t,resolve:r,reject:n},this._peer.channel.getTransactionReceiptsByAddress(e),this._peer.channel.expectMessage(Ut.Type.TRANSACTION_RECEIPTS,()=>{this._transactionReceiptsRequest=null,this._peer.channel.close(Qr.GET_TRANSACTION_RECEIPTS_TIMEOUT,"getTransactionReceipts timeout"),n(new Error("Timeout"))},At.TRANSACTION_RECEIPTS_REQUEST_TIMEOUT)})}_getTransactionReceiptsByHashes(e){return F.that(null===this._transactionReceiptsRequest),new Promise((t,r)=>{this._transactionReceiptsRequest={hashes:e,resolve:t,reject:r},this._peer.channel.getTransactionReceiptsByHashes(e),this._peer.channel.expectMessage(Ut.Type.TRANSACTION_RECEIPTS,()=>{this._transactionReceiptsRequest=null,this._peer.channel.close(Qr.GET_TRANSACTION_RECEIPTS_TIMEOUT,"getTransactionReceipts timeout"),r(new Error("Timeout"))},At.TRANSACTION_RECEIPTS_REQUEST_TIMEOUT)})}_onTransactionReceipts(e){if(h.v(At,()=>`[TRANSACTION-RECEIPTS] Received from ${this._peer.peerAddress}:`+` ${e.hasReceipts()?e.receipts.length:"<rejected>"}`),!this._transactionReceiptsRequest)return void h.w(At,`Unsolicited transaction receipts received from ${this._peer.peerAddress}`);const{address:t,hashes:r,limit:n,resolve:i,reject:s}=this._transactionReceiptsRequest;if(this._transactionReceiptsRequest=null,!e.hasReceipts())return h.w(At,`TransactionReceipts request was rejected by ${this._peer.peerAddress}`),void s(new Error("TransactionReceipts request was rejected"));let o=e.receipts;if(void 0!==n&&n<o.length&&(o=o.slice(0,n)),void 0!==r)for(const e of o)if(!r.some(t=>t.equals(e.transactionHash)))return h.w(At,`TransactionsReceipts with unwanted transactions received from ${this._peer.peer}`),this._peer.channel.close(Qr.INVALID_TRANSACTION_RECEIPTS,"TransactionsReceipts contains unwanted transactions"),void s(new Error("TransactionsReceipts contains unwanted transactions"));i(o)}_onClose(){this._shutdown(),this.fire("close",this),this._disconnectListeners()}shutdown(){this._disconnectListeners(),this._shutdown()}_shutdown(){this._synchronizer.clear(),this._timers.clearAll(),this._txsToRequest.stop(),this._waitingInvVectors.stop(),this._waitingFreeInvVectors.stop()}get peer(){return this._peer}get synced(){return this._synced}get syncing(){return!1}}At.REQUEST_THRESHOLD=50,At.REQUEST_THROTTLE=500,At.REQUEST_TIMEOUT=1e4,At.REQUEST_TRANSACTIONS_WAITING_MAX=5e3,At.REQUEST_BLOCKS_WAITING_MAX=5e3,At.BLOCK_PROOF_REQUEST_TIMEOUT=1e4,At.TRANSACTIONS_PROOF_REQUEST_TIMEOUT=1e4,At.TRANSACTION_RECEIPTS_REQUEST_TIMEOUT=15e3,At.TRANSACTION_RELAY_INTERVAL=5e3,At.TRANSACTIONS_AT_ONCE=100,At.TRANSACTIONS_PER_SECOND=10,At.FREE_TRANSACTION_RELAY_INTERVAL=6e3,At.FREE_TRANSACTIONS_AT_ONCE=10,At.FREE_TRANSACTIONS_PER_SECOND=1,At.FREE_TRANSACTION_SIZE_PER_INTERVAL=15e3,At.TRANSACTION_RELAY_FEE_MIN=1,At.SUBSCRIPTION_CHANGE_GRACE_PERIOD=3e3,At.HEAD_REQUEST_INTERVAL=1e5,At.KNOWS_OBJECT_AFTER_INV_DELAY=3e3,At.KNOWN_OBJECTS_COUNT_MAX=4e4,c.register(At);class gt{constructor(e,t){this._inv=e,this._serializedSize=t}hashCode(){return this._inv.hashCode()}toString(){return this._inv.toString()}get inv(){return this._inv}get serializedSize(){return this._serializedSize}}class yt extends l{constructor(e,t,r){super(),this._blockchain=e,this._network=r,this._agents=new T,this._timers=new v,this._established=!1,this._syncPeer=null,this._subscription=je.ANY,this._invRequestManager=new pt,this._listenersToDisconnect=new Set,this._onToDisconnect(r,"peer-joined",e=>this._onPeerJoined(e)),this._onToDisconnect(r,"peer-left",e=>this._onPeerLeft(e)),this._onToDisconnect(e,"head-changed",e=>this._onHeadChanged(e)),this._onToDisconnect(e,"rebranched",(e,t,r)=>this._onRebranched(r,e,t)),this._onToDisconnect(e,"extended",e=>this._onExtended(e)),this._onToDisconnect(e,"block",e=>this.fire("block",e)),this._onToDisconnect(t,"transaction-added",e=>this._onTransactionAdded(e)),this._onToDisconnect(t,"transaction-removed",e=>this._onTransactionRemoved(e))}async getHeadHash(){return this._blockchain.headHash}async getHeadHeight(){return this._blockchain.height}async getBlock(e,t=!0,r=t,n){let i=await this._blockchain.getBlock(e,!0,t||r);return t=t||r&&!this._hasPeersWithVersion(2),(!i||t&&!i.isFull())&&(i=await this._requestBlock(e,t,i?i.height:n,!!i)||i),i}async getBlockAt(e,t=!0){if(e>this._blockchain.height||e<1)throw new Error("Invalid height");let r=await this._blockchain.getBlockAt(e,t);return r?r&&t&&!r.isFull()&&(r=await this._requestBlock(r.hash(),t,e,!0)||r):r=await this._requestBlockAt(e,t),r}async getBlockTemplate(e,t){throw new Error("not implemented: getBlockTemplate")}async submitBlock(e){throw new Error("not implemented: submitBlock")}async getAccounts(e){throw new Error("not implemented: getAccounts")}getPendingTransactions(e){return this._requestPendingTransactions(e)}async getPendingTransactionsByAddress(e,t){throw new Error("not implemented: getPendingTransactionsByAddress")}async getTransactionsFromBlock(e,t,r,n){return n||(n=await this.getBlock(t,!1,!0,r)),n&&n.isFull()?n.transactions.filter(t=>e.find(e=>e.equals(t.hash()))):this._requestTransactionsByHashes(e,n)}async getTransactionsFromBlockByAddresses(e,t,r){let n=await this._blockchain.getBlock(t,!1,!0);return n||(n=this._requestBlock(t,!1,r)),n&&n.isFull()?n.transactions.filter(t=>!!e.find(e=>e.equals(t.sender)||e.equals(t.recipient))):this._requestTransactionsByAddresses(e,n)}getTransactionReceiptsByAddress(e,t){return this._requestTransactionReceiptsByAddress(e,t)}getTransactionReceiptsByHashes(e){return this._requestTransactionReceiptsByHashes(e)}async sendTransaction(e){throw new Error("not implemented: sendTransaction")}getMempoolContents(){return[]}_onToDisconnect(e,t,r){const n=e.on(t,r);this._listenersToDisconnect.add({obj:e,type:t,id:n})}_disconnectListeners(){for(const e of this._listenersToDisconnect)e.obj.off(e.type,e.id);this._offAll()}handoverTo(e){this._disconnectListeners();for(const t of this._agents.valueIterator()){const r=t.peer;t.shutdown(),this._onPeerLeft(r),e._onPeerJoined(r)}return e}_hasPeersWithVersion(e){for(const t of this._agents.valueIterator())if(t.peer.version>=e)return!0;return!1}async _requestBlock(e,t=!1,r,n){let i=null;if(t||!r){const t=[],s=!r||r<this._blockchain.height-ae.NUM_BLOCKS_VERIFICATION;for(const e of this._agents.valueIterator())e.synced&&e.providesServices(w.FULL_BLOCKS)&&(!s||e.providesServices(w.BLOCK_HISTORY))&&t.push(e);t.sort((t,r)=>t.knowsBlock(e)!==r.knowsBlock(e)?.5-t.knowsBlock(e):Math.random()-.5);for(const r of t)try{if(i=await r.requestBlock(e))break}catch(t){h.w(yt,`Failed to retrieve block for ${e} from ${r.peer.peerAddress}: ${t&&t.message||t}`)}if(!i)throw new Error(`Failed to retrieve block for ${e}`);return n||await this._requestBlockProof(e,i.height),i}return this._requestBlockProof(e,r)}async _requestBlockAt(e,t){const r=await this._requestBlockProofAt(e);if(t&&!r.isFull()){const t=r.hash(),n=[],i=e<this._blockchain.height-ae.NUM_BLOCKS_VERIFICATION;for(const e of this._agents.valueIterator())e.synced&&e.providesServices(w.FULL_BLOCKS)&&(!i||e.providesServices(w.BLOCK_HISTORY))&&n.push(e);n.sort((e,r)=>e.knowsBlock(t)!==r.knowsBlock(t)?.5-e.knowsBlock(t):Math.random()-.5);for(const r of n)try{return await r.requestBlock(t)}catch(n){h.w(yt,`Failed to retrieve block for ${t}@${e} from ${r.peer.peerAddress}: ${n&&n.message||n}`)}throw new Error(`Failed to retrieve block for ${t}@${e}`)}return r}_requestPendingTransactions(e){return Promise.all(e.map(e=>this._requestPendingTransaction(e)))}async _requestPendingTransaction(e){const t=[];for(const e of this._agents.valueIterator())e.synced&&e.providesServices(w.MEMPOOL)&&t.push(e);t.sort((t,r)=>t.knowsTransaction(e)!==r.knowsTransaction(e)?.5-t.knowsTransaction(e):Math.random()-.5);for(const r of t)try{const t=await r.requestTransaction(e);if(t)return t}catch(t){h.w(yt,`Failed to retrieve pending transaction for ${e} from ${r.peer.peerAddress}: ${t&&t.message||t}`)}throw new Error(`Failed to retrieve pending transaction for ${e}`)}async _requestTransactionReceiptsByHashes(e){const t=[];for(const e of this._agents.valueIterator())e.synced&&e.providesServices(w.TRANSACTION_INDEX)&&e.peer.version>=2&&t.push(e);for(const r of t)try{return await r.getTransactionReceiptsByHashes(e)}catch(t){h.w(yt,`Failed to retrieve transaction receipts for ${e} from ${r.peer.peerAddress}: ${t&&t.message||t}`)}throw new Error(`Failed to retrieve transaction receipts for ${e}`)}async _requestTransactionsByHashes(e,t){const r=[],n=t.height<this._blockchain.height-ae.NUM_BLOCKS_VERIFICATION;for(const e of this._agents.valueIterator())e.synced&&e.providesServices(w.BODY_PROOF)&&(!n||e.providesServices(w.BLOCK_HISTORY))&&e.peer.version>=2&&r.push(e);const i=t.hash();r.sort((e,t)=>e.knowsBlock(i)!==t.knowsBlock(i)?.5-e.knowsBlock(i):Math.random()-.5);for(const n of r)try{return await n.getTransactionsProofByHashes(t,e)}catch(t){h.w(yt,`Failed to retrieve transactions for ${e} from ${n.peer.peerAddress}: ${t&&t.message||t}`)}throw new Error(`Failed to retrieve transactions for ${e}`)}subscribe(e){this._subscription=e;for(const t of this._agents.valueIterator())t.subscribe(e)}getSubscription(){return this._subscription}_newConsensusAgent(e){throw new Error("not implemented")}_onPeerJoined(e){const t=this._newConsensusAgent(e);return this._agents.put(e.id,t),t.on("close",()=>this._onPeerLeft(t.peer)),t.on("sync",()=>this._onPeerSynced(t.peer)),t.on("out-of-sync",()=>this._onPeerOutOfSync(t.peer)),this.bubble(t,"transaction-relayed"),this._timers.resetTimeout("sync",this._syncBlockchain.bind(this),yt.SYNC_THROTTLE),t}_onPeerLeft(e){e.equals(this._syncPeer)&&(h.d(yt,`Peer ${e.peerAddress} left during sync`),this._syncPeer=null,this.fire("sync-failed",e.peerAddress)),this._agents.remove(e.id),this._syncBlockchain()}_syncBlockchain(){const e=[];let t=0;for(const r of this._agents.valueIterator())r.synced?w.isFullNode(r.peer.peerAddress.services)&&t++:e.push(r);if(this._established&&(t<yt.MIN_FULL_NODES||0===this._agents.length)&&(this._established=!1,this.fire("lost")),this._syncPeer)return;const r=I.randomElement(e);r?(this._syncPeer=r.peer,this._established||this.fire("syncing"),h.v(yt,`Syncing blockchain with peer ${r.peer.peerAddress}`),r.syncBlockchain().catch(h.e.tag(At))):this._hasEnoughPeers(t,this._agents.length)?this._established||(h.i(yt,`Synced with all connected peers (${this._agents.length}), consensus established.`),h.d(yt,`Blockchain: height=${this._blockchain.height}, headHash=${this._blockchain.headHash}`),this._established=!0,this.fire("established"),this._network.allowInboundConnections=!0):this.fire("waiting")}_hasEnoughPeers(e,t){return e>=yt.MIN_FULL_NODES}_onPeerSynced(e){e.equals(this._syncPeer)&&(h.v(yt,`Finished sync with peer ${e.peerAddress}`),this._syncPeer=null),this._syncBlockchain()}_onPeerOutOfSync(e){h.w(yt,`Peer ${e.peerAddress} out of sync, resyncing`),this._syncBlockchain()}_onHeadChanged(e){if(this._established)for(const t of this._agents.valueIterator())t.relayBlock(e)}async _onRebranched(e,t,r){await this.fire("head-changed",e,"rebranched",t,r)}async _onExtended(e){await this.fire("head-changed",e.hash(),"extended",[],[e])}_onTransactionAdded(e){if(this.fire("transaction-added",e),this._established)for(const t of this._agents.valueIterator())t.relayTransaction(e)}_onTransactionRemoved(e){this.fire("transaction-removed",e);for(const t of this._agents.valueIterator())t.removeTransaction(e)}async _requestBlockProof(e,t){const r=await this._blockchain.getNearestBlockAt(t,!1);if(!r)throw new Error("No suitable reference block found for block proof");if(e.equals(r.hash()))return r;const n=[],i=t<this._blockchain.height-ae.NUM_BLOCKS_VERIFICATION||r.height<this._blockchain.height-ae.NUM_BLOCKS_VERIFICATION;for(const e of this._agents.valueIterator())e.synced&&e.providesServices(w.BLOCK_PROOF)&&(!i||e.providesServices(w.BLOCK_HISTORY))&&n.push(e);const s=r.hash();n.sort((e,t)=>e.knowsBlock(s)!==t.knowsBlock(s)?.5-e.knowsBlock(s):Math.random()-.5);for(const i of n)try{return await i.getBlockProof(e,r)}catch(r){h.w(yt,`Failed to retrieve block proof for ${e}@${t} from ${i.peer.peerAddress}: ${r&&r.message||r}`)}throw new Error(`Failed to retrieve block proof for ${e}`)}async _requestBlockProofAt(e){const t=await this._blockchain.getNearestBlockAt(e,!1);if(!t)throw new Error("No suitable reference block found for block proof");if(e===t.height)return t;const r=[],n=e<this._blockchain.height-ae.NUM_BLOCKS_VERIFICATION||t.height<this._blockchain.height-ae.NUM_BLOCKS_VERIFICATION;for(const e of this._agents.valueIterator())e.synced&&e.providesServices(w.BLOCK_PROOF)&&(!n||e.providesServices(w.BLOCK_HISTORY))&&e.peer.version>=2&&r.push(e);const i=t.hash();r.sort((e,t)=>e.knowsBlock(i)!==t.knowsBlock(i)?.5-e.knowsBlock(i):Math.random()-.5);for(const n of r)try{return await n.getBlockProofAt(e,t)}catch(t){h.w(yt,`Failed to retrieve block proof at ${e} from ${n.peer.peerAddress}: ${t&&t.message||t}`)}throw new Error(`Failed to retrieve block proof at ${e}`)}async _requestTransactionsByAddresses(e,t=this._blockchain.head){if(0===e.length)return[];const r=[],n=t.height<this._blockchain.height-ae.NUM_BLOCKS_VERIFICATION;for(const e of this._agents.valueIterator())e.synced&&e.providesServices(w.BODY_PROOF)&&(!n||e.providesServices(w.BLOCK_HISTORY))&&r.push(e);const i=t.hash();r.sort((e,t)=>e.knowsBlock(i)!==t.knowsBlock(i)?.5-e.knowsBlock(i):Math.random()-.5);for(const n of r)try{return await n.getTransactionsProofByAddresses(t,e)}catch(t){h.w(yt,`Failed to retrieve transactions proof for ${e} from ${n.peer.peerAddress}: ${t&&t.message||t}`)}throw new Error(`Failed to retrieve transactions proof for ${e}`)}async _requestTransactionReceiptsByAddress(e,t){const r=[];for(const e of this._agents.valueIterator())e.synced&&e.providesServices(w.TRANSACTION_INDEX)&&r.push(e);r.sort(()=>Math.random()-.5);for(const n of r)try{return await n.getTransactionReceiptsByAddress(e,t)}catch(t){h.w(yt,`Failed to retrieve transaction receipts for ${e} from ${n.peer.peerAddress}: ${t&&t.message||t}`)}throw new Error(`Failed to retrieve transaction receipts for ${e}`)}async _requestTransactionHistory(e){const t=await this._requestTransactionReceiptsByAddress(e),r=[];let n=null;for(const e of t)if(!e.blockHash.equals(n)){const t=await this._blockchain.getBlock(e.blockHash);if(t)r.push(Promise.resolve(t));else{const t=this._requestBlockProof(e.blockHash,e.blockHeight).catch(t=>h.e(yt,`Failed to retrieve proof for block ${e.blockHash}`+` (${t}) - transaction history may be incomplete`));r.push(t)}n=e.blockHash}const i=await Promise.all(r),s=[];for(const t of i){if(!t)continue;const r=this._requestTransactionsByAddresses([e],t).then(e=>e.map(e=>({transaction:e,header:t.header}))).catch(e=>h.e(yt,`Failed to retrieve transactions for block ${t.hash()}`+` (${e}) - transaction history may be incomplete`));s.push(r)}return(await Promise.all(s)).reduce((e,t)=>t?e.concat(t):e,[]).sort((e,t)=>e.header.height-t.header.height)}get established(){return this._established}get network(){return this._network}get invRequestManager(){return this._invRequestManager}}yt.MAX_ATTEMPTS_TO_FETCH=5,yt.SYNC_THROTTLE=1500,yt.MIN_FULL_NODES=1,yt.TRANSACTION_RELAY_TIMEOUT=1e4,yt.SendTransactionResult={REJECTED_LOCAL:-4,EXPIRED:-3,ALREADY_MINED:-2,INVALID:-1,NONE:0,RELAYED:1,KNOWN:2,PENDING_LOCAL:3},c.register(yt);class mt extends At{constructor(e,t,r,n,i,s){super(r,n,i,s),this._blockchain=e,this._mempool=t,this._subscribeTarget(),this._accountsRequest=null,this._onToDisconnect(n.channel,"accounts-proof",e=>this._onAccountsProof(e))}requestMempool(){const e=mt.MEMPOOL_DELAY_MIN+Math.random()*(mt.MEMPOOL_DELAY_MAX-mt.MEMPOOL_DELAY_MIN);setTimeout(()=>this._peer.channel.mempool(),e)}getAccounts(e,t){return this._synchronizer.push("getAccounts",this._getAccounts.bind(this,e,t))}async _getAccounts(e,t){F.that(null===this._accountsRequest);const r=await this._blockchain.getBlock(e);if(!r)throw new Error("Unknown block hash");return h.d(mt,`Requesting AccountsProof for ${t} from ${this._peer.peerAddress}`),new Promise((n,i)=>{this._accountsRequest={addresses:t,block:r,resolve:n,reject:i},this._peer.channel.getAccountsProof(e,t),this._peer.channel.expectMessage(Ut.Type.ACCOUNTS_PROOF,()=>{this._peer.channel.close(Qr.GET_ACCOUNTS_PROOF_TIMEOUT,"getAccountsProof timeout"),i(new Error("Timeout"))},mt.ACCOUNTSPROOF_REQUEST_TIMEOUT)})}async _onAccountsProof(e){if(h.d(mt,`[ACCOUNTS-PROOF] Received from ${this._peer.peerAddress}: blockHash=${e.blockHash}, proof=${e.proof} (${e.serializedSize} bytes)`),!this._accountsRequest)return void h.w(mt,`Unsolicited accounts proof received from ${this._peer.peerAddress}`);const{addresses:t,block:r,resolve:n,reject:i}=this._accountsRequest;if(this._accountsRequest=null,!e.hasProof())return void i(new Error("Accounts request was rejected"));if(!r.hash().equals(e.blockHash))return h.w(mt,`Received AccountsProof for invalid reference block from ${this._peer.peerAddress}`),void i(new Error("Invalid reference block"));const s=e.proof;if(!s.verify())return h.w(mt,`Invalid AccountsProof received from ${this._peer.peerAddress}`),this._peer.channel.close(Qr.INVALID_ACCOUNTS_PROOF,"Invalid AccountsProof"),void i(new Error("Invalid AccountsProof"));const o=s.root();if(!r.accountsHash.equals(o))return h.w(mt,`Invalid AccountsProof (root hash) received from ${this._peer.peerAddress}`),this._peer.channel.close(Qr.INVALID_ACCOUNTS_PROOF,"AccountsProof root hash mismatch"),void i(new Error("AccountsProof root hash mismatch"));const a=[];for(const e of t)try{const t=s.getAccount(e);a.push(t)}catch(e){return h.w(mt,`Incomplete AccountsProof received from ${this._peer.peerAddress}`),this._peer.channel.close(Qr.INVALID_ACCOUNTS_PROOF,"Incomplete AccountsProof"),void i(new Error("Incomplete AccountsProof"))}n(a)}_getSubscribedMempoolTransactions(){switch(this._remoteSubscription.type){case je.Type.ADDRESSES:return this._mempool.getTransactionsByAddresses(this._remoteSubscription.addresses,mt.MEMPOOL_ENTRIES_MAX);case je.Type.MIN_FEE:return this._mempool.getTransactions().filter(e=>e.feePerByte>=this._remoteSubscription.minFeePerByte);case je.Type.ANY:return this._mempool.getTransactions(mt.MEMPOOL_ENTRIES_MAX)}return[]}}mt.ACCOUNTSPROOF_REQUEST_TIMEOUT=5e3,mt.MEMPOOL_DELAY_MIN=500,mt.MEMPOOL_DELAY_MAX=5e3,mt.MEMPOOL_ENTRIES_MAX=1e3,c.register(mt);class _t extends yt{constructor(e,t,r){super(e,t,r),this._blockchain=e,this._mempool=t,this._subscription=je.BLOCKS_ONLY,this._onToDisconnect(this,"head-changed",(e,t,r,n)=>this._onNewAdoptedBlocks(n)),this._onToDisconnect(t,"transaction-mined",(e,t)=>this.fire("transaction-mined",e,t,this._blockchain.head))}subscribeAccounts(e){this.subscribe(je.fromAddresses(e))}subscribe(e){const t=this._subscription;if(super.subscribe(e),e.type===je.Type.ADDRESSES&&this._mempool.evictExceptAddresses(e.addresses),!e.isSubsetOf(t))for(const e of this._agents.valueIterator())e.requestMempool()}addSubscriptions(e){e=Array.isArray(e)?e:[e];const t=new R;t.addAll(this._subscription.addresses),t.addAll(e),this.subscribeAccounts(t.values())}removeSubscriptions(e){e=Array.isArray(e)?e:[e];const t=new R;t.addAll(this._subscription.addresses),t.removeAll(e),this.subscribeAccounts(t.values())}_onPeerJoined(e){const t=super._onPeerJoined(e);return this.bubble(t,"transaction-relayed"),t}_onTransactionAdded(e){this.fire("transaction-added",e)}async _onNewAdoptedBlocks(e){if(this._established)for(const t of e)try{const e=await this._requestTransactionsByAddresses(this._subscription.addresses,t);await this._mempool.changeHead(t,e)}catch(e){h.e(_t,`Failed to retrieve transaction proof to update mempool: ${e.message||e}`)}}async getAccount(e,t=null){return(await this.getAccounts([e],t))[0]}async getAccounts(e,t){t=t||this._blockchain.headHash;const r=[];for(const e of this._agents.valueIterator())e.synced&&w.providesServices(e.peer.peerAddress.services,w.ACCOUNTS_PROOF)&&r.push(e);r.sort((e,r)=>e.knowsBlock(t)!==r.knowsBlock(t)?.5-e.knowsBlock(t):Math.random()-.5);for(const n of r)try{return await n.getAccounts(t,e)}catch(t){h.w(_t,`Failed to retrieve accounts ${e} from ${n.peer.peerAddress}: ${t}`)}throw new Error(`Failed to retrieve accounts ${e}`)}async sendTransaction(e){try{return await this.relayTransaction(e),await new Promise(t=>{let r;r=this.on("transaction-relayed",n=>{n.equals(e)&&(this.off("transaction-relayed",r),t(!0))}),setTimeout(()=>{this.off("transaction-relayed",r),t(!1)},yt.TRANSACTION_RELAY_TIMEOUT)})?yt.SendTransactionResult.RELAYED:yt.SendTransactionResult.PENDING_LOCAL}catch(t){if(h.d(_t,()=>`Error sending transaction ${e}: ${t.message||t}`),t instanceof _t.MempoolRejectedError)switch(t.mempoolReturnCode){case dt.ReturnCode.KNOWN:return yt.SendTransactionResult.KNOWN;case dt.ReturnCode.INVALID:return yt.SendTransactionResult.INVALID;case dt.ReturnCode.EXPIRED:return yt.SendTransactionResult.EXPIRED}try{this._mempool.removeTransaction(e)}catch(e){}return yt.SendTransactionResult.REJECTED_LOCAL}}async getPendingTransactions(e){const t=new R;for(const r of e){const e=this._mempool.getTransaction(r);t.add(e)}return t.length!==e.length&&t.addAll(await this._requestPendingTransactions(e.filter(e=>!t.get(e)))),e.map(e=>t.get(e)).filter(e=>!!e)}async getPendingTransactionsByAddress(e,t){if(this._subscription.addresses&&this._subscription.addresses.some(t=>t.equals(e)))return this._mempool.getTransactionsByAddresses([e],t);throw new Error("Can not provide pending transactions without prior subscription")}async relayTransaction(e){const t=await this._mempool.pushTransaction(e);if(t!==dt.ReturnCode.ACCEPTED)throw new _t.MempoolRejectedError(t);let r=!1;for(const t of this._agents.valueIterator())r=t.relayTransaction(e)&&t.providesServices(w.MEMPOOL)||r;if(!r)throw new Error("Failed to relay transaction - no agent relayed transaction")}}_t.MempoolRejectedError=class extends Error{constructor(e){super("Failed to relay transaction - mempool rejected transaction"),this._mempoolReturnCode=e}get mempoolReturnCode(){return this._mempoolReturnCode}},c.register(_t);class bt extends tt{static getPersistent(e,t,r,n){const i=ct.getPersistent(e);return new bt(i,t,r,n)._init()}static createVolatile(e,t,r){const n=ct.createVolatile();return new bt(n,e,t,r)._init()}constructor(e,t,r,n){super(e),this._accounts=t,this._time=r,this._snapshots=new T,this._snapshotOrder=[],this._mainChain=null,this._proof=null,this._transactionCache=new Qe,this._transactionStore=n,this._synchronizer=new V(2,bt.SYNCHRONIZER_THROTTLE_AFTER,bt.SYNCHRONIZER_THROTTLE_WAIT),this._blockKnownCount=this._blockInvalidCount=this._blockOrphanCount=this._blockExtendedCount=this._blockRebranchedCount=this._blockForkedCount=0}async _init(){if(this._headHash=await this._store.getHead(),this._headHash){const e=await this._store.getChainData(Wr.GENESIS_HASH);if(!e||!e.onMainChain)throw new Error("Invalid genesis block stored. Reset your consensus database.");if(this._mainChain=await this._store.getChainData(this._headHash,!0),F.that(!!this._mainChain,"Failed to load main chain from storage"),!this._mainChain.head.accountsHash.equals(await this._accounts.hash()))throw new Error("Corrupted store: Inconsistent chain/accounts state");const t=await this._store.getBlocksBackward(this.headHash,this._transactionCache.missingBlocks-1,!0);this._transactionCache.prependBlocks([...t.reverse(),this._mainChain.head])}else{this._mainChain=await ot.initial(Wr.GENESIS_BLOCK),this._headHash=Wr.GENESIS_HASH;const e=this._store.synchronousTransaction();e.putChainDataSync(Wr.GENESIS_HASH,this._mainChain),e.setHeadSync(Wr.GENESIS_HASH),await e.commit(),await this._accounts.initialize(Wr.GENESIS_BLOCK,Wr.GENESIS_ACCOUNTS)}return this}pushBlock(e){return this._synchronizer.push(0,this._pushBlock.bind(this,e))}async _pushBlock(e){const t=e.hash();if(await this._store.getBlock(t))return this._blockKnownCount++,bt.OK_KNOWN;if(!e.isFull())return h.w(bt,"Rejecting block - body missing"),this._blockInvalidCount++,bt.ERR_INVALID;if(!await e.verify(this._time))return this._blockInvalidCount++,bt.ERR_INVALID;const r=await this._store.getChainData(e.prevHash);if(!r)return h.w(bt,"Rejecting block - unknown predecessor"),this._blockOrphanCount++,bt.ERR_ORPHAN;const n=r.head;if(!await e.isImmediateSuccessorOf(n))return h.w(bt,"Rejecting block - not a valid immediate successor"),this._blockInvalidCount++,bt.ERR_INVALID;const i=await this.getNextTarget(n);if(F.that(ze.isValidTarget(i),"Failed to compute next target in FullChain"),e.nBits!==ze.targetToCompact(i))return h.w(bt,"Rejecting block - difficulty mismatch"),this._blockInvalidCount++,bt.ERR_INVALID;const s=await r.nextChainData(e);return e.prevHash.equals(this.headHash)?await this._extend(t,s,r)?(this._blockExtendedCount++,bt.OK_EXTENDED):(this._blockInvalidCount++,bt.ERR_INVALID):s.totalDifficulty.gt(this.totalDifficulty)?await this._rebranch(t,s)?(this._blockRebranchedCount++,bt.OK_REBRANCHED):(this._blockInvalidCount++,bt.ERR_INVALID):(h.v(bt,`Creating/extending fork with block ${t}, height=${e.height}, totalDifficulty=${s.totalDifficulty}, totalWork=${s.totalWork}`),await this._store.putChainData(t,s),this._blockForkedCount++,await this.fire("block",t),bt.OK_FORKED)}async _verifyInterlink(e){for(let t=0;t<e.interlink.length;t++){const r=await this._store.getBlock(e.interlink.hashes[t]);if(!r||!await e.isInterlinkSuccessorOf(r))return!1}return!0}async _extend(e,t,r){const n=await this._accounts.transaction();try{await n.commitBlock(t.head,this._transactionCache)}catch(e){return h.w(bt,`Rejecting block - failed to commit to AccountsTree: ${e.message||e}`),n.abort().catch(h.w.tag(bt)),!1}t.onMainChain=!0,r.mainChainSuccessor=e;const i=await this._store.synchronousTransaction();if(i.putChainDataSync(e,t),i.putChainDataSync(t.head.prevHash,r,!1),i.setHeadSync(e),this._transactionStore){const e=this._transactionStore.transaction();await e.put(t.head),await s.JungleDB.commitCombined(...i.txs,n.tx,e.tx)}else await s.JungleDB.commitCombined(...i.txs,n.tx);return await this._saveSnapshot(e),this._transactionCache.pushBlock(t.head),this._shouldExtendChainProof()&&this._proof?this._proof=await this._extendChainProof(this._proof,t.head.header):this._proof=null,this._mainChain=t,this._headHash=e,await this.fire("head-changed",this.head,!1),await this.fire("block",e),await this.fire("extended",this.head),!0}_shouldExtendChainProof(){return!1}async _rebranch(e,t){h.v(bt,`Rebranching to fork ${e}, height=${t.head.height}, totalDifficulty=${t.totalDifficulty}, totalWork=${t.totalWork}`);for(const e of this._snapshotOrder)this._snapshots.get(e).abort();this._snapshots.clear(),this._snapshotOrder=[];const r=[],n=[];let i=t,o=e;for(;!i.onMainChain;)r.push(i),n.push(o),o=i.head.prevHash,i=await this._store.getChainData(o,!0),F.that(!!i,"Corrupted store: Failed to find fork predecessor while rebranching");h.v(bt,()=>`Found common ancestor ${o.toBase64()} ${r.length} blocks up`);const a=i,c=o,u=await this._accounts.transaction(!1),l=this._transactionCache.clone(),f=this._transactionStore?this._transactionStore.transaction():null,d=[];let p=this._headHash,A=this._mainChain;for(;!p.equals(c);){try{await u.revertBlock(A.head,l),l.revertBlock(A.head),this._transactionStore&&await f.remove(A.head),d.push(A)}catch(e){return h.e(bt,"Failed to revert main chain while rebranching",e),u.abort().catch(h.w.tag(bt)),this._transactionStore&&f.abort().catch(h.w.tag(bt)),!1}p=A.head.prevHash,A=await this._store.getChainData(p,!0),F.that(!!A,"Corrupted store: Failed to find main chain predecessor while rebranching"),F.that(A.head.accountsHash.equals(await u.hash()),"Failed to revert main chain - inconsistent state")}F.that(!l.head||p.equals(l.head.hash),"Invalid TransactionCache head");const g=l.missingBlocks,y=l.isEmpty()?a.mainChainSuccessor:l.tail.hash,m=await this._store.getBlocksBackward(y,g,!0);l.prependBlocks(m.reverse());for(let e=r.length-1;e>=0;e--)try{await u.commitBlock(r[e].head,l),l.pushBlock(r[e].head),this._transactionStore&&await f.put(r[e].head)}catch(t){h.e(bt,"Failed to apply fork block while rebranching",t),u.abort().catch(h.w.tag(bt)),this._transactionStore&&f.abort().catch(h.w.tag(bt));const r=this._store.synchronousTransaction(!1);for(;e>=0;e--)r.removeChainDataSync(n[e]);return await r.commit(),!1}const _=this._store.synchronousTransaction(!1);for(const e of d)e.onMainChain=!1,e.mainChainSuccessor=null,_.putChainDataSync(e.head.hash(),e,!1);a.mainChainSuccessor=n[n.length-1],_.putChainDataSync(c,a,!1);for(let e=r.length-1;e>=0;e--){const t=r[e];t.onMainChain=!0,t.mainChainSuccessor=e>0?n[e-1]:null,_.putChainDataSync(n[e],t,0===e)}_.setHeadSync(e),this._transactionStore?await s.JungleDB.commitCombined(..._.txs,u.tx,f.tx):await s.JungleDB.commitCombined(..._.txs,u.tx),this._transactionCache=l,this._proof=null;const b=[];for(const e of d)await this.fire("block-reverted",e.head),b.push(e.head);const w=[];for(let e=r.length-1;e>=0;e--)this._mainChain=r[e],this._headHash=n[e],await this.fire("head-changed",this.head,e>0),w.push(this.head);return await this.fire("block",e),await this.fire("rebranched",b,w,e),!0}getBlocks(e,t=500,r=!0){return this._store.getBlocks(e,t,r)}getChainProof(){return this._synchronizer.push(1,async()=>(this._proof||(this._proof=await this._getChainProof()),this._proof))}getBlockProof(e,t){return this._synchronizer.push(1,this._getBlockProof.bind(this,e,t))}async getAccountsTreeChunk(e,t){const r=await this._getSnapshot(e);return r&&await r.getAccountsTreeChunk(t)}async getAccountsProof(e,t){const r=await this._getSnapshot(e);return r&&await r.getAccountsProof(t)}async getTransactionsProof(e,t){return this.getTransactionsProofByAddresses(e,t)}async getTransactionsProofByAddresses(e,t){const r=await this.getBlock(e,!1,!0);if(!r||!r.isFull())return null;const n=[],i=new R;i.addAll(t);for(const e of r.transactions)(i.contains(e.sender)||i.contains(e.recipient))&&n.push(e);const s=ie.compute(r.body.getMerkleLeafs(),n);return new We(n,s)}async getTransactionsProofByHashes(e,t){const r=await this.getBlock(e,!1,!0);if(!r||!r.isFull())return null;const n=[],i=new R;i.addAll(t);for(const e of r.transactions)i.contains(e.hash())&&n.push(e);const s=ie.compute(r.body.getMerkleLeafs(),n);return new We(n,s)}async getTransactionReceiptsByAddress(e,t=null){if(!this._transactionStore)return null;const r=[],n=await this._transactionStore.getBySender(e,!t||t<0||!Number.isFinite(t)?null:t/2),i=await this._transactionStore.getByRecipient(e,!t||t<0||!Number.isFinite(t)?null:t/2);return n.forEach(e=>{r.push(new Ze(e.transactionHash,e.blockHash,e.blockHeight))}),i.forEach(e=>{r.push(new Ze(e.transactionHash,e.blockHash,e.blockHeight))}),r}async getTransactionReceiptsByHashes(e,t=null){if(!this._transactionStore)return null;const r=[],n=await Promise.all(e.map(e=>this._transactionStore.get(e)));for(const e of n)e&&(!t||t<0||r.length<t)&&r.push(new Ze(e.transactionHash,e.blockHash,e.blockHeight));return r}async getTransactionInfoByHash(e){if(!this._transactionStore)throw new Error("Invalid request");return await this._transactionStore.get(e)||null}_getSnapshot(e){return this._synchronizer.push(1,async()=>{const t=await this.getBlock(e);if(!t||this._mainChain.head.height-t.height>ae.NUM_SNAPSHOTS_MAX)return null;let r=null;if(this._snapshots.contains(e))r=this._snapshots.get(e);else{const e=await this._accounts.transaction(),n=this._transactionCache.clone();let i=this._headHash;for(;!t.prevHash.equals(i);){const t=await this.getBlock(i,!1,!0);this._snapshots.contains(i)||(r=await this._accounts.snapshot(e),this._snapshots.put(i,r),this._snapshotOrder.unshift(i)),await e.revertBlock(t,n),n.revertBlock(t),i=t.prevHash}await e.abort()}return F.that(t.accountsHash.equals(await r.hash()),"AccountsHash mismatch for snapshot of block ${blockHash}"),r})}async _saveSnapshot(e){if(this._snapshotOrder.length>0){const t=this._snapshotOrder.shift(),r=this._snapshots.get(t);r?await r.abort():h.e(bt,()=>`Snapshot with hash ${t.toBase64()} not found.`),this._snapshots.remove(t);const n=await this._accounts.snapshot();this._snapshots.put(e,n),this._snapshotOrder.push(e)}}get head(){return this._mainChain.head}get headHash(){return this._headHash}get height(){return this._mainChain.head.height}get totalDifficulty(){return this._mainChain.totalDifficulty}get totalWork(){return this._mainChain.totalWork}get accounts(){return this._accounts}get transactionCache(){return this._transactionCache}get blockForkedCount(){return this._blockForkedCount}get blockRebranchedCount(){return this._blockRebranchedCount}get blockExtendedCount(){return this._blockExtendedCount}get blockOrphanCount(){return this._blockOrphanCount}get blockInvalidCount(){return this._blockInvalidCount}get blockKnownCount(){return this._blockKnownCount}accountsHash(){return this._accounts.hash()}get queue(){return this._synchronizer}}bt.ERR_ORPHAN=-2,bt.ERR_INVALID=-1,bt.OK_KNOWN=0,bt.OK_EXTENDED=1,bt.OK_REBRANCHED=2,bt.OK_FORKED=3,bt.SYNCHRONIZER_THROTTLE_AFTER=500,bt.SYNCHRONIZER_THROTTLE_WAIT=30,c.register(bt);class wt extends At{constructor(e,t,r,n,i,s){super(r,n,i,s),this._blockchain=e,this._mempool=t,this._syncing=!1,this._numBlocksExtending=-1,this._numBlocksForking=-1,this._forkHead=null,this._failedSyncs=0,this._syncTarget=n.headHash,this._chainProofLimit=new G(wt.CHAIN_PROOF_RATE_LIMIT),this._accountsProofLimit=new G(wt.ACCOUNTS_PROOF_RATE_LIMIT),this._accountsTreeChunkLimit=new G(wt.ACCOUNTS_TREE_CHUNK_RATE_LIMIT),this._transactionsProofLimit=new G(wt.TRANSACTION_PROOF_RATE_LIMIT),this._transactionReceiptsLimit=new G(wt.TRANSACTION_RECEIPTS_RATE_LIMIT),this._blockProofLimit=new G(wt.BLOCK_PROOF_RATE_LIMIT),this._getBlocksLimit=new G(wt.GET_BLOCKS_RATE_LIMIT),this._onToDisconnect(n.channel,"get-blocks",e=>this._onGetBlocks(e)),this._onToDisconnect(n.channel,"get-chain-proof",e=>this._onGetChainProof(e)),this._onToDisconnect(n.channel,"get-accounts-proof",e=>this._onGetAccountsProof(e)),this._onToDisconnect(n.channel,"get-accounts-tree-chunk",e=>this._onGetAccountsTreeChunk(e)),this._onToDisconnect(n.channel,"get-transactions-proof",e=>this._onGetTransactionsProofByAddresses(e)),this._onToDisconnect(n.channel,"get-transaction-receipts",e=>this._onGetTransactionReceiptsByAddress(e)),this._onToDisconnect(n.channel,"get-block-proof",e=>this._onGetBlockProof(e)),this._onToDisconnect(n.channel,"get-block-proof-at",e=>this._onGetBlockProofAt(e)),this._onToDisconnect(n.channel,"get-transactions-proof-by-hashes",e=>this._onGetTransactionsProofByHashes(e)),this._onToDisconnect(n.channel,"get-transaction-receipts-by-hashes",e=>this._onGetTransactionReceiptsByHashes(e))}async syncBlockchain(){this._syncing=!0,this.providesServices(w.BLOCK_HISTORY,w.FULL_BLOCKS)?this._objectsInFlight.isEmpty()?this._objectsProcessing.isEmpty()?await this._blockchain.getBlock(this._syncTarget,!0)?this._syncFinished():0===this._numBlocksExtending&&++this._failedSyncs>=wt.SYNC_ATTEMPTS_MAX?this._peer.channel.close(Qr.BLOCKCHAIN_SYNC_FAILED,"blockchain sync failed"):this._requestBlocks().catch(h.w.tag(wt)):h.v(wt,`Waiting for ${this._objectsProcessing.length} objects to be processed ...`):h.v(wt,`Waiting for ${this._objectsInFlight.length} objects to arrive ...`):this._syncFinished()}_syncFinished(){this._subscribeTarget();const e=wt.MEMPOOL_DELAY_MIN+Math.random()*(wt.MEMPOOL_DELAY_MAX-wt.MEMPOOL_DELAY_MIN);setTimeout(()=>this._peer.channel.mempool(),e),this._syncing=!1,this._synced=!0,this._numBlocksExtending=0,this._numBlocksForking=0,this._forkHead=null,this._failedSyncs=0,this.fire("sync")}async _requestBlocks(e){if(this._peer.channel.isExpectingMessage(Ut.Type.INV))return;let t;this._peer.channel.expectMessage(Ut.Type.INV,()=>{this._peer.channel.close(Qr.GET_BLOCKS_TIMEOUT,"getBlocks timeout")},At.REQUEST_TIMEOUT),t=this._forkHead&&0===this._numBlocksExtending&&this._numBlocksForking>0?[this._forkHead.hash()]:await this._blockchain.getBlockLocators(),this._numBlocksExtending=0,this._numBlocksForking=0,this._peer.channel.getBlocks(t,e)}_shouldRequestData(e){return!(e.type===Vt.Type.BLOCK&&!this.providesServices(w.FULL_BLOCKS)||e.type===Vt.Type.TRANSACTION&&this._mempool.isFiltered(e.hash))}_getBlock(e,t=!1,r=!1){return this._blockchain.getBlock(e,t,r)}_getRawBlock(e,t=!1){return this._blockchain.getRawBlock(e,t)}_getTransaction(e){return this._mempool.getTransaction(e)}async _onKnownBlockAnnounced(e,t){this._syncing&&(this._numBlocksForking++,this._forkHead=t)}_onNoUnknownObjects(){this._syncing&&this.syncBlockchain().catch(h.e.tag(wt))}_onAllObjectsReceived(){this._syncing&&this.syncBlockchain().catch(h.e.tag(wt))}_onHeader(e){h.w(wt,`Unsolicited header message received from ${this._peer.peerAddress}, discarding`)}async _processBlock(e,t){switch(await this._blockchain.pushBlock(t)){case bt.ERR_INVALID:this._peer.channel.close(Qr.INVALID_BLOCK,"received invalid block");break;case bt.OK_EXTENDED:case bt.OK_REBRANCHED:this._syncing&&this._numBlocksExtending++;break;case bt.OK_FORKED:this._syncing&&(this._numBlocksForking++,this._forkHead=t);break;case bt.ERR_ORPHAN:this._onOrphanBlock(e,t);break;case bt.OK_KNOWN:h.v(wt,`Received known block ${e} (height=${t.height}, prevHash=${t.prevHash}) from ${this._peer.peerAddress}`)}}_onOrphanBlock(e,t){this._synced?(h.d(wt,`Received orphan block ${e} (height=${t.height}, prevHash=${t.prevHash}) from ${this._peer.peerAddress}`),this._timers.timeoutExists("outOfSync")||this._subscribe(je.NONE),this._syncTarget=e,this._timers.resetTimeout("outOfSync",()=>this._outOfSync(),wt.RESYNC_THROTTLE)):h.w(wt,`Received orphan block ${e} (height=${t.height}, prevHash=${t.prevHash}) while syncing`)}_outOfSync(){this._timers.clearTimeout("outOfSync"),this._synced=!1,this.fire("out-of-sync")}async _processTransaction(e,t){switch(await this._mempool.pushTransaction(t)){case dt.ReturnCode.FEE_TOO_LOW:this._peer.channel.reject(Ut.Type.TX,er.Code.REJECT_INSUFFICIENT_FEE,"Sender has too many free transactions",t.hash().serialize());break;case dt.ReturnCode.INVALID:this._peer.channel.reject(Ut.Type.TX,er.Code.REJECT_INVALID,"Invalid transaction",t.hash().serialize());break;case dt.ReturnCode.MINED:case dt.ReturnCode.EXPIRED:h.v(wt,()=>`Ignored transaction ${e.toHex()} relayed by ${this._peer.peerAddress} (${this._peer.netAddress})`);break;case dt.ReturnCode.FILTERED:h.v(wt,()=>`Filtered transaction ${e.toHex()} relayed by ${this._peer.peerAddress} (${this._peer.netAddress})`)}}_onAllObjectsProcessed(){this._syncing&&this.syncBlockchain().catch(h.e.tag(wt))}async _onGetBlocks(e){if(!this._getBlocksLimit.note())return void h.w(wt,"Rejecting GetBlocks message - rate-limit exceeded");h.v(wt,`[GETBLOCKS] ${e.locators.length} block locators maxInvSize ${e.maxInvSize} received from ${this._peer.peerAddress}`);let t=Wr.GENESIS_BLOCK;for(const r of e.locators){const e=await this._blockchain.getBlock(r);if(e){t=e;break}}const r=await this._blockchain.getBlocks(t.hash(),Math.min(e.maxInvSize,wt.GETBLOCKS_VECTORS_MAX),e.direction===Ht.Direction.FORWARD),n=[];for(const e of r)n.push(Vt.fromBlock(e));this._peer.channel.inv(n)}async _onGetChainProof(e){if(!this._chainProofLimit.note())return h.w(wt,"Rejecting GetChainProof message - rate-limit exceeded"),void this._peer.channel.close(Qr.RATE_LIMIT_EXCEEDED,"rate-limit exceeded");const t=await this._blockchain.getChainProof();this._peer.channel.chainProof(t)}async _onGetBlockProof(e){if(!this._blockProofLimit.note())return h.w(wt,"Rejecting GetBlockProof message - rate-limit exceeded"),void this._peer.channel.blockProof(null);const t=await this._blockchain.getBlock(e.blockHashToProve),r=await this._blockchain.getBlock(e.knownBlockHash);if(!t||!r)return void this._peer.channel.blockProof();const n=await this._blockchain.getBlockProof(t,r);this._peer.channel.blockProof(n)}async _onGetBlockProofAt(e){if(!this._blockProofLimit.note())return h.w(wt,"Rejecting GetBlockProof message - rate-limit exceeded"),void this._peer.channel.blockProof(null);const t=await this._blockchain.getBlockAt(e.blockHeightToProve),r=await this._blockchain.getBlock(e.knownBlockHash);if(!t||!r)return void this._peer.channel.blockProof();const n=await this._blockchain.getBlockProof(t,r);this._peer.channel.blockProof(n)}async _onGetAccountsProof(e){if(!this._accountsProofLimit.note())return h.w(wt,"Rejecting GetAccountsProof message - rate-limit exceeded"),void this._peer.channel.accountsProof(e.blockHash,null);const t=await this._blockchain.getAccountsProof(e.blockHash,e.addresses);this._peer.channel.accountsProof(e.blockHash,t)}async _onGetTransactionsProofByAddresses(e){if(!this._transactionsProofLimit.note())return h.w(wt,"Rejecting GetTransactionsProof message - rate-limit exceeded"),void this._peer.channel.transactionsProof(e.blockHash,null);const t=await this._blockchain.getTransactionsProofByAddresses(e.blockHash,e.addresses);this._peer.channel.transactionsProof(e.blockHash,t)}async _onGetTransactionsProofByHashes(e){if(!this._transactionsProofLimit.note())return h.w(wt,"Rejecting GetTransactionsProof message - rate-limit exceeded"),void this._peer.channel.transactionsProof(e.blockHash,null);const t=await this._blockchain.getTransactionsProofByHashes(e.blockHash,e.hashes);this._peer.channel.transactionsProof(e.blockHash,t)}async _onGetAccountsTreeChunk(e){if(!this._accountsTreeChunkLimit.note())return h.w(wt,"Rejecting GetAccountsTreeChunk message - rate-limit exceeded"),void this._peer.channel.accountsTreeChunk(e.blockHash,null);const t=await this._blockchain.getAccountsTreeChunk(e.blockHash,e.startPrefix);this._peer.channel.accountsTreeChunk(e.blockHash,t)}async _onGetTransactionReceiptsByAddress(e){if(!this._transactionReceiptsLimit.note())return h.w(wt,"Rejecting GetTransactionReceipts message - rate-limit exceeded"),void this._peer.channel.transactionReceipts(null);const t=await this._blockchain.getTransactionReceiptsByAddress(e.address,yr.RECEIPTS_MAX_COUNT);this._peer.channel.transactionReceipts(t)}async _onGetTransactionReceiptsByHashes(e){if(!this._transactionReceiptsLimit.note())return h.w(wt,"Rejecting GetTransactionReceipts message - rate-limit exceeded"),void this._peer.channel.transactionReceipts(null);const t=await this._blockchain.getTransactionReceiptsByHashes(e.hashes,yr.RECEIPTS_MAX_COUNT);this._peer.channel.transactionReceipts(t)}get syncing(){return this._syncing}_getSubscribedMempoolTransactions(){switch(this._remoteSubscription.type){case je.Type.ADDRESSES:return this._mempool.getTransactionsByAddresses(this._remoteSubscription.addresses,wt.MEMPOOL_ENTRIES_MAX);case je.Type.MIN_FEE:return new P(this._mempool.transactionGenerator(void 0,this._remoteSubscription.minFeePerByte),wt.MEMPOOL_ENTRIES_MAX);case je.Type.ANY:return new P(this._mempool.transactionGenerator(),wt.MEMPOOL_ENTRIES_MAX)}return[]}}wt.SYNC_ATTEMPTS_MAX=25,wt.GETBLOCKS_VECTORS_MAX=500,wt.RESYNC_THROTTLE=3e3,wt.MEMPOOL_DELAY_MIN=2e3,wt.MEMPOOL_DELAY_MAX=2e4,wt.MEMPOOL_THROTTLE=1e3,wt.MEMPOOL_ENTRIES_MAX=1e4,wt.CHAIN_PROOF_RATE_LIMIT=3,wt.ACCOUNTS_PROOF_RATE_LIMIT=60,wt.ACCOUNTS_TREE_CHUNK_RATE_LIMIT=300,wt.TRANSACTION_PROOF_RATE_LIMIT=60,wt.TRANSACTION_RECEIPTS_RATE_LIMIT=30,wt.BLOCK_PROOF_RATE_LIMIT=60,wt.GET_BLOCKS_RATE_LIMIT=30,c.register(wt);class vt extends yt{constructor(e,t,r){super(e,t,r),this._blockchain=e,this._mempool=t,this._producer=new nt(e,e.accounts,t,r.time)}getBlock(e,t=!0,r=t,n){const i=this._blockchain.getBlock(e,!0,t);if(!i)throw new Error(`No block found for hash ${e}`);return i}getBlockAt(e,t=!0){if(e>this._blockchain.height||e<1)throw new Error("Invalid height");const r=this._blockchain.getBlockAt(e,t);if(!r)throw new Error(`No block found at height ${e}`);return r}getBlockTemplate(e,t){return this._producer.getNextBlock(e,t)}async submitBlock(e){return await this.blockchain.pushBlock(e)>=0}getAccounts(e){return Promise.all(e.map(e=>this._blockchain.accounts.get(e)))}async getPendingTransactions(e){return e.map(e=>this._mempool.getTransaction(e)).filter(e=>null!=e)}async getPendingTransactionsByAddress(e,t){return this._mempool.getTransactionsByAddresses([e],t)}async getTransactionsFromBlock(e,t,r,n){if(!(n=n&&n.isFull()?n:await this._blockchain.getBlock(t,!1,!0)))throw new Error(`No block found for hash ${t}`);return n.transactions.filter(t=>e.find(e=>e.equals(t.hash())))}getTransactionReceiptsByAddress(e,t){return this._blockchain.getTransactionReceiptsByAddress(e,t)}getTransactionReceiptsByHashes(e){return this._blockchain.getTransactionReceiptsByHashes(e)}async sendTransaction(e){switch(await this._mempool.pushTransaction(e)){case dt.ReturnCode.ACCEPTED:return await new Promise(t=>{let r;r=this.on("transaction-relayed",n=>{n.equals(e)&&(this.off("transaction-relayed",r),t(!0))}),setTimeout(()=>{this.off("transaction-relayed",r),t(!1)},yt.TRANSACTION_RELAY_TIMEOUT)})?yt.SendTransactionResult.RELAYED:yt.SendTransactionResult.PENDING_LOCAL;case dt.ReturnCode.KNOWN:return yt.SendTransactionResult.KNOWN;case dt.ReturnCode.FEE_TOO_LOW:case dt.ReturnCode.FILTERED:return yt.SendTransactionResult.REJECTED_LOCAL;case dt.ReturnCode.MINED:return yt.SendTransactionResult.ALREADY_MINED;case dt.ReturnCode.EXPIRED:return yt.SendTransactionResult.EXPIRED;case dt.ReturnCode.INVALID:return yt.SendTransactionResult.INVALID}return yt.SendTransactionResult.NONE}getMempoolContents(){return this._mempool.getTransactions()}subscribeMinFeePerByte(e){this.subscribe(je.fromMinFeePerByte(e)),this.mempool.evictBelowMinFeePerByte(e)}get minFeePerByte(){return this._subscription.type===je.Type.MIN_FEE?this._subscription.minFeePerByte:0}_newConsensusAgent(e){return new wt(this._blockchain,this._mempool,this._network.time,e,this._invRequestManager,this._subscription)}get blockchain(){return this._blockchain}get mempool(){return this._mempool}}c.register(vt);class Et extends bt{static getPersistent(e,t,r){const n=ct.getPersistent(e);return new Et(n,t,r)._init()}static createVolatile(e,t){const r=ct.createVolatile();return new Et(r,e,t)._init()}constructor(e,t,r){super(e,t,r)}async _init(){return await bt.prototype._init.call(this),this._proof||(this._proof=await this._getChainProof()),this}async partialChain(){const e=await this.getChainProof(),t=new kt(this._store,this._accounts,this._time,e,this._synchronizer);return t.on("committed",(e,t,r,n)=>{this._proof=e,this._headHash=t,this._mainChain=r,this._transactionCache=n,this.fire("block",t),this.fire("head-changed",this.head)}),await t._init(),t}_shouldExtendChainProof(){return!0}}c.register(Et);class St extends wt{constructor(e,t,r,n,i,s){super(e,t,r,n,i,s),this._blockchain=e,this._partialChain=null,this._syncing=!1,this._catchup=!1,this._onMainChain=!1,this._orphanedBlocks=[],this._busy=!1,this._accountsRequest=null,this._requestedChainProof=!1,this._numWeakProofs=0,this._onToDisconnect(n.channel,"chain-proof",e=>this._onChainProof(e)),this._onToDisconnect(n.channel,"accounts-tree-chunk",e=>this._onAccountsTreeChunk(e))}async syncBlockchain(){if(!this.providesServices(w.FULL_BLOCKS,w.CHAIN_PROOF,w.ACCOUNTS_CHUNKS,w.MEMPOOL))return void this._syncFinished();if(!this._objectsInFlight.isEmpty())return void h.v(St,`Waiting for ${this._objectsInFlight.length} objects to arrive ...`);if(!this._objectsProcessing.isEmpty())return void h.v(St,`Waiting for ${this._objectsProcessing.length} objects to be processed ...`);if(this._failedSyncs>=St.SYNC_ATTEMPTS_MAX)return this._peer.channel.close(Qr.BLOCKCHAIN_SYNC_FAILED,"blockchain sync failed"),void(this._partialChain&&(await this._partialChain.abort(),this._partialChain=null));const e=await this._blockchain.getBlock(this._syncTarget,!0);if(!e||this._syncing){if(!e&&!this._syncing){let e;this._syncing=!0,this._onMainChain=!1;try{e=await this.getHeader(this._syncTarget)}catch(e){return void this._peer.channel.close(Qr.ABORTED_SYNC,"Failed to retrieve sync target header")}this._catchup=Math.abs(e.height-this._blockchain.height)<=ae.NUM_BLOCKS_VERIFICATION,h.d(St,`Start syncing, catchup mode: ${this._catchup}`)}if(this._syncing&&!this._busy)if(this._catchup)await wt.prototype.syncBlockchain.call(this);else switch(this._partialChain||await this._initChainProofSync(),this._partialChain.state){case kt.State.PROVE_CHAIN:this._requestChainProof(),this.fire("sync-chain-proof",this._peer.peerAddress);break;case kt.State.PROVE_ACCOUNTS_TREE:this._requestAccountsTree(),this.fire("sync-accounts-tree",this._peer.peerAddress);break;case kt.State.PROVE_BLOCKS:this._requestProofBlocks(),this.fire("verify-accounts-tree",this._peer.peerAddress);break;case kt.State.COMPLETE:this.fire("sync-finalize",this._peer.peerAddress),this._busy=!0,await this._partialChain.commit(),await this._applyOrphanedBlocks(),this._syncFinished();break;case kt.State.ABORTED:this._peer.channel.close(Qr.ABORTED_SYNC,"aborted sync");break;case kt.State.WEAK_PROOF:h.d(St,`Not syncing with ${this._peer.peerAddress} - weaker proof`),this._numWeakProofs++,this._numWeakProofs>=St.WEAK_PROOFS_MAX?this._peer.channel.close(Qr.BLOCKCHAIN_SYNC_FAILED,"too many weak proofs"):this._syncFinished()}}else this._syncFinished()}async _initChainProofSync(){this._subscribeTarget(),this._syncing=!0,this._synced=!1,this._catchup=!1,this._onMainChain=!0,this._partialChain&&await this._partialChain.abort(),this._partialChain=await this._blockchain.partialChain()}_syncFinished(){this._partialChain&&(this._partialChain=null),this._busy=!1,super._syncFinished()}async _applyOrphanedBlocks(){for(const e of this._orphanedBlocks)if(await this._blockchain.pushBlock(e)===Et.ERR_INVALID){this._peer.channel.close(Qr.INVALID_BLOCK,"received invalid block");break}this._orphanedBlocks=[]}_requestChainProof(){F.that(this._partialChain&&this._partialChain.state===kt.State.PROVE_CHAIN),F.that(!this._requestedChainProof),this._busy=!0,this._peer.channel.getChainProof(),this._requestedChainProof=!0,this._peer.channel.expectMessage(Ut.Type.CHAIN_PROOF,()=>{this._peer.channel.close(Qr.GET_CHAIN_PROOF_TIMEOUT,"getChainProof timeout")},St.CHAINPROOF_REQUEST_TIMEOUT,St.CHAINPROOF_CHUNK_TIMEOUT)}async _onChainProof(e){F.that(this._partialChain&&this._partialChain.state===kt.State.PROVE_CHAIN),h.d(St,`[CHAIN-PROOF] Received from ${this._peer.peerAddress}: ${e.proof}`),this._requestedChainProof?(this._requestedChainProof=!1,this._syncing&&this.fire("verify-chain-proof",this._peer.peerAddress),await this._partialChain.pushProof(e.proof)?(this._busy=!1,this.syncBlockchain().catch(h.e.tag(St))):(h.w(St,`Invalid chain proof received from ${this._peer.peerAddress} - verification failed`),this._peer.channel.close(Qr.INVALID_CHAIN_PROOF,"Invalid chain proof"))):h.w(St,`Unsolicited chain proof received from ${this._peer.peerAddress}`)}_requestAccountsTree(){F.that(this._partialChain&&this._partialChain.state===kt.State.PROVE_ACCOUNTS_TREE),F.that(!this._accountsRequest),this._busy=!0;const e=this._partialChain.getMissingAccountsPrefix(),t=this._partialChain.headHash;h.d(St,`Requesting AccountsTreeChunk starting at ${e} from ${this._peer.peerAddress}`),this._accountsRequest={startPrefix:e,blockHash:t},this._peer.channel.getAccountsTreeChunk(t,e),this._peer.channel.expectMessage(Ut.Type.ACCOUNTS_TREE_CHUNK,()=>{this._accountsRequest=null,this._peer.channel.close(Qr.GET_ACCOUNTS_TREE_CHUNK_TIMEOUT,"getAccountsTreeChunk timeout")},St.ACCOUNTS_TREE_CHUNK_REQUEST_TIMEOUT)}async _onAccountsTreeChunk(e){if(h.d(St,`[ACCOUNTS-TREE-CHUNK] Received from ${this._peer.peerAddress}: blockHash=${e.blockHash}, proof=${e.chunk}`),!this._accountsRequest)return void h.w(St,`Unsolicited accounts tree chunk received from ${this._peer.peerAddress}`);F.that(this._partialChain&&this._partialChain.state===kt.State.PROVE_ACCOUNTS_TREE);const{startPrefix:t,blockHash:r}=this._accountsRequest;if(this._accountsRequest=null,!e.hasChunk())return await this._partialChain.abort(),this._partialChain=null,this._busy=!1,void this._failedSyncs++;if(!r.equals(e.blockHash)||e.chunk.head.prefix<=t)return h.w(St,`Received AccountsTreeChunk for block != head or wrong start prefix from ${this._peer.peerAddress}`),void this._peer.channel.close(Qr.UNEXPECTED_ACCOUNTS_TREE_CHUNK,"Unexpected AccountsTreeChunk");const n=e.chunk;if(!n.verify())return h.w(St,`Invalid AccountsTreeChunk received from ${this._peer.peerAddress}`),void this._peer.channel.close(Qr.INVALID_ACCOUNTS_TREE_CHUNCK,"Invalid AccountsTreeChunk");const i=n.root();if(!(await this._partialChain.getBlock(r)).accountsHash.equals(i))return h.w(St,`Invalid AccountsTreeChunk (root hash) received from ${this._peer.peerAddress}`),void this._peer.channel.close(Qr.INVALID_ACCOUNTS_TREE_CHUNCK,"AccountsTreeChunk root hash mismatch");const s=await this._partialChain.pushAccountsTreeChunk(n);s<0&&(h.e(`AccountsTree sync failed with error code ${s} from ${this._peer.peerAddress}`),this._peer.channel.close(Qr.INVALID_ACCOUNTS_TREE_CHUNCK,"AccountsTreeChunk root hash mismatch")),this._busy=!1,this.syncBlockchain().catch(h.e.tag(St))}_requestProofBlocks(){if(F.that(this._partialChain&&this._partialChain.state===kt.State.PROVE_BLOCKS),this._lastChainHeight===this._partialChain.proofHeadHeight&&this._failedSyncs++,this._lastChainHeight=this._partialChain.proofHeadHeight,this._peer.channel.isExpectingMessage(Ut.Type.INV))return void h.e(St,"Duplicate _requestProofBlocks()");this._peer.channel.expectMessage(Ut.Type.INV,()=>{this._peer.channel.close(Qr.GET_BLOCKS_TIMEOUT,"getBlocks timeout")},At.REQUEST_TIMEOUT);const e=this._partialChain.getBlockLocators();this.requestVector(new Vt(Vt.Type.BLOCK,e[0])),this._peer.channel.getBlocks(e,this._partialChain.numBlocksNeeded(),!1)}_requestBlocks(){return this._syncing&&!this._onMainChain?super._requestBlocks(1):super._requestBlocks()}async _processBlock(e,t){if(t.height<this._chain.height-ae.NUM_BLOCKS_VERIFICATION&&(!this._partialChain||this._partialChain.state!==kt.State.PROVE_BLOCKS))return this._onMainChain=!1,await this._initChainProofSync(),void this.syncBlockchain().catch(h.e.tag(St));switch(this._onMainChain=!0,await this._chain.pushBlock(t)){case bt.ERR_INVALID:this._peer.channel.close(Qr.INVALID_BLOCK,"received invalid block");break;case bt.OK_EXTENDED:case bt.OK_REBRANCHED:this._syncing&&this._numBlocksExtending++;break;case bt.OK_FORKED:this._syncing&&(this._numBlocksForking++,this._forkHead=t);break;case Et.ERR_ORPHAN:this._onOrphanBlock(e,t)}}async _onKnownBlockAnnounced(e,t){if(this._syncing&&this._catchup){if(t.height<this._chain.height-ae.NUM_BLOCKS_VERIFICATION&&(!this._partialChain||this._partialChain.state!==kt.State.PROVE_BLOCKS))return this._onMainChain=!1,await this._initChainProofSync(),void this.syncBlockchain().catch(h.e.tag(St));this._onMainChain=!0,wt.prototype._onKnownBlockAnnounced.call(this,e,t)}}_onOrphanBlock(e,t){this._syncing&&!this._catchup?this._orphanedBlocks.push(t):super._onOrphanBlock(e,t)}getHeader(e){return F.that(!this._headerRequest),new Promise((t,r)=>{const n=new Vt(Vt.Type.BLOCK,e);this._headerRequest={hash:e,resolve:t,reject:r},this._peer.channel.getHeader([n]),this._peer.channel.expectMessage(Ut.Type.HEADER,()=>{this._headerRequest=null,this._peer.channel.close(Qr.GET_HEADER_TIMEOUT,"getHeader timeout"),r(new Error("Timeout"))},At.REQUEST_TIMEOUT)})}_onHeader(e){const t=e.header,r=t.hash();if(!this._headerRequest)return void h.w(Tt,`Unsolicited header ${r} received from ${this._peer.peerAddress}, discarding`);const{hash:n,resolve:i,reject:s}=this._headerRequest;this._headerRequest=null,n.equals(r)?i(t):(h.w(St,`Received wrong header from ${this._peer.peerAddress}`),this._peer.channel.close(Qr.UNEXPECTED_HEADER,"Received wrong header"),s(new Error("Received wrong header")))}_onClose(){this._partialChain&&this._partialChain.abort().catch(h.w.tag(St)),super._onClose()}get _chain(){return this._syncing&&!this._catchup&&this._partialChain?this._partialChain:this._blockchain}get syncing(){return this._syncing}}St.CHAINPROOF_REQUEST_TIMEOUT=45e3,St.CHAINPROOF_CHUNK_TIMEOUT=1e4,St.ACCOUNTS_TREE_CHUNK_REQUEST_TIMEOUT=8e3,St.SYNC_ATTEMPTS_MAX=5,St.GETBLOCKS_VECTORS_MAX=500,St.WEAK_PROOFS_MAX=3,c.register(St);class Ct extends yt{constructor(e,t,r){super(e,t,r),this._blockchain=e,this._mempool=t,this._producer=new nt(e,e.accounts,t,r.time)}getBlockTemplate(e,t){return this._producer.getNextBlock(e,t)}async submitBlock(e){return await this.blockchain.pushBlock(e)>=0}getAccounts(e){return Promise.all(e.map(e=>this._blockchain.accounts.get(e)))}async getPendingTransactions(e){return e.map(e=>this._mempool.getTransaction(e)).filter(e=>null!=e)}async getPendingTransactionsByAddress(e,t){return this._mempool.getTransactionsByAddresses([e],t)}async sendTransaction(e){switch(await this._mempool.pushTransaction(e)){case dt.ReturnCode.ACCEPTED:return await new Promise(t=>{let r;r=this.on("transaction-relayed",n=>{n.equals(e)&&(this.off("transaction-relayed",r),t(!0))}),setTimeout(()=>{this.off("transaction-relayed",r),t(!1)},yt.TRANSACTION_RELAY_TIMEOUT)})?yt.SendTransactionResult.RELAYED:yt.SendTransactionResult.PENDING_LOCAL;case dt.ReturnCode.KNOWN:return yt.SendTransactionResult.KNOWN;case dt.ReturnCode.FEE_TOO_LOW:case dt.ReturnCode.FILTERED:return yt.SendTransactionResult.REJECTED_LOCAL;case dt.ReturnCode.MINED:return yt.SendTransactionResult.ALREADY_MINED;case dt.ReturnCode.EXPIRED:return yt.SendTransactionResult.EXPIRED;case dt.ReturnCode.INVALID:return yt.SendTransactionResult.INVALID}return yt.SendTransactionResult.NONE}getMempoolContents(){return this._mempool.getTransactions()}subscribeMinFeePerByte(e){this.subscribe(je.fromMinFeePerByte(e)),this.mempool.evictBelowMinFeePerByte(e)}get minFeePerByte(){return this._subscription.type===je.Type.MIN_FEE?this._subscription.minFeePerByte:0}_newConsensusAgent(e){return new St(this._blockchain,this._mempool,this._network.time,e,this._invRequestManager,this._subscription)}_onPeerJoined(e){const t=super._onPeerJoined(e);return this.bubble(t,"sync-chain-proof","verify-chain-proof","sync-accounts-tree","verify-accounts-tree","sync-finalize"),t}get blockchain(){return this._blockchain}get mempool(){return this._mempool}}c.register(Ct);class kt extends Et{constructor(e,t,r,n,i){super(e.transaction(!1),t,r),this._proof=n,this._state=kt.State.PROVE_CHAIN,this._partialTree=null,this._accountsTx=null,this._proofHead=null,this._commitSynchronizer=i}pushProof(e){return this._synchronizer.push(0,this._pushProof.bind(this,e))}async _pushProof(e){const t=[];for(let r=0;r<e.prefix.length;++r){const n=e.prefix.blocks[r],i=n.hash();await this._store.getBlock(i)||n.header._pow||t.push(n.header)}for(let r=0;r<e.suffix.length;++r){const n=e.suffix.headers[r],i=n.hash();await this._store.getBlock(i)||n._pow||t.push(n)}await tt.manyPow(t);for(let t=0;t<e.prefix.length;t++){const r=e.prefix.blocks[t],n=r.hash(),i=await this._store.getBlock(n);if(i)e.prefix.blocks[t]=i.toLight();else if(!await r.verify(this._time))return h.w(kt,"Rejecting proof - prefix contains invalid block"),!1}for(let t=0;t<e.suffix.length;t++){const r=e.suffix.headers[t],n=r.hash(),i=await this._store.getBlock(n);if(i)e.suffix.headers[t]=i.header;else if(!await r.verifyProofOfWork())return h.w(kt,"Rejecting proof - suffix contains invalid header"),!1}if(!await e.verify())return h.w(kt,"Rejecting proof - verification failed"),!1;if(e.suffix.length!==ae.K&&e.suffix.length!==e.head.height-1)return h.w(kt,"Rejecting proof - invalid suffix length"),!1;if(e.prefix.denseSuffix().length<ae.M&&e.prefix.length>0&&e.prefix.head.height>=ae.M)return h.w(It,"Rejecting proof - dense suffix too short"),!1;const r=[];let n=e.prefix.head;for(const t of e.suffix.headers){const e=await n.getNextInterlink(t.target,t.version),i=e.hash();if(!t.interlinkHash.equals(i))return h.w(kt,"Rejecting proof - invalid interlink hash in proof suffix"),!1;n=new Je(t,e),r.push(n)}const i=this._proof||await this._getChainProof();return await tt.isBetterProof(e,i,ae.M)?await this._acceptProof(e,r):(await this.abort(),this._state=kt.State.WEAK_PROOF),!0}async _acceptProof(e,t){await this._store.truncate();const r=e.prefix.denseSuffix();let n=new at;for(let t=0;t<e.prefix.length-r.length;t++){const r=e.prefix.blocks[t],i=r.hash(),s=ze.getHashDepth(await r.pow());n=n.copyAndAdd(s);const o=new ot(r,new J(-1),new J(-1),n,!0);await this._store.putChainData(i,o)}const i=r[0];this._headHash=i.hash(),this._mainChain=await ot.initial(i,n),await this._store.putChainData(this._headHash,this._mainChain);for(let e=1;e<r.length;e++){const t=r[e],n=await this._pushLightBlock(t);F.that(n>=0)}for(const e of t){const t=await this._pushLightBlock(e);F.that(t>=0)}this._state=kt.State.PROVE_ACCOUNTS_TREE,this._partialTree=await this._accounts.partialAccountsTree(),this._proofHead=this._mainChain,await this._store.setHead(this.headHash),this._proof=e}async _pushLightBlock(e){const t=e.hash();if(await this._store.getBlock(t))return It.OK_KNOWN;const r=await this._store.getChainData(e.prevHash);return!r||r.totalDifficulty.lte(0)?It.ERR_ORPHAN:this._pushBlockInternal(e,t,r)}async _pushBlockInternal(e,t,r){const n=await r.nextChainData(e);if(e.prevHash.equals(this.headHash)){if(n.onMainChain=!0,r.mainChainSuccessor=t,await this._store.putChainData(t,n),await this._store.putChainData(e.prevHash,r,!1),this._mainChain=n,this._headHash=t,this._proof){const t=this._proof.head.hash();e.prevHash.equals(t)&&(this._proof=await this._extendChainProof(this._proof,e.header))}return this.fire("head-changed",this.head,!1),It.OK_EXTENDED}throw new Error("Invalid call to _pushBlockInternal")}_pushBlock(e){if(this._state===kt.State.PROVE_BLOCKS){const t=e.hash();if(this._proofHead.head.prevHash.equals(t))return this._pushBlockBackwards(e);if(this._proofHead.head.hash().equals(t))return this._pushHeadBlock(e)}return bt.ERR_ORPHAN}async _pushHeadBlock(e){const t=e.hash();if(!e.isFull())return h.w(kt,"Rejecting block - body missing"),bt.ERR_INVALID;if(!await e.verify(this._time))return bt.ERR_INVALID;if(!await this._verifyInterlink(e))return h.w(kt,"Rejecting block - interlink verification failed"),bt.ERR_INVALID;const r=await this._store.getChainData(e.prevHash);if(!r)return h.w(kt,"Rejecting block - unknown predecessor"),bt.ERR_ORPHAN;const n=r.head;if(!await e.isImmediateSuccessorOf(n))return h.w(kt,"Rejecting block - not a valid immediate successor"),bt.ERR_INVALID;const i=await this.getNextTarget(n);if(ze.isValidTarget(i)){if(e.nBits!==ze.targetToCompact(i))return h.w(kt,"Rejecting block - difficulty mismatch"),bt.ERR_INVALID}else h.w(kt,"Skipping difficulty verification - not enough blocks available");const s=await r.nextChainData(e);return await this._prepend(t,s)?(this._mainChain=s,this._proofHead=s,this._headHash=t,this.needsMoreBlocks()||await this._complete()?bt.OK_EXTENDED:bt.ERR_INVALID):bt.ERR_INVALID}async _pushBlockBackwards(e){const t=e.hash();if(!e.isFull())return h.w(kt,"Rejecting block - body missing"),bt.ERR_INVALID;if(!await e.verify(this._time))return bt.ERR_INVALID;if(!await this._verifyInterlink(e))return h.w(kt,"Rejecting block - interlink verification failed"),bt.ERR_INVALID;if(!await this._proofHead.head.isImmediateSuccessorOf(e))return h.w(kt,"Rejecting block - not a valid immediate predecessor"),bt.ERR_INVALID;const r=await this.getNextTarget(e);if(ze.isValidTarget(r)){if(this._proofHead.head.nBits!==ze.targetToCompact(r))return h.w(kt,"Rejecting block - difficulty mismatch"),bt.ERR_INVALID}else h.w(kt,"Skipping difficulty verification - not enough blocks available");const n=await this._proofHead.previousChainData(e);return await this._prepend(t,n)?bt.OK_EXTENDED:bt.ERR_INVALID}async _prepend(e,t){try{const e=new Qe;await this._accountsTx.revertBlock(t.head,e)}catch(e){return h.w(kt,`Rejecting block - failed to commit to AccountsTree: ${e.message||e}`),!1}return t.onMainChain=!0,t.mainChainSuccessor=t.head.hash().equals(this._proofHead.head.hash())?null:this._proofHead.head.hash(),await this._store.putChainData(e,t),this._proofHead=t,!!this.needsMoreBlocks()||this._complete()}async pushAccountsTreeChunk(e){if(this._state!==kt.State.PROVE_ACCOUNTS_TREE)return De.Status.ERR_INCORRECT_PROOF;const t=await this._partialTree.pushChunk(e);return t===De.Status.OK_COMPLETE&&(this._state=kt.State.PROVE_BLOCKS,this._accountsTx=new Me(this._partialTree.transaction(!1))),t}async _complete(){this._transactionCache=new Qe;let e=this._proofHead;for(;e;){for(const t of e.head.transactions)if(this._transactionCache.containsTransaction(t))return h.w(kt,"Rejecting block - Double Transaction Error!"),!1;this._transactionCache.pushBlock(e.head),e=e.mainChainSuccessor?await this._store.getChainData(e.mainChainSuccessor,!0):null}this._state=kt.State.COMPLETE,this._accountsTx&&(await this._accountsTx.abort(),this._accountsTx=null);const t=this._proof||await this._getChainProof();return this.fire("complete",t,this._headHash,this._mainChain,this._transactionCache),!0}async commit(){return this._commitSynchronizer.push(0,this._commit.bind(this))}async _commit(){this._accountsTx&&(await this._accountsTx.abort(),this._accountsTx=null);const e=await s.JungleDB.commitCombined(...this._store.txs,this._partialTree.tx);this._partialTree=null;const t=this._proof||await this._getChainProof();return e&&this.fire("committed",t,this._headHash,this._mainChain,this._transactionCache),e}async abort(){this._state!==kt.State.ABORTED&&(this._state=kt.State.ABORTED,this._accountsTx&&(await this._accountsTx.abort(),this._accountsTx=null),this._partialTree&&(await this._partialTree.abort(),this._partialTree=null),await this._store.abort(),this.fire("aborted"))}getMissingAccountsPrefix(){return this._partialTree?this._partialTree.missingPrefix:""}getBlockLocators(){return this._proofHead?[this._proofHead.head.hash()]:[this.headHash]}numBlocksNeeded(){if(!this._proofHead)return ae.NUM_BLOCKS_VERIFICATION;let e=ae.NUM_BLOCKS_VERIFICATION-(this.height-this._proofHead.head.height+1);return this._proofHead.head.isFull()||e++,e}needsMoreBlocks(){return this.numBlocksNeeded()>0}get state(){return this._state}get proofHeadHeight(){return this._proofHead.head.height}}kt.State={WEAK_PROOF:-2,ABORTED:-1,PROVE_CHAIN:0,PROVE_ACCOUNTS_TREE:1,PROVE_BLOCKS:2,COMPLETE:3},c.register(kt);class It extends tt{constructor(e){return super(ct.createVolatile()),this._time=e,this._proof=new st(new rt([Wr.GENESIS_BLOCK.toLight()]),new it([])),this._headHash=Wr.GENESIS_HASH,this._synchronizer=new V(2,It.SYNCHRONIZER_THROTTLE_AFTER,It.SYNCHRONIZER_THROTTLE_WAIT),this._init()}async _init(){return this._mainChain=await ot.initial(Wr.GENESIS_BLOCK),await this._store.putChainData(Wr.GENESIS_HASH,this._mainChain),this}pushProof(e){return this._synchronizer.push(0,this._pushProof.bind(this,e))}async _pushProof(e){const t=[];for(let r=0;r<e.prefix.length;++r){const n=e.prefix.blocks[r],i=n.hash();await this._store.getBlock(i)||n.header._pow||t.push(n.header)}for(let r=0;r<e.suffix.length;++r){const n=e.suffix.headers[r],i=n.hash();await this._store.getBlock(i)||n._pow||t.push(n)}await tt.manyPow(t);for(let t=0;t<e.prefix.length;t++){t%1e3==999&&await C.webYield();const r=e.prefix.blocks[t],n=r.hash(),i=await this._store.getBlock(n);if(i)e.prefix.blocks[t]=i.toLight();else if(!await r.verify(this._time))return h.w(It,"Rejecting proof - prefix contains invalid block"),!1}for(let t=0;t<e.suffix.length;t++){const r=e.suffix.headers[t],n=r.hash(),i=await this._store.getBlock(n);if(i)e.suffix.headers[t]=i.header;else if(!await r.verifyProofOfWork())return h.w(It,"Rejecting proof - suffix contains invalid header"),!1}if(!await e.verify())return h.w(It,"Rejecting proof - verification failed"),!1;if(e.suffix.length!==ae.K&&e.suffix.length!==e.head.height-1)return h.w(It,"Rejecting proof - invalid suffix length"),!1;if(e.prefix.denseSuffix().length<ae.M&&e.prefix.length>0&&e.prefix.head.height>=ae.M)return h.w(It,"Rejecting proof - dense suffix too short"),!1;const r=[];let n=e.prefix.head;for(const t of e.suffix.headers){const e=await n.getNextInterlink(t.target,t.version),i=e.hash();if(!t.interlinkHash.equals(i))return h.w(It,"Rejecting proof - invalid interlink hash in proof suffix"),!1;n=new Je(t,e),r.push(n)}await C.webYield();const i=this._proof||await this._getChainProof();return await tt.isBetterProof(e,i,ae.M)&&await this._acceptProof(e,r),!0}async _acceptProof(e,t){this._proof=e;const r=e.prefix.head.hash(),n=await this._store.getChainData(r);if(!n||n.totalDifficulty.lte(0)){await this._store.truncate();const t=e.prefix.denseSuffix();let r=new at;for(let n=0;n<e.prefix.length-t.length;n++){n%100==99&&await C.webYield();const t=e.prefix.blocks[n],i=t.hash(),s=ze.getHashDepth(await t.pow());r=r.copyAndAdd(s);const o=new ot(t,new J(-1),new J(-1),r,!0);await this._store.putChainData(i,o)}const n=t[0];this._headHash=n.hash(),this._mainChain=await ot.initial(n,r),await this._store.putChainData(this._headHash,this._mainChain);for(let e=1;e<t.length;e++){e%50==49&&await C.webYield();const r=t[e],n=await this._pushBlock(r);F.that(n>=0)}}for(const e of t){e.height%50==49&&await C.webYield();const t=await this._pushBlock(e);F.that(t>=0)}}async _pushBlock(e){const t=await e.hash();if(await this._store.getBlock(t))return It.OK_KNOWN;const r=await this._store.getChainData(e.prevHash);return!r||r.totalDifficulty.lte(0)?It.ERR_ORPHAN:this._pushBlockInternal(e,t,r)}pushHeader(e){return this._synchronizer.push(0,this._pushHeader.bind(this,e))}async _pushHeader(e){const t=e.hash();if(await this._store.getBlock(t))return It.OK_KNOWN;if(!await e.verifyProofOfWork())return h.w(It,"Rejecting header - PoW verification failed"),It.ERR_INVALID;const r=await this._store.getChainData(e.prevHash);if(!r||r.totalDifficulty.lte(0))return h.w(It,"Rejecting header - unknown predecessor"),It.ERR_ORPHAN;const n=r.head;if(!e.isImmediateSuccessorOf(n.header))return h.w(It,"Rejecting header - not a valid successor"),It.ERR_INVALID;const i=await this.getNextTarget(n);if(ze.isValidTarget(i)){if(e.nBits!==ze.targetToCompact(i))return h.w(It,"Rejecting header - difficulty mismatch"),It.ERR_INVALID}else h.w(It,"Skipping difficulty verification - not enough blocks available");const s=await n.getNextInterlink(e.target,e.version);if(!s.hash().equals(e.interlinkHash))return h.w(It,"Rejecting header - interlink verification failed"),It.ERR_INVALID;const o=new Je(e,s);return this._pushBlockInternal(o,t,r)}async _pushBlockInternal(e,t,r){const n=await r.nextChainData(e);if(e.prevHash.equals(this.headHash)){n.onMainChain=!0,r.mainChainSuccessor=t;const i=this._store.synchronousTransaction();if(i.putChainDataSync(t,n),i.putChainDataSync(e.prevHash,r),await i.commit(),this._mainChain=n,this._headHash=t,this._proof){const t=this._proof.head.hash();e.prevHash.equals(t)&&(this._proof=await this._extendChainProof(this._proof,e.header))}return await this.fire("head-changed",this.head,!1),await this.fire("block",t),await this.fire("extended",this.head),It.OK_EXTENDED}return n.totalDifficulty.gt(this._mainChain.totalDifficulty)?(await this._rebranch(t,n),It.OK_REBRANCHED):(h.v(It,`Creating/extending fork with block ${t}, height=${e.height}, totalDifficulty=${n.totalDifficulty}, totalWork=${n.totalWork}`),await this._store.putChainData(t,n),await this.fire("block",t),It.OK_FORKED)}async _rebranch(e,t){h.v(It,`Rebranching to fork ${e}, height=${t.head.height}, totalDifficulty=${t.totalDifficulty}, totalWork=${t.totalWork}`);const r=[],n=[];let i=t,s=e;for(;!i.onMainChain;)r.push(i),n.push(s),s=i.head.prevHash,i=await this._store.getChainData(s),F.that(!!i,"Failed to find fork predecessor while rebranching");h.v(It,()=>`Found common ancestor ${s.toBase64()} ${r.length} blocks up`);const o=i,a=s,c=this._store.synchronousTransaction(!1),u=[];let l=this._headHash,f=this._mainChain;for(;!l.equals(a);)f.onMainChain=!1,f.mainChainSuccessor=null,c.putChainDataSync(l,f),u.push(f),l=f.head.prevHash,f=await this._store.getChainData(l),F.that(!!f,"Failed to find main chain predecessor while rebranching");o.mainChainSuccessor=n[n.length-1],c.putChainDataSync(a,o);for(let e=r.length-1;e>=0;e--){const t=r[e];t.onMainChain=!0,t.mainChainSuccessor=e>0?n[e-1]:null,c.putChainDataSync(n[e],t)}await c.commit(),this._proof=null;const d=[];for(const e of u)await this.fire("block-reverted",e.head),d.push(e.head);const p=[];for(let e=r.length-1;e>=0;e--)this._mainChain=r[e],this._headHash=n[e],await this.fire("head-changed",this.head,e>0),p.push(this.head);await this.fire("block",e),await this.fire("rebranched",d,p,e)}getChainProof(){return this._synchronizer.push(1,async()=>(this._proof||(this._proof=await this._getChainProof()),this._proof))}get head(){return this._mainChain.head}get headHash(){return this._headHash}get height(){return this._mainChain.head.height}}It.ERR_ORPHAN=-2,It.ERR_INVALID=-1,It.OK_KNOWN=0,It.OK_EXTENDED=1,It.OK_REBRANCHED=2,It.OK_FORKED=3,It.SYNCHRONIZER_THROTTLE_AFTER=500,It.SYNCHRONIZER_THROTTLE_WAIT=30,c.register(It);class Tt extends mt{constructor(e,t,r,n,i,s){super(e,t,r,n,i,s),this._blockchain=e,this._mempool=t,this._syncing=!1,this._orphanedBlocks=[],this._requestedChainProof=!1,this._onToDisconnect(n.channel,"chain-proof",e=>this._onChainProof(e)),this._onToDisconnect(n.channel,"get-chain-proof",e=>this._onGetChainProof(e)),this._subscribeTarget()}async syncBlockchain(){this.providesServices(w.CHAIN_PROOF)?(this._syncing=!0,await this._blockchain.getBlock(this._peer.headHash)?this._syncFinished():(this._requestChainProof(),this.fire("sync-chain-proof",this._peer.peerAddress))):this._syncFinished()}_syncFinished(){this._syncing=!1,this._synced=!0,this.requestMempool(),this.fire("sync")}_requestChainProof(){this._requestedChainProof||(this._peer.channel.getChainProof(),this._requestedChainProof=!0,this._peer.channel.expectMessage(Ut.Type.CHAIN_PROOF,()=>{this._peer.channel.close(Qr.GET_CHAIN_PROOF_TIMEOUT,"getChainProof timeout")},Tt.CHAINPROOF_REQUEST_TIMEOUT,Tt.CHAINPROOF_CHUNK_TIMEOUT))}async _onChainProof(e){h.d(Tt,`[CHAIN-PROOF] Received from ${this._peer.peerAddress}: ${e.proof}`),this._requestedChainProof?(this._requestedChainProof=!1,this._syncing&&this.fire("verify-chain-proof",this._peer.peerAddress),await this._blockchain.pushProof(e.proof)?(await this._applyOrphanedBlocks(),this._syncing&&this._syncFinished()):(h.w(Tt,`Invalid chain proof received from ${this._peer.peerAddress} - verification failed`),this._peer.channel.close(Qr.INVALID_CHAIN_PROOF,"Invalid chain proof"))):h.w(Tt,`Unsolicited chain proof received from ${this._peer.peerAddress}`)}async _applyOrphanedBlocks(){for(const e of this._orphanedBlocks)if(await this._blockchain.pushHeader(e)===It.ERR_INVALID){this._peer.channel.close(Qr.INVALID_BLOCK,"received invalid block");break}this._orphanedBlocks=[]}_willRequestHeaders(){return!0}_getBlock(e,t=!1,r=!1){return this._blockchain.getBlock(e,t,r)}_getRawBlock(e,t=!1){return this._blockchain.getRawBlock(e,t)}_getTransaction(e){return this._mempool.getTransaction(e)}async _processHeader(e,t){const r=await this._blockchain.pushHeader(t);r===It.ERR_INVALID?this._peer.channel.close(Qr.INVALID_HEADER,"received invalid header"):r===It.ERR_ORPHAN&&(this._orphanedBlocks.push(t),this._synced&&this._requestChainProof())}async _processTransaction(e,t){await this._mempool.pushTransaction(t)}async _onGetChainProof(e){const t=await this._blockchain.getChainProof();t&&this._peer.channel.chainProof(t)}_onClose(){this._synchronizer.clear(),super._onClose()}get syncing(){return this._syncing}}Tt.CHAINPROOF_REQUEST_TIMEOUT=45e3,Tt.CHAINPROOF_CHUNK_TIMEOUT=1e4,c.register(Tt);class Rt extends _t{constructor(e,t,r){super(e,t,r),this._blockchain=e,this._mempool=t}_newConsensusAgent(e){return new Tt(this._blockchain,this._mempool,this._network.time,e,this._invRequestManager,this._subscription)}_onPeerJoined(e){const t=super._onPeerJoined(e);return this.bubble(t,"sync-chain-proof","verify-chain-proof"),t}get blockchain(){return this._blockchain}get mempool(){return this._mempool}}c.register(Rt);class Nt extends l{constructor(e){super(),this._blockchain=e,this._transactionsByHash=new T,this._transactionSetBySender=new T,this._transactionSetByRecipient=new T}async pushTransaction(e){const t=e.hash();if(this._transactionsByHash.contains(t))return h.v(dt,()=>`Ignoring known transaction ${t.toBase64()}`),dt.ReturnCode.KNOWN;if(this._blockchain.height>=e.validityStartHeight+ae.TRANSACTION_VALIDITY_WINDOW)return h.v(dt,()=>`Ignoring expired transaction ${t.toBase64()}`),dt.ReturnCode.EXPIRED;if(!e.verify())return dt.ReturnCode.INVALID;this._transactionsByHash.put(t,e);const r=this._transactionSetBySender.get(e.sender)||new lt;r.add(e),this._transactionSetBySender.put(e.sender,r);const n=this._transactionSetByRecipient.get(e.recipient)||new R;return n.add(e),this._transactionSetByRecipient.put(e.recipient,n),this.fire("transaction-added",e),dt.ReturnCode.ACCEPTED}getTransaction(e){return this._transactionsByHash.get(e)}getTransactions(e=5e3){return this._transactionsByHash.values().sort((e,t)=>e.compare(t)).slice(0,e)}getPendingTransactions(e){return this.getTransactionsBySender(e)}getTransactionsBySender(e){const t=this._transactionSetBySender.get(e);return t?t.transactions:[]}getTransactionsByRecipient(e){const t=this._transactionSetByRecipient.get(e);return t?t.values():[]}getTransactionsByAddresses(e,t=1/0){const r=[];for(const n of e){const e=this.getTransactionsBySender(n);for(const n of e){if(r.length>=t)return r;r.push(n)}const i=this.getTransactionsByRecipient(n);for(const e of i){if(r.length>=t)return r;r.push(e)}}return r}async changeHead(e,t){await this._evictTransactions(e,t)}removeTransaction(e){this._transactionsByHash.remove(e.hash());const t=this._transactionSetBySender.get(e.sender);t.remove(e),0===t.length&&this._transactionSetBySender.remove(e.sender);const r=this._transactionSetByRecipient.get(e.recipient);r.remove(e),0===r.length&&this._transactionSetByRecipient.remove(e.recipient),this.fire("transaction-removed",e)}evictExceptAddresses(e){const t=new R;t.addAll(e);for(const e of this._transactionsByHash.values())t.contains(e.sender)||t.contains(e.recipient)||this.removeTransaction(e)}async _evictTransactions(e,t){for(const t of this._transactionsByHash.values())e.height>=t.validityStartHeight+ae.TRANSACTION_VALIDITY_WINDOW&&(this.removeTransaction(t),this.fire("transaction-expired",t));for(const r of t){const t=r.hash();this._transactionsByHash.contains(t)&&(this.removeTransaction(r),this.fire("transaction-mined",r,e))}}get length(){return this._transactionsByHash.length}}c.register(Nt);class Bt extends tt{constructor(e){return super(ct.createVolatile()),this._time=e,this._synchronizer=new H,this._mainChain=null,this._init()}async reset(){this._mainChain=await ot.initial(Wr.GENESIS_BLOCK),await this._store.putChainData(Wr.GENESIS_HASH,this._mainChain)}async _init(){return await this.reset(),this}async pushBlock(e){return this._synchronizer.push(()=>this._pushBlock(e))}async _pushBlock(e){if(await this._store.getChainData(e.hash()))return Bt.OK_KNOWN;if(!await e.verify(this._time))return Bt.ERR_INVALID;const t=await this._store.getChainData(e.prevHash);if(this.height<=1)return this._mainChain=await ot.initial(e),await this._store.putChainData(this._mainChain.head.hash(),this._mainChain),h.d(Bt,`Choosing initial block height=${e.height}, hash=${e.hash().toHex()}`),this.fire("head-changed",this.head),await this.fire("block",e.hash()),await this.fire("extended",this.head),Bt.OK_EXTENDED;if(await e.isImmediateSuccessorOf(this.head))return this._mainChain.mainChainSuccessor=e.hash(),await this._store.putChainData(this._mainChain.head.hash(),this._mainChain),this._mainChain=await this._mainChain.nextChainData(e),this._mainChain.onMainChain=!0,await this._store.putChainData(this._mainChain.head.hash(),this._mainChain),h.d(Bt,`Appending block height=${e.height}, hash=${e.hash().toHex()}`),this.fire("head-changed",this.head),await this.fire("block",e.hash()),await this.fire("extended",this.head),Bt.OK_EXTENDED;if(await this.head.isImmediateSuccessorOf(e)){const t=await ot.initial(e);return t.mainChainSuccessor=this.head.hash(),await this._store.putChainData(t.head.hash(),t),this._mainChain=await t.nextChainData(this.head),this._mainChain.onMainChain=!0,await this._store.putChainData(this._mainChain.head.hash(),this._mainChain),h.d(Bt,`Prepending block height=${e.height}, hash=${e.hash().toHex()}`),await this.fire("block",e.hash()),Bt.OK_KNOWN}if(t){const r=await t.nextChainData(e);if(await this._store.putChainData(e.hash(),r),h.d(Bt,`Storing block height=${e.height}, hash=${e.hash().toHex()}`),r.totalWork.gt(this._mainChain.totalWork)){try{await this._rebranch(e.hash(),r)}catch(e){return h.w(Bt,"Error while rebranching",e),Bt.ERR_INCONSISTENT}return Bt.OK_REBRANCHED}return await this.fire("block",e.hash()),Bt.OK_FORKED}return h.w(Bt,`Inconsistency between block height=${e.height}, hash=${e.hash().toHex()} and block height=${this.height}, hash=${this.headHash.toHex()}`),Bt.ERR_INCONSISTENT}async _rebranch(e,t){h.d(Bt,`Rebranching to fork ${e}, height=${t.head.height}, totalDifficulty=${t.totalDifficulty}, totalWork=${t.totalWork}`);const r=[],n=[];let i=t,s=e;for(;!i.onMainChain;)r.push(i),n.push(s),s=i.head.prevHash,i=await this._store.getChainData(s),F.that(!!i,"Failed to find fork predecessor while rebranching");h.v(Bt,()=>`Found common ancestor ${s.toBase64()} ${r.length} blocks up`);const o=i,a=s,c=this._store.synchronousTransaction(!1),u=[];let l=this.headHash,f=this._mainChain;for(;!l.equals(a);)f.onMainChain=!1,f.mainChainSuccessor=null,c.putChainDataSync(l,f),u.push(f),l=f.head.prevHash,f=await this._store.getChainData(l),F.that(!!f,"Failed to find main chain predecessor while rebranching");o.mainChainSuccessor=n[n.length-1],c.putChainDataSync(a,o);for(let e=r.length-1;e>=0;e--){const t=r[e];t.onMainChain=!0,t.mainChainSuccessor=e>0?n[e-1]:null,c.putChainDataSync(n[e],t)}await c.commit();const d=[];for(const e of u)this.fire("block-reverted",e.head),d.push(e.head);const p=[];for(let e=r.length-1;e>=0;e--)this._mainChain=r[e],this.fire("head-changed",this.head,e>0),p.push(this.head);await this.fire("block",e),await this.fire("rebranched",d,p,e)}get head(){return this._mainChain.head}get headHash(){return this.head.hash()}get height(){return this.head.height}}Bt.ERR_INCONSISTENT=-2,Bt.ERR_INVALID=-1,Bt.OK_KNOWN=0,Bt.OK_EXTENDED=1,Bt.OK_REBRANCHED=2,Bt.OK_FORKED=3,c.register(Bt);class Ot extends mt{constructor(e,t,r){super(e.blockchain,e.mempool,e.network.time,t,e.invRequestManager,r),this._consensus=e}async _processBlock(e,t){if(this._peer.headHash.equals(e)){const e=await this._blockchain.pushBlock(t);e===Bt.ERR_INVALID?this._peer.channel.close(Qr.INVALID_BLOCK,"received invalid block"):e===Bt.ERR_INCONSISTENT?this.fire("consensus-failed"):this._syncing&&this._syncFinished()}else await this._blockchain.pushBlock(t)===Bt.ERR_INVALID&&this._peer.channel.close(Qr.INVALID_BLOCK,"received invalid block")}async syncBlockchain(){if(this._syncing=!0,await this._getBlock(this._peer.headHash,!0))this._syncFinished();else try{const e=this._peer.headHash,t=await this.requestBlock(e);await this._processBlock(e,t)}catch(e){this._peer.channel.close(Qr.ABORTED_SYNC,"aborted sync")}}_syncFinished(){this._syncing=!1,this._synced=!0,this.requestMempool(),this.fire("sync")}async _processTransaction(e,t){await this._consensus.mempool.pushTransaction(t)}_getBlock(e,t=!1,r=!1){return this._blockchain.getBlock(e,t,r)}_getRawBlock(e,t=!1){return this._blockchain.getRawBlock(e,t)}_getTransaction(e){return this._consensus.mempool.getTransaction(e)}}c.register(Ot);class Pt extends _t{constructor(e,t,r){super(e,t,r),this._blockchain=e,this._mempool=t,this._failed=!1}_newConsensusAgent(e){return new Ot(this,e,this._subscription)}_onPeerJoined(e){const t=super._onPeerJoined(e);return t.on("consensus-failed",()=>this._onConsensusFailed()),this._agents.length>=3&&this._syncBlockchain(),t}async _onPeerLeft(e){super._onPeerLeft(e),0===this._agents.length&&await this._blockchain.reset()}_syncBlockchain(){this._failed||super._syncBlockchain()}_hasEnoughPeers(e,t){return super._hasEnoughPeers(e,t)&&t>=Pt.MIN_SYNCED_NODES}_onConsensusFailed(){this._failed=!0,this._syncPeer=null,this.fire("consensus-failed")}get blockchain(){return this._blockchain}get mempool(){return this._mempool}}Pt.MIN_SYNCED_NODES=3,c.register(Pt);class xt extends s.JungleDB{static async getFull(e=""){return xt._instance||(xt._instance=await new xt(e,!1)),xt._instance}static async getLight(e=""){return xt._instance||(xt._instance=await new xt(e,!0)),xt._instance}constructor(e,t){return super(xt._getDbName(e,t),xt.VERSION,{maxDbSize:xt.INITIAL_DB_SIZE,autoResize:!0,useWritemap:m.isNodeJs()&&m.isWindows(),minResize:xt.MIN_RESIZE,onUpgradeNeeded:xt._onUpgradeNeeded.bind(null,t)}),this._init()}async _init(){return Re.initPersistent(this),ct.initPersistent(this),Xe.initPersistent(this),await this.connect(),this}static _getDbName(e,t){return e+(t?"light":"full")+"-consensus"}static async _onUpgradeNeeded(e,t,r,n){if(0!==t){if(h.i(xt,`Upgrade needed: version ${t} -> ${r}`),t<7)if(e){const e=n.getObjectStore("Accounts").transaction(!1);await e.truncate();const t=n.getObjectStore("ChainData").transaction(!1);await t.truncate();const r=n.getObjectStore("Block").transaction(!1);await r.truncate(),await s.JungleDB.commitCombined(e,t,r)}else h.i(xt,"Upgrading database, this may take a while..."),await Lt.recomputeTotals(n);t<8&&!e&&(h.i(xt,"Upgrading transaction store, this may take a while..."),await Lt.restoreTransactions(n))}}}xt._instance=null,xt.VERSION=8,xt.INITIAL_DB_SIZE=524288e3,xt.MIN_RESIZE=1<<30,c.register(xt);class Lt{static async recomputeTotals(e){const t=ct.getPersistent(e).synchronousTransaction(!1);try{return await this._recomputeTotals(t,Wr.GENESIS_BLOCK,new J(0),new J(0)),t.commit()}catch(e){throw await t.abort(),e}}static async _recomputeTotals(e,t,r,n){const i=t.hash(),s=await e.getChainData(i);if(!s)return Promise.resolve();const o=r.plus(t.difficulty),a=n.plus(ze.realDifficulty(await t.pow()));s._totalDifficulty=o,s._totalWork=a,e.putChainDataSync(i,s,!1);const c=(await e.getSuccessorBlocks(t)).map(t=>Lt._recomputeTotals(e,t,o,a));return Promise.all(c)}static async restoreTransactions(e){const t=ct.getPersistent(e),r=Xe.getPersistent(e);let n=r.transaction(!1);const i=await t.getHead(),s=(await t.getBlock(i)).height;try{let e=Wr.GENESIS_HASH,i=0;for(;e;){const o=await t.getChainData(e,!0);e=o.mainChainSuccessor,i=o.head.height,await n.put(o.head),i%1e3==0&&(await n.commit(),n=r.transaction(!1),h.i(Lt,`Upgrade at ${Math.round(i/s*100)}% (block ${i}/${s})`))}i%1e3!=0&&(await n.commit(),h.i(Lt,`Upgrade at ${Math.round(i/s*100)}% (block ${i}/${s})`)),h.i(Lt,"Upgrade finished")}catch(e){throw await n.abort(),e}}}class Dt{static async full(e=an.getDefault()){e.services=new w(w.PROVIDES_FULL,w.ACCEPTS_FULL),await e.initPersistent();const t=new S,r=await xt.getFull(`${Wr.NETWORK_NAME}-`),n=await Me.getPersistent(r),i=await Xe.getPersistent(r),s=await bt.getPersistent(r,n,t,i),o=new dt(s,n),a=new fn(s,e,t);return new vt(s,o,a)}static async light(e=an.getDefault()){e.services=new w(w.PROVIDES_LIGHT,w.ACCEPTS_LIGHT),await e.initPersistent();const t=new S,r=await xt.getLight(`${Wr.NETWORK_NAME}-`),n=await Me.getPersistent(r),i=await Et.getPersistent(r,n,t),s=new dt(i,n),o=new fn(i,e,t);return new Ct(i,s,o)}static async nano(e=an.getDefault()){e.services=new w(w.PROVIDES_NANO,w.ACCEPTS_NANO),await e.initPersistent();const t=new S,r=await new It(t),n=new Nt(r),i=new fn(r,e,t);return new Rt(r,n,i)}static async pico(e=an.getDefault()){e.services=new w(w.PROVIDES_PICO,w.ACCEPTS_PICO),await e.initPersistent();const t=new S,r=await new Bt(t),n=new Nt(r),i=new fn(r,e,t);return new Pt(r,n,i)}static async volatileFull(e=an.getDefault()){e.services=new w(w.PROVIDES_FULL,w.ACCEPTS_FULL),await e.initVolatile();const t=new S,r=await Me.createVolatile(),n=await Xe.createVolatile(),i=await bt.createVolatile(r,t,n),s=new dt(i,r),o=new fn(i,e,t);return new vt(i,s,o)}static async volatileLight(e=an.getDefault()){e.services=new w(w.PROVIDES_LIGHT,w.ACCEPTS_LIGHT),await e.initVolatile();const t=new S,r=await Me.createVolatile(),n=await Et.createVolatile(r,t),i=new dt(n,r),s=new fn(n,e,t);return new Ct(n,i,s)}static async volatileNano(e=an.getDefault()){e.services=new w(w.PROVIDES_NANO,w.ACCEPTS_NANO),await e.initVolatile();const t=new S,r=await new It(t),n=new Nt(r),i=new fn(r,e,t);return new Rt(r,n,i)}static async volatilePico(e=an.getDefault()){e.services=new w(w.PROVIDES_PICO,w.ACCEPTS_PICO),await e.initVolatile();const t=new S,r=await new Bt(t),n=new Nt(r),i=new fn(r,e,t);return new Pt(r,n,i)}}c.register(Dt);class Mt{}Mt.DUMB=0,Mt.WSS=1,Mt.RTC=2,Mt.WS=4,c.register(Mt);class Ut{constructor(e){if(!ee.isUint64(e))throw new Error("Malformed type");this._type=e}static peekType(e){const t=e.readPos;e.readPos=4;const r=e.readVarUint();return e.readPos=t,r}static peekLength(e){const t=e.readPos;e.readPos=4,e.readVarUint();const r=e.readUint32();return e.readPos=t,r}static unserialize(e){F.that(0===e.readPos,"Message.unserialize() requires buf.readPos == 0");const t=e.readUint32(),r=e.readVarUint();e.readUint32();const n=e.readUint32();if(t!==Ut.MAGIC)throw new Error("Malformed magic");if(Ut._writeChecksum(r,e,0),n!==Z.compute(e))throw new Error("Invalid checksum");return new Ut(r)}serialize(e){return e=e||new j(this.serializedSize),F.that(0===e.writePos,"Message.serialize() requires buf.writePos == 0"),e.writeUint32(Ut.MAGIC),e.writeVarUint(this._type),e.writeUint32(this.serializedSize),e.writeUint32(0),e}get serializedSize(){return 4+j.varUintSize(this._type)+4+4}_setChecksum(e){const t=Z.compute(e);Ut._writeChecksum(this._type,e,t)}static _writeChecksum(e,t,r){const n=t.writePos;t.writePos=4+j.varUintSize(e)+4,t.writeUint32(r),t.writePos=n}get type(){return this._type}toString(){return`Message{type=${this.type}, size=${this.serializedSize}}`}}Ut.MAGIC=1107566658,Ut.Type={VERSION:0,INV:1,GET_DATA:2,GET_HEADER:3,NOT_FOUND:4,GET_BLOCKS:5,BLOCK:6,HEADER:7,TX:8,MEMPOOL:9,REJECT:10,SUBSCRIBE:11,ADDR:20,GET_ADDR:21,PING:22,PONG:23,SIGNAL:30,GET_CHAIN_PROOF:40,CHAIN_PROOF:41,GET_ACCOUNTS_PROOF:42,ACCOUNTS_PROOF:43,GET_ACCOUNTS_TREE_CHUNK:44,ACCOUNTS_TREE_CHUNK:45,GET_TRANSACTIONS_PROOF:47,GET_TRANSACTIONS_PROOF_BY_ADDRESSES:47,TRANSACTIONS_PROOF:48,GET_TRANSACTION_RECEIPTS:49,GET_TRANSACTION_RECEIPTS_BY_ADDRESS:49,TRANSACTION_RECEIPTS:50,GET_BLOCK_PROOF:51,BLOCK_PROOF:52,GET_TRANSACTIONS_PROOF_BY_HASHES:53,GET_TRANSACTION_RECEIPTS_BY_HASHES:54,GET_BLOCK_PROOF_AT:55,GET_HEAD:60,HEAD:61,VERACK:90},c.register(Ut);class Kt extends Ut{constructor(e){if(super(Ut.Type.ADDR),!e||!ee.isUint16(e.length)||e.length>Kt.ADDRESSES_MAX_COUNT||e.some(e=>!(e instanceof xr)))throw new Error("Malformed addresses");this._addresses=e}static unserialize(e){Ut.unserialize(e);const t=e.readUint16();if(t>Kt.ADDRESSES_MAX_COUNT)throw new Error("Malformed count");const r=new Array(t);for(let n=0;n<t;n++)r[n]=xr.unserialize(e);return new Kt(r)}serialize(e){e=e||new j(this.serializedSize),super.serialize(e),e.writeUint16(this._addresses.length);for(const t of this._addresses)t.serialize(e);return super._setChecksum(e),e}get serializedSize(){let e=super.serializedSize+2;for(const t of this._addresses)e+=t.serializedSize;return e}get addresses(){return this._addresses}toString(){return`AddrMessage{size=${this._addresses.length}}`}}Kt.ADDRESSES_MAX_COUNT=1e3,c.register(Kt);class Ft extends Ut{constructor(e){super(Ut.Type.BLOCK),this._block=e}static unserialize(e){Ut.unserialize(e);const t=Je.unserialize(e);return new Ft(t)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._block.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._block.serializedSize}get block(){return this._block}toString(){return`BlockMessage{height=${this._block.height}, hash=${this._block.hash()}}`}}c.register(Ft);class zt extends Ut{constructor(e){super(Ut.Type.BLOCK),this._block=e}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),e.write(this._block),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._block.length}get block(){return Je.unserialize(new j(this._block))}}c.register(zt);class jt extends Ut{constructor(e,t,r){if(super(Ut.Type.GET_ADDR),!ee.isUint8(e))throw new Error("Malformed protocolMask");if(!ee.isUint32(t))throw new Error("Malformed serviceMask");if(!ee.isUint16(r))throw new Error("Malformed maxResults");this._protocolMask=e,this._serviceMask=t,this._maxResults=r}static unserialize(e){Ut.unserialize(e);const t=e.readUint8(),r=e.readUint32();let n=$r.NUM_ADDR_PER_REQUEST;return e.readPos!==e.byteLength&&(n=e.readUint16()),new jt(t,r,n)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),e.writeUint8(this._protocolMask),e.writeUint32(this._serviceMask),e.writeUint16(this._maxResults),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+1+4+2}get protocolMask(){return this._protocolMask}get serviceMask(){return this._serviceMask}get maxResults(){return this._maxResults}toString(){return`GetAddrMessage{protocol=${this._protocolMask}, services=${this._serviceMask}, maxResults=${this._maxResults}}`}}c.register(jt);class Ht extends Ut{constructor(e,t=Gt.VECTORS_MAX_COUNT,r=Ht.Direction.FORWARD){if(super(Ut.Type.GET_BLOCKS),!e||!ee.isUint16(e.length)||e.length>Ht.LOCATORS_MAX_COUNT||e.some(e=>!ue.isHash(e)))throw new Error("Malformed locators");if(!ee.isUint16(t))throw new Error("Malformed maxInvSize");if(!ee.isUint8(r))throw new Error("Malformed direction");this._locators=e,this._maxInvSize=t,this._direction=r}static unserialize(e){Ut.unserialize(e);const t=e.readUint16();if(t>Ht.LOCATORS_MAX_COUNT)throw new Error("Malformed count");const r=new Array(t);for(let n=0;n<t;n++)r[n]=ue.unserialize(e);const n=e.readUint16(),i=e.readUint8();return new Ht(r,n,i)}serialize(e){e=e||new j(this.serializedSize),super.serialize(e),e.writeUint16(this._locators.length);for(const t of this._locators)t.serialize(e);return e.writeUint16(this._maxInvSize),e.writeUint8(this._direction),super._setChecksum(e),e}get serializedSize(){let e=super.serializedSize+2+1+2;for(const t of this._locators)e+=t.serializedSize;return e}get locators(){return this._locators}get direction(){return this._direction}get maxInvSize(){return this._maxInvSize}toString(){return`GetBlocksMessage{direction=${this._direction===Ht.Direction.FORWARD?"forward":"backward"}, maxInvSize=${this._maxInvSize}}`}}Ht.Direction={FORWARD:1,BACKWARD:2},Ht.LOCATORS_MAX_COUNT=128,c.register(Ht);class qt extends Ut{constructor(e){super(Ut.Type.HEADER),this._header=e}static unserialize(e){Ut.unserialize(e);const t=Ue.unserialize(e);return new qt(t)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._header.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._header.serializedSize}get header(){return this._header}toString(){return`HeaderMessage{height=${this._header.height}, hash=${this._header.hash()}}`}}c.register(qt);class Vt{static fromBlock(e){const t=e.hash();return new Vt(Vt.Type.BLOCK,t)}static fromHeader(e){const t=e.hash();return new Vt(Vt.Type.BLOCK,t)}static fromTransaction(e){const t=e.hash();return new Vt(Vt.Type.TRANSACTION,t)}constructor(e,t){if(!ue.isHash(t))throw new Error("Malformed hash");this._type=e,this._hash=t}static unserialize(e){const t=Vt.Type.unserialize(e),r=ue.unserialize(e);return new Vt(t,r)}serialize(e){return(e=e||new j(this.serializedSize)).writeUint32(this._type),this._hash.serialize(e),e}equals(e){return e instanceof Vt&&this._type===e.type&&this._hash.equals(e.hash)}hashCode(){return`${this._type}|${this._hash.toBase64()}`}toString(){return`InvVector{type=${this._type}, hash=${this._hash}}`}get serializedSize(){return 4+this._hash.serializedSize}get type(){return this._type}get hash(){return this._hash}}Vt.Type={ERROR:0,TRANSACTION:1,BLOCK:2,unserialize:function(e){return e.readUint32()}},c.register(Vt);class Gt extends Ut{constructor(e,t){if(super(e),!Array.isArray(t)||!ee.isUint16(t.length)||t.length>Gt.VECTORS_MAX_COUNT||t.some(e=>!(e instanceof Vt)))throw new Error("Malformed vectors");this._vectors=t}serialize(e){e=e||new j(this.serializedSize),super.serialize(e),e.writeUint16(this._vectors.length);for(const t of this._vectors)t.serialize(e);return super._setChecksum(e),e}get serializedSize(){let e=super.serializedSize+2;for(const t of this._vectors)e+=t.serializedSize;return e}get vectors(){return this._vectors}toString(e="InventoryMessage"){return`${e}{transactions=${this._vectors.filter(e=>e.type===Vt.Type.TRANSACTION).length}, blocks=${this._vectors.filter(e=>e.type===Vt.Type.BLOCK).length}}`}}Gt.VECTORS_MAX_COUNT=1e3,c.register(Gt);class Wt extends Gt{constructor(e){super(Ut.Type.INV,e)}static unserialize(e){Ut.unserialize(e);const t=e.readUint16();if(t>Gt.VECTORS_MAX_COUNT)throw new Error("Malformed count");const r=new Array(t);for(let n=0;n<t;n++)r[n]=Vt.unserialize(e);return new Wt(r)}toString(){return super.toString("InvMessage")}}c.register(Wt);class Qt extends Gt{constructor(e){super(Ut.Type.GET_DATA,e)}static unserialize(e){Ut.unserialize(e);const t=e.readUint16();if(t>Gt.VECTORS_MAX_COUNT)throw new Error("Malformed count");const r=new Array(t);for(let n=0;n<t;n++)r[n]=Vt.unserialize(e);return new Qt(r)}toString(){return super.toString("GetDataMessage")}}c.register(Qt);class Yt extends Gt{constructor(e){super(Ut.Type.GET_HEADER,e)}static unserialize(e){Ut.unserialize(e);const t=e.readUint16();if(t>Gt.VECTORS_MAX_COUNT)throw new Error("Malformed count");const r=new Array(t);for(let n=0;n<t;n++)r[n]=Vt.unserialize(e);return new Yt(r)}toString(){return super.toString("GetHeaderMessage")}}c.register(Yt);class Xt extends Gt{constructor(e){super(Ut.Type.NOT_FOUND,e)}static unserialize(e){Ut.unserialize(e);const t=e.readUint16();if(t>Gt.VECTORS_MAX_COUNT)throw new Error("Malformed count");const r=new Array(t);for(let n=0;n<t;n++)r[n]=Vt.unserialize(e);return new Xt(r)}toString(){return super.toString("NotFoundMessage")}}c.register(Xt);class $t extends Ut{constructor(){super(Ut.Type.MEMPOOL)}static unserialize(e){return Ut.unserialize(e),new $t}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize}toString(){return"MempoolMessage{}"}}c.register($t);class Zt extends Ut{constructor(e){if(super(Ut.Type.PING),!ee.isUint32(e))throw new Error("Malformed nonce");this._nonce=e}static unserialize(e){Ut.unserialize(e);const t=e.readUint32();return new Zt(t)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),e.writeUint32(this._nonce),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+4}get nonce(){return this._nonce}toString(){return`PingMessage{nonce=${this._nonce}}`}}c.register(Zt);class Jt extends Ut{constructor(e){if(super(Ut.Type.PONG),!ee.isUint32(e))throw new Error("Malformed nonce");this._nonce=e}static unserialize(e){Ut.unserialize(e);const t=e.readUint32();return new Jt(t)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),e.writeUint32(this._nonce),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+4}get nonce(){return this._nonce}toString(){return`PongMessage{nonce=${this._nonce}}`}}c.register(Jt);class er extends Ut{constructor(e,t,r,n=new Uint8Array(0)){if(super(Ut.Type.REJECT),!ee.isUint64(e))throw new Error("Malformed type");if(!ee.isUint8(t))throw new Error("Malformed code");if(oe.isMultibyte(r)||r.length>255)throw new Error("Malformed reason");if(!(n instanceof Uint8Array&&ee.isUint16(n.byteLength)))throw new Error("Malformed extraData");this._messageType=e,this._code=t,this._reason=r,this._extraData=n}static unserialize(e){Ut.unserialize(e);const t=e.readVarUint(),r=e.readUint8(),n=e.readVarLengthString(),i=e.readUint16(),s=e.read(i);return new er(t,r,n,s)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),e.writeVarUint(this._messageType),e.writeUint8(this._code),e.writeVarLengthString(this._reason),e.writeUint16(this._extraData.byteLength),e.write(this._extraData),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+j.varUintSize(this._messageType)+1+j.varLengthStringSize(this._reason)+2+this._extraData.byteLength}get messageType(){return this._messageType}get code(){return this._code}get reason(){return this._reason}get extraData(){return this._extraData}toString(){return`RejectMessage{type=${this._messageType}, code=${this._code}, reason=${this._reason}}`}}er.Code={REJECT_MALFORMED:1,REJECT_INVALID:16,REJECT_OBSOLETE:17,REJECT_DOUBLE:18,REJECT_DUST:65,REJECT_INSUFFICIENT_FEE:66},c.register(er);class tr extends Ut{constructor(e,t,r,n,i=0,s=new Uint8Array(0),o,a){if(super(Ut.Type.SIGNAL),!(e instanceof Pr))throw new Error("Malformed senderId");if(!(t instanceof Pr))throw new Error("Malformed recipientId");if(!ee.isUint32(r))throw new Error("Malformed nonce");if(!ee.isUint8(n))throw new Error("Malformed ttl");if(!ee.isUint8(i))throw new Error("Malformed flags");if(!(s instanceof Uint8Array&&ee.isUint16(s.byteLength)))throw new Error("Malformed payload");const c=s.byteLength>0;if(c&&!(a instanceof ye))throw new Error("Malformed signature");if(c&&!(o instanceof fe))throw new Error("Malformed public key");this._senderId=e,this._recipientId=t,this._nonce=r,this._ttl=n,this._flags=i,this._payload=s,this._senderPubKey=c?o:void 0,this._signature=c?a:void 0}static unserialize(e){Ut.unserialize(e);const t=Pr.unserialize(e),r=Pr.unserialize(e),n=e.readUint32(),i=e.readUint8(),s=e.readUint8(),o=e.readUint16(),a=e.read(o),c=o>0?fe.unserialize(e):void 0,u=o>0?ye.unserialize(e):void 0;return new tr(t,r,n,i,s,a,c,u)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._senderId.serialize(e),this._recipientId.serialize(e),e.writeUint32(this._nonce),e.writeUint8(this._ttl),e.writeUint8(this._flags),e.writeUint16(this._payload.byteLength),e.write(this._payload),this._payload.byteLength>0&&(this._senderPubKey.serialize(e),this._signature.serialize(e)),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._senderId.serializedSize+this._recipientId.serializedSize+4+1+1+2+this._payload.byteLength+(this._payload.byteLength>0?this._senderPubKey.serializedSize:0)+(this._payload.byteLength>0?this._signature.serializedSize:0)}verifySignature(){return!!this._signature&&this._signature.verify(this._senderPubKey,this._payload)&&this._senderId.equals(this._senderPubKey.toPeerId())}get senderId(){return this._senderId}get recipientId(){return this._recipientId}get nonce(){return this._nonce}get ttl(){return this._ttl}get flags(){return this._flags}get payload(){return this._payload}get signature(){return this._signature}get senderPubKey(){return this._senderPubKey}hasPayload(){return this._payload.byteLength>0}isUnroutable(){return 0!=(this._flags&tr.Flag.UNROUTABLE)}isTtlExceeded(){return 0!=(this._flags&tr.Flag.TTL_EXCEEDED)}toString(){return`SignalMessage{sender=${this._senderId}, recipient=${this._recipientId}, nonce=${this._nonce}, ttl=${this._ttl}, flags=${this._flags}}`}}tr.Flag={UNROUTABLE:1,TTL_EXCEEDED:2},c.register(tr);class rr extends Ut{constructor(e){super(Ut.Type.SUBSCRIBE),this._subscription=e}static unserialize(e){Ut.unserialize(e);const t=je.unserialize(e);return new rr(t)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._subscription.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._subscription.serializedSize}get subscription(){return this._subscription}toString(){return`SubscribeMessage{${this._subscription}}`}}c.register(rr);class nr extends Ut{constructor(e,t){super(Ut.Type.TX),this._transaction=e,this._accountsProof=t}static unserialize(e){Ut.unserialize(e);const t=He.unserialize(e);if(1===e.readUint8()){const r=Oe.unserialize(e);return new nr(t,r)}return new nr(t)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._transaction.serialize(e),e.writeUint8(this._accountsProof?1:0),this._accountsProof&&this._accountsProof.serialize(e),super._setChecksum(e),e}get serializedSize(){let e=super.serializedSize+this._transaction.serializedSize+1;return this._accountsProof&&(e+=this._accountsProof.serializedSize),e}get transaction(){return this._transaction}get hasAccountsProof(){return!!this._accountsProof}get accountsProof(){return this._accountsProof}toString(){return`TxMessage{hash=${this._transaction.hash()}}`}}c.register(nr);class ir extends Ut{constructor(e,t,r,n,i,s){if(super(Ut.Type.VERSION),!ee.isUint32(e))throw new Error("Malformed version");if(!(t instanceof xr))throw new Error("Malformed peerAddress");if(!ue.isHash(r))throw new Error("Malformed genesisHash");if(!ue.isHash(n))throw new Error("Malformed headHash");if(!(i instanceof Uint8Array)||32!==i.byteLength)throw new Error("Malformed challenge nonce");if(s&&("string"!=typeof s||oe.isMultibyte(s)||!ee.isUint8(s.length)))throw new Error("Malformed user agent");this._version=e,this._peerAddress=t,this._genesisHash=r,this._headHash=n,this._challengeNonce=i,this._userAgent=s}static unserialize(e){Ut.unserialize(e);const t=e.readUint32(),r=xr.unserialize(e),n=ue.unserialize(e),i=ue.unserialize(e),s=e.read(ir.CHALLENGE_SIZE),o=e.readPos!==e.byteLength?e.readVarLengthString():void 0;return new ir(t,r,n,i,s,o)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),e.writeUint32(this._version),this._peerAddress.serialize(e),this._genesisHash.serialize(e),this._headHash.serialize(e),e.write(this._challengeNonce),this._userAgent&&e.writeVarLengthString(this._userAgent),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+4+this._peerAddress.serializedSize+this._genesisHash.serializedSize+this._headHash.serializedSize+ir.CHALLENGE_SIZE+(this._userAgent?j.varLengthStringSize(this._userAgent):0)}get version(){return this._version}get peerAddress(){return this._peerAddress}get genesisHash(){return this._genesisHash}get headHash(){return this._headHash}get challengeNonce(){return this._challengeNonce}get userAgent(){return this._userAgent}toString(){return`VersionMessage{version=${this._version}, peer=${this._peerAddress}, genesis=${this._genesisHash}, head=${this._headHash}, userAgent=${this._userAgent}}`}}ir.CHALLENGE_SIZE=32,c.register(ir);class sr extends Ut{constructor(e,t){super(Ut.Type.VERACK),this._publicKey=e,this._signature=t}static unserialize(e){Ut.unserialize(e);const t=fe.unserialize(e),r=ye.unserialize(e);return new sr(t,r)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this.publicKey.serialize(e),this.signature.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._publicKey.serializedSize+this._signature.serializedSize}get publicKey(){return this._publicKey}get signature(){return this._signature}toString(){return"VerAckMessage{}"}}c.register(sr);class or extends Ut{constructor(e,t=null){if(super(Ut.Type.ACCOUNTS_PROOF),!(e instanceof ue))throw new Error("Malformed blockHash");if(t&&!(t instanceof Oe))throw new Error("Malformed proof");this._blockHash=e,this._accountsProof=t}static unserialize(e){Ut.unserialize(e);const t=ue.unserialize(e);let r=null;return 0!==e.readUint8()&&(r=Oe.unserialize(e)),new or(t,r)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._blockHash.serialize(e),e.writeUint8(this.hasProof()?1:0),this.hasProof()&&this._accountsProof.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+1+this._blockHash.serializedSize+(this.hasProof()?this._accountsProof.serializedSize:0)}hasProof(){return!!this._accountsProof}get blockHash(){return this._blockHash}get proof(){return this._accountsProof}}c.register(or);class ar extends Ut{constructor(e,t){if(super(Ut.Type.GET_ACCOUNTS_PROOF),!(e&&e instanceof ue))throw new Error("Malformed block hash");if(!t||!ee.isUint16(t.length)||t.length<1||t.length>ar.ADDRESSES_MAX_COUNT||t.some(e=>!(e instanceof we)))throw new Error("Malformed addresses");this._blockHash=e,this._addresses=t}static unserialize(e){Ut.unserialize(e);const t=ue.unserialize(e),r=e.readUint16(),n=[];for(let t=0;t<r;t++)n.push(we.unserialize(e));return new ar(t,n)}serialize(e){e=e||new j(this.serializedSize),super.serialize(e),this._blockHash.serialize(e),e.writeUint16(this._addresses.length);for(const t of this._addresses)t.serialize(e);return super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._blockHash.serializedSize+2+this._addresses.reduce((e,t)=>e+t.serializedSize,0)}get addresses(){return this._addresses}get blockHash(){return this._blockHash}}ar.ADDRESSES_MAX_COUNT=256,c.register(ar);class cr extends Ut{constructor(e){if(super(Ut.Type.CHAIN_PROOF),!(e instanceof st))throw new Error("Malformed chainProof");this._proof=e}static unserialize(e){Ut.unserialize(e);const t=st.unserialize(e);return new cr(t)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._proof.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._proof.serializedSize}get proof(){return this._proof}}c.register(cr);class ur extends Ut{constructor(){super(Ut.Type.GET_CHAIN_PROOF)}static unserialize(e){return Ut.unserialize(e),new ur}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize}}c.register(ur);class hr extends Ut{constructor(e,t=null){if(super(Ut.Type.ACCOUNTS_TREE_CHUNK),!(e instanceof ue))throw new Error("Malformed blockHash");if(t&&!(t instanceof Pe))throw new Error("Malformed chunk");this._blockHash=e,this._accountsTreeChunk=t}static unserialize(e){Ut.unserialize(e);const t=ue.unserialize(e);let r=null;return 0!==e.readUint8()&&(r=Pe.unserialize(e)),new hr(t,r)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._blockHash.serialize(e),e.writeUint8(this.hasChunk()?1:0),this.hasChunk()&&this._accountsTreeChunk.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+1+this._blockHash.serializedSize+(this.hasChunk()?this._accountsTreeChunk.serializedSize:0)}hasChunk(){return!!this._accountsTreeChunk}get blockHash(){return this._blockHash}get chunk(){return this._accountsTreeChunk}}c.register(hr);class lr extends Ut{constructor(e,t){if(super(Ut.Type.GET_ACCOUNTS_TREE_CHUNK),!(e&&e instanceof ue))throw new Error("Malformed block hash");if(oe.isMultibyte(t)||!ee.isUint8(t.length))throw new Error("Malformed start prefix");this._blockHash=e,this._startPrefix=t}static unserialize(e){Ut.unserialize(e);const t=ue.unserialize(e),r=e.readVarLengthString();return new lr(t,r)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._blockHash.serialize(e),e.writeVarLengthString(this._startPrefix),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._blockHash.serializedSize+j.varLengthStringSize(this._startPrefix)}get blockHash(){return this._blockHash}get startPrefix(){return this._startPrefix}}c.register(lr);class fr extends Ut{constructor(e,t=null){if(super(Ut.Type.TRANSACTIONS_PROOF),!(e instanceof ue))throw new Error("Malformed blockHash");if(t&&!(t instanceof We))throw new Error("Malformed proof");this._blockHash=e,this._proof=t}static unserialize(e){Ut.unserialize(e);const t=ue.unserialize(e);let r=null;return 0!==e.readUint8()&&(r=We.unserialize(e)),new fr(t,r)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._blockHash.serialize(e),e.writeUint8(this.hasProof()?1:0),this.hasProof()&&this._proof.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+1+this._blockHash.serializedSize+(this.hasProof()?this._proof.serializedSize:0)}hasProof(){return!!this._proof}get blockHash(){return this._blockHash}get proof(){return this._proof}}c.register(fr);class dr extends Ut{constructor(e,t){if(super(Ut.Type.GET_TRANSACTIONS_PROOF_BY_ADDRESSES),!(e&&e instanceof ue))throw new Error("Malformed block hash");if(!Array.isArray(t)||!ee.isUint16(t.length)||t.length>dr.ADDRESSES_MAX_COUNT||t.some(e=>!(e instanceof we)))throw new Error("Malformed addresses");this._blockHash=e,this._addresses=t}static unserialize(e){Ut.unserialize(e);const t=ue.unserialize(e),r=e.readUint16();if(r>dr.ADDRESSES_MAX_COUNT)throw new Error("Malformed count");const n=new Array(r);for(let t=0;t<r;t++)n[t]=we.unserialize(e);return new dr(t,n)}serialize(e){e=e||new j(this.serializedSize),super.serialize(e),this._blockHash.serialize(e),e.writeUint16(this._addresses.length);for(const t of this._addresses)t.serialize(e);return super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._blockHash.serializedSize+2+this._addresses.reduce((e,t)=>e+t.serializedSize,0)}get addresses(){return this._addresses}get blockHash(){return this._blockHash}}dr.ADDRESSES_MAX_COUNT=255,c.register(dr);class pr extends Ut{constructor(e,t){if(super(Ut.Type.GET_TRANSACTIONS_PROOF_BY_HASHES),!(e&&e instanceof ue))throw new Error("Malformed block hash");if(!Array.isArray(t)||0===t.length||!ee.isUint16(t.length)||t.length>pr.HASHES_MAX_COUNT||t.some(e=>!(e instanceof ue)))throw new Error("Malformed hashes");this._blockHash=e,this._hashes=t}static unserialize(e){Ut.unserialize(e);const t=ue.unserialize(e),r=e.readUint16();if(r>pr.HASHES_MAX_COUNT)throw new Error("Malformed count");const n=new Array(r);for(let t=0;t<r;t++)n[t]=ue.unserialize(e);return new pr(t,n)}serialize(e){e=e||new j(this.serializedSize),super.serialize(e),this._blockHash.serialize(e),e.writeUint16(this._hashes.length);for(const t of this._hashes)t.serialize(e);return super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._blockHash.serializedSize+2+this._hashes.reduce((e,t)=>e+t.serializedSize,0)}get hashes(){return this._hashes}get blockHash(){return this._blockHash}}pr.HASHES_MAX_COUNT=255,c.register(pr);class Ar extends Ut{constructor(e,t=0){if(super(Ut.Type.GET_TRANSACTION_RECEIPTS_BY_ADDRESS),!(e instanceof we))throw new Error("Malformed address");if(!ee.isUint32(t))throw new Error("Malformed offset");this._address=e,this._offset=t}static unserialize(e){Ut.unserialize(e);const t=we.unserialize(e),r=e.readUint32();return new Ar(t,r)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._address.serialize(e),e.writeUint32(this._offset),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._address.serializedSize+4}get address(){return this._address}get offset(){return this._offset}}c.register(Ar);class gr extends Ut{constructor(e){if(super(Ut.Type.GET_TRANSACTION_RECEIPTS_BY_HASHES),!Array.isArray(e)||0===e.length||!ee.isUint16(e.length)||e.length>gr.HASHES_MAX_COUNT||e.some(e=>!(e instanceof ue)))throw new Error("Malformed hashes");this._hashes=e}static unserialize(e){Ut.unserialize(e);const t=e.readUint16();if(t>gr.HASHES_MAX_COUNT)throw new Error("Malformed count");const r=new Array(t);for(let n=0;n<t;n++)r[n]=ue.unserialize(e);return new gr(r)}serialize(e){e=e||new j(this.serializedSize),super.serialize(e),e.writeUint16(this._hashes.length);for(const t of this._hashes)t.serialize(e);return super._setChecksum(e),e}get serializedSize(){return super.serializedSize+2+this._hashes.reduce((e,t)=>e+t.serializedSize,0)}get hashes(){return this._hashes}}gr.HASHES_MAX_COUNT=255,c.register(gr);class yr extends Ut{constructor(e=null){if(super(Ut.Type.TRANSACTION_RECEIPTS),e&&(!Array.isArray(e)||!ee.isUint16(e.length)||e.length>yr.RECEIPTS_MAX_COUNT||e.some(e=>!(e instanceof Ze))))throw new Error("Malformed receipts");this._receipts=e}static unserialize(e){Ut.unserialize(e);let t=null;if(0!==e.readUint8()){const r=e.readUint16();if(r>yr.RECEIPTS_MAX_COUNT)throw new Error("Malformed count");t=new Array(r);for(let n=0;n<r;n++)t[n]=Ze.unserialize(e)}return new yr(t)}serialize(e){if(e=e||new j(this.serializedSize),super.serialize(e),e.writeUint8(this.hasReceipts()?1:0),this.hasReceipts()){e.writeUint16(this._receipts.length);for(const t of this._receipts)t.serialize(e)}return super._setChecksum(e),e}get serializedSize(){return super.serializedSize+1+(this.hasReceipts()?2+this._receipts.reduce((e,t)=>e+t.serializedSize,0):0)}hasReceipts(){return!!this._receipts}get receipts(){return this._receipts}}c.register(yr),yr.RECEIPTS_MAX_COUNT=500;class mr extends Ut{constructor(e,t){if(super(Ut.Type.GET_BLOCK_PROOF),!(e instanceof ue))throw new Error("Malformed blockHashToProve");if(!(t instanceof ue))throw new Error("Malformed knownBlockHash");this._blockHashToProve=e,this._knownBlockHash=t}static unserialize(e){Ut.unserialize(e);const t=ue.unserialize(e),r=ue.unserialize(e);return new mr(t,r)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._blockHashToProve.serialize(e),this._knownBlockHash.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._blockHashToProve.serializedSize+this._knownBlockHash.serializedSize}get blockHashToProve(){return this._blockHashToProve}get knownBlockHash(){return this._knownBlockHash}}c.register(mr);class _r extends Ut{constructor(e,t){if(super(Ut.Type.GET_BLOCK_PROOF_AT),!ee.isUint32(e))throw new Error("Malformed blockHeightToProve");if(!(t instanceof ue))throw new Error("Malformed knownBlockHash");this._blockHeightToProve=e,this._knownBlockHash=t}static unserialize(e){Ut.unserialize(e);const t=e.readUint32(),r=ue.unserialize(e);return new _r(t,r)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),e.writeUint32(this._blockHeightToProve),this._knownBlockHash.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+4+this._knownBlockHash.serializedSize}get blockHeightToProve(){return this._blockHeightToProve}get knownBlockHash(){return this._knownBlockHash}}c.register(_r);class br extends Ut{constructor(e){if(super(Ut.Type.BLOCK_PROOF),e&&!(e instanceof rt))throw new Error("Malformed proof");this._proof=e}static unserialize(e){if(Ut.unserialize(e),1===e.readUint8()){const t=rt.unserialize(e);return new br(t)}return new br}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._proof?(e.writeUint8(1),this._proof.serialize(e)):e.writeUint8(0),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+1+(this._proof?this._proof.serializedSize:0)}hasProof(){return!!this._proof}get proof(){return this._proof}}c.register(br);class wr extends Ut{constructor(){super(Ut.Type.GET_HEAD)}static unserialize(e){return Ut.unserialize(e),new wr}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),super._setChecksum(e),e}toString(){return"GetHeadMessage{}"}}c.register(wr);class vr extends Ut{constructor(e){super(Ut.Type.HEAD),this._header=e}static unserialize(e){Ut.unserialize(e);const t=Ue.unserialize(e);return new vr(t)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),this._header.serialize(e),super._setChecksum(e),e}get serializedSize(){return super.serializedSize+this._header.serializedSize}get header(){return this._header}toString(){return`HeadMessage{height=${this._header.height}, hash=${this._header.hash()}}`}}c.register(vr);class Er{static peekType(e){return Ut.peekType(e)}static parse(e){const t=Ut.peekType(e),r=Er.CLASSES[t];if(!r||!r.unserialize)throw new Error(`Invalid message type: ${t}`);return r.unserialize(e)}}Er.CLASSES={},Er.CLASSES[Ut.Type.VERSION]=ir,Er.CLASSES[Ut.Type.INV]=Wt,Er.CLASSES[Ut.Type.GET_DATA]=Qt,Er.CLASSES[Ut.Type.GET_HEADER]=Yt,Er.CLASSES[Ut.Type.NOT_FOUND]=Xt,Er.CLASSES[Ut.Type.BLOCK]=Ft,Er.CLASSES[Ut.Type.HEADER]=qt,Er.CLASSES[Ut.Type.TX]=nr,Er.CLASSES[Ut.Type.GET_BLOCKS]=Ht,Er.CLASSES[Ut.Type.MEMPOOL]=$t,Er.CLASSES[Ut.Type.REJECT]=er,Er.CLASSES[Ut.Type.SUBSCRIBE]=rr,Er.CLASSES[Ut.Type.ADDR]=Kt,Er.CLASSES[Ut.Type.GET_ADDR]=jt,Er.CLASSES[Ut.Type.PING]=Zt,Er.CLASSES[Ut.Type.PONG]=Jt,Er.CLASSES[Ut.Type.SIGNAL]=tr,Er.CLASSES[Ut.Type.GET_CHAIN_PROOF]=ur,Er.CLASSES[Ut.Type.CHAIN_PROOF]=cr,Er.CLASSES[Ut.Type.GET_ACCOUNTS_PROOF]=ar,Er.CLASSES[Ut.Type.ACCOUNTS_PROOF]=or,Er.CLASSES[Ut.Type.GET_ACCOUNTS_TREE_CHUNK]=lr,Er.CLASSES[Ut.Type.ACCOUNTS_TREE_CHUNK]=hr,Er.CLASSES[Ut.Type.GET_TRANSACTIONS_PROOF_BY_ADDRESSES]=dr,Er.CLASSES[Ut.Type.TRANSACTIONS_PROOF]=fr,Er.CLASSES[Ut.Type.GET_TRANSACTION_RECEIPTS_BY_ADDRESS]=Ar,Er.CLASSES[Ut.Type.TRANSACTION_RECEIPTS]=yr,Er.CLASSES[Ut.Type.GET_BLOCK_PROOF]=mr,Er.CLASSES[Ut.Type.BLOCK_PROOF]=br,Er.CLASSES[Ut.Type.GET_TRANSACTIONS_PROOF_BY_HASHES]=pr,Er.CLASSES[Ut.Type.GET_TRANSACTION_RECEIPTS_BY_HASHES]=gr,Er.CLASSES[Ut.Type.GET_BLOCK_PROOF_AT]=_r,Er.CLASSES[Ut.Type.GET_HEAD]=wr,Er.CLASSES[Ut.Type.HEAD]=vr,Er.CLASSES[Ut.Type.VERACK]=sr,c.register(Er);class Sr extends l{constructor(e){super(),this._networkConfig=e,this._connectors=new T,this._timers=new v}connect(e,t){if(e.protocol!==Mt.RTC)throw new Error("Malformed peerAddress");const r=e.peerId;if(this._connectors.contains(r))return!1;if(this._connectors.length>=Sr.CONNECTORS_MAX)return!1;const n=new kr(this._networkConfig,e,t);return n.on("connection",e=>this._onConnection(e,r)),this._connectors.put(r,n),this._timers.setTimeout(`connect_${r}`,()=>{this._connectors.remove(r),this._timers.clearTimeout(`connect_${r}`),n.close(),this.fire("error",e,"timeout")},Sr.CONNECT_TIMEOUT),!0}isValidSignal(e){return this._connectors.contains(e.senderId)&&this._connectors.get(e.senderId).nonce===e.nonce}onSignal(e,t){if(t.isUnroutable()||t.isTtlExceeded()){if(this.isValidSignal(t)&&this._connectors.get(t.senderId)instanceof kr){const e=this._connectors.get(t.senderId),r=e.peerAddress;this._connectors.remove(t.senderId),this._timers.clearTimeout(`connect_${t.senderId}`),e.close();const n=t.isUnroutable()?"unroutable":"ttl exceeded";this.fire("error",r,n)}return}let r;try{r=JSON.parse(z.toAscii(t.payload))}catch(e){return void h.e(Sr,`Failed to parse signal payload from ${t.senderId}`)}if(r)if("offer"===r.type){let n=this._connectors.get(t.senderId);if(n){if(t.recipientId.compare(t.senderId)>0)return void h.d(Sr,`Simultaneous connection, discarding offer from ${t.senderId} (<${t.recipientId})`);if(n instanceof Ir)return h.w(Sr,`Duplicate offer received from ${t.senderId}`),void n.onSignal(r);h.d(Sr,`Simultaneous connection, accepting offer from ${t.senderId} (>${t.recipientId})`),this._timers.clearTimeout(`connect_${t.senderId}`),n.close(),this.fire("error",n.peerAddress,"simultaneous inbound connection")}if(this._connectors.length>=Sr.CONNECTORS_MAX)return void h.d(Sr,`Rejecting offer from ${t.senderId} - max connectors exceeded`);if(this._connectors.length>=Sr.INBOUND_CONNECTORS_MAX){let e=0;for(const t of this._connectors.valueIterator())t instanceof Ir&&e++;if(e>=Sr.INBOUND_CONNECTORS_MAX)return void h.d(Sr,`Rejecting offer from ${t.senderId} - max inbound connectors exceeded`)}(n=new Ir(this._networkConfig,e,t.senderId,r)).on("connection",e=>this._onConnection(e,t.senderId)),this._connectors.put(t.senderId,n),this._timers.setTimeout(`connect_${t.senderId}`,()=>{this._timers.clearTimeout(`connect_${t.senderId}`),this._connectors.remove(t.senderId),n.close()},Sr.CONNECT_TIMEOUT)}else this._connectors.contains(t.senderId)&&this._connectors.get(t.senderId).onSignal(r);else h.d(Sr,`Discarding signal from ${t.senderId} - empty payload`)}_onConnection(e,t){this._timers.clearTimeout(`connect_${t}`),e.on("close",()=>this._onClose(t)),this.fire("connection",e)}_onClose(e){this._connectors.remove(e),this._timers.clearTimeout(`connect_${e}`)}}Sr.CONNECT_TIMEOUT=8e3,Sr.CONNECTORS_MAX=6,Sr.INBOUND_CONNECTORS_MAX=3,c.register(Sr);class Cr extends l{constructor(e,t,r,n){super(),this._networkConfig=e,this._signalChannel=t,this._peerId=r,this._peerAddress=n,this._nonce=ee.randomUint32(),this._rtcConnection=A.newPeerConnection(this._networkConfig.rtcConfig),this._rtcConnection.onicecandidate=e=>this._onIceCandidate(e),this._rtcConnection.onconnectionstatechange=e=>this._onConnectionStateChange(e),this._rtcConnection.onicegatheringstatechange=e=>this._onIceGatheringStateChange(e),this._lastIceCandidate=null,this._iceCandidateQueue=[],this._localIceCandidates=[],this._timers=new v}onSignal(e){if(this._rtcConnection)if(e.sdp)this._rtcConnection.setRemoteDescription(A.newSessionDescription(e)).then(()=>{"offer"===e.type&&this._rtcConnection.createAnswer().then(e=>this._onDescription(e)).catch(h.e.tag(Cr)),this._handleCandidateQueue().catch(h.w.tag(Cr))}).catch(h.e.tag(Cr));else if(e.candidate){if(e.otherCandidates)for(const t of e.otherCandidates)this._addIceCandidate(t).catch(h.w.tag(Cr));this._addIceCandidate(e).catch(h.w.tag(Cr))}}_onConnectionStateChange(e){if(this._rtcConnection)switch(this._rtcConnection.connectionState){case"failed":case"disconnected":case"closed":this.close()}}close(){this._rtcConnection&&(this._rtcConnection.onicecandidate=null,this._rtcConnection.onconnectionstatechange=null,this._rtcConnection.onicegatheringstatechange=null,this._rtcConnection.close(),this._rtcConnection=null,this._signalChannel=null,this._timers.clearAll(),this._offAll())}_addIceCandidate(e){return this._rtcConnection?(this._lastIceCandidate=A.newIceCandidate(e),this._rtcConnection.remoteDescription&&this._rtcConnection.remoteDescription.type?this._rtcConnection.addIceCandidate(this._lastIceCandidate).catch(h.e.tag(Cr)):(this._iceCandidateQueue.push(e),Promise.resolve())):Promise.resolve()}async _handleCandidateQueue(){if(this._rtcConnection){for(const e of this._iceCandidateQueue)await this._addIceCandidate(e);this._iceCandidateQueue=[]}}_signal(e){if(!this._rtcConnection)return;const t=z.fromAscii(JSON.stringify(e)),r=this._networkConfig.keyPair,n=this._networkConfig.peerId;this._signalChannel.signal(n,this._peerId,this._nonce,fn.SIGNAL_TTL_INITIAL,0,t,r.publicKey,ye.create(r.privateKey,r.publicKey,t))}_onIceCandidate(e){this._rtcConnection&&null!==e.candidate&&(this._localIceCandidates.push(e.candidate),this._timers.timeoutExists("ice-gathering")||this._timers.setTimeout("ice-gathering",this._sendIceCandidates.bind(this),Cr.ICE_GATHERING_TIMEOUT))}_onIceGatheringStateChange(e){this._rtcConnection&&"complete"===this._rtcConnection.iceGatheringState&&this._sendIceCandidates()}_sendIceCandidates(){if(this._timers.clearTimeout("ice-gathering"),this._localIceCandidates.length>0){let e=this._localIceCandidates.pop();(e=e.toJSON?e.toJSON():JSON.parse(JSON.stringify(e))).otherCandidates=this._localIceCandidates,this._signal(e),this._localIceCandidates=[]}}_onDescription(e){this._rtcConnection&&this._rtcConnection.setLocalDescription(e).then(()=>this._signal(this._rtcConnection.localDescription)).catch(h.e.tag(Cr))}_onDataChannel(e){if(!this._rtcConnection)return;const t=new Tr(e.channel||e.target);t.on("close",()=>{this._rtcConnection&&this.close()});let r=null;if(this._lastIceCandidate)try{r=Rr.candidateToNetAddress(this._lastIceCandidate)}catch(e){h.w(Cr,`Failed to parse IP from ICE candidate: ${this._lastIceCandidate}`)}else h.d(Cr,"No ICE candidate seen for RTC connection");const n=new Yr(t,Mt.RTC,r,this._peerAddress);this.fire("connection",n)}get nonce(){return this._nonce}get peerAddress(){return this._peerAddress}}Cr.ICE_GATHERING_TIMEOUT=1e3,Cr.CONNECTION_OPEN_DELAY=200,c.register(Cr);class kr extends Cr{constructor(e,t,r){super(e,r,t.peerId,t),this._peerAddress=t,this._channel=this._rtcConnection.createDataChannel("data-channel"),this._channel.binaryType="arraybuffer",this._channel.onopen=e=>this._onDataChannel(e),this._rtcConnection.createOffer().then(e=>this._onDescription(e)).catch(h.e.tag(kr))}close(){super.close(),this._channel&&(this._channel.onopen=null,this._channel=null)}}c.register(kr);class Ir extends Cr{constructor(e,t,r,n){super(e,t,r,null),this._rtcConnection.ondatachannel=e=>{e.channel.onopen=e=>this._onDataChannel(e)},this.onSignal(n)}}c.register(Ir);class Tr extends f{constructor(e){super(),F.that(e.ordered,"WebRtc data channel not ordered"),this._channel=e,this._channel.onmessage=e=>this._onMessage(e.data||e),this._channel.onclose=()=>this.close(),this._channel.onerror=e=>this.fire("error",e,this)}_onMessage(e){if(e instanceof Blob){const t=new FileReader;t.onloadend=()=>super._onMessage(t.result),t.readAsArrayBuffer(e)}else super._onMessage(e)}sendChunk(e){if(!this._channel)throw new Error("Channel is dead");this._channel.send(e)}_close(){this._channel.onmessage=null,this._channel.onclose=null,this._channel.onerror=null,this._channel.close(),this._channel=null}get readyState(){return f.ReadyState.fromString(this._channel.readyState)}}c.register(Tr);class Rr{static candidateToNetAddress(e){const t=e.candidate.split(" ");return t.length<6?null:Or.fromIP(t[4],!0)}}c.register(Rr);class Nr extends l{constructor(e,t,r){super(),this._protocol=e,this._protocolPrefix=t,this._networkConfig=r,r.peerAddress.protocol===this._protocol&&(this._wss=g.newWebSocketServer(r),this._wss.on("connection",(e,t)=>this._onConnection(e,t)),h.d(Nr,`${this._protocolPrefix.toUpperCase()}-Connector listening on port ${r.peerAddress.port}`)),this._sockets=new T,this._timers=new v}connect(e){if(e.protocol!==this._protocol)throw new Error("Malformed peerAddress");const t=`connect_${e}`;if(this._timers.timeoutExists(t))return h.w(Nr,`Already connecting to ${e}`),!1;const r=g.newWebSocket(`${this._protocolPrefix}://${e.host}:${e.port}`,{handshakeTimeout:Nr.CONNECT_TIMEOUT},this._networkConfig);return r.binaryType="arraybuffer",r.onopen=()=>{this._timers.clearTimeout(t),this._sockets.remove(e),r.onerror=()=>{};const n=r._socket&&r._socket.remoteAddress?Or.fromIP(r._socket.remoteAddress,!0):null,i=new Yr(new Br(r),this._protocol,n,e);this.fire("connection",i)},r.onerror=r=>{this._timers.clearTimeout(t),this._sockets.remove(e),this.fire("error",e,r)},this._sockets.put(e,r),this._timers.setTimeout(t,()=>{this._timers.clearTimeout(t),this._sockets.remove(e),r.onerror=()=>{},r.onopen=()=>{h.d(Nr,()=>`Connection to ${e} succeeded after timeout - closing it`),r.close()},this.fire("error",e,"timeout")},Nr.CONNECT_TIMEOUT),!0}abort(e){const t=this._sockets.get(e);t&&(this._timers.clearTimeout(`connect_${e}`),this._sockets.remove(e),t.onerror=()=>{},t.onopen=()=>{h.d(Nr,()=>`Connection to ${e} succeeded after aborting - closing it`),t.close()},t.close(),this.fire("error",e,"aborted"))}_onConnection(e,t){let r=t.connection.remoteAddress;if(r){if(this._networkConfig.reverseProxy.enabled){const n=this._networkConfig.reverseProxy.addresses;if(!n.includes(r))return h.e(Nr,`Received connection from ${r} when all connections were expected from the reverse proxy at ${n}: closing the connection`),void e.close();{const n=this._networkConfig.reverseProxy.header;if(!t.headers[n])return h.e(Nr,`Expected header '${n}' to contain the real IP from the connecting client: closing the connection`),void e.close();r=t.headers[n].split(/\s*,\s*/)[0]}}try{const t=Or.fromIP(r,!0),n=new Yr(new Br(e),this._protocol,t,null);this.fire("connection",n)}catch(t){h.e(Nr,`Error on connection from ${r}: ${t.message||t}`),e.close()}}else h.e(Nr,"Expected req.connection.remoteAddress to be set and it is not: closing the connection"),e.close()}}Nr.CONNECT_TIMEOUT=5e3,c.register(Nr);class Br extends f{constructor(e){super(),this._ws=e,this._ws.onmessage=e=>this._onMessage(e.data||e),this._ws.onclose=()=>this.close(),this._ws.onerror=e=>this.fire("error",e)}_close(){this._ws.onmessage=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.close(),this._ws=null}sendChunk(e){this._ws.send(e)}get readyState(){return this._ws.readyState}}c.register(Br);class Or{static fromIP(e,t=!1){const r=dn.ipToBytes(e),n=dn.isIPv4Address(r)?Or.Type.IPv4:Or.Type.IPv6;return new Or(n,r,t)}constructor(e,t=null,r=!1){switch(e){case Or.Type.IPv4:if(!(t instanceof Uint8Array)||t.length!==dn.IPv4_LENGTH)throw new Error("Malformed ip");break;case Or.Type.IPv6:if(!(t instanceof Uint8Array)||t.length!==dn.IPv6_LENGTH)throw new Error("Malformed ip");break;case Or.Type.UNKNOWN:case Or.Type.UNSPECIFIED:t=null;break;default:throw new Error("Malformed type")}this._type=e,this._ip=t,this._reliable=r}static unserialize(e){const t=e.readUint8();let r=null;switch(t){case Or.Type.IPv4:r=e.read(dn.IPv4_LENGTH);break;case Or.Type.IPv6:r=e.read(dn.IPv6_LENGTH)}return new Or(t,r)}serialize(e){return(e=e||new j(this.serializedSize)).writeUint8(this._type),this._ip&&e.write(this._ip),e}get serializedSize(){return 1+(this._ip?this._ip.length:0)}equals(e){return e instanceof Or&&this._type===e._type&&z.equals(this._ip,e.ip)}hashCode(){return this.toString()}toString(){return this._type===Or.Type.UNKNOWN?"<unknown>":this._type===Or.Type.UNSPECIFIED?"":dn.bytesToIp(this._ip)}get ip(){return this._ip}get type(){return this._type}get reliable(){return this._reliable}isPseudo(){return!this._ip}isPrivate(){return this.isPseudo()||dn.isPrivateIP(this._ip)}isIPv6(){return this._ip&&dn.isIPv6Address(this._ip)}isIPv4(){return this._ip&&dn.isIPv4Address(this._ip)}subnet(e){const t=this._ip?dn.ipToSubnet(this._ip,e):null;return new Or(this._type,t,this._reliable)}}Or.Type={IPv4:0,IPv6:1,UNSPECIFIED:2,UNKNOWN:3},Or.UNSPECIFIED=new Or(Or.Type.UNSPECIFIED),Or.UNKNOWN=new Or(Or.Type.UNKNOWN),c.register(Or);class Pr extends ce{static copy(e){if(!e)return e;const t=new Uint8Array(e._obj);return new Pr(t)}constructor(e){if(super(),!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==Pr.SERIALIZED_SIZE)throw new Error("Primitive: Invalid length");this._obj=e}static unserialize(e){return new Pr(e.read(Pr.SERIALIZED_SIZE))}serialize(e){return(e=e||new j(this.serializedSize)).write(this._obj),e}subarray(e,t){return this._obj.subarray(e,t)}get serializedSize(){return Pr.SERIALIZED_SIZE}equals(e){return e instanceof Pr&&super.equals(e)}toString(){return this.toHex()}static fromBase64(e){return new Pr(z.fromBase64(e))}static fromHex(e){return new Pr(z.fromHex(e))}}Pr.SERIALIZED_SIZE=16,c.register(Pr);class xr{constructor(e,t,r,n,i,s,o){if(!ee.isUint8(s))throw new Error("Malformed distance");if(null!==i&&!(i instanceof fe))throw new Error("Malformed publicKey");this._protocol=e,this._services=t,this._timestamp=r,this._netAddress=n||Or.UNSPECIFIED,this._publicKey=i,this._distance=s,this._signature=o}static unserialize(e){const t=e.readUint8();switch(t){case Mt.WSS:return Dr.unserialize(e);case Mt.RTC:return Ur.unserialize(e);case Mt.WS:return Mr.unserialize(e);case Mt.DUMB:return Kr.unserialize(e);default:throw`Malformed PeerAddress protocol ${t}`}}serialize(e){if(!this._publicKey)throw new Error("PeerAddress without publicKey may not be serialized.");if(!this._signature)throw new Error("PeerAddress without signature may not be serialized.");return(e=e||new j(this.serializedSize)).writeUint8(this._protocol),e.writeUint32(this._services),e.writeUint64(this._timestamp),this._netAddress.isPrivate()?Or.UNSPECIFIED.serialize(e):this._netAddress.serialize(e),this._publicKey.serialize(e),e.writeUint8(this._distance),this._signature.serialize(e),e}serializeContent(e){return(e=e||new j(this.serializedContentSize)).writeUint8(this._protocol),e.writeUint32(this._services),e.writeUint64(this._timestamp),e}get serializedSize(){return 13+this._netAddress.serializedSize+this._publicKey.serializedSize+1+this._signature.serializedSize}get serializedContentSize(){return 13}equals(e){return e instanceof xr&&this.protocol===e.protocol&&(!this.publicKey||!e.publicKey||this.publicKey.equals(e.publicKey))&&(!this.peerId||!e.peerId||this.peerId.equals(e.peerId))}hashCode(){throw new Error("unimplemented")}verifySignature(){return void 0===this._signatureVerified&&(this._signatureVerified=this.signature.verify(this.publicKey,this.serializeContent())),this._signatureVerified}get protocol(){return this._protocol}get services(){return this._services}get timestamp(){return this._timestamp}get netAddress(){return this._netAddress.isPseudo()?null:this._netAddress}set netAddress(e){this._netAddress=e||Or.UNSPECIFIED}get publicKey(){return this._publicKey}get peerId(){return this._publicKey?this._publicKey.toPeerId():null}get distance(){return this._distance}get signature(){return this._signature}set signature(e){0===this._distance&&(this._signature=e,this._signatureVerified=void 0)}set distance(e){this._distance=e}isSeed(){return 0===this._timestamp}exceedsAge(){if(this.isSeed())return!1;const e=Date.now()-this.timestamp;switch(this.protocol){case Mt.WSS:return e>Gr.MAX_AGE_WEBSOCKET;case Mt.RTC:return e>Gr.MAX_AGE_WEBRTC;case Mt.WS:return e>Gr.MAX_AGE_WEBSOCKET;case Mt.DUMB:return e>Gr.MAX_AGE_DUMB}return!1}}c.register(xr);class Lr extends xr{constructor(e,t,r,n,i,s,o,a,c){if(e!==Mt.WS&&e!==Mt.WSS)throw new Error("Malformed protocol");if(super(e,t,r,n,i,s,c),!o)throw new Error("Malformed host");if(!ee.isUint16(a))throw new Error("Malformed port");this._host=o,this._port=a}static fromSeedString(e){const t=/^(wss?:)\/\/([^:\/?#]+):([0-9]{1,5})\/?([a-f0-9]*)$/i.exec(e);if(!t)throw new Error(`Malformed PeerAddress ${e}`);try{const[e,r,n,i,s]=t;return("ws:"===r?Mr:Dr).seed(n,parseInt(i),s)}catch(t){throw new Error(`Malformed PeerAddress ${e}`)}}toSeedString(){return`${this.protocolPrefix}://${this._host}:${this._port}/${this.publicKey?this.publicKey.toHex():""}`}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),e.writeVarLengthString(this._host),e.writeUint16(this._port),e}serializeContent(e){return e=e||new j(this.serializedContentSize),super.serializeContent(e),e.writeVarLengthString(this._host),e.writeUint16(this._port),e}globallyReachable(){return dn.hostGloballyReachable(this.host)}get serializedSize(){return super.serializedSize+j.varLengthStringSize(this._host)+2}get serializedContentSize(){return super.serializedContentSize+j.varLengthStringSize(this._host)+2}equals(e){return super.equals(e)&&(!!this.peerId&&!!e.peerId||this._host===e.host&&this._port===e.port)}hashCode(){return this.peerId?`${this.protocolPrefix}:///${this.peerId}`:`${this.protocolPrefix}://${this._host}:${this._port}/`}toString(){return`${this.protocolPrefix}://${this._host}:${this._port}/${this.peerId?this.peerId:""}`}get host(){return this._host}get port(){return this._port}get protocolPrefix(){return this.protocol===Mt.WS?"ws":"wss"}}c.register(Lr);class Dr extends Lr{static seed(e,t,r){const n=r?new fe(z.fromHex(r)):null;return new Dr(w.PROVIDES_FULL,0,Or.UNSPECIFIED,n,0,e,t)}constructor(e,t,r,n,i,s,o,a){super(Mt.WSS,e,t,r,n,i,s,o,a)}static unserialize(e){const t=e.readUint32(),r=e.readUint64(),n=Or.unserialize(e),i=fe.unserialize(e),s=e.readUint8(),o=ye.unserialize(e),a=e.readVarLengthString(),c=e.readUint16();return new Dr(t,r,n,i,s,a,c,o)}equals(e){return super.equals(e)&&e instanceof Dr}withoutId(){return new Dr(this.services,this.timestamp,this.netAddress,null,this.distance,this.host,this.port)}}c.register(Dr);class Mr extends Lr{static seed(e,t,r){const n=r?new fe(z.fromHex(r)):null;return new Mr(w.PROVIDES_FULL,0,Or.UNSPECIFIED,n,0,e,t)}constructor(e,t,r,n,i,s,o,a){super(Mt.WS,e,t,r,n,i,s,o,a)}static unserialize(e){const t=e.readUint32(),r=e.readUint64(),n=Or.unserialize(e),i=fe.unserialize(e),s=e.readUint8(),o=ye.unserialize(e),a=e.readVarLengthString(),c=e.readUint16();return new Mr(t,r,n,i,s,a,c,o)}globallyReachable(){return(dn.isIPv4Address(this.host)||dn.isIPv6Address(this.host))&&!dn.isPrivateIP(this.host)||dn.hostGloballyReachable(this.host)}equals(e){return super.equals(e)&&e instanceof Mr}withoutId(){return new Mr(this.services,this.timestamp,this.netAddress,null,this.distance,this.host,this.port)}}c.register(Mr);class Ur extends xr{constructor(e,t,r,n,i,s){super(Mt.RTC,e,t,r,n,i,s)}static unserialize(e){const t=e.readUint32(),r=e.readUint64(),n=Or.unserialize(e),i=fe.unserialize(e),s=e.readUint8(),o=ye.unserialize(e);return new Ur(t,r,n,i,s,o)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),e}get serializedSize(){return super.serializedSize}equals(e){return super.equals(e)&&e instanceof Ur}hashCode(){return this.toString()}toString(){return`rtc:///${this.peerId}`}}c.register(Ur);class Kr extends xr{constructor(e,t,r,n,i,s){super(Mt.DUMB,e,t,r,n,i,s)}static unserialize(e){const t=e.readUint32(),r=e.readUint64(),n=Or.unserialize(e),i=fe.unserialize(e),s=e.readUint8(),o=ye.unserialize(e);return new Kr(t,r,n,i,s,o)}serialize(e){return e=e||new j(this.serializedSize),super.serialize(e),e}get serializedSize(){return super.serializedSize}equals(e){return super.equals(e)&&e instanceof Kr}hashCode(){return this.toString()}toString(){return`dumb:///${this.peerId}`}}c.register(Kr);class Fr{constructor(e){this.peerAddress=e,this.state=Fr.NEW,this.lastConnected=-1,this.bannedUntil=-1,this.banBackoff=Gr.INITIAL_FAILED_BACKOFF,this._signalRouter=new zr(e),this._failedAttempts=0,this._closeTypes=new Map,this._addedBy=new R}get signalRouter(){return this._signalRouter}get maxFailedAttempts(){switch(this.peerAddress.protocol){case Mt.RTC:return Gr.MAX_FAILED_ATTEMPTS_RTC;case Mt.WS:case Mt.WSS:return Gr.MAX_FAILED_ATTEMPTS_WS;default:return 0}}get failedAttempts(){return this._signalRouter.bestRoute?this._signalRouter.bestRoute.failedAttempts:this._failedAttempts}set failedAttempts(e){this._signalRouter.bestRoute?(this._signalRouter.bestRoute.failedAttempts=e,this._signalRouter.updateBestRoute()):this._failedAttempts=e}close(e){e&&(this._closeTypes.has(e)?this._closeTypes.set(e,this._closeTypes.get(e)+1):this._closeTypes.set(e,1),this.state!==Fr.BANNED&&(Qr.isBanningType(e)?this.state=Fr.BANNED:Qr.isFailingType(e)?this.state=Fr.FAILED:this.state=Fr.TRIED))}equals(e){return e instanceof Fr&&this.peerAddress.equals(e.peerAddress)}hashCode(){return this.peerAddress.hashCode()}toString(){return`PeerAddressState{peerAddress=${this.peerAddress}, state=${this.state}, `+`lastConnected=${this.lastConnected}, failedAttempts=${this.failedAttempts}, `+`bannedUntil=${this.bannedUntil}}`}get addedBy(){return this._addedBy}}Fr.NEW=1,Fr.ESTABLISHED=2,Fr.TRIED=3,Fr.FAILED=4,Fr.BANNED=5,c.register(Fr);class zr{constructor(e){this.peerAddress=e,this._bestRoute=null,this._routes=new R}get bestRoute(){return this._bestRoute}addRoute(e,t,r){const n=this._routes.get(e),i=new jr(e,t,r);return n&&(i.failedAttempts=n.failedAttempts),this._routes.add(i),(!this._bestRoute||i.score>this._bestRoute.score||i.score===this._bestRoute.score&&r>this._bestRoute.timestamp)&&(this._bestRoute=i,this.peerAddress.distance=this._bestRoute.distance,!0)}deleteBestRoute(){this._bestRoute&&this.deleteRoute(this._bestRoute.signalChannel)}deleteRoute(e){this._routes.remove(e),this._bestRoute&&this._bestRoute.signalChannel.equals(e)&&this.updateBestRoute()}deleteAllRoutes(){this._bestRoute=null,this._routes=new R}hasRoute(){return this._routes.length>0}updateBestRoute(){let e=null;for(const t of this._routes.valueIterator())(null===e||t.score>e.score||t.score===e.score&&t.timestamp>e.timestamp)&&(e=t);this._bestRoute=e,this._bestRoute?this.peerAddress.distance=this._bestRoute.distance:this.peerAddress.distance=Gr.MAX_DISTANCE+1}equals(e){return e instanceof Fr&&this.peerAddress.equals(e.peerAddress)}hashCode(){return this.peerAddress.hashCode()}toString(){return`PeerAddressState{peerAddress=${this.peerAddress}, state=${this.state}, `+`lastConnected=${this.lastConnected}, failedAttempts=${this.failedAttempts}, `+`bannedUntil=${this.bannedUntil}}`}}c.register(zr);class jr{constructor(e,t,r){this.failedAttempts=0,this.timestamp=r,this._signalChannel=e,this._distance=t}get signalChannel(){return this._signalChannel}get distance(){return this._distance}get score(){return(Gr.MAX_DISTANCE-this._distance)/2*(1-this.failedAttempts/Gr.MAX_FAILED_ATTEMPTS_RTC)}equals(e){return e instanceof jr&&this._signalChannel.equals(e._signalChannel)}hashCode(){return this._signalChannel.hashCode()}toString(){return`SignalRoute{signalChannel=${this._signalChannel}, distance=${this._distance}, timestamp=${this.timestamp}, failedAttempts=${this.failedAttempts}}`}}c.register(jr);class Hr{static async retrieve(e,t){return Hr.parse(await y.get(e,Hr.REQUEST_TIMEOUT,Hr.MAX_SIZE),t)}static parse(e,t){const r=[],n=e.split(/\r\n|\n|\r/).filter(e=>e.length>0&&!e.startsWith("#"));for(let e=0;e<n.length-1;e++){const t=n[e];try{r.push(Lr.fromSeedString(t.trim()))}catch(e){h.w(Hr,`Ignoring malformed seed address ${t}`)}}const i=n[n.length-1];let s=null;try{s=new ye(z.fromHex(i.trim()))}catch(e){}if(!s)try{r.push(Lr.fromSeedString(i.trim()))}catch(e){h.w(Hr,`Ignoring malformed signature/seed address ${i}`)}if(!t)return new Hr(r,null,s);if(!s)throw new Error("Missing signature");const o=Hr._serializeSeeds(r);if(!s.verify(t,o))throw new Error("Invalid signature");return new Hr(r,t,s)}static _serializeSeeds(e){return z.fromAscii(e.map(e=>e.toSeedString()).join("\n"))}constructor(e,t,r){this._seeds=e,this._publicKey=t,this._signature=r}serializeContent(){return Hr._serializeSeeds(this._seeds)}get seeds(){return this._seeds}get publicKey(){return this._publicKey}get signature(){return this._signature}}Hr.MAX_SIZE=131072,Hr.REQUEST_TIMEOUT=8e3,c.register(Hr);class qr{constructor(e,t){this._url=e,this._publicKey=t?new fe(z.fromHex(t)):null}get url(){return this._url}get publicKey(){return this._publicKey}}c.register(qr);class Vr extends l{async collect(){if(!Wr.SEED_LISTS)return void this.fire("end");const e=[];for(const t of Wr.SEED_LISTS)e.push(Hr.retrieve(t.url,t.publicKey).then(e=>{h.i(Vr,`Got ${e.seeds.length} seed peers from ${t.url}`+(e.publicKey&&e.signature?" (signed)":"")),this.fire("seeds",e.seeds)}).catch(e=>h.w(Vr,`Failed to retrieve seed list from ${t.url}: ${e.message||e}`)));await Promise.all(e),this.fire("end")}}c.register(Vr);class Gr extends l{constructor(e){super(),this._networkConfig=e,this._store=new R,this._wsStates=new R,this._wssStates=new R,this._rtcStates=new R,this._stateByPeerId=new T,this._statesByNetAddress=new T,this._seeded=!1,this.add(null,Wr.SEED_PEERS);const t=()=>{this._seeded=!0,this.fire("seeded")},r=new Vr;r.on("seeds",e=>this.add(null,e)),r.on("end",t),r.collect().catch(h.e.tag(Gr)),setTimeout(t,Gr.SEEDING_TIMEOUT),setInterval(()=>this._housekeeping(),Gr.HOUSEKEEPING_INTERVAL)}iterator(){return this._store.valueIterator()}wsIterator(){return this._wsStates.valueIterator()}wssIterator(){return this._wssStates.valueIterator()}rtcIterator(){return this._rtcStates.valueIterator()}_get(e){if(e instanceof Dr||e instanceof Mr){const t=this._store.get(e.withoutId());if(t)return t}return this._store.get(e)}getState(e){return this._get(e)}get(e){const t=this._get(e);return t?t.peerAddress:null}getByPeerId(e){const t=this._stateByPeerId.get(e);return t?t.peerAddress:null}getChannelByPeerId(e){const t=this._stateByPeerId.get(e);return t&&t.signalRouter.bestRoute?t.signalRouter.bestRoute.signalChannel:null}query(e,t,r=$r.MAX_ADDR_PER_MESSAGE){let n,i;switch(e){case Mt.WSS:n=this.wssIterator(),i=this.knownWssAddressesCount;break;case Mt.WS:n=this.wsIterator(),i=this.knownWsAddressesCount;break;case Mt.WS|Mt.WSS:n=k.alternate(this.wsIterator(),this.wssIterator()),i=this.knownWsAddressesCount+this.knownWssAddressesCount;break;case Mt.RTC:n=this.rtcIterator(),i=this.knownRtcAddressesCount;break;case Mt.RTC|Mt.WS:n=k.alternate(this.rtcIterator(),this.wsIterator()),i=this.knownRtcAddressesCount+this.knownWsAddressesCount;break;case Mt.RTC|Mt.WSS:n=k.alternate(this.rtcIterator(),this.wssIterator()),i=this.knownRtcAddressesCount+this.knownWssAddressesCount;break;default:n=this.iterator(),i=this.knownAddressesCount}let s=0,o=i;i>r&&(o=((s=Math.floor(Math.random()*i))+r)%i);const a=s>o,c=[];let u=-1;for(const r of n){if(u++,!a&&u<s)continue;if(!a&&u>=o)break;if(a&&u>=o&&u<s)continue;if(r.state===Fr.BANNED||r.state===Fr.FAILED)continue;const n=r.peerAddress;if(n.isSeed())continue;if(0==(n.protocol&e))continue;const i=t&w.ALL_LEGACY;if(i>0&&0==(n.services&i))continue;const h=t&w.ALL_CURRENT;h>0&&(n.services&h)!==h||n.protocol===Mt.RTC&&n.distance>=Gr.MAX_DISTANCE||n.exceedsAge()||c.push(n)}return c}add(e,t){const r=Array.isArray(t)?t:[t],n=[];for(const t of r)this._add(e,t)&&n.push(t);n.length&&this.fire("added",n,this)}_add(e,t){if(this._networkConfig.peerAddress.equals(t))return!1;if(e&&t.exceedsAge())return h.v(Gr,()=>`Ignoring address ${t} - too old (${new Date(t.timestamp)})`),!1;if(t.timestamp>Date.now()+Gr.MAX_TIMESTAMP_DRIFT)return h.v(Gr,()=>`Ignoring addresses ${t} - timestamp in the future`),!1;if(t.protocol===Mt.RTC&&(t.distance++,t.distance>Gr.MAX_DISTANCE)){h.v(Gr,()=>`Ignoring address ${t} - max distance exceeded`);const r=this._get(t);return r&&r.signalRouter.deleteRoute(e),!1}const r=e&&e.netAddress&&e.netAddress.reliable?e.netAddress:null;let n=this._get(t),i=null,s=!1;if(n){if(i=n.peerAddress,n.state===Fr.BANNED)return!1;if(i.isSeed())return!1;!i.netAddress||t.netAddress&&!i.netAddress.reliable||(t.netAddress=i.netAddress)}else{if(this._store.length>=Gr.MAX_SIZE)return!1;switch(t.protocol){case Mt.WSS:if(this._wssStates.length>=Gr.MAX_SIZE_WSS)return!1;break;case Mt.WS:if(this._wsStates.length>=Gr.MAX_SIZE_WS)return!1;break;case Mt.RTC:if(this._rtcStates.length>=Gr.MAX_SIZE_RTC)return!1}if(r){const e=this._statesByNetAddress.get(r);if(e&&e.size>=Gr.MAX_SIZE_PER_IP)return h.v(Gr,()=>`Ignoring address ${t} - max count per IP ${r} reached`),!1}n=new Fr(t),this._addToStore(n),s=!0}return(!i||i.timestamp<t.timestamp)&&(n.peerAddress=t,s=!0),t.protocol===Mt.RTC&&(s=n.signalRouter.addRoute(e,t.distance,t.timestamp)||s),this._trackByNetAddress(n,r),s}_addToStore(e){switch(this._store.add(e),e.peerAddress.peerId&&this._stateByPeerId.put(e.peerAddress.peerId,e),e.peerAddress.protocol){case Mt.WSS:this._wssStates.add(e);break;case Mt.WS:this._wsStates.add(e);break;case Mt.RTC:this._rtcStates.add(e)}}_trackByNetAddress(e,t){if(!t)return;e.addedBy.add(t);let r=this._statesByNetAddress.get(t);r||(r=new Set,this._statesByNetAddress.put(t,r)),r.add(e)}established(e,t){let r=this._get(t);r||(r=new Fr(t),this._addToStore(r));const n=e&&e.netAddress&&e.netAddress.reliable?e.netAddress:null;this._trackByNetAddress(r,n),r.state=Fr.ESTABLISHED,r.lastConnected=Date.now(),r.failedAttempts=0,r.bannedUntil=-1,r.banBackoff=Gr.INITIAL_FAILED_BACKOFF,r.peerAddress.isSeed()||(r.peerAddress=t),t.protocol===Mt.RTC&&r.signalRouter.addRoute(e,t.distance,t.timestamp)}close(e,t,r=null){const n=this._get(t);n&&(n.close(r),e&&this._removeBySignalChannel(e),Qr.isBanningType(r)?this._ban(t):Qr.isFailingType(r)&&(n.failedAttempts++,n.failedAttempts>=n.maxFailedAttempts&&(n.banBackoff>=Gr.MAX_FAILED_BACKOFF?this._removeFromStore(t):(n.bannedUntil=Date.now()+n.banBackoff,n.banBackoff=Math.min(Gr.MAX_FAILED_BACKOFF,2*n.banBackoff)))),t.protocol===Mt.DUMB&&this._removeFromStore(t))}unroutable(e,t){if(!t)return;const r=this._get(t);r&&(r.signalRouter.bestRoute&&r.signalRouter.bestRoute.signalChannel.equals(e)?(r.signalRouter.deleteBestRoute(),r.signalRouter.hasRoute()||this._removeFromStore(r.peerAddress)):h.d(Gr,()=>`Got unroutable for ${t} on a channel other than the best route.`))}_ban(e,t=Gr.DEFAULT_BAN_TIME){let r=this._get(e);r||(r=new Fr(e),this._store.add(r)),r.state=Fr.BANNED,r.bannedUntil=Date.now()+t,r.signalRouter.deleteAllRoutes()}isBanned(e){const t=this._get(e);return t&&t.state===Fr.BANNED&&!t.peerAddress.isSeed()}_removeFromStore(e){const t=this._get(e);if(t)if(t.peerAddress.isSeed())this._ban(e,t.banBackoff);else{e.peerId&&this._stateByPeerId.remove(e.peerId);for(const e of t.addedBy){const r=this._statesByNetAddress.get(e);r&&(r.delete(t),0===r.size&&this._statesByNetAddress.remove(e))}switch(t.peerAddress.protocol){case Mt.WSS:this._wssStates.remove(t);break;case Mt.WS:this._wsStates.remove(t);break;case Mt.RTC:this._rtcStates.remove(t)}t.state!==Fr.BANNED&&this._store.remove(e)}}_removeBySignalChannel(e){for(const t of this._store.valueIterator())t.peerAddress.protocol===Mt.RTC&&(t.signalRouter.deleteRoute(e),t.signalRouter.hasRoute()||this._removeFromStore(t.peerAddress))}_housekeeping(){const e=Date.now(),t=[];for(const r of this._store.valueIterator()){const n=r.peerAddress;switch(r.state){case Fr.NEW:case Fr.TRIED:case Fr.FAILED:if(n.exceedsAge()){this._removeFromStore(n);continue}r.state===Fr.FAILED&&r.failedAttempts>=r.maxFailedAttempts&&r.bannedUntil>0&&r.bannedUntil<=e&&(r.bannedUntil=-1,r.failedAttempts=0,t.push(n));break;case Fr.BANNED:r.bannedUntil<=e&&(n.isSeed()?(r.state=Fr.NEW,r.failedAttempts=0,r.bannedUntil=-1,t.push(n)):this._removeFromStore(n));break;case Fr.ESTABLISHED:r.signalRouter.bestRoute&&(r.signalRouter.bestRoute.timestamp=e)}}t.length&&this.fire("added",t,this)}get knownAddressesCount(){return this._store.length}get knownWsAddressesCount(){return this._wsStates.length}get knownWssAddressesCount(){return this._wssStates.length}get knownRtcAddressesCount(){return this._rtcStates.length}get seeded(){return this._seeded}}Gr.MAX_AGE_WEBSOCKET=18e5,Gr.MAX_AGE_WEBRTC=9e5,Gr.MAX_AGE_DUMB=6e4,Gr.MAX_DISTANCE=4,Gr.MAX_FAILED_ATTEMPTS_WS=3,Gr.MAX_FAILED_ATTEMPTS_RTC=2,Gr.MAX_TIMESTAMP_DRIFT=6e5,Gr.HOUSEKEEPING_INTERVAL=6e4,Gr.DEFAULT_BAN_TIME=6e5,Gr.INITIAL_FAILED_BACKOFF=3e4,Gr.MAX_FAILED_BACKOFF=6e5,Gr.MAX_SIZE_WS=m.isBrowser()?1e3:1e4,Gr.MAX_SIZE_WSS=m.isBrowser()?1e3:1e4,Gr.MAX_SIZE_RTC=m.isBrowser()?1e3:1e4,Gr.MAX_SIZE=m.isBrowser()?2500:20500,Gr.MAX_SIZE_PER_IP=250,Gr.SEEDING_TIMEOUT=3e3,c.register(Gr);class Wr{static main(){Wr.init(Wr.CONFIGS.main)}static test(){Wr.init(Wr.CONFIGS.test)}static dev(){Wr.init(Wr.CONFIGS.dev)}static init(e){if(Wr._config)throw new Error("GenesisConfig already initialized");if(!e.NETWORK_ID)throw new Error("Config is missing network id");if(!e.NETWORK_NAME)throw new Error("Config is missing network name");if(!e.GENESIS_BLOCK)throw new Error("Config is missing genesis block");if(!e.GENESIS_ACCOUNTS)throw new Error("Config is missing genesis accounts");if(!e.SEED_PEERS)throw new Error("Config is missing seed peers");Wr._config=e}static get NETWORK_ID(){if(!Wr._config)throw new Error("GenesisConfig not initialized");return Wr._config.NETWORK_ID}static get NETWORK_NAME(){if(!Wr._config)throw new Error("GenesisConfig not initialized");return Wr._config.NETWORK_NAME}static get GENESIS_BLOCK(){if(!Wr._config)throw new Error("GenesisConfig not initialized");return Wr._config.GENESIS_BLOCK}static get GENESIS_HASH(){if(!Wr._config)throw new Error("GenesisConfig not initialized");return Wr._config.GENESIS_HASH||(Wr._config.GENESIS_HASH=Wr._config.GENESIS_BLOCK.hash()),Wr._config.GENESIS_HASH}static get GENESIS_ACCOUNTS(){if(!Wr._config)throw new Error("GenesisConfig not initialized");return Wr._config.GENESIS_ACCOUNTS}static get SEED_PEERS(){if(!Wr._config)throw new Error("GenesisConfig not initialized");return Wr._config.SEED_PEERS}static get SEED_LISTS(){if(!Wr._config)throw new Error("GenesisConfig not initialized");return Wr._config.SEED_LISTS}static networkIdToNetworkName(e){for(const t of Object.keys(Wr.CONFIGS)){const r=Wr.CONFIGS[t];if(e===r.NETWORK_ID)return r.NETWORK_NAME}throw new Error(`Unable to find networkName for networkId ${e}`)}static networkIdFromAny(e){if("number"==typeof e)return e;if(Wr.CONFIGS[e])return Wr.CONFIGS[e].NETWORK_ID;throw new Error(`Unable to find networkId for ${e}`)}}c.register(Wr),Wr.CONFIGS={main:{NETWORK_ID:42,NETWORK_NAME:"main",SEED_PEERS:[Dr.seed("seed-1.nimiq.com",8443,"b70d0c3e6cdf95485cac0688b086597a5139bc4237173023c83411331ef90507"),Dr.seed("seed-2.nimiq.com",8443,"8580275aef426981a04ee5ea948ca3c95944ef1597ad78db9839f810d6c5b461"),Dr.seed("seed-3.nimiq.com",8443,"136bdec59f4d37f25ac8393bef193ff2e31c9c0a024b3edbf77fc1cb84e67a15"),Dr.seed("seed-4.nimiq-network.com",8443,"aacf606335cdd92d0dd06f27faa3b66d9bac0b247cd57ade413121196b72cd73"),Dr.seed("seed-5.nimiq-network.com",8443,"110a81a033c75976643d4b8f34419f4913b306a6fc9d530b8207ddbd5527eff6"),Dr.seed("seed-6.nimiq-network.com",8443,"26c1a4727cda6579639bdcbaecb1f6b97be3ac0e282b43bdd1a2df2858b3c23b"),Dr.seed("seed-7.nimiq.network",8443,"82fcebdb4e2a7212186d1976d7f685cc86cdf58beffe1723d5c3ea5be00c73e1"),Dr.seed("seed-8.nimiq.network",8443,"b7ac8cc1a820761df4e8a42f4e30c870e81065c4e29f994ebb5bdceb48904e7b"),Dr.seed("seed-9.nimiq.network",8443,"4429bf25c8d296c0f1786647d8f7d4bac40a37c67caf028818a65a9cc7865a48"),Dr.seed("seed-10.nimiq.network",8443,"e8e99fb8633d660d4f2d48edb6cc294681b57648b6ec6b28af8f85b2d5ec4e68"),Dr.seed("seed-11.nimiq.network",8443,"a76f0edabacfe701750036bad473ff92fa0e68ef655ab93135f0572af6e5baf8"),Dr.seed("seed-12.nimiq.network",8443,"dca57704191306ac1315e051b6dfef6c174fb2af011a52a3d922fbfaec2be41a"),Dr.seed("seed-13.nimiq-network.com",8443,"30993f92f148da125a6f8bc191b3e746fab39e109220daa0966bf6432e909f3f"),Dr.seed("seed-14.nimiq-network.com",8443,"6e7f904fabfadb194d6c74b16534bacb69892d80909cf959e47d3c8f5f330ad2"),Dr.seed("seed-15.nimiq-network.com",8443,"7cb662a686144c17ae4153fbf7ce359f7e9da39dc072eb11092531f9104fbdf6"),Dr.seed("seed-16.nimiq.com",8443,"0dfd11939947101197e3c3768a086e65ef1e893e71bfcf4bd5ed222957825212"),Dr.seed("seed-17.nimiq.com",8443,"c7120f4f88b70a38daa9783e30e89c1c55c3d80d0babed44b4e2ddd09052664a"),Dr.seed("seed-18.nimiq.com",8443,"c15a2d824a52837fa7165dc232592be35116661e7f28605187ab273dd7233711"),Dr.seed("seed-19.nimiq.com",8443,"98a24d4b05158314b36e0bd6ce3b42ac5ac061f4bb9664d783eb930caa9315b6"),Dr.seed("seed-20.nimiq.com",8443,"1fc33f93273d94dd2cf7470274c27ecb1261ec983e43bdbb281803c0a09e68d5")],SEED_LISTS:[new qr("https://nimiq.community/seeds.txt","8b4ae04557f490102036ce3e570b39058c92fc5669083fb9bbb6effc91dc3c71")],GENESIS_BLOCK:new Je(new Ue(new ue(null),new ue(null),ue.fromBase64("fNqaf98GZVkFrl29nFNUUUcbB4+m898OKH5bD7R6Vzo="),ue.fromBase64("H+/UTx+pcYX9oh6VdUXJfcdkP6fk792G4KpCRNHgvFw="),ze.difficultyToCompact(1),1,1523727e3,137689,Ue.Version.V1),new Ke([],new ue(null)),new Fe(we.fromBase64("AAAAAAAAAAAAAAAAAAAAAAAAAAA="),[],z.fromBase64("bG92ZSBhaSBhbW9yIG1vaGFiYmF0IGh1YnVuIGNpbnRhIGx5dWJvdiBiaGFsYWJhc2EgYW1vdXIga2F1bmEgcGknYXJhIGxpZWJlIGVzaHEgdXBlbmRvIHByZW1hIGFtb3JlIGthdHJlc25hbiBzYXJhbmcgYW5wdSBwcmVtYSB5ZXU="))),GENESIS_ACCOUNTS:"BXQP6DJYG/agiSQSrPuWUbRRxQmDHQAAAAAF2/KlRxjOcKZctsfgir1rJDc7M1dOFucNAAAAAARkWKRAMGEIuQcr/LWZhPrQ7LpebB3kYYcBAAAAIE+qFOAgACDQKQvjUPndEmPJ2RXL4jv7OwAAAAEAAfpAAAAAECfVCnAAAAAgT6oU4FqGT/vMwX1XZ07g22eMw0fskoHqAAAAAAAuoDAQhhvJ39JLpqnCXaqIO2RDsEtWbAMAAAAAAAg9hxCItdtDSvA4XiTc8SZ2okGR9PBiwAAAAAABH2oD+KHGLvyhzKpotDO+dRikL1JF4dLbAAAAAATjspIApt0GGBRqQArhsPlqcx3aLD61cgMAAAAAAxn5S2j4oBTAQRu6fkRwfYzj7NL2x48m0AAAAAAH0bUABhGUdOEECf6HAU8PNzKZQvJk1B5DAAAAAAAF9eEAEzDJsAfbsuquQ7B4gsI0eERLC/EAAAAAADq+IDIh/nPeSKVyjryg33EX1lzOu95fEQAAAAAAdTr8gCjXjzONl/+2PUcddEA6O8JlGhAKAAAAAAFrf4y1KTNYzGYsScrZ1FKyaNQV7uj5NbUAAAAAAaPyx381GhQi6QebQBQ2bbN2ln8dOOD+2gAAAAAU9GsEADoBEcCjv8uoWrt/wVxwzHbZxhP4AAAAAADNOALyWKUQu5O7Qy8/IPd1ul0kzWwiAcMAAAAAAS2TXoBZCuTUV/1qLW/xoCraX2Jv9XUK4AAAAAAER9Flj2F9+ZRM1KWMIUMFrR+E/YMogAWuAAAAAASOmvvgd9ucqO/K73xO5z33Q04Mn1WrpMEAAAAAHAJev86Ckcs9bc1qV+Qcm1pX0+Ek9NPhDAAAAAAMOT5tAIY+MD4j7Vx6pcKmWrfmLAV/eB+HAAAAAAgmKZ4AtSpJmecTzccCWIUeUna2nAHdhvQAAAAAA9jV64BlM7tVnlMn4rSTVuBrGd/rc3LEWQEAAAACTYyuwLxA3NNyqJySg9OvuK+zQDxcCLWeAAAAAQAB+kAAAAABJsZXYAAAAAJNjK7A2ojzYWi7PGsNZ2QrnwZF0YWZ4gwAAAAAAkR9WMDbGZ3g0hzz+ZDBqbHOr7MV6Mc8OgAAAAACxB3Y6OFhpAbpXKTJsngcVryISMP2ph2TAAAAAABqZPBA/8H6Ndvkl+uBXVdN81U8igZhMlsAAAAAAVMOjbAOfIZDbkvc3A9Tm6bBvbxfIb2KPwAAAAAAaE7hgBvONkYFyxcWNrWuSszaXQWNJnpZAAAAAEAJGmRYIDpIPQPthk7FP8hQNSKchk+TbNsAAAAAAxw69rUn1x/KoirmOwb1VaNyQLz0qW7aoQAAAAAAaguUpCy2zHWyiLqY9ck2Knq1+kmpIkY4AAAAAABVoxCwRoTV8sZ+c5Hz3h9NhYzXLR1DDokAAAAAAf8cHcBGxpCvb/1yLjmIEJ4rglDFLFOx2gAAAAACCYpngGvbqPKY+bN3c7jIpBFsP/M/QfkjAAAAAAAaE7hgc0Zf375YUsXC0d+tncI0X6RlqUUAAAAAASCMQ4CBNEMJOG90CFKRAyOfDIMQaMylPQAAAAAFpLqBHZFiRK5ASY3PfZOEKGU0WqiQLl5/AAAAAAQTFM8AlhV73DcjjfUjNWVo2z8hoj5k/1gAAAAAAYxe8oCtVJ6hZEduKuMOuAvyUMnx/Gj8PgAAAAABZaC8AOqY2XqSH5XeVxPpNdrO+WiuUuGUAAAAAAukO3QA9oiDBRLWgn7Tbr7roYbSdd2GxLwAAAAAAU3JOAASJmSsEswZHmevydrROlWjwwGZKAAAAAAAhyXBTyWjUVSBLgXs/89DE3+XvpLxNLa9AAAAAAHVYvbAPAEuS0r8tJop5K5KbCkTX5S4ZPUAAAAAATotE8BMietfyhCwcpFR4PV49Rtcucx40gAAAABFvWcxAGA/EmgHq7ZQtKBh/DmXDlmfF24NAAAAAAOlXb+cbx8jXvA/fxzzLbZ6MV/6I0ejkQkAAAAAAExagkAc0AzEdzdoRgKtfTtlM5HnsVgbzAEAAAGXdCDcAG+w+UExRfut8gFGthlImKYgQq5eAAAAAQAD9IAAAABD6LAkqwAAAZd0INwAdMn2fqUMqw3JzYVZCwa5jVq/V3gAAAAAAGempxiCcHNsFwdc1XhMjOqrJgh2AXJ3wAAAAAAAOsxNvpTk2KGPeovysqU+hB7BtmJNP9f0AAAAAAAuYYyCluk9tmHW5NWzV1th8r4irStTqF0AAAAAAaE7hgDH7Ie78axtcP1Wma23f+5IgxkM0wAAAAABDzN9gOkVFantKnQNmROvfRODXSl5XsP3AAAAAAFHsFQy8vZKgy0XKFdJP21+8iwJE/qP8L0AAAAABQL9b0AHf4b4nZr+T6Wt0yNLPE47WENakwAAAAACCYpngBUiyNIB7fOkkQfApVuhBqWb+DmjAAAAAAABMS0AF0OyTc7e81kJOa5YrvE7unefdWUAAAAAAIrfnE1JwQz5BndIzrH6D4EZWW5ErUeA4AAAAAAA/7yFPVE7F9SQJi+5H3ix9IqhZVaz35zeAAAAAABx2EmAXVwR9uccLyWANgANtPpCZEB+VYkAAAAAAYpPI6Jjl1WEynZMWqqkB+E0k4DQtlCdkAAAAAABoTuGAHS4jo1JVVycYGl8CXU0nee82Cu7AAAAAABoTuGAereFP6l3pPLGXtE1g/axb+pPyG0AAAAAAACYloB9xzt7uBipx0GD7hK006DEpK669QAAAAAMQJzHWYEm9YYnmqW+169XCpmtbEO3RfGcAAAAAABG8lOYhWpnK90aMzgR83f2/IgdRlt7vOYAAAAAAYAswp+H2AinILDPyxB2qjRZCP0ewWm1IwAAAAAEExTPAN3adKUUCkLLN6EWndNItAdzl+s9AQAAABFgHCAgjbtMhy3nJnljk5LVSC4m7+b0SF4AAAABAAH6QAAAAAiwDhAQAAAAEWAcICCQCsooRxBXgtiIL7P0PqBa3pxk7wAAAAAAFSIiCaDPCEG7MDrkdUByESqVnXLNe0AKAAAAAADuT7DA0dGzTVsvKzNiaBCWQxE8ZTZCaSkAAAAAAHx6dIDsFfcWirZDtnNiA4WL80DLaQoYnwAAAAABKrqMMu2g1TgGJgGtuPc/kXQIcTLlH4d9AAAAAAFZZgTqIeg1kQE3f0EIrhyCsXqij0HARLgAAAAAADQncMBQjggzDtHn3751PTERlbvHAAjlRgAAAAACcan7oFc/b76ZNqmRfG+ucmVyP4Ii4nyUAAAAAAAxW0M0Y3Fkyhqd4z/tW3FHQ5Rq3S3ZJi0AAAAAATe7d4B+/dAGT0o79Q35pncTIn4gs4gj4wAAAAAFMSY3tI/RYT1Y81PwDwHges0TgZCH8MyVAAAAAAbDZtUJkoh6ZBlpZ5HodJeE/gVWjF5A4cwAAAAAAGHzJbqbIEWrzff4Or1QbSAzhB8oPP3YRgAAAAABoTuGAL0hW/hz1ZvTRRXxNYms0jHoisGUAAAAAAYcnzaAwaHojiy+P4VVU50myij3MtJCrvoAAAAAA/44O4DHTOg3ne4wgI3+wHyL5dMPOIvZcQAAAAAAn9zE2cfWEDGeWHsx1+jGWA+EFi5K5d0pAAAAAADGL3lA9wTfUaCVBaoUq2hAvFbG8sAR97IAAAAAAGempxj68idB+LdO1kgFiy6bMJ7LeqpegwAAAAAAIR17kQzK7aAajjg4ibtBYT5SYsuJQwy7AAAAAADQncMAEFnF7Oay4k00xmP6msPCdL5epuQAAAAAD0/YOYARZR+yMfK9BJ6Z/QDDe04O+i4ubgAAAAABjtMp6hLkJZhtX8p2jumSh4Kpq+csi7c7AAAAAAaupz8AFt16S3HPi/GyXIctHoJ0WekQrcMAAAAAAGlJEo0XuFhSizsvYgkGuYnjk721z8PtJQAAAAAA73BiUCcmGWW5t0DB17reYUdI4lwwqoi2AAAAAAGhO4YAyByPwMIQxqzt6ram101EshjCttEBAAAAExyEIYBSt4dGCADSJ0TcqwBM9vo+bOHuoQAAAAEAAfpAAAAACY5CEMAAAAATHIQhgF3HmG72xGIZ3XOaa3rxP1sZ477hAAAAAAOqxe2Aah+Y9dYScXR+jn/ISclPhl75gl4AAAAAC5C8Wj2C6jSdcLl2RaAmHaUp8nrRJDwHLQAAAAADQncMAJAGXWu8PODQ9FECJeKl0bBEXU/TAAAAAAA5uvvWoBTIuWbqaV7R0vXkf/UMlbqHGVMAAAAAAaDcudShfE3QDAkqiiAExfdRjJrLRkOxSQAAAAAAGUFDLqsBAFzy529v/o5VtPcN1CZGO4ydAAAAAAASejmA13UqmEAcXBia4HFMnQj9Jupr4rMAAAAAAD1X3ZTZdfTfRNSoVt6wOE45WRlTAww24gAAAAAfVVI9xO0t4N2Z6zP4S50cjXeSTQ4e4H1IAAAAAADIS6KA9qtkF91G2UcMyvGlToEQZQSd/owAAAAAAD/G54D8CrKYJEjE2OMi5j1eOnc9ThELDQAAAAAMOT5tAPw8UCWAf7g+glcrMewhlpFUXJBvAAAAAACSq9WtH++SR8Zr1AwXkyLVrRS+4THS7NwAAAAAAPYBWTYg1/jclb2EAdFNWZB8wBwc3ref8wAAAAAAFJTcIC3AlicwaGaS4KhvXDOdKYMHzpCIAAAAAAgmKZ4AQZfC9B5J+MHxTa7p3CcF6iUQBfgAAAAAAVDikBdjS93ekI/o6BGtNj9PJDUz+fRtlAAAAAACXCTZHKOlf15BXuEjP27s4YS/eucg18XkAAAAAAB6SEtqq3nvmfH8cKNgVeIRfiwIfY9JxPEAAAAAAAvrwgDDY1tOJEfilKo4eAP/hb0Kl1baAwAAAAAA0wykR+PquDXLO497rxOnokyDxjmogciHAAAAAAZ/GcjA5sCI6X3OaNGDAlkoMRHgEMJD8R8AAAAAC60sRYD7Rj+OhPerzGbQ5zCCvq5ED0inNgAAAAACOEFNlwYMKQKIRQ19GVaIz8HVueAbEFJnAAAAAADwvjaZFAWahV9DBwMhBT/vdT301tng3soAAAAAAGhO4YAlkAIHv6plfslaiKtzdNHNvzoeXgAAAABGIHRWizDRSN3ZfO5j8Peyh/ule62jPEgaAAAAAAAR4aMAM2eLjeG1iZuBbQZ3V5gES+/q8IkAAAAAAYe0LyA7h5pKlWbESlxFCnsD/P848houkgAAAAAFlkn0zEncK2DDq1LCcw3JRi7poP2eRG7+AAAAAAML6xT1StmpJNJbT4uHK6zBRciMrrJRM+gAAAAAAI8NGABNTUUPX9bsZRa1sil7Qt0aIqnyCwAAAAABY9b4gGolT7+1xaEmP4+ApoaIlTum8oxjAAAAAABIPlx2ajJfnsii1+UGiWAZpT+RhxWxXugAAAAACno1ggB1y6sOnm5GM8fcP12pc13i+2cPMQAAAAAByuuWx4gOo0G9eIxWy3tBWGzXxksH5etJAAAAAAC1fwNAqIGYKCQbQBPmZzCA3o2F7T9Ca0YAAAAAATaQZQCrrPaC5gR8fWMiqexuFOd04rTBkAAAAAAAqxC5gK2J/OGbKU6xCYvsqfvvdX9Zw/2HAAAAAAFkb48A4JT1Yfr3RO/5STcOyEaWlo3GqdYAAAAAAAExLQDQ8Ol29l24w6kpvgSXUUTgcbfIOgEAAApoDv94IO4Jfo4ozTSGMmVSBEgJhqstuV2yAAAAAQAB+kAAAAU0B3+8EAAACmgO/3ggMxdVSo6qgupOEDhgHDmqKyuiTeYAAAAAAF4KKc49h3hfxED9UOpj9bv5IJnwYI+YeAAAAAACAClN/UDvEPrcHqPlgJXiKQiiMjZnxv/+AAAAAAEz3rKA2OqCrB+MYzlQaVEeTt4bJkho9eQBAAAAVuCJk2BC64a45gg3QHEZwy0MPL/1bDFZDQAAAAEAAfpAAAAAK3BEybAAAABW4ImTYGo7/+Jg7f7Q6M6ULdUIZqbgzQujAAAAAAElyQugbRpUUqykggqBfxpJHmYcKQzqykwAAAAAAEXeWkCS1hloC6Fi4iT2GkFy+MFfSnrVfQAAAAAGGw6rcJ7J8I4usaiC4y9WIq4q0LQJPbI/AAAAAAG6v/awoLyfT8BlDcynhgIbBFvio2Ye2+AAAAAADBRn+nOm9GrfEmSbyfGbY9DNh3RkKOJ1DwAAAAAAAjBW6MHXRjpVg32Tzhkqg11esdt6t4TMAAAAAAJUC+QAwiSK8SK3betXxYMjRP5Op5CA4cUAAAAACazb6GvTCqOI27p5t5t/Z9AYettHvmU4gAAAAAAFYEVwgNZQEcp2VTzKsI/tPR0xHWkhPn0iAAAAAGvrHcUI6lQWRUSZUjOCVxM8b69i/dFrjKEAAAAAARC0SrYMTemU0dXbH8vLbO3oAgI7JMbyXwAAAAADlelaACBZJizBpfuj5PS+hev3uLyqLYgBAAAAAABfXhAAIWFcGh8nvD0ZTzVBK5YVRLcBAckAAAAAAZ8kgj1rJEVTb7XfSMhgFkSPemmYss9uIgAAAAABLn5awG9OTNYHXwYUs4BItCPCuYig8FHeAAAAAAE47KSAmY3H4hu8QNRxnZQR1tnvR3f8/xMAAAAAAnyXX1jaUxWlDe8Rta5UzvRtnBJMVxs6VQAAAAAAPSeEgOB7uBcED+cSaJryyfGVjfCWZGLCAAAAAAN+EdYA6w1a6DOXOar2z3ZPDKH7m0Rz9BEAAAAAAMXHtyT6uFii47Vo57nOq/jEAaUBzSkkoAAAAAAAC/4+HB+adiuHF+7CpadvbYdkyLO7bw80AAAAAAAPpW6gMo4Lg0vjiMcHDsjqEG+ERBPE110AAAAAGHqk12bL81Dy7h0G7XEKtSfYcOYIHwdaLAEAAAAECfSwIF0ChtnDy8jOy5Dwn+unbNS7k8uKAAAAAQAB+kAAAAACBPpYEAAAAAQJ9LAggG8cRl3MybZy7dTm1wUtEb/urmQAAAAAAFe+wuaMftON+6q4NmoJLjOb7GGXeqDcNQAAAAAAZnQ1DqdnqclzqxupFPrEGi5DTzPeq14fAAAAADfxfbowr5bZRvPrg2hmyV8o6jUh4m/T+4UAAAAAAGzpLzfDE1yGZFrJZck9PR4anwwexYahUAAAAAAHlCGVgN5xz8NIeiGJCFdJnWzma/rEIOZFAAAAAAunNmSA77Lm36hkuPM2o9RglnI4VTXYwmAAAAAAAT5J7wAAh4uMzA+j7uf+Kjj1wHORL0MuUgAAAAACiws2PUg+31GmD47OnjWMFDFQ88zl4WKvAQAAABFPkc/ABXgilYS3kbMbsHD0cwOoMy4SpYQAAAABAAH6QAAAAAinyOfgAAAAEU+Rz8Aulyf31NcP3UWmoEYILwfsQWXErAAAAAAAbzGbyDMeeWkL8oxG4561pboJPpp5rkfeAAAAAAFg/bsDSpZXLrQBCYN54RRsdIPh+ANfWNUAAAAAEICIDNtMLHWjr7lnQzfw+vUpPfa5YIIufQAAAAACIwD1gE31KHRV9cA5odwO2RX2uKgksacWAAAAAACn8SoATtUae5NPFZEMIpnUuaomCzSEcQoAAAAAANAFLIBRK6srN7v7lfizO5jvR8eOZgZNYwAAAAAG0TNKMmMxER/xXb9Tt7n1zXP9DI8EXqAhAAAAAAAAmJaAcx8I0dE3x/JzwPiImp8iY+IK3l0AAAAAHAh/T0igvIIkrN6k3peo8XJGAphgbmQ6tAAAAAAIvAI2gK9nYN2sIsfs54DxhtT8pl1tDoveAAAAAAAX14QAysVG+6rQv+NEUa77Tu1pwZOcVwEAAAAAATe2lGzlCUWIYZKvjeqHIGMnmOTlBfnsuAAAAAAALTRhNPcw3t6n2Seh5fvn6348Vr060+BBAAAAAAEzlqRU/tNBJtfAq0lwEApboSq3d5mMObkAAAAAAaQj02oBg/CuqvFBjFnQP4Dv7mJ8G2P+JAAAAAAAM0ipgAV52XMS4j0sQG/dY7VmRkXCviSxAAAAAAAlWmlHDrV//ZydpE6kHjg6MHLSqkxrLxEAAAAB0zue84AaAnj2oC9nzDS00UG9ENy4PgNgZgAAAAAAZoUeADCglc+IE18l2MyUut4oD4sZJ79zAAAAAABoTuGAN7xKULE1tUCe4gPFOkmT2ghlQ5YAAAAAGAU/TlA+QTSAvhFket1/zPht3jZDH4rgDgAAAAAEee8qC0DQYSFbDDpAnQWdzgJIzCZeRJgwAAAAAABCKbXfYYPZKcOP9EUUmvYMLXadvXX+PN8AAAAAEGPttwBi+JHsO9DttaO2kbSJk2aBgzSU7wAAAAAEqBfIAITf1HMI+8veQ26p5d3w28Jy//B6AAAAAABdQ21grP0G4b4KmM8130MnjCdk0sjawGoAAAAAAAL68IDSr3UQK1eXPD0Ehwhdz8oHALRDuAAAAAAA0J3DADPdVyDo0q86YI0I5Tq3o77n5xGcAAAAAACseb7KNd9EEoRlHaeWxcZgFQIPaz2ZH9QAAAAAAFxE4vgqLY7Y65NL2XTweCPft2wEApSriQEAAAARYBwgIDsRGsSB2Z1mwUyCSZ1BVVNkqHkrAAAAAQAB+kAAAAAIsA4QEAAAABFgHCAgYSBYHopT3+TRVHZx0hwspeX9xzcAAAAAB1WL2wByZ9uzoigpcn8Jl/DWZJZRhHxTdwAAAAAulsjTwYNVFLixtZuWB3s3B7tMwFgQkXkYAAAAAAf6GD2BuYuM7Or6S2+RCTsNd38uABX//zQAAAAAAALkDSDMWV/4Z5Ee+EaqfwIAnBrE0FPIqQAAAAAAaE7hgNOxCDg2GonCbXUsXJtevJodXS+6AAAAAAIJimeA1G2vMllRVOBQQrgqDfGYSwVONCEAAAAAADUyeCDZkX0IV6PEeAwBn/WeHUP+lNuI8gAAAAB4MuXagA2ljSnUdQm0D6VHXsDds0SQGedTAAAAAABmaaBWJvKEiTVjVkzNwN4+qua48RG2fE8AAAAAAM4f8cA3QEH5QFLqCyXjWmjnVlWKBSk2eAAAAAALpDt0AEaQYgjro6DUnQce8e47JU7epfNnAAAAAABhoSFGdQD0lQ8VI/ODH36gQcN5jUVMzOQAAAAAGRHETaCwoXywgm5TJMFQtzMY46QebiFvaAAAAAAAJApINbtelU8DGJ02ZGI3Sp8bfgp5kc/hAAAAAAkGiAVF4lkhySzm61y3KYk+tjtjg7qwlZoAAAAAAJOFgMD9zSa0i1YM3NcchML/Y2hlzOze6gAAAAACQe+RO/+jGV4o+ieUqxqk/sZmB6dc4017AAAAAAAAmJaAFZAup+xBqYC1ShVkdvJ8rumjPSQAAAAAADMcaWAe3T1/4t27OTt03zcLAbz+sKUnvQAAAAAAQJrFyCQ+rUALZ8VKNtYeC2IoIJiQeXniAAAAAAAAmJaAPLDomQ+CYRkpvEdEl8pbrPXDMOgAAAAABSrIb0yATiiSBamVc69e/cv8Z4zSD52tCwAAAAAAD6VuoJfiX5BnDyyiCYsdzAtBWgwzxWpoAAAAAAAjw0YA2Gq/6H3iCvWr4JWRU8+cTqP6PgIAAAAAAGeuqeDZ83FcB2ddGwMklsiJxV9tvfguXAAAAAAT2MzXmdyiN6g4r3uWf1upeXY5/OUYGVvXAAAAAAB4eh6D868ADWMw/SCbQHE4sERYuX3XF6MAAAAAAeSV9IACT84yMGw0vH+OGpLRC5wqUkYLKQAAAAAAyAgdWAgTNnDbtAPyoH3iw5xj+VOdSfH9AAAAAAA3zs3gIAAAZOsi91YM6XJD1wJuiI6zuCwAAAAAASoF8gAfcLAllNDxhaXtGZq6SD7NpnBXGAEAAAAI1BnQwJ1RS59Q5V67R1QlekaiouUXoktPAAAAAQAB+kAAAAAEagzoYAAAAAjUGdDApe9Bc7emHEbezzTC6ynOsYy76IMAAAAAAHK9K0CmigrSsSDurXLSlRvD3u1XN9aS4AAAAAAA3bqyALz4J23WfxrT4ELVR8Nu5qD0ztBDAAAAAAAVLK9Q09sk5O3vApKxqMgwWVeL7a3Nk/QAAAAABBMUzwDXBOcdFghZRUcGIAbexQJ9V/snAAAAAAAEIQiZfuRxsiwlmzXhWo/AYiOb3ZoURSxIAAAAAADsWxe05/PXQHf8/Z4GRBS6/a46l6NwipEAAAAAAUxLv8ACBiAPMdEkx8E+0ZPBKMn3X+kgqAAAAAABOOykgAwfQwlvZlJMrzw13SPR5sBubhBrAAAAAALnMj+UEkQKTFnQ5DVx1AkwgsSfKyAWcI0AAAAAAGhO4YAZi39ekyj75PrrsaYOV5X0VoNOQgAAAAABCj7VYxwUuhtwzxYVJ+cHkvVfH3E3tmsfAAAAAEDI/g6AQH0pRBlPhUVWuL6KTBcMMekFJIQAAAAAAJx2UkBP5LXcx4HcDfy8h9SFSre7ne1qpQAAAAA7k61Pi1MIWuC4pZCiwcGirNn1LJGhNn0vAAAAAAFA9wN5ZKE4zdtpTgwNn4oESCffW7BAfjAAAAAAAyB9iYBl4xKkftaBVGvrZxrL2bMD/U+shgAAAAAAcctmq2bfraIhdSUq02ds5jnR3o+kyZjUAAAAAABoTuGALI0MybifrIaBJbdT7dDoRAJ9WCwBAAAACBPq5uBypjJGVsUlowVm1TjbDVg3qLkWLwAAAAEAAfpAAAAABAn1c3AAAAAIE+rm4JKdyCA10jfskbHUwivK0vxNmNGpAAAAAAI1Z6d2qlB4dvmwHdfBb329FMf3pxQoeM4AAAAAADlelaAK/FDpOaSQ3VL8gsLYLuw4xQ3M4AEAAACLsslwAN7CXQJCB0aDhGWcjpNT5yzvwtGKAAAAAQAB+kAAAABF2WS4AAAAAIuyyXAA7qq6tmxNmApHsIQXzneGSvYoMKMAAAAAAgmKZ4D0NAT/jorO50rnay0G8FvQR0JcXQAAAAAAXGMfgPX2cp9VJmaQAOF2e8zh2R8sIV8wAAAAAALFI+rACKoF+3UTRLbv4M8kfbsfQx09rBwAAAAAAD6VuoAeLi9MQRljJN8+NyRQMojD2EoufAAAAAB0alKIACrgGaneSjG7WFJwfVVxteiBg8VJAAAAAAw8EEZYLpuSd8UvXmRsGWW2lxTuOUOG9UQAAAAAAJurwXRCNlwlfYdu0pX0dhPcnNuVASxR3QAAAAAAO0bdoHm0YUQVhvuYEtQE7MFbTni3mr4fAAAAAAPRUqJLfzOW2PJv/2z5EcuCh+NJa3eL76MAAAAAAJTKO7qw5LcP4kZV+W7rCEUKB4rZ8b5Y7QAAAAADsj4C/7Zte1Bt5FhMOuFnkSruPVLFtHP8AAAAAABJ9RsAwVwH5/VSx+jhc7JlgzU/EYDzZfYAAAAAATKqeEDRKsahY3IZy2HK9K26rOWsCcOkeQAAAAAAaE7hgNE9Y35EtqahaNTIFIPey6JDzq8cAAAAAASoF8gA0Z5fbIKe6RREnHFuQMaFybGGGugAAAAAAA+KurDnnFufWCQG8EviguiZ4gTUT8zgxgAAAAAAaE7hgP8i7iigUbnU2CoHGjq1wfkyzZMyAAAAACeVxs1BBd5Q7dWQOGrP1E1QIOft3pnnTYYAAAAAAaVgo80GIByQjXn6g2LaXQS34V8aWghylAAAAAABOOykgArf0nyVXS2QU03/Yq+7Q1DD9E7aAAAAAAAPSVUkIfPCwI2Gf4/TP2tizWO23ZrFz+4AAAAAAJLdqABXjaWzqEuG9+7NBlPl9jYHwBm1+gAAAAACVQMVQH/oAHW8LfzK1/VO2DcNz4ShvxQYAAAAAASS2W60m1X1uKcoMHB6AiRbYFPaYHvZC4wAAAAAAACYloCeA5rQG+GuY1xyYiZW97i82CCZ5QAAAABl3Qg3AKlTzGlzkMQy/OaeqmHjM3G1qVnmAAAAAel4IjpJrGOEp9t27pxkZG9gi3msZjIkbXQAAAAAAS5+WsC3KTPxIZ7cdWzq8UIUq1Pu6ehDfgAAAAACx3fFe8K/tyfbqrHQ/Jz7LodGrHW4QH98AAAAAAmM+4cAxUrq07WsHuIF2iVrQYBEN/eAJA4AAAAAEExTPADU9UsBOpncCMzm0q1kLTV4el5CuQAAAAAA0qpyVvJRgePPMb0hm4dnkfwy/Rgg5crYAAAAAAOcLpOA9LeuTIA9xMB7vGx+ktUXi/liwNgAAAAAABoTuGCPtA0sdhlvcFbQJbX/8iwIhoSpSgEAAAARYBwgIPVu8ChItazx+UNbySJOiX0Sh9SbAAAAAQAB+kAAAAAIsA4QEAAAABFgHCAgCIggXpt8eJbc3rw4vH5BZXXx8rwAAAAAAJx2UkAPgKTBTlPNq6TNecNqCQF9t6/IugAAAAAAAmz4lxCDGMMJ623L9PqFNGdz1kNBJa2pAAAAAAEJIQ4EFck7GerFK/oE2IDUy4IjZmnbUu8AAAAAAKR1g27CPleEST9+StJSGecMbkSHrL2HAQEAAAC2cSH6IDhds3pSZ1iicjZ9YdpIbhZUudluAAAAAQAB+kAAAABbOJD9EAAAALZxIfogPUEmpo2G/1PlkI0CGiLFP5jCH9UAAAAAABLGhMBIyjmB58UvK5NT/hFjg1za/l8vEgAAAAABpd6EZktw7mS3TObPcT6vjhFlUWcL4+b6AAAAAABl8qIAe84Ubxc906HoQnbWJbdhdxd27lsAAAAAADA8CjigTlWkADeZ5DXUe/6qOz5qalejSgAAAAAXEpyXIKMTB0vHpapDVxshRXvW0BKdeDb3AAAAAIBGbrNmpWNFsDy0yGDBkro94fqOVk7IUeAAAAAAAHzDRLG8BrmwY6tMTL1BcYkqdmmnBbJDnAAAAAAAAJiWgL1Pb/FrZGwS/IQWrtr9SyilDeZYAAAAAABkI8If0WFokq1pWY/M+hN7LphHvVYzmm4AAAAAAA5fUQ0Xv2Y+e+a4wsfRH1i3QmsZHspROAAAAAABoTuGABltDJUJ+z6zPPU+5YbJgN+5OSn1AAAAAAQTFM8AJUqGrrHugw4qvogUZem0SqoGFvkAAAAAA1y/RM6M1MWFGBq2EflDjErdfB12K8oMvAEAAAAi7LJcAHBBEPfSCpDdmJVuzahOTQbFBS9SAAAAAQAB+kAAAAARdlkuAAAAACLsslwAm8mef7EUmV1h3ZcC1loKBgTvTMAAAAAAAAW42ACnFzbEa9w1t/NMoRC3oMW8dGLbWQAAAAADQncMAKiaH5mrhjK188SSm0zW4TTl7RInAAAAAASJoxrKz/DBV/2V9A5PVfwzeRZLqJ+3A1gAAAAABEy9lkPSMTuFav7kZeozTU2ToBfUK7zdOQAAAAADAAF/QOtXtd209rSybckE60d0+1TBA8UEAAAAAAABMS0A9rHijnL/PCoYNd5jo/OdD9DwI50AAAAAAB3NZQD/56QOYHUTzzGK7/05KdNYTv+3bgAAAAASoF8gAA0FnL6U2Vu6AaJA1S1UazQ3MyJ1AAAAAABoTuGAI4DwCm3qnE7TAlsiheV4KUbaZUwAAAAAADlkO1gvBTLj+oEe+juTKi3a7b1w6T4J9wAAAAAATQ+LgTXW23aPlzKTKG5vtfvjPrOa06zuAAAAAAD4jr3ZQ4aIv79y4FNiNThwSb49YWmZY6EAAAAABg7j8+lFDK+JkWUAC3YIdacykx6HIZshOwAAAAAACm5JwE5LftlDarTof3S8mcX9KGwJOQADAAAAAAHcTsFcbYcm4zaGR7q2wnf8q+VM5jciR/kAAAAAABl0TZWitrCZSmOErO+MOAZnnAfhKzeougAAAAAAIuL4ILlmrquxqpn/VhYao7LoHFXwgIcxAAAAAADQncMA0xU2UfCqJL8/yT82bOD1GuqgpOYAAAAAATjspID+SR11QTImsYhBmJvUtU/tG5UytwAAAABMK3oFnQJm5O799ZLTxwPW/mJjn3g7Wcx3AAAAAAA4U45Ae2bZjSafmhZ6QNWXs/YNr6piEeAAAAAAAADaM2B9y5x6w/T5GqxPylApfMe7zzuxeAAAAAAAaE7hgILBG8AG+D5BcGmoqC9GuKXlxc19AAAAAEhHoSCOiQoUIDiGyaIBfIyPU4OUjF3x/owAAAAABiJpCDTIZ66SOPNsYaiSiyii1M+F6h/r3QAAAAABoTuGAM3kgEXoJ+RE43xulMd6uZoJx58HAAAAAAGPdQStz/2Yxo27Z92vHfPpPNI0jiZZJfkAAAAAAGjUZTDs4V93S1nbEGenYw2DvW0rZgkTlgAAAAAAnHZSQALyjUqjj7Q8SJ9geflmGyyCgUpBAAAAAAgmVQNC/ApCG350YYaLIuo8qXkE4+ANAqwBAAAmMuMUoAAHoKVVnvfEkZZBqsP64m7eODzuhAAAAAEAA/SAAAAB6PHBCAAAACYy4xSgABWUAfGKhyn7HLj5sQnTofl716SZAAAAAAA1DFKAVN+tFqLOsipJT3U2M8o+ya7mg6oAAAAAABoTuGBdtcG56yHxr4+RG/L9gJZTWNQbvQAAAAAAAWd/QIQNsBw7FWHrg6iM31RKT6niODMOAAAAAAE47KSAmnQn+d03FK9xRnlVI6Ui8vBoK0oAAAAAG1iQxoCvzTE3W5xM/zxqiu8xcuuo0a0KDAAAAAABYk0L47U0P/OVCpss33GuMglm/mAQ0b3gAAAAAAKgo5qzxLmg7KYIrJThxoH+M7EGNVmHPlAAAAAAAJIICIDJP1SlDcNi6eHmVzW/IAhlxKJL7wAAAAAAdk6L8P5dqvAz50OcgWq8sJp61Th+02l1AAAAAAAAmJaAAT+VqcjeLZgKfCcnPs+Dw2KLsrsAAAAAAsbIZAoob7QBmRNT35GEpC0xI8yp4QgrmwAAAAAAlkSAFHtS2j5qACr3EKUpSKL4CQohDkwaAAAAACi9nukAi+uSRxEXX/ToEqb8IeCP7G8ihOEAAAAAAA+lbqCUBiDp2sKaJqC4Q8uvKt5DqwbhdQAAAAABoTuGAJ1LISplTTp/UpGujgHgR+3mQjV7AAAAACIT3MFZu5RFu+l7TGCYeq076jR7wcxmPUsAAAAAABZaC8C+6Ppod9ZjjGkboWo4MhVTJkFJrgAAAAAGupMBAMOQWoDIWbUe+sZDnGBI6U8wIFE/AAAAAACy0F4AznUkV4Dq7As9bqHBRfvU/PcI59sAAAAACcZt1sp8THwGJ7VxGJpuG6BQRYtgKyPoMQEAAABW4ImTYNDMUnYX2P8/CK5z+BFWrS49GStGAAAAAQAB+kAAAAArcETJsAAAAFbgiZNg0xiXg08sy1rzvZTjnlK7ZSO0XOwAAAAAAndQK3DaNw2YFtml01jmqnffmFz6t8zNWAAAAAAB0kHcuOKvVVPckUvf71M+exiQxBh/+7KIAAAAAKdKWZCQfZiibudnJvk0RcZX1zAlAk2Mt7YBAAAA2GKmRgDoJbLOZdYZhAwSj/k5d/Ff7cOsqwAAAAEAAfpAAAAAbDFTIwAAAADYYqZGAC3DFJ1kPXMLDszkWeuHj8gnWdDuAAAAAAFrJGTwcTAA2RCtYF6C0NjCY7mPdfQQc8EAAAAAB2iqQI51GWl0tj3SdKtkR2qF5GXt0oOjKQAAAAAARBs0zqPCkFXkCuNMvvUjEVVDi7fdKs9GAAAAAAO+oSt51likF9Ok1fYRTZcjKvOXgGhF3dUAAAAAAAX2qT/ZkfnLCDmIDYdlrpxB8gFWMkdimgAAAAALcYwbcN5Q/OM/1wthkKlmXVXIFrK4xIrUAAAAABNa7yKA3vEVbRPKB9ekJf5okgmwEmi236YAAAAAAO3GytrkVOFL4GFbmyqzY+4dv0rZAJYsxQAAAAAAZjLYLwg91lygmm9ppZ7cK8mNOeptYht2AAAAAACw/XLAD6rJR34iEq7216rmCsvoa2W7SMYAAAAAApphQwARUAzdaFKjOD+w9mLkhHpFE5TaPgAAAAABwPotKxTswKmbsK/28SJKY60ZnMvVgI6iAAAAABDJ1isOFwvPsoEpBwrvmQyjEHAeXYNC9dsAAAAAAACmUiAX3f5EJYgRwRJ/M/uBbCBCOAWQfQAAAABII6Fohx3FjULD3W5a2oCBJpMT2Nnb3G9jAAAAAABoTuGAIj13CWZISV8aTmfwDqZrLSqep/EAAAAAADMcaWAO6ZQeEtEeznMmG2l/NKKA0srv1AEAAAAIp8jn4DHXvxisoV/Y5vp0ea9T5DHfph8eAAAAAQAB+kAAAAAEU+Rz8AAAAAinyOfgNGFX86IilC57CcoYsRkeTalPCY0AAAAAABEw7fw01EQ7OanwDC7Tv/mqoCE9gpQ7fgAAAAAAlQL5AFqhiBe0dQ+oKZ9evua4ttnj6wVQAAAAAAQTFM8AbsgA6II3ZY1WOUBMk7XTMWwmKRsAAAAAAnQdojRyqS1QPybsoeJApvu6Ij2fKilpkwAAAAAAaE7hgIcoZYz/59SFLqD6rRv6tiu8/drgAAAAACKwL92Y3O8r9u+xCGtj+IVWhzno3v3KLqQBAAABl3Qg3ACXnPcPh+wsgHDVyxLgXytqRmtxPAAAAAEAA/SAAAAAQ+iwJKsAAAGXdCDcAKcM4lD/xmXau3ryMTVzXarQNZYyAAAAAAA/xueAuHovWaz3mpj8w0PCzvIPoMZfMIkAAAAAAA7sDVjeOKPuqAtU0dX1mwpGcTyxbkElpgAAAAABOOykgN6IqVa4LbuB4KohEnfaRkXJY/bYAAAAAAA7pXhg3xhaMwp4Mcyx1/+/dVi1s29XEbkAAAAAAACYloDfQxGZNG4KxnKitG5cMmTkeFOZQQAAAAADqsXtgDzYQcPoLLbJhT4nEbk0P4oNHXcwAQAAAFbgiZNg+UFtfv8ctLPy5NhebIKf8hHmWyAAAAABAAH6QAAAACtwRMmwAAAAVuCJk2AAHwh5cPNKRNAH5szraGEXCDEioAAAAAAThYJV0AFiKmM5uHciHp8kiQc//Qq+zQFEAAAAADo1wdqADjjSxYV+ldZJ1ZiOtrTlanr8+e8AAAAAFPdl9IAQtrL+5pg8A+l4iFxl6FrX9A0DywAAAAAAPy5RAIR4FjCczDILzX7KG6SQWnDTt/E5AQAAAAOGq63gE1bNDnqzQuRlX8L1wLrpjKp6UFkAAAABAAH6QAAAAAHDVdbwAAAAA4arreAeNCkdN0ig58DorfaXAK0hs4jvqAAAAAACHmb7ACtg7Y42gKcQTeLeZc9R2VCt0GRRAAAAAACAZ6S5Lz337a9vf21GDdysur5nsi1Q+N0AAAAAAAOZoYAym1/UHCNgxaqUbjFnK+tB8GHnIAAAAAAEZelw5zgTnVX2fgGLvDbV0WXNsy9ES/ddAAAAAEPwVkqhQBivrgUJfqTl3KWc9+bIyyMKqUEAAAAAAGhO4YBAbYvqplqxGm5+hmJa9P+prO1n7AAAAAAEOS7tH0rGo+mc89/hAkqEzeFeErk0Ftg0AAAAABj+7vskUb97Zt1uGZW3p7M5VqhjLtxQ6mMAAAAADEPuU6BnRrV8OoyhLM26jiWaVdmnwk1XUgAAAAAA4kRJDJM9kDWS/RDd9jAdioorFPv+aqW0AAAAAAEBL2pCol4vSejhD1yIuJIR/gsXgvFjm5UAAAAAAHTTOgCxf87XTpYB0ajapO7erxOJu4WpsgAAAAAIJimeAL0fT8ZrE21l8XP1LpAm67K767BwAAAAAAADkBgY2aaeHvvEF2YWFeqXTvB4hgPrqYgAAAAAEEdiKNPxxY8070GWzOi4nVDOQUtLQSZL2QAAAAAGwMhZ5hLtKhQTX7ZhovQcphg8+pwxJHCZAAAAAAc73+UgFkkaaOb1UbCIAlTZc4m/0RvvR4IAAAAAADaP5UBY7CYqpGEU9WjM00CLhubUjJbHSgEAAAFhQCrEABtGui7sbwJTKMuHO3vOQXvphj0kAAAAAQAB+kAAAACwoBViAAAAAWFAKsQALERmhA7H9NWM86QV9P7Zu7ipoQYAAAAAAhP4sUCSTTXnDqRRBKbhw0ZSWYpu5plccwEAAAAi7LJcACz+V6k/c+TlU9wnn9DyeioQDYNEAAAAAQAB+kAAAAARdlkuAAAAACLsslwALWjSIiZ0Rl2HjaJjaXcG4wRK0EQAAAAAANCdwwAt0WaMqIT2ZKA5SsnrCd8OUjxvRwAAAAAAaE7hgGlA7sAoSU+R+GaLiNNh07nHnwv5AAAAAAZCsocAcGM9vEMH1rterEOHv7TkxXClU2sAAAAABrRYMIdyfEsi1uP+C1EcocPxF+zLfCQu4AAAAAADPR/cAHUxVjjO3paFEQgZTqGIKrrxyiL5AAAAABbGQIhMhwWt+hOpx3jhV+e9Bc5aF0x2OwgAAAAABsCI4gCHSL3lP4BV1JRbHNtkI2zgf4o3cQAAAAAANxZ7N5KT5qeyuuS6MPrWJdj4mLKPv9fdAAAAADEf++eAvQuwb7B9ojSLLO3Rw5Nx4jT0VwEAAAAAACrELmDGMnEWViiaKEr17rkzIAAm90BirgAAAAAFokqIMMc3DacHtOWS2qzTRqDo/+NNXNnkAAAAABjtSW3G0Y5cFl7LogFaPJlK0lDdKnIC/8oAAAAAAJx2UkDZCB786mkX4LMp1tapzm6aUmGV5gAAAAAAn9PtGOjWqzhPmWH/SRQj8eV535er30vxAAAAAACBV5KA+NrQw9jSs5qYiqHoSKPDxhwpAp8AAAAAAGempxgQj+ojh3kCVX5Y+/mVfXb6UDvFeQAAAAABoTuGABf2vN8gQRLlXF8B2lh82N7BzthGAAAAAADXaHiVJZ4JpVtVnXVkDcDljqLtmFZPE34AAAAAACiH+gArumS6dlIrjE3Ze2eTSLZtHEY56QAAAAARqpEYtkXdaTsRGkYLq4mGVjCar/BrQDkqAAAAAABGRPJtesJPQIGZbRrO+4VVioV1AGYiiHYAAAAAAACYloB+DuWGrEZ8RmLlC2w4mrf66TwgvQAAAAADVlu7NX9t8dYtdZ/CaHps0+A+bUCF7DwGAAAAAAAqUb2AlASuwWwYulj5tPWFHzOd7mRCMRsAAAAAAA0YDRunE8szjTiA/Ut13qLojqDa4bvxJgAAAAABq2PLtbd3FR5ANud5gnPkeG4MxJhHLlRoAAAAAAGMXvKA2U0FR1JQeqyyYzeeryN3PUThzQUAAAAAAOarg4AKuMOiCOJs+5PD8XjJSqIZw3OnWwAAAAABeUwigCqlN2CHRRcRAyjGP7dIfdIsvm3JAAAAABbYqMjuOzzDtmXjJZtNm8u/UaINn00D1FoAAAAAAWKly4BFPURZI7cw5E3HIo+Y3QCvfXsvOQAAAAAAnHZSQG+x2ztdD2/grIiGWefQWvJoRbP5AAAAAAEN8w5Ajz/0mAQmmEFVdBy1wlrAHok/72IAAAAAABc+7YCqaR/WxpcnbhDvsoL0gwQH5/GQygAAAAAAaE7hgKshqM8D0yGg9PG+8EcJZ6lYepc/AAAAAAIIcVxzBtHKSl937L3e2/FvUI+oIuLGdgYBAAAA2GKmRgC164aTWw4MuslRIkp1R1rUoR6wNwAAAAEAAfpAAAAAbDFTIwAAAADYYqZGAL+15GoCQl+JY3PrySK0qzDSWMS7AAAAAEohZ1UA+BQ8TgPB6q8vwjBByPUrqUUzNCoAAAAAAJvOF9j7p43Q+LEzPzjW1lQgd+tQc7VoJgAAAAAAFpbkgP62yC+lZ8nSoNgexjkXY2Sew9pTAAAAAAAexVmQB6KfHV2XSDQmxsQA0qGMKshSJxkAAAAABBfGGYYHpEXRrJjqyWt3NILt/xrVh+lcoQAAAAABoTuGABX2DPbkIFYRQJ1uZcDCW/m/wIoQAAAAAAIJimeAJsvwsvkk9yddDVjQdgD8PaP8xhAAAAAABjF7ygBEoW9UDh8+EBmGyY+EMSQOAfmvzAAAAAAF6YELnEbCnL2BVbRsp5qGn309c5vJDm+nAAAAAAFaoW5hlwI1G0HBXUBgzO3a+Hf+IIDvq6oBAAAAIuyyXACdQDI74lexHrMHyTfL3aruaueB0gAAAAEAAfpAAAAAEXZZLgAAAAAi7LJcAJ+c4MA3bfw1hyypF9qtWfEdjepbAAAAAAALtlogsKUHIyyO0dQ42W0RRRYgPHWojRcAAAAAAGlZ6OCzkQOzkCGN+RJmJnwYZMup/r21ogAAAAAD/aWoxL67zvl5WcnAQdS7qyr8TlbRFhrfAAAAAAQTFM8AyjNaMeYJnA0PwAhcHqJTX4HcDRIAAAAAA8kFw2DOML8ndcUnOu9euU+y7Rg8M7MysAAAAAALpDt0AKzNGRgoAywinUr0OTaoFKDao6fdAQAAABFPmveA1HuxltqyapyAHQMw5oEPHHY+cy4AAAABAAH6QAAAAAinzXvAAAAAEU+a94DgL7IuanGPiOTeCFKkptpq4tjBRwAAAAACCYpngOXzSo5awrHNgMNVblMkJpNRNEYAAAAAAABmONLAFJ6sXqyVMKN3jx0zR3bk21K0si8AAAAAAUrOR4AdZ0n+tQ8BI8KjEsS3lPC/6lpsigAAAAAAaE7hgB4PrkU8jcaLUJaitOKnHfluHEgfAAAAAACxLMAgSLsZvDBRw5BbIfeGrPGgpirY7KgAAAAAADIALXBYocStsNr+ebOFiGeGaO3RWmMeiAAAAAADAQkQa15PwMRWgynixxsg0cn4M+CU7hCpAAAAAADQvc4gajwOZlrx6mh/2PbDI/fAIrnIS+QAAAAAAEnx7sB/BiCyKcexQ31Tti6eRMd5SK7GFAAAAAAAHoVNW5tzWr8m9PRqHzSYpseGFQc3bpuPAAAAAAaE7hgApiTOYlMKJO0qDCjp94Lovbg/pG4AAAAA9HjghAC4oT7cCq/L/MKwNydCqM/1RUnSXAAAAAAAWkGbmsJNAIkOC+ORsyWysHdd7Rrb4xNVAAAAAABGtLN+y43Vni0D3euaVzCjLBKRWQU5cNkBAAAAKwApS2DZJF61hnKzpGrQMXuLmVe2eq3uYAAAAAEAAfpAAAAAFYAUpbAAAAArAClLYNtpiFCZdSzB7Wj3jIUlKUlbiayEAAAAAAEqBfIA57kNHsBQLFahU7/RZn+VtsKl0IYAAAAAABUQ8QwL7LmiJezrvaPDTBdkeKJrZ31uBQAAAAAAjiOiYFxAhOHZOjHEp+W0h51VfLTshEUQAAAAAAFY0xDaZLOrlmAIeSuXOR/RuZw9Ebta20QAAAAAAUfTVwBv72wgEbfhoh8qSDIgRg26QWa40QAAAAAThw40t3OZ3iUVFK5CdMUxBJsDkNMdM8WHAAAAAAACBsyAgPwT/VG1gT69JUi9K8NbbItSjU0AAAAAAD/G54CC8owlG5D0khP1pcgyYoNSTW8t0QAAAAAAH6Tajo6tIX2z7Z2TUCsEE1jT5FPWQTVVAAAAAAE47KSAnTXP1BNHvGXn00vyZWKOts6VcNUAAAAAA3ZGo5qmk8n5SKMzV/g/yqoobhNQBuwzuwAAAAAAATEtAK88xWwfu7PmFLMOqV1x0zCHO9KoAAAAAAB7+kgAv3RM6358Uj+qkI2cPW2tzxbjkPoAAAAAAACYloDDE4dsA/ogGsQKIiVFPgMonrKOYgAAAAAAJr42gOXdHpBMOtfLcIiCfMwJrsjfQY8zAAAAAAFvH3Wg9DlP891oZaQzatDlw6Q6DwjxtbMAAAAAAFWIXMBY0iZ+jpBsCPX8thFBbpfguthcuAAAAAAAnMKdgGtwdc6FdEYI9wCck0wY1Y9+VHZPAAAAAAJBcZ9ggdYE1EhqZmEMenDxw24L5nHD5pwAAAAAAqGIaGKKw5EOsaEyebhuOuUTQq5YXX1VbgAAAAACHTmXGaQhdx0GFq4mGf+Rn7enP/DmFq/lAAAAAADQncMAqrtbayuVggLKjY4lGDNYVRExtb4AAAAAAB1PX3roaqGogtTNZIpqxXSP8j8Ry7aQdQAAAAAA2wwMwOnY7BA9aHMt440NNo1KJgYJACLFAAAAAAEVAcOb9w96V1s8xOo+9wr4Ux9KpSX7hRkAAAAAAAfSt1D9GW8K7P48nvdYLAD3Kx/w3l08YwAAAAAABMrOgP60Szml9ieho9DB7RaS1kRXVzOOAAAAAAFjo8h0AVNirhxbDfG0Z19SoP6jzaNEKpIAAAAAAGdD2iAVvWfN5TqKbIY7jDA7KvJvsAiFOAAAAAAB2j1y/RwIRcApXwsJPtXKnj00Kp2GAPvOAAAAAAB9K3UAHBVcnUEPyNCxWfpexke6sCiLoOMAAAABvmUrPbseRftdbr1uplgmJPqaM4dEA0jtagAAAAACF8WXwCDnqh/1tddXPFz0fUQ1L3XA6E7qAAAAAAcEVVlULJujGh/Y1QlJ92BIGz+XzVjLs50AAAAAbyIV5JovWPYcGVze8mM/9zOWeOkfGB5gbwAAAAAdIQ3aKT2qAGk13xeazX+z8E44/0v6wbZdAAAAAAlMnAkAPuaCMTJvuY7V3r8VP//9PgeqIQgAAAAAAD6VuoBMme6Wzdy5VuYGMmYHLmSjJ0d2yQAAAAAH2Z03lFKJ6D8nJuAaBGgymrCORAc0tYF3AAAAAAN2+zpRW9Iin3FvHGsJTGORtQisZA+KixkAAAAAABZri5RovaD59ysJnCubH7nqrYTkJtgA2QAAAAADLQHiAGoPdsEy9RWIaWFrY03KejBQU3ndAAAAAA83fFJNm2jeVK498YdrI0u1ukDWphz1zXMAAAAAAJx2UkCmrAodqMZGWOztZLlUipbNJGLQAQAAAAAMOT5tAMCzSeIWTCYny+IX2vvdkDWGo2A1AAAAAAAL68IAw/9DnhZ/K7pb6AMkCsE9BMb6jbwAAAAAAGUphY/auSeS1RMoV/8Jt2PGBXcAvoWepwAAAAAAFGoioNwHm0kLkycNqORvRYkTDW8b6jGaAAAAAAGoYpQA3yDQB4XUINheVo5mVg7K4Kd3CyAAAAAAABfdnoDib4+4k/FOVdd00IjyMoGzJALpWgAAAAAGKAKRW/xGPFYd/T9pJXRvSaVbXxkR3AkeAAAAAABTNWZMQXzuWAdO/KjMePak+x+asi89bzIAAAAAADQncMBDGMkiS4yyvPIObpEJoXqPwJRqtwAAAAACjIveYoKDhyx0WqczGGK9MiR8jLXIqFnvAAAAAAA8f6vAjMyQSgbzfjVATL8waDmw/SEaIzkAAAAAABrd6QK+UOgi2mjxapahG/2AO0hD51jNowAAAAABOOykgOckJEh8Fm9fEquZlyLK7LWxBrFbAAAAAAMD4VGA6wnDIT1Z6Q1iQYOalX+3aYi8B6IAAAAAGYKsHKDyoihFfZgAtwVaJz0Z6EJqG7HIHAAAAAAANCdwwAoa3q33fQijcK5UzIAn16p+ANpcAAAAAAAAmJaAKzQZ/iSgzV2HE7oRvrKBL7JHfZQAAAAAAAVmckA5hzuz4e1roNOuYDCWdYRJFmS8bgAAAAAALS4pgEWZz75i/OOl78PHiYEjNJMRQ3esAAAAAAVuvo1hWrZFcgH/f8x6ekObLfxXl3+3Id0AAAAAAA/xXmCBWeaEgp18ATph62hWZ+5mznjBUgAAAAAACmOFz6GF0a/mX62ewHvtzKMDYbybty/0AAAAAACpKfggpCG6RAGUXG/brz/GDwJyPl+2ohMAAAAABUDS5wC3FQEWbxEJd/ZHdm/PGMnNhHDBYgAAAAABCANHwL2cG+Ld2RJIE9FE3x+vTo4ArQcKAAAAAAE47KSAyJlzjExRF/nYuwV5gGNb/7NmiR0AAAAAAACYloDMJfbqZ+J06HjHzIHmI8tCqkU/bgAAAAAByaaCINRWkHkndN3ShixCrvrotJU10UBJAAAAAA7k4qIA4Vp8O9+NTc/KltJaFf/f+XHrYvAAAAAAAJWjGs7iw4TO6NjuDbwtK119T21FeP7yXAAAAAAAaOd4APYQSBFncvr6qtc1wHZjugi08KerAAAAAARgM9qkCwj3gb5CJAxMNqDWpZDnseggqDQAAAAAACXHBUAeYF5qzCN2hNiHknbVVqRDdOMIAAAAAAAAFXtEgDdA02H9mIfjNShjC50rdtP71pwEAAAAAAC7WvOgS8trPO91iTqWSoNaqIh3LagpIFQAAAAAAJA+RQBmgU9XzFW2Md9kxgmPrdWreMGM+gAAAAAACm5JwHCO5/bLWAkhPGPbt9MY59Ax5GQbAAAAAABk3Fyuk9+9kbBuddCAtYrnHW9HIvt/dwUAAAAAAD03B7DEgDRLN0+Mri201wMEVU233XrSrwAAAAAA0J3DAMnaQ3tai5B+7VXeErriryIh0K5QAAAAAAFVJ5u6zotxGz8hA8R2NGrnvG+gYvnYczsAAAAABEdoiTHjIaoTra3asaxiAfzw117B2QSo6gAAAAAO9hPpgx40nswe+BK+9vwf5kwK1Bm6Pdt6AAAAAAX6xmr3HxOsI0qKY0JSgxa9BcmzH6cvKisAAAAAAlcG1IAhZCjA7B2WKlyHql4PyLKl2Iuf6AAAAAAHFvYggCxFaZUguOE+GGaS48PixxENHgguAAAAAACj0fGgLhMbAt4TduPnZMXjzJ6GUrR87w4AAAAABSDLCZ9hxLFF82f4wh9hGEDfreme9/0z7gAAAAABlP08rGVdVpkA8wUPnWa+TVdVAH3GdKKoAAAAAABBkKsAmAbSD3HW24aUeUACj9brLfaQMb8AAAAAASE+rCKehnWKzNfYMRXdoo4hFmzes0iT0AAAAAAAY3edRp/oYH0MqOlr8fKUwUJMXgg+nsHVAAAAAAA/LlEAv7B1ZDXA5ak5bEQRpU8xRFO/QzkAAAAAAPpW6gDU4IMVlYRDp2/lI3o2dDron+xP8AAAAAB6PHBCAAh4Ohpv4lJrJMCaY6IVgrI3zv3VAAAAAA42RHwAN5QUR4CR042ogvB6oRyoRX+dhGYAAAAACxWE/Fox6VOYt+EVZcYc9gnYuUCzwY1+dwEAAAARdlkuAEdWM17egJS4Wd792TfHIe7ueBPpAAAAAQAB+kAAAAAIuyyXAAAAABF2WS4AS/FxIt3vMJHtcR/yBNQHTpo+iHsAAAAAAljaiENsanccYPqPf1JCobg8j5jiZvG/yQAAAAAEH8LAdYbcJ4rN0aKmL+/JjxZ8ukDzXgnAAAAAAAIDSpNGqD9BkkxyMJAig+AytQTi2mwUqm0AAAAAAYhoPOC5V5ftzn52fzE1a/SAjEAzN90XtgAAAAAglffSwM4afOMfGp5V6/hlpD5TntSrFDs+AAAAAAApuScA5uiQdvC5Jiew+6tiLOII0lUDLJMAAAAABBMUzwDIuZw81KM982jZbiZm2Sl3a8uK/wEAAAExlxilAPyyXrSISE7rf9BNuU3/4mS9UFQwAAAAAQAB+kAAAACYy4xSgAAAATGXGKUACnbTMYXpj8rO8PxGAPgqMR9bn3MAAAAAAAewAJhRwX3McUef38JGTvaIFvalPhZpPwAAAAAAnHZSQCyqgL9Ca9wZ3JwA2aQ+LaY1D8c9AQAAABW4IsaAYqFTpe6r5Xr2kEliUdnCMEFo21AAAAABAAH6QAAAAArcEWNAAAAAFbgixoB8uzHzdb59Ap5gxYguCKDjLdnHEgAAAAAEYSzoqYsPoNok3JIJAjkJncUVc5QqZ2e3AAAAAAF3l7vAnrTTRyfgdxODbNEPhxGqEuZLu9cAAAAAAGhO4YCvleShFfzC46fzrbBervJIXdZ9rgAAAAAAZ0PaINIE3/7pY45J5IgX+xChVQnL4klFAAAAAAAPJziE0wnaiivx4cTv5ItpjTzH0e7xobQAAAAAATjspIDf8JJIhuUrHzJyGudR8oeEkCx/fAAAAAAALm8NM/2RHEFd1iqWhj65VhkayE+DLbVHAAAAAABnHbSAGsFNbuqwCaNNzZvEHu8gjZOEhzwAAAAAAApuScAa4n1yxUgR13KkZlQlFSxq1kC2dgAAAAADqsXtgDCNbdKpIw+U7j+e+xnTLrQLR+p/AAAAAABOnlfAMK6MTo8L/IepXVbkGBtywyksc+cAAAAAE9x7RgpC0OQFFRrI/66O63rHXwLoz8ilSQAAAAAALFS5cE0/aiUuDfRCLw+0hXgPsav73Yp/AAAAAAAVe0SAXFKWXddhzOQZHD9yTKLqk83Qk94AAAAAAGhO4YBhbaQHI5AiLKT3TfKZaOIOhDqWNwAAAAAANCdwwGpGlArhxNhvNQ/wFlQLUVWwga2WAAAAAB4dcdoqdw6zs9tPZVr2RS0VIEZKZJD6lfIAAAAAAEOkV3WWsSfZBSrHB3tBXGqMydzlb3ZWYwAAAAAALLQXgKwn9T5u2Mm6mAxHe6rabqwzXcv7AAAAAAAAmJaArz/QdRpnJWDkmhoXhIN08xowNVAAAAAAAe4fAc3Hl6sP15thBCGJ2Ueu1c50N7l1qwAAAAAF0GFI69KYVFCATb392c/lhYsVj3pwEmtgAAAAAABoTuGA1o56550fdmY+g+9869GASBg3snIAAAAAAITiNl75+Xy5GoMKJyBwcwGAnUaMIMiVBgAAAAAAEbt9YA/TqKQhzYJ0DWPyINlo4571IVw3AAAAAABP9apgSrJOFBbL1vuDYIWqZKleN8r/incAAAAAGFxB4C9do0HjDndiDOIsgn6nReVTI/KtyQAAAAAJ8k94AHAqU0+grE13Ni/0u3oG04HwS+HBAAAAAAZA3UL0j/FoZ2WeJ5M/1KGCkCaIOdf30RkAAAAAAGj0VPOoQeIPGttH1AznFxvTnc1YBYPSGAAAAAABoTuGAKnXW5gu9fLp77t3t+F5+Il1fjZqAAAAAAJ9xQsAz4amsmN6xhXTWUCmuxOaxBSMdF0AAAAAANB2PdDx4FJpnC0bz43Lh/8OlrITyYiVnQAAAAAANbf70PkidwCCMLLLTOd+My2uljlXn4aMAAAAAC3LnGSXL2u+/+cwbPGl6vwbpcA55dVHS74BAAAAK3BFjQAH185LGbeVJU9RCcIQ/4kvlXSKNwAAAAEAAfpAAAAAFbgixoAAAAArcEWNABydf/KNpB1Cta4PCHETG+x4vn/HAAAAAAAGx6/wJpT3fvC2yDCxUYhhFW6tdELT5l8AAAAAA3iSkSotoxg2NqriHCcQtb1EhpA/hUH7gAAAAAAJYARMADcf4DYo9hRqRdyuIs4BC0vccknCAAAAAAIxXOyDVqPQ3Up/1oVTsdhCURMWqxmsnjIAAAAAACS2MktfzyOthsTnwsrvlxh4vjteumbVpgAAAAABSSD1KXRpUkjFeYEBUn/o1gGKfFLYNMGvAAAAAAAwxlWphQ07SkPKuJVWLlCa8Pw3XFO5NDIAAAAAE+I8lgCoF5b3o2KBy/7Zyt60HhOxQfbeJgAAAAAAAJiWgLIlMn+vMt0JUvbTgLXce8AaFT2jAAAAAAuicbCAxkD/4UpPR2KUlCJici14qYBj164AAAAAAD9mRUzGRBzo5gptqP1Qpid45iDDQM/+WgAAAAACMFv2+Nmn/wgnusGa19qUctyOYHAh9WzfAAAAAAFz8WKh3CwQWGgq2eK3XrWmt36qbn+89ysAAAAAAIeZvsD5zy6f/+z3YLc/yJ2Yy1CkAA96VQAAAAAYcLMWgP1FZwlwWUl/cSAYFVkyE1y8I2X3AAAAAAoxBYvAhV/ZaxPMmEQ8u7V3/BR2LUxJLhoBAAAAATKo8aAHOXF0KQoaWH/pVeDk9ZrzflqrhwAAAAEAAfpAAAAAAJlUeNAAAAABMqjxoBcYZtttnYD2EISuQeOCBV0YNfLRAAAAAAAZ8HEHIMxUCGPmIKY5pzwkODCoMQqz29oAAAAAGNrLu4D2r9PuPhJDswG7pFThTtfw+Gl1lgEAAAGXdCDcAE3PCwxwSGQxInsy7rQqL2yjDFuaAAAAAQAD9IAAAABD6LAkqwAAAZd0INwAXuL/d1QvY89GF3+c5k8d3eHKeegAAAAAImyQUV9mqM5BMIA+UNpefyHuG4yfJyNYjQAAAABVB53EAGz4MSjbXglzGWdyU9xSO267KMw9AAAAAABXUWqwcWadabGkCVFh6gTm5i4UejR6G0YAAAAAGHttq4B6JXEjiISBmmFvzV2/e8p0FC5rLQAAAAALxQtTXYKOiOANvDpzXq9oBHSetadRWmnWAAAAAABtbY1ihVoHtnpMd/bjB6oaS4t2KywNt4kAAAAAAF5gxECeqOaTWp43iC54PtVlPEChp80N2wAAAABX6AVfLcbpfwA6/ez14K/u+xTe0sKc9IzLAAAAAASp3M+XzEE2r9uFEn0C13dyhhQFIAbskSUAAAAAA3WMY/3TwPCKfXpINLHpcxO+bls2A1ZWkgAAAAAATEtAANrDtLqugRadWZPB+pl+aQUi7Ic8AAAAAAH/HB3A6KX/W1Jkqw2BkE0tdxytzdYPKZ4AAAAAAB9K3UD4loJdgwoQSiF6mIUWtVGVpTNP8gAAAAAAcvEMgAmYcmo14W8sgQIpZb3WOVo6rlj6AAAAAAIKlW7gCl+NmdwS6UB5SGzRFHrPJZ8tQm0AAAAAAR4aMAAVdqJVi4VUXs0NjQtWjTZs0gROFgAAAAAA0J3DABYNhnoX0gMPTKqWdfxwZuyIsPCzAAAAAAAAmJaALJWNzDJeXmORfRWdmgymeGrcq1QAAAAAAHm8NnBGHO4rwBsH36QxU74sUU6aYArdkQAAAAACb3bvAFgAoo8xj/Rk4dP9z4M6/m7+lmKzAAAAAABOOykgWTM+lWCkoAmMR6AqDfQcrjbGtccAAAAAAEDfqoBynUHnH83UA9whR6GZL1L6wvLQCgAAAAZ18CaSgHf+cbRcws5mSSKxY4Hx4YMoKv/RAAAAAAGyPGi4eyuLgNP9hfXHtUu+fHdROYnDmQUAAAAAJiwbFyOFwBsz71iQhrGS0GszpDOO7UOskgAAAAAAAJiWgJavQySjkTOcwTCVL3admLcWiJoCAAAAAFpbok6fmPV2e3/pCR9xRu8GfbwGhgeAmXwAAAAAA8Wopc2+PJEHY84MyQ5rvrSGIm+5mxsNnAAAAAAAATEtAOMMm/Vw0VL4fM8jwRPrSax2dCDgAAAAAAQTFM8A5bXqKJkRwKe+ZbOxysOc+R9Rf+0AAAAAF5teWyCSMJAXPtp283NEe/OP1Du4JUO0EAEAAACLsslwAAimGNMbf9bEB54k21iYBxuWcEGdAAAAAQAB+kAAAABF2WS4AAAAAIuyyXAAEjLpGc8jfIGqE6mm7zCHwE94ZmMAAAAAATDbxHAd64z6FDupl1q9kSoZdUI1YFMxVgAAAAACVAvkAB9WWCyLShb3fie8fK16pgwkkb6NAAAAAABoTuGAMwTvShCa/FCnrSsth9K7wXz6glgAAAAAADiuBUc+P110voNEoR+NlgIIKiPiRE5hjgAAAAAAU3JOAETAI8PM49sIfQkcX2CMXX+Rnv6QAAAAAABoTuGATEBVz0cqVCQBiyqh3tN9+IaWWQcAAAABQlYpDEBWEw/yWvwdalX8hCUfpafNDmn/EAAAAAAAmvjaAFp1bTFxYk5myM4LaPRXQPldKLsHAAAAAABlmve3YZT7ZyuumehgE0zezoZBjV0X+zAAAAAAAJx2UkBs80x+F/pRw+s9af7BjNtd2i5dfQAAAAABkJW+YICCucu6o8ENEZZX+A/l9Cuvh35SAAAAAACDIFR7JVml1Z+/RexIIzIYyZ64jqDmQiQBAAAAVuCJk2CgBJYA/svHszEsoAUNZgWmf9jVBwAAAAEAAfpAAAAAK3BEybAAAABW4ImTYKurl2D5WKFj6q/9memNlmJmox/NAAAAAAErJ9zAsOXclxBxWsFRUPkEpQ6B3TYiE58AAAAAAAX14QCy39AECkdcHVWFE6N60V/8pVhOpgAAAAAAUv5z1rtyK1pOX3CzDMhheIjr25b18jXgAAAAAAbscxniBTHOByJVvT3o4lLOJdgxLTAhZ2MBAAAAi7LJcADFURNkEobyVHZrROaAi4eHukofzgAAAAEAAfpAAAAARdlkuAAAAACLsslwAMjVkjQLZNGjSi6haKLQv2BaYXX8AAAAAAAewYkAyQr56ToZWsgHjoyTf3UERNvPTGEAAAAABnx7lkfNnCWdQP18rkv+AWQQ8cgVKOXpqwAAAAAEqBfIANlXmsVrHNb/9vEj0J25ZCVLbrEYAAAAACi+0BYA7GiU96LN6Ku/VlJLPUy8xYpaO/0AAAAAAHMPkQD2pNvrfeIhzi2mOdPXgnmMNr0O0AAAAAAC78yq8C3/RVz8mHF8x7yBtHHA/YFSKV8zAAAAAAkOe+QQNxuNiTspWWCrnR4FcW+UTmkv4nkAAAAABzwu5o9Xbwm95RfdAy8mwqLLD7Gfa4aHPQAAAAAAvzpkOFsttPgfh49toN47qQTDEeFsgR3uAAAAAADJNp7AjdeTQawktVQjoBemxxLIKL559rEBAAAAdGpSiABgmQFpc/JTZ1heP5Rli9ZPAaf7DgAAAAEAAfpAAAAAOjUpRAAAAAB0alKIALJFHz6UncBQWEXFWaEgZO21hOYcAAAAAAVqAUuUvoePAfRccTf3mvCpUfWZBfvG7poAAAAAAAjw0YDwgHxwzNh6K8gmp8spiyIU5tRHaAAAAAAUCulT/BlSdLKkTUFUh8yElr53cWlrhqfcAAAAAAA+UTEiI6bg86xNRyka3IVE+nsFZNDrKzYAAAAACAsG8/WUeoh9kgb5gSlGEZU6nSuUGOXjiQEAAAArRu4OAFjvcgF6lWVCEPfL/+eRs5QwMs5dAAAAAQAB+kAAAAAVo3cHAAAAACtG7g4AWeMS8yArJqaS5AsJAb2REBpT6rQAAAAABhyfNoBl3QrJaPw2MU6CkISSCR85VuBWjgAAAAAIBUU8Lne96Z1K+cNnHwfrlTIkYRb5KBumAAAAAAAzVjUfxrtW9sl3sxI+taCVcXsx5Iglok4AAAAAAgmKZ4ACjY2FiHxCe2qKfPcGODhcPWC/DwAAAAAEe2OwgBXx1+syrli7lTfqNudFqGbX6nLqAAAAAABnGSCgL3Nxn0OquZiezZTmGhMOUildLnAAAAAAAAjw0YA6XD/VZXaw+f7B06DU8mI05nCwbAAAAAAAFNyTgGlUnzRg2yG3FkV3V3F4fofUQQ7cAAAAAAAINYRIkhdLNnErmx3DXBtXltdlbHKsE1MAAAAAAAJbbaGUqj00iBWx4aHY/BEKRwaJJ4Tr3QAAAAAddZeBuKQvoGI3DCItB9dtUtMexdhcqM3dAAAAACi+0BYAt/mR10BL/TrCdEvudtQK1Ez6YaYAAAAAAMqC48jISmDKtl6ViWXLWYfS6dgLr3kn+QAAAAAB/F42QNHR7PMJOWxrTVDcYZOOkOB3jcLhAAAAAABoTuGA3BxTYhtmd1qJxtmeQdaOETiK+dcAAAAAAP8aE6lMdXqQ7psRovyuLGk/pfmOyT3XuwAAAAAALm+yWV0aPXBz7jDBylZghcHkO9fFTX5QAAAAAABoTuGAfbIWdJN+oP01fZYriRXf39Aw8R8AAAAAAOYS7QCkJi7xVAsOvvoDSufbo6OR8S8fAgAAAAAEExTPALRrpRP0cvqFtgxxDvAQ44Ji5FYqAAAAAAF551Sixqeo/MshNhw9+Ge2E3xrGHwRfr4AAAAAARhGQHP4ySiEuyH+wktF8Z2HYmTsxjgDJwAAAAABKMGyMAUkr7wasLCpAjstPnZVEckynhopAAAAANvXFHcQP4cKfjasS7DlOANuZVOjZVDRZ/cAAAAAAxxDMsVHOg6Esnw7YUefhWSBhCzhtCf91AAAAAADQncMAFXTiwF2u0M5rkg9LkiHAIag7wY2AAAAAAEo1MUAWc1dgVGKy8tUqT0Urx7BSMi0xAIAAAAACCYpngBgNmbDkJf9OveJe+ngq0ORSwc6ZgAAAAAE2SGRiKW3mAudNZjmlhhVXlYCpWCrWxTOAAAAAAuFs+bA1xFjP7Tdv9pGEJ4uYRyuU+NVxIsAAAAACyw4WETbWFGtCevWyvw3sFrPfjNslnLNtwAAAAAEdPjVBfK56rgmbdT0S/RMuuGfGvGZQMhaAAAAAAQTFM8A+V8oGpK9i07PbNTpHjRnisvuIooAAAAAAaFgjZs38GoApJ717rvmFlNB6vA4GGTdyQAAAAAA0J3DAFcgfYRcH7QbLisFRip/krikoShgAAAAAAAu1Vetb5nH0FsUWmfj3vlvvTUlp/Yf/1oAAAAAABsf0JqMkuo7v+xdlVshZ8vb1x0VAzaLWAAAAAAZq2l+gJ9kwP7SGKCexQKieJet/XQD2a8nAAAAADubYpaApAGLLrFTTiddt2Jm5Ll5ytfje/AAAAAAAGZ0lRqnisrli2+Fkp+NXwYGX/n87W8ycAAAAAAIJimeAKpX7g9f79sgUGathXezRZOU5Xw/AAAAAAef/rx6wpSbSbsbtmYlJilFYFgd8sXy/wgAAAAAdNsCBPDaPJfqEQPouPa2MxPHLT3dowOU5gAAAAAAhhxKzdwxnXm+A4YPzkl4EIbk18oCRJ3wAAAAAABoTuGA5tqXLeG6d9BwMvIVmichSmzHsvEAAAAAAGhO4YDvLw6UL43cFYWvIiqRhKSh0FaguQAAAAAAVevlyfZV/gSK0eSZFc6TMpf30zl55aF3AAAAAAApuScA//kq9AwX2JkMXAtbIL9zUIOJAzwAAAAAAH0J3H8ATfUSRJERq2C5ch8VuybeSE9DEgAAAAAeR3j5cgkg0JzycFxczOQNF+/tm9QBv71BAAAAAAL/l5dGCyjad/rEUjIaqtmeuUUSQfoSBOoAAAAAAZljd4AVRkE3ZId38DqJeZu6PnD3goTDPgAAAAAFP0MfQB5KNYtl1CEyP6p50HKP1MTxmltIAAAAAAL2ktyJPwn4jH8cGF/8fQ8oQz0asrL7c1AAAAAAACozOQBdYYUHKXa9IhzGmd8lZY7zI+snZAAAAAGLz+VoAHyZH+ztQQnoC2tOANS+Ty2yeoIMAAAAAABnXo4Qi4u2wmCJK8Yv0M1KsR0VVgpcAAQAAAAAO1/HzICZBGc1R0lYOVAmjxvckyuvLh8utAAAAAAAZVoLgJm+eO+Ws/HcruiNnHN+lm8vKd5xAQAAAZd0INwAtTJqxH83X7ncuSQijEm3k4uzd3AAAAABAAP0gAAAAEPosCSrAAABl3Qg3ADHK7s+xr1Q9ni0X1Z8SXUXc3rA5wAAAAAAaE7hgJGEownhLU6biEVObmQrvdTu/j9oAQAAAAN+EdYA25xq5QlFk6f0jmtmn3BgOkINtcgAAAABAAH6QAAAAAG/COsAAAAAA34R1gDw8koVyWw7esB3oLLgPsCliCIM/wAAAAANJfFGySheDCTJ9QFXsu17ep8WEe/Dv+miAAAAAABjCRagL/W6hG1iMGyOI7gDJIpNU75bakQAAAAAAJYQM+NBmajf8QUJOGsqoXbmOBl38WY3ZAAAAAAK89Hw5EdWd4B8mtUX9H63GTk3xUZOy97wAAAAAAA0J3DATy247duYN72KNWsB3mBTJpRfXUQAAAAAAqZIcSBPY7QSFrqxMx1OK4bRGBTY1VjKIgAAAAAH+MgtzVezFOzvYMi28uLBx6douff0BlfnAAAAAAApuScA/DaH+RuLuxzCS1XdZA48m7IyYakBAAAACY5CEMBj3dmrTl0/t7Qf8qBmR77KL6H1KgAAAAEAAfpAAAAABMchCGAAAAAJjkIQwGnV1jZTlwhT4rAZ/r6ucujd1gClAAAAAAAAmJaAa61pIftFU2H2qXLrs94KbWfkpPAAAAAAAAL68ICCpZRzybHLwKPxGd/Z05RF1XsSsgAAAAACkEUfCokwa0GJeABhxyGkOqXxgBtyBjqdAAAAAAGCYaDqiuV1jeOCWK6Xg+1ha54ZWQ++B0QAAAAAAtooKoCSTt3BACO+NbcLquWd4Tcx29iOBQAAAAAA4hSWQKx9ves9mtVvrn8eNjOPoIcN4oL+AAAAAAC7nBeirnFfSZVX9aZt99PTlcoPgrWt9+AAAAAAAACYloDPSDpIaRoQUS+eRYL1qPAAf9C5pgAAAAACE1PlwOLcN/61GxRqhv9FOBXGP0rkwkuvAAAAAAUsWYIgNJkcx9X201kj4QHhmI6KY2HRN0kBAAAAC6Q7dADsVnd0vECuW4MrN42HkfTVZg0zoAAAAAEAAfpAAAAABdIdugAAAAALpDt0AO/FUBI3om/ElXIpqg9qge0bKW5UAAAAAAAgL78A9sevD4xiE5ACNflcAHRcqwyEN2kAAAAABhX0kU73yANLutem9i9E7SKOj+Eg6j9LAwAAAAAAATEtAAOCJ8bpHMMhRMFkobohg/clbldnAAAAACYYz1xAKBOi/946rLAzkK7las3P1I0AmhoAAAAAAgmKZ4Aw0rT5NYRvJgCSHBnuKRqSVeCt/gAAAAE94MnEkVMo9mBP1y7Dii6mcr83kMO5XmM5AAAAAAAJiKbvel41NnFX5DSx88A+VjKt9B9zsvYAAAAAz7r6aNmBzLi9RcVzZvxvmhqK8pHeO/2kuAAAAAACzg4R8Kv/C1cKAO5FkkZ+4XDXau6IXQhAAAAAAAON/A4ArQONoDFMwQGFP/3TsX3aeS9i7cgAAAAAAgRzRzSuTKFfvte4eMfXJ3A+eBUNtQu3/gAAAAAA0GD+qcx0+fwHlP073/w7UEtViTxGhUiPAAAAAAAVDMnfzYLDeQfxoFyc/bdrVRGkDpTb7zcAAAAAAHzApUCxHTB0vOR1ctsOHwbKhEZVsbbJDAEAAAAi7LJcANEzYpe0920EwpIeqR3+8jKQ3qeaAAAAAQAB+kAAAAARdlkuAAAAACLsslwA0fqSRhEEAAkJ147vz5n87t7XXdoAAAAABBMUzwDXIq/lQPMuAVK7Zd97FPiw0rwcrwAAAAAE9GMIAIh6igk9C0vYYrdB7Ca6i/VXJhgWAQAAACLsslwA3fetsNClR69F/XX1uqoBXSChv1kAAAABAAH6QAAAABF2WS4AAAAAIuyyXADslWGA3PN3HKShLRqFFDKpYEyIBAAAAAAMLZ6hf/xmDrw11N49rmXfdE0v6yXTFefUAAAAABKgXyAAPqsR0yU8LTqzCyKl0aW/TGN+TMsAAAAAAGhO4YBBCJMspi0a4e/hRDhS1+ko1cd4/AAAAAACIYgI9GdByaqh7yZCcUWmaVmf0J1KdHGeAAAAAAAU3JOAbSi09DWy/neiuTktkIEB3GzFFMQAAAAAAA27oABuR7+3zfHy6jLqvIom7Jd3C61LugAAAAAFmX3ggJUjVp2pNh8n1F2LsBxG5aUq81VJAAAAAADQncMAmFVPUm4bTC93Hx1aUDtGrH/xm/QAAAAAALaKCqCdbKBXgjgcA3Q3UqM76jOUIwQfzwAAAAAAk1zfRVDKo/k2VbVJC6No4Z6vjK0KnNDIAQAAABFgHCAgriawgH7I3UbuzAZXXY/5dPNDVAUAAAABAAH6QAAAAAiwDhAQAAAAEWAcICC0PVjvEbXjCZxF69wa7Th3QOHd2gAAAAABeMHPU7XScLYZ+w70HzSo6eFC2q1Hd91gAAAAAAEtSVSK1wFM8wWV/pPb/2TXX5W+nO92jtoAAAAACCYpngDkdqWcY1Q7Z0z8Cvb2P1S/2Smx0QAAAAAP47gPQOcK6Rb9qqgx2kiJMtXFpVyHuJWTAAAAAGI62YVc99Sq5PhyFWUqXVIH4PaqiWza7lcAAAAAAJx2UkD4FZrjLwqa1pLUP/Ni2r5tQcR0fwAAAAAAHCnHIBkSTzWbNlOF5ROkvSC6XCgJuIuiAAAAAAIEhmZiK3I0Wa1wk5o84/NbOaf0Ikwx3KwAAAAAAP0aq31YthrGJFUuQiyrS8fXp7ZI9uNk3wAAAAAVJhOSIWL7ybt6PVcsaE3B5rGa4OHlTh7VAAAAAAD0kqCmeha10PGWhw9xC1XqTt7RKfYoKCEAAAAAAThEahiDoj3c/1hKiRUrkv7a/ZfrDM7ASQAAAAAA8XGxaY4UOeVeCHX4KZKe+p6cyIuST9gIAAAAAAFoLQwwq0U7+iP0SrV1q1+F3VYXT1WyBl8AAAAAAdJEXC62YJT9gtkiFB9U9V7Z3TLl3PxpnQAAAAAAOCO20dYif9uVb1AUYpgim4G9o2P9XQ7VAAAAAAR5XFxTWTK4xxkkEol77+v0BheJS+nYToEBAAAGXdCDcADfRJYubFTVZ8a/PAa7VScbKf9nMwAAAAEAA/SAAAABD6LAkqsAAAZd0INwAO5pck7Y3wJC3/YGnAfQ2zc5lkTQAAAAABRgBrwA/QyuubeE9t99IopXggXQQ3UqoHsAAAAAA/+30y/ry/Defa5qQtHBKWfbmyKHvy9/DwEAAC+/m9nIAP00q3JloOSMRUzL9MnGHf32j5oiAAAAAQAD9IAAAAJjLjFKAAAAL7+b2cgABPGY7SNbihLFRG8Y3K27cHuKuWwAAAAAADqC81kFBsxXnSTr07en8HosJmE/ZBCzfgAAAAAJhEqwJwa15ukBHaP+v8fpUOCWCjh/SM3HAAAAAABXePpuGPkKGZBI4NetcmR7f8bsfVdykZkAAAAAAGEDNw1XAP2vuUQrfG4BRtODNf+3nWckTgAAAAAE1pqGy19SNaNa9RxTupiFKFAaC/QRYu6XAAAAAAUzChZ3G52Y8Qyb7fygsideGH//zS7wOwIBAAAABdIdugBqkKrRrsAllAHg7yTvCNmJD0x0zwAAAAEAAfpAAAAAAukO3QAAAAAF0h26ALm3pgkELa+45x8KqXhWRBYB8LcWAQAAABg7vy4AjzeZOXQRG+RMAK5RvPUWeWc/SBkAAAABAAH6QAAAAAwd35cAAAAAGDu/LgCRP51DFWrCIiPYQXqUF3rqagFsXQAAAAAACPDRgMaPS1vB4UfznQ8NCweEykyuIQntAAAAAAVMAXOAyYOoogtpw+fTGg+QDzKzPOn1uXkAAAAAAc1vrzj74ED0f3B6tVp8mIdGVQxqnL9BhwAAAAAE6yFXYP4CEqca1SZz+DQ11delLWqHj1p+AAAAAABbie0qAq33oshMorgikKVG4rd9Yk5nU1sAAAAAAMXFcUcDsaA0ZECCPvEgkGh8nC8gan7KPQAAAAABw75cwI1pKkjDshtbKEYWau5uDP/k1buPAAAAAAAjdvrAlo/iz6xGP2nlcxu8LCg/4cuDk60AAAAAACy1nYauC9xgbmweFDvJ0A+/9gGeRMGwIQAAAAAEa+RngLWi0b/Xi496UecI9B4dQWKu5UZkAAAAAAAaewESxbsCRHOpmcf4fSYEqi/Is+qKuZEAAAAAA173axjF7oLe7BiYHpbHgueponiUSGxMbQAAAAAEtN5XEdsOH85OtA6gpO4Ys11O8Rx4uZF2AAAAAAIJimeA4/Lw3beFbEBacMRwr+SYrHPjKW8AAAAABBJ8OIDvMLArT/CCnn70k6EdYWdTXrDIAgAAAAACdBiKoBNUNOHpLHMidNCdKNphM3wXUeg9AAAAAAA0H8+gFrxI2Hqk9oEZ9cH/8XXtXUdzPIEAAAAAERM9L846NTGufazmWFPMINSjH8Lm8x0YgAAAAAAAtxwcE2BHr1dokM7IOAIWwprSpt/NeRKXAAAAAACDhL5GeOXBOP5MVuQkfcZmQC9aykHAOKYAAAAAAmdq/0CKcWLTR/cr68NbH66R93eTGOp4fAAAAAAA/RyseYqRqhYQN6Cy9TAtSkCjmKJfaoJDAAAAAANCdwwAmHG1YHwHPr6cC8j9zrfiWRSX/3EAAAAAAAX14QCy43NhzdbUN8RdcyAwuV3lmw75dQAAAAAADQqf7L8P+PRNJhrXNV77fEIQrJAD1YBBAAAAAAXCSF1gwmFZp0zGjPx+wuj9Q7+wAdl1/PMAAAAAAGdD2iDO8712Mq4OmoBoRTlaJHhdgFfm3AAAAAAEYzrEuuPKL1OzijB18ux0iadRZ5Xpl9wDAAAAAAYCpEgp+CWDnm27yH+Eeje/QqSH1NsgcQ0AAAAAAACYloD9bPe5qBE4+MM8/h9zAaaFdWl1ZwAAAAABLeMvrw+F12gNO/RR/a0yVgMePI7wICNHAAAAAAO3uRU+EBkh+VHO1seI/3Tx8gQFFB1wc5oAAAAAAC309RD1+E4h5ZU9RfaiC1/Xtl1Q4j/KAAEAAAExlxilABEzmtPR+7Xxt2N/sainJYRef6e9AAAAAQAB+kAAAACYy4xSgAAAATGXGKUAJDzXNGc4bvMrMfjN4LELPMP0iHQAAAAAASqABAAsAgB6AmlJ1aQO7Up4dNoiUI0iyAAAAAACkFBomDK3F+RHYngvk9aHrXsHlivapnwRAAAAAAAQZzgASMV8cnHLNYU3J8i8TXYPKZLxZn4AAAAAAB3NZQBO5t75kZqj3K5LxrVXpCz1yKw9XgAAAAAAPzRrgGEkMNstixulCnQOlnUrRbOuUeGdAAAAAAQ72QHng+GQ1HyOvJY7BWufWxqUJufKwD4AAAAAAJx2UkCWjXumr3QOJ9NoWFTciZhSINzUxAAAAAAAKbknALmOSnQtCcBj34WTLcVvohEvkrQkAAAAAAAdzWUAfHRQooa4Xt660+iQrMoNRT3hAXoBAAAAUX2gLAD9p2iZElWtZs/k5dDUCoFAXhw4tQAAAAEAAfpAAAAAKL7QFgAAAABRfaAsAAApv39pcR6F8V8fawA7ZIq0sKmHAAAAAAJSQiCAJMHV1iStwTtB/5Hm5yu3ipST05YAAAAAAFshpRApw0BNFnlisrpO9jCHL+MzNwjJYAAAAAAAURMbb0+bnWMhR9B/okxrI9m1GdZApmhKAAAAAAIJimeAYsCPvM0mvSN0i33h0ecYWaZxijkAAAAAAFeea4BpR5wsBcnJYcFsDj28ExaHRPnIkwAAAAABX69nmm0OZ88IoYeWc/lBK/Ek1WaLQnQtAAAAAAAJBCKbfiDuqDUzlmbcQBGCLwJF9BH3P9cAAAAAARzyKsCOjc02Eq3IGN4zwxAKfFBvnsxsSgAAAAAE811xG9wkrFU4uFe6uPKzBjW0s215nonXAQAAAFbgiZNgmz5v2Z+qIS629KrnVtHUzhmXurcAAAABAAH6QAAAACtwRMmwAAAAVuCJk2CgII9RgUGPj1WNAJcZQQzdoOGGTwAAAAAAEno5gKJZBzkC5Cy0N3la0y+7nt1qf23GAAAAAAEyyvd0qA2PjkfB5wd0Vhkk5Xg0OfcorUMAAAAAB4mzS8CxJbY7+s0YDvGf7P3WnB+6sQNvygAAAAAAaE7hgOJ+FOq2wLKt5WnRgotZt5n6uSMUAAAAAAIJimeABIbC/AWAzlo/gaSySYoVIVF6LYgAAAAAo0gqL8gKsvEtoxzB8It0HJjfeO5PPjxaGgAAAAADtXRP2xiSR3UA6vuBktver2DPXUTOA5XPAAAAAAVThxxAMzFXZUA9M2tzxmP8IMCDZZO0RFAAAAAAACYloAA1jgbLcJHSHZy5DzBTdG875RDdOAAAAAAAHc1lCDmR1MC+O/fJmAkYWuBHblw//8L0AAAAAAO05+wAO3VphHgu8GAnmFkdWDjsIvdrxz4AAAAAC9GZ5W9DZ+hWXsMTPXg+po+9ieNkJjI7EwAAAAACCYpngEPnuSzCmla2e7SU7ePycEk/mLLFAAAAAAIX9PT3VkSj8OHmvmqitZL1msXoJV9W8jkAAAAAAd4EKvNXnf0KLZ5cpXMitseCeyydhSHDRQAAAAAF0h26AGT+s+JQ2x2Snq9jxqT3p8p9yWWaAAAAAABTUkE9bft6npBL+lcm+Ri31Vn98wBadTcAAAAAAJx2UkB8iA+PpQS6bzx84rN6z3Hm6yZOQAAAAAAAMgmknYU2uE+rJ4bt2bVonTLri8DcFkqkAAAAAAAw+uiApzAbM1PnypbW9RNCReJwBrzsry0AAAAAAd1/04e22QXWtbaF1Uqrwx6O2BqwJVH7BgAAAAACJHI7krtcZQMpu52U471FiDS0A0BsCtmxAAAAAAQTFM8AufVmqTuY+OIB1YyVQ3JoyRj4Q5QBAAAAGfdcPkDK8lJdYhFtH/2fJhZvsnOJOxHWHwAAAAEAAfpAAAAADPuuHyAAAAAZ91w+QNQldXVjL1vuhPHalkI+xSWi6HwsAAAAAArwnJvR2Tvc6ygYVSA/FU1VmGO7b6P6X1IAAAAAABTxrwvwSV/HWCXabRlTjNyoecdSnt8F8QAAAAAA0J3DAACLHAncO1qfNSLjyf84vlwjsYlUAAAAAAAUTLNmDZaQbKVHkm7sE3jHIXPXOv/29n4AAAAABhyfNoAPLn2QugI8xLvEZgQrVEi4rod/MwAAAAAAah/U8RX3xWYExZYrKZBZQm+0q5tmAmDGAAAAAAGCLgDTIHoVOPGggLagBOszdsufUqPqxnMAAAAAAL5CDgA3BPbovxM2iA9GiAu5bmJE+fN4JgAAAAAADcdVz0qIqq0Dj5uCSIZcS5JJ78VUlg4WAAAAJk62LLPvZK91w6rFs7Qo0rofBOGU01ZgpYIAAAAACCYpngBlfYZczoB6yCPaFaT7HfMK74PrHQAAAAABiMrBaW4pEQTmWPWAc8uMkhN7w41ZOL35AAAAAAAmyWIJjRZ0NbHeIj9JM1Mvzq+g8kYBpnwAAAAAAptKj7qPSeeegob/WMvBFEFsDfQHiA2ibAAAAAADibL6cKleNWcteRxU5Pz9rlKIi9Lj6s5XAAAAAAAF8U0g3Kkm6obvppkfp+rIRmuEi09RgqUBAAAACBPq5uCvzDc6zXhO33iqUgZj9xE9QOjX5gAAAAEAAfpAAAAABAn1c3AAAAAIE+rm4LRfhzkdfb78aNSOJSbIeoTyZIqaAAAAAACQipBA1TwMzZRkACgILTplC+tENhs6n54AAAAABUNNqwDWrDsZC5TSKQIic7QjyuvAdqozLwAAAAAAAJiWgN65jjY/qlRbd3yls4evReoHYqmJAAAAAAA7msoA7jnkQwNzvFdRJohbXPcYW17gWWAAAAAAHaixEVLzfG5kNVFbzkOgeSgixidaSvdp9wAAAAAAATEtABLrOEhJ87cXoMw0b6yg4nvuO3U4AAAAAAQTFM8AGcu3cAQfTrUr9kmX4zFIVAGmXMgAAAAAAGaFHgAocMR5lBNk/X716xnwWpumyHcPaQAAAAAAa6JSQDnUmhTDVdMoZXAZLuCIRgv92MqVAAAAAABmS4PoU8IpmJ26MNwBpHnsWu8UETClZZIAAAAAEhztCW5cM+wCaQP/8sQn1eNaZk4EgyUIQQAAAAAHJTbRYpf+CwMLDju54obF+UfPu00olz2lAAAAAAByR60grHlGIMFpaAe3s08XAgQddTJrNlIAAAAACf5ta3Ti2AsWAXpCIgjsLehb/yK3cYXDMwAAAAABlB6XAO/7O9cz8EinBV1To/lSnL5PYLTLAAAAAAA3CfdA+qGhaZxpE2zJj9MQYkMHg98koo8AAAAAAAX14QAiA4lGyTqVy1NnoNSxfW8VZhdGbAAAAAAAAJiWgCyJwA0LJHDvbU7PkYVrK7d7G5aaAAAAAAE47KSANqnbEnO05DEmoe5lzUJJ/fN4D+MAAAAAAT5J7wBWa8Fdyd5Y+3Uf4VXWYi3PjHKD4AAAAAAAPE1tEHBL9mNA09iE7Gr0BuNUaSxJvO54AAAAAAh/exCxdGQRAGytB1zm+MZqxCBI74HGYSsAAAAAAM/1iJiFiax2XLdju4xTaabnLxRtgNRBIgAAAAAAAJiWgJoefs3DFniG4TgDc/zKw15DU3O0AAAAAABoTuGAozhZ46pR8lNZIejA/1U+az3RG/wAAAAAAHnbJHmqVD8LJIoNcGBtwgg70W7kR4+v5QAAAAAAZ3Gg4MmPE1MXc9qucerknxn5tQTrPQb/AAAAAAUoOXjz5Ijuni/2M1ZSJ+Bk+yuMVQgLd2wAAAAAAVypXJj16YTA4XS9hjIrHIXXrpIY+bf1vAAAAAAAP8bngPdjo2hx5T5KhTqnqGvtJB3x2LtMAAAAAWkJ8h7G+LDk6FEsh+iCodAKWXkCJ4nXfzwAAAAAy7oQbgAMySCGyyIFqDpQyrmFOrw2fvH/OAAAAAAAKuvaoBSBbyBb+grvRyV46shtKA+R1AcMAAAAAAJ7+0eAA4uwesz1lef0YWq2JAXuupCoq+8BAAAAEWAcICAmFJtHf/wy9fF/FZhbnfc5dvxhRQAAAAEAAfpAAAAACLAOEBAAAAARYBwgICyDvTAOzcA8nchTIzc21suA9W7uAAAAAAg6pruwN4rKlfM4r0ExREm+jo9OoKjgpS0AAAAABBMUzwBAlNwMg3bWUU+XEIlNY3IoNVvuUQAAAAAA0J3DAEY92ENl05rruOufrlkYKlZEWLv7AAAAAAAstBeAT6kvqpsrxmQNMNRNR551vasx6C0AAAAAONiA+qByhs0r+q1WqWsImS+jAbPWJEoWCwAAAAAGGtVzAHNOVQ8C8UNMis3pT+5RVsGOc+LxAAAAAANeNgNg2nnSqBQE4k9WxYytLV4Q/35APT0BAAABMZcYpQDdRogUul4x4ZHKbEYhBTx19s56fQAAAAEAAfpAAAAAmMuMUoAAAAExlxilAN2tSXDcuJ27kvKDJgPaApnOujNNAAAAAAPlZyfDFcsDXsmMkwjWG4Hwg7DdJlirIOIAAAAACi+0BYAgihilF2kP2uy2oVmGhA1gU0QgaAAAAAACcW5SMC7fifN3sr4jPuUtmWFrKipyuOn8AAAAAASF0fpANdYWi6Ro0mR9wScIzAXt6NbKn4YAAAAABUMZM1o/XAQmGNx/kJMExWklLTJPTtpvUgAAAAAXSHboAEPCdoakUkK0Z2qSHNfANaoTXMeqAAAAAAMrDCloU6h/kiHElLWlGvyeIYMBawdT3qsAAAAABBMUzwBb3xrq44SnP131F4Efm930l4GI0AAAAAABoTuGAGUdv/5/GpHLqbVDpMA+BKmlXXRoAAAAAALaKCqAdF4xEihsILGy532rRPEvLKOd87QAAAAAAlQL5AC7UEnBYg7sJSheka0Sc3E+uJLe+QEAAAAA9J+YoIpBfXzOtBsAhDViR9K8DMP3+zRkAAAAAQAB+kAAAAAAek/MUAAAAAD0n5igkiyHzlh87m4v4mfZaiaUCHyVMfAAAAAAAWny/yCZ1PWRSeknMJ6ns0URcyAh1YHgCAAAAAAA0J3DALPoYkLRlP9+g3en2cfgsesybjXoAAAAAATNqOm7utuz2TFg6QYSCJCAZ2y/M1cJTuUAAAAABPaJyw/HZCOfd+gHlgS8Kcq/JOCnA/w17QAAAAAACGRwAPSW2jQXBntg9X8nheJjA08RpzkxAAAAAEXZZLgAFMgExNgLtjmzLwHU0ttaT7KcrW4AAAAABUwBc4AYqsJtvlxU1v5QL/3AsuT9Gd+d3gAAAAA4h7SMaE7zmkaMQGk55d/dMzbBDy1ps2IyAAAAAAAGMHkAU17chde10OsMLUM71/QrjMvQ4EcAAAAAAGVT8QBe0tUbnLO+2Ql2bszxPBUoJFykmgAAAAAAaE7hgGwlUF6Swqe8MKYYbn00vKjfQk3lAAAAAAAAmJaAe6iQS/T9Sby8zMp2ggzvy5830xwAAAAABKgXyACLqA1rvz99pfolxaO3czsnIJiDpAAAAAAC2igqgJ850ubT03jM6Ry87vom3BMi/Jn8AAAAAACXWVuF08bPaLuNe4bcr4B++sPli67r3JYAAAAAANCdwwDj85HpYe/iW3KZOD8BoPB9i+mDxwAAAAAPF3vRoOtEJrb7RpV7Oi8hUeauB3fNI5JfAAAAADPpJ1DA8UIgF20CkWw6N3DYXz6tPyRpMw0AAAAAEFVYxwb7tg9zxeHg59HmQT+O6ijLYqRJaQAAAAAAt4RpMgMnRxXusNr8yS1Js9WiQrldLvewAAAAAAFYN4HACX7kdYvHgADyf9+/kdHnC2Ij1JMAAAAABUmwNvobPKvPdwB1ZTT6etqMuSpYmq4aAQAAAAAAaE7hgBh/aluqR+8Jicdh6pWBmu2HagHMAQAAACLsslwAKVeEc5Cx9VbzdjwVQW6MbszX+AYAAAABAAH6QAAAABF2WS4AAAAAIuyyXABUxn2GlSj1MW+P4THN5HYDU6vghgAAAAAHqvu2U2ObgsQjO3coah9Wv8I2a6+8gfveAAAAAALTARyAgnVPRI+BApp8MfeSeXRBa2BY7qoAAAAAAA5OHACHIs5QritMgmPKhkSgkFYz/n0pAQAAAAATjspIAIlEXdoBPH5h0I9RUlzHwQoNhIIhAAAAAAcMyfE1i5qht3p/Q6wvTZRPdPlMshbCvYQAAAAAADz4Wl4256pYVnNz5RbkkJoBPPNa3xffgwEAAAADfhHWAJEDQDkQBh6JQWorCZZ7gIVRPWqZAAAAAQAB+kAAAAABvwjrAAAAAAN+EdYAl5F8bF/uBV3xUs49oPgP8SxcXWMAAAAAAUh7L8Cclz0X8ksfwdZqioq0qB15VlSMHQAAAAACtx2ebNzUkp7e1zBk9mg4PAZmOUBLs37hAAAAAAAs0RVg3SKInvfn6BCbfQLBVHosF1eB/7wAAAAADgVMAxjgPI7S54n57a6PzzWQYzuysKVl9wAAAAAJKSje0Pyx7H+ZP1YaBO+6aDsWUVKOO4ysAAAAAATQkXFG/haxaFZzwW4jzX08w33Fd0jOAloAAAAAEurgnIAN6h4saaxUBuO9lqe5SUsnRn7j3AAAAAAAx9q4QC430o1owFHtBfvHf5ARnszB3jCkAAAAAAA9JoFZUZX3p2pirvmQpsX1dHFGHrtQev0AAAAAEExTPABxGHfo9WmP60M+CP4TCNzDAhSuYQAAAAAAjw0YAIYg7bfjet9NLQCbHYmcjiwxZvYhAAAAAAOBDMaAlC+8gh/IONi0xwn5byy60HeNz7cAAAAAAGd77Zi6tBJJ/U9dk8atxLnJD7mZZC9QRgAAAAAAzd952OkNKRDVRweVQG4gig4jguAHJ+V1AAAAAAcs69yQAGPZe7Pv/f7eNTGrqf0IgQNkZYoAAAAAAJGwl6IScCQ8AYD5C+VdEI0ZMfUWcd1X6QAAAAAAXeWY9SndxDPgCn/xtfPHKTExouA3y9lXAAAAAAAjw0YALc0sYE/P6WkxYyEMBs/OlQyihmcAAAAAAALSHTw0BbiW5mk44x6ntPfyQBqewQp4dQAAAAABkxIotkmqRVmftUkbn717dvISFCke+gC6AAAAAAHfLNzHcGfoPe849Y13ABCkKuGlr1axbC8AAAAAZOrH46V3+Nj1joSyxn2iJigJUf0APwW36wAAAAAAstBeAHzuQYtRnBrXCCqP4+EafhOtk8O+AAAAAAAQpSZukgcJcM1OWFMTK6p9igzkhogkoo8AAAAAAGhO4YCdJBuZ5y5eLXnnggMYm/QLO3lSuQAAAAASVqEauAS5li3uNC63wEs0YnqyoOQt+N6nAAAAAADHCMeXDEQAk6lWV6FoEhL6VHLH/CxVodYAAAAAAEy0llMYRwURudcgJ0j9yknd5gBTS3jLQgAAAAAAJ6MYQB9CGSaATgZOpoiR7MtDnTFoiGTVAAAAAACLh0ygIizpOJlf7iSGXVOii7wN68KrcO8AAAAAAayf6A0tLUjxly0zU8KkRp1r8LlsP02EjQAAAAAA0J3DAEQrSciJ2cp2EAzgFW8qaajEsf+vAAAAAAHc1lAARZqIxmDyoEuBmhpeMYyKu0HJVfIAAAAAAFn1kzpIHGZawUtSRDzixBkoPHjHtrZEQAAAAAAFnkKUgEmZputqLmz6iARey27U1fbjLsihAAAAAAJx2UkATHlhEfPP9DMNSmxSlk2sdIIuKiwAAAAAAV4rIeNc7+/xNH8k+nyH2OiYzb+hKTeXHwAAAAAAZr5WcGR0mbFQcC6HLRmQ+l0o72Tv5bl6AAAAAAAAmJaAWsXS0B+KuJGugoEmK0BoY8Ib094BAAAADOwOywC4CkANVpwemhZK8zTlPd7lX3hxcAAAAAEAAfpAAAAABnYHZYAAAAAM7A7LALu4BbC9l2JgehXyMb1ykfbq6AaTAAAAAAA4LBzqvRy3ljV3xRBysaMWk9Z04oKj1DMBAAAAIuyyXADWaEP7bKXX+eRpBG8r+Q1pGhp61AAAAAEAAfpAAAAAEXZZLgAAAAAi7LJcAN8Z8d6AiBPypFVY/UjjWnjK0RebAAAAAAC+xs5gJtG6GvKXFWV/RZ9PqyUITIaAELAAAAAAAjAm1W4+qw0MxBJwWkJAnr9bf+tliaL6cgAAAAADlB+hkF1u+hujGIfeQsL84oA1wwDzpb/+AAAAAAAKbknAX6TEdjEbkbKPPSFFI4TZJIvUFUUAAAAAAtk02u5jhM138atuI97c6bRc+vn4ocbe1gAAAAAAK2xTU2pmT0ampJGn5IdsGp+JN8PRyRCKAAAAABlr27IGfp+bsS4AgFNoEwYtAw2NtogsZ8IAAAAAAB7+kgCK3cko1PcvASzlmjM1FeYCeXLr4AAAAAAF5Akz3aOjdH0zyfJz/z716v0hkrg0glnXAAAAAADmconGqG2a+0C/MzwszQrtgE85arI9vrUAAAAAANCdwwC8q3TVe9e1wz+h9s0Y1yI1uLft2AAAAAAA0J3DANjPeDqWXQ+NazbdUL5ydI5l9NkRAAAAAAANVwgM9/33uHQ7MUmqw557MVwUWMbZYQEAAAAAGSc5eW//NvbGkNJLirqldITvMlXSw1guYwAAAAB6sT3oef9q96Ll3HAQX3D0CKjrWaML66iIAAAAABWKiglaBrrzphdNvzb7AXu2n6D68/4CD1kAAAAAAGfJXdAZqYBoNkY5EhBRQUQUEwjXPpdjJQAAAAAAZykmMDUYgMHlzEjWW/hOZfkmiBl7X1ERAAAAAADQncMAQfVdS48jhto/2cpdTCVGRDZ15i8AAAAAAACn2MBCQZT5J/fglwG03sr4biFntER6KwAAAAAAoa13IFb2XZjJxXDQGQPzgFLZDgNxSUOMAAAAAABthgZgZPTpD2Fa9a1EdWoYAmwtUSP2RqoAAAAABbEU9y+Tef6K2BWx59LSZW1LLXDDcpjpnQAAAAAAyGHWLJ9ELdLVmEp7SjueJqCO3qUhTuuuAAAAAAa/1NwQq+KYrp2X/8496iKSJpu3O9I0Z4kAAAAAAMBpIJyugFqTmEbzWjp4GTE7mfwIu2EvSwAAAAACpgC5wLVjXQnLSqTlPhPIqDo8vnh3Cy7wAAAAAAovtAWA3QGmFKpaExKIUNcPnjARiX+rbugAAAAAAMYveUDmn2B8dHayrVUK+9BzRhRF+MVCdAAAAAAAIjaLgBV8SR4C0gXH80JNipsmwqHArIY0AAAAAAJb6PxgMf3A6zYQxx3czHw+cNzAff5ecwwAAAAADIwYJIA78BNrcd7zZjPBYoLTU7IaI8sE6AAAAAAMDFkcLkSbfGw/QvZrlZDz7D7X1Ymhk2MxAAAAAAQTFM8AV99ZymVS8C5xb8Jotgz5a7ZFo7kAAAAAAGa+8PhaQqkF60uShSoIvwqaDZCfmz5JfgAAAAAAstBeAF0oBFou2Bfepoor/p/K7wv4XTgvAAAAAAJRr6SAfVt/C/+ghxIr9FvdchxCNL3nnesAAAAAAcqq5KFhn+67AxwikolDz+9JotQ9EixvLAEAAAGXdCDcAH3FrjUyLSAg6e+JZ3gblnqZqVu4AAAAAQAD9IAAAABD6LAkqwAAAZd0INwAq0CbTE+UDx3e6CPRSq5EJziyDB0AAAAAHYN/zLquc/YF3Xgp7DTakwALKUr/Bst7EAAAAAABK9snMLZ+KdYTu/I8Iq7BkIOh99l+SsDnAAAAAA97kNoAwIGGUDxZaOT5bDF3w3MIT9Ggef8AAAAAAIK7FxvJUulKGJ8Ni5dS5EwZFs2t4aPllwAAAAACCYpngNbt4UEnT+qve1n73nTsuVPHH9aIAAAAABwN3r0u6mL5PdwtWrdU/uTNzIpjgzbs0ekAAAAAAQl/wRnym856echp0SYe0mFLjC+IJ8NA1wAAAAAG96tDQPMM/oxQJ2nBZUQNsMx8X3vEsTyuAAAAAABEurwqHHslSv3lBBQe/BJ43X4buuYxd84AAAAAADXgWnolCFrTMwNsiP73ZrC/hFuCN8CdcgAAAAAA0UX9aCs5G7mXVX7lvN2AbxSYtMuoje+4AAAAAAE0iTXeMj85sIpp4H3KZRCLxG3twEGWXo0AAAAAAcjVWHU2LqMbrwEDD2gzCa6Rpy9UQZJDawAAAAAA1MfaJWAP6N5gwSBFlBqPjinfgJ0aWUX8AAAAAAGSaKmgcPLY9JjykCK0XNmNuM3hozG+whQAAAAAAAj7h3+PUZCShZOTBtU/XdegEM/IcU8T8AAAAAABcdUTWqmYmCFoVGYmLmwfvAm7HBwtXLlCAAAAAIRsJEeAw9henbay6lJNdB92jx+dOH1iI2YAAAAAAEhsLTnaFp2yTr5GOy8/OZ0lBqKB4mSQQQAAAAAA2WOq9ukx5zYFuOAVqvpGwFm0yTilVl6QAAAAAAAyluWw7DVALgyiKx6oUpju4Xe8SekK0QYAAAAAArx12ODw/1jmrXM2uidpoOPWYRT0tTY8DwAAAAAAUImtAAk+Q6j1rDxbGvpjiQInRWpkcsbEAAAAAACvPNcAOE9fS92li37jPhQeVWVFtejzhOwAAAAAACYC4cNIsBjzUy1+mbRogkRYdB7qmeFFdAAAAAAL/WDpbVz6oPmwfAFTn0dWI+Qf+XDG1oghAAAAAALubCeAd9IsKzA9RavSd2QPR0OUNEgd9RoAAAAAABXnmuCVYW+W9/uqCFormziQUe/Pvbrt2QAAAAACPbHYQKKq/uzwiDn3uhWv/hN7FB7Ndu/AAAAAAAJUpHqArxD04vVD5zhxcC9IFGSeX4LqQGIAAAAAAHTTOgCwRIRZ5buxiUE4EBPPShXdqNDWBwAAAAAF2ZkvdLw9X4GLsoni0CQ/qVe8HBkm9fYjAAAAADJ5sOGAzWJMtmYfZLe7IEqSep0QcrucJPkAAAAAAIJimeAEnVjtJqRS5uXdbWLkBFFUS7UEkAAAAAAAaE7hgEWUB7J2PL9Ld7MDWI4Zp/D082AcAAAAAAAU3JOAVn/+dVVCux7LR75h0D7IRB6InGsAAAAABWAuUCRYKuMSF33KOtrjjOWCpJiL7QiSGQAAAAAAZ6anGI0J9bltKAwdqzDvYXaDgHL16DW3AAAAAADQncMAo8a3VLp2DC6gX1eH6CQfPtdgo2sAAAAAAA6aZ0CnVM0+kvYdJPSHpj1JFa7NCVltTQAAAAADQncMAKr514x9KsEOlYzlQ7lZHa5XUtLiAAAAAAQ8zfYAq23+5Lvmi5g6tHxLRYjY42BpLusAAAAAAFnIzAfKOvs4aF9odXZwwbKbhMleBx1THwAAAAAAIXqwItsb5fa7rrbseHNqdQs9aDZ/9fgrAAAAAAAAmJaA3gCGsYgDJ1j69N3eySHj8WvNeYoAAAAAAg/0CkrxlI/lO7atzxM7YPHtqGkbHlyDLQEAAAGXdCDcAOM2FlvGoJS6OgLZ8zDzoYFaSZoUAAAAAQAD9IAAAABD6LAkqwAAAZd0INwAYVLAgaPEJ4S5+OxR8xIKlRLKEuIBAAAAFbgixoDw2Qz7msNwtEXMSzsQYy1uLL2J2QAAAAEAAfpAAAAACtwRY0AAAAAVuCLGgP1l5XRP5PZtxNUE4PuYjT3Tr8KwAAAAAAASxoTABB5XOmiq9vY9Yid6k0cKLbVGxCwAAAAACsS2/oAQqoGhhYLP6gVOmXtfZc9OGneYPwAAAAABKhLDQBolWpcrUvTpkL9g74vUXt+yxdiDAAAAAAJbJ4BQIm01f0oxMQgnyBYMbci9xqFRW84AAAAAAGhO4YAv4cJ4mgyMnJYYoFJG1vWaPJkZUwAAAAAHxjL3gDUx4Udkri7+gMXDFVYXRTj0pdSSAAAAACL4nh4ARgy2EzJ+z+2WnyW5Qk44ZOufTmQAAAAAAGgClkBHPYpXx0E5aQKzx0VLJ73Q1qE0zgAAAAAAIJsrAGOjSp+87x5i7aRxGmLyyDnonUuHAAAAAAAAmJaAZFrmQqr9PmJ4fnW4v/mAupUTrkoAAAAAAZwlGMVqMO4AULnD9+Kay+YVvOqUmMn1IAAAAAAANZ78aHC1i0PipE0Agm261dVDwdD0HgyBAAAAAAJn1e8QeHYSgsN2grgBRz6/xkmoQFNJP6AAAAAAA4EMxoB50gL2LI0FyJ8TpGH/3iXwxwX/WQAAAAAI0MI1fIsGSPJWoIbd3Mv1MSrO2o3rgR0rAAAAAAFQDQ2At4FrZC/Px/o70EA8Zh7KhVcQ+soAAAAABBMUzwDH+c2UkjtBs61PJ0EATe684SoF6gAAAAAAPpW6gNfTQPfre2XK7iOrsVTyA/PpJG5DAAAAAAGRg2Bp5LERSoardGFuqbe4Jc4Vkxvx4zsAAAAAADnRBoD0+rKr5KoejH2n+CEE+FFNSKlfRAAAAAAAaE7hgA/Us+q5unJSOA2zV5UWWXEv/18FAAAAAAASlr9CJZF4kzrSX4RaAy8QIEz8HVWpuI8AAAAAAFeea4ApkHje58LcRI8cbja1BBoLnvZ0xwAAAAAAy7a58D/dEU/dsxaTwcgeg58/1ymaY/AWAAAAAAC2vEUiYYNgTKzRg0YGp3GrNwDumAT6M1oAAAAAAAnoxhBoB3elzeXP4BMNygxzyPBjSlLyiQAAAAAAaE7hgG9JTmsqcX/EzpD6ylIOdauu+qSVAAAAAAAL68IAed5ElWGeg+1jYH1x3WW9pB6IUIUAAAAAAHo/xsCad/B4f3j8s1tVcyDLjmf6gCG3IwAAAAAADOkNwKVQe9bHmQp8vX1is0uqs57Qr3U3AAAAAAAC+vCAqjsjNCoMveBDrAxPNymYSIG6an0AAAAAAGv1e1DVwZrTMaBI8AMFyoBM0t0uQiYpRAAAAAABK9snMOskJq+j7ZCRBb1aKQUNmeZGrELpAAAAAAUTSTAAqz3FcVv7MASTyskemfn5sjnGgJ4BAAAAEWAcICDsdAZP1SuYeqORyPES1bX7/RPlowAAAAEAAfpAAAAACLAOEBAAAAARYBwgIPtmU8hcpJbNDq1nVJukOwH6GSsAAAAAAAAM1HRQlWwQpF+TpvFVHS1DNsp7eu8XE9sBAAAAUX2gLABGbl+JG1aT7ua3UUzQ1LQbHJyBYQAAAAEAAfpAAAAAKL7QFgAAAABRfaAsAFZGizZmo3lPVE+LSA1zBlyFFNV5AAAAAAF5TCKAXUXnx/WZ8vv66VV1S0IMmuzdieQAAAAAAB9K3UBogSr2tGG4/iSxBFgSXF9qZO6y0wAAAAAEstHNzGqtUvT9ITtrVnJDKe/S/KFnvsvlAAAAAABdgf0Ad5MbRMlsar6KW7kr5wNo2Rt8mr8AAAAAFUNuXyCF7Pe0fiNs4Tl3hY3X0g7yaAjPxwAAAAAAA3UCgJ0dhH1TtTkbkvyBSGCHC1AUbmq8AAAAAAQrCRu+ni3vwB8Qnzkljsmex88fQNafyJcAAAAAC6Q7dADrzUPu4bw+ZSVtt2k7+FRbZGCm+QAAAAABbAkN4OwGZDJR68MgqWeZkJH1/W2SHZV8AAAAAABSoIZ69NpWol8ja+aicuArhkufWeBKHywAAAAADXIrEYD7wfZIo6M5f+nnrJJ8u3Wgpb98zwAAAAAAaVno4P05NwJ/8JxcKV062fH5z4SmMiZAAAAAAAAAp9jAAugQWCLztwOdPa5a/DSu3rKwGG0AAAAAABMdfmAD57/WOzc7Tr/WsuB4KHy1XR3Y0gAAAAAOZmkCIBefnfUoFw+MGRqeGooJSH+A/JcqAQAAABWjdwcADk7+zrIRFCgBK6VG7oAciM2HRigAAAABAAH6QAAAAArRu4OAAAAAFaN3BwASqEBYy6PloFfyDuDqlXGmm5VMyAAAAAABl4HrQhUj3OUv7F2vlm4qYBQ36Im19xE/AAAAABcy8cWUGEdaGEpIDuimbiYSzhKQzvFsVpMAAAAAAACYloAZqWFose4/aYhovMeeuvgbub7HtAAAAAAApD/Hayic5it8ME0DNzoRn60xcLbxIwTRAAAAAAABvLcoKUTTPJWEVctTQacwVkssekk/VQEAAAAABlIaQkUtYxdnKMmUFoQ2fI3yImnUNr1TDAAAAAABDDiNADLrjTQwP+qgB92rUdTrNBcfCbGVAAAAAAC+IZg8X+iLd+iJYWqg21+Dyza/AZSrhbQAAAAAA0J3DABiKM20bMHiIlQ8HcTrLRdFtYGeqQAAAAAAaE7hgGNXoEwcLMIMWBSNUt/Rd6FgYYoqAAAAAABhHyTMf1OFjrdM0b96K02HTFGyC86vX7UAAAAAC9SUb3CIB/JOfGRFJka9YoVxOV/4K/GZCAAAAAAACm5JwIupQnwoc0VTSDqi6+jThSfxXXixAAAAAHo8cEIAkSpoYSLpDbMdEdi3F/QVhcPIEPwAAAAAAmBDLQOsTjr+THXLE+FPPSxFbAxmePifTwAAAAAA0J3DALI/ITXk76zta07Qumc9YgbGHscZAAAAABe+LQZH2KNkezGNQVx78PkJxd0xFJWEfHsAAAAAAeBp1wD6D6hZgsj7DV8W2Pvp40PH3d9aTwAAAAAD2KB8J9EuDyTOC6kCr9ct0C2YR5jaiHoUAQAAAAAT3cEgJo7py3oqG0+xCjkxY+vxuyU9ypQAAAABAAH6QAAAAAAJ7uCQAAAAABPdwSAtntGGsgLuQ4F2s3CZRLNXv5LfLwAAAAACcdlJADKvbmLBIssIiEV1pl/0PvI5sl6KAAAAAABhsTZ8Oby2rLxu7g8GNePcXVyCmJ/WEdcAAAAAA5q7daJZwczBhc60XqQrBhbz5DQRQsHr0wAAAAAAvEb5f1vAmV2rlD8Jmzx9P/qvMm2kHW9AAAAAAAFgSOOwY8Ii2Xdzg9hKPgXrJtHlsQKqM9EBAAAAATXxtABwu4Ukg68+L8VltXohLpV47JlKCgAAAAEAAfpAAAAAAJr42gAAAAABNfG0AHedB4yX45n/PlLgZqqnpDBfrxF0AAAAAADQncMAhxDYae5S9ciWxq9I24hfuzaG5qwAAAAABWAJld9oCT9XJQcMavDlgXxhyQD+wLfXAgEAAACLsslwAKaPxRctlLK8F7c0ZpnFJrj3iY16AAAAAQAB+kAAAABF2WS4AAAAAIuyyXAArQsEdX8bEbK88KO9nQWFUlCr52AAAAAAAgmKZ4DVIgTftFr0fZruBA1N/U7mWfWdoQAAAAACeGPv8OTO+KKhb6wc4m9YJRz1JsLRYD2pAAAAAAA0J3DA/+SLSTLr+Y/+0Hkgk8Y6yeOS14wAAAAAAJtVwcEKWAO+6K2N6gduK4ILQFDMB8EbgQAAAAAAstBplytFxuvmm8IQkYMFyjMmY8jVtgFXAAAAAAD+JO+eLNpj8dzQwpznhYyLC1tZkr5yipMAAAAARdlkuABUEecNd5TPOFirCyrej1Z2AexdrgAAAAABSNQH9lXPfK1NA4Hemkg3Mw78wgMfoj02AAAAAAYcnzaAj/CSIQK9x8wWwZ0b2K7rRsbW2TwAAAAAAYBGB1qVu/C200Ie5V6SoPmNHrUJaNtKGwAAAAAAXCIb17MWOBLa+yJUgdHhDBre/T7Oz+6JAAAAAAXSHboA55Sxb2w1fHCesfem12HmmzQGbmMAAAAAAAwJ66nu6pROw/OceBrlzYZ4KPa5RRA2vQAAAAABBMUzwBYtMGt+JGeSXQHlZ0erNcofNc4vAAAAAAI7qx2TGMUu97W9uyDG+C0C5+A34TLQQ7gAAAAAAIEJFFEa4V/HQsz4fKgKtjrC4hkv1GtOCQAAAAAaqOtz7DI6R1hKUpfSuyJASZpgZcij5PDoAAAAAALaKCqAN7mToGCzhPgP95Qvw+DdPWb1CN4AAAAAAS6jKiFPq7/b7D4V6tH+IKvCHWSa0HiNowAAAAABZoWdwFUgU0GQqG1Yv+i/I8JIVYxLojheAAAAAAlQNywjXrFj2wJlMZ8RWTJQ2wMSmy9wEpoAAAAAAeNLYrtkFb282q7eaJ/NZ6x4Dkk2Gu01UwAAAAABkt/ttmg7vVuu7d9wYJYXSop232tA+/M7AAAAAAuicbCAkzE5oaV19+9SZrlOsAvhiyPCXGQAAAAAABe1au7AJHEchj3fiBMpNgEZxYY2IfEVlAAAAAAA70CbwMSMtnJoqFW3qSRrLyCVgznhoBQ6AAAAAAED1OBQ/SJwLf8yzbtIEXbMNuG57Kz2eG4BAAAArcEUrWAP4gAPXtu9RZx4YE7JuSO1b8eZOwAAAAEAAfpAAAAAVuCKVrAAAACtwRStYB9L+L4jNoJ8iodJVNVdNjiIXUF9AAAAAAAKV2X8JaEaT/MI/fKzs4JGKlNIvJKMlncAAAAAC+CUXeAyOWwAV2daVbv7TwqNa5P2A2UAHQAAAAAAHya5QCoQsaQG66H+l7cOIr5o5UvOs++PAQAAAAbna7eANqdqy0FoeqG6RzY2i3Vffpl89k0AAAABAAH6QAAAAANztdvAAAAABudrt4BHOiWjKC80jF9Ch2sHMiISP7/37AAAAAABfw+o4HRJ8Hbyh9WPB8+OGTP1FmHGDhO1AAAAAAVxXCs4gpT0W2y6Xz71yETk/LOXRTDpFFEAAAAAAaE7hgCq77Xli1AQoZ0aNlqICeGarILedAAAAAABKuebnLJso7BZ36HUUQkgNM7gfFLFUiMMAAAAAAI240qA0nsOpBn/b2hivJIYgSCh5FbTHyEAAAAAHhcEzDPdxD91L49ZbSs6XGoV2EM/Vfyu+QAAAAANChvndlHnZ+5mUH4jfhhMvuGhYufRiEVIAQAAACtG7g4A+WLSVftsi6BrEZL39zEJ9d+EPe0AAAABAAH6QAAAABWjdwcAAAAAK0buDgAD0v736KaDElx101Wm1CMX26Bz8QAAAAAADuLoFPCVIZcnrtRUFeNqK1wZ+1Ap6J53AQAAAZd0INwAEUT7D1mh732gOtdkCPx9V+qw5+AAAAABAAP0gAAAAEPosCSrAAABl3Qg3AAnlUbNOlMn0VT/iGCz50x0jmPvrAAAAAAAdETFpCgnh+V/A60Jk9iO9wTW+LY9Sh3TAAAAAAEkiiMAO8chaSLbFXxd0hlOeX5mX2jXGpsAAAAAANCdwwBAdvS9ygKWG+L91gd4DZQcBFCbjgAAAAAAvVzBYO0yS842t4xmvZrqDgAdvkzx640FAQAAAAlZDItgR0iNPsHFIbRISV0nEXy2C//Q/dIAAAABAAH6QAAAAASshkWwAAAACVkMi2BMbBOTfplBAgyEBM2bwpkpB5K8QAAAAAAK4oRjgGCTk3JdGjLG756Ai1N2Lx7xCAWgAAAAAAE47KSAYiQ86OeOf8MeXi0V40PFFNPqNuIAAAAAAGhO4YBkQjfaQT9A9UFrMB29IaMckbzciwAAAAAGHJ82gG7mEZ4LZYUpKtNKcSmTFqSC9JCHAAAAAAkxxd8eb7O0zWBS2lYn747wCQ7JeQpDKx8AAAAAAW11gy07yidsQ3wcF6QL7A0sUb26T1A4rAEAAAA8ln/dwHKiovl814ZPbPRx2s5ZmBdHyxOxAAAAAQAB+kAAAAAeSz/u4AAAADyWf93Af/t2TEfBFV0rh756/NV9om1nPPAAAAAAAPoLWfuEEmFK2BE6XVTF7zOwemc52Zs9EwAAAAAAPUu4IqiqZU6VBuR9KRohm6YyfGr2oYxPAAAAAAAt5ssgsxGzPJ38XfDoF4SHkZQCzUUjoooAAAAAAYi+A27AEZ/iHoNTmc0FNXEXW9mVqoroywAAAAAJ55tumsdUkQ2kL+4A64QhDmiYnuPAWiuFAAAAAAGfccKAP94z5Tq+QbXDxjxstkHeY57jrEgBAAAAGhApbOAIDqqaofoXXO6EpisTW4HFIRPy9wAAAAEAAfpAAAAADQgUtnAAAAAaECls4BAXw8be/oigImYNrwH0qhJFBrvHAAAAAAVMcWWBIS4OcWxSwPVP233Yuwtz1ZBafH0AAAAAAFGoioBIDe92+SCeWGD/us+IJlCBQKqZMQAAAAAAH0rdQFkwY/Rk+9Z0TXj2IBVfYYX+4iNjAAAAABkhubEAbRup6s3lzUHkHbrzlbwJyqJ/0RQAAAAAAgh/YCB7DPYxPhoY6oyAt/IkbZ2hERWjmwAAAAADCDarRInc83w5pZP76Tt9rZvlvO6V8kS3AAAAAABTXCj7jo9+2t1sgWI3K99p+MKvWdd0n+cAAAAAC0clUQ/NX7WWh/oh8J+C0sOS3WSWXkVHqAAAAAABlZuyoOWjlMT7uZc55hJeW8nDcIrqEIgBAAAAAAEND4vtCoWfs9zoqCSiUVHzidCnKlNif5UAAAAAAAH7WtAUnviq9tJ1X2/tmhDKEj7JmZUq9wAAAAABccW2cCFeJz8p9vDqDwSNYOxgJhStNNYSAQAAACLsslwAKF+jlbe9GxMD8+XnXQFCs8pfOTUAAAABAAH6QAAAABF2WS4AAAAAIuyyXAAtDyyk/7Ii4LRb98rFZv2rgQDopwAAAAAANCdwwEC9T2L3zsnCWIzngJCfmyJmH/0rAAAAAABoTuGAQ1tU9AEhyP+0UA/smwsccvNhpkkAAAAABBMUzwBJNwef9Jdpo6SmQGCerXwZLz09ggAAAATlr45dSE6XaFbAibXoVdRWvvS7VWLForNmAAAAAAsIoCTzW3koUkIaLDz9G8LLdpve30xTXBAAAAAAAFPvrSGFWksiBpjU9qsJawHzerQwUwfMOQAAAAAKWNHUFoZ7L/iaDv/NmzJzaK6AzZlb4WqkAAAAAAi/etu/htz6VkZNANXC1cHCU1l0GoVvFfUAAAAAAIC+/ACOCo4vaOgITUvd07qEIUKGcPGvGAAAAAAAAJiWgI5wE7f0RzLNyKsuXLMeJzfgInixAAAAAAH8ctXMkWJENgb+60tXcF2Q7zJOAROdvcsAAAAAADTfzam9dZ5xRhi1rUJRygc+NeE0q/YpvAAAAAAA0J3DABb5q7crphQbOxXVYzEU+kkzgph9AQAAATGXGKUAx/UL61EGbl3vKOH0nZj+tyrgpjEAAAABAAH6QAAAAJjLjFKAAAABMZcYpQDJGty+VDC/nZ9c2JMR/WUVG28HbgAAAAAAGtL7pdBkGFEdoW+MtEP0uZmaNq7B0prrAAAAAADZpChPwJORElVzh043nx8KkpfKdK5/teIBAAAAK3BFjQAJWONZCiaZFlaefenGMfytbGvXOwAAAAEAAfpAAAAAFbgixoAAAAArcEWNABKpZ8dJ7qYApDKYjkGUiYDsA+yeAAAAAALSHd3WFcEIFIlau+J9rjmDEax6eV5vybUAAAAAAXH7HlAaNWtijFevO+2JcC2QSGTYoNTcmAAAAAABk4qUYDPAsmDswqhxXPe3B41gWFrHB6NPAAAAAACx/G8APgmyAgK8pKfkX0dogIxtLJJ9/8gAAAAABKgXyABHbwL8pjXeDcusrFVQLqdeHcg2YgAAAAAAezR6ZUgJ6fDol3LGvZlnlODDHMheKFSIAAAAAAG2GBmAaO4cmhSoXsLZYMW1Cvl+R7yJ09MAAAAAABtxJYBqOhoXtH+GnxJQosYmUI3eyG6E8gAAAAAEJCKnQHJWMZNPfFm9uHLWP0zrNGcshONrAAAAAAAVycNHdPxE0GxTYHIc8VcOA8eReA7zFZ8AAAAAAapaqaGIAJc0Rsq+QjxrMndC9R2lWx+APgAAAAAA0J3DAORG1KWtb3KZE4trKj/VbxjqIxScAAAAAAB7j7hq6Qm6sgXOn4bCbzYm8fyRZCu+zKEAAAAAAAExLQAE0uOno4PCXqNEvREuTUjMKEuDPQAAAAAAhJFOCxIamvXEHhkhyrIxnueWqGlXFnHSAAAAABumbZyLdBLEzha8H8v5YyDwT5NVpqBOS38AAAAAAJx2UkDoQqlJI+Dy8grbCH9ST4GusQVXmwEAAAGXdCDcAJdIkna6RP6mcb5TlD5tBxL8pYfeAAAAAQAD9IAAAABD6LAkqwAAAZd0INwAoB+7ekrYsxU+DX66BF0/fgwJR1QAAAAAAH+NzwC9DAp0oXoTguaWDifw2VzlRcoH5wAAAAAEDR7uAMiWVvXtPkrBPxATxtpfw2Rys4w8AAAAAAKVskB3zGBqS7Jz5JpkYD0Dfwg9l8Iv3RMAAAAAB9b15pz6WxnQp7FJqtljFbtDLl4Veyu4WwAAAAAAXxC/UQA5dRqDP0ZB9M+kxC0b1Ura/tvnAAAAAABoTuGANNaqPwZFLR4iHg0l40RzrUERcPkAAAAAAAX14QA98+4sG38zR4VjkA/ogDebRnQ+jQAAAAAkMiY2r0q8UCmj9Gl8FkHmx3crQCOkIyFbAAAAAAAzmKsuW3YOtQ8dh0BQj04v7wSI+7HoC9YAAAAAAS/70wB+HWsjdSu/1CO0JvV9IWkX+K4AZQAAAAAFjswMc4zP+VyEfyaImf/2q994rafxUk9XAAAAAABQoVOwlkMW0TtzZViUSO+i3UTUxduerCQAAAAAAXWfB+SwsnXcypqVmn6cTDzMDmE0Tv+e0wAAAAAEExTPANFsDuQNTv78NJGC1aV3lvXsMaTWAAAAAACVlXUA07oyOHfBnnb+XvYJix5b2ekTST8AAAAAAfxeNkBY7JIoxRTvrKCFQ7oJabFF8asDlgEAAAART5HPwOvU7JFL7PhcQVhdUKgdzA9Lrk09AAAAAQAB+kAAAAAIp8jn4AAAABFPkc/A72BVjTM+d4OQJvobBXThsPHk0HkAAAAAKepeSBTzpTFQnUbfh+BYwnYmcqUTZsPOOwAAAAAAFDRZGA=="},test:{NETWORK_ID:1,NETWORK_NAME:"test",SEED_PEERS:[Dr.seed("seed1.nimiq-testnet.com",8080,"175d5f01af8a5911c240a78df689a76eef782d793ca15d073bdc913edd07c74b"),Dr.seed("seed2.nimiq-testnet.com",8080,"2c950d2afad1aa7ad12f01a56527f709b7687b1b00c94da6e0bd8ae4d263d47c"),Dr.seed("seed3.nimiq-testnet.com",8080,"03feec9d5316a7b5ebb69c4e709547a28afe8e9ef91ee568df489d29e9845bb8"),Dr.seed("seed4.nimiq-testnet.com",8080,"943d5669226d3716a830371d99143af98bbaf84c630db24bdd67e55ccb7a9011")],SEED_LISTS:[],GENESIS_BLOCK:new Je(new Ue(new ue(null),new ue(null),ue.fromBase64("9rorv34UeKIJBXAARx1z+9wo3wtxd0fZKc/egpxBIPY="),ue.fromBase64("LgLaPRYuIPqYICnb3pzCD2tDGrBd8XZPNK9MYqTysz8="),ze.difficultyToCompact(1),1,1522735199,79001,Ue.Version.V1),new Ke([],new ue(null)),new Fe(we.fromBase64("AAAAAAAAAAAAAAAAAAAAAAAAAAA="),[],z.fromBase64("VGVzdE5ldA=="))),GENESIS_ACCOUNTS:"AGRtpYhkbK5oQO5sU0S0+SMRztHCSQAAAAI2YQIo76+W/Qdx18mqTunnsgXJOKCOD3tLAAAAAd9ogj9ylKw7pwp10pk+949jFlqJxAmT0O0BAAADY/CKKve10FB3Vykom6+T63UZ+l5RdMqVCAAAAAEAABaAAAADY/CKKvcAAANj8Ioq917gf/WlrJ6y1E8IQ2okMCP6nphjAQAAA+ZJ4h5o2f56lf7OXSVX/+pPPMh1E/V7F3MAAAABAAAWgAAAA+ZJ4h5oAAAD5kniHmj1lhDTt0y0ONlmMNJecaymzJJFDAAAAAILzN2PaaO+PKDZQKTKVnNrImV/jtIq1JVnAQAAAl2Pzuo8WJqJbnQMHTNrCIilQtfH+0/l8R4AAAABAAALQAAAAGTtTScKAAACXY/O6jxQUKUSMKfMvmGTPwmD1sAScTjceQEAAAD1FNRPHJq+yIJf+QThlgj/uV2zDk8R0/ejAAAAAQAAFoAAAAD1FNRPHAAAAPUU1E8ckmdk1CPLIiMkQSldqbWvVZblMQMBAAABW9MKiWkhVWQl5UDggSKPKkJQikt4ltYOwwAAAAEAAAtAAAAAOfiBwZIAAAFb0wqJaa1WzaUO7G4NCi8oMKFCwq23XsAbAQAAAjEToSPQnzWIh98MHDKYWhEEkO1+hpLrVe8AAAABAAAWgAAAAjEToSPQAAACMROhI9BSc3ly9rKarERDLtgL0p1+Z91nmwAAAAFZpzPQK5IydxwdnXub6OYHp1kTgVA39ekBAQAAAk+9TT+9KMQEm2JEquqqHs9sxvEPCSPlO1QAAAABAAAWgAAAAk+9TT+9AAACT71NP73r6DhrXOcvSMVlMHjxxJGiY/yRtwEAAAPAAJXcxOA9UO5dsui8VI61yzogToSKifxaAAAAAQAAFoAAAAPAAJXcxAAAA8AAldzEWH8rLbLbKoRm321v0VFa5iqtX8wBAAABa5+Pz7TVnIzuPKRuDTlBOsxZo7y33K+CjwAAAAEAAAtAAAAAPJqX9/QAAAFrn4/PtDiLaSDOgHwkXgxtBKaCir2XDXKjAQAAAnUXHJrKG3/t01eblZWAWkiAzs/VQUA4h9EAAAABAAALQAAAAGjZL28iAAACdRccmsrFnj2zLaZ4YvLdcnG0JCdEL1KfOwAAAAD/Em+d805Zn8TJrlep4lagCi+lcLQRWa+xAQAAAeVb+PpCZp9dsB/E1OwQmE4GFHdbAhRL7p8AAAABAAALQAAAAFDkqX8LAAAB5Vv4+kIF6ZLAKDNObvGVx22Ha9QOFewrcgAAAACDKCKIVQHOe7FSwWolUKvDT9FN8BvChJzmAQAAAIco91buAcOmTPSEHR0RLX938nmIGN3QzBAAAAABAAAWgAAAAIco91buAAAAhyj3Vu52wLbeHNtfyWI8M1rmUfsqZvM8kAAAAACycUQn1EWzXlSWfL5j1NKrH1BwyMtnB0+ZAQAAA06PszJanoL7ebkCBwTwhjHB6jEJPnVsZGYAAAABAAALQAAAAI0X8zMPAAADTo+zMloJPKLaQ03LThkywi5uAbkpKmeorAAAAAPttNS3OKK6Rk9sgeCCLFfIkFMnlYrxiHxGAQAAAKa1mOYVDEuUc+eRf/0xs/O69qteFjrfQJ4AAAABAAAWgAAAAKa1mOYVAAAAprWY5hWyGdnPShceVlIWYr1jNInrFmSY2AAAAAC9GcQvl+FD9rlnVh+dePydT/HcD7JZMpgXAAAAALbBAO91yI6kP1LQkgfoFphhou6w28KrTOcAAAAD/rMPQ994M3FTR2rM5VzivXES6JSQKvWangEAAAHrQmTUYAVFtxMFAfCVmOI/CPWw1uF69ie2AAAAAQAAC0AAAABR4GYjZgAAAetCZNRgh4HXIo5PmNiXNZFWh3xn3rv/czQBAAAAvTxC6GxF+sNHOpl49EtdTkOc7X7iDrNQ8wAAAAEAAAtAAAAAH4oLJr0AAAC9PELobNAoM3MbWmAIt+jZ3IkIkHmr3GrSAQAAALO+pRcvwEYkRnNpJQCXOWFutBiZ9lca2VcAAAABAAALQAAAAB31G4PeAAAAs76lFy/RvUUU3oGlMKTlTij1B0SiWuQkPgEAAAF7brhSaJG6NDLeE/+sz7K5ZGOZivNOntOeAAAAAQAAFoAAAAF7brhSaAAAAXtuuFJonLXAwj7WoWE2DCa1W4GxRSYOJYIAAAADJ2oxNjxv3hEIxGMtXeEcBJxFz6n7v+QclAEAAAG1a+EcqTKU5FdGvyUJcShqM2k8BjRk9SAyAAAAAQAAFoAAAAG1a+EcqQAAAbVr4RypQsgQWW0xaEsJuYNYKlFw8NpGOzYBAAAAA4toboMznVCwh/1oRz/3WnAoZlJYuQG3ZwAAAAEAABaAAAAAA4toboMAAAADi2hug1a/+3i0b34JLF+Ps46aVUJ5JrTfAQAAAVu5f2l/U03YEcxPrclI122VDvHjtGyHeRsAAAABAAALQAAAADn0P+brAAABW7l/aX8BqY/x0GFwsSp36hAxu5tFJuPIyAEAAACV8p6fGnPViEhKb0cDDhmxXNF+o36tKGjkAAAAAQAAC0AAAAAY/cUahQAAAJXynp8aE8PH5kXg9J8wum/UC7eUytM/4zgBAAAC1uw87ooJB9xfdNsCLTwluw52nDQSwatCAAAAAAEAABaAAAAC1uw87ooAAALW7Dzuij0a3qwPjiSXgdCtasOASCDhFFrNAQAAAUKQwYjn4/JqJpoTqcVon2u1PFsf6br8xFoAAAABAAAWgAAAAUKQwYjnAAABQpDBiOc67iZpZw+cF5hqyKoCPI3SIqczPwAAAALAElVwJOnsXdPfU3OWPgiSBSWFmatwOSp0AQAAATWuW4P0nR2J0NWgsELIYprEHLwZA7zE1nYAAAABAAALQAAAADOdD0CpAAABNa5bg/QVNgm5lfTIXCeaAcHFllssgcYGpgEAAAPP0jEZczZn15ceEW+6z4L25RdDyVIJmubqAAAAAQAAC0AAAACiowgu6QAAA8/SMRlzkIc9WbLDTMQPF2VVqGuX+V4la88AAAADLOZAWTFOqn4vT+pOgOplxa6INDwvtRNQBwAAAAMsVwD1nq8c/smmjqcvV9cq8un/zhTOXwDUAQAAAOYWT/u9mNFWv1LvXVNR6nFGYBW/Gf0rXjcAAAABAAALQAAAACZZDVSgAAAA5hZP+73sTlo7xlXt8boPoPjmlnYkK6umNgEAAAMO0bYkx508+RS/1ID91Wv36UCE0mDA9g3ZAAAAAQAAFoAAAAMO0bYkxwAAAw7RtiTHzT173148/NQiL4OIorQAhaxlq80BAAAARRXX/sh8WYG6g+OYfDLsNv7BV+7wr59eeQAAAAEAABaAAAAARRXX/sgAAABFFdf+yN3L7gDGvez1wUpIw6XpaKkk047lAAAAAeuxBjMFGoUGJ4pfHsWaxATJ0f1VzPR4tvEBAAADdp/vwBdBJEdEGpq6ln6tuWPD8lWRwKa1MQAAAAEAAAtAAAAAk8VSoAQAAAN2n+/AF/V2HS/R/Dac99BojkjeAYwxnFsSAQAAAmPxNB6uVH9bjeFsVEZTftZGQqrCJBckKmgAAAABAAAWgAAAAmPxNB6uAAACY/E0Hq4LRv4M59EHEX33FeDxs1HblS54wgAAAAHruSKAPr6iV75K1i/LER/K5Fib23KFr2BmAAAAAQkRmkA+DGSuJaRUPeqk3/GIcze6QWIJZw8BAAAD+jADEhLUMDGf7IORZDd+0ep9JoiexWPpIAAAAAEAAAtAAAAAqbKrLa4AAAP6MAMSEm/wcvuKgPvR93UC6gg7uLRGD0CnAQAAAbfE4Un/Tth3SP6WtJ9e4cH/Pzpds0otpp0AAAABAAALQAAAAElLeuGrAAABt8ThSf9xbemTSE50kxXsbhDIlrTTPwQH0gEAAAJJqEmsdHOahlJLBDNDZyVO/QPk5ZvAe/ByAAAAAQAAC0AAAABhnAxHaQAAAkmoSax0Lz6fTZjQY0nJ4XsSPNJYHcw+WkYAAAAD8zk5UlAV+Ugcx25Pq9qm/xDbbtMAeQdbQgEAAAEtFcSBcSxB0RnkZXl+UCYK3YFp8AVvZPgUAAAAAQAAFoAAAAEtFcSBcQAAAS0VxIFxgUHH6VKl7R6Xxi+uUC97xBX4anUBAAADuGVoFiU6+EzTmr38oz1z3IulyWo/wVRpqAAAAAEAAAtAAAAAnruRWQcAAAO4ZWgWJW+ty2ixCIQ8AUfgE2EngV1h0/mOAAAAA/2TgfMeB9iI5gRi6lFt6xgKfvomo9e56WIBAAAASPsH4l3g4q/fociq4refm1UI92gL9nhkXAAAAAEAABaAAAAASPsH4l0AAABI+wfiXVw3guq4ZlItQvBtd91YxP84632UAQAAAIppTx4Wyiy9+VuiZtmk17xq0mcj7ozk+zQAAAABAAAWgAAAAIppTx4WAAAAimlPHhaov/PMvxBsvJXJ2pU9D21cQSA0bgAAAAOaU8VU8iao8HvM6eW28IHG51giSV5NPHlYAAAABA+UpuhjG7yIsumWM2hqSA6fuj0xCCCeN68AAAAAMmdwZLBQDurp31G0Lo1OzcI/BXoVKrRIrQEAAAOLqmH2Jpo78+QpFRSyNsc2jRp5vZY3xKWWAAAAAQAAFoAAAAOLqmH2JgAAA4uqYfYm6ngfyqe2caAdaxv4owt504u0tD0BAAAC0xsm8PS4UmJXghyK3jFGzuGO+EXU7CEaXgAAAAEAAAtAAAAAeISGfX4AAALTGybw9DGZvJndi55QHQoZqJEDmLH3WufiAAAAAg6tFpRAqVky+V2UV4lwiAdvXsTJ/6DWQEIBAAAEAGwkiVAlWo9aaeMByXaRO16Hsuw+01R3cAAAAAEAAAtAAAAAqrywwY4AAAQAbCSJUAV2ix0LBGomuH01sJsiX7Ieys7IAAAAACCibi1NQotobPjZD+MVe53Fm8ID9jELIn0BAAAAk+4tGsTHKqv+0DZPz0LUnUQzoFdzI02LuAAAAAEAABaAAAAAk+4tGsQAAACT7i0axDAU+Q7q2KbIbpNZXm3LMMNu+ekDAQAAA9jMyUAmbW9jmFTCzsO9mX57qTp4aECitKMAAAABAAAWgAAAA9jMyUAmAAAD2MzJQCZDJxiOABYC8VI0Knd3ocTMH8d5hgAAAADgfCs1F42jJ5xUCz/+x+hW0shZT+fc1oDtAQAAANg5F3AMLNkLSS6yG2I5Y9McB26kgRxf4k4AAAABAAALQAAAACQJg+gCAAAA2DkXcAzvW4MjMmSAgY8dLJKQ/8BGADzWVQAAAALcpPnPMuwRHdERewIASHnutlrHLLjLc1xvAQAAAYOT2RlsJath+IZkaytV0CJ35ljVRsIaSokAAAABAAALQAAAAECYpC7oAAABg5PZGWyxIzbC/my+XR6GJu/KrtZE73ZYYgEAAAJSMxQ8Ici1B0WKZ6HcvZU6rKynTexddOkiAAAAAQAAFoAAAAJSMxQ8IQAAAlIzFDwhi9kVYzleAvzOpScLxYP6I3PZgpkBAAACk5CpCuE3vlhTO1h+gS4p8NlSvdrBPn/iAAAAAAEAABaAAAACk5CpCuEAAAKTkKkK4eLsYBA2PrvNXpUCLnAh/NeoDUwbAQAAAnjO/Ejuj5AbWjuC8jCD3hkySdD3vCsqBI8AAAABAAALQAAAAGl31LbTAAACeM78SO7Ig1fjLGT5FhxY8AE9cZQfJpvNPgAAAAHBQnP8HCrBbBqoYIu/C4KtzVBr/ctzWlm2AAAAACcmXt9KRHkWXzlqMJoTxMJE34OUoFbau4IBAAAANTXtXH4wCtU7yxorHKxU/QyckqEB/0NSiAAAAAEAABaAAAAANTXtXH4AAAA1Ne1cfuHjXwjoZvNc7Fy5FAnAifyyJn8TAQAAAHxQ6I+F6IVTXopuOz9QB+vZdqvaMuEQAGAAAAABAAALQAAAABS4JsKXAAAAfFDoj4WT525f3PYm83/j53THueEgHZ/faQEAAAGp9duzQDTM9Fd866ppgfGuLMGPfsQgU5XoAAAAAQAAC0AAAABG/k9IiwAAAan127NAC5ArbXKgC+8vqx8QIpRFcilnSXgAAAACjlESpeQDMrGuHehMpWgAsm7qthgaeObVFAAAAAGTTWfJen+afpGqsUOhNXFhPBJ3JPgSpEr6AQAAAYN/fuya5Qc83TimGRduqCQX/YrLuSzQbpMAAAABAAAWgAAAAYN/fuyaAAABg39+7JoS7//vP72Non9Iek1G5aNau6oeGgAAAAKapDnYzUQyrukN+Qc9Wwz9v4ghLyNl71u8AQAAAnLNWV/XywPsi8BGZG+CKy1nw2+xObNJNDoAAAABAAALQAAAAGh3juVPAAACcs1ZX9cJ/cMH1zlttVFiiGadwl0Bx/q3mwEAAAEjw58XBvPDv8tMvp43jcqAMli/E8j6jWoHAAAAAQAAFoAAAAEjw58XBgAAASPDnxcGYr1tx3m56rnbCQnb+J8f/HMogokBAAABTLgwBl8EGS59TXS+JqdsNhqcLwBl7pzmLQAAAAEAABaAAAABTLgwBl8AAAFMuDAGX/EQPIpkc/N55Av4Sbdh3mUsAThlAQAAAzxtX3wL72TYUh7FYQMSITHJBHRSaI1GesgAAAABAAALQAAAAIoSOpStAAADPG1ffAtujoENPhZYsIUQgYFU/3HFztRL5AAAAALAAz0XFFc6DCzvNOl7tZ2PZQpxA8bk6fsQAQAAAOJuyV+s+WZJFMueRHWG5Sf7EpSwjoeopQkAAAABAAALQAAAACW9IY/yAAAA4m7JX6y0m1xthoQ990S9ZPSJiJZYpnZQ3AEAAAKxCI3UbPt5RqRxj2wqJ+KxC/ZwHjgZUUVmAAAAAQAAFoAAAAKxCI3UbAAAArEIjdRs7Cq6ODYs9WF2hll8W+GWb8oYoUkBAAACyifu9bOkg2SLC5uL67m1JmcVDp3LVm5sxgAAAAEAAAtAAAAAdwan054AAALKJ+71s8Y5qvGT75R/Wv75ANQP9H8Sr6cbAQAAAFlJobUUoSJyHcj70jR1LoP+zhKRmOAtQqsAAAABAAAWgAAAAFlJobUUAAAAWUmhtRRdv9EMhbsoP9ae+qfnk9KFs5ucFQAAAAF2AxI2dSusjJYD6ZgoaP3rOLetSacK2k++AQAAA+6eu5h6s85Q+/EMixarDWjt7IGyv2yWxOUAAAABAAALQAAAAKfFH0QVAAAD7p67mHoMtMNYAELvRG0YKYwaVt61Px1OxQEAAANTlgPXbArquAHccms33PTISgahBs9VhikxAAAAAQAAFoAAAANTlgPXbAAAA1OWA9dsoqedKVcuSahNoD+jz9nBKnQm7I0AAAACvL5HapC9sU53zQABUPJHFl8I2k133lEq8gEAAAGdQiyW3elWejCK4NDEy3pRe01EVBAudlMCAAAAAQAAFoAAAAGdQiyW3QAAAZ1CLJbdWykUMZN2YtPFE6u1gpr20fFpcj0BAAABD3x3iZuLTsWjstD9WDAkoIyWPabYoHJbewAAAAEAABaAAAABD3x3iZsAAAEPfHeJmxcC3BsssF43KiT4Ts4BxINcbxyAAQAAHp2697bfmslKGkZzY2OiC45SB0ynaYHMQzkAAAABAAALQAAABRpJ0/PQAAAenbr3tt8="},dev:{NETWORK_ID:2,NETWORK_NAME:"dev",SEED_PEERS:[Mr.seed("dev.nimiq-network.com",8080,"e65e39616662f2c16d62dc08915e5a1d104619db8c2b9cf9b389f96c8dce9837")],SEED_LISTS:[],GENESIS_BLOCK:new Je(new Ue(new ue(null),new ue(null),ue.fromBase64("JvMr9c9l2m8HWNdFAGTEastKH+aDZvln9EopXelhVIg="),ue.fromBase64("1t/Zm91tN0p178+ePcxyR5bPxvC6jFLskqiidFFO3wY="),ze.difficultyToCompact(1),1,1522338300,12432,Ue.Version.V1),new Ke([],new ue(null)),new Fe(we.fromBase64("AAAAAAAAAAAAAAAAAAAAAAAAAAA="),[],z.fromBase64("RGV2TmV0"))),GENESIS_ACCOUNTS:"AGTHyaGKKYtMW9zm81Nw2UYCIWr2bQAAAAOO9hgWyh/5Ezv+1Ldw9Oid2zwaY+LjRXAjAQAAAdpxepGoTVTy25Dj9WOZXg1SAyoCtCmEkgYAAAABAAAWgAAAAdpxepGoAAAB2nF6kagxFAXrnWawCibXmNIocpENbY2M4QAAAACPgR32bdaFsm6G5Bg4H96UDFtJMFclfA8rAQAAA+Z8YTcn7eJ7xhfBV9k79a2bDLpb0SWEgSIAAAABAAALQAAAAKZqEDPcAAAD5nxhNyfiENwK3NNQGB6fxKS62kvoApoe4gEAAAKLbf59cM8P40JXyIKzSkr749mOqp5n1/ruAAAAAQAAC0AAAABsklUU6AAAAott/n1wZs9N9eWbNeUSLDy5qbhe6CW7Q94BAAADLsSIL0WLcA6Nt5Ji+Pu2j2p4wJgN8lpIVwAAAAEAABaAAAADLsSIL0UAAAMuxIgvRXGosRRWBkjiIyWOFAzp3WZYGhQvAAAAAN+ByO6LKclRKAD8iueyAPGY/ZnTIbM5CbUBAAAAMXEUVZ+h9Kb5BH+lzQTKHdVMiFfmRsJBWAAAAAEAAAtAAAAACD2DY5sAAAAxcRRVn+hB476I0A6qQDjCSzzvumwsQHf9AQAAA03B6LO6vHPfpZtbnDWtPlN7WlO0l+aw1KIAAAABAAALQAAAAIz1psifAAADTcHos7qSQrji3cQRvdhZEyJaa9OF/pUTGwEAAAEJawwO04GTmnyPT2hcnepKTWwqUe3rBlVwAAAAAQAAC0AAAAAsPIICeQAAAQlrDA7TKd6Wv+nDz7vTAMDCu39sALbKiawBAAABJAr6aFtkUf/rcih9aUVHVigY+8UIy2/+QQAAAAEAAAtAAAAAMKx/EWUAAAEkCvpoW4oaIYhRvV3BULo9azzYYyKeeCxrAQAAA03cDnJSDjUiPbhnHIY/7aooMW/Y0EpeT58AAAABAAAWgAAAA03cDnJSAAADTdwOclKFF7HkvjRHt0g5nwPzP59X9Uge9wEAAAGGEgl7kg2aSBjn4A5Od5+0Lh5sBpm6dar7AAAAAQAAFoAAAAGGEgl7kgAAAYYSCXuSk87IwlS6e4YT+koCY6/lL28D3sYBAAACjIEYqGyFuGHIpbQDcibbuM8kkiHguhEKAwAAAAEAABaAAAACjIEYqGwAAAKMgRiobCUh+XSo0plb6NrVoCXHLwt7XzNZAAAAA1fLvw67icCbQBBXoglPtPMRkeln1StoiSYAAAACFc2B9ywrb3evyXkRn2lIr99+cUgwAipdwwEAAAPxDMrFsmKBEu04Bg6LEqHvrJj2ewKnZ3qmAAAAAQAAFoAAAAPxDMrFsgAAA/EMysWyc3iG9qZDzL/uCLJEdhmwKaAHgIMBAAACPUMNm/Uu1vSoi1gBseNjIp1mp154Sw79UAAAAAEAABaAAAACPUMNm/UAAAI9Qw2b9YcCc88Iyrx0NUbMZOK3rJdc/ggmAQAAAnsptOZZhrhJa+5Z89rK+wkxjzUthAHVfDoAAAABAAAWgAAAAnsptOZZAAACeym05lkhopvGoZgAsJ38XeT+KI6VFZ6HVQEAAAKZNR0cZ3N/V/VlAJ1g1vBkidPGJBfIBQZcAAAAAQAAC0AAAABu3i+EvAAAApk1HRxnwWGEqi7rwr6bZ9df8Uhr5cG3nAUAAAAB+ett5xJRyHYmu80aIhgssCKeD9KYKNlI+gEAAAHcmaAZJKAMxD+5u1O+u5ALn65VT4HGDIxwAAAAAQAAC0AAAABPbvAEMQAAAdyZoBkkTOyyimPzT9JghHBHVSBRqHTY6qMBAAABMiMv3v3Fqy0Rq/yOBHu3RlPy/l121QrKAwAAAAEAABaAAAABMiMv3v0AAAEyIy/e/TyTgfm1ATlfv11vqgZ2mGgLp5I3AAAABB6+ivcGqPmcXVPR6jFzANQ/oHcfYAbWLCAAAAACEUzY24RQtw7fskPYnAuOCrVYvYWjy/Sq2QEAAAA1ejIu8T103OAjQ6dOO7R1qdl9voiJTyMzAAAAAQAAC0AAAAAI6bMH0wAAADV6Mi7xMF78LO+AmQt47Q2F8lJOtFmP+8sBAAADIrN3lvTLTPW10LenULSqINB8dhRMCjZoqgAAAAEAAAtAAAAAhciT7n4AAAMis3eW9PfpWIeCkAqinftTYf+jyT/iAxE2AAAAACtXQrrG1ENyC6MF0IZJhxjw1atz1xqHhPwBAAAAvi3c14rVVkylvnz2LXDSnAd0Ap9o6EcHkwAAAAEAAAtAAAAAH7JPeUIAAAC+LdzXityvfksBfLlWNu3IzdEXOAKKjuLqAAAAAWKGyagmDA2tPlgh/4bnCAHEUTy6X43XlxYAAAABpZApuaLoMq3LP2zjV1NWvIyyZ9WXhbjKrgAAAAOSnw31GpWdLCHuiuqqRiU+c6/7QpNNu415AQAAA/PO43ur9pEsqZCx+ctQ0uLZPiPcQtZ4AtoAAAABAAALQAAAAKiiez9IAAAD887je6ty7kyqfDlYpexa6zO61+OPc7PemgEAAAFVhN0jTzdIVM9Xza9gEHJEU/NTXLDe1iXFAAAAAQAAC0AAAAA463owjgAAAVWE3SNP895JOb/wZK4ieF/UWFZvxGiH5yMAAAABWtMtyhV1iFBda1GZC0OkOSwt9AADUTkavAEAAAGLTWokGsi+QGXG5VciJh0XKhgY2Ffw3nFhAAAAAQAAC0AAAABB4jxbWgAAAYtNaiQaxyj4UkPRXmdB4RUJOmY0/+DGi2sAAAABmtptM00N3PW8TiZSDGq75w65ENAqIvV17gEAAAPVauIkr0eeRNW8s9uvLImxBON8OZc+nrJLAAAAAQAAC0AAAACjkdBbcwAAA9Vq4iSvLMTqFpsInyV7LXX07AVlLB4LwK8AAAACVOJQdF94lWhUD0pOtwPsSpOcOfVM4c3lYAEAAAJZhQlPED5vd70C9VJcR9E0/6kVRjND3chpAAAAAQAAC0AAAABkQNbigwAAAlmFCU8Q5+bT5k92M+EdyU87fjVCIOHgJvQBAAABLAh445G4HY/gCBp8Ww86DjZzqu2656S1WwAAAAEAABaAAAABLAh445EAAAEsCHjjkfGu/x1GALyflu5s6H/RjA0uF2FJAQAAAfUQ1yISxqLt9R+tekR4gPOI6gjm8GCCewkAAAABAAAWgAAAAfUQ1yISAAAB9RDXIhLmoPJPmFOfClWZtRtz8SIHZV+RYgEAAAGb6NZw6ik9LhWvYkCsjo753C4xml4yhuLkAAAAAQAAFoAAAAGb6NZw6gAAAZvo1nDq0lWfSarsXeQhGik+Wy00hFQPYNIBAAAC4wlfg1nMx6ncdUeIXQp/MHyEH0Q1GZoNiAAAAAEAAAtAAAAAeyw6leUAAALjCV+DWRJzvcMi6fQ+RMgH4p3thxoZkT3KAQAAAploxifaQHmEokpWgPZUy2JkLz0fIsjxIz4AAAABAAALQAAAAG7my7FPAAACmWjGJ9ojMPo7C9y8Ib/ncXPhwUC60bh5vwAAAACNnQv2v4inBpnu2xVZInd7VAlMXKKdYgukAQAAApBN6CyLt+TdIz09e58DxUKFW4PK6+lckmcAAAABAAALQAAAAG1iUVzCAAACkE3oLIs/W2vCON/csGZ+BrXXzOfPf3+nwgAAAABdcEFzteZaaSm87wyRZwS2rvearhLJb0wSAQAAA5l3BvfWMZXszk+sOGOzYCH6Scso0530ACEAAAABAAAWgAAAA5l3BvfWAAADmXcG99Yn1+CSxVm0b9VEmdXSPU9MLZ6euQEAAACc7CZPBZWabWnc3dRvBQIYMyDgLCyx2AtMAAAAAQAAC0AAAAAaJ1u31wAAAJzsJk8FMsv+RNrEAeMhkxQQ7swlQm/MWcsBAAAEFqz9ZzfxBC8ZD/h5XbP5/TW158EyNFjtDwAAAAEAAAtAAAAArnIqO98AAAQWrP1nN9WW44AbwcH3rC9B0LDZEGH/6LGWAAAAA0/mTvNyq+e4MxN7UI6LWMDrHl4bIjVbRqkBAAAADwRE4OfGbkb1M4LvJTsug5Guwv4UipUglQAAAAEAAAtAAAAAAoC2JXwAAAAPBETg5xXn4XxmjRL8H7qyrMKtPOQ68d9gAQAAA+kpJjZRO8ds5r5Z15bsaAvUz1Hi+igym+wAAAABAAALQAAAAKbcMQkOAAAD6SkmNlFtNRkkOze3mxqbEGn8LmugDYG9AAEAAAIeKgo/6Q3VK9Fh4+5mvtU/qnCGKcL5eZe6AAAAAQAAC0AAAABaXFcKpwAAAh4qCj/pVkOr82XeobTRYSqMwBit+DK26L0AAAADExdE1KGweTGwMNtOUr0mkTMuJZPdUx/lFgEAAAIYnmRDO5Us7NZLbPKbfSqFz9Qcz12xp7EIAAAAAQAAC0AAAABZb7tgigAAAhieZEM7QJBbpsW5TySU3AOaRq0w6StqDbkBAAAAQYtUtY+neTkGp0FX3yBWlI9VfXL9rY2T0AAAAAEAABaAAAAAQYtUtY8AAABBi1S1j6CfjxyppAST/5j+yNsnpZ4mb+LMAQAAAwd7a4MeZabvmCauqJUxc/dnJt9Qdbu0C+sAAAABAAALQAAAAIE/PJXbAAADB3trgx6XwCRFCATy6PT5xzl/tTynPq+pVwEAAAP3RVI223cMsae0V7OPJkgsuqVbHiDuSfwpAAAAAQAAFoAAAAP3RVI22wAAA/dFUjbbqciNZ2beiMn+kVcprmWvCo0qNNYAAAAAp/x8AiuP0gOSmGXc+PyW+ma3l4h07YsKpAEAAAKhuMUSlEiZItBpeLfj6hIFvBR6t0/1Zyh2AAAAAQAAFoAAAAKhuMUSlAAAAqG4xRKUMbR0l40dlxXJiTEFuHD29zmRDB8BAAAC0qDOUYnujJP0QRa7dQ2AJ0h1cIE0IkEehgAAAAEAABaAAAAC0qDOUYkAAALSoM5RiepA5phgkMYQo9vghvEMs6W2EXiXAQAAAsKfyTSX6ZAOU+orXNxOz0wdBuAqVHbOiV0AAAABAAAWgAAAAsKfyTSXAAACwp/JNJcBVoZ5gIarGpvmG5G4a1OXW3821QEAAANETmvLWBcBCeyCAd6ZLaV8GnQ8Da54gAyrAAAAAQAAFoAAAANETmvLWAAAA0ROa8tY+JrQTn9k06PB7If9N0CfYchk/C0BAAACrhSVuS2ezk3SZrOTLlI6dWuGTC76mwagfAAAAAEAAAtAAAAAcljDnt0AAAKuFJW5LYlQAlhiQPsfkWnHfepiRbygaVcwAQAAAbh/Gb8NJqE45Cy7l+FzX6ekgF3R/5Mtr+4AAAABAAAWgAAAAbh/Gb8NAAABuH8Zvw0P094GHr/6AsV1AwxF7c61Qq2RSAAAAAJQwqsff2pLw8MLHSdj/TYI/vua9S1qFloyAQAAAZMy1gvR0p1S/3oRAOZ8nDanLv73M3Fv150AAAABAAAWgAAAAZMy1gvRAAABkzLWC9F4DlJe82PbL79kI4++HW6Glhr8OAEAAAAcKk11+SFNxI4R9S/ebQHQO2V5jHpCMS1hAAAAAQAAC0AAAAAEsbeTqgAAABwqTXX5sSvBMuNoUTbS19UmetiaDp8t/vsBAAABkaKnSL2M6hWXx8/DUkVUtGxAV3Xd9gtcfAAAAAEAABaAAAABkaKnSL0AAAGRoqdIvTi9K8WL24O90wK1LIuwvNvkRR9iAQAAAQ5MDkLw77e4PHxSapULV3EHaCWnRV0ELfQAAAABAAAWgAAAAQ5MDkLwAAABDkwOQvB45gZiCw5zStBMXeShepM6iLltkgAAAAHfl0LN8u7wC1h8uhyRIY5s1I1gZPfF1qn+AAAAA8xCKTupigAMUEItvNB1XfJi5d20TA4oijkBAAABheDAya/Vr7/+aeXTjjrLIAY/8G9+ps7jDAAAAAEAAAtAAAAAQPrKzEgAAAGF4MDJrySGgRI77yf0Ksrs7U5YU1v43lFrAAAAAkrmY2OrF77xscYdoQqK/Kr8Sc5nR/w91goBAAADoIlPx03C0gM7wMgvzaUglns4BJzvq8fWUQAAAAEAABaAAAADoIlPx00AAAOgiU/HTR059QJNJ6egySnjQ5ssU/g987fwAQAAAOSjwgS4txd+4xsScIOZ2jJ8gm6PFGb4IPcAAAABAAALQAAAACYbSwDKAAAA5KPCBLgEEiPQ5L80JKvaQkZUqVTQVFocRQEAAAAgrZivoOKiOJFwOp94dsp2dceiRnJRp2BDAAAAAQAAC0AAAAAFckQdRgAAACCtmK+gCouuvquET79GQpJvlDjxodZmWlIBAAADdflmIVtOxwzhUy9DP2U/1dg443ziW+44fAAAAAEAAAtAAAAAk6mRBZAAAAN1+WYhW7W78iEqRWPDm9L0+nV1sgxvC7aAAAAAAnjT5GbwylWQC2KwtxExw7D10y49vKcooJ0AAAADf6VG1QRSW6oEqsV40bK3bkmqzoXdot6i4gEAAAEy6r22pwWExn95sjo6xoCdI0e/eYKD/GftAAAAAQAAFoAAAAEy6r22pwAAATLqvbanD5Iv+2lMo8wGu38cLQnhQWGpZEoBAAAB3Wk4Pnb/keSDfMbiKmBGXEB/R75Sm81yZQAAAAEAABaAAAAB3Wk4PnYAAAHdaTg+dlD3NG/nQX9YueouG07G0GevJx2cAQAAASDQ25ZqoHTmauLeC1uxbbJc9puYK7ibUGQAAAABAAAWgAAAASDQ25ZqAAABINDblmrDxe/R9ACThqXry6xBd28gwzmBbAAAAAA3JtwFy7gOad2nnAuf4c9a2JDr8h65bBqxAQAAApIfgNiYaB9nad26DD093xiYPxcQq2fLUB0AAAABAAALQAAAAG2v6s7EAAACkh+A2JhP0wpVAIQo7aaYGJz1q+BQ/JvaAQEAAAELaF0K71KfkeqRPM7T8QipPJ8FVXyve5YUAAAAAQAAFoAAAAELaF0K7wAAAQtoXQrvJ/jj56GUsaHxN9mDMXP5RsX08l8AAAADE1QMtlVNL/Tr3lfTfZGZ4SRd7Ko1EbsleAEAAAKN3l0bwt3bQiKYf+QXt0o8YjRC4DeZwDgRAAAAAQAAC0AAAABs+mTZ9gAAAo3eXRvCVJEHZ0qy+F1pvTVulg0P1CdMCToAAAACfGL6o0cNbRO/RL5C/tljM1b4X9GibgKJhgEAAAPEPtTYFS70hIR9vGG5Bss2KK0fyL/Q7ZfwAAAAAQAAFoAAAAPEPtTYFQAAA8Q+1NgVjxMxbNwbSqmxFnDEgA2J2Io6Q14AAAAB0Fl8OgAV2mEYfjb3jRucPYtRg9szNOY5LAEAAADjj9fBEDJIdjKxmX0e1aiPEla5rtes80LhAAAAAQAAC0AAAAAl7U6gLgAAAOOP18EQBkYuU4gvkHTrVpgVrymqlmeIV3cBAAAA2NjC3v910c484H8ciZmr9lYIo66SCeFyQwAAAAEAAAtAAAAAJCQgeoAAAADY2MLe/1PF67K3QcuQJ+m4P7tOiIrVmdFhAQAAAukCHDJUZrnHmLoVULR6r8HDBaygNH/gNE8AAAABAAAWgAAAAukCHDJUAAAC6QIcMlS4diPveIAR8ciqf6WfLVCvxGQ1MQAAAAJlQHbfixmoGC8hAefMDjnblFS989zLCxhKAQAAA+519/AhViOdiXDAAdtc5/ueTM0syon8VYoAAAABAAAWgAAAA+519/AhAAAD7nX38CH0clyiOijE/jV+sOwm6ZB5i5GvYQEAAAGy/GNMTQyzah076TeqMT+jyMJhGgese8vbAAAAAQAAC0AAAABIf2XiDQAAAbL8Y0xNr/JNzMvTszgQcqMcDBEztfKONfgAAAARpIlShW0="}};class Qr{static isBanningType(e){return e>=100&&e<200}static isFailingType(e){return e>=200}}Qr.GET_BLOCKS_TIMEOUT=1,Qr.GET_HEADER_TIMEOUT=2,Qr.GET_CHAIN_PROOF_TIMEOUT=3,Qr.GET_ACCOUNTS_PROOF_TIMEOUT=4,Qr.GET_ACCOUNTS_TREE_CHUNK_TIMEOUT=5,Qr.GET_TRANSACTIONS_PROOF_TIMEOUT=6,Qr.GET_TRANSACTION_RECEIPTS_TIMEOUT=7,Qr.SENDING_PING_MESSAGE_FAILED=10,Qr.SENDING_OF_VERSION_MESSAGE_FAILED=11,Qr.SIMULTANEOUS_CONNECTION=20,Qr.DUPLICATE_CONNECTION=21,Qr.INVALID_CONNECTION_STATE=22,Qr.PEER_BANNED=30,Qr.IP_BANNED=31,Qr.MAX_PEER_COUNT_REACHED=40,Qr.PEER_CONNECTION_RECYCLED=41,Qr.PEER_CONNECTION_RECYCLED_INBOUND_EXCHANGE=42,Qr.INBOUND_CONNECTIONS_BLOCKED=43,Qr.MANUAL_NETWORK_DISCONNECT=50,Qr.MANUAL_WEBSOCKET_DISCONNECT=51,Qr.MANUAL_PEER_DISCONNECT=52,Qr.INCOMPATIBLE_VERSION=100,Qr.DIFFERENT_GENESIS_BLOCK=101,Qr.INVALID_PEER_ADDRESS_IN_VERSION_MESSAGE=102,Qr.UNEXPECTED_PEER_ADDRESS_IN_VERSION_MESSAGE=103,Qr.INVALID_PUBLIC_KEY_IN_VERACK_MESSAGE=104,Qr.INVALID_SIGNATURE_IN_VERACK_MESSAGE=105,Qr.ADDR_MESSAGE_TOO_LARGE=110,Qr.ADDR_NOT_GLOBALLY_REACHABLE=111,Qr.INVALID_ADDR=112,Qr.INVALID_SIGNAL_TTL=113,Qr.INVALID_BLOCK=120,Qr.INVALID_HEADER=121,Qr.INVALID_ACCOUNTS_TREE_CHUNCK=122,Qr.INVALID_ACCOUNTS_PROOF=123,Qr.INVALID_CHAIN_PROOF=124,Qr.INVALID_TRANSACTION_PROOF=125,Qr.INVALID_BLOCK_PROOF=126,Qr.INVALID_TRANSACTION_RECEIPTS=127,Qr.RATE_LIMIT_EXCEEDED=130,Qr.BLOCKCHAIN_SYNC_FAILED=140,Qr.MANUAL_PEER_BAN=150,Qr.CONNECTION_FAILED=200,Qr.CLOSED_BY_REMOTE=201,Qr.NETWORK_ERROR=202,Qr.CHANNEL_CLOSING=203,Qr.VERSION_TIMEOUT=210,Qr.VERACK_TIMEOUT=211,Qr.PING_TIMEOUT=212,Qr.CONNECTION_LIMIT_PER_IP=220,Qr.CONNECTION_LIMIT_DUMB=221,Qr.FAILED_TO_PARSE_MESSAGE_TYPE=230,Qr.UNEXPECTED_ACCOUNTS_TREE_CHUNK=231,Qr.UNEXPECTED_HEADER=232,Qr.TRANSACTION_NOT_MATCHING_SUBSCRIPTION=233,Qr.ABORTED_SYNC=240,Qr.MANUAL_PEER_FAIL=250,c.register(Qr);class Yr extends l{constructor(e,t,r,n){super(),this._channel=e,this._protocol=t,this._netAddress=r,this._peerAddress=n,this._bytesSent=0,this._bytesReceived=0,this._inbound=!n,this._closed=!1,this._lastError=null,this._id=Yr._instanceCount++,this._channel.on("message",e=>this._onMessage(e)),this._channel.on("error",e=>this._onError(e)),this._channel.on("close",()=>this._close(Qr.CLOSED_BY_REMOTE,"Closed by remote"))}_onMessage(e){this._closed||(this._bytesReceived+=e.byteLength||e.length,this.fire("message",e,this))}_onError(e){this._closed||(this._lastError=e,this.fire("error",e,this))}_close(e,t){this._closed||(this._closed=!0,this._channel.close(),this._channel=null,e===Qr.CLOSED_BY_REMOTE&&this._lastError&&(e=Qr.NETWORK_ERROR,t=this._lastError),t&&"string"!=typeof t&&(t="string"==typeof t.message?t.message:""),this.fire("close",e,t,this),this._offAll())}close(e,t){if(!this._closed){const r=this._inbound?"inbound":"outbound";h.d(Yr,`Closing ${r} connection #${this._id} ${this._peerAddress||this._netAddress}`+(t?` - ${t}`:"")+` (${e})`)}this._close(e,t)}_isChannelOpen(){return this._channel&&this._channel.readyState===f.ReadyState.OPEN}_isChannelClosing(){return this._channel&&this._channel.readyState===f.ReadyState.CLOSING}_isChannelClosed(){return!this._channel||this._channel.readyState===f.ReadyState.CLOSED}send(e){const t=this._peerAddress||this._netAddress;if(this._closed)return!1;if(this._isChannelClosing()||this._isChannelClosed())return h.d(Yr,()=>`Not sending data to ${t} - channel closing/closed (${this._channel.readyState})`),this._close(Qr.CHANNEL_CLOSING,"channel closing"),!1;if(!this._isChannelOpen())return h.d(Yr,()=>`Not sending data to ${t} - channel not open (${this._channel.readyState})`),!1;try{return this._channel.send(e),this._bytesSent+=e.byteLength||e.length,!0}catch(e){return h.e(Yr,`Failed to send data to ${t}: ${e.message||e}`),!1}}expectMessage(e,t,r,n){this._closed||this._channel.expectMessage(e,t,r,n)}isExpectingMessage(e){return!this._closed&&this._channel.isExpectingMessage(e)}confirmExpectedMessage(e,t){this._closed||this._channel.confirmExpectedMessage(e,t)}equals(e){return e instanceof Yr&&this._id===e.id}hashCode(){return this._id.toString()}toString(){return`NetworkConnection{id=${this._id}, protocol=${this._protocol}, peerAddress=${this._peerAddress}, netAddress=${this._netAddress}}`}get id(){return this._id}get protocol(){return this._protocol}get peerAddress(){return this._peerAddress}set peerAddress(e){this._peerAddress=e}get netAddress(){return this._netAddress}set netAddress(e){this._netAddress=e}get bytesSent(){return this._bytesSent}get bytesReceived(){return this._bytesReceived}get inbound(){return this._inbound}get outbound(){return!this._inbound}get closed(){return this._closed}get lastMessageReceivedAt(){return this._closed?0:this._channel.lastMessageReceivedAt}}Yr._instanceCount=0,c.register(Yr);class Xr extends l{constructor(e){super(),this._conn=e,this._conn.on("message",e=>this._onMessage(e)),this.bubble(this._conn,"close","error")}async _onMessage(e){const t=Date.now();let r=null,n=null;try{const t=new j(e);n=Er.peekType(t),r=Er.parse(t)}catch(e){return h.d(Xr,()=>`Failed to parse '${Xr.Event[n]}' message from ${this.peerAddress||this.netAddress}`,e.message||e),this._conn.confirmExpectedMessage(n,!1),null===n||n===Ut.Type.REJECT?void this.close(Qr.FAILED_TO_PARSE_MESSAGE_TYPE,"Failed to parse message type"):void this.reject(n,er.Code.REJECT_MALFORMED,e.message||e)}if(r){this._conn.confirmExpectedMessage(n,!0);try{await this.fire(Xr.Event[r.type],r,this),this.fire("message-log",r,this,Date.now()-t,e.byteLength)}catch(e){h.w(Xr,`Error while processing '${Xr.Event[r.type]}' message from ${this.peerAddress||this.netAddress}: ${e}`)}}}expectMessage(e,t,r,n){this._conn.expectMessage(e,t,r,n)}isExpectingMessage(e){return this._conn.isExpectingMessage(e)}_send(e){return this._conn.send(e.serialize())}close(e,t){this._conn.close(e,t),this._offAll()}version(e,t,r,n){return this._send(new ir(E.CODE,e,Wr.GENESIS_HASH,t,r,E.createUserAgent(n)))}verack(e,t){return this._send(new sr(e,t))}inv(e){return this._send(new Wt(e))}notFound(e){return this._send(new Xt(e))}getData(e){return this._send(new Qt(e))}getHeader(e){return this._send(new Yt(e))}block(e){return this._send(new Ft(e))}rawBlock(e){return this._send(new zt(e))}header(e){return this._send(new qt(e))}tx(e,t){return this._send(new nr(e,t))}getBlocks(e,t=Gt.VECTORS_MAX_COUNT,r=!0){return this._send(new Ht(e,t,r?Ht.Direction.FORWARD:Ht.Direction.BACKWARD))}mempool(){return this._send(new $t)}reject(e,t,r,n){return this._send(new er(e,t,r,n))}subscribe(e){return this._send(new rr(e))}addr(e){return this._send(new Kt(e))}getAddr(e,t,r){return this._send(new jt(e,t,r))}ping(e){return this._send(new Zt(e))}pong(e){return this._send(new Jt(e))}signal(e,t,r,n,i,s,o,a){return this._send(new tr(e,t,r,n,i,s,o,a))}getAccountsProof(e,t){return this._send(new ar(e,t))}accountsProof(e,t){return this._send(new or(e,t))}getChainProof(){return this._send(new ur)}chainProof(e){return this._send(new cr(e))}getAccountsTreeChunk(e,t){return this._send(new lr(e,t))}accountsTreeChunk(e,t){return this._send(new hr(e,t))}getTransactionsProof(e,t){return this.getTransactionsProofByAddresses(e,t)}getTransactionsProofByAddresses(e,t){return this._send(new dr(e,t))}getTransactionsProofByHashes(e,t){return this._send(new pr(e,t))}transactionsProof(e,t){return this._send(new fr(e,t))}getTransactionReceipts(e){return this.getTransactionReceiptsByAddress(e)}getTransactionReceiptsByAddress(e){return this._send(new Ar(e))}getTransactionReceiptsByHashes(e){return this._send(new gr(e))}transactionReceipts(e){return this._send(new yr(e))}getBlockProof(e,t){return this._send(new mr(e,t))}getBlockProofAt(e,t){return this._send(new _r(e,t))}blockProof(e){return this._send(new br(e))}getHead(){return this._send(new wr)}head(e){return this._send(new vr(e))}equals(e){return e instanceof Xr&&this._conn.equals(e.connection)}hashCode(){return this._conn.hashCode()}toString(){return`PeerChannel{conn=${this._conn}}`}get connection(){return this._conn}get id(){return this._conn.id}get protocol(){return this._conn.protocol}get peerAddress(){return this._conn.peerAddress}set peerAddress(e){this._conn.peerAddress=e}get netAddress(){return this._conn.netAddress}set netAddress(e){this._conn.netAddress=e}get closed(){return this._conn.closed}get lastMessageReceivedAt(){return this._conn.lastMessageReceivedAt}}c.register(Xr),Xr.Event={},Xr.Event[Ut.Type.VERSION]="version",Xr.Event[Ut.Type.INV]="inv",Xr.Event[Ut.Type.GET_DATA]="get-data",Xr.Event[Ut.Type.GET_HEADER]="get-header",Xr.Event[Ut.Type.NOT_FOUND]="not-found",Xr.Event[Ut.Type.GET_BLOCKS]="get-blocks",Xr.Event[Ut.Type.BLOCK]="block",Xr.Event[Ut.Type.HEADER]="header",Xr.Event[Ut.Type.TX]="tx",Xr.Event[Ut.Type.MEMPOOL]="mempool",Xr.Event[Ut.Type.REJECT]="reject",Xr.Event[Ut.Type.SUBSCRIBE]="subscribe",Xr.Event[Ut.Type.ADDR]="addr",Xr.Event[Ut.Type.GET_ADDR]="get-addr",Xr.Event[Ut.Type.PING]="ping",Xr.Event[Ut.Type.PONG]="pong",Xr.Event[Ut.Type.SIGNAL]="signal",Xr.Event[Ut.Type.GET_CHAIN_PROOF]="get-chain-proof",Xr.Event[Ut.Type.CHAIN_PROOF]="chain-proof",Xr.Event[Ut.Type.GET_ACCOUNTS_PROOF]="get-accounts-proof",Xr.Event[Ut.Type.ACCOUNTS_PROOF]="accounts-proof",Xr.Event[Ut.Type.GET_ACCOUNTS_TREE_CHUNK]="get-accounts-tree-chunk",Xr.Event[Ut.Type.ACCOUNTS_TREE_CHUNK]="accounts-tree-chunk",Xr.Event[Ut.Type.GET_TRANSACTIONS_PROOF_BY_ADDRESSES]="get-transactions-proof",Xr.Event[Ut.Type.TRANSACTIONS_PROOF]="transactions-proof",Xr.Event[Ut.Type.GET_TRANSACTION_RECEIPTS_BY_ADDRESS]="get-transaction-receipts",Xr.Event[Ut.Type.TRANSACTION_RECEIPTS]="transaction-receipts",Xr.Event[Ut.Type.GET_BLOCK_PROOF]="get-block-proof",Xr.Event[Ut.Type.BLOCK_PROOF]="block-proof",Xr.Event[Ut.Type.GET_TRANSACTIONS_PROOF_BY_HASHES]="get-transactions-proof-by-hashes",Xr.Event[Ut.Type.GET_TRANSACTION_RECEIPTS_BY_HASHES]="get-transaction-receipts-by-hashes",Xr.Event[Ut.Type.GET_BLOCK_PROOF_AT]="get-block-proof-at",Xr.Event[Ut.Type.GET_HEAD]="get-head",Xr.Event[Ut.Type.HEAD]="head",Xr.Event[Ut.Type.VERACK]="verack";class $r extends l{constructor(e,t,r,n){super(),this._blockchain=e,this._addresses=t,this._networkConfig=r,this._channel=n,this._peer=null,this._timers=new v,this._versionReceived=!1,this._verackReceived=!1,this._versionSent=!1,this._verackSent=!1,this._versionAttempts=0,this._peerAddressVerified=!1,this._peerChallengeNonce=null,this._pingTimes=new Map,this._addressRequest=null,this._getAddrLimit=new G($r.GETADDR_RATE_LIMIT),this._challengeNonce=new Uint8Array(ir.CHALLENGE_SIZE),Q.lib.getRandomValues(this._challengeNonce),n.on("version",e=>this._onVersion(e)),n.on("verack",e=>this._onVerAck(e)),n.on("addr",e=>this._onAddr(e)),n.on("get-addr",e=>this._onGetAddr(e)),n.on("ping",e=>this._onPing(e)),n.on("pong",e=>this._onPong(e)),n.on("close",()=>this._onClose())}handshake(){if(!this._versionSent)if(this._channel.version(this._networkConfig.peerAddress,this._blockchain.headHash,this._challengeNonce,this._networkConfig.appAgent))this._versionSent=!0,this._versionReceived?this._peerAddressVerified&&this._sendVerAck():this._timers.setTimeout("version",()=>{this._timers.clearTimeout("version"),this._channel.close(Qr.VERSION_TIMEOUT,"version timeout")},$r.HANDSHAKE_TIMEOUT),this._timers.setTimeout("verack",()=>{this._timers.clearTimeout("verack"),this._channel.close(Qr.VERACK_TIMEOUT,"verack timeout")},2*$r.HANDSHAKE_TIMEOUT);else{if(this._versionAttempts++,this._versionAttempts>=$r.VERSION_ATTEMPTS_MAX||this._channel.closed)return void this._channel.close(Qr.SENDING_OF_VERSION_MESSAGE_FAILED,"sending of version message failed");setTimeout(this.handshake.bind(this),$r.VERSION_RETRY_DELAY)}}_onVersion(e){h.v($r,()=>`[VERSION] ${e.peerAddress} ${e.headHash.toBase64()}`);const t=Date.now();if(!this._canAcceptMessage(e))return;if(this._versionReceived)return void h.d($r,()=>`Ignoring duplicate version message from ${this._channel.peerAddress}`);if(this._timers.clearTimeout("version"),!E.isCompatible(e.version))return this._channel.reject(Ut.Type.VERSION,er.Code.REJECT_OBSOLETE,`incompatible version (ours=${E.CODE}, theirs=${e.version})`),void this._channel.close(Qr.INCOMPATIBLE_VERSION,`incompatible version (ours=${E.CODE}, theirs=${e.version})`);if(!Wr.GENESIS_HASH.equals(e.genesisHash))return void this._channel.close(Qr.DIFFERENT_GENESIS_BLOCK,`different genesis block (${e.genesisHash})`);if(!e.peerAddress.verifySignature())return void this._channel.close(Qr.INVALID_PEER_ADDRESS_IN_VERSION_MESSAGE,"invalid peerAddress in version message");const r=e.peerAddress;if(this._channel.peerAddress){if(!this._channel.peerAddress.equals(r))return void this._channel.close(Qr.UNEXPECTED_PEER_ADDRESS_IN_VERSION_MESSAGE,"unexpected peerAddress in version message");this._peerAddressVerified=!0}if(!r.netAddress){const e=this._addresses.get(r);e&&e.netAddress&&(r.netAddress=e.netAddress)}this._channel.peerAddress=r,this._peer=new gn(this._channel,e.version,e.headHash,r.timestamp-t,e.userAgent),this._peerChallengeNonce=e.challengeNonce,this._versionReceived=!0,this.fire("version",this._peer,this),this._channel.closed||(this._versionSent?(this._peerAddressVerified&&this._sendVerAck(),this._verackReceived&&this._finishHandshake()):this.handshake())}_sendVerAck(){F.that(this._peerAddressVerified);const e=z.concatTypedArrays(this._channel.peerAddress.peerId.serialize(),this._peerChallengeNonce),t=ye.create(this._networkConfig.keyPair.privateKey,this._networkConfig.keyPair.publicKey,e);this._channel.verack(this._networkConfig.keyPair.publicKey,t),this._verackSent=!0}_onVerAck(e){if(h.v($r,()=>`[VERACK] from ${this._channel.peerAddress}`),!this._canAcceptMessage(e))return;if(this._verackReceived)return void h.d($r,()=>`Ignoring duplicate verack message from ${this._channel.peerAddress}`);if(this._timers.clearTimeout("verack"),!e.publicKey.toPeerId().equals(this._channel.peerAddress.peerId))return void this._channel.close(Qr.INVALID_PUBLIC_KEY_IN_VERACK_MESSAGE,"Invalid public key in verack message");const t=z.concatTypedArrays(this._networkConfig.peerAddress.peerId.serialize(),this._challengeNonce);e.signature.verify(e.publicKey,t)?(this._peerAddressVerified||(this._peerAddressVerified=!0,this._sendVerAck()),this._verackReceived=!0,this._verackSent&&this._finishHandshake()):this._channel.close(Qr.INVALID_SIGNATURE_IN_VERACK_MESSAGE,"Invalid signature in verack message")}_finishHandshake(){this._timers.setInterval("connectivity",()=>this._checkConnectivity(),$r.CONNECTIVITY_CHECK_INTERVAL),this._timers.setInterval("announce-addr",()=>this._channel.addr([this._networkConfig.peerAddress]),$r.ANNOUNCE_ADDR_INTERVAL),this.fire("handshake",this._peer,this),this.requestAddresses()}requestAddresses(e=$r.NUM_ADDR_PER_REQUEST){h.d(fn,()=>`Requesting addresses from ${this._peer.peerAddress}`),this._addressRequest={maxResults:e};let t=this._networkConfig.services.accepted;this._peer.version<2&&(t&=w.ALL_LEGACY),this._channel.getAddr(this._networkConfig.protocolMask,t,e)}_onAddr(e){if(!this._canAcceptMessage(e))return;const t=1===e.addresses.length&&this._peer.peerAddress.equals(e.addresses[0]);if(!this._addressRequest&&!t)return;const{maxResults:r=$r.MAX_ADDR_PER_REQUEST}=this._addressRequest||{};if(t||(this._addressRequest=null),e.addresses.length>$r.MAX_ADDR_PER_MESSAGE)return h.w($r,"Rejecting addr message - too many addresses"),void this._channel.close(Qr.ADDR_MESSAGE_TOO_LARGE,"addr message too large");h.v($r,()=>`[ADDR] ${e.addresses.length} addresses from ${this._peer.peerAddress}`);const n=e.addresses.slice(0,r);for(const e of n){if(!e.verifySignature())return void this._channel.close(Qr.INVALID_ADDR,"invalid addr");if((e.protocol===Mt.WS||e.protocol===Mt.WSS)&&!e.globallyReachable())return void this._channel.close(Qr.ADDR_NOT_GLOBALLY_REACHABLE,"addr not globally reachable")}this._addresses.add(this._channel,n),t&&(this._peer.peerAddress=n[0]),this.fire("addr",n,this)}_onGetAddr(e){if(!this._canAcceptMessage(e))return;if(!this._getAddrLimit.note())return void h.w($r,"Rejecting getaddr message - rate limit exceeded");const t=Math.min(e.maxResults,$r.MAX_ADDR_PER_REQUEST),r=this._addresses.query(e.protocolMask,e.serviceMask,t);this._channel.addr(r)}_checkConnectivity(){const e=ee.randomUint32();if(!this._channel.ping(e))return void this._channel.close(Qr.SENDING_PING_MESSAGE_FAILED,"sending ping message failed");const t=Date.now();this._pingTimes.set(e,t),this._channel.lastMessageReceivedAt<t-$r.CONNECTIVITY_CHECK_INTERVAL&&this._timers.setTimeout(`ping_${e}`,()=>{this._timers.clearTimeout(`ping_${e}`),this._pingTimes.delete(e),this._channel.close(Qr.PING_TIMEOUT,"ping timeout")},$r.PING_TIMEOUT)}_onPing(e){this._canAcceptMessage(e)&&this._channel.pong(e.nonce)}_onPong(e){this._timers.clearTimeout(`ping_${e.nonce}`);const t=this._pingTimes.get(e.nonce);if(t){const r=Date.now()-t;r>0&&this.fire("ping-pong",r),this._pingTimes.delete(e.nonce)}}_onClose(){this._timers.clearAll()}_canAcceptMessage(e){return this._versionReceived||e.type===Ut.Type.VERSION?!(this._versionReceived&&!this._verackReceived&&e.type!==Ut.Type.VERACK)||(h.w($r,`Discarding '${Xr.Event[e.type]||e.type}' message from ${this._channel.peerAddress||this._channel.netAddress}`+" - no verack message received previously"),!1):(h.w($r,`Discarding '${Xr.Event[e.type]||e.type}' message from ${this._channel.peerAddress||this._channel.netAddress}`+" - no version message received previously"),!1)}get channel(){return this._channel}get peer(){return this._peer}}$r.HANDSHAKE_TIMEOUT=4e3,$r.PING_TIMEOUT=1e4,$r.CONNECTIVITY_CHECK_INTERVAL=6e4,$r.ANNOUNCE_ADDR_INTERVAL=6e5,$r.VERSION_ATTEMPTS_MAX=10,$r.VERSION_RETRY_DELAY=500,$r.GETADDR_RATE_LIMIT=3,$r.MAX_ADDR_PER_MESSAGE=1e3,$r.MAX_ADDR_PER_REQUEST=500,$r.NUM_ADDR_PER_REQUEST=200,c.register($r);class Zr{constructor(){this._latencies=[],this._messages=new T}reset(){this._latencies=[],this._messages=new T}addLatency(e){this._latencies.push(e)}addMessage(e){this._messages.put(e.type,this._messages.contains(e.type)?this._messages.get(e.type)+1:1)}getMessageCount(e){return this._messages.contains(e)?this._messages.get(e):0}get latencyMedian(){const e=this._latencies.length;if(0===e)return 0;return this._latencies.sort((e,t)=>e-t),e%2==0?Math.round((this._latencies[e/2-1]+this._latencies[e/2])/2):this._latencies[(e-1)/2]}}c.register(Zr);class Jr{static getOutbound(e){const t=new Jr;return t._peerAddress=e,t._state=en.CONNECTING,t}static getInbound(e){const t=new Jr;return t._networkConnection=e,t}constructor(){this._id=Jr._instanceCount++,this._peerAddress=null,this._networkConnection=null,this._peerChannel=null,this._networkAgent=null,this._peer=null,this._state=en.NEW,this._score=null,this._establishedSince=null,this._statistics=new Zr}get id(){return this._id}get state(){return this._state}get peerAddress(){return this._peerAddress}set peerAddress(e){this._peerAddress=e}get networkConnection(){return this._networkConnection}set networkConnection(e){this._networkConnection=e,this._state=en.CONNECTED}get peerChannel(){return this._peerChannel}set peerChannel(e){this._peerChannel=e}get networkAgent(){return this._networkAgent}set networkAgent(e){this._networkAgent=e}negotiating(){F.that(this._state===en.CONNECTED),this._state=en.NEGOTIATING}get peer(){return this._peer}set peer(e){this._peer=e,this._state=en.ESTABLISHED,this._establishedSince=Date.now(),this._networkAgent.on("ping-pong",e=>this._statistics.addLatency(e)),this._peerChannel.on("message-log",e=>this._statistics.addMessage(e))}get score(){return this._score}set score(e){this._score=e}get establishedSince(){return this._establishedSince}get ageEstablished(){return Date.now()-this.establishedSince}get statistics(){return this._statistics}close(){this._state=en.CLOSED,this._networkConnection=null,this._networkAgent=null,this._peerChannel=null,this._peer=null}}Jr._instanceCount=0,c.register(Jr);class en{}en.NEW=1,en.CONNECTING=2,en.CONNECTED=3,en.NEGOTIATING=4,en.ESTABLISHED=5,en.CLOSED=6,c.register(en);class tn{constructor(e,t,r){this._addresses=e,this._networkConfig=t,this._rtcConnector=r,this._forwards=new rn}onSignal(e,t){if(t.ttl>fn.SIGNAL_TTL_INITIAL)return void e.close(Qr.INVALID_SIGNAL_TTL,"invalid signal ttl");const r=this._networkConfig.peerId;if(t.senderId.equals(r))return void h.d(tn,()=>`Received signal from myself to ${t.recipientId} from ${e.peerAddress} (myId: ${r})`);if(t.isUnroutable()&&this._forwards.signalForwarded(t.recipientId,t.senderId,t.nonce)){const r=this._addresses.getByPeerId(t.senderId);this._addresses.unroutable(e,r)}if(t.recipientId.equals(r)){if(this._networkConfig.protocol!==Mt.RTC)return;if(t.hasPayload()&&!t.verifySignature())return void h.d(tn,()=>`Discarding signal from ${t.senderId} received via ${e.peerAddress} - invalid signature`);if(this._rtcConnector.isValidSignal(t)&&(t.isUnroutable()||t.isTtlExceeded())){const r=this._addresses.getByPeerId(t.senderId);this._addresses.unroutable(e,r)}return void this._rtcConnector.onSignal(e,t)}if(t.ttl<=0)return h.d(tn,()=>`Discarding signal from ${t.senderId} to ${t.recipientId} - TTL reached`),void(0===t.flags&&e.signal(t.recipientId,t.senderId,t.nonce,fn.SIGNAL_TTL_INITIAL,tr.Flag.TTL_EXCEEDED));const n=this._addresses.getChannelByPeerId(t.recipientId);n?n.peerAddress.equals(e.peerAddress)?(h.d(tn,()=>`Discarding signal from ${t.senderId} to ${t.recipientId} - shortest route via sending peer`),0===t.flags&&e.signal(t.recipientId,t.senderId,t.nonce,fn.SIGNAL_TTL_INITIAL,tr.Flag.UNROUTABLE)):(n.signal(t.senderId,t.recipientId,t.nonce,t.ttl-1,t.flags,t.payload,t.senderPubKey,t.signature),0===t.flags&&this._forwards.add(t.senderId,t.recipientId,t.nonce)):(h.d(tn,()=>`Failed to forward signal from ${t.senderId} to ${t.recipientId} - no route found`),0===t.flags&&e.signal(t.recipientId,t.senderId,t.nonce,fn.SIGNAL_TTL_INITIAL,tr.Flag.UNROUTABLE))}}c.register(tn);class rn{constructor(e=1e3){this._maxSize=e,this._queue=new M,this._store=new T}get length(){return this._queue.length}add(e,t,r){if(this.contains(e,t,r)){const n=new nn(e,t,r);return this._store.put(n,Date.now()),void this._queue.requeue(n)}if(this.length>=this._maxSize){const e=this._queue.dequeue();this._store.remove(e)}const n=new nn(e,t,r);this._queue.enqueue(n),this._store.put(n,Date.now())}contains(e,t,r){const n=new nn(e,t,r);return this._store.contains(n)}signalForwarded(e,t,r){const n=new nn(e,t,r),i=this._store.get(n);if(!i)return!1;const s=i+nn.SIGNAL_MAX_AGE>Date.now();if(!s){let e;do{e=this._queue.dequeue(),this._store.remove(e)}while(this._queue.length>0&&!n.equals(e))}return s}}rn.SIGNAL_MAX_AGE=10,c.register(rn);class nn{constructor(e,t,r){this._senderId=e,this._recipientId=t,this._nonce=r}equals(e){return e instanceof nn&&this._senderId.equals(e._senderId)&&this._recipientId.equals(e._recipientId)&&this._nonce===e._nonce}hashCode(){return this.toString()}toString(){return`ForwardedSignal{senderId=${this._senderId}, recipientId=${this._recipientId}, nonce=${this._nonce}}`}}c.register(nn);class sn extends l{constructor(e,t,r){super(),this._addresses=e,this._networkConfig=t,this._blockchain=r,this._connectionsByPeerAddress=new T,this._connectionsByNetAddress=new T,this._connectionsBySubnet=new T,this._bytesSent=0,this._bytesReceived=0,this._wssConnector=new Nr(Mt.WSS,"wss",this._networkConfig),this._wssConnector.on("connection",e=>this._onConnection(e)),this._wssConnector.on("error",(e,t)=>this._onConnectError(e,t)),this._wsConnector=new Nr(Mt.WS,"ws",this._networkConfig),this._wsConnector.on("connection",e=>this._onConnection(e)),this._wsConnector.on("error",(e,t)=>this._onConnectError(e,t)),this._rtcConnector=new Sr(this._networkConfig),this._rtcConnector.on("connection",e=>this._onConnection(e)),this._rtcConnector.on("error",(e,t)=>this._onConnectError(e,t)),this._peerCountWs=0,this._peerCountWss=0,this._peerCountRtc=0,this._peerCountDumb=0,this._peerCountFull=0,this._peerCountLight=0,this._peerCountNano=0,this._peerCountOutbound=0,this._peerCountFullWsOutbound=0,this._connectingCount=0,this._inboundCount=0,this._signalProcessor=new tn(e,t,this._rtcConnector),this._allowInboundExchange=!1,this._allowInboundConnections=!1,this._bannedIPv4IPs=new T,this._bannedIPv6IPs=new T,setInterval(()=>this._checkUnbanIps(),sn.UNBAN_IPS_INTERVAL)}values(){return Array.from(this._connectionsByPeerAddress.values())}valueIterator(){return this._connectionsByPeerAddress.valueIterator()}getConnectionByPeerAddress(e){return this._connectionsByPeerAddress.get(e)}getConnectionsByNetAddress(e){return this._connectionsByNetAddress.get(e)||[]}getConnectionsBySubnet(e){return this._connectionsBySubnet.get(this._getSubnetAddress(e))||[]}getOutboundConnectionsBySubnet(e){return(this._connectionsBySubnet.get(this._getSubnetAddress(e))||[]).filter(e=>e.networkConnection.outbound)}_getSubnetAddress(e){return e.subnet(e.isIPv4()?fn.IPV4_SUBNET_MASK:fn.IPV6_SUBNET_MASK)}_add(e){e.peerAddress&&this._connectionsByPeerAddress.put(e.peerAddress,e)}_remove(e){e.peerAddress&&this._connectionsByPeerAddress.remove(e.peerAddress),e.networkConnection&&e.networkConnection.netAddress&&this._removeNetAddress(e,e.networkConnection.netAddress)}_addNetAddress(e,t){if(t.isPseudo()||!t.reliable)return;this._connectionsByNetAddress.contains(t)?this._connectionsByNetAddress.get(t).push(e):this._connectionsByNetAddress.put(t,[e]);const r=this._getSubnetAddress(t);this._connectionsBySubnet.contains(r)?this._connectionsBySubnet.get(r).push(e):this._connectionsBySubnet.put(r,[e])}_removeNetAddress(e,t){if(t.isPseudo()||!t.reliable)return;if(this._connectionsByNetAddress.contains(t)){const r=this._connectionsByNetAddress.get(t),n=r.indexOf(e);n>=0&&r.splice(n,1),0===r.length&&this._connectionsByNetAddress.remove(t)}const r=this._getSubnetAddress(t);if(this._connectionsBySubnet.contains(r)){const t=this._connectionsBySubnet.get(r),n=t.indexOf(e);n>=0&&t.splice(n,1),0===t.length&&this._connectionsBySubnet.remove(r)}}_checkOutboundConnectionRequest(e){if(null===e)return!1;if(e.protocol!==Mt.WS&&e.protocol!==Mt.WSS&&e.protocol!==Mt.RTC)return h.e(sn,`Cannot connect to ${e} - unsupported protocol`),!1;if(this._addresses.isBanned(e))return h.e(sn,`Connecting to banned address ${e}`),!1;if(this.getConnectionByPeerAddress(e))return h.e(sn,`Duplicate connection to ${e}`),!1;if(e.netAddress&&e.netAddress.reliable){if(this.getConnectionsByNetAddress(e.netAddress).length>=fn.PEER_COUNT_PER_IP_MAX)return h.e(sn,`connection limit per ip (${fn.PEER_COUNT_PER_IP_MAX}) reached`),!1;if(this.getOutboundConnectionsBySubnet(e.netAddress).length>=fn.OUTBOUND_PEER_COUNT_PER_SUBNET_MAX)return h.e(sn,`connection limit per ip (${fn.OUTBOUND_PEER_COUNT_PER_SUBNET_MAX}) reached`),!1}return!0}connectOutbound(e){if(!this._checkOutboundConnectionRequest(e))return!1;const t=Jr.getOutbound(e);this._add(t);let r=!1;if(e.protocol===Mt.WSS)r=this._wssConnector.connect(e);else if(e.protocol===Mt.WS)r=this._wsConnector.connect(e);else{const t=this._addresses.getChannelByPeerId(e.peerId);r=this._rtcConnector.connect(e,t)}return r?(this._connectingCount++,!0):(this._remove(t),h.d(fn,()=>`Outbound attempt not connecting: ${e}`),!1)}_checkConnection(e){const t=e.networkConnection;if(t.inbound&&!this._allowInboundConnections&&t.protocol!==Mt.RTC)return t.close(Qr.INBOUND_CONNECTIONS_BLOCKED,"inbound connections are blocked temporarily"),!1;if(t.netAddress&&!t.netAddress.isPseudo()&&t.netAddress.reliable){if(this._isIpBanned(t.netAddress))return t.close(Qr.IP_BANNED,`connection with banned IP ${t.netAddress}`),!1;if(!t.netAddress.isPrivate()&&this.getConnectionsByNetAddress(t.netAddress).length>=fn.PEER_COUNT_PER_IP_MAX)return t.close(Qr.CONNECTION_LIMIT_PER_IP,`connection limit per IP (${fn.PEER_COUNT_PER_IP_MAX}) reached`),!1;if(!t.netAddress.isPrivate()&&this.getConnectionsBySubnet(t.netAddress).length>=fn.INBOUND_PEER_COUNT_PER_SUBNET_MAX)return t.close(Qr.CONNECTION_LIMIT_PER_IP,`connection limit per subnet (${fn.INBOUND_PEER_COUNT_PER_SUBNET_MAX}) reached`),!1}return!(this.peerCount>=fn.PEER_COUNT_MAX&&!t.outbound&&(!t.inbound||!this._allowInboundExchange))||(t.close(Qr.MAX_PEER_COUNT_REACHED,`max peer count reached (${fn.PEER_COUNT_MAX})`),!1)}_onConnection(e){let t;if(e.outbound){if(!(t=this.getConnectionByPeerAddress(e.peerAddress)))return void e.close(Qr.INVALID_CONNECTION_STATE,`No PeerConnection present for outgoing connection (${e.peerAddress})`);if(t.state!==en.CONNECTING)return void e.close(Qr.INVALID_CONNECTION_STATE,`PeerConnection state not CONNECTING, but ${t.state} (${e.peerAddress})`);this._connectingCount--,F.that(this._connectingCount>=0,"connectingCount < 0")}else t=Jr.getInbound(e),this._inboundCount++;if(t.networkConnection=e,e.on("close",(e,r)=>this._onClose(t,e,r)),!this._checkConnection(t))return;e.netAddress&&!e.netAddress.isPseudo()&&this._addNetAddress(t,e.netAddress);const r=e.inbound?"inbound":"outbound";h.d(sn,()=>`Connection established (${r}) #${e.id} ${e.netAddress||e.peerAddress||"<pending>"}`),this.fire("connection",e);const n=new Xr(e);t.peerChannel=n;const i=new $r(this._blockchain,this._addresses,this._networkConfig,n);i.on("version",e=>this._checkHandshake(t,e)),i.on("handshake",e=>this._onHandshake(t,e)),t.networkAgent=i,i.handshake()}_checkHandshake(e,t){if(this._addresses.isBanned(t.peerAddress))return e.peerChannel.close(Qr.PEER_BANNED,`connection with banned address ${t.peerAddress} (post version)`),!1;const r=this.getConnectionByPeerAddress(t.peerAddress);return r&&r.id!==e.id&&r.state===en.ESTABLISHED?(e.peerChannel.close(Qr.DUPLICATE_CONNECTION,"duplicate connection (post version)"),!1):t.peerAddress.protocol===Mt.DUMB&&this.peerCountDumb>=fn.PEER_COUNT_DUMB_MAX?(e.peerChannel.close(Qr.CONNECTION_LIMIT_DUMB,`connection limit for dumb peers (${fn.PEER_COUNT_DUMB_MAX}) reached`),!1):(e.negotiating(),!0)}_onHandshake(e,t){if(e.networkConnection.inbound){if(this.peerCount>=fn.PEER_COUNT_MAX&&!this._allowInboundExchange)return void e.peerChannel.close(Qr.MAX_PEER_COUNT_REACHED,`max peer count reached (${fn.PEER_COUNT_MAX})`);const r=this.getConnectionByPeerAddress(t.peerAddress);if(r&&r.id!==e.id)switch(r.state){case en.CONNECTING:F.that(t.peerAddress.protocol===Mt.WSS||t.peerAddress.protocol===Mt.WS,"Duplicate connection to non-WS node"),h.d(sn,()=>`Aborting connection attempt to ${t.peerAddress}, simultaneous inbound connection succeeded`),t.peerAddress.protocol===Mt.WSS?this._wssConnector.abort(t.peerAddress):this._wsConnector.abort(t.peerAddress),F.that(!this.getConnectionByPeerAddress(t.peerAddress),"PeerConnection not removed");break;case en.ESTABLISHED:return void e.peerChannel.close(Qr.DUPLICATE_CONNECTION,"duplicate connection (post handshake)");case en.NEGOTIATING:if(!(this._networkConfig.peerAddress.peerId.compare(t.peerAddress.peerId)<0))return void e.peerChannel.close(Qr.SIMULTANEOUS_CONNECTION,"simultaneous connection (post handshake) - higher peerId");r.peerChannel.close(Qr.SIMULTANEOUS_CONNECTION,"simultaneous connection (post handshake) - lower peerId"),F.that(!this.getConnectionByPeerAddress(t.peerAddress),"PeerConnection not removed");break;default:r.peerChannel.close(Qr.SIMULTANEOUS_CONNECTION,`simultaneous connection (post handshake) - state ${r.state}`),F.that(!this.getConnectionByPeerAddress(t.peerAddress),"PeerConnection not removed")}F.that(!this.getConnectionByPeerAddress(t.peerAddress),`PeerConnection ${t.peerAddress} already exists`),e.peerAddress=t.peerAddress,this._add(e),this._inboundCount--,F.that(this._inboundCount>=0,"inboundCount < 0")}this.peerCount>=fn.PEER_COUNT_MAX&&this.fire("recycling-request"),e.peer=t,t.netAddress&&!t.netAddress.isPseudo()&&this.getConnectionsByNetAddress(t.netAddress).indexOf(e)<0&&this._addNetAddress(e,t.netAddress),this._updateConnectedPeerCount(e,1),fn.SIGNALING_ENABLED&&e.peerChannel.on("signal",t=>this._signalProcessor.onSignal(e.peerChannel,t)),this._addresses.established(t.channel,t.peerAddress),h.d(sn,()=>`[PEER-JOINED] ${t.peerAddress} ${t.netAddress} (version=${t.version}, services=${t.peerAddress.services}, userAgent=${t.userAgent||"<unknown>"}, headHash=${t.headHash.toBase64()})`),this.fire("peer-joined",t),this.fire("peers-changed")}_onClose(e,t,r){if(this._bytesSent+=e.networkConnection.bytesSent,this._bytesReceived+=e.networkConnection.bytesReceived,e.peerAddress&&this._addresses.close(e.peerChannel,e.peerAddress,t),this._remove(e),e.state===en.ESTABLISHED){Qr.isBanningType(t)&&e.peer.netAddress&&this._banIp(e.peer.netAddress),this._updateConnectedPeerCount(e,-1);const n=((e.networkConnection.bytesSent+e.networkConnection.bytesReceived)/1e3).toFixed(2);h.d(sn,()=>`[PEER-LEFT] ${e.peerAddress} ${e.peer.netAddress} `+`(transferred=${n} kB, closeType=${t} ${r})`),this.fire("peer-left",e.peer),this.fire("peers-changed")}else e.networkConnection.inbound?(this._inboundCount--,h.d(sn,()=>`Inbound connection #${e.networkConnection.id} closed pre-handshake: ${r} (${t})`)):(h.d(sn,()=>`Connection #${e.networkConnection.id} to ${e.peerAddress} closed pre-handshake: ${r} (${t})`),this.fire("connect-error",e.peerAddress,`${r} (${t})`));this.fire("close",e,t,r),e.close()}_banIp(e){!e.isPseudo()&&e.reliable&&(h.w(sn,`Banning IP ${e}`),e.isIPv4()?this._bannedIPv4IPs.put(e,Date.now()+sn.DEFAULT_BAN_TIME):e.isIPv6()&&this._bannedIPv6IPs.put(e.ip.subarray(0,8),Date.now()+sn.DEFAULT_BAN_TIME))}_isIpBanned(e){if(e.isPseudo())return!1;if(e.isIPv4())return this._bannedIPv4IPs.contains(e);if(e.isIPv6()){const t=e.ip.subarray(0,8);return this._bannedIPv6IPs.contains(t)}return!1}_checkUnbanIps(){const e=Date.now();for(const t of this._bannedIPv4IPs.keys())this._bannedIPv4IPs.get(t)<e&&this._bannedIPv4IPs.remove(t);for(const t of this._bannedIPv6IPs.keys())this._bannedIPv6IPs.get(t)<e&&this._bannedIPv6IPs.remove(t)}_onConnectError(e,t){h.d(sn,()=>`Connection to ${e} failed`+("string"==typeof t?` - ${t}`:""));const r=this.getConnectionByPeerAddress(e);F.that(!!r,`PeerAddress not stored ${e}`),r.state===en.CONNECTING?(this._remove(r),this._connectingCount--,F.that(this._connectingCount>=0,"connectingCount < 0"),this._addresses.close(null,e,Qr.CONNECTION_FAILED),this.fire("connect-error",e,t)):h.e(sn,`PeerConnection state not CONNECTING, but ${r.state} (${e})`)}_updateConnectedPeerCount(e,t){const r=e.peerAddress;switch(r.protocol){case Mt.WS:this._peerCountWs+=t,F.that(this._peerCountWs>=0,"peerCountWs < 0");break;case Mt.WSS:this._peerCountWss+=t,F.that(this._peerCountWss>=0,"peerCountWs < 0");break;case Mt.RTC:this._peerCountRtc+=t,F.that(this._peerCountRtc>=0,"peerCountRtc < 0");break;case Mt.DUMB:this._peerCountDumb+=t,F.that(this._peerCountDumb>=0,"peerCountDumb < 0");break;default:h.w(Gr,`Unknown protocol ${r.protocol}`)}w.isFullNode(r.services)?(this._peerCountFull+=t,F.that(this._peerCountFull>=0,"peerCountFull < 0")):w.isLightNode(r.services)?(this._peerCountLight+=t,F.that(this._peerCountLight>=0,"peerCountLight < 0")):(this._peerCountNano+=t,F.that(this._peerCountNano>=0,"peerCountNano < 0")),e.networkConnection.outbound&&(this._peerCountOutbound+=t,!w.isFullNode(r.services)||r.protocol!==Mt.WSS&&r.protocol!==Mt.WS||(this._peerCountFullWsOutbound+=t))}disconnect(e){for(const t of this.valueIterator())t.peerChannel&&t.peerChannel.close(Qr.MANUAL_NETWORK_DISCONNECT,e||"manual network disconnect")}disconnectWebSocket(){for(const e of this.valueIterator())e.peerChannel&&e.peerAddress&&(e.peerAddress.protocol===Mt.WSS||e.peerAddress.protocol===Mt.WS)&&e.peerChannel.close(Qr.MANUAL_WEBSOCKET_DISCONNECT,"manual websocket disconnect")}get peerCountWs(){return this._peerCountWs}get peerCountWss(){return this._peerCountWss}get peerCountRtc(){return this._peerCountRtc}get peerCountDumb(){return this._peerCountDumb}get peerCount(){return this._peerCountWs+this._peerCountWss+this._peerCountRtc+this._peerCountDumb}get peerCountFull(){return this._peerCountFull}get peerCountLight(){return this._peerCountLight}get peerCountNano(){return this._peerCountNano}get peerCountOutbound(){return this._peerCountOutbound}get peerCountFullWsOutbound(){return this._peerCountFullWsOutbound}get connectingCount(){return this._connectingCount}get count(){return this._connectionsByPeerAddress.length+this._inboundCount}get bytesSent(){let e=this._bytesSent;for(const t of this.valueIterator())t.networkConnection&&(e+=t.networkConnection.bytesSent);return e}get bytesReceived(){let e=this._bytesReceived;for(const t of this.valueIterator())t.networkConnection&&(e+=t.networkConnection.bytesReceived);return e}set allowInboundExchange(e){this._allowInboundExchange=e}get allowInboundConnections(){return this._allowInboundConnections}set allowInboundConnections(e){this._allowInboundConnections=e}}sn.DEFAULT_BAN_TIME=6e5,sn.UNBAN_IPS_INTERVAL=6e4,c.register(sn);class on{constructor(e,t,r){this._networkConfig=e,this._addresses=t,this._connections=r,this._connectionScores=null}pickAddress(){let e,t;switch(this._networkConfig.protocolMask){case Mt.WSS:e=this._addresses.wssIterator(),t=this._addresses.knownWssAddressesCount;break;case Mt.WS:e=this._addresses.wsIterator(),t=this._addresses.knownWsAddressesCount;break;case Mt.WS|Mt.WSS:e=k.alternate(this._addresses.wsIterator(),this._addresses.wssIterator()),t=this._addresses.knownWsAddressesCount+this._addresses.knownWssAddressesCount;break;case Mt.RTC:e=this._addresses.rtcIterator(),t=this._addresses.knownRtcAddressesCount;break;case Mt.RTC|Mt.WS:e=k.alternate(this._addresses.rtcIterator(),this._addresses.wsIterator()),t=this._addresses.knownRtcAddressesCount+this._addresses.knownWsAddressesCount;break;case Mt.RTC|Mt.WSS:e=k.alternate(this._addresses.rtcIterator(),this._addresses.wssIterator()),t=this._addresses.knownRtcAddressesCount+this._addresses.knownWssAddressesCount;break;default:e=this._addresses.iterator(),t=this._addresses.knownAddressesCount}const r=(e,t,r,n=!1)=>{let i=0,s=t;t>r&&(s=((i=Math.floor(Math.random()*t))+r)%t);const o=i>s,a=[];let c=-1;for(const t of e){if(c++,!o&&c<i)continue;if(!o&&c>=s)break;if(o&&c>=s&&c<i)continue;const e=this._scoreAddress(t,n);if(e>=0&&(a.push({score:e,addressState:t}),a.length>=r))break}return a};let n=r(e,t,1e3);if(0===n.length&&this.needsGoodPeers()){switch(this._networkConfig.protocolMask){case Mt.WSS:e=this._addresses.wssIterator();break;case Mt.WS:e=this._addresses.wsIterator();break;case Mt.WS|Mt.WSS:e=k.alternate(this._addresses.wsIterator(),this._addresses.wssIterator());break;case Mt.RTC:e=this._addresses.rtcIterator();break;case Mt.RTC|Mt.WS:e=k.alternate(this._addresses.rtcIterator(),this._addresses.wsIterator());break;case Mt.RTC|Mt.WSS:e=k.alternate(this._addresses.rtcIterator(),this._addresses.wssIterator());break;default:e=this._addresses.iterator()}n=r(e,t,1e3,!0)}if(0===n.length)return null;const i=n.sort((e,t)=>t.score-e.score).slice(0,on.PICK_SELECTION_SIZE);return I.randomElement(i).addressState.peerAddress}_scoreAddress(e,t=!1){const r=e.peerAddress;if(!this._networkConfig.canConnect(r.protocol))return-1;if(!w.providesServices(r.services,this._networkConfig.services.accepted))return-1;if(r.exceedsAge())return-1;if(this._connections.getConnectionByPeerAddress(r))return-1;if(this.needsGoodPeers()&&!this.isGoodPeer(r)&&!t)return-1;switch(e.state){case Fr.BANNED:return-1;case Fr.NEW:case Fr.TRIED:return 1;case Fr.FAILED:return 1*(1-(e.failedAttempts+1)/e.maxFailedAttempts);default:return-1}}isGoodPeerSet(){return!this.needsGoodPeers()&&!this.needsMorePeers()}needsGoodPeers(){return this._connections.peerCountFullWsOutbound<on.PEER_COUNT_MIN_FULL_WS_OUTBOUND}needsMorePeers(){return this._connections.peerCountOutbound<on.PEER_COUNT_MIN_OUTBOUND}isGoodPeer(e){return w.isFullNode(e.services)&&(e.protocol===Mt.WS||e.protocol===Mt.WSS)}scoreConnections(){const e=[];for(const t of this._connections.valueIterator())t.state===en.ESTABLISHED&&(t.ageEstablished>on._getMinAge(t.peerAddress)&&(t.score=this._scoreConnection(t),e.push(t)),t.statistics.reset());this._connectionScores=e.sort((e,t)=>t.score-e.score)}recycleConnections(e,t,r){if(this._connectionScores)for(;e>0&&this._connectionScores.length>0;){const n=this._connectionScores.pop();n.state===en.ESTABLISHED&&(n.peerChannel.close(t,`${r}`),e--)}}_scoreConnection(e){const t=this._scoreConnectionAge(e),r=e.networkConnection.inbound?0:1,n=e.peerAddress,i=w.isFullNode(n.services)?1:w.isLightNode(n.services)?.5:0;let s;switch(n.protocol){case Mt.WS:case Mt.WSS:s=.6;break;case Mt.RTC:s=.3;break;case Mt.DUMB:default:s=0}n.protocol!==Mt.WS&&n.protocol!==Mt.WSS||((this._connections.peerCountWs+this._connections.peerCountWss)/this._connections.peerCount<on.BEST_PROTOCOL_WS_DISTRIBUTION||this._connections.peerCountFullWsOutbound<=on.PEER_COUNT_MIN_FULL_WS_OUTBOUND)&&(s=1);const o=e.statistics.latencyMedian;let a=0;return o>0&&o<$r.PING_TIMEOUT&&(a=1-o/$r.PING_TIMEOUT),.15*t+.25*r+.2*i+.2*s+.2*a}_scoreConnectionAge(e){const t=(e,t,r)=>Math.max(Math.min(1-(e-t)/r,1),0),r=e.ageEstablished,n=e.peerAddress.services;return w.isFullNode(n)?r/(2*on.BEST_AGE_FULL)+.5:w.isLightNode(n)?t(r,on.BEST_AGE_LIGHT,on.MAX_AGE_LIGHT):t(r,on.BEST_AGE_NANO,on.MAX_AGE_NANO)}static _getMinAge(e){return w.isFullNode(e.services)?on.MIN_AGE_FULL:w.isLightNode(e.services)?on.MIN_AGE_LIGHT:on.MIN_AGE_NANO}get lowestConnectionScore(){if(!this._connectionScores)return null;for(;this._connectionScores.length>0&&this._connectionScores[this._connectionScores.length-1].state!==en.ESTABLISHED;)this._connectionScores.pop();return this._connectionScores.length>0?this._connectionScores[this._connectionScores.length-1].score:null}get connectionScores(){return this._connectionScores}}on.PEER_COUNT_MIN_FULL_WS_OUTBOUND=m.isNodeJs()?12:3,on.PEER_COUNT_MIN_OUTBOUND=m.isNodeJs()?12:6,on.PICK_SELECTION_SIZE=100,on.MIN_AGE_FULL=3e5,on.BEST_AGE_FULL=864e5,on.MIN_AGE_LIGHT=12e4,on.BEST_AGE_LIGHT=9e5,on.MAX_AGE_LIGHT=216e5,on.MIN_AGE_NANO=6e4,on.BEST_AGE_NANO=3e5,on.MAX_AGE_NANO=18e5,on.BEST_PROTOCOL_WS_DISTRIBUTION=.15,c.register(on);class an{static getDefault(){return m.supportsWebRTC()?new hn:new ln}constructor(e){this._protocolMask=e,this._keyPair=null,this._peerId=null,this._services=null,this._appAgent=null}async initPersistent(){const e=await pn.getPersistent();await this._init(e)}async initVolatile(){const e=pn.createVolatile();await this._init(e)}async _init(e){if(this._keyPair)return;let t=await e.get("keys");t||(t=de.generate(),await e.put("keys",t)),this._keyPair=t,this._peerId=t.publicKey.toPeerId()}get protocol(){throw new Error("Unimplemented")}get protocolMask(){return this._protocolMask}get keyPair(){return this._keyPair}get publicKey(){return this._keyPair.publicKey}get peerId(){return this._peerId}get services(){return this._services}set services(e){this._services=e}get peerAddress(){throw new Error("Not implemented")}canConnect(e){return 0!=(e&this._protocolMask)}get appAgent(){return this._appAgent}set appAgent(e){this._appAgent=e}}c.register(an);class cn extends an{constructor(e,t,r){super(Mt.WS|Mt.WSS),this._host=e,this._port=t,this._reverseProxy=r}get protocol(){return Mt.WS}get port(){return this._port}get reverseProxy(){return this._reverseProxy}get peerAddress(){if(!this._services||!this._keyPair)throw new Error("PeerAddress is not configured.");const e=this._reverseProxy.enabled?this._reverseProxy.port:this._port,t=new Mr(this._services.provided,Date.now(),Or.UNSPECIFIED,this.publicKey,0,this._host,e);if(!t.globallyReachable())throw new Error("PeerAddress not globally reachable.");return t.signature=ye.create(this._keyPair.privateKey,this.publicKey,t.serializeContent()),t}get secure(){return!1}}c.register(cn);class un extends cn{constructor(e,t,r,n,i){super(e,t,i),this._key=r,this._cert=n,this._ssl={key:this._key,cert:this._cert}}get protocol(){return Mt.WSS}get ssl(){return this._ssl}get peerAddress(){if(!this._services||!this._keyPair)throw new Error("PeerAddress is not configured.");const e=this._reverseProxy.enabled?this._reverseProxy.port:this._port,t=new Dr(this._services.provided,Date.now(),Or.UNSPECIFIED,this.publicKey,0,this._host,e);if(!t.globallyReachable())throw new Error("PeerAddress not globally reachable.");return t.signature=ye.create(this._keyPair.privateKey,this.publicKey,t.serializeContent()),t}get secure(){return!0}}c.register(un);class hn extends an{constructor(){super((m.supportsWS()?Mt.WS|Mt.WSS:Mt.WSS)|Mt.RTC),this._rtcConfig={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.nimiq-network.com:19302"}]}}get protocol(){return Mt.RTC}get rtcConfig(){return this._rtcConfig}get peerAddress(){if(!this._services||!this._keyPair)throw new Error("PeerAddress is not configured.");const e=new Ur(this._services.provided,Date.now(),Or.UNSPECIFIED,this.publicKey,0);return e.signature=ye.create(this._keyPair.privateKey,this.publicKey,e.serializeContent()),e}}c.register(hn);class ln extends an{constructor(){super(m.supportsWS()?Mt.WS|Mt.WSS:Mt.WSS)}get protocol(){return Mt.DUMB}get peerAddress(){if(!this._services||!this._keyPair)throw new Error("PeerAddress is not configured.");const e=new Kr(this._services.provided,Date.now(),Or.UNSPECIFIED,this.publicKey,0);return e.signature=ye.create(this._keyPair.privateKey,this.publicKey,e.serializeContent()),e}}c.register(ln);class fn extends l{constructor(e,t,r){super(),this._blockchain=e,this._networkConfig=t,this._time=r,this._autoConnect=!1,this._backoff=fn.CONNECT_BACKOFF_INITIAL,this._backedOff=!1,this._addresses=new Gr(this._networkConfig),this._addresses.on("seeded",()=>this._checkPeerCount()),this._addresses.on("added",()=>setTimeout(this._checkPeerCount.bind(this),fn.CONNECT_THROTTLE)),this._connections=new sn(this._addresses,t,e),this._connections.on("peer-joined",e=>this._onPeerJoined(e)),this._connections.on("peer-left",e=>this._onPeerLeft(e)),this._connections.on("peers-changed",()=>this._onPeersChanged()),this._connections.on("recycling-request",()=>this._onRecyclingRequest()),this._connections.on("connect-error",()=>setTimeout(this._checkPeerCount.bind(this),fn.CONNECT_THROTTLE)),this._scorer=new on(this._networkConfig,this._addresses,this._connections),this._houseKeepingIntervalId=null,this._timers=new v}connect(){this._autoConnect=!0,this._houseKeepingIntervalId=setInterval(()=>this._housekeeping(),fn.HOUSEKEEPING_INTERVAL),this._checkPeerCount()}disconnect(e){this._autoConnect=!1,clearInterval(this._houseKeepingIntervalId),this._connections.disconnect(e),this._connections.allowInboundConnections=!1}disconnectWebSocket(){this._autoConnect=!1,this._connections.disconnectWebSocket()}_onPeerJoined(e){this._updateTimeOffset(),this.fire("peer-joined",e)}_onPeerLeft(e){this._updateTimeOffset(),this.fire("peer-left",e)}_onPeersChanged(){setTimeout(this._checkPeerCount.bind(this),fn.CONNECT_THROTTLE),this.fire("peers-changed")}_onRecyclingRequest(){this._scorer.recycleConnections(1,Qr.PEER_CONNECTION_RECYCLED_INBOUND_EXCHANGE,"Peer connection recycled inbound exchange"),this._connections.allowInboundExchange=null!==this._scorer.lowestConnectionScore&&this._scorer.lowestConnectionScore<fn.SCORE_INBOUND_EXCHANGE}_checkPeerCount(){if(this._autoConnect&&this._addresses.seeded&&!this._scorer.isGoodPeerSet()&&this._connections.connectingCount<fn.CONNECTING_COUNT_MAX){const e=this._scorer.pickAddress(),t=this._scorer.needsGoodPeers()&&!this._scorer.needsMorePeers();if(!e||t&&!this._scorer.isGoodPeer(e)){if(!this._backedOff){this._backedOff=!0;const e=this._backoff;this._backoff=Math.min(fn.CONNECT_BACKOFF_MAX,2*e),setTimeout(()=>{this._backedOff=!1,this._checkPeerCount()},e),0===this._connections.count&&(this.fire("disconnected"),this._connections.allowInboundConnections=!0)}return}this._connections.connectOutbound(e)||(this._addresses.close(null,e,Qr.CONNECTION_FAILED),setTimeout(()=>this._checkPeerCount(),fn.CONNECT_THROTTLE))}this._backoff=fn.CONNECT_BACKOFF_INITIAL}_updateTimeOffset(){const e=this._connections.values(),t=[0];e.forEach(e=>{e.state===en.ESTABLISHED&&t.push(e.networkAgent.peer.timeOffset)});const r=t.length;let n;t.sort((e,t)=>e-t),n=r%2==0?Math.round((t[r/2-1]+t[r/2])/2):t[(r-1)/2],this._time.offset=Math.max(Math.min(n,fn.TIME_OFFSET_MAX),-fn.TIME_OFFSET_MAX)}_housekeeping(){if(this._scorer.scoreConnections(),this.peerCount>fn.PEER_COUNT_RECYCLING_ACTIVE){const e=(this.peerCount-fn.PEER_COUNT_RECYCLING_ACTIVE)*(fn.RECYCLING_PERCENTAGE_MAX-fn.RECYCLING_PERCENTAGE_MIN)/(fn.PEER_COUNT_MAX-fn.PEER_COUNT_RECYCLING_ACTIVE)+fn.RECYCLING_PERCENTAGE_MIN,t=Math.ceil(this.peerCount*e);this._scorer.recycleConnections(t,Qr.PEER_CONNECTION_RECYCLED,"Peer connection recycled")}this._connections.allowInboundExchange=null!==this._scorer.lowestConnectionScore&&this._scorer.lowestConnectionScore<fn.SCORE_INBOUND_EXCHANGE,this._refreshAddresses()}_refreshAddresses(){if(this._scorer.connectionScores&&this._scorer.connectionScores.length>0){const e=Math.min(2*(this._connections.peerCountWs+this._connections.peerCountWss),fn.ADDRESS_REQUEST_CUTOFF),t=Math.min(this._scorer.connectionScores.length,e);for(let e=0;e<Math.min(fn.ADDRESS_REQUEST_PEERS,this._scorer.connectionScores.length);e++){const e=Math.floor(Math.random()*t),r=this._scorer.connectionScores[e];h.v(fn,()=>`Requesting addresses from ${r.peerAddress} (score idx ${e})`),r.networkAgent.requestAddresses()}}else{const e=Math.floor(Math.random()*Math.min(this._connections.count,10));let t,r=0;for(const n of this._connections.valueIterator()){if(n.state===en.ESTABLISHED&&(t=n),r>=e&&t)break;r++}t&&(h.v(fn,()=>`Requesting addresses from ${t.peerAddress} (rand idx ${e})`),t.networkAgent.requestAddresses())}}get time(){return this._time}get peerCount(){return this._connections.peerCount}get peerCountWebSocket(){return this._connections.peerCountWs}get peerCountWebSocketSecure(){return this._connections.peerCountWss}get peerCountWebRtc(){return this._connections.peerCountRtc}get peerCountDumb(){return this._connections.peerCountDumb}get peerCountConnecting(){return this._connections.connectingCount}get knownAddressesCount(){return this._addresses.knownAddressesCount}get bytesSent(){return this._connections.bytesSent}get bytesReceived(){return this._connections.bytesReceived}get allowInboundConnections(){return this._connections.allowInboundConnections}set allowInboundConnections(e){this._connections.allowInboundConnections=e}get addresses(){return this._addresses}get connections(){return this._connections}get config(){return this._networkConfig}}fn.PEER_COUNT_MAX=m.isBrowser()?12:4e3,fn.INBOUND_PEER_COUNT_PER_SUBNET_MAX=m.isBrowser()?2:100,fn.OUTBOUND_PEER_COUNT_PER_SUBNET_MAX=2,fn.PEER_COUNT_PER_IP_MAX=m.isBrowser()?1:10,fn.PEER_COUNT_DUMB_MAX=1e3,fn.IPV4_SUBNET_MASK=24,fn.IPV6_SUBNET_MASK=96,fn.PEER_COUNT_RECYCLING_ACTIVE=m.isBrowser()?5:1e3,fn.RECYCLING_PERCENTAGE_MIN=.01,fn.RECYCLING_PERCENTAGE_MAX=.2,fn.CONNECTING_COUNT_MAX=2,fn.SIGNAL_TTL_INITIAL=3,fn.CONNECT_BACKOFF_INITIAL=2e3,fn.CONNECT_BACKOFF_MAX=6e5,fn.TIME_OFFSET_MAX=6e5,fn.HOUSEKEEPING_INTERVAL=3e5,fn.SCORE_INBOUND_EXCHANGE=.5,fn.CONNECT_THROTTLE=500,fn.ADDRESS_REQUEST_CUTOFF=250,fn.ADDRESS_REQUEST_PEERS=2,fn.SIGNALING_ENABLED=1,c.register(fn);class dn{static isPrivateIP(e){if(e instanceof Uint8Array||(e=dn.ipToBytes(e)),dn.isLocalIP(e))return!0;if(dn.isIPv4Address(e)){for(const t of dn.IPv4_PRIVATE_NETWORK)if(dn.isIPv4inSubnet(e,t))return!0;return!1}if(dn.isIPv6Address(e))return 252==(254&e[0])||254===e[0]&&128==(192&e[1]);throw new Error(`Malformed IP address ${e}`)}static isLocalIP(e){if(e instanceof Uint8Array||(e=dn.ipToBytes(e)),e.length===dn.IPv4_LENGTH)return 127===e[0]&&0===e[1]&&0===e[2]&&1===e[3];if(e.length===dn.IPv6_LENGTH){for(let t=0;t<dn.IPv6_LENGTH-1;t++)if(0!==e[t])return!1;return 1===e[dn.IPv6_LENGTH-1]}return!1}static isIPv4inSubnet(e,t){e instanceof Uint8Array||(e=dn.ipToBytes(e));let[r,n]=t.split("/");return n=-1<<32-parseInt(n),(dn._IPv4toLong(e)&n)===dn._IPv4toLong(r)}static isIPv4Address(e){if(e instanceof Uint8Array)return e.length===dn.IPv4_LENGTH;const t=e.match(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/);return!!t&&parseInt(t[1])<=255&&parseInt(t[2])<=255&&parseInt(t[3])<=255&&parseInt(t[4])<=255}static isIPv6Address(e){if(e instanceof Uint8Array)return e.length===dn.IPv6_LENGTH;const t=e.toLowerCase().split(":");if(t.length>8||t.length<3)return!1;const r=dn.isIPv4Address(t[t.length-1]);let n=!1;for(let e=0;e<t.length;++e){if(!(/^[a-f0-9]{0,4}$/.test(t[e])||e===t.length-1&&r&&t.length<8))return!1;if(0===t[e].length&&e>0&&e<t.length-1){if(n)return!1;n=!0}}if(r)for(let e=0;e<t.length-2;++e)if(!/^0{0,4}$/.test(t[e]))return!1;return 0===t[0].length?0===t[1].length:0===t[t.length-1].length?0===t[t.length-2].length:r&&t.length<7?n:!(t.length<8)||n}static hostGloballyReachable(e){return!dn.isIPv4Address(e)&&!dn.isIPv6Address(e)&&!!e.match(/.+\..+$/)}static _IPv4toLong(e){return e instanceof Uint8Array||(e=dn.ipToBytes(e)),(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3]}static _IPv4toIPv6(e){let t=e.split(".");t=t.map(e=>parseInt(e));const r=[];for(let e=0;e<4;e++)r.push(("00"+t[e].toString(16)).slice(-2));return`${r[0]}${r[1]}:${r[2]}${r[3]}`}static ipToBytes(e){if(dn.isIPv4Address(e)){const t=e.split(".");return new Uint8Array(t.map(e=>parseInt(e)))}if(dn.isIPv6Address(e)){let t=e.toLowerCase().split(":");if(dn.isIPv4Address(t[t.length-1]))return dn.ipToBytes(t[t.length-1]);t=(t=dn._extendIPv6(t)).map(e=>parseInt(e,16));const r=[];for(let e=0;e<8;e++)r.push(t[e]>>8),r.push(255&t[e]);return new Uint8Array(r)}throw new Error(`Malformed IP address ${e}`)}static bytesToIp(e){if(dn.isIPv4Address(e))return e.join(".");if(dn.isIPv6Address(e)){const t=Array.from(e,e=>("00"+e.toString(16)).slice(-2)),r=[];for(let e=0;e<8;e++)r.push(t[2*e]+t[2*e+1]);return r.join(":")}throw new Error(`Malformed IP address ${e}`)}static _extendIPv6(e){if(dn.isIPv4Address(e[e.length-1])){const t=e[e.length-1],r=dn._IPv4toIPv6(t);ip=ip.replace(t,r),e=ip.toLowerCase().split(":")}let t=e.indexOf("");if(t>=0){e[t]="0";for(let r=e.length;r<8;r++)e.splice(t,0,"0")}for(t=e.indexOf("");t>=0;)e[t]="0",t=e.indexOf("");return e}static ipToSubnet(e,t){let r=!1;e instanceof Uint8Array||(e=dn.ipToBytes(e),r=!0);const n=[];for(let r=0;r<e.byteLength;r++){const i=Math.min(t,8);n.push(e[r]&256-Math.pow(2,8-i)),t-=i}const i=new Uint8Array(n);return r?dn.bytesToIp(i):i}}dn.IPv4_LENGTH=4,dn.IPv6_LENGTH=16,dn.IPv4_PRIVATE_NETWORK=["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","100.64.0.0/10","169.254.0.0/16"],c.register(dn);class pn{static async getPersistent(){if(!pn._instance){const e=new s.JungleDB("peer-key",pn.VERSION,{maxDbSize:pn.INITIAL_DB_SIZE});e.createObjectStore(pn.KEY_DATABASE,{codec:new An}),await e.connect(),pn._instance=new pn(e.getObjectStore(pn.KEY_DATABASE))}return pn._instance}static createVolatile(){const e=s.JungleDB.createVolatileObjectStore();return new pn(e)}constructor(e){this._store=e}get(e){return this._store.get(e)}put(e,t){return this._store.put(e,t)}}pn._instance=null,pn.VERSION=2,pn.KEY_DATABASE="keys",pn.INITIAL_DB_SIZE=10485760,c.register(pn);class An{encode(e){return e.serialize()}decode(e,t){return de.unserialize(new j(e))}get leveldbValueEncoding(){return"binary"}get lmdbValueEncoding(){return s.JungleDB.BINARY_ENCODING}}class gn{constructor(e,t,r,n,i){this._channel=e,this._version=t,this._headHash=r,this._head=null,this._timeOffset=n,this._userAgent=i,this._setNetAddress()}_setNetAddress(){this.channel.netAddress?(this.peerAddress.netAddress&&!this.peerAddress.netAddress.equals(this.channel.netAddress)&&h.w(gn,`Got different netAddress ${this.channel.netAddress} for ${this.peerAddress} `+`- advertised was ${this.peerAddress.netAddress}`),this.channel.netAddress.isPrivate()||(this.peerAddress.netAddress=this.channel.netAddress)):this.channel.peerAddress.netAddress?this.channel.netAddress=this.channel.peerAddress.netAddress:this.channel.netAddress=Or.UNKNOWN}get channel(){return this._channel}get version(){return this._version}get headHash(){return this._headHash}get head(){return this._head}set head(e){this._head=e,this._headHash=e.hash()}get timeOffset(){return this._timeOffset}get id(){return this._channel.id}get peerAddress(){return this._channel.peerAddress}set peerAddress(e){this._channel.peerAddress=e}get netAddress(){return this._channel.netAddress}get userAgent(){return this._userAgent}equals(e){return e instanceof gn&&this._channel.equals(e.channel)}hashCode(){return this._channel.hashCode()}toString(){return`Peer{version=${this._version}, headHash=${this._headHash}, `+`peerAddress=${this.peerAddress}, netAddress=${this.netAddress}}`}}c.register(gn);class yn extends l{constructor(e,t,r,n,i,s=new Uint8Array(0)){super(),this._blockchain=e,this._accounts=t,this._mempool=r,this._time=n,this._producer=new nt(e,t,r,n),this._address=i,this._extraData=s,this._hashCount=0,this._lastHashrate=0,this._hashrateWorker=null,this._hashrate=0,this._lastHashCounts=[],this._totalHashCount=0,this._lastElapsed=[],this._totalElapsed=0,this._workerPool=new kn;const o=m.hardwareConcurrency;this.threads=Math.ceil(o/2),1===o&&(this.throttleAfter=2),this._workerPool.on("share",e=>this.onWorkerShare(e)),this._workerPool.on("no-share",e=>this.onWorkerShare(e)),this._mempoolChanged=!1,this._restarting=!1,this._lastRestart=0,this._submittingBlock=!1,this._shareCompact=0,this._shareCompactSet=!1,this._numBlocksMined=0,this._activeConfigChanges=!1,this._pendingConfigChanges=!1,this._mempool&&(this._mempool.on("transactions-ready",()=>this._startWork()),this._mempool.on("transaction-added",()=>this._mempoolChanged=!0))}startWork(){this.working||(this._hashCount=0,this._lastElapsed=[],this._lastHashCounts=[],this._totalHashCount=0,this._totalElapsed=0,this._lastHashrate=Date.now(),this._hashrateWorker=setInterval(()=>this._updateHashrate(),1e3),this._retry=0,this.fire("start",this),this._startWork().catch(h.w.tag(yn)))}async _startWork(){if(this.working&&!this._restarting)try{this._lastRestart=Date.now(),this._restarting=!0,this._mempoolChanged=!1,this._retry=0;const e=await this.getNextBlock();if(null===e)return void this._stopWork();e.isFull()?h.d(yn,`Starting work on block #${e.header.height} / ${e.minerAddr.toUserFriendlyAddress()} / ${z.toBase64(e.body.extraData)} with ${e.transactionCount} transactions (${this._hashrate} H/s)`):h.d(yn,`Starting work on block #${e.header.height} from pool (${this._hashrate} H/s)`),this._workerPool.startMiningOnBlock(e,this._shareCompactSet?this._shareCompact:void 0).catch(h.w.tag(yn))}catch(e){h.e(yn,e),h.w(yn,"Failed to start work, retrying in 100ms"),this._stopWork(),setTimeout(()=>this.startWork(),100)}finally{this._restarting=!1}}async onWorkerShare(e){if(this._hashCount+=this._workerPool.noncesPerRun,e.block&&e.block.prevHash.equals(this._blockchain.headHash)&&(h.d(yn,()=>`Received share: ${e.nonce} / ${e.hash.toHex()}`),!this._submittingBlock)){e.block.header.nonce=e.nonce;let t=!1;if(e.block.isFull()&&ze.isProofOfWork(e.hash,e.block.target))if(this._submittingBlock=!0,await e.block.header.verifyProofOfWork()){if(this._numBlocksMined++,t=!0,this.fire("block-mined",e.block,this),await this._blockchain.pushBlock(e.block)<0)return this._submittingBlock=!1,void this._startWork().catch(h.w.tag(yn));this._submittingBlock=!1}else h.d(yn,`Ignoring invalid share: ${await e.block.header.pow()}`);this.fire("share",e.block,t,this)}this._mempoolChanged&&this._lastRestart+yn.MIN_TIME_ON_BLOCK<Date.now()&&this._startWork().catch(h.w.tag(yn))}async getNextBlock(e=this._address,t=this._extraData){this._retry++;try{return this._producer.getNextBlock(e,t)}catch(r){if(this._retry<=3)return this.getNextBlock(e,t);throw r}}stopWork(){this._stopWork()}_stopWork(){this.working&&(clearInterval(this._hashrateWorker),this._hashrateWorker=null,this._hashrate=0,this._lastElapsed=[],this._lastHashCounts=[],this._totalHashCount=0,this._totalElapsed=0,this._workerPool.stop(),this.fire("stop",this),h.d(yn,"Stopped work"))}_updateHashrate(){const e=(Date.now()-this._lastHashrate)/1e3,t=this._hashCount;if(this._hashCount=0,this._lastHashrate=Date.now(),this._lastElapsed.push(e),this._lastHashCounts.push(t),this._totalElapsed+=e,this._totalHashCount+=t,this._lastElapsed.length>yn.MOVING_AVERAGE_MAX_SIZE){const e=this._lastElapsed.shift(),t=this._lastHashCounts.shift();this._totalElapsed-=e,this._totalHashCount-=t}this._hashrate=Math.round(this._totalHashCount/this._totalElapsed),this.fire("hashrate-changed",this._hashrate,this)}startConfigChanges(){this._activeConfigChanges=!0,this._pendingConfigChanges=!1}finishConfigChanges(){this._pendingConfigChanges&&this._startWork().catch(h.w.tag(yn)),this._activeConfigChanges=!1}get address(){return this._address}set address(e){e&&!e.equals(this._address)&&(this._address=e,this._activeConfigChanges?this._pendingConfigChanges=!0:this._startWork().catch(h.w.tag(yn)))}get working(){return!!this._hashrateWorker}get hashrate(){return this._hashrate}get threads(){return this._workerPool.poolSize}set threads(e){this._workerPool.poolSize=e}get throttleWait(){return this._workerPool.cycleWait}set throttleWait(e){this._workerPool.cycleWait=e}get throttleAfter(){return this._workerPool.runsPerCycle}set throttleAfter(e){this._workerPool.runsPerCycle=e}get extraData(){return this._extraData}set extraData(e){z.equals(e,this._extraData)||(this._extraData=e,this._activeConfigChanges?this._pendingConfigChanges=!0:this._startWork().catch(h.w.tag(yn)))}get shareCompact(){return this._shareCompactSet?this._shareCompact:void 0}set shareCompact(e){e?(this._shareCompact=e,this._shareCompactSet=!0):this._shareCompactSet=!1}get numBlocksMined(){return this._numBlocksMined}}yn.MIN_TIME_ON_BLOCK=1e4,yn.MOVING_AVERAGE_MAX_SIZE=10,c.register(yn);class mn extends yn{constructor(e,t,r,n,i,s,o,a,c=new Uint8Array(0)){super(t,r,n,i,s,c),this._ourAddress=s,this._ourExtraData=c,this._ws=null,this._deviceId=o,this._deviceData=a,this.mode=e,this.connectionState=mn.ConnectionState.CLOSED,this._reconnectTimeout=null,this._exponentialBackoffReconnect=mn.RECONNECT_TIMEOUT}requestPayout(){this._send({message:"payout"})}_send(e){if(this._ws)try{this._ws.send(JSON.stringify(e))}catch(e){h.w(mn,"Error sending:",e.message||e)}}connect(e,t){if(this._ws)throw new Error("Call disconnect() first");this._host=e,this._port=t;const r=this._ws=new WebSocket(`wss://${e}:${t}`);this._ws.onopen=()=>this._onOpen(r),this._ws.onerror=e=>this._onError(r,e),this._ws.onmessage=e=>this._onMessage(r,e.data),this._ws.onclose=e=>this._onClose(r,e),this._changeConnectionState(mn.ConnectionState.CONNECTING)}_onOpen(e){e!==this._ws?e.close():this._register()}_register(){this._send({message:"register",mode:this.mode,address:this._ourAddress.toUserFriendlyAddress(),deviceId:this._deviceId,deviceData:this._deviceData,genesisHash:z.toBase64(Wr.GENESIS_HASH.serialize())})}_onError(e,t){h.d(mn,"WebSocket connection errored",t.message||t),e===this._ws&&this._timeoutReconnect();try{e.close()}catch(e){h.w(mn,e.message||e)}}_onClose(e,t){h.d(mn,"WebSocket connection closed",t.message||t),e===this._ws&&(this._changeConnectionState(mn.ConnectionState.CLOSED),h.w(mn,"Disconnected from pool"),this._timeoutReconnect())}_timeoutReconnect(){this.disconnect(),this._reconnectTimeout=setTimeout(()=>{this._ws||this.connect(this._host,this._port)},this._exponentialBackoffReconnect),this._exponentialBackoffReconnect=Math.min(2*this._exponentialBackoffReconnect,mn.RECONNECT_TIMEOUT_MAX)}disconnect(){if(this._turnPoolOff(),this._ws){this._changeConnectionState(mn.ConnectionState.CLOSED),h.w(mn,"Disconnected from pool");const e=this._ws;this._ws=null;try{e.close()}catch(e){h.w(mn,e.message||e)}}clearTimeout(this._reconnectTimeout)}_onMessage(e,t){if(e===this._ws)try{const e=JSON.parse(t);if(e&&e.message)switch(e.message){case"settings":e.address&&e.extraData?(this._onNewPoolSettings(we.fromUserFriendlyAddress(e.address),z.fromBase64(e.extraData),e.targetCompact||ze.targetToCompact(new J(e.target)),e.nonce),h.d(mn,`Received settings from pool: address ${e.address}, target ${e.target}, extraData ${e.extraData}`)):(this._turnPoolOff(),this._ws.close());break;case"balance":void 0===e.balance||void 0===e.confirmedBalance?(this._turnPoolOff(),this._ws.close()):(this._onBalance(e.balance,e.confirmedBalance,e.payoutRequestActive),h.d(mn,`Received balance from pool: ${e.balance} (${e.confirmedBalance} confirmed), payout request active: ${e.payoutRequestActive}`));break;case"registered":this._changeConnectionState(mn.ConnectionState.CONNECTED),this._exponentialBackoffReconnect=mn.RECONNECT_TIMEOUT,h.i(mn,"Connected to pool");break;case"error":h.w(mn,"Error from pool:",e.reason)}else h.w(mn,"Received unknown message from pool server:",JSON.stringify(e)),this._ws.close()}catch(t){this._onError(e,t)}}_onBalance(e,t,r){const n=this.balance,i=this.confirmedBalance;this.balance=e,this.confirmedBalance=t,this.payoutRequestActive=r,e===n&&t===i||h.i(mn,`Pool balance: ${ae.lunasToCoins(e)} NIM (confirmed ${ae.lunasToCoins(t)} NIM)`),e!==n&&this.fire("balance",e),t!==i&&this.fire("confirmed-balance",t)}_turnPoolOff(){this.startConfigChanges(),super.address=this._ourAddress,super.extraData=this._ourExtraData,super.shareCompact=null,this.finishConfigChanges()}_onNewPoolSettings(e,t,r,n){this.startConfigChanges(),super.address=e,super.extraData=t,super.shareCompact=r,super.nonce=n,this.finishConfigChanges()}_changeConnectionState(e){this.connectionState=e,this.fire("connection-state",e)}isConnected(){return this.connectionState===mn.ConnectionState.CONNECTED}isDisconnected(){return this.connectionState===mn.ConnectionState.CLOSED}get host(){return this._host}get port(){return this._port}get address(){return this._ourAddress}set address(e){this._ourAddress=e,this.isConnected()?(this.disconnect(),this.connect(this._host,this._port)):super.address=e}static generateDeviceId(e){return ue.blake2b([z.fromAscii("pool_device_id"),e.keyPair.privateKey.serialize()].reduce(z.concatTypedArrays)).serialize().readUint32()}}mn.PAYOUT_NONCE_PREFIX="POOL_PAYOUT",mn.RECONNECT_TIMEOUT=3e3,mn.RECONNECT_TIMEOUT_MAX=3e4,mn.ConnectionState={CONNECTED:0,CONNECTING:1,CLOSED:2},mn.Mode={NANO:"nano",SMART:"smart"},c.register(mn);c.register(class extends mn{constructor(e,t,r,n,i,s,o,a=new Uint8Array(0)){super(mn.Mode.SMART,e,t,r,n,i,s,o,a),this.on("share",(e,t)=>this._onBlockMined(e,t))}async _onBlockMined(e,t){this._send({message:"share",blockHeader:z.toBase64(e.header.serialize()),minerAddrProof:z.toBase64((await re.compute(e.body.getMerkleLeafs(),e.minerAddr)).serialize()),extraDataProof:z.toBase64((await re.compute(e.body.getMerkleLeafs(),e.body.extraData)).serialize()),block:t?z.toBase64(e.serialize()):void 0})}});class _n extends mn{constructor(e,t,r,n,i){super(mn.Mode.NANO,e,null,null,t,r,n,i),this.on("share",e=>this._onBlockMined(e)),this._shouldWork=!1}startWork(){this._shouldWork=!0,super.startWork()}stopWork(){this._shouldWork=!1,super.stopWork()}_onBlockMined(e){this._send({message:"share",block:z.toBase64(e.serialize())})}_onMessage(e,t){if(this._ws===e)try{const r=JSON.parse(t);r&&"new-block"===r.message?this._handleNewBlock(r):super._onMessage(e,t)}catch(t){this._onError(e,t)}}async _handleNewBlock(e){const t=Je.unserialize(z.fromBase64(e.previousBlock));let r;if(h.d(_n,`New base block from pool server, on top of ${t.hash()}`),this._blockchain.headHash.equals(t.hash()))this._poolNextTarget=await this._blockchain.getNextTarget();else if(this._blockchain.headHash.equals(t.prevHash)){if(!await t.isImmediateSuccessorOf(this._blockchain.head))return h.w(_n,`${t.hash()} (from pool) is not an immediate successor of ${this._blockchain.headHash}, but is announced as such.`),void super.stopWork();this._poolNextTarget=await this._blockchain.getNextTarget(this._blockchain.head,t)}else{if(this._blockchain.head.prevHash.equals(t.hash()))return void super.stopWork();if(this._blockchain.height!==t.height||!(r=await this._blockchain.getBlock(t.prevHash)))return(r=await this._blockchain.getBlock(t.prevHash,!0))?(h.w(_n,`${t.hash()} (from pool) is a known fork, we don't mine on forks.`),void super.stopWork()):(h.w(_n,`${t.hash()} (from pool) is unknown and not a successor of the head`),void super.stopWork());if(!await t.isImmediateSuccessorOf(r))return h.w(_n,`${t.hash()} (from pool) is not an immediate successor of ${r}, but is announced as such.`),void super.stopWork()}this._poolNextInterlink=await t.getNextInterlink(this._poolNextTarget),this._poolPrevBlock=t,this._poolAccountsHash=ue.unserialize(z.fromBase64(e.accountsHash)),this._poolBodyHash=ue.unserialize(z.fromBase64(e.bodyHash)),this.working?this._startWork().catch(h.w.tag(yn)):this._shouldWork&&super.startWork()}getNextBlock(){return this._poolPrevBlock?new Je(new Ue(this._poolPrevBlock.hash(),this._poolNextInterlink.hash(),this._poolBodyHash,this._poolAccountsHash,ze.targetToCompact(this._poolNextTarget),this._poolPrevBlock.height+1,Math.max(this._producer._getNextTimestamp(),this._poolPrevBlock.timestamp+1),0),this._poolNextInterlink):null}_turnPoolOff(){this.stopWork(),super._turnPoolOff()}}c.register(_n);class bn{static generate(){return new bn(de.generate())}static loadPlain(e){if("string"==typeof e&&(e=z.fromHex(e)),!e||0===e.byteLength)throw new Error("Invalid wallet seed");return new bn(de.unserialize(new j(e)))}static async loadEncrypted(e,t){return"string"==typeof e&&(e=z.fromHex(e)),"string"==typeof t&&(t=z.fromUtf8(t)),new bn(await de.fromEncrypted(new j(e),t))}constructor(e){this._keyPair=e,this._address=this._keyPair.publicKey.toAddress()}createTransaction(e,t,r,n){const i=new Ve(this._keyPair.publicKey,e,t,r,n);return i.signature=ye.create(this._keyPair.privateKey,this._keyPair.publicKey,i.serializeContent()),i}signTransaction(e){const t=ye.create(this._keyPair.privateKey,this._keyPair.publicKey,e.serializeContent());return qe.singleSig(this._keyPair.publicKey,t)}exportPlain(){return this._keyPair.serialize()}exportEncrypted(e){return"string"==typeof e&&(e=z.fromUtf8(e)),this._keyPair.exportEncrypted(e)}get isLocked(){return this.keyPair.isLocked}lock(e){return"string"==typeof e&&(e=z.fromUtf8(e)),this.keyPair.lock(e)}relock(){this.keyPair.relock()}unlock(e){return"string"==typeof e&&(e=z.fromUtf8(e)),this.keyPair.unlock(e)}equals(e){return e instanceof bn&&this.keyPair.equals(e.keyPair)&&this.address.equals(e.address)}get address(){return this._address}get publicKey(){return this._keyPair.publicKey}get keyPair(){return this._keyPair}}c.register(bn);class wn extends bn{static fromPublicKeys(e,t,r){if(0===r.length)throw new Error("publicKeys may not be empty");if(t<=0)throw new Error("minSignatures must be greater than 0");if(!r.some(t=>t.equals(e.publicKey)))throw new Error("Own publicKey must be part of publicKeys");(r=r.slice()).sort((e,t)=>e.compare(t));const n=[...I.k_combinations(r,t)].map(e=>fe.sum(e));return new wn(e,t,n)}static _loadMultiSig(e,t){const r=t.readUint8(),n=t.readUint8(),i=[];for(let e=0;e<n;++e)i.push(fe.unserialize(t));return new wn(e,r,i)}static loadPlain(e){if("string"==typeof e&&(e=z.fromHex(e)),!e||0===e.byteLength)throw new Error("Invalid wallet seed");const t=new j(e),r=de.unserialize(t);return wn._loadMultiSig(r,t)}static async loadEncrypted(e,t){"string"==typeof e&&(e=z.fromHex(e)),"string"==typeof t&&(t=z.fromUtf8(t));const r=new j(e),n=await de.fromEncrypted(r,t);return wn._loadMultiSig(n,r)}constructor(e,t,r){super(e),this._minSignatures=t,this._publicKeys=r,this._publicKeys.sort((e,t)=>e.compare(t));const n=te.computeRoot(this._publicKeys);this._address=we.fromHash(n)}exportPlain(){const e=new j(this.exportedSize);this._keyPair.serialize(e),e.writeUint8(this._minSignatures),e.writeUint8(this._publicKeys.length);for(const t of this._publicKeys)t.serialize(e);return e}get exportedSize(){return this._keyPair.serializedSize+1+1+this._publicKeys.reduce((e,t)=>e+t.serializedSize,0)}async exportEncrypted(e){"string"==typeof e&&(e=z.fromUtf8(e));const t=new j(this.encryptedSize);t.write(await this._keyPair.exportEncrypted(e)),t.writeUint8(this._minSignatures),t.writeUint8(this._publicKeys.length);for(const e of this._publicKeys)e.serialize(t);return t}get encryptedSize(){return this._keyPair.encryptedSize+1+1+this._publicKeys.reduce((e,t)=>e+t.serializedSize,0)}createTransaction(e,t,r,n){return new Ge(this._address,ve.Type.BASIC,e,ve.Type.BASIC,t,r,n,He.Flag.NONE,new Uint8Array(0))}createCommitment(){return _e.generate()}partiallySignTransaction(e,t,r,n){return(t=t.slice()).sort((e,t)=>e.compare(t)),be.create(this._keyPair.privateKey,this._keyPair.publicKey,t,n,r,e.serializeContent())}signTransaction(e,t,r,n){if(n.length!==this._minSignatures)throw new Error("Not enough signatures to complete this transaction");const i=ye.fromPartialSignatures(r,n);return qe.multiSig(t,this._publicKeys,i)}completeTransaction(e,t,r,n){const i=this.signTransaction(e,t,r,n);return e.proof=i.serialize(),e}get minSignatures(){return this._minSignatures}get publicKeys(){return this._publicKeys}}c.register(wn);class vn{constructor(e="wallet"){return this._jdb=new s.JungleDB(e,vn.VERSION,{maxDbSize:vn.INITIAL_DB_SIZE,autoResize:!0,minResize:vn.MIN_RESIZE}),this._walletStore=null,this._multiSigStore=null,this._init()}async _init(){return this._walletStore=this._jdb.createObjectStore(vn.WALLET_DATABASE,{codec:new En}),this._multiSigStore=this._jdb.createObjectStore(vn.MULTISIG_WALLET_DATABASE,{codec:new En}),await this._jdb.connect(),this}async hasDefault(){return!!await this._walletStore.get("default")}async getDefault(e){const t=await this._walletStore.get("default");if(!t){const e=bn.generate();return await this.put(e),await this.setDefault(e.address),e}const r=new we(t);return this.get(r,e)}setDefault(e){const t=e.serialize();return this._walletStore.put("default",t)}async get(e,t){const r=e.toBase64(),n=await this._walletStore.get(r);if(!n)return null;if(t)return bn.loadEncrypted(n,t);try{return bn.loadPlain(n)}catch(e){return null}}async put(e,t,r){const n=e.address.toBase64();let i=null;return i=t?await e.exportEncrypted(t,r):e.exportPlain(),this._walletStore.put(n,i)}async remove(e){const t=e.toBase64(),r=this._walletStore.transaction();r.removeSync(t);let n=await this._walletStore.get("default");return n&&(n=new we(n),e.equals(n)&&r.removeSync("default")),r.commit()}async list(){const e=await this._walletStore.keys();return Array.from(e).filter(e=>"default"!==e).map(e=>we.fromBase64(e))}async getMultiSig(e,t){const r=e.toBase64(),n=await this._multiSigStore.get(r);return n?t?wn.loadEncrypted(n,t):wn.loadPlain(n):null}async putMultiSig(e,t,r){const n=e.address.toBase64();let i=null;return i=t?await e.exportEncrypted(t,r):e.exportPlain(),this._multiSigStore.put(n,i)}removeMultiSig(e){const t=e.toBase64();return this._multiSigStore.remove(t)}async listMultiSig(){const e=await this._multiSigStore.keys();return Array.from(e).map(e=>we.fromBase64(e))}close(){return this._jdb.close()}}c.register(vn),vn._instance=null,vn.VERSION=1,vn.INITIAL_DB_SIZE=10485760,vn.MIN_RESIZE=10485760,vn.WALLET_DATABASE="wallets",vn.MULTISIG_WALLET_DATABASE="multisig-wallets";class En{encode(e){return e}decode(e,t){return new Uint8Array(e)}get leveldbValueEncoding(){return"binary"}get lmdbValueEncoding(){return s.JungleDB.BINARY_ENCODING}}class Sn{async multiMine(e,t,r,n){}}c.register(Sn);class Cn extends(W.Stub(Sn)){constructor(){super(),this._superInit=super.init}async init(e){await this._superInit.call(this,e),m.isBrowser()&&await _.doImportBrowser()}async multiMine(e,t,r,n){const i=new Uint8Array(32);let s,o;try{s=Module._malloc(i.length),o=Module._malloc(e.length),Module.HEAPU8.set(e,o);const a=Module._nimiq_argon2_target(s,o,e.length,t,r,n,512);return a!==n&&(i.set(new Uint8Array(Module.HEAPU8.buffer,s,i.length)),{hash:i,nonce:a})}catch(e){throw h.w(Cn,e),e}finally{void 0!==s&&Module._free(s),void 0!==o&&Module._free(o)}}}W.prepareForWorkerUse(Sn,new Cn);class kn extends(W.Pool(Sn)){constructor(e=1){super(e=>W.startWorkerForProxy(Sn,e),"miner",e),this._miningEnabled=!1,this._activeNonces=[],this._block=null,this._noncesPerRun=256,this._observable=new l,this._shareCompact=ae.BLOCK_TARGET_MAX,this._runsPerCycle=1/0,this._cycleWait=100,this._superUpdateToSize=super._updateToSize,m.isNodeJs()&&(h.i(kn,`Using add-on optimized for instruction set: ${cpuSupport}`),this.multiMine=function(e,t,r,n){return new Promise((i,s)=>{NodeNative.node_argon2_target_async(async t=>{try{if(t===n)i(!1);else{e.writePos-=4,e.writeUint32(t);const r=await(await Q.getInstanceAsync()).computeArgon2d(e);i({hash:r,nonce:t})}}catch(e){s(e)}},e,t,r,n,512)})})}get noncesPerRun(){return this._noncesPerRun}set noncesPerRun(e){this._noncesPerRun=e}get runsPerCycle(){return this._runsPerCycle}set runsPerCycle(e){this._runsPerCycle=e}get cycleWait(){return this._cycleWait}set cycleWait(e){this._cycleWait=e}on(e,t){return this._observable.on(e,t)}off(e,t){this._observable.off(e,t)}async startMiningOnBlock(e,t){if(this._block=e,this._shareCompact=t||e.nBits,this._miningEnabled)this._activeNonces=[{minNonce:0,maxNonce:0}];else{await this._updateToSize(),this._activeNonces=[],this._miningEnabled=!0;for(let e=0;e<this.poolSize;++e)this._startMiner()}}stop(){this._miningEnabled=!1}async _updateToSize(){for(m.isNodeJs()||await this._superUpdateToSize.call(this);this._miningEnabled&&this._activeNonces.length<this.poolSize;)this._startMiner()}_startMiner(){if(this._activeNonces.length>=this.poolSize)return;const e=0===this._activeNonces.length?0:Math.max.apply(null,this._activeNonces.map(e=>e.maxNonce)),t={minNonce:e,maxNonce:e+this._noncesPerRun};this._activeNonces.push(t),this._singleMiner(t).catch(e=>h.e(kn,e))}async _singleMiner(e){let t=0;for(;this._miningEnabled&&(W.areWorkersAsync||m.isNodeJs()||0===t)&&t<this._runsPerCycle;){t++;const r=this._block,n=await this.multiMine(r.header.serialize(),this._shareCompact,e.minNonce,e.maxNonce);if(n){const e=new ue(n.hash);this._observable.fire("share",{block:r,nonce:n.nonce,hash:e})}else this._observable.fire("no-share",{nonce:e.maxNonce});if(this._activeNonces.length>this.poolSize)return void this._activeNonces.splice(this._activeNonces.indexOf(e),1);{const t=Math.max.apply(null,this._activeNonces.map(e=>e.maxNonce)),r={minNonce:t,maxNonce:t+this._noncesPerRun};this._activeNonces.splice(this._activeNonces.indexOf(e),1,r),e=r}}this._miningEnabled&&setTimeout(()=>this._singleMiner(e),this._cycleWait)}}c.register(kn);class In{constructor(e,t){this._consensus=t||e.createConsensus(),this._consensusListenerIds=[],this._consensusSynchronizer=new H,this._subscribedAddresses=new R,this._config=e,this._consensusChangedListeners=new T,this._blockListeners=new T,this._headChangedListeners=new T,this._transactionListeners=new T,this._listenerId=0,this._consensusState=In.ConsensusState.CONNECTING,this._headHash=null,this._transactionConfirmWaiting=new T,this._transactionExpireWaiting=new T,this._transactionSynchronizer=new H,this._network=new In.Network(this),this._mempool=new In.Mempool(this),this._consensusSynchronizer.push(()=>this._setupConsensus().catch(h.w.tag(In))).catch(h.w.tag(In))}async _setupConsensus(){const e=await this._consensus;this._consensusOn(e,"block",e=>this._onBlock(e)),this._consensusOn(e,"established",()=>this._onConsensusChanged(In.ConsensusState.ESTABLISHED)),this._consensusOn(e,"waiting",()=>this._onConsensusChanged(In.ConsensusState.CONNECTING)),this._consensusOn(e,"syncing",()=>this._onConsensusChanged(In.ConsensusState.SYNCING)),this._consensusOn(e,"head-changed",(e,t,r,n)=>this._onHeadChanged(e,t,r,n)),this._consensusOn(e,"transaction-added",e=>this._onPendingTransaction(e)),this._consensusOn(e,"transaction-added",e=>this._mempool._onTransactionAdded(e)),this._consensusOn(e,"transaction-removed",e=>this._mempool._onTransactionRemoved(e)),this._consensusOn(e,"transaction-mined",(e,t,r)=>this._onMinedTransaction(t,e,r)),this._consensusOn(e,"consensus-failed",()=>this._onConsensusFailed()),this._onConsensusChanged(e.established?In.ConsensusState.ESTABLISHED:In.ConsensusState.CONNECTING),this._config.hasFeature(In.Feature.PASSIVE)?e.network.allowInboundConnections=!0:e.network.connect()}_consensusOn(e,t,r){this._consensusListenerIds.push({type:t,id:e.on(t,r)})}async _replaceConsensus(e){const t=await this._consensus;for(const{type:e,id:r}of this._consensusListenerIds)t.off(e,r);this._consensusListenerIds=[],this._consensus=e;const r=await this._consensus;return t.handoverTo(r),this._setupConsensus()}_txExpiresAt(e){return e.validityStartHeight+ae.TRANSACTION_VALIDITY_WINDOW+this._config.requiredBlockConfirmations-1}_txWaitForExpire(e){const t=this._transactionExpireWaiting.get(this._txExpiresAt(e))||new R;t.add(e),this._transactionExpireWaiting.put(this._txExpiresAt(e),t)}_txClearFromExpire(e){if(this._transactionExpireWaiting.contains(this._txExpiresAt(e))){const t=this._transactionExpireWaiting.get(this._txExpiresAt(e));t.remove(e),0===t.length&&this._transactionExpireWaiting.remove(this._txExpiresAt(e))}}_txConfirmsAt(e){return e+this._config.requiredBlockConfirmations-1}_txWaitForConfirm(e,t){const r=this._transactionConfirmWaiting.get(this._txConfirmsAt(t))||new R;r.add(e),this._transactionConfirmWaiting.put(this._txConfirmsAt(t),r)}_txClearFromConfirm(e){for(const[t,r]of this._transactionConfirmWaiting.entryIterator())if(r.contains(e)&&(r.remove(e),0===r.length)){this._transactionConfirmWaiting.remove(t);break}}_onBlock(e){for(const t of this._blockListeners.values())t(e)}_onConsensusChanged(e){this._consensusSynchronizer.push(async()=>{const t=await this._consensus;if(e!==this._consensusState){t.established&&t.getSubscription().type===je.Type.ADDRESSES&&t.subscribe(je.fromAddresses(this._subscribedAddresses.values())),this._consensusState=e;for(const t of this._consensusChangedListeners.values())try{await t(e)}catch(e){h.e(In,`Error in listener: ${e}`)}if(t.established){const e=await t.getHeadHash();if(e.equals(this._headHash))return;this._headHash=e;for(const t of this._headChangedListeners.values())try{await t(e,"established",[],[e])}catch(e){h.e(In,`Error in listener: ${e}`)}}}}).catch(h.e.tag(In))}_onConsensusFailed(){this._consensusSynchronizer.push(async()=>{const e=await this._consensus;if(e instanceof Pt){h.w(In,"Pico consensus failed, automatically upgrading to nano consensus");const t=new Rt(await new It(e.network.time),e.mempool,e.network);await this._replaceConsensus(Promise.resolve(t))}}).catch(h.e.tag(In))}async _onHeadChanged(e,t,r,n){this._consensusSynchronizer.push(async()=>{if(this._consensusState===In.ConsensusState.ESTABLISHED&&!e.equals(this._headHash)){this._headHash=e;for(const i of this._headChangedListeners.values())try{await i(e,t,r.map(e=>e.hash()),n.map(e=>e.hash()))}catch(e){h.e(In,`Error in listener: ${e}`)}}if(this._transactionListeners.length>0){const e=new R,t=new R(e=>e.tx instanceof He?e.tx.hash().hashCode():e.hash().hashCode());for(const t of r){t.isFull()&&e.addAll(t.transactions);const r=this._transactionConfirmWaiting.get(this._txConfirmsAt(t.height));if(r){for(const t of r.valueIterator())e.add(t);this._transactionConfirmWaiting.remove(this._txConfirmsAt(t.height))}}for(const r of n)if(r.isFull())for(const n of r.transactions)e.contains(n)&&e.remove(n),t.add({tx:n,block:r});for(const t of e.valueIterator())this._onPendingTransaction(t,n[n.length-1]);for(const e of n){const t=this._transactionConfirmWaiting.get(e.height);if(t){for(const r of t.valueIterator())this._onConfirmedTransaction(e,r,n[n.length-1]);this._transactionConfirmWaiting.remove(e.height)}}for(const{tx:e,block:r}of t.valueIterator())this._onMinedTransaction(r,e,n[n.length-1]);for(const e of n){const t=this._transactionExpireWaiting.get(e.height);if(t){for(const r of t.valueIterator())this._onExpiredTransaction(e,r);this._transactionExpireWaiting.remove(e.height)}}}}).catch(h.e.tag(In))}_onPendingTransaction(e,t){let r,n=[];for(const{listener:i,addresses:s}of this._transactionListeners.values())(s.contains(e.sender)||s.contains(e.recipient))&&(r=t&&t.height>=this._txExpiresAt(e)?r||new In.TransactionDetails(e,In.TransactionState.EXPIRED):r||new In.TransactionDetails(e,In.TransactionState.PENDING),n.push(async()=>{try{await i(r)}catch(e){h.e(In,`Error in listener: ${e}`)}}));this._txClearFromConfirm(e),r&&r.state===In.TransactionState.PENDING&&this._txWaitForExpire(e),n.length>0&&this._transactionSynchronizer.push(()=>n.forEach(e=>e())).catch(h.e.tag(In))}_onMinedTransaction(e,t,r){let n,i=[];for(const{listener:s,addresses:o}of this._transactionListeners.values())if(o.contains(t.sender)||o.contains(t.recipient)){let o=In.TransactionState.MINED,a=1;r&&(o=(a=r.height-e.height+1)>=this._config.requiredBlockConfirmations?In.TransactionState.CONFIRMED:In.TransactionState.MINED),n=n||new In.TransactionDetails(t,o,e.hash(),e.height,a,e.timestamp),i.push(async()=>{try{await s(n)}catch(e){h.e(In,`Error in listener: ${e}`)}})}this._txClearFromExpire(t),n&&n.state===In.TransactionState.MINED&&this._txWaitForConfirm(t,e.height),i.length>0&&this._transactionSynchronizer.push(()=>i.forEach(e=>e())).catch(h.e.tag(In))}_onConfirmedTransaction(e,t,r){let n,i=[];for(const{listener:s,addresses:o}of this._transactionListeners.values())(o.contains(t.sender)||o.contains(t.recipient))&&(n=n||new In.TransactionDetails(t,In.TransactionState.CONFIRMED,e.hash(),e.height,r.height-e.height+1,e.timestamp),i.push(async()=>{try{await s(n)}catch(e){h.e(In,`Error in listener: ${e}`)}}));i.length>0&&this._transactionSynchronizer.push(()=>i.forEach(e=>e())).catch(h.e.tag(In))}_onExpiredTransaction(e,t){let r,n=[];for(const{listener:e,addresses:i}of this._transactionListeners.values())(i.contains(t.sender)||i.contains(t.recipient))&&(r=r||new In.TransactionDetails(t,In.TransactionState.EXPIRED),n.push(async()=>{try{await e(r)}catch(e){h.e(In,`Error in listener: ${e}`)}}));n.length>0&&this._transactionSynchronizer.push(()=>n.forEach(e=>e())).catch(h.e.tag(In))}async getHeadHash(){return(await this._consensus).getHeadHash()}async getHeadHeight(){return(await this._consensus).getHeadHeight()}async getHeadBlock(e=!0){const t=await this._consensus,r=await t.getHeadHash();return t.getBlock(r,e)}async getBlock(e,t=!0){return e=ue.fromAny(e),(await this._consensus).getBlock(e,t)}async getBlockAt(e,t){return(await this._consensus).getBlockAt(e,t)}async getBlockTemplate(e,t){if(this._config.requireFeatures(In.Feature.MINING,In.Feature.MEMPOOL),e=we.fromAny(e),"string"==typeof t)t=z.fromHex(t);else if(t&&!(t instanceof Uint8Array))throw new Error("Invalid extra data");return(await this._consensus).getBlockTemplate(e,t)}async submitBlock(e){return this._config.requireFeatures(In.Feature.MINING),e=Je.fromAny(e),(await this._consensus).submitBlock(e)}async getAccount(e){return(await this.getAccounts([e]))[0]}async getAccounts(e){return e=e.map(e=>we.fromAny(e)),(await this._consensus).getAccounts(e)}async getTransaction(e,t,r){e=ue.fromAny(e),t&&(t=ue.fromAny(t));const n=await this._consensus,i=await n.getPendingTransactions([e]);if(i&&i[0])return this._txWaitForExpire(i[0]),new In.TransactionDetails(i[0],In.TransactionState.PENDING);if(!t){const i=await n.getTransactionReceiptsByHashes([e]);if(!i||1!==i.length||!i[0])throw new Error("Unknown transaction hash");t=i[0].blockHash,r=i[0].blockHeight}const s=await n.getBlock(t,!1,!0,r);if(!s)throw new Error("Unknown block hash");r=s.height;const o=await n.getTransactionsFromBlock([e],t,r,s);if(o&&o[0]){const e=o[0],i=await n.getHeadHeight()-r+1,a=i>=this._config.requiredBlockConfirmations;return a||this._txWaitForConfirm(e,r),new In.TransactionDetails(e,a?In.TransactionState.CONFIRMED:In.TransactionState.MINED,t,r,i,s.timestamp)}throw new Error("Unknown transaction hash")}async getTransactionReceipt(e){return e=ue.fromAny(e),(await this.getTransactionReceiptsByHashes([e]))[0]}async getTransactionReceiptsByAddress(e,t=1/0){return e=we.fromAny(e),(await this._consensus).getTransactionReceiptsByAddress(e,t)}async getTransactionReceiptsByHashes(e){return e=e.map(e=>ue.fromAny(e)),(await this._consensus).getTransactionReceiptsByHashes(e)}async getTransactionsByAddress(e,t=0,r,n=1/0){e=we.fromAny(e);const i=new T;if(r){r=r.map(e=>In.TransactionDetails.fromPlain(e));for(const e of r)i.put(e.transactionHash,e)}const s=await this._consensus,o=new R(e=>e instanceof ue?e.hashCode():e.transactionHash.hashCode());try{const t=await s.getPendingTransactionsByAddress(e,n);for(const e of t)this._txWaitForExpire(e),o.add(new In.TransactionDetails(e,In.TransactionState.PENDING))}catch(e){}const a=new R(e=>e.transactionHash.hashCode());o.length<n&&a.addAll(await s.getTransactionReceiptsByAddress(e,n-o.length));const c=new T,u=new T;for(const e of a.valueIterator()){const r=i.get(e.transactionHash);if((!r||r.state!==In.TransactionState.CONFIRMED||!e.blockHash.equals(r.blockHash))&&e.blockHeight>=t){const t=c.get(e.blockHash.toBase64())||new R;t.add(e.transactionHash),c.put(e.blockHash.toBase64(),t),u.put(e.blockHash.toBase64(),e.blockHeight)}}for(const e of i.valueIterator())if((e.state===In.TransactionState.MINED||e.state===In.TransactionState.CONFIRMED)&&e.blockHeight>=t&&!a.contains(e)){const t=c.get(e.blockHash.toBase64())||new R;t.add(e.transactionHash),c.put(e.blockHash.toBase64(),t),u.put(e.blockHash.toBase64(),e.blockHeight)}const h=await s.getHeadHeight();for(const[e,t]of c.entryIterator()){const r=ue.fromBase64(e);if(r.equals(ue.NULL))throw new Error(`Illegal request for ${e} vs ${r}`);const n=u.get(e),i=await s.getBlock(r,!1,!0,n),a=await s.getTransactionsFromBlock(t.values(),r,n,i),c=h-n+1,l=c>=this._config.requiredBlockConfirmations;for(const e of a)l||this._txWaitForConfirm(e,n),o.add(new In.TransactionDetails(e,l?In.TransactionState.CONFIRMED:In.TransactionState.MINED,r,n,c,i.timestamp))}for(const e of i.valueIterator())e.state!==In.TransactionState.NEW&&e.state!==In.TransactionState.PENDING||o.contains(e)||(this._txExpiresAt(e)<=h?o.add(new In.TransactionDetails(e.transaction,In.TransactionState.EXPIRED)):o.add(await this.sendTransaction(e.transaction)));return o.values()}async sendTransaction(e){e=He.fromAny(e);const t=await this._consensus;switch(await t.sendTransaction(e)){case yt.SendTransactionResult.EXPIRED:return new In.TransactionDetails(e,In.TransactionState.EXPIRED);case yt.SendTransactionResult.INVALID:return new In.TransactionDetails(e,In.TransactionState.INVALIDATED);case yt.SendTransactionResult.KNOWN:case yt.SendTransactionResult.RELAYED:case yt.SendTransactionResult.PENDING_LOCAL:return new In.TransactionDetails(e,In.TransactionState.PENDING);case yt.SendTransactionResult.ALREADY_MINED:return this.getTransaction(e.hash())}return new In.TransactionDetails(e,In.TransactionState.NEW)}async addBlockListener(e){const t=this._listenerId++;return this._blockListeners.put(t,e),t}async addConsensusChangedListener(e){const t=this._listenerId++;return this._consensusChangedListeners.put(t,e),t}async addHeadChangedListener(e){const t=this._listenerId++;return this._headChangedListeners.put(t,e),t}async addTransactionListener(e,t){t=t.map(e=>we.fromAny(e));const r=new R;r.addAll(t),this._subscribedAddresses.addAll(r),await this._consensusSynchronizer.push(async()=>{const e=await this._consensus;e.established&&e.getSubscription().type===je.Type.ADDRESSES&&e.subscribe(je.fromAddresses(this._subscribedAddresses.values()))});const n=this._listenerId++;return this._transactionListeners.put(n,{listener:e,addresses:r}),n}async removeListener(e){this._blockListeners.remove(e),this._consensusChangedListeners.remove(e),this._headChangedListeners.remove(e),this._transactionListeners.remove(e),0===this._transactionListeners.length&&(this._transactionConfirmWaiting.clear(),this._transactionExpireWaiting.clear())}waitForConsensusEstablished(){return new Promise(e=>{if(this._consensusState===In.ConsensusState.ESTABLISHED)e();else{let t;t=this.addConsensusChangedListener(async r=>{r===In.ConsensusState.ESTABLISHED&&(await this.removeListener(t),e())})}})}get network(){return this._network}get mempool(){return this._config.requireFeatures(In.Feature.MEMPOOL),this._mempool}}In.ConsensusState={CONNECTING:"connecting",SYNCING:"syncing",ESTABLISHED:"established"},c.register(In),In.Configuration=class{constructor(e,t=[],r=!1,n=10){this._networkConfig=e,this._features=t,this._useVolatileStorage=r,this._requiredBlockConfirmations=n}get features(){return this._features}get requiredBlockConfirmations(){return this._requiredBlockConfirmations}get networkConfig(){return this._networkConfig}createConsensus(){return this._useVolatileStorage?this._features.includes(In.Feature.MEMPOOL)||this._features.includes(In.Feature.MINING)?Dt.volatileLight(this._networkConfig):Dt.volatilePico(this._networkConfig):this._features.includes(In.Feature.LOCAL_HISTORY)?Dt.full(this._networkConfig):this._features.includes(In.Feature.MEMPOOL)||this._features.includes(In.Feature.MINING)?Dt.light(this._networkConfig):Dt.pico(this._networkConfig)}hasFeature(e){return this._features.includes(e)}requireFeatures(...e){for(const t of e)if(!this.hasFeature(t))throw new Error(`Missing required client feature: ${t}`)}instantiateClient(){return new In(this)}static builder(){return new In.ConfigurationBuilder}},In.ConfigurationBuilder=class{constructor(){this._features=new R}dumb(){return this.protocol("dumb")}rtc(){return this.protocol("rtc")}ws(e,t=8443){return this.protocol("ws",e,t)}wss(e,t=8443,r,n){return this.protocol("wss",e,t,r,n)}protocol(e,t,r=8443,n,i){if(this._protocol)throw new Error("Protocol already configured");return this._protocol=this._requiredSet(e,"protocol","dumb","rtc","ws","wss"),"ws"!==this._protocol&&"wss"!==this._protocol||(this._host=this._requiredType(t,"host","string"),this._port=this._requiredType(r,"port","number")),"wss"===this._protocol&&(this._tlsKey=this._requiredType(n,"tlsKey","string"),this._tlsCert=this._requiredType(i,"tlsCert","string")),this}volatile(e=!0){if(void 0!==this._volatile)throw new Error("volatile already set");return this._volatile=this._requiredType(e,"volatile","boolean"),this}blockConfirmations(e){if(void 0!==this._blockConfirmations)throw new Error("blockConfirmations already set.");return this._blockConfirmations=this._requiredType(e,"confirmations","number"),this}feature(...e){return this._features.addAll(e),this}reverseProxy(e,t,...r){if("ws"!==this._protocol&&"wss"!==this._protocol)throw new Error("Protocol must be ws or wss for reverse proxy.");return this._reverseProxy={enabled:!0,port:this._requiredType(e,"port","number"),header:this._requiredType(t,"header","string"),addresses:r},this}build(){if(this._volatile&&this._features.contains(In.Feature.LOCAL_HISTORY))throw new Error("Local history is not available with volatile storage");let e;switch(this._protocol||(m.supportsWebRTC()&&(this._protocol="rtc"),this._protocol="dumb"),this._reverseProxy||(this._reverseProxy={enabled:!1}),"number"!=typeof this._blockConfirmations&&(this._blockConfirmations=10),this._protocol){case"dumb":e=new ln;break;case"rtc":if(m.supportsWebRTC())throw new Error("WebRTC not supported on this platform");e=new hn;break;case"ws":e=new cn(this._host,this._port,this._reverseProxy);break;case"wss":e=new un(this._host,this._port,this._tlsKey,this._tlsCert,this._reverseProxy)}return new In.Configuration(e,this._features.values(),!!this._volatile,this._blockConfirmations)}instantiateClient(){return this.build().instantiateClient()}_requiredType(e,t,r){if(typeof e!==r)throw new Error(`Type of ${t} must be ${r}, but is ${typeof e}`);return e}_requiredSet(e,t,...r){if(!e)throw new Error(`${t} is required`);if(!r.includes(e))throw new Error(`${t} must be one of: ${r.join(", ")}`);return e}},In.Feature={MINING:"MINING",LOCAL_HISTORY:"LOCAL_HISTORY",MEMPOOL:"MEMPOOL",PASSIVE:"PASSIVE"},In.Mempool=class{constructor(e){this._client=e,this._transactionAddedListeners=new T,this._transactionRemovedListeners=new T,this._listenerId=0}_onTransactionAdded(e){for(const t of this._transactionAddedListeners.valueIterator())t(e.hash())}_onTransactionRemoved(e){for(const t of this._transactionRemovedListeners.valueIterator())t(e.hash())}async getTransactions(){return(await this._client._consensus).getMempoolContents().map(e=>e.hash())}async getStatistics(){const e=await this._client._consensus;return new In.MempoolStatistics(e.getMempoolContents())}async addTransactionAddedListener(e){const t=this._listenerId++;return this._transactionAddedListeners.put(t,e),t}async addTransactionRemovedListener(e){const t=this._listenerId++;return this._transactionRemovedListeners.put(t,e),t}removeListener(e){this._transactionAddedListeners.remove(e),this._transactionRemovedListeners.remove(e)}},In.MempoolStatistics=class{constructor(e){const t=[1e4,5e3,2e3,1e3,500,200,100,50,20,10,5,2,1,0];this._countPerBucket={buckets:[]},this._sizePerBucket={buckets:[]},this._totalCount=e.length,this._totalSize=0,this._requiredFeePerByte=0;for(const r of e){let e=0;for(;e<t.length&&r.feePerByte<t[e];)e++;const n=t[e];void 0!==n&&(this._countPerBucket[n]||(this._countPerBucket[n]=0,this._countPerBucket.buckets.push(n),this._sizePerBucket[n]=0,this._sizePerBucket.buckets.push(n)),this._countPerBucket[n]++,this._sizePerBucket[n]+=r.serializedSize),this._totalSize+=r.serializedSize,this._totalSize<ae.BLOCK_SIZE_MAX&&(this._requiredFeePerByte=r.feePerByte)}this._totalSize<ae.BLOCK_SIZE_MAX&&(this._requiredFeePerByte=0)}get count(){return this._totalCount}get size(){return this._totalSize}get requiredFeePerByte(){return this._requiredFeePerByte}get countInBuckets(){return this._countPerBucket}get sizeInBuckets(){return this._sizePerBucket}},In.Network=class{constructor(e){this._client=e}async getPeers(){const e=await this._client._consensus,t=[];for(const r of e.network.connections.valueIterator())t.push(new In.PeerInfo(r));return t}async getPeer(e){const t=(await this._client._consensus).network.connections.getConnectionByPeerAddress(await this._toPeerAddress(e));return t?new In.PeerInfo(t):null}async getAddresses(){const e=await this._client._consensus,t=[];for(const r of e.network.addresses.iterator())t.push(new In.AddressInfo(r));return t}async getAddress(e){const t=(await this._client._consensus).network.addresses.getState(await this._toPeerAddress(e));return t?new In.AddressInfo(t):null}async getOwnAddress(){const e=await this._client._consensus;return new In.BasicAddress(e.network.config.peerAddress)}async getStatistics(){const e=await this._client._consensus;return new In.NetworkStatistics(e.network)}async connect(e){(await this._client._consensus).network.connections.connectOutbound(await this._toPeerAddress(e))}async disconnect(e){const t=(await this._client._consensus).network.connections.getConnectionByPeerAddress(await this._toPeerAddress(e));t&&t.peerChannel.close(Qr.MANUAL_PEER_DISCONNECT)}async ban(e){const t=await this._client._consensus,r=await this._toPeerAddress(e),n=t.network.connections.getConnectionByPeerAddress(r);n?n.peerChannel.close(Qr.MANUAL_PEER_BAN):t.network.addresses.getState(r).state=Fr.BANNED}async unban(e){(await this._client._consensus).network.addresses.getState(await this._toPeerAddress(e)).state=Fr.TRIED}async _toPeerAddress(e){const t=await this._client._consensus;let r;if(e instanceof xr)r=t.network.addresses.get(e);else if(e instanceof In.BasicAddress)r=t.network.addresses.get(e.peerAddress);else if("string"==typeof e)for(const n of t.network.addresses.iterator())if(n.peerAddress.toString()===e){r=n.peerAddress;break}if(!r)throw new Error("Invalid or unknown peer address");return r}},In.BasicAddress=class{constructor(e){this._address=e}get peerAddress(){return this._address}get peerId(){return this._address.peerId}get services(){return w.toNameArray(w.legacyProvideToCurrent(this._address.services))}toPlain(){return{peerAddress:this.peerAddress.toString(),peerId:this.peerId.toString(),services:this.services}}},In.AddressInfo=class extends In.BasicAddress{constructor(e){super(e.peerAddress),this._state=e.state}get banned(){return this._state===Fr.BANNED}get connected(){return this._state===Fr.ESTABLISHED}get state(){return this._state}toPlain(){const e=super.toPlain();return e.banned=this.banned,e.connected=this.connected,e}},In.PeerInfo=class extends In.BasicAddress{constructor(e){super(e.peerAddress),this._connection=e;const t=this._connection.networkConnection,r=this._connection.peer;this._bytesReceived=t?t.bytesReceived:0,this._bytesSent=t?t.bytesSent:0,this._latency=this._connection.statistics.latencyMedian,this._state=this._connection.state,this._version=r?r.version:void 0,this._timeOffset=r?r.timeOffset:void 0,this._headHash=r?r.headHash:void 0,this._userAgent=r?r.userAgent:void 0}get connectionSince(){return this._connection.establishedSince}get netAddress(){return this._connection.networkConnection.netAddress}get bytesReceived(){return this._bytesReceived}get bytesSent(){return this._bytesSent}get latency(){return this._latency}get version(){return this._version}get state(){return this._state}get timeOffset(){return this._timeOffset}get headHash(){return this._headHash}get userAgent(){return this._userAgent}toPlain(){const e=super.toPlain();return e.connectionSince=this.connectionSince,e.netAddress=this.netAddress.toString(),e.bytesReceived=this.bytesReceived,e.bytesSent=this.bytesSent,e.latency=this.latency,e.version=this.version,e.state=this.state,e.timeOffset=this.timeOffset,e.headHash=this.headHash.toPlain(),e.userAgent=this.userAgent,e}},In.NetworkStatistics=class{constructor(e){this._bytesReceived=e.bytesReceived,this._bytesSent=e.bytesSent,this._peerCounts={total:e.peerCount,connecting:e.peerCountConnecting,dumb:e.peerCountDumb,rtc:e.peerCountWebRtc,ws:e.peerCountWebSocket,wss:e.peerCountWebSocketSecure},this._knownAddressesCounts={total:e.knownAddressesCount,rtc:e.addresses.knownRtcAddressesCount,ws:e.addresses.knownWsAddressesCount,wss:e.addresses.knownWssAddressesCount},this._timeOffset=e.time.offset}get bytesReceived(){return this._bytesReceived}get bytesSent(){return this._bytesSent}get totalPeerCount(){return this._peerCounts.total}get peerCountsByType(){return this._peerCounts}get totalKnownAddresses(){return this._knownAddressesCounts.total}get knownAddressesByType(){return this._knownAddressesCounts}get timeOffset(){return this._timeOffset}toPlain(){return{bytesReceived:this.bytesReceived,bytesSent:this.bytesSent,totalPeerCount:this.totalPeerCount,peerCountsByType:this.peerCountsByType,totalKnownAddresses:this.totalKnownAddresses,knownAddressesByType:this.knownAddressesByType,timeOffset:this.timeOffset}}},In.TransactionDetails=class{constructor(e,t,r,n,i,s){this._transaction=e,this._state=t,this._blockHash=r,this._blockHeight=n,this._confirmations=i,this._timestamp=s}get transactionHash(){return this._transaction.hash()}get format(){return this._transaction.format}get sender(){return this._transaction.sender}get senderType(){return this._transaction.senderType}get recipient(){return this._transaction.recipient}get recipientType(){return this._transaction.recipientType}get value(){return this._transaction.value}get fee(){return this._transaction.fee}get feePerByte(){return this._transaction.feePerByte}get validityStartHeight(){return this._transaction.validityStartHeight}get network(){return this._transaction.networkId}get flags(){return this._transaction.flags}get data(){const e=ve.TYPE_MAP.get(this.recipientType).dataToPlain(this._transaction.data);return e.raw=this._transaction.data,e}get proof(){const e=ve.TYPE_MAP.get(this.recipientType).proofToPlain(this._transaction.proof);return e.raw=this._transaction.proof,e}get size(){return this._transaction.serializedSize}get valid(){return this._transaction.verify()}get transaction(){return this._transaction}get state(){return this._state}get blockHash(){return this._blockHash}get blockHeight(){return this._blockHeight}get confirmations(){return this._confirmations}get timestamp(){return this._timestamp}toPlain(){const e=this._transaction.toPlain();return e.state=this._state,e.blockHash=this._blockHash?this._blockHash.toPlain():null,e.blockHeight=this._blockHeight,e.confirmations=this._confirmations,e.timestamp=this._timestamp,e}static fromPlain(e){return new In.TransactionDetails(He.fromPlain(e),e.state||In.TransactionState.NEW,e.blockHash?ue.fromAny(e.blockHash):void 0,e.blockHeight||void 0,e.confirmations||void 0,e.timestamp||void 0)}},In.TransactionState={NEW:"new",PENDING:"pending",MINED:"mined",INVALIDATED:"invalidated",EXPIRED:"expired",CONFIRMED:"confirmed"},a.load=function(e){return"undefined"!=typeof window&&(window.Nimiq=a),e&&(a._path=e),a.WasmHelper.doImportBrowser()},t.a=a}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer,"/",r(/*! ./../../webpack/buildin/global.js */10))},
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-object.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/an-object.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/is-object */128);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/shared.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/is-pure */501),i=r(/*! ../internals/shared-store */502);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.3.3",mode:n?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},
/*!********************************************!*\
  !*** ./node_modules/borc/src/constants.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! bignumber.js */48).BigNumber;t.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},t.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},t.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},t.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},t.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},t.SHIFT32=Math.pow(2,32),t.SHIFT16=Math.pow(2,16),t.MAX_SAFE_HIGH=2097151,t.NEG_ONE=new n(-1),t.TEN=new n(10),t.TWO=new n(2),t.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5}},
/*!***************************************!*\
  !*** ./node_modules/iso-url/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{URLWithLegacySupport:n,format:i,URLSearchParams:s,defaultBase:o}=r(/*! ./src/url */286),a=r(/*! ./src/relative */546);e.exports={URL:n,URLSearchParams:s,format:i,relative:a,defaultBase:o}},
/*!*******************************************************!*\
  !*** ./node_modules/murmurhash3js-revisited/index.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ./lib/murmurHash3js */549)},
/*!***********************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/pbe.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);if(r(/*! ./aes */186),r(/*! ./asn1 */58),r(/*! ./des */302),r(/*! ./md */59),r(/*! ./oids */74),r(/*! ./pbkdf2 */188),r(/*! ./pem */189),r(/*! ./random */75),r(/*! ./rc2 */585),r(/*! ./rsa */100),r(/*! ./util */16),void 0===i)var i=n.jsbn.BigInteger;var s=n.asn1,o=n.pki=n.pki||{};e.exports=o.pbe=n.pbe=n.pbe||{};var a=o.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},h={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function l(e,t){return e.start().update(t).digest().getBytes()}function f(e){var t;if(e){if(!(t=o.oids[s.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return d(t)}function d(e){var t=n.md;switch(e){case"hmacWithSHA224":t=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(t&&e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}o.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,c,u,h=n.random.getBytesSync(r.saltSize),l=r.count,f=s.integerToDer(l);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var p,A,g;switch(r.algorithm){case"aes128":i=16,p=16,A=a["aes128-CBC"],g=n.aes.createEncryptionCipher;break;case"aes192":i=24,p=16,A=a["aes192-CBC"],g=n.aes.createEncryptionCipher;break;case"aes256":i=32,p=16,A=a["aes256-CBC"],g=n.aes.createEncryptionCipher;break;case"des":i=8,p=8,A=a.desCBC,g=n.des.createEncryptionCipher;break;default:throw(v=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,v}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),m=d(y),_=n.pkcs5.pbkdf2(t,h,l,i,m),b=n.random.getBytesSync(p);(E=g(_)).start(b),E.update(s.toDer(e)),E.finish(),u=E.output.getBytes();var w=function(e,t,r,i){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,t.getBytes())]);"hmacWithSHA1"!==i&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[i]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]));return a}(h,f,i,y);c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBKDF2).getBytes()),w]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(A).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,b)])])])}else{var v;if("3des"!==r.algorithm)throw(v=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,v;i=24;var E,S=new n.util.ByteBuffer(h);_=o.pbe.generatePkcs12Key(t,S,1,l,i),b=o.pbe.generatePkcs12Key(t,S,2,l,i);(E=n.des.createEncryptionCipher(_)).start(b),E.update(s.toDer(e)),E.finish(),u=E.output.getBytes(),c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,h),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,f.getBytes())])])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[c,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,u)])},o.decryptPrivateKeyInfo=function(e,t){var r=null,i={},a=[];if(!s.validate(e,c,i,a)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}var h=s.derToOid(i.encryptionOid),l=o.pbe.getCipher(h,i.encryptionParams,t),f=n.util.createBuffer(i.encryptedData);return l.update(f),l.finish()&&(r=s.fromDer(l.output)),r},o.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},o.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(t.body)},o.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var i=o.wrapRsaPrivateKey(o.privateKeyToAsn1(e));return i=o.encryptPrivateKeyInfo(i,t,r),o.encryptedPrivateKeyToPem(i)}var a,c,u,h;switch(r.algorithm){case"aes128":a="AES-128-CBC",u=16,c=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",u=24,c=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",u=32,c=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",u=24,c=n.random.getBytesSync(8),h=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",u=8,c=n.random.getBytesSync(8),h=n.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var f=h(n.pbe.opensslDeriveBytes(t,c.substr(0,8),u));f.start(c),f.update(s.toDer(o.privateKeyToAsn1(e))),f.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(c).toUpperCase()},body:f.output.getBytes()};return n.pem.encode(d)},o.decryptRsaPrivateKey=function(e,t){var r=null,i=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw(u=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=u,u;if(i.procType&&"ENCRYPTED"===i.procType.type){var a,c;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,c=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,c=n.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,c=n.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,c=n.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,c=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,c=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":a=8,c=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":a=16,c=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:var u;throw(u=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".')).algorithm=i.dekInfo.algorithm,u}var h=n.util.hexToBytes(i.dekInfo.parameters),l=c(n.pbe.opensslDeriveBytes(t,h.substr(0,8),a));if(l.start(h),l.update(n.util.createBuffer(i.body)),!l.finish())return r;r=l.output.getBytes()}else r=i.body;return null!==(r="ENCRYPTED PRIVATE KEY"===i.type?o.decryptPrivateKeyInfo(s.fromDer(r),t):s.fromDer(r))&&(r=o.privateKeyFromAsn1(r)),r},o.pbe.generatePkcs12Key=function(e,t,r,i,s,o){var a,c;if(null==o){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');o=n.md.sha1.create()}var u=o.digestLength,h=o.blockLength,l=new n.util.ByteBuffer,f=new n.util.ByteBuffer;if(null!=e){for(c=0;c<e.length;c++)f.putInt16(e.charCodeAt(c));f.putInt16(0)}var d=f.length(),p=t.length(),A=new n.util.ByteBuffer;A.fillWithByte(r,h);var g=h*Math.ceil(p/h),y=new n.util.ByteBuffer;for(c=0;c<g;c++)y.putByte(t.at(c%p));var m=h*Math.ceil(d/h),_=new n.util.ByteBuffer;for(c=0;c<m;c++)_.putByte(f.at(c%d));var b=y;b.putBuffer(_);for(var w=Math.ceil(s/u),v=1;v<=w;v++){var E=new n.util.ByteBuffer;E.putBytes(A.bytes()),E.putBytes(b.bytes());for(var S=0;S<i;S++)o.start(),o.update(E.getBytes()),E=o.digest();var C=new n.util.ByteBuffer;for(c=0;c<h;c++)C.putByte(E.at(c%u));var k=Math.ceil(p/h)+Math.ceil(d/h),I=new n.util.ByteBuffer;for(a=0;a<k;a++){var T=new n.util.ByteBuffer(b.getBytes(h)),R=511;for(c=C.length()-1;c>=0;c--)R>>=8,R+=C.at(c)+T.at(c),T.setAt(c,255&R);I.putBuffer(T)}b=I,l.putBuffer(E)}return l.truncate(l.length()-s),l},o.pbe.getCipher=function(e,t,r){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,r);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},o.pbe.getCipherForPBES2=function(e,t,r){var i,a={},c=[];if(!s.validate(t,u,a,c))throw(i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=c,i;if((e=s.derToOid(a.kdfOid))!==o.oids.pkcs5PBKDF2)throw(i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,i.supportedOids=["pkcs5PBKDF2"],i;if((e=s.derToOid(a.encOid))!==o.oids["aes128-CBC"]&&e!==o.oids["aes192-CBC"]&&e!==o.oids["aes256-CBC"]&&e!==o.oids["des-EDE3-CBC"]&&e!==o.oids.desCBC)throw(i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i;var h,l,d=a.kdfSalt,p=n.util.createBuffer(a.kdfIterationCount);switch(p=p.getInt(p.length()<<3),o.oids[e]){case"aes128-CBC":h=16,l=n.aes.createDecryptionCipher;break;case"aes192-CBC":h=24,l=n.aes.createDecryptionCipher;break;case"aes256-CBC":h=32,l=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":h=24,l=n.des.createDecryptionCipher;break;case"desCBC":h=8,l=n.des.createDecryptionCipher}var A=f(a.prfOid),g=n.pkcs5.pbkdf2(r,d,p,h,A),y=a.encIv,m=l(g);return m.start(y),m},o.pbe.getCipherForPKCS12PBE=function(e,t,r){var i={},a=[];if(!s.validate(t,h,i,a))throw(A=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,A;var c,u,l,d=n.util.createBuffer(i.salt),p=n.util.createBuffer(i.iterations);switch(p=p.getInt(p.length()<<3),e){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,l=n.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,l=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var A;throw(A=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,A}var g=f(i.prfOid),y=o.pbe.generatePkcs12Key(r,d,1,p,c,g);return g.start(),l(y,o.pbe.generatePkcs12Key(r,d,2,p,u,g))},o.pbe.opensslDeriveBytes=function(e,t,r,i){if(null==i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===t&&(t="");for(var s=[l(i,e+t)],o=16,a=1;o<r;++a,o+=16)s.push(l(i,s[a-1]+e+t));return s.join("").substr(0,r)}},
/*!*****************************************************!*\
  !*** ./node_modules/async/internal/setImmediate.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.hasNextTick=t.hasSetImmediate=void 0,t.fallback=h,t.wrap=l;var i,s=r(/*! ./slice */76),o=(i=s)&&i.__esModule?i:{default:i};var a,c=t.hasSetImmediate="function"==typeof e&&e,u=t.hasNextTick="object"==typeof n&&"function"==typeof n.nextTick;function h(e){setTimeout(e,0)}function l(e){return function(t){var r=(0,o.default)(arguments,1);e((function(){t.apply(null,r)}))}}a=c?e:u?n.nextTick:h,t.default=l(a)}).call(this,r(/*! ./../../timers-browserify/main.js */41).setImmediate,r(/*! ./../../process/browser.js */2))},
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},
/*!*************************************************!*\
  !*** ./node_modules/stream-browserify/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=i;var n=r(/*! events */5).EventEmitter;function i(){n.call(this)}r(/*! inherits */3)(i,n),i.Readable=r(/*! readable-stream/readable.js */198),i.Writable=r(/*! readable-stream/writable.js */630),i.Duplex=r(/*! readable-stream/duplex.js */631),i.Transform=r(/*! readable-stream/transform.js */632),i.PassThrough=r(/*! readable-stream/passthrough.js */633),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function s(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",s),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",c));var o=!1;function a(){o||(o=!0,e.end())}function c(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(h(),0===n.listenerCount(this,"error"))throw e}function h(){r.removeListener("data",i),e.removeListener("drain",s),r.removeListener("end",a),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",h),r.removeListener("close",h),e.removeListener("close",h)}return r.on("error",u),e.on("error",u),r.on("end",h),r.on("close",h),e.on("close",h),e.emit("pipe",r),e}},
/*!****************************************************!*\
  !*** ./node_modules/process-nextick-args/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var s,o,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(s=new Array(a-1),o=0;o<s.length;)s[o++]=arguments[o];return t.nextTick((function(){e.apply(null,s)}))}}}:e.exports=t}).call(this,r(/*! ./../process/browser.js */2))},
/*!***************************************************!*\
  !*** ./node_modules/secp256k1/lib/js/bn/index.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! safe-buffer */6).Buffer,i=r(/*! ./optimized */643);function s(){this.negative=0,this.words=null,this.length=0}s.fromNumber=function(e){var t=new s;return t.words=[67108863&e],t.length=1,t},s.fromBuffer=function(e){var t=new s;return t.words=new Array(10),t.words[0]=(3&e[28])<<24|e[29]<<16|e[30]<<8|e[31],t.words[1]=(15&e[25])<<22|e[26]<<14|e[27]<<6|e[28]>>>2,t.words[2]=(63&e[22])<<20|e[23]<<12|e[24]<<4|e[25]>>>4,t.words[3]=(255&e[19])<<18|e[20]<<10|e[21]<<2|e[22]>>>6,t.words[4]=(3&e[15])<<24|e[16]<<16|e[17]<<8|e[18],t.words[5]=(15&e[12])<<22|e[13]<<14|e[14]<<6|e[15]>>>2,t.words[6]=(63&e[9])<<20|e[10]<<12|e[11]<<4|e[12]>>>4,t.words[7]=(255&e[6])<<18|e[7]<<10|e[8]<<2|e[9]>>>6,t.words[8]=(3&e[2])<<24|e[3]<<16|e[4]<<8|e[5],t.words[9]=e[0]<<14|e[1]<<6|e[2]>>>2,t.length=10,t.strip()},s.prototype.toBuffer=function(){for(var e=this.words,t=this.length;t<10;++t)e[t]=0;return n.from([e[9]>>>14&255,e[9]>>>6&255,(63&e[9])<<2|e[8]>>>24&3,e[8]>>>16&255,e[8]>>>8&255,255&e[8],e[7]>>>18&255,e[7]>>>10&255,e[7]>>>2&255,(3&e[7])<<6|e[6]>>>20&63,e[6]>>>12&255,e[6]>>>4&255,(15&e[6])<<4|e[5]>>>22&15,e[5]>>>14&255,e[5]>>>6&255,(63&e[5])<<2|e[4]>>>24&3,e[4]>>>16&255,e[4]>>>8&255,255&e[4],e[3]>>>18&255,e[3]>>>10&255,e[3]>>>2&255,(3&e[3])<<6|e[2]>>>20&63,e[2]>>>12&255,e[2]>>>4&255,(15&e[2])<<4|e[1]>>>22&15,e[1]>>>14&255,e[1]>>>6&255,(63&e[1])<<2|e[0]>>>24&3,e[0]>>>16&255,e[0]>>>8&255,255&e[0]])},s.prototype.clone=function(){var e=new s;e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];return e.length=this.length,e.negative=this.negative,e},s.prototype.strip=function(){for(;this.length>1&&0==(0|this.words[this.length-1]);)this.length--;return this},s.prototype.normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.ucmp=function(e){if(this.length!==e.length)return this.length>e.length?1:-1;for(var t=this.length-1;t>=0;--t)if(this.words[t]!==e.words[t])return this.words[t]>e.words[t]?1:-1;return 0},s.prototype.gtOne=function(){return this.length>1||this.words[0]>1},s.prototype.isOverflow=function(){return this.ucmp(s.n)>=0},s.prototype.isHigh=function(){return 1===this.ucmp(s.nh)},s.prototype.bitLengthGT256=function(){return this.length>10||10===this.length&&this.words[9]>4194303},s.prototype.iuaddn=function(e){this.words[0]+=e;for(var t=0;this.words[t]>67108863&&t<this.length;++t)this.words[t]-=67108864,this.words[t+1]+=1;return t===this.length&&(this.words[t]=1,this.length+=1),this},s.prototype.iadd=function(e){if(this.negative!==e.negative)return 0!==this.negative?(this.negative=0,this.isub(e),this.negative^=1):(e.negative=0,this.isub(e),e.negative=1),this.normSign();var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0,i=0;n<r.length;++n){var s=t.words[n]+r.words[n]+i;this.words[n]=67108863&s,i=s>>>26}for(;0!==i&&n<t.length;++n)s=t.words[n]+i,this.words[n]=67108863&s,i=s>>>26;if(this.length=t.length,0!==i)this.words[this.length++]=i;else if(t!==this)for(;n<t.length;++n)this.words[n]=t.words[n];return this},s.prototype.add=function(e){return this.clone().iadd(e)},s.prototype.isub=function(e){if(this.negative!==e.negative)return 0!==this.negative?(this.negative=0,this.iadd(e),this.negative=1):(e.negative=0,this.iadd(e),e.negative=1),this.normSign();var t,r,n=this.ucmp(e);if(0===n)return this.negative=0,this.words[0]=0,this.length=1,this;n>0?(t=this,r=e):(t=e,r=this);for(var i=0,s=0;i<r.length;++i){var o=t.words[i]-r.words[i]+s;s=o>>26,this.words[i]=67108863&o}for(;0!==s&&i<t.length;++i)s=(o=t.words[i]+s)>>26,this.words[i]=67108863&o;if(0===s&&i<t.length&&t!==this)for(;i<t.length;++i)this.words[i]=t.words[i];return this.length=Math.max(this.length,i),t!==this&&(this.negative^=1),this.strip().normSign()},s.prototype.sub=function(e){return this.clone().isub(e)},s.umulTo=function(e,t,r){r.length=e.length+t.length-1;var n=e.words[0]*t.words[0],i=n/67108864|0;r.words[0]=67108863&n;for(var s=1,o=r.length;s<o;s++){for(var a=i>>>26,c=67108863&i,u=Math.max(0,s-e.length+1),h=Math.min(s,t.length-1);u<=h;u++){var l=s-u,f=e.words[l]*t.words[u]+c;a+=f/67108864|0,c=67108863&f}r.words[s]=c,i=a}return 0!==i&&(r.words[r.length++]=i),r.strip()},s.umulTo10x10=Math.imul?i.umulTo10x10:s.umulTo,s.umulnTo=function(e,t,r){if(0===t)return r.words=[0],r.length=1,r;for(var n=0,i=0;n<e.length;++n){var s=e.words[n]*t+i;r.words[n]=67108863&s,i=s/67108864|0}return i>0?(r.words[n]=i,r.length=e.length+1):r.length=e.length,r},s.prototype.umul=function(e){var t=new s;return t.words=new Array(this.length+e.length),10===this.length&&10===e.length?s.umulTo10x10(this,e,t):1===this.length?s.umulnTo(e,this.words[0],t):1===e.length?s.umulnTo(this,e.words[0],t):s.umulTo(this,e,t)},s.prototype.isplit=function(e){e.length=Math.min(this.length,9);for(var t=0;t<e.length;++t)e.words[t]=this.words[t];if(this.length<=9)return this.words[0]=0,this.length=1,this;var r=this.words[9];for(e.words[e.length++]=4194303&r,t=10;t<this.length;++t){var n=this.words[t];this.words[t-10]=(4194303&n)<<4|r>>>22,r=n}return r>>>=22,this.words[t-10]=r,0===r&&this.length>10?this.length-=10:this.length-=9,this},s.prototype.fireduce=function(){return this.isOverflow()&&this.isub(s.n),this},s.prototype.ureduce=function(){var e=this.clone().isplit(s.tmp).umul(s.nc).iadd(s.tmp);return e.bitLengthGT256()&&(e=e.isplit(s.tmp).umul(s.nc).iadd(s.tmp)).bitLengthGT256()&&(e=e.isplit(s.tmp).umul(s.nc).iadd(s.tmp)),e.fireduce()},s.prototype.ishrn=function(e){for(var t=(1<<e)-1,r=26-e,n=this.length-1,i=0;n>=0;--n){var s=this.words[n];this.words[n]=i<<r|s>>>e,i=s&t}return this.length>1&&0===this.words[this.length-1]&&(this.length-=1),this},s.prototype.uinvm=function(){for(var e=this.clone(),t=s.n.clone(),r=s.fromNumber(1),n=s.fromNumber(0),i=s.fromNumber(0),o=s.fromNumber(1);e.isEven()&&t.isEven();){for(var a=1,c=1;0==(e.words[0]&c)&&0==(t.words[0]&c)&&a<26;++a,c<<=1);e.ishrn(a),t.ishrn(a)}for(var u=t.clone(),h=e.clone();!e.isZero();){for(var l=0,f=1;0==(e.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(e.ishrn(l);l-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(u),n.isub(h)),r.ishrn(1),n.ishrn(1);for(var d=0,p=1;0==(t.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(t.ishrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(h)),i.ishrn(1),o.ishrn(1);e.ucmp(t)>=0?(e.isub(t),r.isub(i),n.isub(o)):(t.isub(e),i.isub(r),o.isub(n))}if(1===i.negative){i.negative=0;var A=i.ureduce();return A.negative^=1,A.normSign().iadd(s.n)}return i.ureduce()},s.prototype.imulK=function(){this.words[this.length]=0,this.words[this.length+1]=0,this.length+=2;for(var e=0,t=0;e<this.length;++e){var r=0|this.words[e];t+=977*r,this.words[e]=67108863&t,t=64*r+(t/67108864|0)}return 0===this.words[this.length-1]&&(this.length-=1,0===this.words[this.length-1]&&(this.length-=1)),this},s.prototype.redIReduce=function(){this.isplit(s.tmp).imulK().iadd(s.tmp),this.bitLengthGT256()&&this.isplit(s.tmp).imulK().iadd(s.tmp);var e=this.ucmp(s.p);return 0===e?(this.words[0]=0,this.length=1):e>0?this.isub(s.p):this.strip(),this},s.prototype.redNeg=function(){return this.isZero()?s.fromNumber(0):s.p.sub(this)},s.prototype.redAdd=function(e){return this.clone().redIAdd(e)},s.prototype.redIAdd=function(e){return this.iadd(e),this.ucmp(s.p)>=0&&this.isub(s.p),this},s.prototype.redIAdd7=function(){return this.iuaddn(7),this.ucmp(s.p)>=0&&this.isub(s.p),this},s.prototype.redSub=function(e){return this.clone().redISub(e)},s.prototype.redISub=function(e){return this.isub(e),0!==this.negative&&this.iadd(s.p),this},s.prototype.redMul=function(e){return this.umul(e).redIReduce()},s.prototype.redSqr=function(){return this.umul(this).redIReduce()},s.prototype.redSqrt=function(){if(this.isZero())return this.clone();for(var e=this.redSqr(),t=e.redSqr(),r=t.redSqr().redMul(t),n=r.redMul(e),i=n.redMul(this),s=i,o=0;o<54;++o)s=s.redSqr().redSqr().redSqr().redSqr().redMul(i);for(s=s.redSqr().redSqr().redSqr().redSqr().redMul(n),o=0;o<5;++o)s=s.redSqr().redSqr().redSqr().redSqr().redMul(i);return 0===(s=(s=s.redSqr().redSqr().redSqr().redSqr().redMul(r)).redSqr().redSqr().redSqr().redSqr().redSqr().redSqr().redMul(r)).redSqr().ucmp(this)?s:null},s.prototype.redInvm=function(){for(var e,t=this.clone(),r=s.p.clone(),n=s.fromNumber(1),i=s.fromNumber(0);t.gtOne()&&r.gtOne();){for(var o=0,a=1;0==(t.words[0]&a)&&o<26;++o,a<<=1);if(o>0)for(t.ishrn(o);o-- >0;)n.isOdd()&&n.iadd(s.p),n.ishrn(1);for(var c=0,u=1;0==(r.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(r.ishrn(c);c-- >0;)i.isOdd()&&i.iadd(s.p),i.ishrn(1);t.ucmp(r)>=0?(t.isub(r),n.isub(i)):(r.isub(t),i.isub(n))}return 0!==(e=1===t.length&&1===t.words[0]?n:i).negative&&e.iadd(s.p),0!==e.negative?(e.negative=0,e.redIReduce().redNeg()):e.redIReduce()},s.prototype.getNAF=function(e){for(var t=[],r=1<<e+1,n=r-1,i=r>>1,s=this.clone();!s.isZero();){for(var o=0,a=1;0==(s.words[0]&a)&&o<26;++o,a<<=1)t.push(0);if(0!==o)s.ishrn(o);else{var c=s.words[0]&n;if(c>=i)t.push(i-c),s.iuaddn(c-i).ishrn(1);else if(t.push(c),s.words[0]-=c,!s.isZero()){for(o=e-1;o>0;--o)t.push(0);s.ishrn(e)}}}return t},s.prototype.inspect=function(){if(this.isZero())return"0";for(var e=this.toBuffer().toString("hex"),t=0;"0"===e[t];++t);return e.slice(t)},s.n=s.fromBuffer(n.from("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","hex")),s.nh=s.n.clone().ishrn(1),s.nc=s.fromBuffer(n.from("000000000000000000000000000000014551231950B75FC4402DA1732FC9BEBF","hex")),s.p=s.fromBuffer(n.from("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","hex")),s.psn=s.p.sub(s.n),s.tmp=new s,s.tmp.words=new Array(10),s.fromNumber(1).words[3]=0,e.exports=s},
/*!********************************************!*\
  !*** ./node_modules/browserify-aes/aes.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer;function i(e){n.isBuffer(e)||(e=n.from(e));for(var t=e.length/4|0,r=new Array(t),i=0;i<t;i++)r[i]=e.readUInt32BE(4*i);return r}function s(e){for(;0<e.length;e++)e[0]=0}function o(e,t,r,n,i){for(var s,o,a,c,u=r[0],h=r[1],l=r[2],f=r[3],d=e[0]^t[0],p=e[1]^t[1],A=e[2]^t[2],g=e[3]^t[3],y=4,m=1;m<i;m++)s=u[d>>>24]^h[p>>>16&255]^l[A>>>8&255]^f[255&g]^t[y++],o=u[p>>>24]^h[A>>>16&255]^l[g>>>8&255]^f[255&d]^t[y++],a=u[A>>>24]^h[g>>>16&255]^l[d>>>8&255]^f[255&p]^t[y++],c=u[g>>>24]^h[d>>>16&255]^l[p>>>8&255]^f[255&A]^t[y++],d=s,p=o,A=a,g=c;return s=(n[d>>>24]<<24|n[p>>>16&255]<<16|n[A>>>8&255]<<8|n[255&g])^t[y++],o=(n[p>>>24]<<24|n[A>>>16&255]<<16|n[g>>>8&255]<<8|n[255&d])^t[y++],a=(n[A>>>24]<<24|n[g>>>16&255]<<16|n[d>>>8&255]<<8|n[255&p])^t[y++],c=(n[g>>>24]<<24|n[d>>>16&255]<<16|n[p>>>8&255]<<8|n[255&A])^t[y++],[s>>>=0,o>>>=0,a>>>=0,c>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],n=[],i=[[],[],[],[]],s=[[],[],[],[]],o=0,a=0,c=0;c<256;++c){var u=a^a<<1^a<<2^a<<3^a<<4;u=u>>>8^255&u^99,r[o]=u,n[u]=o;var h=e[o],l=e[h],f=e[l],d=257*e[u]^16843008*u;i[0][o]=d<<24|d>>>8,i[1][o]=d<<16|d>>>16,i[2][o]=d<<8|d>>>24,i[3][o]=d,d=16843009*f^65537*l^257*h^16843008*o,s[0][u]=d<<24|d>>>8,s[1][u]=d<<16|d>>>16,s[2][u]=d<<8|d>>>24,s[3][u]=d,0===o?o=a=1:(o=h^e[e[e[f^h]]],a^=e[e[a]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:s}}();function u(e){this._key=i(e),this._reset()}u.blockSize=16,u.keySize=32,u.prototype.blockSize=u.blockSize,u.prototype.keySize=u.keySize,u.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,n=4*(r+1),i=[],s=0;s<t;s++)i[s]=e[s];for(s=t;s<n;s++){var o=i[s-1];s%t==0?(o=o<<8|o>>>24,o=c.SBOX[o>>>24]<<24|c.SBOX[o>>>16&255]<<16|c.SBOX[o>>>8&255]<<8|c.SBOX[255&o],o^=a[s/t|0]<<24):t>6&&s%t==4&&(o=c.SBOX[o>>>24]<<24|c.SBOX[o>>>16&255]<<16|c.SBOX[o>>>8&255]<<8|c.SBOX[255&o]),i[s]=i[s-t]^o}for(var u=[],h=0;h<n;h++){var l=n-h,f=i[l-(h%4?0:4)];u[h]=h<4||l<=4?f:c.INV_SUB_MIX[0][c.SBOX[f>>>24]]^c.INV_SUB_MIX[1][c.SBOX[f>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[f>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&f]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=u},u.prototype.encryptBlockRaw=function(e){return o(e=i(e),this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},u.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),r=n.allocUnsafe(16);return r.writeUInt32BE(t[0],0),r.writeUInt32BE(t[1],4),r.writeUInt32BE(t[2],8),r.writeUInt32BE(t[3],12),r},u.prototype.decryptBlock=function(e){var t=(e=i(e))[1];e[1]=e[3],e[3]=t;var r=o(e,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),s=n.allocUnsafe(16);return s.writeUInt32BE(r[0],0),s.writeUInt32BE(r[3],4),s.writeUInt32BE(r[2],8),s.writeUInt32BE(r[1],12),s},u.prototype.scrub=function(){s(this._keySchedule),s(this._invKeySchedule),s(this._key)},e.exports.AES=u},
/*!*********************************************************!*\
  !*** ./node_modules/datastore-core/src/keytransform.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! interface-datastore */14).utils.map;e.exports=class{constructor(e,t){this.child=e,this.transform=t}open(){return this.child.open()}put(e,t){return this.child.put(this.transform.convert(e),t)}get(e){return this.child.get(this.transform.convert(e))}has(e){return this.child.has(this.transform.convert(e))}delete(e){return this.child.delete(this.transform.convert(e))}batch(){const e=this.child.batch();return{put:(t,r)=>{e.put(this.transform.convert(t),r)},delete:t=>{e.delete(this.transform.convert(t))},commit:()=>e.commit()}}query(e){return n(this.child.query(e),e=>(e.key=this.transform.invert(e.key),e))}close(){return this.child.close()}}},
/*!******************************************!*\
  !*** ./node_modules/base32.js/base32.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=function(e,t){return t||(t={}),e.split("").forEach((function(e,r){e in t||(t[e]=r)})),t},i={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",charmap:{0:14,1:8}};i.charmap=n(i.alphabet,i.charmap);var s={alphabet:"0123456789ABCDEFGHJKMNPQRSTVWXYZ",charmap:{O:0,I:1,L:1}};s.charmap=n(s.alphabet,s.charmap);var o={alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",charmap:{}};function a(e){if(this.buf=[],this.shift=8,this.carry=0,e){switch(e.type){case"rfc4648":this.charmap=t.rfc4648.charmap;break;case"crockford":this.charmap=t.crockford.charmap;break;case"base32hex":this.charmap=t.base32hex.charmap;break;default:throw new Error("invalid type")}e.charmap&&(this.charmap=e.charmap)}}function c(e){if(this.buf="",this.shift=3,this.carry=0,e){switch(e.type){case"rfc4648":this.alphabet=t.rfc4648.alphabet;break;case"crockford":this.alphabet=t.crockford.alphabet;break;case"base32hex":this.alphabet=t.base32hex.alphabet;break;default:throw new Error("invalid type")}e.alphabet?this.alphabet=e.alphabet:e.lc&&(this.alphabet=this.alphabet.toLowerCase())}}o.charmap=n(o.alphabet,o.charmap),a.prototype.charmap=i.charmap,a.prototype.write=function(e){var t=this.charmap,r=this.buf,n=this.shift,i=this.carry;return e.toUpperCase().split("").forEach((function(e){if("="!=e){var s=255&t[e];(n-=5)>0?i|=s<<n:n<0?(r.push(i|s>>-n),i=s<<(n+=8)&255):(r.push(i|s),n=8,i=0)}})),this.shift=n,this.carry=i,this},a.prototype.finalize=function(e){return e&&this.write(e),8!==this.shift&&0!==this.carry&&(this.buf.push(this.carry),this.shift=8,this.carry=0),this.buf},c.prototype.alphabet=i.alphabet,c.prototype.write=function(e){var t,r,n,i=this.shift,s=this.carry;for(n=0;n<e.length;n++)t=s|(r=e[n])>>i,this.buf+=this.alphabet[31&t],i>5&&(t=r>>(i-=5),this.buf+=this.alphabet[31&t]),s=r<<(i=5-i),i=8-i;return this.shift=i,this.carry=s,this},c.prototype.finalize=function(e){return e&&this.write(e),3!==this.shift&&(this.buf+=this.alphabet[31&this.carry],this.shift=3,this.carry=0),this.buf},t.encode=function(e,t){return new c(t).finalize(e)},t.decode=function(e,t){return new a(t).finalize(e)},t.Decoder=a,t.Encoder=c,t.charmap=n,t.crockford=s,t.rfc4648=i,t.base32hex=o},
/*!***************************************************!*\
  !*** ./node_modules/datastore-level/src/index.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const{Key:n,Errors:i,utils:s}=r(/*! interface-datastore */14),{filter:o,map:a,take:c,sortAll:u}=s;e.exports=class{constructor(e,t){let n;t&&t.db?(n=t.db,delete t.db):n=r(/*! level */702),this.db=n(e,{...t,valueEncoding:"binary",compression:!1})}async open(){try{await this.db.open()}catch(e){throw i.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(e){throw i.dbWriteFailedError(e)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(e){if(e.notFound)throw i.notFoundError(e);throw i.dbWriteFailedError(e)}return t}async has(e){try{await this.db.get(e.toString())}catch(e){if(e.notFound)return!1;throw e}return!0}async delete(e){try{await this.db.del(e.toString())}catch(e){throw i.dbDeleteFailedError(e)}}close(){return this.db.close()}batch(){const e=[];return{put:(t,r)=>{e.push({type:"put",key:t.toString(),value:r})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let r=!0;null!=e.keysOnly&&(r=!e.keysOnly);let i=(s=this.db.db.iterator({keys:!0,values:r,keyAsBuffer:!0}),{next:()=>new Promise((e,t)=>{s.next((r,n,i)=>r?t(r):null==n?e({done:!0}):void e({done:!1,value:{key:n,value:i}}))}),return:()=>new Promise((e,t)=>{s.end(r=>{if(r)return t(r);e({done:!0})})}),[Symbol.asyncIterator](){return this}});var s;if(i=a(i,({key:e,value:i})=>{const s={key:new n(e,!1)};return r&&(s.value=t.from(i)),s}),null!=e.prefix&&(i=o(i,t=>t.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(i=e.filters.reduce((e,t)=>o(e,t),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((e,t)=>u(e,t),i)),null!=e.offset){let t=0;i=o(i,()=>t++>=e.offset)}return null!=e.limit&&(i=c(i,e.limit)),i}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************!*\
  !*** ./node_modules/levelup/lib/common.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){t.getCallback=function(e,t){return"function"==typeof e?e:t},t.getOptions=function(e){return"object"==typeof e&&null!==e?e:{}}},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/aes.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);function i(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.aes.Algorithm(e,t)}))}r(/*! ./cipher */373),r(/*! ./cipherModes */374),r(/*! ./util */20),e.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(e,t,r,n){var i=A({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},n.aes.createEncryptionCipher=function(e,t){return A({key:e,output:null,decrypt:!1,mode:t})},n.aes.startDecrypting=function(e,t,r,n){var i=A({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},n.aes.createDecryptionCipher=function(e,t){return A({key:e,output:null,decrypt:!0,mode:t})},n.aes.Algorithm=function(e,t){h||f();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return p(r._w,e,t,!1)},decrypt:function(e,t){return p(r._w,e,t,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=n.util.createBuffer();for(var i=0;i<t.length;++i)r.putByte(t[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){t=r,r=[];var s=t.length();if(16===s||24===s||32===s){s>>>=2;for(i=0;i<s;++i)r.push(t.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=d(r,e.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(e,t){return h||f(),d(e,t)},n.aes._updateBlock=p,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var s,o,a,c,u,h=!1,l=4;function f(){h=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;s=new Array(256),o=new Array(256),c=new Array(4),u=new Array(4);for(t=0;t<4;++t)c[t]=new Array(256),u[t]=new Array(256);var r,n,i,l,f,d,p,A=0,g=0;for(t=0;t<256;++t){l=(l=g^g<<1^g<<2^g<<3^g<<4)>>8^255&l^99,s[A]=l,o[l]=A,d=(f=e[l])<<24^l<<16^l<<8^l^f,p=((r=e[A])^(n=e[r])^(i=e[n]))<<24^(A^i)<<16^(A^n^i)<<8^A^r^i;for(var y=0;y<4;++y)c[y][A]=d,u[y][l]=p,d=d<<24|d>>>8,p=p<<24|p>>>8;0===A?A=g=1:(A=r^e[e[e[r^i]]],g^=e[e[g]])}}function d(e,t){for(var r,n=e.slice(0),i=1,o=n.length,c=l*(o+6+1),h=o;h<c;++h)r=n[h-1],h%o==0?(r=s[r>>>16&255]<<24^s[r>>>8&255]<<16^s[255&r]<<8^s[r>>>24]^a[i]<<24,i++):o>6&&h%o==4&&(r=s[r>>>24]<<24^s[r>>>16&255]<<16^s[r>>>8&255]<<8^s[255&r]),n[h]=n[h-o]^r;if(t){for(var f,d=u[0],p=u[1],A=u[2],g=u[3],y=n.slice(0),m=(h=0,(c=n.length)-l);h<c;h+=l,m-=l)if(0===h||h===c-l)y[h]=n[m],y[h+1]=n[m+3],y[h+2]=n[m+2],y[h+3]=n[m+1];else for(var _=0;_<l;++_)f=n[m+_],y[h+(3&-_)]=d[s[f>>>24]]^p[s[f>>>16&255]]^A[s[f>>>8&255]]^g[s[255&f]];n=y}return n}function p(e,t,r,n){var i,a,h,l,f,d,p,A,g,y,m,_,b=e.length/4-1;n?(i=u[0],a=u[1],h=u[2],l=u[3],f=o):(i=c[0],a=c[1],h=c[2],l=c[3],f=s),d=t[0]^e[0],p=t[n?3:1]^e[1],A=t[2]^e[2],g=t[n?1:3]^e[3];for(var w=3,v=1;v<b;++v)y=i[d>>>24]^a[p>>>16&255]^h[A>>>8&255]^l[255&g]^e[++w],m=i[p>>>24]^a[A>>>16&255]^h[g>>>8&255]^l[255&d]^e[++w],_=i[A>>>24]^a[g>>>16&255]^h[d>>>8&255]^l[255&p]^e[++w],g=i[g>>>24]^a[d>>>16&255]^h[p>>>8&255]^l[255&A]^e[++w],d=y,p=m,A=_;r[0]=f[d>>>24]<<24^f[p>>>16&255]<<16^f[A>>>8&255]<<8^f[255&g]^e[++w],r[n?3:1]=f[p>>>24]<<24^f[A>>>16&255]<<16^f[g>>>8&255]<<8^f[255&d]^e[++w],r[2]=f[A>>>24]<<24^f[g>>>16&255]<<16^f[d>>>8&255]<<8^f[255&p]^e[++w],r[n?1:3]=f[g>>>24]<<24^f[d>>>16&255]<<16^f[p>>>8&255]<<8^f[255&A]^e[++w]}function A(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var s=null;r instanceof n.util.ByteBuffer&&(s=r,r={}),(r=r||{}).output=s,r.iv=e,i.call(t,r)},t}},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/types/message/index.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! protons */28),i=r(/*! ipfs-block */97),s=r(/*! lodash.isequalwith */768),o=r(/*! cids */4),a=r(/*! multicodec/src/name-table */278),c=r(/*! varint-decoder */769),u=r(/*! multihashing-async */770),h=n(r(/*! ./message.proto */776)),l=r(/*! ./entry */777);class f{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map}get empty(){return 0===this.blocks.size&&0===this.wantlist.size}addEntry(e,t,r){const n=e.toString("base58btc"),i=this.wantlist.get(n);i?(i.priority=t,i.cancel=Boolean(r)):this.wantlist.set(n,new l(e,t,r))}addBlock(e){const t=e.cid.toString("base58btc");this.blocks.set(t,e)}cancel(e){const t=e.toString("base58btc");this.wantlist.delete(t),this.addEntry(e,0,!0)}serializeToBitswap100(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map(e=>({block:e.cid.buffer,priority:Number(e.priority),cancel:Boolean(e.cancel)}))},blocks:Array.from(this.blocks.values()).map(e=>e.data)};return this.full&&(e.wantlist.full=!0),h.Message.encode(e)}serializeToBitswap110(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map(e=>({block:e.cid.buffer,priority:Number(e.priority),cancel:Boolean(e.cancel)}))},payload:[]};return this.full&&(e.wantlist.full=!0),this.blocks.forEach(t=>{e.payload.push({prefix:t.cid.prefix,data:t.data})}),h.Message.encode(e)}equals(e){const t=(e,t)=>{if(e.equals&&"function"==typeof e.equals)return e.equals(t)};return!(this.full!==e.full||!s(this.wantlist,e.wantlist,t)||!s(this.blocks,e.blocks,t))}get[Symbol.toStringTag](){const e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${t}>`}}f.deserialize=async e=>{const t=h.Message.decode(e),r=t.wantlist&&t.wantlist.full||!1,n=new f(r);return t.wantlist&&t.wantlist.entries.forEach(e=>{const t=new o(e.block);n.addEntry(t,e.priority,e.cancel)}),t.blocks.length>0?(await Promise.all(t.blocks.map(async e=>{const t=await u(e,"sha2-256"),r=new o(t);n.addBlock(new i(e,r))})),n):t.payload.length>0?(await Promise.all(t.payload.map(async e=>{if(!e.prefix||!e.data)return;const t=c(e.prefix),r=t[0],s=t[1],h=t[2],l=await u(e.data,h),f=new o(r,a[s.toString("16")],l);n.addBlock(new i(e.data,f))})),n):n},f.Entry=l,e.exports=f},
/*!***************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/types/wantlist/index.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{sortBy:n}=r(/*! ../../utils */63),i=r(/*! ./entry */778);class s{constructor(e){this.set=new Map,this._stats=e}get length(){return this.set.size}add(e,t){const r=e.toString("base58btc"),n=this.set.get(r);n?(n.inc(),n.priority=t):(this.set.set(r,new i(e,t)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){const t=e.toString("base58btc"),r=this.set.get(t);r&&(r.dec(),r.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(n(e=>e[1].key,Array.from(this.set.entries())))}contains(e){const t=e.toString("base58btc");return this.set.get(t)}}s.Entry=i,e.exports=s},
/*!*****************************************************!*\
  !*** ./node_modules/pull-stream/throughs/filter.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ../util/tester */382);e.exports=function(e){return e=n(e),function(t){return function r(n,i){for(var s,o=!0;o;)o=!1,s=!0,t(n,(function(t,n){if(!t&&!e(n))return s?o=!0:r(t,i);i(t,n)})),s=!1}}}},
/*!********************************************!*\
  !*** ./node_modules/buffer-split/index.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! buffer-indexof */819);e.exports=function(e,t,r){for(var i=-1,s=[],o=r?t.length:0;(i=n(e,t))>-1;)s.push(e.slice(0,i+o)),e=e.slice(i+t.length,e.length);return s.push(e),s}},
/*!******************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/utils/module-config.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./default-config */224),i=r(/*! ./send-request */827),s=r(/*! multiaddr */15);e.exports=e=>{const t=n();if("function"==typeof e)return e;if("object"==typeof e)return i(e);if("string"==typeof e){const r=s(e).nodeAddress();return t.host=r.address,t.port=r.port,i(t)}throw new Error("Argument must be a send function or a config object.")}},
/*!********************************************************************!*\
  !*** ./node_modules/ipfs-http-client/node_modules/qs/lib/utils.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var s=t[n],o=s.obj[s.prop],a=Object.keys(o),c=0;c<a.length;++c){var u=a[c],h=o[u];"object"==typeof h&&null!==h&&-1===r.indexOf(h)&&(t.push({obj:o,prop:u}),r.push(h))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],s=0;s<r.length;++s)void 0!==r[s]&&n.push(r[s]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n=e;if("symbol"==typeof e?n=Symbol.prototype.toString.call(e):"string"!=typeof e&&(n=String(e)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var i="",o=0;o<n.length;++o){var a=n.charCodeAt(o);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?i+=n.charAt(o):a<128?i+=s[a]:a<2048?i+=s[192|a>>6]+s[128|63&a]:a<55296||a>=57344?i+=s[224|a>>12]+s[128|a>>6&63]+s[128|63&a]:(o+=1,a=65536+((1023&a)<<10|1023&n.charCodeAt(o)),i+=s[240|a>>18]+s[128|a>>12&63]+s[128|a>>6&63]+s[128|63&a])}return i},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,s){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(s&&(s.plainObjects||s.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return i(t)&&!i(r)&&(a=o(t,s)),i(t)&&i(r)?(r.forEach((function(r,i){if(n.call(t,i)){var o=t[i];o&&"object"==typeof o&&r&&"object"==typeof r?t[i]=e(o,r,s):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var o=r[i];return n.call(t,i)?t[i]=e(t[i],o,s):t[i]=o,t}),a)}}},
/*!************************************!*\
  !*** ./node_modules/async/each.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){(0,n.default)(e,(0,i.default)((0,s.default)(t)),r)};var n=o(r(/*! ./eachOf */227)),i=o(r(/*! ./internal/withoutIndex */409)),s=o(r(/*! ./internal/wrapAsync */33));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!********************************************!*\
  !*** ./node_modules/lodash/_baseGetTag.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_Symbol */229),i=r(/*! ./_getRawTag */858),s=r(/*! ./_objectToString */859),o="[object Null]",a="[object Undefined]",c=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?a:o:c&&c in Object(e)?i(e):s(e)}},
/*!**************************************!*\
  !*** ./node_modules/lodash/_root.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_freeGlobal */405),i="object"==typeof self&&self&&self.Object===Object&&self,s=n||i||Function("return this")();e.exports=s},
/*!*********************************************!*\
  !*** ./node_modules/lodash/isObjectLike.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},
/*!*****************************************************!*\
  !*** ./node_modules/multistream-select/src/util.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n){const i=r(/*! pull-stream/pull */17),s=r(/*! pull-stream/sources/values */55),o=r(/*! pull-stream/sinks/collect */85),a=r(/*! pull-length-prefixed */30),c=r(/*! debug */1);function u(e){const t=(~~(1e9*Math.random())).toString(36);function r(e){return r=>{Array.isArray(r)&&(r=r.join(" ")),e("(%s) %s",t,r)}}const n=r(c("mss:"+e));return n.error=r(c("mss:"+e+":error")),n}(t=e.exports).writeEncoded=(e,t,r)=>{!function(e,t){i(s(n.isBuffer(e)?[e]:[n.from(e)]),a.encode(),o((e,r)=>{if(e)return t(e);t(null,r[0])}))}(t,(t,n)=>{if(t)return r(t);e.write(n)})},t.log={},t.log.dialer=()=>u("dialer\t"),t.log.listener=()=>u("listener\t")}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************************!*\
  !*** ./node_modules/multistream-select/src/constants.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(t=e.exports).PROTOCOL_ID="/multistream/1.0.0",t.errors={MULTICODEC_NOT_SUPPORTED:"ERR_MULTICODEC_NOT_SUPPORTED"}},
/*!***************************************!*\
  !*** ./node_modules/parseqs/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){t.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){for(var t={},r=e.split("&"),n=0,i=r.length;n<i;n++){var s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}},
/*!*************************************************!*\
  !*** ./node_modules/component-inherit/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},
/*!***************************************!*\
  !*** ./node_modules/async/timeout.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var s=(0,i.default)(e);return(0,n.default)((function(n,i){var o,a=!1;n.push((function(){a||(i.apply(null,arguments),clearTimeout(o))})),o=setTimeout((function(){var t=e.name||"anonymous",n=new Error('Callback function "'+t+'" timed out.');n.code="ETIMEDOUT",r&&(n.info=r),a=!0,i(n)}),t),s.apply(null,n)}))};var n=s(r(/*! ./internal/initialParams */330)),i=s(r(/*! ./internal/wrapAsync */33));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!**************************************************!*\
  !*** ./node_modules/libp2p/src/get-peer-info.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! peer-id */7),i=r(/*! peer-info */21),s=r(/*! multiaddr */15),o=r(/*! err-code */8);function a(e,t){let r;if("string"==typeof e&&(e=s(e)),s.isMultiaddr(e)){r=e;try{e=n.createFromB58String(e.getPeerId())}catch(t){throw o(new Error(`${e} is not a valid peer type`),"ERR_INVALID_MULTIADDR")}}return n.isPeerId(e)&&(e=new i(e)),r&&e.multiaddrs.add(r),t?t.put(e):e}e.exports={getPeerInfoRemote:function(e,t){let r;try{r=a(e,t.peerBook)}catch(t){return Promise.reject(o(new Error(`${e} is not a valid peer type`),"ERR_INVALID_PEER_TYPE"))}return r.multiaddrs.size<1?t.peerRouting.findPeer(r.id):Promise.resolve(r)},getPeerInfo:a}},
/*!**************************************************!*\
  !*** ./node_modules/libp2p/src/switch/errors.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */8);e.exports={CONNECTION_FAILED:e=>n(e,"CONNECTION_FAILED"),DIAL_ABORTED:()=>n("Dial was aborted","DIAL_ABORTED"),ERR_DENIED:()=>n("Dial is currently denied for this peer","ERR_DENIED"),DIAL_SELF:()=>n("A node cannot dial itself","DIAL_SELF"),INVALID_STATE_TRANSITION:e=>n(e,"INVALID_STATE_TRANSITION"),NO_TRANSPORTS_REGISTERED:()=>n("No transports registered, dial not possible","NO_TRANSPORTS_REGISTERED"),PROTECTOR_REQUIRED:()=>n("No protector provided with private network enforced","PROTECTOR_REQUIRED"),UNEXPECTED_END:()=>n("Unexpected end of input from reader.","UNEXPECTED_END"),maybeUnexpectedEnd:t=>!0===t?e.exports.UNEXPECTED_END():t}},
/*!**********************************************!*\
  !*** ./node_modules/lodash/_nativeCreate.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_getNative */450)(Object,"create");e.exports=n},
/*!**********************************************!*\
  !*** ./node_modules/lodash/_assocIndexOf.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./eq */1081);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},
/*!********************************************!*\
  !*** ./node_modules/lodash/_getMapData.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_isKeyable */1087);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},
/*!**********************************!*\
  !*** ./node_modules/ky/index.js ***!
  \**********************************/
/*! exports provided: default, HTTPError, TimeoutError */
/*! exports used: HTTPError, TimeoutError, default */
/*! ModuleConcatenation bailout: Module uses injected variables (global) */function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return A}));
/*! MIT License © Sindre Sorhus */
const n={};{const t=t=>{let r;if("undefined"!=typeof self&&self&&t in self&&(r=self),"undefined"!=typeof window&&window&&t in window&&(r=window),void 0!==e&&e&&t in e&&(r=e),"undefined"!=typeof globalThis&&globalThis&&(r=globalThis),void 0===r)return;const n=r[t];return"function"==typeof n?n.bind(r):n},r=["document","Headers","Request","Response","ReadableStream","fetch","AbortController","FormData"],i={};for(const e of r)i[e]={get:()=>t(e)};Object.defineProperties(n,i)}const i=e=>null!==e&&"object"==typeof e,s="function"==typeof n.AbortController,o="function"==typeof n.ReadableStream,a="function"==typeof n.FormData,c=(...e)=>{let t={};for(const r of e)if(Array.isArray(r))Array.isArray(t)||(t=[]),t=[...t,...r];else if(i(r))for(let[e,n]of Object.entries(r))i(n)&&Reflect.has(t,e)&&(n=c(t[e],n)),t={...t,[e]:n};return t},u=["get","post","put","patch","head","delete"],h={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},l=new Set(["get","put","head","delete","options","trace"]),f=new Set([408,413,429,500,502,503,504]),d=new Set([413,429,503]);class p extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}class A extends Error{constructor(){super("Request timed out"),this.name="TimeoutError"}}const g=(e,t,r)=>(r>2147483647&&t(new RangeError("The `timeout` option cannot be greater than 2147483647")),setTimeout(e,r)),y=e=>new Promise((t,r)=>g(t,r,e)),m=(e,t,r)=>new Promise((n,i)=>{const o=g(()=>{s&&r.abort(),i(new A)},i,t);e.then(n).catch(i).then(()=>{clearTimeout(o)})}),_=e=>u.includes(e)?e.toUpperCase():e,b={limit:2,methods:l,statusCodes:f,afterStatusCodes:d},w=e=>{if("number"==typeof e)return{...b,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...b,...e,methods:e.methods?new Set(e.methods):b.methods,statusCodes:e.statusCodes?new Set(e.statusCodes):b.statusCodes,afterStatusCodes:d}};class v{constructor(e,{timeout:t=1e4,hooks:r,throwHttpErrors:i=!0,searchParams:u,json:l,retry:f={},...d}){if(this._retryCount=0,this._options={method:"get",credentials:"same-origin",retry:w(f),...d},e instanceof n.Request)this._input=e,this._options={...this._options,method:d.method||e.method,headers:d.headers||e.headers,body:d.body||e.body,credentials:d.credentials||e.credentials};else{if(this._input=String(e||""),this._options.prefixUrl=String(this._options.prefixUrl||""),this._options.prefixUrl&&this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");if(this._options.prefixUrl&&!this._options.prefixUrl.endsWith("/")&&(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input,u){const e=new URL(this._input,n.document&&n.document.baseURI);if("string"==typeof u||URLSearchParams&&u instanceof URLSearchParams)e.search=u;else{if(!Object.values(u).every(e=>"number"==typeof e||"string"==typeof e))throw new Error("The `searchParams` option must be either a string, `URLSearchParams` instance or an object with string and number values");e.search=new URLSearchParams(u).toString()}this._input=e.toString()}}s&&(this.abortController=new n.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",()=>{this.abortController.abort()}),this._options.signal=this.abortController.signal),this._options.method=_(this._options.method),this._timeout=t,this._hooks=c({beforeRequest:[],beforeRetry:[],afterResponse:[]},r),this._throwHttpErrors=i;const A=new n.Headers(this._options.headers||{});if((a&&this._options.body instanceof n.FormData||this._options.body instanceof URLSearchParams)&&A.has("content-type"))throw new Error(`The \`content-type\` header cannot be used with a ${this._options.body.constructor.name} body. It will be set automatically.`);if(l){if(this._options.body)throw new Error("The `json` option cannot be used with the `body` option");A.set("content-type","application/json"),this._options.body=JSON.stringify(l)}this._options.headers=A;const g=async()=>{await y(1);let e=await this._fetch();for(const t of this._hooks.afterResponse){const r=await t(this._input,this._options,e.clone());r instanceof n.Response&&(e=r)}if(!e.ok&&this._throwHttpErrors)throw new p(e);if(this._options.onDownloadProgress){if("function"!=typeof this._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!o)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return this._stream(e.clone(),this._options.onDownloadProgress)}return e},m=this._options.retry.methods.has(this._options.method.toLowerCase())?this._retry(g):g();for(const[e,t]of Object.entries(h))m[e]=async()=>(A.set("accept",t),(await m).clone()[e]());return m}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof A)){if(e instanceof p){if(!this._options.retry.statusCodes.has(e.response.status))return 0;const t=e.response.headers.get("Retry-After");if(t&&this._options.retry.afterStatusCodes.has(e.response.status)){let e=Number(t);return Number.isNaN(e)?e=Date.parse(t)-Date.now():e*=1e3,void 0!==this._options.retry.maxRetryAfter&&e>this._options.retry.maxRetryAfter?0:e}if(413===e.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}async _retry(e){try{return await e()}catch(t){const r=this._calculateRetryDelay(t);if(0!==r&&this._retryCount>0){await y(r);for(const e of this._hooks.beforeRetry)await e(this._input,this._options,t,this._retryCount);return this._retry(e)}if(this._throwHttpErrors)throw t}}async _fetch(){for(const e of this._hooks.beforeRequest){const t=await e(this._input,this._options);if(t instanceof Response)return t}return!1===this._timeout?n.fetch(this._input,this._options):m(n.fetch(this._input,this._options),this._timeout,this.abortController)}_stream(e,t){const r=Number(e.headers.get("content-length"))||0;let i=0;return new n.Response(new n.ReadableStream({start(n){const s=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),async function e(){const{done:o,value:a}=await s.read();if(o)n.close();else{if(t){i+=a.byteLength,t({percent:0===r?0:i/r,transferredBytes:i,totalBytes:r},a)}n.enqueue(a),e()}}()}}))}}const E=(...e)=>{for(const t of e)if((!i(t)||Array.isArray(t))&&void 0!==t)throw new TypeError("The `options` argument must be an object");return c({},...e)},S=e=>{const t=(t,r)=>new v(t,E(e,r));for(const r of u)t[r]=(t,n)=>new v(t,E(e,n,{method:r}));return t.create=e=>S(E(e)),t.extend=t=>S(E(e,t)),t};t.c=S()}).call(this,r(/*! ./../webpack/buildin/global.js */10))},
/*!****************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/utils/persist.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multihashes */13),i=r(/*! multicodec */27);e.exports=(e,t,r)=>{!r.codec&&e.length&&(r.cidVersion=1,r.codec="raw"),isNaN(r.hashAlg)&&(r.hashAlg=n.names[r.hashAlg]),r.hashAlg!==n.names["sha2-256"]&&(r.cidVersion=1),r.format&&(r.codec=r.format);const s=i[r.codec.toUpperCase().replace(/-/g,"_")];return t.put(e,s,r)}},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/dir-sharded.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const{DAGLink:n,DAGNode:i}=r(/*! ipld-dag-pb */29),s=r(/*! ipfs-unixfs */39),o=r(/*! multihashing-async */98),a=r(/*! ./dir */258),c=r(/*! ./utils/persist */167),u=r(/*! hamt-sharding */1160),h=r(/*! deep-extend */1164),l=async function(e){const r=(await o(t.from(e,"utf8"),"murmur3-128")).slice(2,10),n=r.length,i=t.alloc(n);for(let e=0;e<n;e++)i[n-e-1]=r[e];return i};l.code=34;const f={hashFn:l};e.exports=class extends a{constructor(e,t){super(e,t=h({},f,t)),this._bucket=u(t)}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e,r){for await(const o of async function*e(r,o,a,h){const l=o._children;const f=[];for(let t=0;t<l.length;t++){const r=l.get(t);if(!r)continue;const i=t.toString(16).toUpperCase().padStart(2,"0");if(u.isBucket(r)){let t;for await(const n of await e("",r,a,h))t=n;f.push(new n(i,t.node.size,t.cid))}else if("function"==typeof r.value.flush){const e=r.value;let t;for await(const r of e.flush(e.path,a))t=r,yield t;const s=i+r.key;f.push(new n(s,t.node.size,t.cid))}else{const e=r.value;if(!e.node){if(!e.cid)continue;e.node=await a.get(e.cid)}const t=i+r.key,s=e.node.length||e.node.size||e.node.Size;f.push(new n(t,s,e.cid))}}const d=t.from(l.bitField().reverse());const p=new s("hamt-sharded-directory",d);p.fanout=o.tableSize();p.hashType=h.hashFn.code;const A=new i(p.marshal(),f);const g=await c(A,a,h);yield{cid:g,node:A,unixfs:p,path:r}}(e,this._bucket,r,this.options))yield o}},e.exports.hashFn=l}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************************!*\
  !*** ./node_modules/async-iterator-last/index.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=async e=>{let t;for await(const r of e)t=r;return t}},
/*!**********************************************!*\
  !*** ./node_modules/shortid/lib/alphabet.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n,i,s,o=r(/*! ./random/random-from-seed */1198),a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function c(){s=!1}function u(e){if(e){if(e!==n){if(e.length!==a.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,r){return t!==r.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,c()}}else n!==a&&(n=a,c())}function h(){return s||(s=function(){n||u(a);for(var e,t=n.split(""),r=[],i=o.nextValue();t.length>0;)i=o.nextValue(),e=Math.floor(i*t.length),r.push(t.splice(e,1)[0]);return r.join("")}())}e.exports={get:function(){return n||a},characters:function(e){return u(e),n},seed:function(e){o.seed(e),i!==e&&(c(),i=e)},lookup:function(e){return h()[e]},shuffled:h}},
/*!************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/stat.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./utils/apply-default-options */53),i=r(/*! ./utils/to-mfs-path */71),s=r(/*! ipfs-unixfs-exporter */52),o=r(/*! debug */1)("ipfs:mfs:stat"),a=r(/*! err-code */44),c={withLocal:!1};e.exports=e=>(async function(t,r){r=n(r,c),o(`Fetching stats for ${t}`);const{type:h,cid:l,mfsPath:f}=await i(e,t),d="ipfs"===h&&l?l:f;let p;try{p=await s(d,e.ipld)}catch(e){if("ERR_NOT_FOUND"===e.code)throw a(new Error(`${t} does not exist`),"ERR_NOT_FOUND");throw e}if(!u[p.cid.codec])throw new Error(`Cannot stat codec ${p.cid.codec}`);return u[p.cid.codec](p,r)});const u={raw:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),"dag-pb":e=>{let t=e.node.Links.length,r=e.node.size,n=e.node.size,i=null;return e.unixfs&&(r=e.unixfs.fileSize(),(i=e.unixfs.type).includes("directory")&&(r=0,n=e.node.size),"file"===i&&(t=e.unixfs.blockSizes.length)),{cid:e.cid,size:r,cumulativeSize:n,blocks:t,type:i,local:void 0,sizeLocal:void 0,withLocality:!1}},"dag-cbor":e=>({cid:e.cid,local:void 0,sizeLocal:void 0,withLocality:!1})}},
/*!*****************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/update-mfs-root.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1)("ipfs:mfs:utils:update-mfs-root"),{MFS_ROOT_KEY:i}=r(/*! ./constants */46);e.exports=async(e,t)=>(n(`New MFS root will be ${t}`),await e.repo.datastore.put(i,t.buffer),t)},
/*!*************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/update-tree.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1)("ipfs:mfs:utils:update-tree"),i=r(/*! ./add-link */174),s={shardSplitThreshold:1e3};e.exports=async(e,t,r)=>{r=Object.assign({},s,r),n("Trail",t),t=t.slice().reverse();let o,a=0;for await(const n of e.ipld.getMany(t.map(e=>e.cid))){const s=t[a].cid,c=t[a].name;if(a++,!o){o={cid:s,name:c,size:n.size};continue}const u=await i(e,{parent:n,name:o.name,cid:o.cid,size:o.size,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,format:r.format,hashAlg:r.hashAlg,cidVersion:r.cidVersion});o={cid:u.cid,name:c,size:u.node.size}}return n(`Final CID ${o.cid}`),o.cid}},
/*!**********************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/add-link.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{DAGLink:n}=r(/*! ipld-dag-pb */29),i=r(/*! cids */4),s=r(/*! debug */1)("ipfs:mfs:core:utils:add-link"),o=r(/*! ipfs-unixfs */39),a=r(/*! ipfs-unixfs-importer/src/dir-sharded */168),{updateHamtDirectory:c,recreateHamtLevel:u,createShard:h,toPrefix:l,addLinksToHamtBucket:f}=r(/*! ./hamt-utils */479),d=r(/*! err-code */44),p=r(/*! multicodec */27),A=r(/*! multihashes */13),g=r(/*! async-iterator-last */169),y=async(e,t)=>{const r=await h(e,t.parent.Links.map(e=>({name:e.Name,size:e.Tsize,cid:e.Hash})).concat({name:t.name,size:t.size,cid:t.cid}),t);return s(`Converted directory to sharded directory ${r.cid}`),r},m=async(e,t)=>{t.parent.rmLink(t.name),t.parent.addLink(new n(t.name,t.size,t.cid));const r=p[t.format.toUpperCase().replace(/-/g,"_")],i=A.names[t.hashAlg],s=await e.ipld.put(t.parent,r,{cidVersion:t.cidVersion,hashAlg:i,hashOnly:!t.flush});return{node:t.parent,cid:s}},_=async(e,t)=>{const{shard:r,path:n}=await b(e,t),i=await g(r.flush("",e.ipld)),s=t.parent.Links.find(e=>e.Name.substring(0,2)===n[0].prefix),o=i.node.Links.find(e=>e.Name.substring(0,2)===n[0].prefix);return s&&t.parent.rmLink(s.Name),t.parent.addLink(o),c(e,t.parent.Links,n[0].bucket,t)},b=async(e,t)=>{const r={name:t.name,cid:t.cid,size:t.size},n=await u(t.parent.Links),i=new a({root:!0,dir:!0,parent:null,parentKey:null,path:"",dirty:!0,flat:!1},t);i._bucket=n;const o=await n._findNewBucketAndPos(r.name),c=w(o);c[0].node=t.parent;let h=0;for(;h<c.length;){const t=c[h];h++;const i=t.node.Links.find(e=>e.Name.substring(0,2)===t.prefix);if(!i){s(`Link ${t.prefix}${r.name} will be added`),h=c.length;break}if(i.Name===`${t.prefix}${r.name}`){s(`Link ${t.prefix}${r.name} will be replaced`),h=c.length;break}if(i.Name.length>2){s(`Link ${i.Name} will be replaced with a subshard`),h=c.length;break}s(`Found subshard ${t.prefix}`);const o=await e.ipld.get(i.Hash);if(!c[h]){s(`Loaded new subshard ${t.prefix}`),await u(o.Links,n,t.bucket,parseInt(t.prefix,16));const e=await n._findNewBucketAndPos(r.name);c.push({bucket:e.bucket,prefix:l(e.pos),node:o});break}const a=c[h];await f(o.Links,a.bucket,n),a.node=o}return await i._bucket.put(r.name,{size:r.size,cid:r.cid}),{shard:i,path:c}},w=e=>{let t=e.bucket,r=e.pos;const n=[{bucket:t,prefix:l(r)}];for(t=e.bucket._parent,r=e.bucket._posAtParent;t;)n.push({bucket:t,prefix:l(r)}),r=t._posAtParent,t=t._parent;return n.reverse(),n};e.exports=async(e,t)=>{if(!t.parentCid&&!t.parent)throw d(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(t.parentCid&&!i.isCID(t.parentCid))throw d(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(t.parent||(s(`Loading parent node ${t.parentCid}`),t.parent=await e.ipld.get(t.parentCid)),!t.cid)throw d(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!t.name)throw d(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(i.isCID(t.cid)||(t.cid=new i(t.cid)),!t.size&&0!==t.size)throw d(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");return"hamt-sharded-directory"===o.unmarshal(t.parent.Data).type?(s("Adding link to sharded directory"),_(e,t)):t.parent.Links.length>=t.shardSplitThreshold?(s("Converting directory to sharded directory"),y(e,t)):(s(`Adding ${t.name} (${t.cid}) to regular directory`),m(e,t))}},
/*!*********************************************!*\
  !*** ./src/storage/encryption/webcrypto.ts ***!
  \*********************************************/
/*! exports provided: WebCrypto */
/*! exports used: WebCrypto */function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const n={name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},i="jwk",s=window.crypto||window.msCrypto,o=new TextEncoder;class a{async encrypt(e,t){const r=await this.importKey(t),i=await s.subtle.encrypt(n,r,e);return new Uint8Array(i)}async decrypt(e,t){const r=await this.importKey(t),i=await s.subtle.decrypt(n,r,e);return new Uint8Array(i)}async generateKeyPair(){return s.subtle.generateKey(n,!0,["encrypt","decrypt"])}async importKey(e){return await s.subtle.importKey(i,e,n,!1,e.key_ops)}async exportKey(e){return await s.subtle.exportKey(i,e)}async hash(e){const t=o.encode(e),r=await s.subtle.digest(n.hash,t);return btoa(String.fromCharCode.apply(null,new Uint8Array(r)))}}},
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/to-indexed-object.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/indexed-object */497),i=r(/*! ../internals/require-object-coercible */499);e.exports=function(e){return n(i(e))}},
/*!******************************************************************!*\
  !*** ./node_modules/core-js/internals/object-define-property.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/descriptors */93),i=r(/*! ../internals/ie8-dom-define */267),s=r(/*! ../internals/an-object */129),o=r(/*! ../internals/to-primitive */266),a=Object.defineProperty;t.f=n?a:function(e,t,r){if(s(e),t=o(t,!0),s(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/set-global.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/global */40),i=r(/*! ../internals/create-non-enumerable-property */96);e.exports=function(e,t){try{i(n,e,t)}catch(r){n[e]=t}return t}},
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/hidden-keys.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports={}},
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/enum-bug-keys.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},
/*!***************************************************!*\
  !*** ./node_modules/multicodec/src/base-table.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){t.protobuf=e.from("50","hex"),t.cbor=e.from("51","hex"),t.rlp=e.from("60","hex"),t.bencode=e.from("63","hex"),t.json=e.from("0200","hex"),t.messagepack=e.from("0201","hex"),t.multicodec=e.from("30","hex"),t.multihash=e.from("31","hex"),t.multiaddr=e.from("32","hex"),t.multibase=e.from("33","hex"),t.identity=e.from("00","hex"),t.sha1=e.from("11","hex"),t["sha2-256"]=e.from("12","hex"),t["sha2-512"]=e.from("13","hex"),t["sha3-512"]=e.from("14","hex"),t["sha3-384"]=e.from("15","hex"),t["sha3-256"]=e.from("16","hex"),t["sha3-224"]=e.from("17","hex"),t["shake-128"]=e.from("18","hex"),t["shake-256"]=e.from("19","hex"),t["keccak-224"]=e.from("1a","hex"),t["keccak-256"]=e.from("1b","hex"),t["keccak-384"]=e.from("1c","hex"),t["keccak-512"]=e.from("1d","hex"),t["murmur3-128"]=e.from("22","hex"),t["murmur3-32"]=e.from("23","hex"),t["dbl-sha2-256"]=e.from("56","hex"),t.md4=e.from("d4","hex"),t.md5=e.from("d5","hex"),t.bmt=e.from("d6","hex"),t.x11=e.from("1100","hex"),t["blake2b-8"]=e.from("b201","hex"),t["blake2b-16"]=e.from("b202","hex"),t["blake2b-24"]=e.from("b203","hex"),t["blake2b-32"]=e.from("b204","hex"),t["blake2b-40"]=e.from("b205","hex"),t["blake2b-48"]=e.from("b206","hex"),t["blake2b-56"]=e.from("b207","hex"),t["blake2b-64"]=e.from("b208","hex"),t["blake2b-72"]=e.from("b209","hex"),t["blake2b-80"]=e.from("b20a","hex"),t["blake2b-88"]=e.from("b20b","hex"),t["blake2b-96"]=e.from("b20c","hex"),t["blake2b-104"]=e.from("b20d","hex"),t["blake2b-112"]=e.from("b20e","hex"),t["blake2b-120"]=e.from("b20f","hex"),t["blake2b-128"]=e.from("b210","hex"),t["blake2b-136"]=e.from("b211","hex"),t["blake2b-144"]=e.from("b212","hex"),t["blake2b-152"]=e.from("b213","hex"),t["blake2b-160"]=e.from("b214","hex"),t["blake2b-168"]=e.from("b215","hex"),t["blake2b-176"]=e.from("b216","hex"),t["blake2b-184"]=e.from("b217","hex"),t["blake2b-192"]=e.from("b218","hex"),t["blake2b-200"]=e.from("b219","hex"),t["blake2b-208"]=e.from("b21a","hex"),t["blake2b-216"]=e.from("b21b","hex"),t["blake2b-224"]=e.from("b21c","hex"),t["blake2b-232"]=e.from("b21d","hex"),t["blake2b-240"]=e.from("b21e","hex"),t["blake2b-248"]=e.from("b21f","hex"),t["blake2b-256"]=e.from("b220","hex"),t["blake2b-264"]=e.from("b221","hex"),t["blake2b-272"]=e.from("b222","hex"),t["blake2b-280"]=e.from("b223","hex"),t["blake2b-288"]=e.from("b224","hex"),t["blake2b-296"]=e.from("b225","hex"),t["blake2b-304"]=e.from("b226","hex"),t["blake2b-312"]=e.from("b227","hex"),t["blake2b-320"]=e.from("b228","hex"),t["blake2b-328"]=e.from("b229","hex"),t["blake2b-336"]=e.from("b22a","hex"),t["blake2b-344"]=e.from("b22b","hex"),t["blake2b-352"]=e.from("b22c","hex"),t["blake2b-360"]=e.from("b22d","hex"),t["blake2b-368"]=e.from("b22e","hex"),t["blake2b-376"]=e.from("b22f","hex"),t["blake2b-384"]=e.from("b230","hex"),t["blake2b-392"]=e.from("b231","hex"),t["blake2b-400"]=e.from("b232","hex"),t["blake2b-408"]=e.from("b233","hex"),t["blake2b-416"]=e.from("b234","hex"),t["blake2b-424"]=e.from("b235","hex"),t["blake2b-432"]=e.from("b236","hex"),t["blake2b-440"]=e.from("b237","hex"),t["blake2b-448"]=e.from("b238","hex"),t["blake2b-456"]=e.from("b239","hex"),t["blake2b-464"]=e.from("b23a","hex"),t["blake2b-472"]=e.from("b23b","hex"),t["blake2b-480"]=e.from("b23c","hex"),t["blake2b-488"]=e.from("b23d","hex"),t["blake2b-496"]=e.from("b23e","hex"),t["blake2b-504"]=e.from("b23f","hex"),t["blake2b-512"]=e.from("b240","hex"),t["blake2s-8"]=e.from("b241","hex"),t["blake2s-16"]=e.from("b242","hex"),t["blake2s-24"]=e.from("b243","hex"),t["blake2s-32"]=e.from("b244","hex"),t["blake2s-40"]=e.from("b245","hex"),t["blake2s-48"]=e.from("b246","hex"),t["blake2s-56"]=e.from("b247","hex"),t["blake2s-64"]=e.from("b248","hex"),t["blake2s-72"]=e.from("b249","hex"),t["blake2s-80"]=e.from("b24a","hex"),t["blake2s-88"]=e.from("b24b","hex"),t["blake2s-96"]=e.from("b24c","hex"),t["blake2s-104"]=e.from("b24d","hex"),t["blake2s-112"]=e.from("b24e","hex"),t["blake2s-120"]=e.from("b24f","hex"),t["blake2s-128"]=e.from("b250","hex"),t["blake2s-136"]=e.from("b251","hex"),t["blake2s-144"]=e.from("b252","hex"),t["blake2s-152"]=e.from("b253","hex"),t["blake2s-160"]=e.from("b254","hex"),t["blake2s-168"]=e.from("b255","hex"),t["blake2s-176"]=e.from("b256","hex"),t["blake2s-184"]=e.from("b257","hex"),t["blake2s-192"]=e.from("b258","hex"),t["blake2s-200"]=e.from("b259","hex"),t["blake2s-208"]=e.from("b25a","hex"),t["blake2s-216"]=e.from("b25b","hex"),t["blake2s-224"]=e.from("b25c","hex"),t["blake2s-232"]=e.from("b25d","hex"),t["blake2s-240"]=e.from("b25e","hex"),t["blake2s-248"]=e.from("b25f","hex"),t["blake2s-256"]=e.from("b260","hex"),t["skein256-8"]=e.from("b301","hex"),t["skein256-16"]=e.from("b302","hex"),t["skein256-24"]=e.from("b303","hex"),t["skein256-32"]=e.from("b304","hex"),t["skein256-40"]=e.from("b305","hex"),t["skein256-48"]=e.from("b306","hex"),t["skein256-56"]=e.from("b307","hex"),t["skein256-64"]=e.from("b308","hex"),t["skein256-72"]=e.from("b309","hex"),t["skein256-80"]=e.from("b30a","hex"),t["skein256-88"]=e.from("b30b","hex"),t["skein256-96"]=e.from("b30c","hex"),t["skein256-104"]=e.from("b30d","hex"),t["skein256-112"]=e.from("b30e","hex"),t["skein256-120"]=e.from("b30f","hex"),t["skein256-128"]=e.from("b310","hex"),t["skein256-136"]=e.from("b311","hex"),t["skein256-144"]=e.from("b312","hex"),t["skein256-152"]=e.from("b313","hex"),t["skein256-160"]=e.from("b314","hex"),t["skein256-168"]=e.from("b315","hex"),t["skein256-176"]=e.from("b316","hex"),t["skein256-184"]=e.from("b317","hex"),t["skein256-192"]=e.from("b318","hex"),t["skein256-200"]=e.from("b319","hex"),t["skein256-208"]=e.from("b31a","hex"),t["skein256-216"]=e.from("b31b","hex"),t["skein256-224"]=e.from("b31c","hex"),t["skein256-232"]=e.from("b31d","hex"),t["skein256-240"]=e.from("b31e","hex"),t["skein256-248"]=e.from("b31f","hex"),t["skein256-256"]=e.from("b320","hex"),t["skein512-8"]=e.from("b321","hex"),t["skein512-16"]=e.from("b322","hex"),t["skein512-24"]=e.from("b323","hex"),t["skein512-32"]=e.from("b324","hex"),t["skein512-40"]=e.from("b325","hex"),t["skein512-48"]=e.from("b326","hex"),t["skein512-56"]=e.from("b327","hex"),t["skein512-64"]=e.from("b328","hex"),t["skein512-72"]=e.from("b329","hex"),t["skein512-80"]=e.from("b32a","hex"),t["skein512-88"]=e.from("b32b","hex"),t["skein512-96"]=e.from("b32c","hex"),t["skein512-104"]=e.from("b32d","hex"),t["skein512-112"]=e.from("b32e","hex"),t["skein512-120"]=e.from("b32f","hex"),t["skein512-128"]=e.from("b330","hex"),t["skein512-136"]=e.from("b331","hex"),t["skein512-144"]=e.from("b332","hex"),t["skein512-152"]=e.from("b333","hex"),t["skein512-160"]=e.from("b334","hex"),t["skein512-168"]=e.from("b335","hex"),t["skein512-176"]=e.from("b336","hex"),t["skein512-184"]=e.from("b337","hex"),t["skein512-192"]=e.from("b338","hex"),t["skein512-200"]=e.from("b339","hex"),t["skein512-208"]=e.from("b33a","hex"),t["skein512-216"]=e.from("b33b","hex"),t["skein512-224"]=e.from("b33c","hex"),t["skein512-232"]=e.from("b33d","hex"),t["skein512-240"]=e.from("b33e","hex"),t["skein512-248"]=e.from("b33f","hex"),t["skein512-256"]=e.from("b340","hex"),t["skein512-264"]=e.from("b341","hex"),t["skein512-272"]=e.from("b342","hex"),t["skein512-280"]=e.from("b343","hex"),t["skein512-288"]=e.from("b344","hex"),t["skein512-296"]=e.from("b345","hex"),t["skein512-304"]=e.from("b346","hex"),t["skein512-312"]=e.from("b347","hex"),t["skein512-320"]=e.from("b348","hex"),t["skein512-328"]=e.from("b349","hex"),t["skein512-336"]=e.from("b34a","hex"),t["skein512-344"]=e.from("b34b","hex"),t["skein512-352"]=e.from("b34c","hex"),t["skein512-360"]=e.from("b34d","hex"),t["skein512-368"]=e.from("b34e","hex"),t["skein512-376"]=e.from("b34f","hex"),t["skein512-384"]=e.from("b350","hex"),t["skein512-392"]=e.from("b351","hex"),t["skein512-400"]=e.from("b352","hex"),t["skein512-408"]=e.from("b353","hex"),t["skein512-416"]=e.from("b354","hex"),t["skein512-424"]=e.from("b355","hex"),t["skein512-432"]=e.from("b356","hex"),t["skein512-440"]=e.from("b357","hex"),t["skein512-448"]=e.from("b358","hex"),t["skein512-456"]=e.from("b359","hex"),t["skein512-464"]=e.from("b35a","hex"),t["skein512-472"]=e.from("b35b","hex"),t["skein512-480"]=e.from("b35c","hex"),t["skein512-488"]=e.from("b35d","hex"),t["skein512-496"]=e.from("b35e","hex"),t["skein512-504"]=e.from("b35f","hex"),t["skein512-512"]=e.from("b360","hex"),t["skein1024-8"]=e.from("b361","hex"),t["skein1024-16"]=e.from("b362","hex"),t["skein1024-24"]=e.from("b363","hex"),t["skein1024-32"]=e.from("b364","hex"),t["skein1024-40"]=e.from("b365","hex"),t["skein1024-48"]=e.from("b366","hex"),t["skein1024-56"]=e.from("b367","hex"),t["skein1024-64"]=e.from("b368","hex"),t["skein1024-72"]=e.from("b369","hex"),t["skein1024-80"]=e.from("b36a","hex"),t["skein1024-88"]=e.from("b36b","hex"),t["skein1024-96"]=e.from("b36c","hex"),t["skein1024-104"]=e.from("b36d","hex"),t["skein1024-112"]=e.from("b36e","hex"),t["skein1024-120"]=e.from("b36f","hex"),t["skein1024-128"]=e.from("b370","hex"),t["skein1024-136"]=e.from("b371","hex"),t["skein1024-144"]=e.from("b372","hex"),t["skein1024-152"]=e.from("b373","hex"),t["skein1024-160"]=e.from("b374","hex"),t["skein1024-168"]=e.from("b375","hex"),t["skein1024-176"]=e.from("b376","hex"),t["skein1024-184"]=e.from("b377","hex"),t["skein1024-192"]=e.from("b378","hex"),t["skein1024-200"]=e.from("b379","hex"),t["skein1024-208"]=e.from("b37a","hex"),t["skein1024-216"]=e.from("b37b","hex"),t["skein1024-224"]=e.from("b37c","hex"),t["skein1024-232"]=e.from("b37d","hex"),t["skein1024-240"]=e.from("b37e","hex"),t["skein1024-248"]=e.from("b37f","hex"),t["skein1024-256"]=e.from("b380","hex"),t["skein1024-264"]=e.from("b381","hex"),t["skein1024-272"]=e.from("b382","hex"),t["skein1024-280"]=e.from("b383","hex"),t["skein1024-288"]=e.from("b384","hex"),t["skein1024-296"]=e.from("b385","hex"),t["skein1024-304"]=e.from("b386","hex"),t["skein1024-312"]=e.from("b387","hex"),t["skein1024-320"]=e.from("b388","hex"),t["skein1024-328"]=e.from("b389","hex"),t["skein1024-336"]=e.from("b38a","hex"),t["skein1024-344"]=e.from("b38b","hex"),t["skein1024-352"]=e.from("b38c","hex"),t["skein1024-360"]=e.from("b38d","hex"),t["skein1024-368"]=e.from("b38e","hex"),t["skein1024-376"]=e.from("b38f","hex"),t["skein1024-384"]=e.from("b390","hex"),t["skein1024-392"]=e.from("b391","hex"),t["skein1024-400"]=e.from("b392","hex"),t["skein1024-408"]=e.from("b393","hex"),t["skein1024-416"]=e.from("b394","hex"),t["skein1024-424"]=e.from("b395","hex"),t["skein1024-432"]=e.from("b396","hex"),t["skein1024-440"]=e.from("b397","hex"),t["skein1024-448"]=e.from("b398","hex"),t["skein1024-456"]=e.from("b399","hex"),t["skein1024-464"]=e.from("b39a","hex"),t["skein1024-472"]=e.from("b39b","hex"),t["skein1024-480"]=e.from("b39c","hex"),t["skein1024-488"]=e.from("b39d","hex"),t["skein1024-496"]=e.from("b39e","hex"),t["skein1024-504"]=e.from("b39f","hex"),t["skein1024-512"]=e.from("b3a0","hex"),t["skein1024-520"]=e.from("b3a1","hex"),t["skein1024-528"]=e.from("b3a2","hex"),t["skein1024-536"]=e.from("b3a3","hex"),t["skein1024-544"]=e.from("b3a4","hex"),t["skein1024-552"]=e.from("b3a5","hex"),t["skein1024-560"]=e.from("b3a6","hex"),t["skein1024-568"]=e.from("b3a7","hex"),t["skein1024-576"]=e.from("b3a8","hex"),t["skein1024-584"]=e.from("b3a9","hex"),t["skein1024-592"]=e.from("b3aa","hex"),t["skein1024-600"]=e.from("b3ab","hex"),t["skein1024-608"]=e.from("b3ac","hex"),t["skein1024-616"]=e.from("b3ad","hex"),t["skein1024-624"]=e.from("b3ae","hex"),t["skein1024-632"]=e.from("b3af","hex"),t["skein1024-640"]=e.from("b3b0","hex"),t["skein1024-648"]=e.from("b3b1","hex"),t["skein1024-656"]=e.from("b3b2","hex"),t["skein1024-664"]=e.from("b3b3","hex"),t["skein1024-672"]=e.from("b3b4","hex"),t["skein1024-680"]=e.from("b3b5","hex"),t["skein1024-688"]=e.from("b3b6","hex"),t["skein1024-696"]=e.from("b3b7","hex"),t["skein1024-704"]=e.from("b3b8","hex"),t["skein1024-712"]=e.from("b3b9","hex"),t["skein1024-720"]=e.from("b3ba","hex"),t["skein1024-728"]=e.from("b3bb","hex"),t["skein1024-736"]=e.from("b3bc","hex"),t["skein1024-744"]=e.from("b3bd","hex"),t["skein1024-752"]=e.from("b3be","hex"),t["skein1024-760"]=e.from("b3bf","hex"),t["skein1024-768"]=e.from("b3c0","hex"),t["skein1024-776"]=e.from("b3c1","hex"),t["skein1024-784"]=e.from("b3c2","hex"),t["skein1024-792"]=e.from("b3c3","hex"),t["skein1024-800"]=e.from("b3c4","hex"),t["skein1024-808"]=e.from("b3c5","hex"),t["skein1024-816"]=e.from("b3c6","hex"),t["skein1024-824"]=e.from("b3c7","hex"),t["skein1024-832"]=e.from("b3c8","hex"),t["skein1024-840"]=e.from("b3c9","hex"),t["skein1024-848"]=e.from("b3ca","hex"),t["skein1024-856"]=e.from("b3cb","hex"),t["skein1024-864"]=e.from("b3cc","hex"),t["skein1024-872"]=e.from("b3cd","hex"),t["skein1024-880"]=e.from("b3ce","hex"),t["skein1024-888"]=e.from("b3cf","hex"),t["skein1024-896"]=e.from("b3d0","hex"),t["skein1024-904"]=e.from("b3d1","hex"),t["skein1024-912"]=e.from("b3d2","hex"),t["skein1024-920"]=e.from("b3d3","hex"),t["skein1024-928"]=e.from("b3d4","hex"),t["skein1024-936"]=e.from("b3d5","hex"),t["skein1024-944"]=e.from("b3d6","hex"),t["skein1024-952"]=e.from("b3d7","hex"),t["skein1024-960"]=e.from("b3d8","hex"),t["skein1024-968"]=e.from("b3d9","hex"),t["skein1024-976"]=e.from("b3da","hex"),t["skein1024-984"]=e.from("b3db","hex"),t["skein1024-992"]=e.from("b3dc","hex"),t["skein1024-1000"]=e.from("b3dd","hex"),t["skein1024-1008"]=e.from("b3de","hex"),t["skein1024-1016"]=e.from("b3df","hex"),t["skein1024-1024"]=e.from("b3e0","hex"),t.ip4=e.from("04","hex"),t.tcp=e.from("06","hex"),t.dccp=e.from("21","hex"),t.ip6=e.from("29","hex"),t.ip6zone=e.from("2a","hex"),t.dns=e.from("35","hex"),t.dns4=e.from("36","hex"),t.dns6=e.from("37","hex"),t.dnsaddr=e.from("38","hex"),t.sctp=e.from("84","hex"),t.udp=e.from("0111","hex"),t["p2p-webrtc-star"]=e.from("0113","hex"),t["p2p-webrtc-direct"]=e.from("0114","hex"),t["p2p-stardust"]=e.from("0115","hex"),t["p2p-circuit"]=e.from("0122","hex"),t.udt=e.from("012d","hex"),t.utp=e.from("012e","hex"),t.unix=e.from("0190","hex"),t.p2p=e.from("01a5","hex"),t.ipfs=e.from("01a5","hex"),t.https=e.from("01bb","hex"),t.onion=e.from("01bc","hex"),t.onion3=e.from("01bd","hex"),t.garlic64=e.from("01be","hex"),t.garlic32=e.from("01bf","hex"),t.quic=e.from("01cc","hex"),t.ws=e.from("01dd","hex"),t.wss=e.from("01de","hex"),t["p2p-websocket-star"]=e.from("01df","hex"),t.http=e.from("01e0","hex"),t.raw=e.from("55","hex"),t["dag-pb"]=e.from("70","hex"),t["dag-cbor"]=e.from("71","hex"),t["libp2p-key"]=e.from("72","hex"),t["git-raw"]=e.from("78","hex"),t["torrent-info"]=e.from("7b","hex"),t["torrent-file"]=e.from("7c","hex"),t["leofcoin-block"]=e.from("81","hex"),t["leofcoin-tx"]=e.from("82","hex"),t["leofcoin-pr"]=e.from("83","hex"),t["eth-block"]=e.from("90","hex"),t["eth-block-list"]=e.from("91","hex"),t["eth-tx-trie"]=e.from("92","hex"),t["eth-tx"]=e.from("93","hex"),t["eth-tx-receipt-trie"]=e.from("94","hex"),t["eth-tx-receipt"]=e.from("95","hex"),t["eth-state-trie"]=e.from("96","hex"),t["eth-account-snapshot"]=e.from("97","hex"),t["eth-storage-trie"]=e.from("98","hex"),t["bitcoin-block"]=e.from("b0","hex"),t["bitcoin-tx"]=e.from("b1","hex"),t["zcash-block"]=e.from("c0","hex"),t["zcash-tx"]=e.from("c1","hex"),t["stellar-block"]=e.from("d0","hex"),t["stellar-tx"]=e.from("d1","hex"),t["decred-block"]=e.from("e0","hex"),t["decred-tx"]=e.from("e1","hex"),t["dash-block"]=e.from("f0","hex"),t["dash-tx"]=e.from("f1","hex"),t["swarm-manifest"]=e.from("fa","hex"),t["swarm-feed"]=e.from("fb","hex"),t["dag-json"]=e.from("0129","hex"),t.path=e.from("2f","hex"),t["ipld-ns"]=e.from("e2","hex"),t["ipfs-ns"]=e.from("e3","hex"),t["swarm-ns"]=e.from("e4","hex"),t["ipns-ns"]=e.from("e5","hex"),t.zeronet=e.from("e6","hex"),t["ed25519-pub"]=e.from("ed","hex"),t["holochain-adr-v0"]=e.from("807124","hex"),t["holochain-adr-v1"]=e.from("817124","hex"),t["holochain-key-v0"]=e.from("947124","hex"),t["holochain-key-v1"]=e.from("957124","hex"),t["holochain-sig-v0"]=e.from("a27124","hex"),t["holochain-sig-v1"]=e.from("a37124","hex")}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!****************************************!*\
  !*** ./node_modules/borc/src/utils.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! bignumber.js */48).BigNumber,i=r(/*! ./constants */131),s=i.SHIFT32,o=i.SHIFT16;t.parseHalf=function(e){var t,r,n;return n=128&e[0]?-1:1,t=(124&e[0])>>2,r=(3&e[0])<<8|e[1],t?31===t?n*(r?NaN:Infinity):n*Math.pow(2,t-25)*(1024+r):5.960464477539063e-8*n*r},t.arrayBufferToBignumber=function(e){const t=e.byteLength;let r="";for(let n=0;n<t;n++)r+=(i=e[n])<16?"0"+i.toString(16):i.toString(16);var i;return new n(r,16)},t.buildMap=e=>{const t=new Map,r=Object.keys(e),n=r.length;for(let i=0;i<n;i++)t.set(r[i],e[r[i]]);return t},t.buildInt32=(e,t)=>e*o+t,t.buildInt64=(e,r,i,o)=>{const a=t.buildInt32(e,r),c=t.buildInt32(i,o);return a>2097151?new n(a).times(s).plus(c):a*s+c},t.writeHalf=function(t,r){const n=e.allocUnsafe(4);n.writeFloatBE(r,0);const i=n.readUInt32BE(0);if(0!=(8191&i))return!1;var s=i>>16&32768;const o=i>>23&255,a=8388607&i;if(o>=113&&o<=142)s+=(o-112<<10)+(a>>13);else{if(!(o>=103&&o<113))return!1;if(a&(1<<126-o)-1)return!1;s+=a+8388608>>126-o}return t.writeUInt16BE(s,0),!0},t.keySorter=function(e,t){var r=e[0].byteLength,n=t[0].byteLength;return r>n?1:n>r?-1:e[0].compare(t[0])},t.isNegativeZero=e=>0===e&&1/e<0,t.nextPowerOf2=e=>{let t=0;if(e&&!(e&e-1))return e;for(;0!==e;)e>>=1,t+=1;return 1<<t}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************************!*\
  !*** ./node_modules/protons/src/compile/utils.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.defined=function(e){return null!=e&&("number"!=typeof e||!isNaN(e))}},
/*!***********************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/keys.proto.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="enum KeyType {\n  RSA = 0;\n  Ed25519 = 1;\n  Secp256k1 = 2;\n}\nmessage PublicKey {\n  required KeyType Type = 1;\n  required bytes Data = 2;\n}\nmessage PrivateKey {\n  required KeyType Type = 1;\n  required bytes Data = 2;\n}"},
/*!************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/jsbn.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n,i=r(/*! ./forge */11);e.exports=i.jsbn=i.jsbn||{};function s(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function o(){return new s(null)}function a(e,t,r,n,i,s){for(var o=16383&t,a=t>>14;--s>=0;){var c=16383&this.data[e],u=this.data[e++]>>14,h=a*c+u*o;i=((c=o*c+((16383&h)<<14)+r.data[n]+i)>>28)+(h>>14)+a*u,r.data[n++]=268435455&c}return i}i.jsbn.BigInteger=s,"undefined"==typeof navigator?(s.prototype.am=a,n=28):"Microsoft Internet Explorer"==navigator.appName?(s.prototype.am=function(e,t,r,n,i,s){for(var o=32767&t,a=t>>15;--s>=0;){var c=32767&this.data[e],u=this.data[e++]>>15,h=a*c+u*o;i=((c=o*c+((32767&h)<<15)+r.data[n]+(1073741823&i))>>>30)+(h>>>15)+a*u+(i>>>30),r.data[n++]=1073741823&c}return i},n=30):"Netscape"!=navigator.appName?(s.prototype.am=function(e,t,r,n,i,s){for(;--s>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i},n=26):(s.prototype.am=a,n=28),s.prototype.DB=n,s.prototype.DM=(1<<n)-1,s.prototype.DV=1<<n;s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-n,s.prototype.F2=2*n-52;var c,u,h="0123456789abcdefghijklmnopqrstuvwxyz",l=new Array;for(c="0".charCodeAt(0),u=0;u<=9;++u)l[c++]=u;for(c="a".charCodeAt(0),u=10;u<36;++u)l[c++]=u;for(c="A".charCodeAt(0),u=10;u<36;++u)l[c++]=u;function f(e){return h.charAt(e)}function d(e,t){var r=l[e.charCodeAt(t)];return null==r?-1:r}function p(e){var t=o();return t.fromInt(e),t}function A(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function g(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function m(e,t){return e&t}function _(e,t){return e|t}function b(e,t){return e^t}function w(e,t){return e&~t}function v(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function E(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function S(){}function C(e){return e}function k(e){this.r2=o(),this.q3=o(),s.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}g.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},g.prototype.revert=function(e){return e},g.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},g.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},g.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(s.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=o();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},s.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},s.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},s.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var a=8==r?255&e[n]:d(e,n);a<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==o?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},s.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},s.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},s.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>i|a,a=(this.data[r]&s)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},s.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}},s.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},s.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&s.ZERO.subTo(t,t)},s.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},s.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=o());var a=o(),c=this.s,u=e.s,h=this.DB-A(n.data[n.t-1]);h>0?(n.lShiftTo(h,a),i.lShiftTo(h,r)):(n.copyTo(a),i.copyTo(r));var l=a.t,f=a.data[l-1];if(0!=f){var d=f*(1<<this.F1)+(l>1?a.data[l-2]>>this.F2:0),p=this.FV/d,g=(1<<this.F1)/d,y=1<<this.F2,m=r.t,_=m-l,b=null==t?o():t;for(a.dlShiftTo(_,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),s.ONE.dlShiftTo(l,b),b.subTo(a,a);a.t<l;)a.data[a.t++]=0;for(;--_>=0;){var w=r.data[--m]==f?this.DM:Math.floor(r.data[m]*p+(r.data[m-1]+y)*g);if((r.data[m]+=a.am(0,w,r,_,0,l))<w)for(a.dlShiftTo(_,b),r.subTo(b,r);r.data[m]<--w;)r.subTo(b,r)}null!=t&&(r.drShiftTo(l,t),c!=u&&s.ZERO.subTo(t,t)),r.t=l,r.clamp(),h>0&&r.rShiftTo(h,r),c<0&&s.ZERO.subTo(r,r)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},s.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},s.prototype.exp=function(e,t){if(e>4294967295||e<1)return s.ONE;var r=o(),n=o(),i=t.convert(this),a=A(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var c=r;r=n,n=c}return t.revert(r)},s.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(r=this.data[o]>>a)>0&&(i=!0,s=f(r));o>=0;)a<t?(r=(this.data[o]&(1<<a)-1)<<t-a,r|=this.data[--o]>>(a+=this.DB-t)):(r=this.data[o]>>(a-=t)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=f(r));return i?s:"0"},s.prototype.negate=function(){var e=o();return s.ZERO.subTo(this,e),e},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+A(this.data[this.t-1]^this.s&this.DM)},s.prototype.mod=function(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(s.ZERO)>0&&e.subTo(t,t),t},s.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new g(t):new y(t),this.exp(e,r)},s.ZERO=p(0),s.ONE=p(1),S.prototype.convert=C,S.prototype.revert=C,S.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},S.prototype.sqrTo=function(e,t){e.squareTo(t)},k.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=o();return e.copyTo(t),this.reduce(t),t},k.prototype.revert=function(e){return e},k.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},k.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},k.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],T=(1<<26)/I[I.length-1];s.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},s.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=p(r),i=o(),s=o(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(e)+a},s.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,a=0,c=0;c<e.length;++c){var u=d(e,c);u<0?"-"==e.charAt(c)&&0==this.signum()&&(i=!0):(a=t*a+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(a,0)),i&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(s.ONE.shiftLeft(e-1),_,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(s.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},s.prototype.bitwiseTo=function(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},s.prototype.changeBit=function(e,t){var r=s.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},s.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},s.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},s.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()},s.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},s.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},s.prototype.millerRabin=function(e){var t=this.subtract(s.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),o={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},a=0;a<e;++a){do{n=new s(this.bitLength(),o)}while(n.compareTo(s.ONE)<=0||n.compareTo(t)>=0);var c=n.modPow(i,this);if(0!=c.compareTo(s.ONE)&&0!=c.compareTo(t)){for(var u=1;u++<r&&0!=c.compareTo(t);)if(0==(c=c.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},s.prototype.clone=function(){var e=o();return this.copyTo(e),e},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},s.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},s.prototype.equals=function(e){return 0==this.compareTo(e)},s.prototype.min=function(e){return this.compareTo(e)<0?this:e},s.prototype.max=function(e){return this.compareTo(e)>0?this:e},s.prototype.and=function(e){var t=o();return this.bitwiseTo(e,m,t),t},s.prototype.or=function(e){var t=o();return this.bitwiseTo(e,_,t),t},s.prototype.xor=function(e){var t=o();return this.bitwiseTo(e,b,t),t},s.prototype.andNot=function(e){var t=o();return this.bitwiseTo(e,w,t),t},s.prototype.not=function(){for(var e=o(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},s.prototype.shiftLeft=function(e){var t=o();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},s.prototype.shiftRight=function(e){var t=o();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},s.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+v(this.data[e]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=E(this.data[r]^t);return e},s.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},s.prototype.setBit=function(e){return this.changeBit(e,_)},s.prototype.clearBit=function(e){return this.changeBit(e,w)},s.prototype.flipBit=function(e){return this.changeBit(e,b)},s.prototype.add=function(e){var t=o();return this.addTo(e,t),t},s.prototype.subtract=function(e){var t=o();return this.subTo(e,t),t},s.prototype.multiply=function(e){var t=o();return this.multiplyTo(e,t),t},s.prototype.divide=function(e){var t=o();return this.divRemTo(e,t,null),t},s.prototype.remainder=function(e){var t=o();return this.divRemTo(e,null,t),t},s.prototype.divideAndRemainder=function(e){var t=o(),r=o();return this.divRemTo(e,t,r),new Array(t,r)},s.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),s=p(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new g(t):t.isEven()?new k(t):new y(t);var a=new Array,c=3,u=r-1,h=(1<<r)-1;if(a[1]=n.convert(this),r>1){var l=o();for(n.sqrTo(a[1],l);c<=h;)a[c]=o(),n.mulTo(l,a[c-2],a[c]),c+=2}var f,d,m=e.t-1,_=!0,b=o();for(i=A(e.data[m])-1;m>=0;){for(i>=u?f=e.data[m]>>i-u&h:(f=(e.data[m]&(1<<i+1)-1)<<u-i,m>0&&(f|=e.data[m-1]>>this.DB+i-u)),c=r;0==(1&f);)f>>=1,--c;if((i-=c)<0&&(i+=this.DB,--m),_)a[f].copyTo(s),_=!1;else{for(;c>1;)n.sqrTo(s,b),n.sqrTo(b,s),c-=2;c>0?n.sqrTo(s,b):(d=s,s=b,b=d),n.mulTo(b,a[f],s)}for(;m>=0&&0==(e.data[m]&1<<i);)n.sqrTo(s,b),d=s,s=b,b=d,--i<0&&(i=this.DB-1,--m)}return n.revert(s)},s.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return s.ZERO;for(var r=e.clone(),n=this.clone(),i=p(1),o=p(0),a=p(0),c=p(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(e,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),t&&a.subTo(i,a),c.subTo(o,c))}return 0!=n.compareTo(s.ONE)?s.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},s.prototype.pow=function(e){return this.exp(e,new S)},s.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},s.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=I[I.length-1]){for(t=0;t<I.length;++t)if(r.data[0]==I[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<I.length;){for(var n=I[t],i=t+1;i<I.length&&n<T;)n*=I[i++];for(n=r.modInt(n);t<i;)if(n%I[t++]==0)return!1}return r.millerRabin(e)}},
/*!***********************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/aes.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);function i(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.aes.Algorithm(e,t)}))}r(/*! ./cipher */299),r(/*! ./cipherModes */300),r(/*! ./util */16),e.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(e,t,r,n){var i=A({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},n.aes.createEncryptionCipher=function(e,t){return A({key:e,output:null,decrypt:!1,mode:t})},n.aes.startDecrypting=function(e,t,r,n){var i=A({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},n.aes.createDecryptionCipher=function(e,t){return A({key:e,output:null,decrypt:!0,mode:t})},n.aes.Algorithm=function(e,t){h||f();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return p(r._w,e,t,!1)},decrypt:function(e,t){return p(r._w,e,t,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=n.util.createBuffer();for(var i=0;i<t.length;++i)r.putByte(t[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){t=r,r=[];var s=t.length();if(16===s||24===s||32===s){s>>>=2;for(i=0;i<s;++i)r.push(t.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=d(r,e.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(e,t){return h||f(),d(e,t)},n.aes._updateBlock=p,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var s,o,a,c,u,h=!1,l=4;function f(){h=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;s=new Array(256),o=new Array(256),c=new Array(4),u=new Array(4);for(t=0;t<4;++t)c[t]=new Array(256),u[t]=new Array(256);var r,n,i,l,f,d,p,A=0,g=0;for(t=0;t<256;++t){l=(l=g^g<<1^g<<2^g<<3^g<<4)>>8^255&l^99,s[A]=l,o[l]=A,d=(f=e[l])<<24^l<<16^l<<8^l^f,p=((r=e[A])^(n=e[r])^(i=e[n]))<<24^(A^i)<<16^(A^n^i)<<8^A^r^i;for(var y=0;y<4;++y)c[y][A]=d,u[y][l]=p,d=d<<24|d>>>8,p=p<<24|p>>>8;0===A?A=g=1:(A=r^e[e[e[r^i]]],g^=e[e[g]])}}function d(e,t){for(var r,n=e.slice(0),i=1,o=n.length,c=l*(o+6+1),h=o;h<c;++h)r=n[h-1],h%o==0?(r=s[r>>>16&255]<<24^s[r>>>8&255]<<16^s[255&r]<<8^s[r>>>24]^a[i]<<24,i++):o>6&&h%o==4&&(r=s[r>>>24]<<24^s[r>>>16&255]<<16^s[r>>>8&255]<<8^s[255&r]),n[h]=n[h-o]^r;if(t){for(var f,d=u[0],p=u[1],A=u[2],g=u[3],y=n.slice(0),m=(h=0,(c=n.length)-l);h<c;h+=l,m-=l)if(0===h||h===c-l)y[h]=n[m],y[h+1]=n[m+3],y[h+2]=n[m+2],y[h+3]=n[m+1];else for(var _=0;_<l;++_)f=n[m+_],y[h+(3&-_)]=d[s[f>>>24]]^p[s[f>>>16&255]]^A[s[f>>>8&255]]^g[s[255&f]];n=y}return n}function p(e,t,r,n){var i,a,h,l,f,d,p,A,g,y,m,_,b=e.length/4-1;n?(i=u[0],a=u[1],h=u[2],l=u[3],f=o):(i=c[0],a=c[1],h=c[2],l=c[3],f=s),d=t[0]^e[0],p=t[n?3:1]^e[1],A=t[2]^e[2],g=t[n?1:3]^e[3];for(var w=3,v=1;v<b;++v)y=i[d>>>24]^a[p>>>16&255]^h[A>>>8&255]^l[255&g]^e[++w],m=i[p>>>24]^a[A>>>16&255]^h[g>>>8&255]^l[255&d]^e[++w],_=i[A>>>24]^a[g>>>16&255]^h[d>>>8&255]^l[255&p]^e[++w],g=i[g>>>24]^a[d>>>16&255]^h[p>>>8&255]^l[255&A]^e[++w],d=y,p=m,A=_;r[0]=f[d>>>24]<<24^f[p>>>16&255]<<16^f[A>>>8&255]<<8^f[255&g]^e[++w],r[n?3:1]=f[p>>>24]<<24^f[A>>>16&255]<<16^f[g>>>8&255]<<8^f[255&d]^e[++w],r[2]=f[A>>>24]<<24^f[g>>>16&255]<<16^f[d>>>8&255]<<8^f[255&p]^e[++w],r[n?1:3]=f[g>>>24]<<24^f[d>>>16&255]<<16^f[p>>>8&255]<<8^f[255&A]^e[++w]}function A(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var s=null;r instanceof n.util.ByteBuffer&&(s=r,r={}),(r=r||{}).output=s,r.iv=e,i.call(t,r)},t}},
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/pbkdf2.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! ./forge */11);r(/*! ./hmac */303),r(/*! ./md */59),r(/*! ./util */16);var i,s=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(i=r(/*! crypto */187)),e.exports=n.pbkdf2=s.pbkdf2=function(e,r,s,o,a,c){if("function"==typeof a&&(c=a,a=null),n.util.isNodejs&&!n.options.usePureJavaScript&&i.pbkdf2&&(null===a||"object"!=typeof a)&&(i.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),e=t.from(e,"binary"),r=t.from(r,"binary"),c?4===i.pbkdf2Sync.length?i.pbkdf2(e,r,s,o,(function(e,t){if(e)return c(e);c(null,t.toString("binary"))})):i.pbkdf2(e,r,s,o,a,(function(e,t){if(e)return c(e);c(null,t.toString("binary"))})):4===i.pbkdf2Sync.length?i.pbkdf2Sync(e,r,s,o).toString("binary"):i.pbkdf2Sync(e,r,s,o,a).toString("binary");if(null==a&&(a="sha1"),"string"==typeof a){if(!(a in n.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=n.md[a].create()}var u=a.digestLength;if(o>4294967295*u){var h=new Error("Derived key is too long.");if(c)return c(h);throw h}var l=Math.ceil(o/u),f=o-(l-1)*u,d=n.hmac.create();d.start(a,e);var p,A,g,y="";if(!c){for(var m=1;m<=l;++m){d.start(null,null),d.update(r),d.update(n.util.int32ToBytes(m)),p=g=d.digest().getBytes();for(var _=2;_<=s;++_)d.start(null,null),d.update(g),A=d.digest().getBytes(),p=n.util.xorBytes(p,A,u),g=A;y+=m<l?p:p.substr(0,f)}return y}m=1;function b(){if(m>l)return c(null,y);d.start(null,null),d.update(r),d.update(n.util.int32ToBytes(m)),p=g=d.digest().getBytes(),_=2,w()}function w(){if(_<=s)return d.start(null,null),d.update(g),A=d.digest().getBytes(),p=n.util.xorBytes(p,A,u),g=A,++_,n.util.setImmediate(w);y+=m<l?p:p.substr(0,f),++m,b()}b()}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/pem.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./util */16);var i=e.exports=n.pem=n.pem||{};function s(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var s=0,o=-1;for(i=0;i<t.length;++i,++s)if(s>65&&-1!==o){var a=t[o];","===a?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+a+t.substr(o+1),s=i-o-1,o=-1,++i}else" "!==t[i]&&"\t"!==t[i]&&","!==t[i]||(o=i);return t}function o(e){return e.replace(/^\s+/,"")}i.encode=function(e,t){t=t||{};var r,i="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(i+=s(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(i+=s(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),i+=s(r)),e.headers)for(var o=0;o<e.headers.length;++o)i+=s(e.headers[o]);return e.procType&&(i+="\r\n"),i+=n.util.encode64(e.body,t.maxline||64)+"\r\n",i+="-----END "+e.type+"-----\r\n"},i.decode=function(e){for(var t,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;t=i.exec(e);){var c={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(t[3])};if(r.push(c),t[2]){for(var u=t[2].split(a),h=0;t&&h<u.length;){for(var l=u[h].replace(/\s+$/,""),f=h+1;f<u.length;++f){var d=u[f];if(!/\s/.test(d[0]))break;l+=d,h=f}if(t=l.match(s)){for(var p={name:t[1],values:[]},A=t[2].split(","),g=0;g<A.length;++g)p.values.push(o(A[g]));if(c.procType)if(c.contentDomain||"Content-Domain"!==p.name)if(c.dekInfo||"DEK-Info"!==p.name)c.headers.push(p);else{if(0===p.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:A[0],parameters:A[1]||null}}else c.contentDomain=A[0]||"";else{if("Proc-Type"!==p.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==p.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:A[0],type:A[1]}}}++h}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},
/*!***************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/nodeify.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t){return e.then(e=>{t(null,e)},e=>{t(e)})}},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/webcrypto.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=self.crypto||self.msCrypto},
/*!********************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/random-bytes.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! iso-random-stream/src/random */593);e.exports=function(e){if(!e||"number"!=typeof e)throw new Error("first argument must be a Number bigger than 0");return n(e)}},
/*!******************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=t;n.bignum=r(/*! bn.js */307),n.define=r(/*! ./asn1/api */596).define,n.base=r(/*! ./asn1/base */600),n.constants=r(/*! ./asn1/constants */601),n.decoders=r(/*! ./asn1/decoders */310),n.encoders=r(/*! ./asn1/encoders */308)},
/*!****************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/base/node.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../base/reporter */195).Reporter,i=r(/*! ../base/buffer */103).EncoderBuffer,s=r(/*! ../base/buffer */103).DecoderBuffer,o=r(/*! minimalistic-assert */597),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function u(e,t,r){const n={};this._baseState=n,n.name=r,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}e.exports=u;const h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];u.prototype.clone=function(){const e=this._baseState,t={};h.forEach((function(r){t[r]=e[r]}));const r=new this.constructor(t.parent);return r._baseState=t,r},u.prototype._wrap=function(){const e=this._baseState;c.forEach((function(t){this[t]=function(){const r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}}),this)},u.prototype._init=function(e){const t=this._baseState;o(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),o.equal(t.children.length,1,"Root node can have only one child")},u.prototype._useArgs=function(e){const t=this._baseState,r=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==r.length&&(o(null===t.children),t.children=r,r.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(o(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(r){r==(0|r)&&(r|=0);const n=e[r];t[n]=r})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){u.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),a.forEach((function(e){u.prototype[e]=function(){const t=this._baseState,r=Array.prototype.slice.call(arguments);return o(null===t.tag),t.tag=e,this._useArgs(r),this}})),u.prototype.use=function(e){o(e);const t=this._baseState;return o(null===t.use),t.use=e,this},u.prototype.optional=function(){return this._baseState.optional=!0,this},u.prototype.def=function(e){const t=this._baseState;return o(null===t.default),t.default=e,t.optional=!0,this},u.prototype.explicit=function(e){const t=this._baseState;return o(null===t.explicit&&null===t.implicit),t.explicit=e,this},u.prototype.implicit=function(e){const t=this._baseState;return o(null===t.explicit&&null===t.implicit),t.implicit=e,this},u.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},u.prototype.key=function(e){const t=this._baseState;return o(null===t.key),t.key=e,this},u.prototype.any=function(){return this._baseState.any=!0,this},u.prototype.choice=function(e){const t=this._baseState;return o(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},u.prototype.contains=function(e){const t=this._baseState;return o(null===t.use),t.contains=e,this},u.prototype._decode=function(e,t){const r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));let n,i=r.default,o=!0,a=null;if(null!==r.key&&(a=e.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(o=this._peekTag(e,n,r.any),e.isError(o))return o}else{const n=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),o=!0}catch(e){o=!1}e.restore(n)}}if(r.obj&&o&&(n=e.enterObject()),o){if(null!==r.explicit){const t=this._decodeTag(e,r.explicit);if(e.isError(t))return t;e=t}const n=e.offset;if(null===r.use&&null===r.choice){let t;r.any&&(t=e.save());const n=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(n))return n;r.any?i=e.raw(t):e=n}if(t&&t.track&&null!==r.tag&&t.track(e.path(),n,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(e,t)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new s(i);i=this._getUse(r.contains,e._reporterState.obj)._decode(n,t)}}return r.obj&&o&&(i=e.leaveObject(n)),null===r.key||null===i&&!0!==o?null!==a&&e.exitKey(a):e.leaveKey(a,r.key,i),i},u.prototype._decodeGeneric=function(e,t,r){const n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},u.prototype._getUse=function(e,t){const r=this._baseState;return r.useDecoder=this._use(e,t),o(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},u.prototype._decodeChoice=function(e,t){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some((function(s){const o=e.save(),a=r.choice[s];try{const r=a._decode(e,t);if(e.isError(r))return!1;n={type:s,value:r},i=!0}catch(t){return e.restore(o),!1}return!0}),this),i?n:e.error("Choice not matched")},u.prototype._createEncoderBuffer=function(e){return new i(e,this.reporter)},u.prototype._encode=function(e,t,r){const n=this._baseState;if(null!==n.default&&n.default===e)return;const i=this._encodeValue(e,t,r);return void 0===i||this._skipDefault(i,t,r)?void 0:i},u.prototype._encodeValue=function(e,t,r){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new n);let s=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}let o=null,a=!1;if(i.any)s=this._createEncoderBuffer(e);else if(i.choice)s=this._encodeChoice(e,t);else if(i.contains)o=this._getUse(i.contains,r)._encode(e,t),a=!0;else if(i.children)o=i.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");const n=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const i=r._encode(e[r._baseState.key],t,e);return t.leaveKey(n),i}),this).filter((function(e){return e})),o=this._createEncoderBuffer(o);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,o=this._createEncoderBuffer(e.map((function(r){const n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)}),r))}else null!==i.use?s=this._getUse(i.use,r)._encode(e,t):(o=this._encodePrimitive(i.tag,e),a=!0);if(!i.any&&null===i.choice){const e=null!==i.implicit?i.implicit:i.tag,r=null===i.implicit?"universal":"context";null===e?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(s=this._encodeComposite(e,a,r,o))}return null!==i.explicit&&(s=this._encodeComposite(i.explicit,!1,"context",s)),s},u.prototype._encodeChoice=function(e,t){const r=this._baseState,n=r.choice[e.type];return n||o(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},u.prototype._encodePrimitive=function(e,t){const r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},u.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},u.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},
/*!********************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/base/reporter.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! inherits */3);function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function s(e,t){this.path=e,this.rethrow(t)}t.Reporter=i,i.prototype.isError=function(e){return e instanceof s},i.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},i.prototype.leaveKey=function(e,t,r){const n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){const t=this._reporterState,r=t.obj;return t.obj=e,r},i.prototype.error=function(e){let t;const r=this._reporterState,n=e instanceof s;if(t=n?e:new s(r.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},i.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},n(s,Error),s.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,s),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},
/*!********************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/constants/der.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(e){const t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);const n=e[r];t[n]=r})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)},
/*!**************************************!*\
  !*** ./node_modules/md5.js/index.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! inherits */3),i=r(/*! hash-base */318),s=r(/*! safe-buffer */6).Buffer,o=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(e,t){return e<<t|e>>>32-t}function u(e,t,r,n,i,s,o){return c(e+(t&r|~t&n)+i+s|0,o)+t|0}function h(e,t,r,n,i,s,o){return c(e+(t&n|r&~n)+i+s|0,o)+t|0}function l(e,t,r,n,i,s,o){return c(e+(t^r^n)+i+s|0,o)+t|0}function f(e,t,r,n,i,s,o){return c(e+(r^(t|~n))+i+s|0,o)+t|0}n(a,i),a.prototype._update=function(){for(var e=o,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,s=this._d;r=u(r,n,i,s,e[0],3614090360,7),s=u(s,r,n,i,e[1],3905402710,12),i=u(i,s,r,n,e[2],606105819,17),n=u(n,i,s,r,e[3],3250441966,22),r=u(r,n,i,s,e[4],4118548399,7),s=u(s,r,n,i,e[5],1200080426,12),i=u(i,s,r,n,e[6],2821735955,17),n=u(n,i,s,r,e[7],4249261313,22),r=u(r,n,i,s,e[8],1770035416,7),s=u(s,r,n,i,e[9],2336552879,12),i=u(i,s,r,n,e[10],4294925233,17),n=u(n,i,s,r,e[11],2304563134,22),r=u(r,n,i,s,e[12],1804603682,7),s=u(s,r,n,i,e[13],4254626195,12),i=u(i,s,r,n,e[14],2792965006,17),r=h(r,n=u(n,i,s,r,e[15],1236535329,22),i,s,e[1],4129170786,5),s=h(s,r,n,i,e[6],3225465664,9),i=h(i,s,r,n,e[11],643717713,14),n=h(n,i,s,r,e[0],3921069994,20),r=h(r,n,i,s,e[5],3593408605,5),s=h(s,r,n,i,e[10],38016083,9),i=h(i,s,r,n,e[15],3634488961,14),n=h(n,i,s,r,e[4],3889429448,20),r=h(r,n,i,s,e[9],568446438,5),s=h(s,r,n,i,e[14],3275163606,9),i=h(i,s,r,n,e[3],4107603335,14),n=h(n,i,s,r,e[8],1163531501,20),r=h(r,n,i,s,e[13],2850285829,5),s=h(s,r,n,i,e[2],4243563512,9),i=h(i,s,r,n,e[7],1735328473,14),r=l(r,n=h(n,i,s,r,e[12],2368359562,20),i,s,e[5],4294588738,4),s=l(s,r,n,i,e[8],2272392833,11),i=l(i,s,r,n,e[11],1839030562,16),n=l(n,i,s,r,e[14],4259657740,23),r=l(r,n,i,s,e[1],2763975236,4),s=l(s,r,n,i,e[4],1272893353,11),i=l(i,s,r,n,e[7],4139469664,16),n=l(n,i,s,r,e[10],3200236656,23),r=l(r,n,i,s,e[13],681279174,4),s=l(s,r,n,i,e[0],3936430074,11),i=l(i,s,r,n,e[3],3572445317,16),n=l(n,i,s,r,e[6],76029189,23),r=l(r,n,i,s,e[9],3654602809,4),s=l(s,r,n,i,e[12],3873151461,11),i=l(i,s,r,n,e[15],530742520,16),r=f(r,n=l(n,i,s,r,e[2],3299628645,23),i,s,e[0],4096336452,6),s=f(s,r,n,i,e[7],1126891415,10),i=f(i,s,r,n,e[14],2878612391,15),n=f(n,i,s,r,e[5],4237533241,21),r=f(r,n,i,s,e[12],1700485571,6),s=f(s,r,n,i,e[3],2399980690,10),i=f(i,s,r,n,e[10],4293915773,15),n=f(n,i,s,r,e[1],2240044497,21),r=f(r,n,i,s,e[8],1873313359,6),s=f(s,r,n,i,e[15],4264355552,10),i=f(i,s,r,n,e[6],2734768916,15),n=f(n,i,s,r,e[13],1309151649,21),r=f(r,n,i,s,e[4],4149444226,6),s=f(s,r,n,i,e[11],3174756917,10),i=f(i,s,r,n,e[2],718787259,15),n=f(n,i,s,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+s|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=s.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=a},
/*!*****************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/readable-browser.js ***!
  \*****************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(t=e.exports=r(/*! ./lib/_stream_readable.js */319)).Stream=t,t.Readable=t,t.Writable=r(/*! ./lib/_stream_writable.js */200),t.Duplex=r(/*! ./lib/_stream_duplex.js */60),t.Transform=r(/*! ./lib/_stream_transform.js */323),t.PassThrough=r(/*! ./lib/_stream_passthrough.js */629)},
/*!**************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/safe-buffer/index.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! buffer */0),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},
/*!*********************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_writable.js ***!
  \*********************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t,n,i){var s=r(/*! process-nextick-args */138);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=m;var a,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:s.nextTick;m.WritableState=y;var u=r(/*! core-util-is */104);u.inherits=r(/*! inherits */3);var h={deprecate:r(/*! util-deprecate */322)},l=r(/*! ./internal/streams/stream */320),f=r(/*! safe-buffer */199).Buffer,d=i.Uint8Array||function(){};var p,A=r(/*! ./internal/streams/destroy */321);function g(){}function y(e,t){a=a||r(/*! ./_stream_duplex */60),e=e||{};var n=t instanceof a;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,u=e.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(u||0===u)?u:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(s.nextTick(i,n),s.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),S(e,t))}(e,r,n,t,i);else{var o=v(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),n?c(b,e,r,o,i):b(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function m(e){if(a=a||r(/*! ./_stream_duplex */60),!(p.call(m,this)||this instanceof a))return new m(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function _(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function b(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),S(e,t)}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,c=!0;r;)i[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;i.allBuffers=c,_(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,h=r.encoding,l=r.callback;if(_(e,t,!1,t.objectMode?1:u.length,u,h,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var r=v(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,s.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(m,l),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===m&&(e&&e._writableState instanceof y)}})):p=function(e){return e instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,a=!i.objectMode&&(n=e,f.isBuffer(n)||n instanceof d);return a&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=g),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),s.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),s.nextTick(n,o),i=!1),i}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,a,n,i,s);return c}(this,i,a,e,t,r)),o},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},m.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?s.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),m.prototype.destroy=A.destroy,m.prototype._undestroy=A.undestroy,m.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(/*! ./../../../../process/browser.js */2),r(/*! ./../../../../timers-browserify/main.js */41).setImmediate,r(/*! ./../../../../webpack/buildin/global.js */10))},
/*!*****************************************!*\
  !*** ./node_modules/lodash/isObject.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},
/*!*********************************************!*\
  !*** ./node_modules/async/internal/once.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}},e.exports=t.default},
/*!***********************************************!*\
  !*** ./node_modules/os-browserify/browser.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},
/*!*******************************************************!*\
  !*** ./node_modules/multiaddr/src/protocols-table.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(e){if("number"==typeof e){if(n.codes[e])return n.codes[e];throw new Error("no protocol with code: "+e)}if("string"==typeof e||e instanceof String){if(n.names[e])return n.names[e];throw new Error("no protocol with name: "+e)}throw new Error("invalid protocol id type: "+e)}const i=-1;function s(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}n.lengthPrefixedVarSize=i,n.V=i,n.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,i,"ip6zone"],[53,i,"dns","resolvable"],[54,i,"dns4","resolvable"],[55,i,"dns6","resolvable"],[56,i,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,i,"unix",!1,"path"],[421,i,"p2p"],[421,i,"ipfs"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,i,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"]],n.names={},n.codes={},n.table.map(e=>{const t=s.apply(null,e);n.codes[t.code]=t,n.names[t.name]=t}),n.object=s,e.exports=n},
/*!**************************************************!*\
  !*** ./node_modules/superstruct/lib/index.es.js ***!
  \**************************************************/
/*! exports provided: struct, superstruct, isStruct, StructError */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./node_modules/ipfs-unixfs-importer/src/index.js (referenced with cjs require), ./node_modules/ipfs/src/core/config.js (referenced with cjs require), ./node_modules/libp2p/src/config.js (referenced with cjs require) */function(e,t,r){"use strict";r.r(t),r.d(t,"struct",(function(){return k})),r.d(t,"superstruct",(function(){return C})),r.d(t,"isStruct",(function(){return u})),r.d(t,"StructError",(function(){return n}));class n extends TypeError{static format(e){const{type:t,path:r,value:n}=e;return`Expected a value of type \`${t}\`${r.length?` for \`${r.join(".")}\``:""} but received \`${JSON.stringify(n)}\`.`}constructor(e){super(n.format(e));const{data:t,path:r,value:i,reason:s,type:o,errors:a=[]}=e;this.data=t,this.path=r,this.value=i,this.reason=s,this.type=o,this.errors=a,a.length||a.push(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack}}var i=Object.prototype.toString,s=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;if("boolean"===t)return"boolean";if("string"===t)return"string";if("number"===t)return"number";if("symbol"===t)return"symbol";if("function"===t)return"GeneratorFunction"===o(e)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(e))return"array";if(function(e){if(e.constructor&&"function"==typeof e.constructor.isBuffer)return e.constructor.isBuffer(e);return!1}(e))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}(e))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(e))return"regexp";switch(o(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(e))return"generator";switch(t=i.call(e)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")};function o(e){return e.constructor?e.constructor.name:null}const a="@@__STRUCT__@@",c="@@__KIND__@@";function u(e){return!(!e||!e[a])}function h(e,t){return"function"==typeof e?e(t):e}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};class f{constructor(e,t,r){this.name=e,this.type=t,this.validate=r}}function d(e,t,r){if(u(e))return e[c];if(e instanceof f)return e;switch(s(e)){case"array":return e.length>1?b(e,t,r):g(e,t,r);case"function":return A(e,t,r);case"object":return y(e,t,r);case"string":{let n,i=!0;if(e.endsWith("?")&&(i=!1,e=e.slice(0,-1)),e.includes("|")){n=w(e.split(/\s*\|\s*/g),t,r)}else if(e.includes("&")){n=v(e.split(/\s*&\s*/g),t,r)}else n=_(e,t,r);return i||(n=m(n,void 0,r)),n}}throw new Error(`Invalid schema: ${e}`)}function p(e,t,r){if("array"!==s(e))throw new Error(`Invalid schema: ${e}`);const n=e.map(e=>{try{return JSON.stringify(e)}catch(t){return String(e)}}).join(" | ");return new f("enum",n,(r=h(t))=>e.includes(r)?[void 0,r]:[{data:r,path:[],value:r,type:n}])}function A(e,t,r){if("function"!==s(e))throw new Error(`Invalid schema: ${e}`);return new f("function","<function>",(r=h(t),n)=>{const i=e(r,n);let o,a={path:[],reason:null};switch(s(i)){case"boolean":o=i;break;case"string":o=!1,a.reason=i;break;case"object":o=!1,a=l({},a,i);break;default:throw new Error(`Invalid result: ${i}`)}return o?[void 0,r]:[l({type:"<function>",value:r,data:r},a)]})}function g(e,t,r){if("array"!==s(e)||1!==e.length)throw new Error(`Invalid schema: ${e}`);const n=_("array",void 0,r),i=d(e[0],void 0,r),o=`[${i.type}]`;return new f("list",o,(e=h(t))=>{const[r,s]=n.validate(e);if(r)return r.type=o,[r];e=s;const a=[],c=[];for(let t=0;t<e.length;t++){const r=e[t],[n,s]=i.validate(r);if(n){(n.errors||[n]).forEach(r=>{r.path=[t].concat(r.path),r.data=e,a.push(r)})}else c[t]=s}return a.length?[l({},a[0],{errors:a})]:[void 0,c]})}function y(e,t,r){if("object"!==s(e))throw new Error(`Invalid schema: ${e}`);const n=_("object",void 0,r),i=[],o={};for(const t in e){i.push(t);const n=d(e[t],void 0,r);o[t]=n}const a=`{${i.join()}}`;return new f("object",a,(e=h(t))=>{const[r]=n.validate(e);if(r)return r.type=a,[r];const i=[],s={},c=Object.keys(e),u=Object.keys(o);return new Set(c.concat(u)).forEach(r=>{let n=e[r];const a=o[r];if(void 0===n){n=h(t&&t[r],e)}if(!a){const t={data:e,path:[r],value:n};return void i.push(t)}const[c,u]=a.validate(n,e);if(c){(c.errors||[c]).forEach(t=>{t.path=[r].concat(t.path),t.data=e,i.push(t)})}else(r in e||void 0!==u)&&(s[r]=u)}),i.length?[l({},i[0],{errors:i})]:[void 0,s]})}function m(e,t,r){return w([e,"undefined"],t,r)}function _(e,t,r){if("string"!==s(e))throw new Error(`Invalid schema: ${e}`);const{types:n}=r,i=n[e];if("function"!==s(i))throw new Error(`Invalid type: ${e}`);const o=A(i,t),a=e;return new f("scalar",a,e=>{const[t,r]=o.validate(e);return t?(t.type=a,[t]):[void 0,r]})}function b(e,t,r){if("array"!==s(e))throw new Error(`Invalid schema: ${e}`);const n=e.map(e=>d(e,void 0,r)),i=_("array",void 0,r),o=`[${n.map(e=>e.type).join()}]`;return new f("tuple",o,(e=h(t))=>{const[r]=i.validate(e);if(r)return r.type=o,[r];const s=[],a=[],c=Math.max(e.length,n.length);for(let t=0;t<c;t++){const r=n[t],i=e[t];if(!r){const r={data:e,path:[t],value:i};a.push(r);continue}const[o,c]=r.validate(i);if(o){(o.errors||[o]).forEach(r=>{r.path=[t].concat(r.path),r.data=e,a.push(r)})}else s[t]=c}return a.length?[l({},a[0],{errors:a})]:[void 0,s]})}function w(e,t,r){if("array"!==s(e))throw new Error(`Invalid schema: ${e}`);const n=e.map(e=>d(e,void 0,r)),i=n.map(e=>e.type).join(" | ");return new f("union",i,(e=h(t))=>{const r=[];for(const t of n){const[n,i]=t.validate(e);if(!n)return[void 0,i];r.push(n)}return r[0].type=i,r})}function v(e,t,r){if("array"!==s(e))throw new Error(`Invalid schema: ${e}`);const n=e.map(e=>d(e,void 0,r)),i=n.map(e=>e.type).join(" & ");return new f("intersection",i,(e=h(t))=>{let r=e;for(const e of n){const[t,n]=e.validate(r);if(t)return t.type=i,[t];r=n}return[void 0,r]})}const E={any:d,dict:function(e,t,r){if("array"!==s(e)||2!==e.length)throw new Error(`Invalid schema: ${e}`);const n=_("object",void 0,r),i=d(e[0],void 0,r),o=d(e[1],void 0,r),a=`dict<${i.type},${o.type}>`;return new f("dict",a,e=>{const r=h(t);e=r?l({},r,e):e;const[s]=n.validate(e);if(s)return s.type=a,[s];const c={},u=[];for(let t in e){const r=e[t],[n,s]=i.validate(t);if(n){(n.errors||[n]).forEach(r=>{r.path=[t].concat(r.path),r.data=e,u.push(r)});continue}t=s;const[a,h]=o.validate(r);if(a){(a.errors||[a]).forEach(r=>{r.path=[t].concat(r.path),r.data=e,u.push(r)})}else c[t]=h}return u.length?[l({},u[0],{errors:u})]:[void 0,c]})},enum:p,enums:function(e,t,r){return g([p(e,void 0)],t,r)},function:A,instance:function(e,t,r){const n=`instance<${e.name}>`;return new f("instance",n,(r=h(t))=>r instanceof e?[void 0,r]:[{data:r,path:[],value:r,type:n}])},interface:function(e,t,r){if("object"!==s(e))throw new Error(`Invalid schema: ${e}`);const n=_("object",void 0,r),i=[],o={};for(const t in e){i.push(t);const n=d(e[t],void 0,r);o[t]=n}const a=`{${i.join()}}`;return new f("interface",a,(e=h(t))=>{const[r]=n.validate(e);if(r)return r.type=a,[r];const i=[],s=e;for(const r in o){let n=e[r];const a=o[r];if(void 0===n){n=h(t&&t[r],e)}const[c,u]=a.validate(n,e);if(c){(c.errors||[c]).forEach(t=>{t.path=[r].concat(t.path),t.data=e,i.push(t)})}else(r in e||void 0!==u)&&(s[r]=u)}return i.length?[l({},i[0],{errors:i})]:[void 0,s]})},lazy:function(e,t,r){if("function"!==s(e))throw new Error(`Invalid schema: ${e}`);let n,i;return n=new f("lazy","lazy...",t=>(i=e(),n.name=i.kind,n.type=i.type,n.validate=i.validate,n.validate(t)))},list:g,literal:function(e,t,r){const n=`literal: ${JSON.stringify(e)}`;return new f("literal",n,(r=h(t))=>r===e?[void 0,r]:[{data:r,path:[],value:r,type:n}])},object:y,optional:m,partial:function(e,t,r){if("object"!==s(e))throw new Error(`Invalid schema: ${e}`);const n=_("object",void 0,r),i=[],o={};for(const t in e){i.push(t);const n=d(e[t],void 0,r);o[t]=n}const a=`{${i.join()},...}`;return new f("partial",a,(e=h(t))=>{const[r]=n.validate(e);if(r)return r.type=a,[r];const i=[],s={};for(const r in o){let n=e[r];const a=o[r];if(void 0===n){n=h(t&&t[r],e)}const[c,u]=a.validate(n,e);if(c){(c.errors||[c]).forEach(t=>{t.path=[r].concat(t.path),t.data=e,i.push(t)})}else(r in e||void 0!==u)&&(s[r]=u)}return i.length?[l({},i[0],{errors:i})]:[void 0,s]})},scalar:_,tuple:b,union:w,intersection:v,dynamic:function(e,t,r){if("function"!==s(e))throw new Error(`Invalid schema: ${e}`);return new f("dynamic","dynamic...",(r=h(t),n)=>{const i=e(r,n);if("function"!==s(i))throw new Error(`Invalid schema: ${i}`);const[o,a]=i.validate(r);return o?[o]:[void 0,a]})}},S={any:e=>void 0!==e};function C(e={}){const t=l({},S,e.types||{});function r(e,r,i={}){u(e)&&(e=e.schema);const s=E.any(e,r,l({},i,{types:t}));function o(e){if(this instanceof o)throw new Error("Invalid `new` keyword!");return o.assert(e)}return Object.defineProperty(o,a,{value:!0}),Object.defineProperty(o,c,{value:s}),o.kind=s.name,o.type=s.type,o.schema=e,o.defaults=r,o.options=i,o.assert=e=>{const[t,r]=s.validate(e);if(t)throw new n(t);return r},o.test=e=>{const[t]=s.validate(e);return!t},o.validate=e=>{const[t,r]=s.validate(e);return t?[new n(t)]:[void 0,r]},o}return Object.keys(E).forEach(e=>{const n=E[e];r[e]=(e,i,s)=>{return r(n(e,i,l({},s,{types:t})),i,s)}}),r}["arguments","array","boolean","buffer","error","float32array","float64array","function","generatorfunction","int16array","int32array","int8array","map","null","number","object","promise","regexp","set","string","symbol","uint16array","uint32array","uint8array","uint8clampedarray","undefined","weakmap","weakset"].forEach(e=>{S[e]=t=>s(t)===e}),S.date=e=>"date"===s(e)&&!isNaN(e);const k=C()},
/*!*********************************************!*\
  !*** ./node_modules/ipfs-repo/src/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! just-safe-get */344),i=r(/*! assert */24),s=r(/*! path */345),o=r(/*! debug */1),a=r(/*! bignumber.js */48),c=r(/*! err-code */8),u=r(/*! ./backends */681),h=r(/*! ./version */682),l=r(/*! ./config */684),f=r(/*! ./spec */692),d=r(/*! ./api-addr */694),p=r(/*! ./blockstore */695),A=r(/*! ./default-options */701),g=r(/*! ./default-datastore */738),y=r(/*! ./errors */208),m=o("repo"),_=Number.MAX_SAFE_INTEGER,b={memory:r(/*! ./lock-memory */371),fs:r(/*! ./lock */371)},w=r(/*! ./constants */739).repoVersion;async function v(e){let t=new a(0);for await(const r of e.query({}))t.plus(r.value.byteLength).plus(r.key._buf.byteLength);return t}e.exports=class{constructor(e,t){i.strictEqual(typeof e,"string","missing repoPath"),this.options=function(e){const t=Object.assign({},A,e);return t.storageBackends=Object.assign({},A.storageBackends,t.storageBackends),t.storageBackendOptions=Object.assign({},A.storageBackendOptions,t.storageBackendOptions),t}(t),this.closed=!0,this.path=e,this._locker=this._getLocker(),this.root=u.create("root",this.path,this.options),this.version=h(this.root),this.config=l(this.root),this.spec=f(this.root),this.apiAddr=d(this.root)}async init(e){var t;m("initializing at: %s",this.path),await this._openRoot(),await this.config.set((t=e,t.datastore=Object.assign({},g,n(t,"datastore",{})),t)),await this.spec.set(function(e){const t=Object.assign({},g.Spec,n(e,"datastore.Spec",{}));return{type:t.type,mounts:t.mounts.map(e=>({mountpoint:e.mountpoint,type:e.child.type,path:e.child.path,shardFunc:e.child.shardFunc}))}}(e)),await this.version.set(w)}async open(){if(!this.closed)throw c(new Error("repo is already open"),y.ERR_REPO_ALREADY_OPEN);m("opening at: %s",this.path);try{await this._openRoot(),await this._checkInitialized(),this.lockfile=await this._openLock(this.path),m("acquired repo.lock"),m("creating datastore"),this.datastore=u.create("datastore",s.join(this.path,"datastore"),this.options),m("creating blocks");const e=u.create("blocks",s.join(this.path,"blocks"),this.options);this.blocks=await p(e,this.options.storageBackendOptions.blocks),m("creating keystore"),this.keys=u.create("keys",s.join(this.path,"keys"),this.options),this.closed=!1,m("all opened")}catch(e){if(this.lockfile)try{await this._closeLock(),this.lockfile=null}catch(e){m("error removing lock",e)}throw e}}_getLocker(){return"string"==typeof this.options.lock?(i(b[this.options.lock],"Unknown lock type: "+this.options.lock),b[this.options.lock]):(i(this.options.lock,"No lock provided"),this.options.lock)}async _openRoot(){try{await this.root.open()}catch(e){if("Already open"!==e.message)throw e}}async _openLock(e){const t=await this._locker.lock(e);if("function"!=typeof t.close)throw c(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return t}_closeLock(){return this.lockfile.close()}async _checkInitialized(){let e;m("init check");try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.check(w)])}catch(e){if("ERR_NOT_FOUND"===e.code)throw c(new Error("repo is not initialized yet"),y.ERR_REPO_NOT_INITIALIZED,{path:this.path});throw e}if(!e)throw c(new Error("repo is not initialized yet"),y.ERR_REPO_NOT_INITIALIZED,{path:this.path})}async close(){if(this.closed)throw c(new Error("repo is already closed"),y.ERR_REPO_ALREADY_CLOSED);m("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==y.ERR_REPO_NOT_INITIALIZED&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.blocks,this.keys,this.datastore].map(e=>e.close())),m("unlocking"),this.closed=!0,await this._closeLock(),this.lockfile=null}async exists(){return this.version.exists()}async stat(e){let t,r,n,i,s;e=Object.assign({},{human:!1},e),[t,r,n,i,s]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),v(this.datastore),v(this.keys)]);let o=r.size.plus(i).plus(s);return e.human&&(o=o.div(1048576)),{repoPath:this.path,storageMax:t,version:n,numObjects:r.count,repoSize:o}}async _storageMaxStat(){try{const e=await this.config.get("Datastore.StorageMax");return new a(e)}catch(e){return new a(_)}}async _blockStat(){let e=new a(0),t=new a(0);for await(const r of this.blocks.query({}))e=e.plus(1),t=t.plus(r.value.byteLength).plus(r.key._buf.byteLength);return{count:e,size:t}}},e.exports.utils={blockstore:r(/*! ./blockstore-utils */353)},e.exports.repoVersion=w,e.exports.errors=y},
/*!*********************************!*\
  !*** ./node_modules/uuid/v4.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./lib/rng */347),i=r(/*! ./lib/bytesToUuid */348);e.exports=function(e,t,r){var s=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||i(o)}},
/*!****************************************************!*\
  !*** ./node_modules/ipfs-repo/src/errors/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";class n extends Error{constructor(e){super(e),this.name="LockExistsError",this.code="ERR_LOCK_EXISTS",this.message=e}}n.code="ERR_LOCK_EXISTS",t.LockExistsError=n;class i extends Error{constructor(e){super(e),this.name="NotFoundError",this.code="ERR_NOT_FOUND",this.message=e}}i.code="ERR_NOT_FOUND",t.NotFoundError=i,t.ERR_REPO_NOT_INITIALIZED="ERR_REPO_NOT_INITIALIZED",t.ERR_REPO_ALREADY_OPEN="ERR_REPO_ALREADY_OPEN",t.ERR_REPO_ALREADY_CLOSED="ERR_REPO_ALREADY_CLOSED"},
/*!**********************************************!*\
  !*** ./node_modules/level-supports/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! xtend */80),i=r(/*! xtend/mutable */707);e.exports=function(){var e=n.apply(null,arguments);return i(e,{bufferKeys:e.bufferKeys||!1,snapshots:e.snapshots||!1,permanence:e.permanence||!1,seek:e.seek||!1,clear:e.clear||!1,status:e.status||!1,createIfMissing:e.createIfMissing||!1,errorIfExists:e.errorIfExists||!1,deferredOpen:e.deferredOpen||!1,openCallback:e.openCallback||!1,promises:e.promises||!1,streams:e.streams||!1,encodings:e.encodings||!1,additionalMethods:n(e.additionalMethods)})}},
/*!****************************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/end-of-stream.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ../../../errors */81).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||h()},u=t._writableState&&t._writableState.finished,h=function(){a=!1,u=!0,o||s.call(t)},l=t._readableState&&t._readableState.endEmitted,f=function(){o=!1,l=!0,a||s.call(t)},d=function(e){s.call(t,e)},p=function(){var e;return o&&!l?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},A=function(){t.req.on("finish",h)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",h),t.on("abort",p),t.req?A():t.on("request",A)),t.on("end",f),t.on("finish",h),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",h),t.removeListener("abort",p),t.removeListener("request",A),t.req&&t.req.removeListener("finish",h),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",h),t.removeListener("end",f),t.removeListener("error",d),t.removeListener("close",p)}}},
/*!*********************************************!*\
  !*** ./node_modules/level-errors/errors.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! errno */718).create,i=n("LevelUPError"),s=n("NotFoundError",i);s.prototype.notFound=!0,s.prototype.status=404,e.exports={LevelUPError:i,InitializationError:n("InitializationError",i),OpenError:n("OpenError",i),ReadError:n("ReadError",i),WriteError:n("WriteError",i),NotFoundError:s,EncodingError:n("EncodingError",i)}},
/*!*****************************************************************************!*\
  !*** ./node_modules/encoding-down/node_modules/abstract-leveldown/index.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){t.AbstractLevelDOWN=r(/*! ./abstract-leveldown */722),t.AbstractIterator=r(/*! ./abstract-iterator */364),t.AbstractChainedBatch=r(/*! ./abstract-chained-batch */365)},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/des.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);function i(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.des.Algorithm(e,t)}))}r(/*! ./cipher */373),r(/*! ./cipherModes */374),r(/*! ./util */20),e.exports=n.des=n.des||{},n.des.startEncrypting=function(e,t,r,n){var i=p({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},n.des.createEncryptionCipher=function(e,t){return p({key:e,output:null,decrypt:!1,mode:t})},n.des.startDecrypting=function(e,t,r,n){var i=p({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},n.des.createDecryptionCipher=function(e,t){return p({key:e,output:null,decrypt:!0,mode:t})},n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return d(r._keys,e,t,!1)},decrypt:function(e,t){return d(r._keys,e,t,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=n.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],h=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],A=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,y=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],_=0,b=0;b<g;b++){var w=e.getInt32(),v=e.getInt32();w^=(t=252645135&(w>>>4^v))<<4,w^=t=65535&((v^=t)>>>-16^w),w^=(t=858993459&(w>>>2^(v^=t<<-16)))<<2,w^=t=65535&((v^=t)>>>-16^w),w^=(t=1431655765&(w>>>1^(v^=t<<-16)))<<1,w^=t=16711935&((v^=t)>>>8^w),t=(w^=(t=1431655765&(w>>>1^(v^=t<<8)))<<1)<<8|(v^=t)>>>20&240,w=v<<24|v<<8&16711680|v>>>8&65280|v>>>24&240,v=t;for(var E=0;E<m.length;++E){m[E]?(w=w<<2|w>>>26,v=v<<2|v>>>26):(w=w<<1|w>>>27,v=v<<1|v>>>27);var S=r[(w&=-15)>>>28]|n[w>>>24&15]|i[w>>>20&15]|s[w>>>16&15]|o[w>>>12&15]|a[w>>>8&15]|c[w>>>4&15],C=u[(v&=-15)>>>28]|h[v>>>24&15]|l[v>>>20&15]|f[v>>>16&15]|d[v>>>12&15]|p[v>>>8&15]|A[v>>>4&15];t=65535&(C>>>16^S),y[_++]=S^t,y[_++]=C^t<<16}}return y}(t),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],h=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],l=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],f=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function d(e,t,r,n){var i,d,p=32===e.length?3:9;i=3===p?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var A=t[0],g=t[1];A^=(d=252645135&(A>>>4^g))<<4,A^=(d=65535&(A>>>16^(g^=d)))<<16,A^=d=858993459&((g^=d)>>>2^A),A^=d=16711935&((g^=d<<2)>>>8^A),A=(A^=(d=1431655765&(A>>>1^(g^=d<<8)))<<1)<<1|A>>>31,g=(g^=d)<<1|g>>>31;for(var y=0;y<p;y+=3){for(var m=i[y+1],_=i[y+2],b=i[y];b!=m;b+=_){var w=g^e[b],v=(g>>>4|g<<28)^e[b+1];d=A,A=g,g=d^(o[w>>>24&63]|c[w>>>16&63]|h[w>>>8&63]|f[63&w]|s[v>>>24&63]|a[v>>>16&63]|u[v>>>8&63]|l[63&v])}d=A,A=g,g=d}g=g>>>1|g<<31,g^=d=1431655765&((A=A>>>1|A<<31)>>>1^g),g^=(d=16711935&(g>>>8^(A^=d<<1)))<<8,g^=(d=858993459&(g>>>2^(A^=d)))<<2,g^=d=65535&((A^=d)>>>16^g),g^=d=252645135&((A^=d<<16)>>>4^g),A^=d<<4,r[0]=A,r[1]=g}function p(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var s=null;r instanceof n.util.ByteBuffer&&(s=r,r={}),(r=r||{}).output=s,r.iv=e,i.call(t,r)},t}},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/pem.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./util */20);var i=e.exports=n.pem=n.pem||{};function s(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var s=0,o=-1;for(i=0;i<t.length;++i,++s)if(s>65&&-1!==o){var a=t[o];","===a?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+a+t.substr(o+1),s=i-o-1,o=-1,++i}else" "!==t[i]&&"\t"!==t[i]&&","!==t[i]||(o=i);return t}function o(e){return e.replace(/^\s+/,"")}i.encode=function(e,t){t=t||{};var r,i="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(i+=s(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(i+=s(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),i+=s(r)),e.headers)for(var o=0;o<e.headers.length;++o)i+=s(e.headers[o]);return e.procType&&(i+="\r\n"),i+=n.util.encode64(e.body,t.maxline||64)+"\r\n",i+="-----END "+e.type+"-----\r\n"},i.decode=function(e){for(var t,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;t=i.exec(e);){var c={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(t[3])};if(r.push(c),t[2]){for(var u=t[2].split(a),h=0;t&&h<u.length;){for(var l=u[h].replace(/\s+$/,""),f=h+1;f<u.length;++f){var d=u[f];if(!/\s/.test(d[0]))break;l+=d,h=f}if(t=l.match(s)){for(var p={name:t[1],values:[]},A=t[2].split(","),g=0;g<A.length;++g)p.values.push(o(A[g]));if(c.procType)if(c.contentDomain||"Content-Domain"!==p.name)if(c.dekInfo||"DEK-Info"!==p.name)c.headers.push(p);else{if(0===p.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:A[0],parameters:A[1]||null}}else c.contentDomain=A[0]||"";else{if("Proc-Type"!==p.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==p.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:A[0],type:A[1]}}}++h}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!****************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/constants.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={maxProvidersPerRequest:3,providerRequestTimeout:1e4,hasBlockTimeout:15e3,provideTimeout:15e3,kMaxPriority:Math.pow(2,31)-1,rebroadcastDelay:1e4,maxListeners:1e3}},
/*!**************************************************!*\
  !*** ./node_modules/pull-stream/sources/once.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ../util/abort-cb */381);e.exports=function(e,t){return function(r,i){if(r)return n(i,r,t);if(null!=e){var s=e;e=null,i(null,s)}else i(!0)}}},
/*!***************************************************!*\
  !*** ./node_modules/pull-stream/sources/error.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e){return function(t,r){r(e)}}},
/*!**************************************************!*\
  !*** ./node_modules/pull-stream/sinks/reduce.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./drain */110);e.exports=function(e,t,r){r||(r=t,t=null);var i=n((function(r){t=e(t,r)}),(function(e){r(e,t)}));return 2===arguments.length?function(e){e(null,(function(n,s){if(n)return r(!0===n?null:n);t=s,i(e)}))}:i}},
/*!********************************************************!*\
  !*** ./node_modules/pull-stream/throughs/async-map.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(e){return e}var i=r(/*! ../util/prop */111);e.exports=function(e){if(!e)return n;e=i(e);var t,r,s=!1;return function(n){return function i(o,a){if(r)return a(r);o?(r=o,n(o,s?function(e){s?t=a:a(o)}:function(e){a(o)})):n(null,(function(n,o){n?a(n):r?a(r):(s=!0,e(o,(function(e,n){s=!1,r?(a(r),t&&t(r)):e?i(e,a):a(null,n)})))}))}}}},
/*!******************************************************!*\
  !*** ./node_modules/pull-stream/throughs/through.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t){var r=!1;function n(e){!r&&t&&(r=!0,t(!0===e?null:e))}return function(t){return function(r,i){return r&&n(r),t(r,(function(t,r){t?n(t):e&&e(r),i(t,r)}))}}}},
/*!***************************************************!*\
  !*** ./node_modules/pull-stream/throughs/take.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t){var r=(t=t||{}).last||!1,n=!1;if("number"==typeof e){r=!0;var i=e;e=function(){return--i}}return function(t){function i(e){t(!0,(function(t){r=!1,e(t||!0)}))}return function(s,o){n&&!s?r?i(o):o(n):(n=s)?t(n,o):t(null,(function(t,s){(n=n||t)?o(n):e(s)?o(null,s):(n=!0,r?o(null,s):i(o))}))}}}},
/*!***************************************!*\
  !*** ./node_modules/hashlru/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function i(i,s){r[i]=s,++t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return void 0!==r[e]||void 0!==n[e]},remove:function(e){void 0!==r[e]&&(r[e]=void 0),void 0!==n[e]&&(n[e]=void 0)},get:function(e){var t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(i(e,t),t):void 0},set:function(e,t){void 0!==r[e]?r[e]=t:i(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},
/*!*******************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/utils/default-config.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../../package.json */826);e.exports=()=>({"api-path":"/api/v0/","user-agent":`/node-${n.name}/${n.version}/`,host:"localhost",port:"5001",protocol:"http"})},
/*!************************************!*\
  !*** ./node_modules/pump/index.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! once */31),i=r(/*! end-of-stream */836),s=r(/*! fs */837),o=function(){},a=/^v?\.0/.test(t.version),c=function(e){return"function"==typeof e},u=function(e,t,r,u){u=n(u);var h=!1;e.on("close",(function(){h=!0})),i(e,{readable:t,writable:r},(function(e){if(e)return u(e);h=!0,u()}));var l=!1;return function(t){if(!h&&!l)return l=!0,function(e){return!!a&&(!!s&&((e instanceof(s.ReadStream||o)||e instanceof(s.WriteStream||o))&&c(e.close)))}(e)?e.close(o):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void u(t||new Error("stream was destroyed"))}},h=function(e){e()},l=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=c(t[t.length-1]||o)&&t.pop()||o;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(i,s){var o=s<t.length-1;return u(i,o,s>0,(function(t){e||(e=t),t&&n.forEach(h),o||(n.forEach(h),r(e))}))}));return t.reduce(l)}}).call(this,r(/*! ./../process/browser.js */2))},
/*!********************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/utils/stream-to-value.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pump */225),i=r(/*! concat-stream */842);e.exports=function(e,t){let r;n(e,i(e=>{r=e}),e=>t(e,r))}},
/*!**************************************!*\
  !*** ./node_modules/async/eachOf.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){((0,n.default)(e)?f:d)(e,(0,h.default)(t),r)};var n=l(r(/*! lodash/isArrayLike */115)),i=l(r(/*! ./internal/breakLoop */230)),s=l(r(/*! ./eachOfLimit */407)),o=l(r(/*! ./internal/doLimit */231)),a=l(r(/*! lodash/noop */42)),c=l(r(/*! ./internal/once */202)),u=l(r(/*! ./internal/onlyOnce */105)),h=l(r(/*! ./internal/wrapAsync */33));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r){r=(0,c.default)(r||a.default);var n=0,s=0,o=e.length;function h(e,t){e?r(e):++s!==o&&t!==i.default||r(null)}for(0===o&&r(null);n<o;n++)t(e[n],n,(0,u.default)(h))}var d=(0,o.default)(s.default,1/0);e.exports=t.default},
/*!*******************************************!*\
  !*** ./node_modules/lodash/isFunction.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseGetTag */153),i=r(/*! ./isObject */201),s="[object AsyncFunction]",o="[object Function]",a="[object GeneratorFunction]",c="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=n(e);return t==o||t==a||t==s||t==c}},
/*!****************************************!*\
  !*** ./node_modules/lodash/_Symbol.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_root */154).Symbol;e.exports=n},
/*!**************************************************!*\
  !*** ./node_modules/async/internal/breakLoop.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={},e.exports=t.default},
/*!************************************************!*\
  !*** ./node_modules/async/internal/doLimit.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(r,n,i){return e(r,t,n,i)}},e.exports=t.default},
/*!*********************************************************!*\
  !*** ./node_modules/libp2p-pubsub/src/message/index.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! protons */28),i=n(r(/*! ./rpc.proto.js */881)),s=i.RPC,o=n(r(/*! ./topic-descriptor.proto.js */882));(t=e.exports).rpc=i,t.td=o,t.RPC=s,t.Message=s.Message,t.SubOpts=s.SubOpts},
/*!***************************************************!*\
  !*** ./node_modules/async/internal/doParallel.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,r,s){return e(n.default,t,(0,i.default)(r),s)}};var n=s(r(/*! ../eachOf */227)),i=s(r(/*! ./wrapAsync */33));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!******************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/socket.io-parser/index.js ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! debug */916)("socket.io-parser"),i=r(/*! component-emitter */87),s=r(/*! ./binary */919),o=r(/*! isarray */235),a=r(/*! ./is-buffer */419);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=l;var u=t.ERROR+'"encode error"';function h(e){var r=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(r+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(r+=e.nsp+","),null!=e.id&&(r+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return u;r+=i}return n("encoded %j as %s",e,r),r}function l(){this.reconstructor=null}function f(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,r){(n("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){s.removeBlobs(e,(function(e){var r=s.deconstructPacket(e),n=h(r.packet),i=r.buffers;i.unshift(n),t(i)}))}(e,r):r([h(e)])},i(l.prototype),l.prototype.add=function(e){var r;if("string"==typeof e)r=function(e){var r=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return d("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var s="";"-"!==e.charAt(++r)&&(s+=e.charAt(r),r!=e.length););if(s!=Number(s)||"-"!==e.charAt(r))throw new Error("Illegal attachments");i.attachments=Number(s)}if("/"===e.charAt(r+1))for(i.nsp="";++r;){if(","===(c=e.charAt(r)))break;if(i.nsp+=c,r===e.length)break}else i.nsp="/";var a=e.charAt(r+1);if(""!==a&&Number(a)==a){for(i.id="";++r;){var c;if(null==(c=e.charAt(r))||Number(c)!=c){--r;break}if(i.id+=e.charAt(r),r===e.length)break}i.id=Number(i.id)}if(e.charAt(++r)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(r));if(!(!1!==u&&(i.type===t.ERROR||o(u))))return d("invalid payload");i.data=u}return n("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type?(this.reconstructor=new f(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",r))}},l.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},
/*!*************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/xmlhttprequest.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! has-cors */922);e.exports=function(e){var t=e.xdomain,r=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(e){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},
/*!********************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transport.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! engine.io-parser */88),i=r(/*! component-emitter */87);function s(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=s,i(s.prototype),s.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},s.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},s.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},s.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},s.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},s.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},s.prototype.onPacket=function(e){this.emit("packet",e)},s.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},
/*!**************************************************!*\
  !*** ./node_modules/libp2p-secio/src/support.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! multihashing-async */959),i=r(/*! pull-length-prefixed */30),s=r(/*! pull-stream/pull */17),o=r(/*! pull-stream/sources/values */55),a=r(/*! pull-stream/sinks/collect */85),c=r(/*! libp2p-crypto */36),u=r(/*! async/parallel */56);t.exchanges=["P-256","P-384","P-521"],t.ciphers=["AES-256","AES-128"],t.hashes=["SHA256","SHA512"],t.theBest=(e,t,r)=>{let n,i;if(e<0)n=r,i=t;else{if(!(e>0))return t[0];n=t,i=r}for(let e of n)for(let t of i)if(e===t)return e;throw new Error("No algorithms in common!")},t.makeMacAndCipher=(e,t)=>{u([t=>(function(e,t,r){c.hmac.create(e,t,r)})(e.hashT,e.keys.macKey,t),t=>(function(e,t,r,n){if("AES-128"===e||"AES-256"===e)return c.aes.create(r,t,n);n(new Error(`unrecognized cipher type: ${e}`))})(e.cipherT,e.keys.iv,e.keys.cipherKey,t)],(r,n)=>{if(r)return t(r);e.mac=n[0],e.cipher=n[1],t()})},t.selectBest=(r,n,i)=>{t.digest(e.concat([n.pubKeyBytes,r.nonce]),(s,o)=>{if(s)return i(s);t.digest(e.concat([r.pubKeyBytes,n.nonce]),(s,a)=>{if(s)return i(s);const c=e.compare(o,a);if(0===c)return i(new Error("you are trying to talk to yourself"));i(null,{curveT:t.theBest(c,r.exchanges,n.exchanges),cipherT:t.theBest(c,r.ciphers,n.ciphers),hashT:t.theBest(c,r.hashes,n.hashes),order:c})})})},t.digest=(e,t)=>{n.digest(e,"sha2-256",e.length,t)},t.write=function(e,t,r){r=r||(()=>{}),s(o([t]),i.encode({fixed:!0,bytes:4}),a((t,n)=>{if(t)return r(t);e.shake.write(n[0]),r()}))},t.read=function(e,t){i.decodeFromReader(e,{fixed:!0,bytes:4},t)}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************************************!*\
  !*** ./node_modules/libp2p-secio/src/handshake/crypto.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! protons */28),i=r(/*! peer-id */7),s=r(/*! libp2p-crypto */36),o=r(/*! async/parallel */56),a=r(/*! async/waterfall */54),c=r(/*! debug */1),u=c("libp2p:secio");u.error=c("libp2p:secio:error");const h=n(r(/*! ./secio.proto */963)),l=r(/*! ../support */238);t.createProposal=e=>(e.proposal.out={rand:s.randomBytes(16),pubkey:e.key.local.public.bytes,exchanges:l.exchanges.join(","),ciphers:l.ciphers.join(","),hashes:l.hashes.join(",")},e.proposalEncoded.out=h.Propose.encode(e.proposal.out),e.proposalEncoded.out),t.createExchange=(t,r)=>{s.keys.generateEphemeralKeyPair(t.protocols.local.curveT,(n,i)=>{if(n)return r(n);t.ephemeralKey.local=i.key,t.shared.generate=i.genSharedKey;const s=e.concat([t.proposalEncoded.out,t.proposalEncoded.in,t.ephemeralKey.local]);t.key.local.sign(s,(e,n)=>{if(e)return r(e);t.exchange.out={epubkey:t.ephemeralKey.local,signature:n},r(null,h.Exchange.encode(t.exchange.out))})})},t.identify=(e,t,r)=>{u("1.1 identify"),e.proposalEncoded.in=t,e.proposal.in=h.Propose.decode(t);const n=e.proposal.in.pubkey;e.key.remote=s.keys.unmarshalPublicKey(n),i.createFromPubKey(n.toString("base64"),(t,n)=>{if(t)return r(t);if(e.id.remote){if(e.id.remote.toB58String()!==n.toB58String())return r(new Error("dialed to the wrong peer, Ids do not match"))}else e.id.remote=n;u("1.1 identify - %s - identified remote peer as %s",e.id.local.toB58String(),e.id.remote.toB58String()),r()})},t.selectProtocols=(e,t)=>{u("1.2 selection");const r={pubKeyBytes:e.key.local.public.bytes,exchanges:l.exchanges,hashes:l.hashes,ciphers:l.ciphers,nonce:e.proposal.out.rand},n={pubKeyBytes:e.proposal.in.pubkey,exchanges:e.proposal.in.exchanges.split(","),hashes:e.proposal.in.hashes.split(","),ciphers:e.proposal.in.ciphers.split(","),nonce:e.proposal.in.rand};l.selectBest(r,n,(r,n)=>{if(r)return t(r);e.protocols.remote={order:n.order,curveT:n.curveT,cipherT:n.cipherT,hashT:n.hashT},e.protocols.local={order:n.order,curveT:n.curveT,cipherT:n.cipherT,hashT:n.hashT},t()})},t.verify=(t,r,n)=>{u("2.1. verify"),t.exchange.in=h.Exchange.decode(r),t.ephemeralKey.remote=t.exchange.in.epubkey;const i=e.concat([t.proposalEncoded.in,t.proposalEncoded.out,t.ephemeralKey.remote]);t.key.remote.verify(i,t.exchange.in.signature,(e,t)=>e?n(e):t?(u("2.1. verify - signature verified"),void n()):n(new Error("Bad signature")))},t.generateKeys=(e,t)=>{u("2.2. keys"),a([t=>e.shared.generate(e.exchange.in.epubkey,t),(t,r)=>{e.shared.secret=t,s.keys.keyStretcher(e.protocols.local.cipherT,e.protocols.local.hashT,e.shared.secret,r)},(t,r)=>{if(e.protocols.local.order>0)e.protocols.local.keys=t.k1,e.protocols.remote.keys=t.k2;else{if(!(e.protocols.local.order<0))return r(new Error("you are trying to talk to yourself"));e.protocols.local.keys=t.k2,e.protocols.remote.keys=t.k1}u("2.3. mac + cipher"),o([t=>l.makeMacAndCipher(e.protocols.local,t),t=>l.makeMacAndCipher(e.protocols.remote,t)],r)}],t)},t.verifyNonce=(e,t)=>{const r=e.proposal.out.rand;if(!r.equals(t))throw new Error(`Failed to read our encrypted nonce: ${r.toString("hex")} != ${t.toString("hex")}`)}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************!*\
  !*** ./node_modules/xor-distance/index.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){function r(e,r){if(e.length!==r.length)throw new Error("Inputs should have the same length");for(var n=t.allocUnsafe(e.length),i=0;i<e.length;i++)n[i]=e[i]^r[i];return n}e.exports=r,r.compare=function(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");for(var r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0},r.gt=function(e,t){return 1===r.compare(e,t)},r.lt=function(e,t){return-1===r.compare(e,t)},r.eq=function(e,t){return 0===r.compare(e,t)}}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************************!*\
  !*** ./node_modules/libp2p/src/circuit/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=r(/*! ./circuit */1029)},
/*!*******************************************************************!*\
  !*** ./node_modules/libp2p/src/circuit/circuit/stream-handler.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream/sources/values */55),i=r(/*! pull-stream/sinks/collect */85),s=r(/*! pull-stream/sources/empty */109),o=r(/*! pull-stream/pull */17),a=r(/*! pull-length-prefixed */30),c=r(/*! pull-handshake */67),u=r(/*! debug */1),h=u("libp2p:circuit:stream-handler");h.err=u("libp2p:circuit:error:stream-handler");e.exports=class{constructor(e,t,r,n){this.conn=e,this.stream=null,this.shake=null,this.timeout=t||6e4,this.maxLength=n||4096,"function"==typeof t&&(this.timeout=r||6e4),this.stream=c({timeout:this.timeout},t),this.shake=this.stream.handshake,o(this.stream,e,this.stream)}isValid(){return this.conn&&this.shake&&this.stream}read(e){if(!this.isValid())return e(new Error("handler is not in a valid state"));a.decodeFromReader(this.shake,{maxLength:this.maxLength},(t,r)=>t?(h.err(t),e(t)):e(null,r))}write(e,t){if(t=t||(()=>{}),!this.isValid())return t(new Error("handler is not in a valid state"));o(n([e]),a.encode(),i((e,r)=>{if(e)return h.err(e),this.shake.abort(e),t(e);r.forEach(e=>this.shake.write(e)),t()}))}getRawConn(){return this.conn}rest(){const e=this.shake.rest();return this.conn=null,this.stream=null,this.shake=null,e}close(){this.isValid()&&o(s(),this.rest())}}},
/*!*******************************************************!*\
  !*** ./node_modules/libp2p/src/circuit/multicodec.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={relay:"/libp2p/circuit/relay/0.1.0"}},
/*!***************************************!*\
  !*** ./node_modules/async/tryEach.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r,a=null;t=t||n.default,(0,i.default)(e,(function(e,t){(0,s.default)(e)((function(e,n){r=arguments.length>2?(0,o.default)(arguments,1):n,a=e,t(!e)}))}),(function(){t(a,r)}))};var n=a(r(/*! lodash/noop */42)),i=a(r(/*! ./eachSeries */445)),s=a(r(/*! ./internal/wrapAsync */33)),o=a(r(/*! ./internal/slice */76));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p/src/switch/constants.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={DENY_TTL:3e5,DENY_ATTEMPTS:5,DIAL_TIMEOUT:3e4,MAX_COLD_CALLS:50,MAX_PARALLEL_DIALS:100,QUARTER_HOUR:9e5,PRIORITY_HIGH:10,PRIORITY_LOW:20}},
/*!*************************************************!*\
  !*** ./node_modules/libp2p/src/switch/utils.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../identify */247);e.exports.msHandle=(e,t)=>new Promise((r,n)=>{e.handle(t,e=>{if(e)return n(e);r()})}),e.exports.msSelect=(e,t)=>new Promise((r,n)=>{e.select(t,(e,t)=>{if(e)return n(e);r(t)})}),e.exports.identifyDialer=(e,t)=>new Promise((r,i)=>{n.dialer(e,t,(e,t,n)=>{if(e)return i(e);r({peerInfo:t,observedAddrs:n})})}),e.exports.uniqueBy=(e,t)=>[...new Map(e.map(e=>[t(e),e])).values()]},
/*!***************************************************!*\
  !*** ./node_modules/libp2p/src/identify/index.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(t=e.exports).multicodec="/ipfs/id/1.0.0",t.listener=r(/*! ./listener */1037),t.dialer=r(/*! ./dialer */1038),t.message=r(/*! ./message */248)},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p/src/identify/message.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! protons */28);e.exports=n("\nmessage Identify {\n  // protocolVersion determines compatibility between peers\n  optional string protocolVersion = 5; // e.g. ipfs/1.0.0\n\n  // agentVersion is like a UserAgent string in browsers, or client version in bittorrent\n  // includes the client name and client.\n  optional string agentVersion = 6; // e.g. go-ipfs/0.1.0\n\n  // publicKey is this node's public key (which also gives its node.ID)\n  // - may not need to be sent, as secure channel implies it has been sent.\n  // - then again, if we change / disable secure channel, may still want it.\n  optional bytes publicKey = 1;\n\n  // listenAddrs are the multiaddrs the sender node listens for open connections on\n  repeated bytes listenAddrs = 2;\n\n  // oservedAddr is the multiaddr of the remote endpoint that the sender node perceives\n  // this is useful information to convey to the other side, as it helps the remote endpoint\n  // determine whether its connection to the local peer goes through NAT.\n  optional bytes observedAddr = 4;\n\n  repeated string protocols = 3;\n}\n").Identify},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p/src/switch/observe-connection.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! interface-connection */38).Connection,i=r(/*! pull-stream/pull */17);e.exports=(e,t,r,s)=>{const o=new Promise((e,t)=>{r.getPeerInfo((t,n)=>{if(!t&&n)return void e(n);const i=r.setPeerInfo;r.setPeerInfo=t=>{i.call(r,t),e(t)}})}),a={source:i(r,s.incoming(e,t,o)),sink:i(s.outgoing(e,t,o),r)};return new n(a,r)}},
/*!***************************************************!*\
  !*** ./node_modules/libp2p/src/ping/constants.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32}},
/*!*****************************************!*\
  !*** ./node_modules/lodash/isSymbol.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseGetTag */153),i=r(/*! ./isObjectLike */155),s="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&n(e)==s}},
/*!*******************************************!*\
  !*** ./node_modules/libp2p/src/errors.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available"},t.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF"}},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs/src/core/runtime/config-browser.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=()=>({Addresses:{Swarm:[],API:"",Gateway:"",Delegates:[]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dns4/ams-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd","/dns4/lon-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3","/dns4/sfo-3.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM","/dns4/sgp-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu","/dns4/nyc-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm","/dns4/nyc-2.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64","/dns4/node0.preload.ipfs.io/tcp/443/wss/ipfs/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/ipfs/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:200,HighWater:500}}})},
/*!***********************************************!*\
  !*** ./node_modules/promise-nodeify/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t,r){
/** @module promise-nodeify
 * @copyright Copyright 2016-2018 Kevin Locke <kevin@kevinlocke.name>
 * @license MIT
 */
const n=void 0!==t&&"function"==typeof t.nextTick?t.nextTick:"function"==typeof r?r:setTimeout;function i(e,t,r){try{t?e(t):e(null,r)}catch(e){n(()=>{throw e})}}function s(e,t){if("function"!=typeof t)return e;e.then((function(e){i(t,null,e)}),(function(e){let r=e;r||((r=new Error(String(e))).cause=e),i(t,r)}))}s.delegated=function(e,t){return"function"==typeof e.nodeify?e.nodeify(t):s(e,t)},s.nodeifyThis=function(e){return s(this,e)},e.exports=s}).call(this,r(/*! ./../process/browser.js */2),r(/*! ./../timers-browserify/main.js */41).setImmediate)},
/*!**********************************************!*\
  !*** ./node_modules/ky-universal/browser.js ***!
  \**********************************************/
/*! exports provided: default, HTTPError, TimeoutError */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./node_modules/ipfs/src/core/components/files-regular/add-from-url.js (referenced with cjs require), ./node_modules/ipfs/src/core/runtime/dns-browser.js (referenced with cjs require), ./node_modules/ipfs/src/core/runtime/preload-browser.js (referenced with cjs require) */function(e,t,r){"use strict";r.r(t);var n=r(/*! ky */166);r.d(t,"default",(function(){return n.c})),r.d(t,"HTTPError",(function(){return n.a})),r.d(t,"TimeoutError",(function(){return n.b}))},
/*!*************************************************************!*\
  !*** ./node_modules/pull-stream-to-async-iterator/index.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! pull-stream/pull */17);e.exports=e=>(async function*(){let t;for(n(e,e=>{t=()=>new Promise((t,r)=>{e(null,(e,n)=>!0===e?t({end:e}):e?r(e):void t({data:n}))})});;){const{end:e,data:r}=await t();if(e)break;yield r}})()},
/*!****************************************************!*\
  !*** ./node_modules/async-iterator-batch/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=async function*(e,t){let r=[];for await(const n of e)for(r=r.concat(n);r.length>=t;)yield r.slice(0,t),r=r.slice(t);for(;r.length;)yield r.slice(0,t),r=r.slice(t)}},
/*!******************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/dir.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=class{constructor(e,t){this.options=t||{},Object.assign(this,e)}}},
/*!**************************************************!*\
  !*** ./node_modules/hamt-sharding/src/bucket.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! sparse-array */1161),i=r(/*! ./consumable-hash */1162),s={bits:8};class o{constructor(e,t,r){if(this._options=Object.assign({},s,e),this._popCount=0,this._parent=t,this._posAtParent=r,!this._options.hashFn)throw new Error("please define an options.hashFn");this._options.hash||(this._options.hash=i(this._options.hashFn)),this._children=new n}static isBucket(e){return e instanceof o}async put(e,t){const r=await this._findNewBucketAndPos(e);await r.bucket._putAt(r,e,t)}async get(e){const t=await this._findChild(e);if(t)return t.value}async del(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);r&&r.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce((e,t)=>t instanceof o?e+t.leafCount():e+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)if(t instanceof o)for(const e of t.eachLeafSeries())yield e;else yield t}serialize(e,t){return t(this._children.reduce((r,n,i)=>(n&&(n instanceof o?r.push(n.serialize(e,t)):r.push(e(n,i))),r),[]))}async asyncTransform(e,t){return async function e(t,r,n){const i=[];for(const s of t._children.compactArray()){if(s instanceof o)await e(s,r,n);else{const e=await r(s);i.push({bitField:t._children.bitField(),children:e})}return n(i)}}(this,e,t)}toJSON(){return this.serialize(c,u)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);if(r&&r.key===e)return r}async _findPlace(e){const t=this._options.hash(e),r=await t.take(this._options.bits),n=this._children.get(r);return n instanceof o?n._findPlace(t):{bucket:this,pos:r,hash:t}}async _findNewBucketAndPos(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);if(r&&r.key!==e){const e=new o(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const n=await e._findPlace(r.hash);return n.bucket._putAt(n,r.key,r.value),e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)||this._popCount++,this._children.set(e,t)}_delAt(e){this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(1===this._popCount){const e=this._children.find(a);if(!(e instanceof o)){const t=e.hash;t.untake(this._options.bits);const r={pos:this._posAtParent,hash:t};this._parent._putAt(r,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function a(e){return Boolean(e)}function c(e,t){return e.key}function u(e){return e}e.exports=o},
/*!********************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/to-path-components.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)},
/*!*************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/mkdir.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */44),i=r(/*! debug */1)("ipfs:mfs:mkdir"),s=r(/*! ipfs-unixfs-exporter */52),o=r(/*! ./utils/create-node */1212),a=r(/*! ./utils/to-path-components */260),c=r(/*! ./utils/update-mfs-root */172),u=r(/*! ./utils/update-tree */173),h=r(/*! ./utils/add-link */174),l=r(/*! ./utils/with-mfs-root */477),f=r(/*! ./utils/apply-default-options */53),{FILE_SEPARATOR:d}=r(/*! ./utils/constants */46),p={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,format:"dag-pb",flush:!0};e.exports=e=>(async function(t,r){if(r=f(r,p),!t)throw new Error("no path given to Mkdir");if((t=t.trim())===d){if(r.parents)return;throw n(new Error(`cannot create directory '${d}': Already exists`),"ERR_INVALID_PATH")}if(t.substring(0,1)!==d)throw n(new Error("paths must start with a leading /"),"ERR_INVALID_PATH");i(`Creating ${t}`);const h=a(t);if("ipfs"===h[0])throw n(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");const g=await l(e);let y;const m=[],_=await o(e,"directory",r);for(let t=0;t<=h.length;t++){const o=h.slice(0,t),a=`/ipfs/${g}/${o.join("/")}`;try{if(y=await s(a,e.ipld),i(`${a} existed`),i(`${a} had children ${y.node.Links.map(e=>e.Name)}`),t===h.length){if(r.parents)return;throw n(new Error("file already exists"),"ERR_ALREADY_EXISTS")}m.push({name:y.name,cid:y.cid})}catch(i){if("ERR_NOT_FOUND"!==i.code)throw i;if(t<h.length&&!r.parents)throw n(new Error(`Intermediate directory path ${a} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await A(e,o[o.length-1],_,m[m.length-1],m,r)}}const b=await u(e,m,r);await c(e,b)});const A=async(e,t,r,n,s,o)=>{i(`Adding empty dir called ${t} to ${n.cid}`);const a=await h(e,{parent:n.node,parentCid:n.cid,size:r.node.size,cid:r.cid,name:t,format:o.format,hashAlg:o.hashAlg,cidVersion:o.cidVersion});s[s.length-1].cid=a.cid,s.push({name:t,cid:r.cid})}},
/*!************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/to-sources.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./to-mfs-path */71);e.exports=async function(e,t){Array.isArray(t[0])&&(t=t[0]);const r=t.filter(e=>"string"==typeof e).map(e=>e.trim());return{sources:await n(e,r)}}},
/*!**********************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/to-trail.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-unixfs-exporter */52),i=r(/*! debug */1)("ipfs:mfs:utils:to-trail");e.exports=async(e,t)=>{i(`Creating trail for path ${t}`);const r=[];for await(const i of n.path(t,e.ipld))r.push({name:i.name,cid:i.cid,size:i.node.size,type:i.unixfs?i.unixfs.type:void 0});return r}},
/*!******************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-descriptor.js ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/descriptors */93),i=r(/*! ../internals/object-property-is-enumerable */496),s=r(/*! ../internals/create-property-descriptor */265),o=r(/*! ../internals/to-indexed-object */176),a=r(/*! ../internals/to-primitive */266),c=r(/*! ../internals/has */95),u=r(/*! ../internals/ie8-dom-define */267),h=Object.getOwnPropertyDescriptor;t.f=n?h:function(e,t){if(e=o(e),t=a(t,!0),u)try{return h(e,t)}catch(e){}if(c(e,t))return s(!i.f.call(e,t),e[t])}},
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/internals/create-property-descriptor.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/to-primitive.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/is-object */128);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/ie8-dom-define.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/descriptors */93),i=r(/*! ../internals/fails */94),s=r(/*! ../internals/document-create-element */268);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/internals/document-create-element.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/global */40),i=r(/*! ../internals/is-object */128),s=n.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/function-to-string.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/shared */130);e.exports=n("native-function-to-string",Function.toString)},
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/shared-key.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/shared */130),i=r(/*! ../internals/uid */271),s=n("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},
/*!***********************************************!*\
  !*** ./node_modules/core-js/internals/uid.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+n).toString(36)}},
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/get-built-in.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/path */507),i=r(/*! ../internals/global */40),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(n[e])||s(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},
/*!****************************************************************!*\
  !*** ./node_modules/core-js/internals/object-keys-internal.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/has */95),i=r(/*! ../internals/to-indexed-object */176),s=r(/*! ../internals/array-includes */274).indexOf,o=r(/*! ../internals/hidden-keys */179);e.exports=function(e,t){var r,a=i(e),c=0,u=[];for(r in a)!n(o,r)&&n(a,r)&&u.push(r);for(;t.length>c;)n(a,r=t[c++])&&(~s(u,r)||u.push(r));return u}},
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/array-includes.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/to-indexed-object */176),i=r(/*! ../internals/to-length */509),s=r(/*! ../internals/to-absolute-index */510),o=function(e){return function(t,r,o){var a,c=n(t),u=i(c.length),h=s(o,u);if(e&&r!=r){for(;u>h;)if((a=c[h++])!=a)return!0}else for(;u>h;h++)if((e||h in c)&&c[h]===r)return e||h||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/to-integer.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,u=c>>1,h=-7,l=r?i-1:0,f=r?-1:1,d=e[t+l];for(l+=f,s=d&(1<<-h)-1,d>>=-h,h+=a;h>0;s=256*s+e[t+l],l+=f,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=256*o+e[t+l],l+=f,h-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=u}return(d?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,c,u=8*s-i-1,h=(1<<u)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,A=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(o++,c/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(t*c-1)*Math.pow(2,i),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[r+d]=255&o,d+=p,o/=256,u-=8);e[r+d-p]|=128*A}},
/*!*********************************************!*\
  !*** ./node_modules/multicodec/src/util.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! varint */23);function i(e){return parseInt(e.toString("hex"),16)}function s(e){let r=e.toString(16);return r.length%2==1&&(r="0"+r),t.from(r,"hex")}e.exports={numberToBuffer:s,bufferToNumber:i,varintBufferEncode:function(e){return t.from(n.encode(i(e)))},varintBufferDecode:function(e){return s(n.decode(e))}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************************!*\
  !*** ./node_modules/multicodec/src/name-table.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./base-table */181),i={};e.exports=i;for(let e in n){i[n[e].toString("hex")]=e}},
/*!********************************************!*\
  !*** ./node_modules/is-plain-obj/index.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})}},
/*!*************************************************!*\
  !*** ./node_modules/ipld-dag-cbor/src/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.util=r(/*! ./util.js */281),t.resolver=r(/*! ./resolver.js */556),t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg},
/*!************************************************!*\
  !*** ./node_modules/ipld-dag-cbor/src/util.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n){const i=r(/*! borc */282),s=r(/*! multicodec */27),o=r(/*! multihashing-async */98),a=r(/*! cids */4),c=r(/*! is-circular */289),u=42;function h(e){let t;try{t=c(e)}catch(e){t=!1}if(t)throw new Error("The object passed has circular references");return function e(t){if(!t||n.isBuffer(t)||"string"==typeof t)return t;if(Array.isArray(t))return t.map(e);if(a.isCID(t))return"string"==typeof(r=t)?r=new a(r).buffer:a.isCID(r)&&(r=r.buffer),new i.Tagged(u,n.concat([n.from("00","hex"),r]));var r;const s=Object.keys(t);if(s.length>0){const r={};return s.forEach(n=>{"object"==typeof t[n]?r[n]=e(t[n]):r[n]=t[n]}),r}return t}(e)}(t=e.exports).codec=s.DAG_CBOR,t.defaultHashAlg=s.SHA2_256;const l={[u]:e=>(e=e.slice(1),new a(e))};let f=65536;let d=67108864,p=null;t.configureDecoder=e=>{let t=l;e?("number"==typeof e.size&&(f=e.size),"number"==typeof e.maxSize&&(d=e.maxSize),e.tags&&(t=Object.assign({},l,e&&e.tags))):(f=65536,d=67108864);let r={tags:t,size:f};p=new i.Decoder(r),f=r.size},t.configureDecoder(),t.serialize=e=>{const t=h(e);return i.encode(t)},t.deserialize=e=>{if(e.length>f&&e.length<=d&&t.configureDecoder({size:e.length}),e.length>f)throw new Error("Data is too large to deserialize with current decoder");return p.decodeFirst(e)},t.cid=async(e,r)=>{const n={cidVersion:1,hashAlg:t.defaultHashAlg},i=Object.assign(n,r),c=await o(e,i.hashAlg),u=s.print[t.codec];return new a(i.cidVersion,u,c)}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!****************************************!*\
  !*** ./node_modules/borc/src/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.Diagnose=r(/*! ./diagnose */544),t.Decoder=r(/*! ./decoder */283),t.Encoder=r(/*! ./encoder */547),t.Simple=r(/*! ./simple */284),t.Tagged=r(/*! ./tagged */285),t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}},
/*!******************************************!*\
  !*** ./node_modules/borc/src/decoder.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t,n){const i=r(/*! ieee754 */276),s=r(/*! bignumber.js */48).BigNumber,o=r(/*! ./decoder.asm */545),a=r(/*! ./utils */182),c=r(/*! ./constants */131),u=r(/*! ./simple */284),h=r(/*! ./tagged */285),{URL:l}=r(/*! iso-url */132);class f{constructor(e){!(e=e||{}).size||e.size<65536?e.size=65536:e.size=a.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=t.from(this._heap),this._reset(),this._knownTags=Object.assign({0:e=>new Date(e),1:e=>new Date(1e3*e),2:e=>a.arrayBufferToBignumber(e),3:e=>c.NEG_ONE.minus(a.arrayBufferToBignumber(e)),4:e=>c.TEN.pow(e[0]).times(e[1]),5:e=>c.TWO.pow(e[0]).times(e[1]),32:e=>new l(e),35:e=>new RegExp(e)},e.tags),this.parser=o(n,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case c.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case c.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case c.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case c.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case c.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case c.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length))}this._currentParent&&this._currentParent.type===c.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,0===e.length&&this._closeParent())}_push(e,t){const r=this._currentParent;switch(r.values++,r.type){case c.PARENT.ARRAY:case c.PARENT.BYTE_STRING:case c.PARENT.UTF8_STRING:r.length>-1?this._ref[this._ref.length-r.length]=e:this._ref.push(e),this._dec();break;case c.PARENT.OBJECT:null!=r.tmpKey?(this._ref[r.tmpKey]=e,r.tmpKey=null,this._dec()):(r.tmpKey=e,"string"!=typeof r.tmpKey&&(r.type=c.PARENT.MAP,r.ref=a.buildMap(r.ref)));break;case c.PARENT.MAP:null!=r.tmpKey?(this._ref.set(r.tmpKey,e),r.tmpKey=null,this._dec()):r.tmpKey=e;break;case c.PARENT.TAG:this._ref.push(e),t||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,t,r){this._parents[this._depth]={type:t,length:r,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:c.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,t){const r=this._knownTags[e];return r?r(t):new h(e,t)}createMap(e,t){return e}createObject(e,t){return e}createArray(e,t){return e}createByteString(e,r){return t.concat(e)}createByteStringFromHeap(e,r){return e===r?t.alloc(0):t.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,t){return a.buildInt32(e,t)}createInt64(e,t,r,n){return a.buildInt64(e,t,r,n)}createFloat(e){return e}createFloatSingle(e,t,r,n){return i.read([e,t,r,n],0,!1,23,4)}createFloatDouble(e,t,r,n,s,o,a,c){return i.read([e,t,r,n,s,o,a,c],0,!1,52,8)}createInt32Neg(e,t){return-1-a.buildInt32(e,t)}createInt64Neg(e,t,r,n){const i=a.buildInt32(e,t),o=a.buildInt32(r,n);return i>c.MAX_SAFE_HIGH?c.NEG_ONE.minus(new s(i).times(c.SHIFT32).plus(o)):-1-(i*c.SHIFT32+o)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,t){return e.join("")}createUtf8StringFromHeap(e,t){return e===t?"":this._buffer.toString("utf8",e,t)}createSimpleUnassigned(e){return new u(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,t){this._push(this.createInt32(e,t))}pushInt64(e,t,r,n){this._push(this.createInt64(e,t,r,n))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,t,r,n){this._push(this.createFloatSingle(e,t,r,n))}pushFloatDouble(e,t,r,n,i,s,o,a){this._push(this.createFloatDouble(e,t,r,n,i,s,o,a))}pushInt32Neg(e,t){this._push(this.createInt32Neg(e,t))}pushInt64Neg(e,t,r,n){this._push(this.createInt64Neg(e,t,r,n))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],c.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,t){const r=a.buildInt32(e,t);this._createArrayStartFixed(r)}pushArrayStartFixed64(e,t,r,n){const i=a.buildInt64(e,t,r,n);this._createArrayStartFixed(i)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,t){const r=a.buildInt32(e,t);this._createObjectStartFixed(r)}pushObjectStartFixed64(e,t,r,n){const i=a.buildInt64(e,t,r,n);this._createObjectStartFixed(i)}pushByteStringStart(){this._parents[this._depth]={type:c.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,t){this._push(this.createByteStringFromHeap(e,t))}pushUtf8StringStart(){this._parents[this._depth]={type:c.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,t){this._push(this.createUtf8StringFromHeap(e,t))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:c.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,t){this.pushTagStart(a.buildInt32(e,t))}pushTagStart8(e,t,r,n){this.pushTagStart(a.buildInt64(e,t,r,n))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){0!==e?this._createParent({},c.PARENT.OBJECT,e):this._push(this.createObject({}))}_createArrayStartFixed(e){0!==e?this._createParent(new Array(e),c.PARENT.ARRAY,e):this._push(this.createArray([]))}_decode(e){if(0===e.byteLength)throw new Error("Input too short");this._reset(),this._heap8.set(e);const t=this.parser.parse(e.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(t>0)throw new Error("Failed to parse");if(0===this._res.length)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return"string"==typeof e&&(e=t.from(e,r||"hex")),new f({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return"string"==typeof e&&(e=t.from(e,r||"hex")),new f({size:e.length}).decodeAll(e)}}f.decodeFirst=f.decode,e.exports=f}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer,r(/*! ./../../webpack/buildin/global.js */10))},
/*!*****************************************!*\
  !*** ./node_modules/borc/src/simple.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./constants */131),i=n.MT,s=n.SIMPLE,o=n.SYMS;class a{constructor(e){if("number"!=typeof e)throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(0|e)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,i.SIMPLE_FLOAT)}static isSimple(e){return e instanceof a}static decode(e,t){switch(null==t&&(t=!0),e){case s.FALSE:return!1;case s.TRUE:return!0;case s.NULL:return t?null:o.NULL;case s.UNDEFINED:return t?void 0:o.UNDEFINED;case-1:if(!t)throw new Error("Invalid BREAK");return o.BREAK;default:return new a(e)}}}e.exports=a},
/*!*****************************************!*\
  !*** ./node_modules/borc/src/tagged.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";class n{constructor(e,t,r){if(this.tag=e,this.value=t,this.err=r,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var t,r;if("function"!=typeof(r=null!=e?e[this.tag]:void 0)&&"function"!=typeof(r=n["_tag"+this.tag]))return this;try{return r.call(n,this.value)}catch(e){return t=e,this.err=t,this}}}e.exports=n},
/*!*************************************************!*\
  !*** ./node_modules/iso-url/src/url-browser.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=self.location?self.location.protocol+"//"+self.location.host:"",i=self.URL;e.exports={URLWithLegacySupport:class{constructor(e,t=n){this.super=new i(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:n,format:function(e){if("string"==typeof e){return new i(e).toString()}if(!(e instanceof i)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",s=e.host||"",o=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"";return`${i}${t||r}${s||o+n}${e.path||u+a}${c}`}}}},
/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){(function(t){e.exports=t}).call(this,{})},
/*!**************************************!*\
  !*** ./node_modules/blakejs/util.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var r="Input must be an string, Buffer or Uint8Array";function n(e){return(4294967296+e).toString(16).substring(1)}e.exports={normalizeInput:function(e){var n;if(e instanceof Uint8Array)n=e;else if(e instanceof t)n=new Uint8Array(e);else{if("string"!=typeof e)throw new Error(r);n=new Uint8Array(t.from(e,"utf8"))}return n},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,t,r){for(var i="\n"+e+" = ",s=0;s<t.length;s+=2){if(32===r)i+=n(t[s]).toUpperCase(),i+=" ",i+=n(t[s+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);i+=n(t[s+1]).toUpperCase(),i+=n(t[s]).toUpperCase()}s%6==4?i+="\n"+new Array(e.length+4).join(" "):s<t.length-2&&(i+=" ")}console.log(i)},testSpeed:function(e,t,r){for(var n=(new Date).getTime(),i=new Uint8Array(t),s=0;s<t;s++)i[s]=s%256;var o=(new Date).getTime();for(console.log("Generated random input in "+(o-n)+"ms"),n=o,s=0;s<r;s++){var a=e(i),c=(new Date).getTime(),u=c-n;n=c,console.log("Hashed in "+u+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}}}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************!*\
  !*** ./node_modules/is-circular/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./lib/node */555);e.exports=function(e){if(!(e instanceof Object))throw new TypeError('"obj" must be an object (or inherit from it)');return function e(t,r){r=new n(t,r);for(var i in t){var s=t[i];if(s instanceof Object&&(r.contains(s)||e(s,r)))return!0}return!1}(e)}},
/*!**********************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/dag-node/dagNode.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! class-is */34),i=r(/*! ./sortLinks */291),s=r(/*! ../dag-link/dagLink */73),{serializeDAGNode:o}=r(/*! ../serialize.js */292),a=r(/*! ./toDagLink */572),c=r(/*! ./addLink */573),u=r(/*! ./rmLink */575);e.exports=n(class{constructor(e,r=[],n=null){if(e||(e=t.alloc(0)),"string"==typeof e&&(e=t.from(e)),!t.isBuffer(e))throw new Error("Passed 'data' is not a buffer or a string!");if(null!==n&&"number"!=typeof n)throw new Error("Passed 'serializedSize' must be a number!");r=r.map(e=>s.isDAGLink(e)?e:s.util.createDagLinkFromB58EncodedHash(e)),r=i(r),this._data=e,this._links=r,this._serializedSize=n,this._size=null}toJSON(){return this._json||(this._json=Object.freeze({data:this.Data,links:this._links.map(e=>e.toJSON()),size:this.size})),Object.assign({},this._json)}toString(){return`DAGNode <data: "${this.Data.toString("base64")}", links: ${this.Links.length}, size: ${this.size}>`}_invalidateCached(){this._serializedSize=null,this._size=null}addLink(e){return this._invalidateCached(),c(this,e)}rmLink(e){return this._invalidateCached(),u(this,e)}toDAGLink(e){return a(this,e)}serialize(){return o({Data:this._data,Links:this._links})}get size(){return null===this._size&&(null===this._serializedSize&&(this._serializedSize=this.serialize().length),this._size=this._links.reduce((e,t)=>e+t.Tsize,this._serializedSize)),this._size}set size(e){throw new Error("Can't set property: 'size' is immutable")}get Data(){return this._data}set Data(e){throw new Error("Can't set property: 'Data' is immutable")}get Links(){return this._links.map(e=>({Name:e.Name,Tsize:e.Tsize,Hash:e.Hash}))}set Links(e){throw new Error("Can't set property: 'Links' is immutable")}},{className:"DAGNode",symbolName:"@ipld/js-ipld-dag-pb/dagnode"})}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/dag-node/sortLinks.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! stable */558),i=(e,r)=>t.compare(e.nameAsBuffer,r.nameAsBuffer);e.exports=e=>n(e,i)}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/serialize.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! protons */28)(r(/*! ./dag.proto.js */293)),i=r(/*! ./dag-link/dagLink */73);t=e.exports;const s=e=>{const t=e.Data,r=e.Links||[];return n.PBNode.encode((e=>{const t={};return e.Data&&e.Data.length>0?t.Data=e.Data:t.Data=null,e.Links&&e.Links.length>0?t.Links=e.Links.map(e=>({Hash:e.Hash.buffer,Name:e.Name,Tsize:e.Tsize})):t.Links=null,t})({Data:t,Links:r}))};t.serializeDAGNode=s,t.serializeDAGNodeLike=(e,t=[])=>{const r={Data:e};return r.Links=t.map(e=>i.isDAGLink(e)?e:i.util.createDagLinkFromB58EncodedHash(e)),s(r)}},
/*!***************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/dag.proto.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="// An IPFS MerkleDAG Link\nmessage PBLink {\n\n  // multihash of the target object\n  optional bytes Hash = 1;\n\n  // utf string name. should be unique per object\n  optional string Name = 2;\n\n  // cumulative size of target object\n  optional uint64 Tsize = 3;\n}\n\n// An IPFS MerkleDAG Node\nmessage PBNode {\n\n  // refs to other objects\n  repeated PBLink Links = 2;\n\n  // opaque user data\n  optional bytes Data = 1;\n}"},
/*!************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/genCid.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! cids */4),i=r(/*! multicodec */27),s=r(/*! multihashing-async */98);(t=e.exports).codec=i.DAG_PB,t.defaultHashAlg=i.SHA2_256;t.cid=async(e,r)=>{const o={cidVersion:1,hashAlg:t.defaultHashAlg},a=Object.assign(o,r),c=await s(e,a.hashAlg),u=i.print[t.codec];return new n(a.cidVersion,u,c)}},
/*!********************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/dag-link/index.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(e.exports=r(/*! ./dagLink */73)).util=r(/*! ./util */574)},
/*!**********************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/util.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n){const i=r(/*! protons */28)(r(/*! ./dag.proto */293)),s=r(/*! ./dag-link/dagLink */73),o=r(/*! ./dag-node/dagNode */290),{serializeDAGNodeLike:a}=r(/*! ./serialize */292),c=r(/*! ./genCid */294);(t=e.exports).codec=c.codec,t.defaultHashAlg=c.defaultHashAlg;t.serialize=e=>o.isDAGNode(e)?e.serialize():a(e.Data,e.Links),t.deserialize=e=>{const t=i.PBNode.decode(e),r=t.Links.map(e=>new s(e.Name,e.Tsize,e.Hash)),a=null==t.Data?n.alloc(0):t.Data;return new o(a,r,e.length)},t.cid=(e,t)=>c.cid(e,t)}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************!*\
  !*** ./node_modules/ipld-raw/src/index.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! cids */4),i=r(/*! multihashing-async */98),s=r(/*! multicodec */27);e.exports={codec:s.RAW,defaultHashAlg:s.SHA2_256,resolver:{resolve:(e,t)=>({value:e,remainderPath:""}),tree:e=>({done:!0})},util:{deserialize:e=>e,serialize:e=>e,cid:async(t,r)=>{const o={cidVersion:1,hashAlg:e.exports.defaultHashAlg},a=Object.assign(o,r),c=await i(t,a.hashAlg),u=s.print[e.exports.codec];return new n(a.cidVersion,u,c)}}}},
/*!******************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/index.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n){const i=r(/*! protons */28)(r(/*! ./keys.proto */184));r(/*! node-forge/lib/asn1 */58),r(/*! node-forge/lib/rsa */100),r(/*! node-forge/lib/pbe */134);const s=r(/*! node-forge/lib/forge */11);t=e.exports;const o={rsa:r(/*! ./rsa-class */586),ed25519:r(/*! ./ed25519-class */609),secp256k1:r(/*! libp2p-crypto-secp256k1 */613)(i,r(/*! ../random-bytes */192))};function a(e){return void 0!==o[e.toLowerCase()]}t.supportedKeys=o,t.keysPBM=i,t.keyStretcher=r(/*! ./key-stretcher */645),t.generateEphemeralKeyPair=r(/*! ./ephemeral-keys */649),t.generateKeyPair=(e,t,r)=>{const n=o[e.toLowerCase()];if(!n)return r(new Error("invalid or unsupported key type"));n.generateKeyPair(t,r)},t.generateKeyPairFromSeed=(e,t,r,n)=>{const i=o[e.toLowerCase()];return i?"ed25519"!==e.toLowerCase()?n(new Error("Seed key derivation is unimplemented for RSA or secp256k1")):void i.generateKeyPairFromSeed(t,r,n):n(new Error("invalid or unsupported key type"))},t.unmarshalPublicKey=e=>{const t=i.PublicKey.decode(e),r=t.Data;switch(t.Type){case i.KeyType.RSA:return o.rsa.unmarshalRsaPublicKey(r);case i.KeyType.Ed25519:return o.ed25519.unmarshalEd25519PublicKey(r);case i.KeyType.Secp256k1:if(o.secp256k1)return o.secp256k1.unmarshalSecp256k1PublicKey(r);throw new Error("secp256k1 support requires libp2p-crypto-secp256k1 package");default:throw new Error("invalid or unsupported key type")}},t.marshalPublicKey=(e,t)=>{if(!a(t=(t||"rsa").toLowerCase()))throw new Error("invalid or unsupported key type");return e.bytes},t.unmarshalPrivateKey=(e,t)=>{let r;try{r=i.PrivateKey.decode(e)}catch(e){return t(e)}const n=r.Data;switch(r.Type){case i.KeyType.RSA:return o.rsa.unmarshalRsaPrivateKey(n,t);case i.KeyType.Ed25519:return o.ed25519.unmarshalEd25519PrivateKey(n,t);case i.KeyType.Secp256k1:return o.secp256k1?o.secp256k1.unmarshalSecp256k1PrivateKey(n,t):t(new Error("secp256k1 support requires libp2p-crypto-secp256k1 package"));default:t(new Error("invalid or unsupported key type"))}},t.marshalPrivateKey=(e,t)=>{if(!a(t=(t||"rsa").toLowerCase()))throw new Error("invalid or unsupported key type");return e.bytes},t.import=(e,t,r)=>{try{const i=s.pki.decryptRsaPrivateKey(e,t);if(null===i)throw new Error("Cannot read the key, most likely the password is wrong or not a RSA key");let a=s.asn1.toDer(s.pki.privateKeyToAsn1(i));return a=n.from(a.getBytes(),"binary"),o.rsa.unmarshalRsaPrivateKey(a,r)}catch(e){r(e)}}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/cipher.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./util */16),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};var i=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};i.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},i.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},i.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},
/*!*******************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/cipherModes.js ***!
  \*******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./util */16),n.cipher=n.cipher||{};var i=e.exports=n.cipher.modes=n.cipher.modes||{};function s(e,t){if("string"==typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var r=e;e=n.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!n.util.isArray(e)){var s=[],o=t/4;for(i=0;i<o;++i)s.push(e.getInt32());e=s}return e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}i.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(e){},i.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=a(8*t.length());var s=t.length()%this.blockSize;for(s&&t.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},i.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},i.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},i.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},i.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},i.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],c=(n-1-o%n)*t;a[o/n|0]=1<<t-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s},i.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],c=i[o];i[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var u=i[s^n];i[s]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i}},
/*!************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/sha1.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./md */59),r(/*! ./util */16);var i=e.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){o||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),o=!0);var e=null,t=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var c=s.length;i.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=c[1],c[1]=c[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,c[0]=c[1]/4294967296>>>0;return t.putBytes(s),a(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var c,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-u));for(var h=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)h+=(c=8*i.fullMessageLength[l+1])/4294967296>>>0,o.putInt32(h>>>0),h=c>>>0;o.putInt32(h);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};a(f,r,o);var d=n.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d},i};var s=null,o=!1;function a(e,t,r){for(var n,i,s,o,a,c,u,h=r.length();h>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,c=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<20;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<32;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(s^o^a)+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<40;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(s^o^a)+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<60;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(s&o|a&(s^o))+c+2400959708+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<80;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(s^o^a)+c+3395469782+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+c|0,h-=64}}},
/*!***********************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/des.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);function i(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.des.Algorithm(e,t)}))}r(/*! ./cipher */299),r(/*! ./cipherModes */300),r(/*! ./util */16),e.exports=n.des=n.des||{},n.des.startEncrypting=function(e,t,r,n){var i=p({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},n.des.createEncryptionCipher=function(e,t){return p({key:e,output:null,decrypt:!1,mode:t})},n.des.startDecrypting=function(e,t,r,n){var i=p({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},n.des.createDecryptionCipher=function(e,t){return p({key:e,output:null,decrypt:!0,mode:t})},n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return d(r._keys,e,t,!1)},decrypt:function(e,t){return d(r._keys,e,t,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=n.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],h=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],A=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,y=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],_=0,b=0;b<g;b++){var w=e.getInt32(),v=e.getInt32();w^=(t=252645135&(w>>>4^v))<<4,w^=t=65535&((v^=t)>>>-16^w),w^=(t=858993459&(w>>>2^(v^=t<<-16)))<<2,w^=t=65535&((v^=t)>>>-16^w),w^=(t=1431655765&(w>>>1^(v^=t<<-16)))<<1,w^=t=16711935&((v^=t)>>>8^w),t=(w^=(t=1431655765&(w>>>1^(v^=t<<8)))<<1)<<8|(v^=t)>>>20&240,w=v<<24|v<<8&16711680|v>>>8&65280|v>>>24&240,v=t;for(var E=0;E<m.length;++E){m[E]?(w=w<<2|w>>>26,v=v<<2|v>>>26):(w=w<<1|w>>>27,v=v<<1|v>>>27);var S=r[(w&=-15)>>>28]|n[w>>>24&15]|i[w>>>20&15]|s[w>>>16&15]|o[w>>>12&15]|a[w>>>8&15]|c[w>>>4&15],C=u[(v&=-15)>>>28]|h[v>>>24&15]|l[v>>>20&15]|f[v>>>16&15]|d[v>>>12&15]|p[v>>>8&15]|A[v>>>4&15];t=65535&(C>>>16^S),y[_++]=S^t,y[_++]=C^t<<16}}return y}(t),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],h=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],l=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],f=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function d(e,t,r,n){var i,d,p=32===e.length?3:9;i=3===p?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var A=t[0],g=t[1];A^=(d=252645135&(A>>>4^g))<<4,A^=(d=65535&(A>>>16^(g^=d)))<<16,A^=d=858993459&((g^=d)>>>2^A),A^=d=16711935&((g^=d<<2)>>>8^A),A=(A^=(d=1431655765&(A>>>1^(g^=d<<8)))<<1)<<1|A>>>31,g=(g^=d)<<1|g>>>31;for(var y=0;y<p;y+=3){for(var m=i[y+1],_=i[y+2],b=i[y];b!=m;b+=_){var w=g^e[b],v=(g>>>4|g<<28)^e[b+1];d=A,A=g,g=d^(o[w>>>24&63]|c[w>>>16&63]|h[w>>>8&63]|f[63&w]|s[v>>>24&63]|a[v>>>16&63]|u[v>>>8&63]|l[63&v])}d=A,A=g,g=d}g=g>>>1|g<<31,g^=d=1431655765&((A=A>>>1|A<<31)>>>1^g),g^=(d=16711935&(g>>>8^(A^=d<<1)))<<8,g^=(d=858993459&(g>>>2^(A^=d)))<<2,g^=d=65535&((A^=d)>>>16^g),g^=d=252645135&((A^=d<<16)>>>4^g),A^=d<<4,r[0]=A,r[1]=g}function p(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var s=null;r instanceof n.util.ByteBuffer&&(s=r,r={}),(r=r||{}).output=s,r.iv=e,i.call(t,r)},t}},
/*!************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/hmac.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./md */59),r(/*! ./util */16),(e.exports=n.hmac=n.hmac||{}).create=function(){var e=null,t=null,r=null,i=null,s={start:function(s,o){if(null!==s)if("string"==typeof s){if(!((s=s.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');t=n.md.algorithms[s].create()}else t=s;if(null===o)o=e;else{if("string"==typeof o)o=n.util.createBuffer(o);else if(n.util.isArray(o)){var a=o;o=n.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),u=o.length();for(c=0;c<u;++c){a=o.at(c);r.putByte(54^a),i.putByte(92^a)}if(u<t.blockLength)for(a=t.blockLength-u,c=0;c<a;++c)r.putByte(54),i.putByte(92);e=o,r=r.bytes(),i=i.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(i),t.update(e),t.digest()}};return s.digest=s.getMac,s}},
/*!*********************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/multihashing-async/src/index.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! multihashes */13),i=r(/*! ./crypto */587);function s(e,t,r,i){if("function"==typeof r&&(i=r,r=void 0),!i)throw new Error("Missing callback");s.digest(e,t,r,(e,s)=>{if(e)return i(e);i(null,n.encode(s,t,r))})}e.exports=s,s.Buffer=t,s.multihash=n,s.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=s.createHash(t)}catch(e){return o(e)}i(e,o)},s.createHash=function(e){if(e=n.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions)}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/multihashing-async/src/utils.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e,r){t.toCallback=t=>(function(r,n){let i;try{i=t(r)}catch(t){return void e.nextTick(n,t)}e.nextTick(n,null,i)}),t.toBuf=(e,t)=>n=>{let i=e(n,t);return r.from(i,"hex")},t.fromString=(e,t)=>n=>{const i=r.isBuffer(n)?n.toString():n;return e(i,t)},t.fromNumberTo32BitBuf=(e,t)=>n=>{let i=e(n,t);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return r.from(s)}}).call(this,r(/*! ./../../../../process/browser.js */2),r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************!*\
  !*** ./node_modules/is-promise/index.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return e&&"function"==typeof e.then}},
/*!**************************************!*\
  !*** ./node_modules/bn.js/lib/bn.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o=r(/*! buffer */595).Buffer}catch(e){}function a(e,t,r){for(var n=0,i=Math.min(e.length,r),s=t;s<i;s++){var o=e.charCodeAt(s)-48;n<<=4,n|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return n}function c(e,t,r,n){for(var i=0,s=Math.min(e.length,r),o=t;o<s;o++){var a=e.charCodeAt(o)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,s=0;for(r=e.length-6,n=0;r>=t;r-=6)i=a(e,r,r+6),this.words[n]|=i<<s&67108863,this.words[n+1]|=i>>>26-s&4194303,(s+=24)>=26&&(s-=26,n++);r+6!==t&&(i=a(e,t,r+6),this.words[n]|=i<<s&67108863,this.words[n+1]|=i>>>26-s&4194303),this.strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,o=s%n,a=Math.min(s,s-o)+r,u=0,h=r;h<a;h+=n)u=c(e,h,h+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var l=1;for(u=c(e,h,e.length,t),h=0;h<o;h++)l*=t;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,f=Math.min(u,t.length-1),d=Math.max(0,u-e.length+1);d<=f;d++){var p=u-d|0;h+=(o=(i=0|e.words[p])*(s=0|t.words[d])+l)/67108864|0,l=67108863&o}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);r=0!==(s=a>>>24-i&16777215)||o!==this.length-1?u[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,o--)}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var f=h[e],d=l[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var A=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?A+r:u[f-A.length]+A+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return n(void 0!==o),this.toArrayLike(o,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0"),this.strip();var o,a,c="le"===t,u=new e(s),h=this.clone();if(c){for(a=0;!h.isZero();a++)o=h.andln(255),h.iushrn(8),u[a]=o;for(;a<s;a++)u[a]=0}else{for(a=0;a<s-i;a++)u[a]=0;for(a=0;!h.isZero();a++)o=h.andln(255),h.iushrn(8),u[s-a-1]=o}return u},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var s=0,o=0;o<n.length;o++)s=(t=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)s=(t=(0|r.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var d=function(e,t,r){var n,i,s,o=e.words,a=t.words,c=r.words,u=0,h=0|o[0],l=8191&h,f=h>>>13,d=0|o[1],p=8191&d,A=d>>>13,g=0|o[2],y=8191&g,m=g>>>13,_=0|o[3],b=8191&_,w=_>>>13,v=0|o[4],E=8191&v,S=v>>>13,C=0|o[5],k=8191&C,I=C>>>13,T=0|o[6],R=8191&T,N=T>>>13,B=0|o[7],O=8191&B,P=B>>>13,x=0|o[8],L=8191&x,D=x>>>13,M=0|o[9],U=8191&M,K=M>>>13,F=0|a[0],z=8191&F,j=F>>>13,H=0|a[1],q=8191&H,V=H>>>13,G=0|a[2],W=8191&G,Q=G>>>13,Y=0|a[3],X=8191&Y,$=Y>>>13,Z=0|a[4],J=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,he=0|a[8],le=8191&he,fe=he>>>13,de=0|a[9],pe=8191&de,Ae=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(u+(n=Math.imul(l,z))|0)+((8191&(i=(i=Math.imul(l,j))+Math.imul(f,z)|0))<<13)|0;u=((s=Math.imul(f,j))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,j))+Math.imul(A,z)|0,s=Math.imul(A,j);var ye=(u+(n=n+Math.imul(l,q)|0)|0)+((8191&(i=(i=i+Math.imul(l,V)|0)+Math.imul(f,q)|0))<<13)|0;u=((s=s+Math.imul(f,V)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,z),i=(i=Math.imul(y,j))+Math.imul(m,z)|0,s=Math.imul(m,j),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(A,q)|0,s=s+Math.imul(A,V)|0;var me=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(i=(i=i+Math.imul(l,Q)|0)+Math.imul(f,W)|0))<<13)|0;u=((s=s+Math.imul(f,Q)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,j))+Math.imul(w,z)|0,s=Math.imul(w,j),n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(m,q)|0,s=s+Math.imul(m,V)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,Q)|0)+Math.imul(A,W)|0,s=s+Math.imul(A,Q)|0;var _e=(u+(n=n+Math.imul(l,X)|0)|0)+((8191&(i=(i=i+Math.imul(l,$)|0)+Math.imul(f,X)|0))<<13)|0;u=((s=s+Math.imul(f,$)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(E,z),i=(i=Math.imul(E,j))+Math.imul(S,z)|0,s=Math.imul(S,j),n=n+Math.imul(b,q)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(w,q)|0,s=s+Math.imul(w,V)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,Q)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,Q)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,$)|0)+Math.imul(A,X)|0,s=s+Math.imul(A,$)|0;var be=(u+(n=n+Math.imul(l,J)|0)|0)+((8191&(i=(i=i+Math.imul(l,ee)|0)+Math.imul(f,J)|0))<<13)|0;u=((s=s+Math.imul(f,ee)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(k,z),i=(i=Math.imul(k,j))+Math.imul(I,z)|0,s=Math.imul(I,j),n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(S,q)|0,s=s+Math.imul(S,V)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,Q)|0)+Math.imul(w,W)|0,s=s+Math.imul(w,Q)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,$)|0)+Math.imul(m,X)|0,s=s+Math.imul(m,$)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(A,J)|0,s=s+Math.imul(A,ee)|0;var we=(u+(n=n+Math.imul(l,re)|0)|0)+((8191&(i=(i=i+Math.imul(l,ne)|0)+Math.imul(f,re)|0))<<13)|0;u=((s=s+Math.imul(f,ne)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(R,z),i=(i=Math.imul(R,j))+Math.imul(N,z)|0,s=Math.imul(N,j),n=n+Math.imul(k,q)|0,i=(i=i+Math.imul(k,V)|0)+Math.imul(I,q)|0,s=s+Math.imul(I,V)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,Q)|0)+Math.imul(S,W)|0,s=s+Math.imul(S,Q)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,$)|0)+Math.imul(w,X)|0,s=s+Math.imul(w,$)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(m,J)|0,s=s+Math.imul(m,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(A,re)|0,s=s+Math.imul(A,ne)|0;var ve=(u+(n=n+Math.imul(l,se)|0)|0)+((8191&(i=(i=i+Math.imul(l,oe)|0)+Math.imul(f,se)|0))<<13)|0;u=((s=s+Math.imul(f,oe)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(O,z),i=(i=Math.imul(O,j))+Math.imul(P,z)|0,s=Math.imul(P,j),n=n+Math.imul(R,q)|0,i=(i=i+Math.imul(R,V)|0)+Math.imul(N,q)|0,s=s+Math.imul(N,V)|0,n=n+Math.imul(k,W)|0,i=(i=i+Math.imul(k,Q)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,Q)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,$)|0)+Math.imul(S,X)|0,s=s+Math.imul(S,$)|0,n=n+Math.imul(b,J)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(w,J)|0,s=s+Math.imul(w,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(m,re)|0,s=s+Math.imul(m,ne)|0,n=n+Math.imul(p,se)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(A,se)|0,s=s+Math.imul(A,oe)|0;var Ee=(u+(n=n+Math.imul(l,ce)|0)|0)+((8191&(i=(i=i+Math.imul(l,ue)|0)+Math.imul(f,ce)|0))<<13)|0;u=((s=s+Math.imul(f,ue)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,z),i=(i=Math.imul(L,j))+Math.imul(D,z)|0,s=Math.imul(D,j),n=n+Math.imul(O,q)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(P,q)|0,s=s+Math.imul(P,V)|0,n=n+Math.imul(R,W)|0,i=(i=i+Math.imul(R,Q)|0)+Math.imul(N,W)|0,s=s+Math.imul(N,Q)|0,n=n+Math.imul(k,X)|0,i=(i=i+Math.imul(k,$)|0)+Math.imul(I,X)|0,s=s+Math.imul(I,$)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(S,J)|0,s=s+Math.imul(S,ee)|0,n=n+Math.imul(b,re)|0,i=(i=i+Math.imul(b,ne)|0)+Math.imul(w,re)|0,s=s+Math.imul(w,ne)|0,n=n+Math.imul(y,se)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(m,se)|0,s=s+Math.imul(m,oe)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(A,ce)|0,s=s+Math.imul(A,ue)|0;var Se=(u+(n=n+Math.imul(l,le)|0)|0)+((8191&(i=(i=i+Math.imul(l,fe)|0)+Math.imul(f,le)|0))<<13)|0;u=((s=s+Math.imul(f,fe)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(U,z),i=(i=Math.imul(U,j))+Math.imul(K,z)|0,s=Math.imul(K,j),n=n+Math.imul(L,q)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(D,q)|0,s=s+Math.imul(D,V)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,Q)|0)+Math.imul(P,W)|0,s=s+Math.imul(P,Q)|0,n=n+Math.imul(R,X)|0,i=(i=i+Math.imul(R,$)|0)+Math.imul(N,X)|0,s=s+Math.imul(N,$)|0,n=n+Math.imul(k,J)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(I,J)|0,s=s+Math.imul(I,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(S,re)|0,s=s+Math.imul(S,ne)|0,n=n+Math.imul(b,se)|0,i=(i=i+Math.imul(b,oe)|0)+Math.imul(w,se)|0,s=s+Math.imul(w,oe)|0,n=n+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,ue)|0)+Math.imul(m,ce)|0,s=s+Math.imul(m,ue)|0,n=n+Math.imul(p,le)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(A,le)|0,s=s+Math.imul(A,fe)|0;var Ce=(u+(n=n+Math.imul(l,pe)|0)|0)+((8191&(i=(i=i+Math.imul(l,Ae)|0)+Math.imul(f,pe)|0))<<13)|0;u=((s=s+Math.imul(f,Ae)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(U,q),i=(i=Math.imul(U,V))+Math.imul(K,q)|0,s=Math.imul(K,V),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,Q)|0)+Math.imul(D,W)|0,s=s+Math.imul(D,Q)|0,n=n+Math.imul(O,X)|0,i=(i=i+Math.imul(O,$)|0)+Math.imul(P,X)|0,s=s+Math.imul(P,$)|0,n=n+Math.imul(R,J)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(N,J)|0,s=s+Math.imul(N,ee)|0,n=n+Math.imul(k,re)|0,i=(i=i+Math.imul(k,ne)|0)+Math.imul(I,re)|0,s=s+Math.imul(I,ne)|0,n=n+Math.imul(E,se)|0,i=(i=i+Math.imul(E,oe)|0)+Math.imul(S,se)|0,s=s+Math.imul(S,oe)|0,n=n+Math.imul(b,ce)|0,i=(i=i+Math.imul(b,ue)|0)+Math.imul(w,ce)|0,s=s+Math.imul(w,ue)|0,n=n+Math.imul(y,le)|0,i=(i=i+Math.imul(y,fe)|0)+Math.imul(m,le)|0,s=s+Math.imul(m,fe)|0;var ke=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,Ae)|0)+Math.imul(A,pe)|0))<<13)|0;u=((s=s+Math.imul(A,Ae)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,Q))+Math.imul(K,W)|0,s=Math.imul(K,Q),n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,$)|0)+Math.imul(D,X)|0,s=s+Math.imul(D,$)|0,n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(P,J)|0,s=s+Math.imul(P,ee)|0,n=n+Math.imul(R,re)|0,i=(i=i+Math.imul(R,ne)|0)+Math.imul(N,re)|0,s=s+Math.imul(N,ne)|0,n=n+Math.imul(k,se)|0,i=(i=i+Math.imul(k,oe)|0)+Math.imul(I,se)|0,s=s+Math.imul(I,oe)|0,n=n+Math.imul(E,ce)|0,i=(i=i+Math.imul(E,ue)|0)+Math.imul(S,ce)|0,s=s+Math.imul(S,ue)|0,n=n+Math.imul(b,le)|0,i=(i=i+Math.imul(b,fe)|0)+Math.imul(w,le)|0,s=s+Math.imul(w,fe)|0;var Ie=(u+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,Ae)|0)+Math.imul(m,pe)|0))<<13)|0;u=((s=s+Math.imul(m,Ae)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,X),i=(i=Math.imul(U,$))+Math.imul(K,X)|0,s=Math.imul(K,$),n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(D,J)|0,s=s+Math.imul(D,ee)|0,n=n+Math.imul(O,re)|0,i=(i=i+Math.imul(O,ne)|0)+Math.imul(P,re)|0,s=s+Math.imul(P,ne)|0,n=n+Math.imul(R,se)|0,i=(i=i+Math.imul(R,oe)|0)+Math.imul(N,se)|0,s=s+Math.imul(N,oe)|0,n=n+Math.imul(k,ce)|0,i=(i=i+Math.imul(k,ue)|0)+Math.imul(I,ce)|0,s=s+Math.imul(I,ue)|0,n=n+Math.imul(E,le)|0,i=(i=i+Math.imul(E,fe)|0)+Math.imul(S,le)|0,s=s+Math.imul(S,fe)|0;var Te=(u+(n=n+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,Ae)|0)+Math.imul(w,pe)|0))<<13)|0;u=((s=s+Math.imul(w,Ae)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,J),i=(i=Math.imul(U,ee))+Math.imul(K,J)|0,s=Math.imul(K,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(D,re)|0,s=s+Math.imul(D,ne)|0,n=n+Math.imul(O,se)|0,i=(i=i+Math.imul(O,oe)|0)+Math.imul(P,se)|0,s=s+Math.imul(P,oe)|0,n=n+Math.imul(R,ce)|0,i=(i=i+Math.imul(R,ue)|0)+Math.imul(N,ce)|0,s=s+Math.imul(N,ue)|0,n=n+Math.imul(k,le)|0,i=(i=i+Math.imul(k,fe)|0)+Math.imul(I,le)|0,s=s+Math.imul(I,fe)|0;var Re=(u+(n=n+Math.imul(E,pe)|0)|0)+((8191&(i=(i=i+Math.imul(E,Ae)|0)+Math.imul(S,pe)|0))<<13)|0;u=((s=s+Math.imul(S,Ae)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(K,re)|0,s=Math.imul(K,ne),n=n+Math.imul(L,se)|0,i=(i=i+Math.imul(L,oe)|0)+Math.imul(D,se)|0,s=s+Math.imul(D,oe)|0,n=n+Math.imul(O,ce)|0,i=(i=i+Math.imul(O,ue)|0)+Math.imul(P,ce)|0,s=s+Math.imul(P,ue)|0,n=n+Math.imul(R,le)|0,i=(i=i+Math.imul(R,fe)|0)+Math.imul(N,le)|0,s=s+Math.imul(N,fe)|0;var Ne=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,Ae)|0)+Math.imul(I,pe)|0))<<13)|0;u=((s=s+Math.imul(I,Ae)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(U,se),i=(i=Math.imul(U,oe))+Math.imul(K,se)|0,s=Math.imul(K,oe),n=n+Math.imul(L,ce)|0,i=(i=i+Math.imul(L,ue)|0)+Math.imul(D,ce)|0,s=s+Math.imul(D,ue)|0,n=n+Math.imul(O,le)|0,i=(i=i+Math.imul(O,fe)|0)+Math.imul(P,le)|0,s=s+Math.imul(P,fe)|0;var Be=(u+(n=n+Math.imul(R,pe)|0)|0)+((8191&(i=(i=i+Math.imul(R,Ae)|0)+Math.imul(N,pe)|0))<<13)|0;u=((s=s+Math.imul(N,Ae)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(U,ce),i=(i=Math.imul(U,ue))+Math.imul(K,ce)|0,s=Math.imul(K,ue),n=n+Math.imul(L,le)|0,i=(i=i+Math.imul(L,fe)|0)+Math.imul(D,le)|0,s=s+Math.imul(D,fe)|0;var Oe=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,Ae)|0)+Math.imul(P,pe)|0))<<13)|0;u=((s=s+Math.imul(P,Ae)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(U,le),i=(i=Math.imul(U,fe))+Math.imul(K,le)|0,s=Math.imul(K,fe);var Pe=(u+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,Ae)|0)+Math.imul(D,pe)|0))<<13)|0;u=((s=s+Math.imul(D,Ae)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var xe=(u+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,Ae))+Math.imul(K,pe)|0))<<13)|0;return u=((s=Math.imul(K,Ae))+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,c[0]=ge,c[1]=ye,c[2]=me,c[3]=_e,c[4]=be,c[5]=we,c[6]=ve,c[7]=Ee,c[8]=Se,c[9]=Ce,c[10]=ke,c[11]=Ie,c[12]=Te,c[13]=Re,c[14]=Ne,c[15]=Be,c[16]=Oe,c[17]=Pe,c[18]=xe,0!==u&&(c[19]=u,r.length++),r};function p(e,t,r){return(new A).mulp(e,t,r)}function A(e,t){this.x=e,this.y=t}Math.imul||(d=f),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?d(this,e,t):r<63?f(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,t.length-1),u=Math.max(0,s-e.length+1);u<=c;u++){var h=s-u,l=(0|e.words[h])*(0|t.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(o=(o=o+(l/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r.strip()}(this,e,t):p(this,e,t)},A.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},A.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},A.prototype.permute=function(e,t,r,n,i,s){for(var o=0;o<s;o++)n[o]=t[e[o]],i[o]=r[e[o]]},A.prototype.transform=function(e,t,r,n,i,s){this.permute(s,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,f=u,d=0;d<o;d++){var p=r[h+d],A=n[h+d],g=r[h+d+o],y=n[h+d+o],m=l*g-f*y;y=l*y+f*g,g=m,r[h+d]=p+g,n[h+d]=A+y,r[h+d+o]=p-g,n[h+d+o]=A-y,d!==a&&(m=c*l-u*f,f=c*f+u*l,l=m)}},A.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},A.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},A.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},A.prototype.convert13b=function(e,t,r,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===s),n(0==(-8192&s))},A.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},A.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,u,n),this.transform(o,s,a,c,n,i),this.transform(u,s,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-c[d]*l[d];c[d]=a[d]*l[d]+c[d]*h[d],a[d]=p}return this.conjugate(a,c,n),this.transform(a,c,f,s,n,i),this.conjugate(f,s,n),this.normalize13b(f,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),p(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,s=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=s>>>26,this.words[r]=67108863&s}return 0!==t&&(this.words[r]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<r;this.words[t]=c|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-s|l>>>s,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},s.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var i,s,o=e.length+r;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},s.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=t.clone();!t.isZero();){for(var f=0,d=1;0==(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(h),o.isub(l)),i.iushrn(1),o.iushrn(1);for(var p=0,A=1;0==(r.words[0]&A)&&p<26;++p,A<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),o.isub(c)):(r.isub(t),a.isub(i),c.isub(o))}return{a:a,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0==(t.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(t.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var l=0,f=1;0==(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new v(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function m(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){v.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(m,y),m.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var s=0|e.words[n];e.words[n-10]=(4194303&s)<<4|i>>>22,i=s}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},m.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,y),i(b,y),i(w,y),w.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new m;else if("p224"===e)t=new _;else if("p192"===e)t=new b;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new w}return g[e]=t,t},v.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},v.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},v.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},v.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},v.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},v.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},v.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},v.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},v.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},v.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},v.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},v.prototype.isqr=function(e){return this.imul(e,e.clone())},v.prototype.sqr=function(e){return this.mul(e,e)},v.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),f=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=o;0!==d.cmp(a);){for(var A=d,g=0;0!==A.cmp(a);g++)A=A.redSqr();n(g<p);var y=this.pow(l,new s(1).iushln(p-g-1));f=f.redMul(y),l=y.redSqr(),d=d.redMul(l),p=g}return f},v.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},v.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}c=26}return i},v.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},v.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new E(e)},i(E,v),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(/*! ./../../webpack/buildin/module.js */136)(e))},
/*!*********************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/encoders/index.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=t;n.der=r(/*! ./der */309),n.pem=r(/*! ./pem */598)},
/*!*******************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/encoders/der.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! inherits */3),i=r(/*! buffer */0).Buffer,s=r(/*! ../base/node */194),o=r(/*! ../constants/der */196);function a(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){s.call(this,"der",e)}function u(e){return e<10?"0"+e:e}e.exports=a,a.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(c,s),c.prototype._encodeComposite=function(e,t,r,n){const s=function(e,t,r,n){let i;"seqof"===e?e="seq":"setof"===e&&(e="set");if(o.tagByName.hasOwnProperty(e))i=o.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}if(i>=31)return n.error("Multi-octet tag encoding unsupported");t||(i|=32);return i|=o.tagClassByName[r||"universal"]<<6}(e,t,r,this.reporter);if(n.length<128){const e=new i(2);return e[0]=s,e[1]=n.length,this._createEncoderBuffer([e,n])}let a=1;for(let e=n.length;e>=256;e>>=8)a++;const c=new i(2+a);c[0]=s,c[1]=128|a;for(let e=1+a,t=n.length;t>0;e--,t>>=8)c[e]=255&t;return this._createEncoderBuffer([c,n])},c.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=new i(2*e.length);for(let r=0;r<e.length;r++)t.writeUInt16BE(e.charCodeAt(r),2*r);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},c.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let n=0;for(let t=0;t<e.length;t++){let r=e[t];for(n++;r>=128;r>>=7)n++}const s=new i(n);let o=s.length-1;for(let t=e.length-1;t>=0;t--){let r=e[t];for(s[o--]=127&r;(r>>=7)>0;)s[o--]=128|127&r}return this._createEncoderBuffer(s)},c.prototype._encodeTime=function(e,t){let r;const n=new Date(e);return"gentime"===t?r=[u(n.getUTCFullYear()),u(n.getUTCMonth()+1),u(n.getUTCDate()),u(n.getUTCHours()),u(n.getUTCMinutes()),u(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[u(n.getUTCFullYear()%100),u(n.getUTCMonth()+1),u(n.getUTCDate()),u(n.getUTCHours()),u(n.getUTCMinutes()),u(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!i.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=new i(t)}if(i.isBuffer(e)){let t=e.length;0===e.length&&t++;const r=new i(t);return e.copy(r),0===e.length&&(r[0]=0),this._createEncoderBuffer(r)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let r=1;for(let t=e;t>=256;t>>=8)r++;const n=new Array(r);for(let t=n.length-1;t>=0;t--)n[t]=255&e,e>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(new i(n))},c.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},c.prototype._skipDefault=function(e,t,r){const n=this._baseState;let i;if(null===n.default)return!1;const s=e.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,t,r).join()),s.length!==n.defaultBuffer.length)return!1;for(i=0;i<s.length;i++)if(s[i]!==n.defaultBuffer[i])return!1;return!0}},
/*!*********************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/decoders/index.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=t;n.der=r(/*! ./der */311),n.pem=r(/*! ./pem */599)},
/*!*******************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/decoders/der.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! inherits */3),i=r(/*! bn.js */307),s=r(/*! ../base/buffer */103).DecoderBuffer,o=r(/*! ../base/node */194),a=r(/*! ../constants/der */196);function c(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new u,this.tree._init(e.body)}function u(e){o.call(this,"der",e)}function h(e,t){let r=e.readUInt8(t);if(e.isError(r))return r;const n=a.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){let n=r;for(r=0;128==(128&n);){if(n=e.readUInt8(t),e.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:a.tag[r]}}function l(e,t,r){let n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0==(128&n))return n;const i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(let t=0;t<i;t++){n<<=8;const t=e.readUInt8(r);if(e.isError(t))return t;n|=t}return n}e.exports=c,c.prototype.decode=function(e,t){return s.isDecoderBuffer(e)||(e=new s(e,t)),this.tree._decode(e,t)},n(u,o),u.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;const n=e.save(),i=h(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},u.prototype._decodeTag=function(e,t,r){const n=h(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;let i=l(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');const s=e.save(),o=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(o)?o:(i=e.offset-s.offset,e.restore(s),e.skip(i,'Failed to match body of: "'+t+'"'))},u.prototype._skipUntilEnd=function(e,t){for(;;){const r=h(e,t);if(e.isError(r))return r;const n=l(e,r.primitive,t);if(e.isError(n))return n;let i;if(i=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===r.tagStr)break}},u.prototype._decodeList=function(e,t,r,n){const i=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const s=r.decode(e,"der",n);if(e.isError(s)&&t)break;i.push(s)}return i},u.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let r="";for(let e=0;e<t.length/2;e++)r+=String.fromCharCode(t.readUInt16BE(2*e));return r}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},u.prototype._decodeObjid=function(e,t,r){let n;const i=[];let s=0,o=0;for(;!e.isEmpty();)s<<=7,s|=127&(o=e.readUInt8()),0==(128&o)&&(i.push(s),s=0);128&o&&i.push(s);const a=i[0]/40|0,c=i[0]%40;if(n=r?i:[a,c].concat(i.slice(1)),t){let e=t[n.join(" ")];void 0===e&&(e=t[n.join(".")]),void 0!==e&&(n=e)}return n},u.prototype._decodeTime=function(e,t){const r=e.raw().toString();let n,i,s,o,a,c;if("gentime"===t)n=0|r.slice(0,4),i=0|r.slice(4,6),s=0|r.slice(6,8),o=0|r.slice(8,10),a=0|r.slice(10,12),c=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),s=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),c=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,s,o,a,c,0)},u.prototype._decodeNull=function(){return null},u.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},u.prototype._decodeInt=function(e,t){const r=e.raw();let n=new i(r);return t&&(n=t[n.toString(10)]||n),n},u.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},
/*!************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/util.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! asn1.js */193).bignum;t.toBase64=function(t,r){return t.toArrayLike(e,"be",r).toString("base64").replace(/(=*)$/,"").replace(/\+/g,"-").replace(/\//g,"_")},t.toBn=function(t){return new n(e.from(t,"base64"))}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/x509.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./aes */186),r(/*! ./asn1 */58),r(/*! ./des */302),r(/*! ./md */59),r(/*! ./mgf */606),r(/*! ./oids */74),r(/*! ./pem */189),r(/*! ./pss */314),r(/*! ./rsa */100),r(/*! ./util */16);var i=n.asn1,s=e.exports=n.pki=n.pki||{},o=s.oids,a={};a.CN=o.commonName,a.commonName="CN",a.C=o.countryName,a.countryName="C",a.L=o.localityName,a.localityName="L",a.ST=o.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=o.organizationName,a.organizationName="O",a.OU=o.organizationalUnitName,a.organizationalUnitName="OU",a.E=o.emailAddress,a.emailAddress="E";var c=n.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},h={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},l={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[l,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function d(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],t.type&&t.type===r.type?n=r:t.name&&t.name===r.name?n=r:t.shortName&&t.shortName===r.shortName&&(n=r);return n}s.RDNAttributesAsArray=function(e,t){for(var r,n,s,c=[],u=0;u<e.value.length;++u){r=e.value[u];for(var h=0;h<r.value.length;++h)s={},n=r.value[h],s.type=i.derToOid(n.value[0].value),s.value=n.value[1].value,s.valueTagClass=n.value[1].type,s.type in o&&(s.name=o[s.type],s.name in a&&(s.shortName=a[s.name])),t&&(t.update(s.type),t.update(s.value)),c.push(s)}return c},s.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],c=i.derToOid(n.value[0].value),u=n.value[1].value,h=0;h<u.length;++h){var l={};if(l.type=c,l.value=u[h].value,l.valueTagClass=u[h].type,l.type in o&&(l.name=o[l.type],l.name in a&&(l.shortName=a[l.name])),l.type===o.extensionRequest){l.extensions=[];for(var f=0;f<l.value.length;++f)l.extensions.push(s.certificateExtensionFromAsn1(l.value[f]))}t.push(l)}return t};var p=function(e,t,r){var n={};if(e!==o["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var s={},a=[];if(!i.validate(t,h,s,a)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=a,c}return void 0!==s.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=i.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=i.derToOid(s.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=i.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(n.saltLength=s.saltLength.charCodeAt(0)),n};function A(e){for(var t,r,s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),o=e.attributes,a=0;a<o.length;++a){var c=(t=o[a]).value,u=i.Type.PRINTABLESTRING;"valueTagClass"in t&&(u=t.valueTagClass)===i.Type.UTF8&&(c=n.util.encodeUtf8(c)),r=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,u,!1,c)])]),s.value.push(r)}return s}function g(e){for(var t,r=0;r<e.length;++r){if(void 0===(t=e[r]).name&&(t.type&&t.type in s.oids?t.name=s.oids[t.type]:t.shortName&&t.shortName in a&&(t.name=s.oids[a[t.shortName]])),void 0===t.type){if(!(t.name&&t.name in s.oids))throw(c=new Error("Attribute type not specified.")).attribute=t,c;t.type=s.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in a&&(t.shortName=a[t.name]),t.type===o.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=i.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(s.certificateExtensionToAsn1(y(t.extensions[n])))}var c;if(void 0===t.value)throw(c=new Error("Attribute value not specified.")).attribute=t,c}}function y(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in s.oids&&(e.name=s.oids[e.id]),void 0===e.id){if(!(e.name&&e.name in s.oids))throw(w=new Error("Extension ID not specified.")).extension=e,w;e.id=s.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var r=0,a=0,c=0;e.digitalSignature&&(a|=128,r=7),e.nonRepudiation&&(a|=64,r=6),e.keyEncipherment&&(a|=32,r=5),e.dataEncipherment&&(a|=16,r=4),e.keyAgreement&&(a|=8,r=3),e.keyCertSign&&(a|=4,r=2),e.cRLSign&&(a|=2,r=1),e.encipherOnly&&(a|=1,r=0),e.decipherOnly&&(c|=128,r=7);var u=String.fromCharCode(r);0!==c?u+=String.fromCharCode(a)+String.fromCharCode(c):0!==a&&(u+=String.fromCharCode(a)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("basicConstraints"===e.name)e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var h=e.value.value;for(var l in e)!0===e[l]&&(l in o?h.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o[l]).getBytes())):-1!==l.indexOf(".")&&h.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(l).getBytes())))}else if("nsCertType"===e.name){r=0,a=0;e.client&&(a|=128,r=7),e.server&&(a|=64,r=6),e.email&&(a|=32,r=5),e.objsign&&(a|=16,r=4),e.reserved&&(a|=8,r=3),e.sslCA&&(a|=4,r=2),e.emailCA&&(a|=2,r=1),e.objCA&&(a|=1,r=0);u=String.fromCharCode(r);0!==a&&(u+=String.fromCharCode(a)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var f=0;f<e.altNames.length;++f){u=(m=e.altNames[f]).value;if(7===m.type&&m.ip){if(null===(u=n.util.bytesFromIP(m.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,w}else 8===m.type&&(u=m.oid?i.oidToDer(i.oidToDer(m.oid)):i.oidToDer(u));e.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,m.type,!1,u))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var d=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=d.toHex(),e.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,d.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);h=e.value.value;if(e.keyIdentifier){var p=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;h.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,p))}if(e.authorityCertIssuer){var g=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[A(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];h.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,g))}if(e.serialNumber){var y=n.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);h.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if("cRLDistributionPoints"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);h=e.value.value;var m,_=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),b=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(f=0;f<e.altNames.length;++f){u=(m=e.altNames[f]).value;if(7===m.type&&m.ip){if(null===(u=n.util.bytesFromIP(m.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,w}else 8===m.type&&(u=m.oid?i.oidToDer(i.oidToDer(m.oid)):i.oidToDer(u));b.value.push(i.create(i.Class.CONTEXT_SPECIFIC,m.type,!1,u))}_.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[b])),h.push(_)}var w;if(void 0===e.value)throw(w=new Error("Extension value not specified.")).extension=e,w;return e}function m(e,t){switch(e){case o["RSASSA-PSS"]:var r=[];return void 0!==t.hash.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,r);default:return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}}function _(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,s=0;s<r.length;++s){var o=r[s],a=o.value,c=i.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===i.Type.UTF8&&(a=n.util.encodeUtf8(a));var u=!1;"valueConstructed"in o&&(u=o.valueConstructed);var h=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,c,u,a)])]);t.value.push(h)}return t}s.certificateFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificateFromAsn1(c,t)},s.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:i.toDer(s.certificateToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.publicKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.publicKeyFromAsn1(o)},s.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:i.toDer(s.publicKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.getPublicKeyFingerprint=function(e,t){var r,o=(t=t||{}).md||n.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=i.toDer(s.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}o.start(),o.update(r);var a=o.digest();if("hex"===t.encoding){var c=a.toHex();return t.delimiter?c.match(/.{2}/g).join(t.delimiter):c}if("binary"===t.encoding)return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return a},s.certificationRequestFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificationRequestFromAsn1(c,t)},s.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:i.toDer(s.certificationRequestToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return d(e.issuer,t)},e.issuer.addField=function(t){g([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return d(e.subject,t)},e.subject.addField=function(t){g([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){g(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){g(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)y(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var r,n=null,i=0;null===n&&i<e.extensions.length;++i)r=e.extensions[i],t.id&&r.id===t.id?n=r:t.name&&r.name===t.name&&(n=r);return n},e.sign=function(t,r){e.md=r||n.md.sha1.create();var a=o[e.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=a,e.tbsCertificate=s.getTBSCertificate(e);var u=i.toDer(e.tbsCertificate);e.md.update(u.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var a=t.issuer,c=e.subject;throw(A=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=a.attributes,A.actualIssuer=c.attributes,A}var u=t.md;if(null===u){if(t.signatureOid in o)switch(o[t.signatureOid]){case"sha1WithRSAEncryption":u=n.md.sha1.create();break;case"md5WithRSAEncryption":u=n.md.md5.create();break;case"sha256WithRSAEncryption":u=n.md.sha256.create();break;case"sha384WithRSAEncryption":u=n.md.sha384.create();break;case"sha512WithRSAEncryption":u=n.md.sha512.create();break;case"RSASSA-PSS":u=n.md.sha256.create()}if(null===u)throw(A=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=t.signatureOid,A;var h=t.tbsCertificate||s.getTBSCertificate(t),l=i.toDer(h);u.update(l.getBytes())}if(null!==u){var f;switch(t.signatureOid){case o.sha1WithRSAEncryption:f=void 0;break;case o["RSASSA-PSS"]:var d,p,A;if(void 0===(d=o[t.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[d])throw(A=new Error("Unsupported MGF hash function.")).oid=t.signatureParameters.mgf.hash.algorithmOid,A.name=d,A;if(void 0===(p=o[t.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[p])throw(A=new Error("Unsupported MGF function.")).oid=t.signatureParameters.mgf.algorithmOid,A.name=p,A;if(p=n.mgf[p].create(n.md[d].create()),void 0===(d=o[t.signatureParameters.hash.algorithmOid])||void 0===n.md[d])throw{message:"Unsupported RSASSA-PSS hash function.",oid:t.signatureParameters.hash.algorithmOid,name:d};f=n.pss.create(n.md[d].create(),p,t.signatureParameters.saltLength)}r=e.publicKey.verify(u.digest().getBytes(),t.signature,f)}return r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var s,o;r=!0;for(var a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],s.type===o.type&&s.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=o.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var i=e.extensions[r];if(i.id===t){var s=e.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(i.subjectKeyIdentifier)===s}}return!1},e},s.certificateFromAsn1=function(e,t){var r={},a=[];if(!i.validate(e,u,r,a))throw(f=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=a,f;if(i.derToOid(r.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificate();c.version=r.certVersion?r.certVersion.charCodeAt(0):0;var h=n.util.createBuffer(r.certSerialNumber);c.serialNumber=h.toHex(),c.signatureOid=n.asn1.derToOid(r.certSignatureOid),c.signatureParameters=p(c.signatureOid,r.certSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.certinfoSignatureParams,!1),c.signature=r.certSignature;var l=[];if(void 0!==r.certValidity1UTCTime&&l.push(i.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&l.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&l.push(i.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&l.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=l[0],c.validity.notAfter=l[1],c.tbsCertificate=r.tbsCertificate,t){var f;if(c.md=null,c.signatureOid in o)switch(o[c.signatureOid]){case"sha1WithRSAEncryption":c.md=n.md.sha1.create();break;case"md5WithRSAEncryption":c.md=n.md.md5.create();break;case"sha256WithRSAEncryption":c.md=n.md.sha256.create();break;case"sha384WithRSAEncryption":c.md=n.md.sha384.create();break;case"sha512WithRSAEncryption":c.md=n.md.sha512.create();break;case"RSASSA-PSS":c.md=n.md.sha256.create()}if(null===c.md)throw(f=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=c.signatureOid,f;var A=i.toDer(c.tbsCertificate);c.md.update(A.getBytes())}var y=n.md.sha1.create();c.issuer.getField=function(e){return d(c.issuer,e)},c.issuer.addField=function(e){g([e]),c.issuer.attributes.push(e)},c.issuer.attributes=s.RDNAttributesAsArray(r.certIssuer,y),r.certIssuerUniqueId&&(c.issuer.uniqueId=r.certIssuerUniqueId),c.issuer.hash=y.digest().toHex();var m=n.md.sha1.create();return c.subject.getField=function(e){return d(c.subject,e)},c.subject.addField=function(e){g([e]),c.subject.attributes.push(e)},c.subject.attributes=s.RDNAttributesAsArray(r.certSubject,m),r.certSubjectUniqueId&&(c.subject.uniqueId=r.certSubjectUniqueId),c.subject.hash=m.digest().toHex(),r.certExtensions?c.extensions=s.certificateExtensionsFromAsn1(r.certExtensions):c.extensions=[],c.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),c},s.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(s.certificateExtensionFromAsn1(n.value[i]));return t},s.certificateExtensionFromAsn1=function(e){var t={};if(t.id=i.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===i.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in o)if(t.name=o[t.id],"keyUsage"===t.name){var r=0,s=0;(c=i.fromDer(t.value)).value.length>1&&(r=c.value.charCodeAt(1),s=c.value.length>2?c.value.charCodeAt(2):0),t.digitalSignature=128==(128&r),t.nonRepudiation=64==(64&r),t.keyEncipherment=32==(32&r),t.dataEncipherment=16==(16&r),t.keyAgreement=8==(8&r),t.keyCertSign=4==(4&r),t.cRLSign=2==(2&r),t.encipherOnly=1==(1&r),t.decipherOnly=128==(128&s)}else if("basicConstraints"===t.name){(c=i.fromDer(t.value)).value.length>0&&c.value[0].type===i.Type.BOOLEAN?t.cA=0!==c.value[0].value.charCodeAt(0):t.cA=!1;var a=null;c.value.length>0&&c.value[0].type===i.Type.INTEGER?a=c.value[0].value:c.value.length>1&&(a=c.value[1].value),null!==a&&(t.pathLenConstraint=i.derToInteger(a))}else if("extKeyUsage"===t.name)for(var c=i.fromDer(t.value),u=0;u<c.value.length;++u){var h=i.derToOid(c.value[u].value);h in o?t[o[h]]=!0:t[h]=!0}else if("nsCertType"===t.name){r=0;(c=i.fromDer(t.value)).value.length>1&&(r=c.value.charCodeAt(1)),t.client=128==(128&r),t.server=64==(64&r),t.email=32==(32&r),t.objsign=16==(16&r),t.reserved=8==(8&r),t.sslCA=4==(4&r),t.emailCA=2==(2&r),t.objCA=1==(1&r)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){var l;t.altNames=[];c=i.fromDer(t.value);for(var f=0;f<c.value.length;++f){var d={type:(l=c.value[f]).type,value:l.value};switch(t.altNames.push(d),l.type){case 1:case 2:case 6:break;case 7:d.ip=n.util.bytesToIP(l.value);break;case 8:d.oid=i.derToOid(l.value)}}}else if("subjectKeyIdentifier"===t.name){c=i.fromDer(t.value);t.subjectKeyIdentifier=n.util.bytesToHex(c.value)}return t},s.certificationRequestFromAsn1=function(e,t){var r={},a=[];if(!i.validate(e,f,r,a))throw(u=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=a,u;if(i.derToOid(r.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=n.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=p(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,t){var u;if(c.md=null,c.signatureOid in o)switch(o[c.signatureOid]){case"sha1WithRSAEncryption":c.md=n.md.sha1.create();break;case"md5WithRSAEncryption":c.md=n.md.md5.create();break;case"sha256WithRSAEncryption":c.md=n.md.sha256.create();break;case"sha384WithRSAEncryption":c.md=n.md.sha384.create();break;case"sha512WithRSAEncryption":c.md=n.md.sha512.create();break;case"RSASSA-PSS":c.md=n.md.sha256.create()}if(null===c.md)throw(u=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=c.signatureOid,u;var h=i.toDer(c.certificationRequestInfo);c.md.update(h.getBytes())}var l=n.md.sha1.create();return c.subject.getField=function(e){return d(c.subject,e)},c.subject.addField=function(e){g([e]),c.subject.attributes.push(e)},c.subject.attributes=s.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),c.subject.hash=l.digest().toHex(),c.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(e){return d(c,e)},c.addAttribute=function(e){g([e]),c.attributes.push(e)},c.attributes=s.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c},s.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return d(e.subject,t)},e.subject.addField=function(t){g([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return d(e,t)},e.addAttribute=function(t){g([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){g(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){g(t),e.attributes=t},e.sign=function(t,r){e.md=r||n.md.sha1.create();var a=o[e.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=a,e.certificationRequestInfo=s.getCertificationRequestInfo(e);var u=i.toDer(e.certificationRequestInfo);e.md.update(u.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){if(e.signatureOid in o)switch(o[e.signatureOid]){case"sha1WithRSAEncryption":r=n.md.sha1.create();break;case"md5WithRSAEncryption":r=n.md.md5.create();break;case"sha256WithRSAEncryption":r=n.md.sha256.create();break;case"sha384WithRSAEncryption":r=n.md.sha384.create();break;case"sha512WithRSAEncryption":r=n.md.sha512.create();break;case"RSASSA-PSS":r=n.md.sha256.create()}if(null===r)throw(f=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=e.signatureOid,f;var a=e.certificationRequestInfo||s.getCertificationRequestInfo(e),c=i.toDer(a);r.update(c.getBytes())}if(null!==r){var u;switch(e.signatureOid){case o.sha1WithRSAEncryption:break;case o["RSASSA-PSS"]:var h,l,f;if(void 0===(h=o[e.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[h])throw(f=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,f.name=h,f;if(void 0===(l=o[e.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[l])throw(f=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,f.name=l,f;if(l=n.mgf[l].create(n.md[h].create()),void 0===(h=o[e.signatureParameters.hash.algorithmOid])||void 0===n.md[h])throw(f=new Error("Unsupported RSASSA-PSS hash function.")).oid=e.signatureParameters.hash.algorithmOid,f.name=h,f;u=n.pss.create(n.md[h].create(),l,e.signatureParameters.saltLength)}t=e.publicKey.verify(r.digest().getBytes(),e.signature,u)}return t},e};var b=new Date("1950-01-01T00:00:00Z"),w=new Date("2050-01-01T00:00:00Z");function v(e){return e>=b&&e<w?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(e)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(e))}s.getTBSCertificate=function(e){var t=v(e.validity.notBefore),r=v(e.validity.notAfter),o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.siginfo.algorithmOid).getBytes()),m(e.siginfo.algorithmOid,e.siginfo.parameters)]),A(e.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,r]),A(e.subject),s.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&o.value.push(s.certificateExtensionsToAsn1(e.extensions)),o},s.getCertificationRequestInfo=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),A(e.subject),s.publicKeyToAsn1(e.publicKey),_(e)])},s.distinguishedNameToAsn1=function(e){return A(e)},s.certificateToAsn1=function(e){var t=e.tbsCertificate||s.getTBSCertificate(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),m(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.certificateExtensionsToAsn1=function(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),r=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(s.certificateExtensionToAsn1(e[n]));return t},s.certificateExtensionToAsn1=function(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.id).getBytes())),e.critical&&t.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=i.toDer(r).getBytes()),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)),t},s.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||s.getCertificationRequestInfo(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),m(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.createCaStore=function(e){var t={certs:{}};function r(e){return o(e),t.certs[e.hash]||null}function o(e){if(!e.hash){var t=n.md.sha1.create();e.attributes=s.RDNAttributesAsArray(A(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return r(e.issuer)},t.addCertificate=function(e){if("string"==typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var r=t.certs[e.subject.hash];n.util.isArray(r)||(r=[r]),r.push(e),t.certs[e.subject.hash]=r}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"==typeof e&&(e=n.pki.certificateFromPem(e));var t=r(e.subject);if(!t)return!1;n.util.isArray(t)||(t=[t]);for(var o=i.toDer(s.certificateToAsn1(e)).getBytes(),a=0;a<t.length;++a){if(o===i.toDer(s.certificateToAsn1(t[a])).getBytes())return!0}return!1},t.listAllCertificates=function(){var e=[];for(var r in t.certs)if(t.certs.hasOwnProperty(r)){var i=t.certs[r];if(n.util.isArray(i))for(var s=0;s<i.length;++s)e.push(i[s]);else e.push(i)}return e},t.removeCertificate=function(e){var a;if("string"==typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))return null;var c=r(e.subject);if(!n.util.isArray(c))return a=t.certs[e.subject.hash],delete t.certs[e.subject.hash],a;for(var u=i.toDer(s.certificateToAsn1(e)).getBytes(),h=0;h<c.length;++h){u===i.toDer(s.certificateToAsn1(c[h])).getBytes()&&(a=c[h],c.splice(h,1))}return 0===c.length&&delete t.certs[e.subject.hash],a},e)for(var a=0;a<e.length;++a){var c=e[a];t.addCertificate(c)}return t},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(e,t,r){"function"==typeof r&&(r={verify:r}),r=r||{};var i=(t=t.slice(0)).slice(0),o=r.validityCheckDate;void 0===o&&(o=new Date);var a=!0,c=null,u=0;do{var h=t.shift(),l=null,f=!1;if(o&&(o<h.validity.notBefore||o>h.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:h.validity.notBefore,notAfter:h.validity.notAfter,now:o}),null===c){if(null===(l=t[0]||e.getIssuer(h))&&h.isIssuer(h)&&(f=!0,l=h),l){var d=l;n.util.isArray(d)||(d=[d]);for(var p=!1;!p&&d.length>0;){l=d.shift();try{p=l.verify(h)}catch(e){}}p||(c={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==c||l&&!f||e.hasCertificate(h)||(c={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===c&&l&&!h.isIssuer(l)&&(c={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===c)for(var A={keyUsage:!0,basicConstraints:!0},g=0;null===c&&g<h.extensions.length;++g){var y=h.extensions[g];!y.critical||y.name in A||(c={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===c&&(!a||0===t.length&&(!l||f))){var m=h.getExtension("basicConstraints"),_=h.getExtension("keyUsage");if(null!==_&&(_.keyCertSign&&null!==m||(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==c||null===m||m.cA||(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===c&&null!==_&&"pathLenConstraint"in m)u-1>m.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}var b=null===c||c.error,w=r.verify?r.verify(b,u,i):b;if(!0!==w)throw!0===b&&(c={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(w||0===w)&&("object"!=typeof w||n.util.isArray(w)?"string"==typeof w&&(c.error=w):(w.message&&(c.message=w.message),w.error&&(c.error=w.error))),c;c=null,a=!1,++u}while(t.length>0);return!0}},
/*!***********************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/pss.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./random */75),r(/*! ./util */16),(e.exports=n.pss=n.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,i=e.mgf,s=r.digestLength,o=e.salt||null;if("string"==typeof o&&(o=n.util.createBuffer(o)),"saltLength"in e)t=e.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");t=o.length()}if(null!==o&&o.length()!==t)throw new Error("Given salt length does not match length of given salt.");var a=e.prng||n.random,c={encode:function(e,c){var u,h,l=c-1,f=Math.ceil(l/8),d=e.digest().getBytes();if(f<s+t+2)throw new Error("Message is too long to encrypt.");h=null===o?a.getBytesSync(t):o.bytes();var p=new n.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(d),p.putBytes(h),r.start(),r.update(p.getBytes());var A=r.digest().getBytes(),g=new n.util.ByteBuffer;g.fillWithByte(0,f-t-s-2),g.putByte(1),g.putBytes(h);var y=g.getBytes(),m=f-s-1,_=i.generate(A,m),b="";for(u=0;u<m;u++)b+=String.fromCharCode(y.charCodeAt(u)^_.charCodeAt(u));var w=65280>>8*f-l&255;return(b=String.fromCharCode(b.charCodeAt(0)&~w)+b.substr(1))+A+String.fromCharCode(188)},verify:function(e,o,a){var c,u=a-1,h=Math.ceil(u/8);if(o=o.substr(-h),h<s+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(h-1))throw new Error("Encoded message does not end in 0xBC.");var l=h-s-1,f=o.substr(0,l),d=o.substr(l,s),p=65280>>8*h-u&255;if(0!=(f.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var A=i.generate(d,l),g="";for(c=0;c<l;c++)g+=String.fromCharCode(f.charCodeAt(c)^A.charCodeAt(c));g=String.fromCharCode(g.charCodeAt(0)&~p)+g.substr(1);var y=h-s-t-2;for(c=0;c<y;c++)if(0!==g.charCodeAt(c))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(y))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var m=g.substr(-t),_=new n.util.ByteBuffer;return _.fillWithByte(0,8),_.putBytes(e),_.putBytes(m),r.start(),r.update(_.getBytes()),d===r.digest().getBytes()}};return c}},
/*!*******************************************************************************************!*\
  !*** ./node_modules/libp2p-crypto-secp256k1/node_modules/multihashing-async/src/index.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! multihashes */13),i=r(/*! ./crypto */614);function s(e,t,r,i){if("function"==typeof r&&(i=r,r=void 0),!i)throw new Error("Missing callback");s.digest(e,t,r,(e,s)=>{if(e)return i(e);i(null,n.encode(s,t,r))})}e.exports=s,s.Buffer=t,s.multihash=n,s.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=s.createHash(t)}catch(e){return o(e)}i(e,o)},s.createHash=function(e){if(e=n.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions),s.validate=(e,r,i)=>{s(e,n.decode(r).name,(e,n)=>{if(e)return i(e);i(e,0===t.compare(r,n))})}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************************************************************!*\
  !*** ./node_modules/libp2p-crypto-secp256k1/node_modules/multihashing-async/src/utils.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e,r){t.toCallback=t=>(function(r,n){let i;try{i=t(r)}catch(t){return void e.nextTick(n,t)}e.nextTick(n,null,i)}),t.toBuf=(e,t)=>n=>{let i=e(n,t);return r.from(i,"hex")},t.fromString=(e,t)=>n=>{const i=r.isBuffer(n)?n.toString():n;return e(i,t)},t.fromNumberTo32BitBuf=(e,t)=>n=>{let i=e(n,t);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return r.from(s)}}).call(this,r(/*! ./../../../../process/browser.js */2),r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************************!*\
  !*** ./node_modules/secp256k1/lib/messages.json ***!
  \**************************************************/
/*! exports provided: COMPRESSED_TYPE_INVALID, EC_PRIVATE_KEY_TYPE_INVALID, EC_PRIVATE_KEY_LENGTH_INVALID, EC_PRIVATE_KEY_RANGE_INVALID, EC_PRIVATE_KEY_TWEAK_ADD_FAIL, EC_PRIVATE_KEY_TWEAK_MUL_FAIL, EC_PRIVATE_KEY_EXPORT_DER_FAIL, EC_PRIVATE_KEY_IMPORT_DER_FAIL, EC_PUBLIC_KEYS_TYPE_INVALID, EC_PUBLIC_KEYS_LENGTH_INVALID, EC_PUBLIC_KEY_TYPE_INVALID, EC_PUBLIC_KEY_LENGTH_INVALID, EC_PUBLIC_KEY_PARSE_FAIL, EC_PUBLIC_KEY_CREATE_FAIL, EC_PUBLIC_KEY_TWEAK_ADD_FAIL, EC_PUBLIC_KEY_TWEAK_MUL_FAIL, EC_PUBLIC_KEY_COMBINE_FAIL, ECDH_FAIL, ECDSA_SIGNATURE_TYPE_INVALID, ECDSA_SIGNATURE_LENGTH_INVALID, ECDSA_SIGNATURE_PARSE_FAIL, ECDSA_SIGNATURE_PARSE_DER_FAIL, ECDSA_SIGNATURE_SERIALIZE_DER_FAIL, ECDSA_SIGN_FAIL, ECDSA_RECOVER_FAIL, MSG32_TYPE_INVALID, MSG32_LENGTH_INVALID, OPTIONS_TYPE_INVALID, OPTIONS_DATA_TYPE_INVALID, OPTIONS_DATA_LENGTH_INVALID, OPTIONS_NONCEFN_TYPE_INVALID, RECOVERY_ID_TYPE_INVALID, RECOVERY_ID_VALUE_INVALID, TWEAK_TYPE_INVALID, TWEAK_LENGTH_INVALID, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"COMPRESSED_TYPE_INVALID":"compressed should be a boolean","EC_PRIVATE_KEY_TYPE_INVALID":"private key should be a Buffer","EC_PRIVATE_KEY_LENGTH_INVALID":"private key length is invalid","EC_PRIVATE_KEY_RANGE_INVALID":"private key range is invalid","EC_PRIVATE_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting private key is invalid","EC_PRIVATE_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PRIVATE_KEY_EXPORT_DER_FAIL":"couldn\'t export to DER format","EC_PRIVATE_KEY_IMPORT_DER_FAIL":"couldn\'t import from DER format","EC_PUBLIC_KEYS_TYPE_INVALID":"public keys should be an Array","EC_PUBLIC_KEYS_LENGTH_INVALID":"public keys Array should have at least 1 element","EC_PUBLIC_KEY_TYPE_INVALID":"public key should be a Buffer","EC_PUBLIC_KEY_LENGTH_INVALID":"public key length is invalid","EC_PUBLIC_KEY_PARSE_FAIL":"the public key could not be parsed or is invalid","EC_PUBLIC_KEY_CREATE_FAIL":"private was invalid, try again","EC_PUBLIC_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting public key is invalid","EC_PUBLIC_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PUBLIC_KEY_COMBINE_FAIL":"the sum of the public keys is not valid","ECDH_FAIL":"scalar was invalid (zero or overflow)","ECDSA_SIGNATURE_TYPE_INVALID":"signature should be a Buffer","ECDSA_SIGNATURE_LENGTH_INVALID":"signature length is invalid","ECDSA_SIGNATURE_PARSE_FAIL":"couldn\'t parse signature","ECDSA_SIGNATURE_PARSE_DER_FAIL":"couldn\'t parse DER signature","ECDSA_SIGNATURE_SERIALIZE_DER_FAIL":"couldn\'t serialize signature to DER format","ECDSA_SIGN_FAIL":"nonce generation function failed or private key is invalid","ECDSA_RECOVER_FAIL":"couldn\'t recover public key from signature","MSG32_TYPE_INVALID":"message should be a Buffer","MSG32_LENGTH_INVALID":"message length is invalid","OPTIONS_TYPE_INVALID":"options should be an Object","OPTIONS_DATA_TYPE_INVALID":"options.data should be a Buffer","OPTIONS_DATA_LENGTH_INVALID":"options.data length is invalid","OPTIONS_NONCEFN_TYPE_INVALID":"options.noncefn should be a Function","RECOVERY_ID_TYPE_INVALID":"recovery should be a Number","RECOVERY_ID_VALUE_INVALID":"recovery should have value between -1 and 4","TWEAK_TYPE_INVALID":"tweak should be a Buffer","TWEAK_LENGTH_INVALID":"tweak length is invalid"}')},
/*!*****************************************!*\
  !*** ./node_modules/hash-base/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! safe-buffer */6).Buffer,i=r(/*! stream */137).Transform;function s(e){i.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(/*! inherits */3)(s,i),s.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},s.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},s.prototype.update=function(e,t){if(function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)r[s++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var o=0,a=8*e.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},s.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=s},
/*!*********************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_readable.js ***!
  \*********************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t,n){var i=r(/*! process-nextick-args */138);e.exports=_;var s,o=r(/*! isarray */625);_.ReadableState=m;r(/*! events */5).EventEmitter;var a=function(e,t){return e.listeners(t).length},c=r(/*! ./internal/streams/stream */320),u=r(/*! safe-buffer */199).Buffer,h=t.Uint8Array||function(){};var l=r(/*! core-util-is */104);l.inherits=r(/*! inherits */3);var f=r(/*! util */626),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,A=r(/*! ./internal/streams/BufferList */627),g=r(/*! ./internal/streams/destroy */321);l.inherits(_,c);var y=["error","close","destroy","pause","resume"];function m(e,t){e=e||{};var n=t instanceof(s=s||r(/*! ./_stream_duplex */60));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new A,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(/*! string_decoder/ */77).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function _(e){if(s=s||r(/*! ./_stream_duplex */60),!(this instanceof _))return new _(e);this._readableState=new m(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function b(e,t,r,n,i){var s,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,S(e)}(e,o)):(i||(s=function(e,t){var r;n=t,u.isBuffer(n)||n instanceof h||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?w(e,o,t,!1):k(e,o)):w(e,o,t,!1))):n||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function w(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&S(e)),k(e,t)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),b(this,e,t,!1,r)},_.prototype.unshift=function(e){return b(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return p||(p=r(/*! string_decoder/ */77).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var v=8388608;function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=v?e=v:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(C,e):C(e))}function C(e){d("emit readable"),e.emit("readable"),N(e)}function k(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(I,e,t))}function I(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function T(e){d("readable nexttick read 0"),e.read(0)}function R(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),0===(e-=o)){o===s.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=u.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,o),0===(e-=o)){o===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function x(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}_.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):S(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&O(this),null;var n,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(r,t))),null===(n=e>0?B(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&O(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,d("pipe count=%d opts=%j",s.pipesCount,t);var c=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?h:_;function u(t,n){d("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,d("cleanup"),e.removeListener("close",y),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",g),e.removeListener("unpipe",u),r.removeListener("end",h),r.removeListener("end",_),r.removeListener("data",A),f=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function h(){d("onend"),e.end()}s.endEmitted?i.nextTick(c):r.once("end",c),e.on("unpipe",u);var l=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,N(e))}}(r);e.on("drain",l);var f=!1;var p=!1;function A(t){d("ondata"),p=!1,!1!==e.write(t)||p||((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==x(s.pipes,e))&&!f&&(d("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function g(t){d("onerror",t),_(),e.removeListener("error",g),0===a(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",m),_()}function m(){d("onfinish"),e.removeListener("close",y),_()}function _(){d("unpipe"),r.unpipe(e)}return r.on("data",A),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",g),e.once("close",y),e.once("finish",m),e.emit("pipe",r),s.flowing||(d("pipe resume"),r.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,r);return this}var o=x(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},_.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):i.nextTick(T,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(R,e,t))}(this,e)),this},_.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(d("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(d("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<y.length;s++)e.on(y[s],this.emit.bind(this,y[s]));return this._read=function(t){d("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=B}).call(this,r(/*! ./../../../../webpack/buildin/global.js */10),r(/*! ./../../../../process/browser.js */2))},
/*!************************************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/stream-browser.js ***!
  \************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! events */5).EventEmitter},
/*!*****************************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/destroy.js ***!
  \*****************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! process-nextick-args */138);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},
/*!************************************************!*\
  !*** ./node_modules/util-deprecate/browser.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(/*! ./../webpack/buildin/global.js */10))},
/*!**********************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_transform.js ***!
  \**********************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=o;var n=r(/*! ./_stream_duplex */60),i=r(/*! core-util-is */104);function s(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);n.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(/*! inherits */3),i.inherits(o,n),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},
/*!*****************************************!*\
  !*** ./node_modules/ripemd160/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! buffer */0).Buffer,i=r(/*! inherits */3),s=r(/*! hash-base */318),o=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],l=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function d(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function A(e,t,r,n,i,s,o,a){return p(e+(t^r^n)+s+o|0,a)+i|0}function g(e,t,r,n,i,s,o,a){return p(e+(t&r|~t&n)+s+o|0,a)+i|0}function y(e,t,r,n,i,s,o,a){return p(e+((t|~r)^n)+s+o|0,a)+i|0}function m(e,t,r,n,i,s,o,a){return p(e+(t&n|r&~n)+s+o|0,a)+i|0}function _(e,t,r,n,i,s,o,a){return p(e+(t^(r|~n))+s+o|0,a)+i|0}i(d,s),d.prototype._update=function(){for(var e=o,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,i=0|this._c,s=0|this._d,d=0|this._e,b=0|this._a,w=0|this._b,v=0|this._c,E=0|this._d,S=0|this._e,C=0;C<80;C+=1){var k,I;C<16?(k=A(r,n,i,s,d,e[a[C]],l[0],u[C]),I=_(b,w,v,E,S,e[c[C]],f[0],h[C])):C<32?(k=g(r,n,i,s,d,e[a[C]],l[1],u[C]),I=m(b,w,v,E,S,e[c[C]],f[1],h[C])):C<48?(k=y(r,n,i,s,d,e[a[C]],l[2],u[C]),I=y(b,w,v,E,S,e[c[C]],f[2],h[C])):C<64?(k=m(r,n,i,s,d,e[a[C]],l[3],u[C]),I=g(b,w,v,E,S,e[c[C]],f[3],h[C])):(k=_(r,n,i,s,d,e[a[C]],l[4],u[C]),I=A(b,w,v,E,S,e[c[C]],f[4],h[C])),r=d,d=s,s=p(i,10),i=n,n=k,b=S,S=E,E=p(v,10),v=w,w=I}var T=this._b+i+E|0;this._b=this._c+s+S|0,this._c=this._d+d+b|0,this._d=this._e+r+w|0,this._e=this._a+n+v|0,this._a=T},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=d},
/*!**************************************!*\
  !*** ./node_modules/sha.js/index.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(t=e.exports=function(e){e=e.toLowerCase();var r=t[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r}).sha=r(/*! ./sha */634),t.sha1=r(/*! ./sha1 */635),t.sha224=r(/*! ./sha224 */636),t.sha256=r(/*! ./sha256 */326),t.sha384=r(/*! ./sha384 */637),t.sha512=r(/*! ./sha512 */327)},
/*!***************************************!*\
  !*** ./node_modules/sha.js/sha256.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! inherits */3),i=r(/*! ./hash */78),s=r(/*! safe-buffer */6).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function c(){this.init(),this._w=a,i.call(this,64,56)}function u(e,t,r){return r^e&(t^r)}function h(e,t,r){return e&t|r&(e|t)}function l(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function f(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function d(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}n(c,i),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,s=0|this._c,a=0|this._d,c=0|this._e,p=0|this._f,A=0|this._g,g=0|this._h,y=0;y<16;++y)r[y]=e.readInt32BE(4*y);for(;y<64;++y)r[y]=0|(((t=r[y-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+r[y-7]+d(r[y-15])+r[y-16];for(var m=0;m<64;++m){var _=g+f(c)+u(c,p,A)+o[m]+r[m]|0,b=l(n)+h(n,i,s)|0;g=A,A=p,p=c,c=a+_|0,a=s,s=i,i=n,n=_+b|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0,this._f=p+this._f|0,this._g=A+this._g|0,this._h=g+this._h|0},c.prototype._hash=function(){var e=s.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=c},
/*!***************************************!*\
  !*** ./node_modules/sha.js/sha512.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! inherits */3),i=r(/*! ./hash */78),s=r(/*! safe-buffer */6).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function c(){this.init(),this._w=a,i.call(this,128,112)}function u(e,t,r){return r^e&(t^r)}function h(e,t,r){return e&t|r&(e|t)}function l(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function f(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function d(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function A(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function y(e,t){return e>>>0<t>>>0?1:0}n(c,i),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,s=0|this._dh,a=0|this._eh,c=0|this._fh,m=0|this._gh,_=0|this._hh,b=0|this._al,w=0|this._bl,v=0|this._cl,E=0|this._dl,S=0|this._el,C=0|this._fl,k=0|this._gl,I=0|this._hl,T=0;T<32;T+=2)t[T]=e.readInt32BE(4*T),t[T+1]=e.readInt32BE(4*T+4);for(;T<160;T+=2){var R=t[T-30],N=t[T-30+1],B=d(R,N),O=p(N,R),P=A(R=t[T-4],N=t[T-4+1]),x=g(N,R),L=t[T-14],D=t[T-14+1],M=t[T-32],U=t[T-32+1],K=O+D|0,F=B+L+y(K,O)|0;F=(F=F+P+y(K=K+x|0,x)|0)+M+y(K=K+U|0,U)|0,t[T]=F,t[T+1]=K}for(var z=0;z<160;z+=2){F=t[z],K=t[z+1];var j=h(r,n,i),H=h(b,w,v),q=l(r,b),V=l(b,r),G=f(a,S),W=f(S,a),Q=o[z],Y=o[z+1],X=u(a,c,m),$=u(S,C,k),Z=I+W|0,J=_+G+y(Z,I)|0;J=(J=(J=J+X+y(Z=Z+$|0,$)|0)+Q+y(Z=Z+Y|0,Y)|0)+F+y(Z=Z+K|0,K)|0;var ee=V+H|0,te=q+j+y(ee,V)|0;_=m,I=k,m=c,k=C,c=a,C=S,a=s+J+y(S=E+Z|0,E)|0,s=i,E=v,i=n,v=w,n=r,w=b,r=J+te+y(b=Z+ee|0,Z)|0}this._al=this._al+b|0,this._bl=this._bl+w|0,this._cl=this._cl+v|0,this._dl=this._dl+E|0,this._el=this._el+S|0,this._fl=this._fl+C|0,this._gl=this._gl+k|0,this._hl=this._hl+I|0,this._ah=this._ah+r+y(this._al,b)|0,this._bh=this._bh+n+y(this._bl,w)|0,this._ch=this._ch+i+y(this._cl,v)|0,this._dh=this._dh+s+y(this._dl,E)|0,this._eh=this._eh+a+y(this._el,S)|0,this._fh=this._fh+c+y(this._fl,C)|0,this._gh=this._gh+m+y(this._gl,k)|0,this._hh=this._hh+_+y(this._hl,I)|0},c.prototype._hash=function(){var e=s.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=c},
/*!**************************************************!*\
  !*** ./node_modules/secp256k1/lib/js/ecpoint.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! safe-buffer */6).Buffer,i=r(/*! ./bn */139),s=r(/*! ./ecjpoint */329);function o(e,t){null===e&&null===t?(this.x=this.y=null,this.inf=!0):(this.x=e,this.y=t,this.inf=!1)}o.fromPublicKey=function(e){var t,r,n=e[0];return 33!==e.length||2!==n&&3!==n?65!==e.length||4!==n&&6!==n&&7!==n?null:(t=i.fromBuffer(e.slice(1,33)),r=i.fromBuffer(e.slice(33,65)),t.ucmp(i.p)>=0||r.ucmp(i.p)>=0?null:6!==n&&7!==n||r.isOdd()===(7===n)?0!==t.redSqr().redMul(t).redIAdd7().ucmp(r.redSqr())?null:new o(t,r):null):(t=i.fromBuffer(e.slice(1,33))).ucmp(i.p)>=0?null:null===(r=t.redSqr().redMul(t).redIAdd7().redSqrt())?null:(3===n!==r.isOdd()&&(r=r.redNeg()),new o(t,r))},o.prototype.toPublicKey=function(e){var t,r=this.x,i=this.y;return e?((t=n.alloc(33))[0]=i.isOdd()?3:2,r.toBuffer().copy(t,1)):((t=n.alloc(65))[0]=4,r.toBuffer().copy(t,1),i.toBuffer().copy(t,33)),t},o.fromECJPoint=function(e){if(e.inf)return new o(null,null);var t=e.z.redInvm(),r=t.redSqr();return new o(e.x.redMul(r),e.y.redMul(r).redMul(t))},o.prototype.toECJPoint=function(){return this.inf?new s(null,null,null):new s(this.x,this.y,s.one)},o.prototype.neg=function(){return this.inf?this:new o(this.x,this.y.redNeg())},o.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(0===this.x.ucmp(e.x))return 0===this.y.ucmp(e.y)?this.dbl():new o(null,null);var t=this.y.redSub(e.y);t.isZero()||(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x);return new o(r,t.redMul(this.x.redSub(r)).redISub(this.y))},o.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.isZero())return new o(null,null);var t=this.x.redSqr(),r=t.redAdd(t).redIAdd(t).redMul(e.redInvm()),n=r.redSqr().redISub(this.x.redAdd(this.x));return new o(n,r.redMul(this.x.redSub(n)).redISub(this.y))},o.prototype.mul=function(e){for(var t=this._getNAFPoints(4),r=t.points,n=e.getNAF(t.wnd),i=new s(null,null,null),a=n.length-1;a>=0;a--){for(var c=0;a>=0&&0===n[a];a--,++c);if(a>=0&&(c+=1),i=i.dblp(c),a<0)break;var u=n[a];i=u>0?i.mixedAdd(r[u-1>>1]):i.mixedAdd(r[-u-1>>1].neg())}return o.fromECJPoint(i)},o.prototype._getNAFPoints1=function(){return{wnd:1,points:[this]}},o.prototype._getNAFPoints=function(e){var t=new Array((1<<e)-1);t[0]=this;for(var r=this.dbl(),n=1;n<t.length;++n)t[n]=t[n-1].add(r);return{wnd:e,points:t}},e.exports=o},
/*!***************************************************!*\
  !*** ./node_modules/secp256k1/lib/js/ecjpoint.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./bn */139);function i(e,t,r){null===e&&null===t&&null===r?(this.x=i.one,this.y=i.one,this.z=i.zero):(this.x=e,this.y=t,this.z=r),this.zOne=this.z===i.one}i.zero=n.fromNumber(0),i.one=n.fromNumber(1),i.prototype.neg=function(){return this.inf?this:new i(this.x,this.y.redNeg(),this.z)},i.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),s=e.x.redMul(r),o=this.y.redMul(t).redMul(e.z),a=e.y.redMul(r).redMul(this.z),c=n.redSub(s),u=o.redSub(a);if(c.isZero())return u.isZero()?this.dbl():new i(null,null,null);var h=c.redSqr(),l=n.redMul(h),f=h.redMul(c),d=u.redSqr().redIAdd(f).redISub(l).redISub(l);return new i(d,u.redMul(l.redISub(d)).redISub(o.redMul(f)),this.z.redMul(e.z).redMul(c))},i.prototype.mixedAdd=function(e){if(this.inf)return e.toECJPoint();if(e.inf)return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(n),c=s.redSub(o);if(a.isZero())return c.isZero()?this.dbl():new i(null,null,null);var u=a.redSqr(),h=r.redMul(u),l=u.redMul(a),f=c.redSqr().redIAdd(l).redISub(h).redISub(h);return new i(f,c.redMul(h.redISub(f)).redISub(s.redMul(l)),this.z.redMul(a))},i.prototype.dbl=function(){if(this.inf)return this;var e,t,r;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n),u=c.redSqr().redISub(a).redISub(a),h=o.redIAdd(o).redIAdd(o).redIAdd(o);e=u,t=c.redMul(a.redISub(u)).redISub(h),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),f=this.y.redSqr(),d=f.redSqr(),p=this.x.redAdd(f).redSqr().redISub(l).redISub(d);p=p.redIAdd(p);var A=l.redAdd(l).redIAdd(l),g=A.redSqr(),y=d.redIAdd(d).redIAdd(d).redIAdd(d);e=g.redISub(p).redISub(p),t=A.redMul(p.redISub(e)).redISub(y),r=(r=this.y.redMul(this.z)).redIAdd(r)}return new i(e,t,r)},i.prototype.dblp=function(e){if(0===e||this.inf)return this;for(var t=this,r=0;r<e;r++)t=t.dbl();return t},Object.defineProperty(i.prototype,"inf",{enumerable:!0,get:function(){return this.z.isZero()}}),e.exports=i},
/*!******************************************************!*\
  !*** ./node_modules/async/internal/initialParams.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=(0,s.default)(arguments),r=t.pop();e.call(this,t,r)}};var n,i=r(/*! ./slice */76),s=(n=i)&&n.__esModule?n:{default:n};e.exports=t.default},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/hmac/index-browser.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! ../nodeify */190),i=r(/*! ../webcrypto */191),s=r(/*! ./lengths */648),o={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"};t.create=function(t,r,a){const c=o[t];n(i.subtle.importKey("raw",r,{name:"HMAC",hash:{name:c}},!1,["sign"]).then(r=>({digest(t,s){((t,r,s)=>{n(i.subtle.sign({name:"HMAC"},t,r).then(t=>e.from(t)),s)})(r,t,s)},length:s[t]})),a)}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************!*\
  !*** ./node_modules/peer-info/src/utils.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multiaddr */15);e.exports={ensureMultiaddr:function(e){return n.isMultiaddr(e)?e:n(e)}}},
/*!****************************************************!*\
  !*** ./node_modules/browserify-aes/modes/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n={ECB:r(/*! ./ecb */663),CBC:r(/*! ./cbc */664),CFB:r(/*! ./cfb */665),CFB8:r(/*! ./cfb8 */666),CFB1:r(/*! ./cfb1 */667),OFB:r(/*! ./ofb */668),CTR:r(/*! ./ctr */334),GCM:r(/*! ./ctr */334)},i=r(/*! ./list.json */336);for(var s in i)i[s].module=n[i[s].mode];e.exports=i},
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/modes/ctr.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! buffer-xor */106),i=r(/*! safe-buffer */6).Buffer,s=r(/*! ../incr32 */335);function o(e){var t=e._cipher.encryptBlockRaw(e._prev);return s(e._prev),t}t.encrypt=function(e,t){var r=Math.ceil(t.length/16),s=e._cache.length;e._cache=i.concat([e._cache,i.allocUnsafe(16*r)]);for(var a=0;a<r;a++){var c=o(e),u=s+16*a;e._cache.writeUInt32BE(c[0],u+0),e._cache.writeUInt32BE(c[1],u+4),e._cache.writeUInt32BE(c[2],u+8),e._cache.writeUInt32BE(c[3],u+12)}var h=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),n(t,h)}},
/*!***********************************************!*\
  !*** ./node_modules/browserify-aes/incr32.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){for(var t,r=e.length;r--;){if(255!==(t=e.readUInt8(r))){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}},
/*!*****************************************************!*\
  !*** ./node_modules/browserify-aes/modes/list.json ***!
  \*****************************************************/
/*! exports provided: aes-128-ecb, aes-192-ecb, aes-256-ecb, aes-128-cbc, aes-192-cbc, aes-256-cbc, aes128, aes192, aes256, aes-128-cfb, aes-192-cfb, aes-256-cfb, aes-128-cfb8, aes-192-cfb8, aes-256-cfb8, aes-128-cfb1, aes-192-cfb1, aes-256-cfb1, aes-128-ofb, aes-192-ofb, aes-256-ofb, aes-128-ctr, aes-192-ctr, aes-256-ctr, aes-128-gcm, aes-192-gcm, aes-256-gcm, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},
/*!***************************************************!*\
  !*** ./node_modules/browserify-aes/authCipher.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./aes */140),i=r(/*! safe-buffer */6).Buffer,s=r(/*! cipher-base */61),o=r(/*! inherits */3),a=r(/*! ./ghash */669),c=r(/*! buffer-xor */106),u=r(/*! ./incr32 */335);function h(e,t,r,o){s.call(this);var c=i.alloc(4,0);this._cipher=new n.AES(t);var h=this._cipher.encryptBlock(c);this._ghash=new a(h),r=function(e,t,r){if(12===t.length)return e._finID=i.concat([t,i.from([0,0,0,1])]),i.concat([t,i.from([0,0,0,2])]);var n=new a(r),s=t.length,o=s%16;n.update(t),o&&(o=16-o,n.update(i.alloc(o,0))),n.update(i.alloc(8,0));var c=8*s,h=i.alloc(8);h.writeUIntBE(c,0,8),n.update(h),e._finID=n.state;var l=i.from(e._finID);return u(l),l}(this,r,h),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=o,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}o(h,s),h.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=i.alloc(t,0),this._ghash.update(t))}this._called=!0;var r=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(r),this._len+=e.length,r},h.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var r=0;e.length!==t.length&&r++;for(var n=Math.min(e.length,t.length),i=0;i<n;++i)r+=e[i]^t[i];return r}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},h.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},h.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},h.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=h},
/*!*****************************************************!*\
  !*** ./node_modules/browserify-aes/streamCipher.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./aes */140),i=r(/*! safe-buffer */6).Buffer,s=r(/*! cipher-base */61);function o(e,t,r,o){s.call(this),this._cipher=new n.AES(t),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=o,this._mode=e}r(/*! inherits */3)(o,s),o.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},e.exports=o},
/*!**********************************************!*\
  !*** ./node_modules/evp_bytestokey/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer,i=r(/*! md5.js */197);e.exports=function(e,t,r,s){if(n.isBuffer(e)||(e=n.from(e,"binary")),t&&(n.isBuffer(t)||(t=n.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=r/8,a=n.alloc(o),c=n.alloc(s||0),u=n.alloc(0);o>0||s>0;){var h=new i;h.update(u),h.update(e),t&&h.update(t),u=h.digest();var l=0;if(o>0){var f=a.length-o;l=Math.min(o,u.length),u.copy(a,f,0,l),o-=l}if(l<u.length&&s>0){var d=c.length-s,p=Math.min(s,u.length-l);u.copy(c,d,l,l+p),s-=p}}return u.fill(0),{key:a,iv:c}}},
/*!*********************************************!*\
  !*** ./node_modules/peer-book/src/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! bs58 */47),i=r(/*! peer-id */7),s=r(/*! peer-info */21),o=r(/*! multiaddr */15);function a(e){let r;if("string"==typeof e)r=e.startsWith("/")?o(e).getPeerId():e;else if(t.isBuffer(e))r=n.encode(e).toString();else if(i.isPeerId(e))r=e.toB58String();else if(s.isPeerInfo(e))r=e.id.toB58String();else{if(!o.isMultiaddr(e))throw new Error("not valid PeerId or PeerInfo, or B58Str");r=e.getPeerId()}return r}e.exports=class{constructor(){this._peers={}}has(e){const t=a(e);return Boolean(this._peers[t])}put(e,t){const r=this._peers[e.id.toB58String()];if(!r||t)return this._peers[e.id.toB58String()]=e,e;e.multiaddrs.forEach(e=>r.multiaddrs.add(e));const n=e.isConnected();return n&&r.connect(n),e.protocols.forEach(e=>r.protocols.add(e)),!r.id.privKey&&e.id.privKey&&(r.id.privKey=e.id.privKey),!r.id.pubKey&&e.id.pubKey&&(r.id.pubKey=e.id.pubKey),r}get(e){const t=a(e),r=this._peers[t];if(r)return r;throw new Error("PeerInfo not found")}getAll(){return this._peers}getAllArray(){return Object.values(this._peers)}getMultiaddrs(e){return this.get(e).multiaddrs.toArray()}remove(e){const t=a(e);this._peers[t]&&delete this._peers[t]}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************************!*\
  !*** ./node_modules/ipfs/node_modules/multihashing-async/src/index.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! err-code */22),s=r(/*! multihashes */13),o=r(/*! ./crypto */672);async function a(e,t,r){const n=await a.digest(e,t,r);return s.encode(n,t,r)}a.Buffer=n,a.multihash=s,a.digest=async(e,t,r)=>{const n=a.createHash(t),i=await n(e);return r?i.slice(0,r):i},a.createHash=function(e){if(!e)throw i(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=s.coerceCode(e),!a.functions[e])throw i(new Error(`multihash function '${e}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return a.functions[e]},a.functions={0:o.identity,17:o.sha1,18:o.sha2256,19:o.sha2512,20:o.sha3512,21:o.sha3384,22:o.sha3256,23:o.sha3224,24:o.shake128,25:o.shake256,26:o.keccak224,27:o.keccak256,28:o.keccak384,29:o.keccak512,34:o.murmur3128,35:o.murmur332,86:o.dblSha2256},o.addBlake(a.functions),a.validate=async(e,t)=>{const r=await a(e,s.decode(t).name);return 0===n.compare(t,r)},e.exports=a},
/*!**********************************!*\
  !*** ./node_modules/ms/index.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=1e3,n=60*r,i=60*n,s=24*i,o=7*s,a=365.25*s;function c(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*s;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=s)return c(e,t,s,"day");if(t>=i)return c(e,t,i,"hour");if(t>=n)return c(e,t,n,"minute");if(t>=r)return c(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=s)return Math.round(e/s)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},
/*!********************************************!*\
  !*** ./node_modules/ipfs-utils/src/env.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! is-electron */679),i="object"==typeof window&&"object"==typeof document&&9===document.nodeType,s=n(),o=i&&!s,a=s&&!i,c=s&&i,u=void 0!==t&&void 0!==t.release&&"node"===t.release.name&&!s,h="function"==typeof importScripts&&"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,l=void 0!==t&&void 0!==t.env&&!1;e.exports={isTest:l,isElectron:s,isElectronMain:a,isElectronRenderer:c,isNode:u,isBrowser:o,isWebWorker:h,isEnvWithDom:i}}).call(this,r(/*! ./../../process/browser.js */2))},
/*!*********************************************!*\
  !*** ./node_modules/just-safe-get/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){if(!e)return e;var n,i;Array.isArray(t)&&(n=t.slice(0));"string"==typeof t&&(n=t.split("."));"symbol"==typeof t&&(n=[t]);if(!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;){if(i=n.shift(),!e)return r;if(void 0===(e=e[i]))return r}return e}},
/*!***********************************************!*\
  !*** ./node_modules/path-browserify/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var o=s>=0?arguments[s]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,i="/"===o.charAt(0))}return(i?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var s=t.isAbsolute(e),o="/"===i(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!s).join("/"))||s||(e="."),e&&o&&(e+="/"),(s?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),s=n(r.split("/")),o=Math.min(i.length,s.length),a=o,c=0;c<o;c++)if(i[c]!==s[c]){a=c;break}var u=[];for(c=a;c<i.length;c++)u.push("..");return(u=u.concat(s.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,i=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!i){n=s;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){r=t+1;break}}else-1===n&&(i=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,i=!0,s=0,o=e.length-1;o>=0;--o){var a=e.charCodeAt(o);if(47!==a)-1===n&&(i=!1,n=o+1),46===a?-1===t?t=o:1!==s&&(s=1):-1!==t&&(s=-1);else if(!i){r=o+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===r+1?"":e.slice(t,n)};var i="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(/*! ./../process/browser.js */2))},
/*!*****************************************************!*\
  !*** ./node_modules/interface-datastore/src/key.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! uuid/v4 */207),i=r(/*! class-is */34),s="/",o=t.from(s),a=o[0];class c{constructor(e,r){if("string"==typeof e?this._buf=t.from(e):t.isBuffer(e)&&(this._buf=e),null==r&&(r=!0),r&&this.clean(),0===this._buf.length||this._buf[0]!==a)throw new Error(`Invalid key: ${this.toString()}`)}toString(e){return this._buf.toString(e||"utf8")}toBuffer(){return this._buf}get[Symbol.toStringTag](){return`[Key ${this.toString()}]`}static withNamespaces(e){return new u(e.join(s))}static random(){return new u(n().replace(/-/g,""))}clean(){for(this._buf&&0!==this._buf.length||(this._buf=t.from(s)),this._buf[0]!==a&&(this._buf=t.concat([o,this._buf]));this._buf.length>1&&this._buf[this._buf.length-1]===a;)this._buf=this._buf.slice(0,-1)}less(e){const t=this.list(),r=e.list();for(let e=0;e<t.length;e++){if(r.length<e+1)return!1;const n=t[e],i=r[e];if(n<i)return!0;if(n>i)return!1}return t.length<r.length}reverse(){return c.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(s).slice(1)}type(){return function(e){const t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(e){const t=e.split(":");return t[t.length-1]}(this.baseNamespace())}instance(e){return new u(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(s)||(e+=s),e+=this.type(),new u(e)}parent(){const e=this.list();return 1===e.length?new u(s):new u(e.slice(0,-1).join(s))}child(e){return this.toString()===s?e:e.toString()===s?this:new u(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}}const u=i(c,{className:"Key",symbolName:"@ipfs/interface-datastore/key"});e.exports=u}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/rng-browser.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/bytesToUuid.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},
/*!*******************************************************!*\
  !*** ./node_modules/interface-datastore/src/utils.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! path */345),i=r(/*! os */203),s=r(/*! uuid/v4 */207);t.filter=(e,t)=>(async function*(){for await(const r of e){await t(r)&&(yield r)}})(),t.sortAll=(e,t)=>(async function*(){let r=[];for await(const t of e)r.push(t);r=await t(r);for(const e of r)yield e})(),t.take=(e,t)=>(async function*(){if(t<=0)return;let r=0;for await(const n of e)if(yield n,++r>=t)return})(),t.map=(e,t)=>(async function*(){for await(const r of e)yield t(r)})(),t.replaceStartWith=function(e,t){const r=new RegExp("^"+t);return e.replace(r,"")},t.tmpdir=()=>n.join(i.tmpdir(),s())},
/*!********************************************************!*\
  !*** ./node_modules/interface-datastore/src/errors.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */8);e.exports.dbOpenFailedError=e=>(e=e||new Error("Cannot open database"),n(e,"ERR_DB_OPEN_FAILED")),e.exports.dbDeleteFailedError=e=>(e=e||new Error("Delete failed"),n(e,"ERR_DB_DELETE_FAILED")),e.exports.dbWriteFailedError=e=>(e=e||new Error("Write failed"),n(e,"ERR_DB_WRITE_FAILED")),e.exports.notFoundError=e=>(e=e||new Error("Not Found"),n(e,"ERR_NOT_FOUND"))},
/*!**************************************************!*\
  !*** ./node_modules/datastore-core/src/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./keytransform */141),i=r(/*! ./sharding */696),s=r(/*! ./mount */698),o=r(/*! ./tiered */699),a=r(/*! ./namespace */700),c=r(/*! ./shard */352);t.KeytransformDatastore=n,t.ShardingDatastore=i,t.MountDatastore=s,t.TieredDatastore=o,t.NamespaceDatastore=a,t.shard=c},
/*!**************************************************!*\
  !*** ./node_modules/datastore-core/src/shard.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! interface-datastore */14).Key,i=r(/*! ./shard-readme */697),s=t.PREFIX="/repo/flatfs/shard/",o=t.SHARDING_FN="SHARDING";t.README_FN="_README";class a{constructor(e){this.param=e}fun(e){throw new Error("implement me")}toString(){return`${s}v1/${this.name}/${this.param}`}}class c extends a{constructor(e){super(e),this._padding="".padStart(e,"_"),this.name="prefix"}fun(e){return(e+this._padding).slice(0,this.param)}}class u extends a{constructor(e){super(e),this._padding="".padStart(e,"_"),this.name="suffix"}fun(e){const t=this._padding+e;return t.slice(t.length-this.param)}}class h extends a{constructor(e){super(e),this._padding="".padStart(e+1,"_"),this.name="next-to-last"}fun(e){const t=this._padding+e,r=t.length-this.param-1;return t.slice(r,r+this.param)}}function l(e){if(0===(e=e.trim()).length)throw new Error("empty shard string");if(!e.startsWith(s))throw new Error(`invalid or no path prefix: ${e}`);const t=e.slice(s.length).split("/"),r=t[0];if("v1"!==r)throw new Error(`expect 'v1' version, got '${r}'`);const n=t[1];if(!t[2])throw new Error("missing param");const i=parseInt(t[2],10);switch(n){case"prefix":return new c(i);case"suffix":return new u(i);case"next-to-last":return new h(i);default:throw new Error(`unkown sharding function: ${n}`)}}t.readShardFun=async(e,t)=>{const r=new n(e).child(new n(o)),i="function"==typeof t.getRaw?t.getRaw.bind(t):t.get.bind(t);return l((await i(r)||"").toString().trim())},t.readme=i,t.parseShardFun=l,t.Prefix=c,t.Suffix=u,t.NextToLast=h},
/*!********************************************************!*\
  !*** ./node_modules/ipfs-repo/src/blockstore-utils.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! base32.js */142),{Key:i}=r(/*! interface-datastore */14),s=r(/*! cids */4);t.cidToKey=e=>{const t=new n.Encoder;return new i("/"+t.write(e.buffer).finalize(),!1)},t.keyToCid=t=>{const r=(new n.Decoder).write(t.toString().slice(1)).finalize();return new s(e.from(r))}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************************************************!*\
  !*** ./node_modules/deferred-leveldown/node_modules/abstract-leveldown/index.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){t.AbstractLevelDOWN=r(/*! ./abstract-leveldown */706),t.AbstractIterator=r(/*! ./abstract-iterator */355),t.AbstractChainedBatch=r(/*! ./abstract-chained-batch */356)},
/*!**********************************************************************************************!*\
  !*** ./node_modules/deferred-leveldown/node_modules/abstract-leveldown/abstract-iterator.js ***!
  \**********************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){function r(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._ended=!1,this._nexting=!1}r.prototype.next=function(e){var r=this;if("function"!=typeof e)throw new Error("next() requires a callback argument");return r._ended?(t.nextTick(e,new Error("cannot call next() after end()")),r):r._nexting?(t.nextTick(e,new Error("cannot call next() before previous next() has completed")),r):(r._nexting=!0,r._next((function(){r._nexting=!1,e.apply(null,arguments)})),r)},r.prototype._next=function(e){t.nextTick(e)},r.prototype.seek=function(e){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");e=this.db._serializeKey(e),this._seek(e)},r.prototype._seek=function(e){},r.prototype.end=function(e){if("function"!=typeof e)throw new Error("end() requires a callback argument");if(this._ended)return t.nextTick(e,new Error("end() already called on iterator"));this._ended=!0,this._end(e)},r.prototype._end=function(e){t.nextTick(e)},e.exports=r}).call(this,r(/*! ./../../../process/browser.js */2))},
/*!***************************************************************************************************!*\
  !*** ./node_modules/deferred-leveldown/node_modules/abstract-leveldown/abstract-chained-batch.js ***!
  \***************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._operations=[],this._written=!1}r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(e,t){this._checkWritten();var r=this.db._checkKey(e)||this.db._checkValue(t);if(r)throw r;return e=this.db._serializeKey(e),t=this.db._serializeValue(t),this._put(e,t),this},r.prototype._put=function(e,t){this._operations.push({type:"put",key:e,value:t})},r.prototype.del=function(e){this._checkWritten();var t=this.db._checkKey(e);if(t)throw t;return e=this.db._serializeKey(e),this._del(e),this},r.prototype._del=function(e){this._operations.push({type:"del",key:e})},r.prototype.clear=function(){return this._checkWritten(),this._clear(),this},r.prototype._clear=function(){this._operations=[]},r.prototype.write=function(e,t){if(this._checkWritten(),"function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("write() requires a callback argument");"object"==typeof e&&null!==e||(e={}),this._written=!0,this._write(e,t)},r.prototype._write=function(e,t){this.db._batch(this._operations,e,t)},e.exports=r},
/*!**************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_readable.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t,n){var i;e.exports=S,S.ReadableState=E;r(/*! events */5).EventEmitter;var s=function(e,t){return e.listeners(t).length},o=r(/*! ./internal/streams/stream */358),a=r(/*! buffer */0).Buffer,c=t.Uint8Array||function(){};var u,h=r(/*! util */710);u=h&&h.debuglog?h.debuglog("stream"):function(){};var l,f,d=r(/*! ./internal/streams/buffer_list */711),p=r(/*! ./internal/streams/destroy */359),A=r(/*! ./internal/streams/state */360).getHighWaterMark,g=r(/*! ../errors */81).codes,y=g.ERR_INVALID_ARG_TYPE,m=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,w=r(/*! ../experimentalWarning */713).emitExperimentalWarning;r(/*! inherits */3)(S,o);var v=["error","close","destroy","pause","resume"];function E(e,t,n){i=i||r(/*! ./_stream_duplex */82),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=A(this,e,"readableHighWaterMark",n),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=r(/*! string_decoder/ */77).StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function S(e){if(i=i||r(/*! ./_stream_duplex */82),!(this instanceof S))return new S(e);var t=this instanceof i;this._readableState=new E(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function C(e,t,r,n,i){u("readableAddChunk",t);var s,o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,N(e)))}(e,o);else if(i||(s=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(o,t)),s)e.emit("error",s);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)o.endEmitted?e.emit("error",new b):k(e,o,t,!0);else if(o.ended)e.emit("error",new m);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?k(e,o,t,!1):B(e,o)):k(e,o,t,!1)}else n||(o.reading=!1,B(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function k(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&R(e)),B(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),C(this,e,t,!1,r)},S.prototype.unshift=function(e){return C(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){return l||(l=r(/*! string_decoder/ */77).StringDecoder),this._readableState.decoder=new l(e),this._readableState.encoding=this._readableState.decoder.encoding,this};var I=8388608;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(N,e))}function N(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function B(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(u("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function x(e){u("readable nexttick read 0"),e.read(0)}function L(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(K,t,e))}function K(e,t){u("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}S.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):R(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(r,t))),null===(n=e>0?M(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(e){this.emit("error",new _("_read()"))},S.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,u("pipe count=%d opts=%j",i.pipesCount,t);var o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:g;function a(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",p),e.removeListener("finish",A),e.removeListener("drain",h),e.removeListener("error",d),e.removeListener("unpipe",a),r.removeListener("end",c),r.removeListener("end",g),r.removeListener("data",f),l=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function c(){u("onend"),e.end()}i.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",a);var h=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,D(e))}}(r);e.on("drain",h);var l=!1;function f(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==F(i.pipes,e))&&!l&&(u("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function d(t){u("onerror",t),g(),e.removeListener("error",d),0===s(e,"error")&&e.emit("error",t)}function p(){e.removeListener("finish",A),g()}function A(){u("onfinish"),e.removeListener("close",p),g()}function g(){u("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",A),e.emit("pipe",r),i.flowing||(u("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},S.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?R(this):i.reading||n.nextTick(x,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(P,this),r},S.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(P,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(L,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<v.length;s++)e.on(v[s],this.emit.bind(this,v[s]));return this._read=function(t){u("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return w("Readable[Symbol.asyncIterator]"),void 0===f&&(f=r(/*! ./internal/streams/async_iterator */714)),f(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=M,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}})}).call(this,r(/*! ./../../webpack/buildin/global.js */10),r(/*! ./../../process/browser.js */2))},
/*!*****************************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/stream-browser.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! events */5).EventEmitter},
/*!**********************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/destroy.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,s){var o=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(s?s(e):!e||this._writableState&&this._writableState.errorEmitted||t.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!s&&e?(t.nextTick(r,o,e),o._writableState&&(o._writableState.errorEmitted=!0)):s?(t.nextTick(n,o),s(e)):t.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}).call(this,r(/*! ./../../../../process/browser.js */2))},
/*!********************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/state.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ../../../errors */81).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}},
/*!**************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_writable.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t,n){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var s;e.exports=S,S.WritableState=E;var o={deprecate:r(/*! util-deprecate */322)},a=r(/*! ./internal/streams/stream */358),c=r(/*! buffer */0).Buffer,u=t.Uint8Array||function(){};var h,l=r(/*! ./internal/streams/destroy */359),f=r(/*! ./internal/streams/state */360).getHighWaterMark,d=r(/*! ../errors */81).codes,p=d.ERR_INVALID_ARG_TYPE,A=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,m=d.ERR_STREAM_DESTROYED,_=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING;function v(){}function E(e,t,o){s=s||r(/*! ./_stream_duplex */82),e=e||{},"boolean"!=typeof o&&(o=t instanceof s),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if("function"!=typeof s)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,s){--t.pendingcb,r?(n.nextTick(s,i),n.nextTick(N,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(s(i),e._writableState.errorEmitted=!0,e.emit("error",i),N(e,t))}(e,r,i,t,s);else{var o=T(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||I(e,r),i?n.nextTick(k,e,r,o,s):k(e,r,o,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function S(e){var t=this instanceof(s=s||r(/*! ./_stream_duplex */82));if(!t&&!h.call(S,this))return new S(e);this._writableState=new E(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function C(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function k(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),N(e,t)}function I(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,s=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,C(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,h=r.encoding,l=r.callback;if(C(e,t,!1,t.objectMode?1:u.length,u,h,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function T(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),N(e,t)}))}function N(e,t){var r=T(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}r(/*! inherits */3)(S,a),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===S&&(e&&e._writableState instanceof E)}})):h=function(e){return e instanceof this},S.prototype.pipe=function(){this.emit("error",new y)},S.prototype.write=function(e,t,r){var i,s=this._writableState,o=!1,a=!s.objectMode&&(i=e,c.isBuffer(i)||i instanceof u);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof r&&(r=v),s.ending?function(e,t){var r=new b;e.emit("error",r),n.nextTick(t,r)}(this,r):(a||function(e,t,r,i){var s;return null===r?s=new _:"string"==typeof r||t.objectMode||(s=new p("chunk",["string","Buffer"],r)),!s||(e.emit("error",s),n.nextTick(i,s),!1)}(this,s,e,r))&&(s.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,a,n,i,s);return u}(this,s,a,e,t,r)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,r){r(new A("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,N(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this,r(/*! ./../../webpack/buildin/global.js */10),r(/*! ./../../process/browser.js */2))},
/*!***************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_transform.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=h;var n=r(/*! ../errors */81).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(/*! ./_stream_duplex */82);function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function h(e){if(!(this instanceof h))return new h(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,r){f(e,t,r)}))}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}r(/*! inherits */3)(h,c),h.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},h.prototype._transform=function(e,t,r){r(new i("_transform()"))},h.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},h.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},h.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},
/*!***********************************************!*\
  !*** ./node_modules/levelup/lib/promisify.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(){var e,t=new Promise((function(t,r){e=function(e,n){e?r(e):t(n)}}));return e.promise=t,e}},
/*!*****************************************************************************************!*\
  !*** ./node_modules/encoding-down/node_modules/abstract-leveldown/abstract-iterator.js ***!
  \*****************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){function r(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._ended=!1,this._nexting=!1}r.prototype.next=function(e){var r=this;if("function"!=typeof e)throw new Error("next() requires a callback argument");return r._ended?(t.nextTick(e,new Error("cannot call next() after end()")),r):r._nexting?(t.nextTick(e,new Error("cannot call next() before previous next() has completed")),r):(r._nexting=!0,r._next((function(){r._nexting=!1,e.apply(null,arguments)})),r)},r.prototype._next=function(e){t.nextTick(e)},r.prototype.seek=function(e){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");e=this.db._serializeKey(e),this._seek(e)},r.prototype._seek=function(e){},r.prototype.end=function(e){if("function"!=typeof e)throw new Error("end() requires a callback argument");if(this._ended)return t.nextTick(e,new Error("end() already called on iterator"));this._ended=!0,this._end(e)},r.prototype._end=function(e){t.nextTick(e)},e.exports=r}).call(this,r(/*! ./../../../process/browser.js */2))},
/*!**********************************************************************************************!*\
  !*** ./node_modules/encoding-down/node_modules/abstract-leveldown/abstract-chained-batch.js ***!
  \**********************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._operations=[],this._written=!1}r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(e,t){this._checkWritten();var r=this.db._checkKey(e)||this.db._checkValue(t);if(r)throw r;return e=this.db._serializeKey(e),t=this.db._serializeValue(t),this._put(e,t),this},r.prototype._put=function(e,t){this._operations.push({type:"put",key:e,value:t})},r.prototype.del=function(e){this._checkWritten();var t=this.db._checkKey(e);if(t)throw t;return e=this.db._serializeKey(e),this._del(e),this},r.prototype._del=function(e){this._operations.push({type:"del",key:e})},r.prototype.clear=function(){return this._checkWritten(),this._clear(),this},r.prototype._clear=function(){this._operations=[]},r.prototype.write=function(e,t){if(this._checkWritten(),"function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("write() requires a callback argument");"object"==typeof e&&null!==e||(e={}),this._written=!0,this._write(e,t)},r.prototype._write=function(e,t){this.db._batch(this._operations,e,t)},e.exports=r},
/*!************************************************************************!*\
  !*** ./node_modules/level-js/node_modules/abstract-leveldown/index.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){t.AbstractLevelDOWN=r(/*! ./abstract-leveldown */726),t.AbstractIterator=r(/*! ./abstract-iterator */367),t.AbstractChainedBatch=r(/*! ./abstract-chained-batch */368)},
/*!************************************************************************************!*\
  !*** ./node_modules/level-js/node_modules/abstract-leveldown/abstract-iterator.js ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){function r(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._ended=!1,this._nexting=!1}r.prototype.next=function(e){var r=this;if("function"!=typeof e)throw new Error("next() requires a callback argument");return r._ended?(t.nextTick(e,new Error("cannot call next() after end()")),r):r._nexting?(t.nextTick(e,new Error("cannot call next() before previous next() has completed")),r):(r._nexting=!0,r._next((function(){r._nexting=!1,e.apply(null,arguments)})),r)},r.prototype._next=function(e){t.nextTick(e)},r.prototype.seek=function(e){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");e=this.db._serializeKey(e),this._seek(e)},r.prototype._seek=function(e){},r.prototype.end=function(e){if("function"!=typeof e)throw new Error("end() requires a callback argument");if(this._ended)return t.nextTick(e,new Error("end() already called on iterator"));this._ended=!0,this._end(e)},r.prototype._end=function(e){t.nextTick(e)},e.exports=r}).call(this,r(/*! ./../../../process/browser.js */2))},
/*!*****************************************************************************************!*\
  !*** ./node_modules/level-js/node_modules/abstract-leveldown/abstract-chained-batch.js ***!
  \*****************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._operations=[],this._written=!1}r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(e,t){this._checkWritten();var r=this.db._checkKey(e)||this.db._checkValue(t);if(r)throw r;return e=this.db._serializeKey(e),t=this.db._serializeValue(t),this._put(e,t),this},r.prototype._put=function(e,t){this._operations.push({type:"put",key:e,value:t})},r.prototype.del=function(e){this._checkWritten();var t=this.db._checkKey(e);if(t)throw t;return e=this.db._serializeKey(e),this._del(e),this},r.prototype._del=function(e){this._operations.push({type:"del",key:e})},r.prototype.clear=function(){return this._checkWritten(),this._clear(),this},r.prototype._clear=function(){this._operations=[]},r.prototype.write=function(e,t){if(this._checkWritten(),"function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("write() requires a callback argument");"object"==typeof e&&null!==e||(e={}),this._written=!0,this._write(e,t)},r.prototype._write=function(e,t){this.db._batch(this._operations,e,t)},e.exports=r},
/*!*******************************************************!*\
  !*** ./node_modules/level-js/util/mixed-to-buffer.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){var n=r(/*! typedarray-to-buffer */729);e.exports=function(e){return e instanceof Uint8Array?n(e):e instanceof ArrayBuffer?t.from(e):t.from(String(e))}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************************!*\
  !*** ./node_modules/level-js/util/immediate-browser.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! immediate */731)},
/*!***************************************************!*\
  !*** ./node_modules/ipfs-repo/src/lock-memory.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./errors */208),i=r(/*! debug */1)("repo:lock"),s={};t.lock=async e=>{const t=e+"/repo.lock";if(i("locking %s",t),!0===s[t])throw new n.LockExistsError(`Lock already being held for file: ${t}`);return s[t]=!0,{async close(){s[t]&&delete s[t]}}},t.locked=async e=>{const t=e+"/repo.lock";return i(`checking lock: ${t}`),Boolean(s[t])}},
/*!***************************************************!*\
  !*** ./node_modules/libp2p-keychain/src/index.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=r(/*! ./keychain */742)},
/*!****************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/cipher.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./util */20),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};var i=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};i.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},i.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},i.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},
/*!*********************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/cipherModes.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./util */20),n.cipher=n.cipher||{};var i=e.exports=n.cipher.modes=n.cipher.modes||{};function s(e){if("string"==typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var t=e;e=n.util.createBuffer();for(var r=0;r<t.length;++r)e.putByte(t[r])}return n.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}i.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(e){},i.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=a(8*t.length());var s=t.length()%this.blockSize;for(s&&t.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},i.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},i.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},i.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},i.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},i.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],c=(n-1-o%n)*t;a[o/n|0]=1<<t-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s},i.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],c=i[o];i[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var u=i[s^n];i[s]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i}},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/x509.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./aes */145),r(/*! ./asn1 */107),r(/*! ./des */213),r(/*! ./md */84),r(/*! ./mgf */753),r(/*! ./oids */108),r(/*! ./pem */214),r(/*! ./pss */755),r(/*! ./rsa */376),r(/*! ./util */20);var i=n.asn1,s=e.exports=n.pki=n.pki||{},o=s.oids,a={};a.CN=o.commonName,a.commonName="CN",a.C=o.countryName,a.countryName="C",a.L=o.localityName,a.localityName="L",a.ST=o.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=o.organizationName,a.organizationName="O",a.OU=o.organizationalUnitName,a.organizationalUnitName="OU",a.E=o.emailAddress,a.emailAddress="E";var c=n.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},h={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},l={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[l,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function d(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],t.type&&t.type===r.type?n=r:t.name&&t.name===r.name?n=r:t.shortName&&t.shortName===r.shortName&&(n=r);return n}s.RDNAttributesAsArray=function(e,t){for(var r,n,s,c=[],u=0;u<e.value.length;++u){r=e.value[u];for(var h=0;h<r.value.length;++h)s={},n=r.value[h],s.type=i.derToOid(n.value[0].value),s.value=n.value[1].value,s.valueTagClass=n.value[1].type,s.type in o&&(s.name=o[s.type],s.name in a&&(s.shortName=a[s.name])),t&&(t.update(s.type),t.update(s.value)),c.push(s)}return c},s.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],c=i.derToOid(n.value[0].value),u=n.value[1].value,h=0;h<u.length;++h){var l={};if(l.type=c,l.value=u[h].value,l.valueTagClass=u[h].type,l.type in o&&(l.name=o[l.type],l.name in a&&(l.shortName=a[l.name])),l.type===o.extensionRequest){l.extensions=[];for(var f=0;f<l.value.length;++f)l.extensions.push(s.certificateExtensionFromAsn1(l.value[f]))}t.push(l)}return t};var p=function(e,t,r){var n={};if(e!==o["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var s={},a=[];if(!i.validate(t,h,s,a)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=a,c}return void 0!==s.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=i.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=i.derToOid(s.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=i.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(n.saltLength=s.saltLength.charCodeAt(0)),n};function A(e){for(var t,r,s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),o=e.attributes,a=0;a<o.length;++a){var c=(t=o[a]).value,u=i.Type.PRINTABLESTRING;"valueTagClass"in t&&(u=t.valueTagClass)===i.Type.UTF8&&(c=n.util.encodeUtf8(c)),r=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,u,!1,c)])]),s.value.push(r)}return s}function g(e){for(var t,r=0;r<e.length;++r){if(void 0===(t=e[r]).name&&(t.type&&t.type in s.oids?t.name=s.oids[t.type]:t.shortName&&t.shortName in a&&(t.name=s.oids[a[t.shortName]])),void 0===t.type){if(!(t.name&&t.name in s.oids))throw(c=new Error("Attribute type not specified.")).attribute=t,c;t.type=s.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in a&&(t.shortName=a[t.name]),t.type===o.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=i.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(s.certificateExtensionToAsn1(y(t.extensions[n])))}var c;if(void 0===t.value)throw(c=new Error("Attribute value not specified.")).attribute=t,c}}function y(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in s.oids&&(e.name=s.oids[e.id]),void 0===e.id){if(!(e.name&&e.name in s.oids))throw(w=new Error("Extension ID not specified.")).extension=e,w;e.id=s.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var r=0,a=0,c=0;e.digitalSignature&&(a|=128,r=7),e.nonRepudiation&&(a|=64,r=6),e.keyEncipherment&&(a|=32,r=5),e.dataEncipherment&&(a|=16,r=4),e.keyAgreement&&(a|=8,r=3),e.keyCertSign&&(a|=4,r=2),e.cRLSign&&(a|=2,r=1),e.encipherOnly&&(a|=1,r=0),e.decipherOnly&&(c|=128,r=7);var u=String.fromCharCode(r);0!==c?u+=String.fromCharCode(a)+String.fromCharCode(c):0!==a&&(u+=String.fromCharCode(a)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("basicConstraints"===e.name)e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var h=e.value.value;for(var l in e)!0===e[l]&&(l in o?h.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o[l]).getBytes())):-1!==l.indexOf(".")&&h.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(l).getBytes())))}else if("nsCertType"===e.name){r=0,a=0;e.client&&(a|=128,r=7),e.server&&(a|=64,r=6),e.email&&(a|=32,r=5),e.objsign&&(a|=16,r=4),e.reserved&&(a|=8,r=3),e.sslCA&&(a|=4,r=2),e.emailCA&&(a|=2,r=1),e.objCA&&(a|=1,r=0);u=String.fromCharCode(r);0!==a&&(u+=String.fromCharCode(a)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var f=0;f<e.altNames.length;++f){u=(m=e.altNames[f]).value;if(7===m.type&&m.ip){if(null===(u=n.util.bytesFromIP(m.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,w}else 8===m.type&&(u=m.oid?i.oidToDer(i.oidToDer(m.oid)):i.oidToDer(u));e.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,m.type,!1,u))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var d=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=d.toHex(),e.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,d.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);h=e.value.value;if(e.keyIdentifier){var p=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;h.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,p))}if(e.authorityCertIssuer){var g=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[A(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];h.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,g))}if(e.serialNumber){var y=n.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);h.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if("cRLDistributionPoints"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);h=e.value.value;var m,_=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),b=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(f=0;f<e.altNames.length;++f){u=(m=e.altNames[f]).value;if(7===m.type&&m.ip){if(null===(u=n.util.bytesFromIP(m.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,w}else 8===m.type&&(u=m.oid?i.oidToDer(i.oidToDer(m.oid)):i.oidToDer(u));b.value.push(i.create(i.Class.CONTEXT_SPECIFIC,m.type,!1,u))}_.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[b])),h.push(_)}var w;if(void 0===e.value)throw(w=new Error("Extension value not specified.")).extension=e,w;return e}function m(e,t){switch(e){case o["RSASSA-PSS"]:var r=[];return void 0!==t.hash.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,r);default:return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}}function _(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,s=0;s<r.length;++s){var o=r[s],a=o.value,c=i.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===i.Type.UTF8&&(a=n.util.encodeUtf8(a));var u=!1;"valueConstructed"in o&&(u=o.valueConstructed);var h=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,c,u,a)])]);t.value.push(h)}return t}s.certificateFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificateFromAsn1(c,t)},s.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:i.toDer(s.certificateToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.publicKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.publicKeyFromAsn1(o)},s.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:i.toDer(s.publicKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.getPublicKeyFingerprint=function(e,t){var r,o=(t=t||{}).md||n.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=i.toDer(s.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}o.start(),o.update(r);var a=o.digest();if("hex"===t.encoding){var c=a.toHex();return t.delimiter?c.match(/.{2}/g).join(t.delimiter):c}if("binary"===t.encoding)return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return a},s.certificationRequestFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificationRequestFromAsn1(c,t)},s.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:i.toDer(s.certificationRequestToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return d(e.issuer,t)},e.issuer.addField=function(t){g([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return d(e.subject,t)},e.subject.addField=function(t){g([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){g(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){g(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)y(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var r,n=null,i=0;null===n&&i<e.extensions.length;++i)r=e.extensions[i],t.id&&r.id===t.id?n=r:t.name&&r.name===t.name&&(n=r);return n},e.sign=function(t,r){e.md=r||n.md.sha1.create();var a=o[e.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=a,e.tbsCertificate=s.getTBSCertificate(e);var u=i.toDer(e.tbsCertificate);e.md.update(u.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var a=t.issuer,c=e.subject;throw(A=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=a.attributes,A.actualIssuer=c.attributes,A}var u=t.md;if(null===u){if(t.signatureOid in o)switch(o[t.signatureOid]){case"sha1WithRSAEncryption":u=n.md.sha1.create();break;case"md5WithRSAEncryption":u=n.md.md5.create();break;case"sha256WithRSAEncryption":u=n.md.sha256.create();break;case"sha384WithRSAEncryption":u=n.md.sha384.create();break;case"sha512WithRSAEncryption":u=n.md.sha512.create();break;case"RSASSA-PSS":u=n.md.sha256.create()}if(null===u)throw(A=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=t.signatureOid,A;var h=t.tbsCertificate||s.getTBSCertificate(t),l=i.toDer(h);u.update(l.getBytes())}if(null!==u){var f;switch(t.signatureOid){case o.sha1WithRSAEncryption:f=void 0;break;case o["RSASSA-PSS"]:var d,p,A;if(void 0===(d=o[t.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[d])throw(A=new Error("Unsupported MGF hash function.")).oid=t.signatureParameters.mgf.hash.algorithmOid,A.name=d,A;if(void 0===(p=o[t.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[p])throw(A=new Error("Unsupported MGF function.")).oid=t.signatureParameters.mgf.algorithmOid,A.name=p,A;if(p=n.mgf[p].create(n.md[d].create()),void 0===(d=o[t.signatureParameters.hash.algorithmOid])||void 0===n.md[d])throw{message:"Unsupported RSASSA-PSS hash function.",oid:t.signatureParameters.hash.algorithmOid,name:d};f=n.pss.create(n.md[d].create(),p,t.signatureParameters.saltLength)}r=e.publicKey.verify(u.digest().getBytes(),t.signature,f)}return r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var s,o;r=!0;for(var a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],s.type===o.type&&s.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=o.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var i=e.extensions[r];if(i.id===t){var s=e.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(i.subjectKeyIdentifier)===s}}return!1},e},s.certificateFromAsn1=function(e,t){var r={},a=[];if(!i.validate(e,u,r,a))throw(f=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=a,f;if(i.derToOid(r.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificate();c.version=r.certVersion?r.certVersion.charCodeAt(0):0;var h=n.util.createBuffer(r.certSerialNumber);c.serialNumber=h.toHex(),c.signatureOid=n.asn1.derToOid(r.certSignatureOid),c.signatureParameters=p(c.signatureOid,r.certSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.certinfoSignatureParams,!1),c.signature=r.certSignature;var l=[];if(void 0!==r.certValidity1UTCTime&&l.push(i.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&l.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&l.push(i.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&l.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=l[0],c.validity.notAfter=l[1],c.tbsCertificate=r.tbsCertificate,t){var f;if(c.md=null,c.signatureOid in o)switch(o[c.signatureOid]){case"sha1WithRSAEncryption":c.md=n.md.sha1.create();break;case"md5WithRSAEncryption":c.md=n.md.md5.create();break;case"sha256WithRSAEncryption":c.md=n.md.sha256.create();break;case"sha384WithRSAEncryption":c.md=n.md.sha384.create();break;case"sha512WithRSAEncryption":c.md=n.md.sha512.create();break;case"RSASSA-PSS":c.md=n.md.sha256.create()}if(null===c.md)throw(f=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=c.signatureOid,f;var A=i.toDer(c.tbsCertificate);c.md.update(A.getBytes())}var y=n.md.sha1.create();c.issuer.getField=function(e){return d(c.issuer,e)},c.issuer.addField=function(e){g([e]),c.issuer.attributes.push(e)},c.issuer.attributes=s.RDNAttributesAsArray(r.certIssuer,y),r.certIssuerUniqueId&&(c.issuer.uniqueId=r.certIssuerUniqueId),c.issuer.hash=y.digest().toHex();var m=n.md.sha1.create();return c.subject.getField=function(e){return d(c.subject,e)},c.subject.addField=function(e){g([e]),c.subject.attributes.push(e)},c.subject.attributes=s.RDNAttributesAsArray(r.certSubject,m),r.certSubjectUniqueId&&(c.subject.uniqueId=r.certSubjectUniqueId),c.subject.hash=m.digest().toHex(),r.certExtensions?c.extensions=s.certificateExtensionsFromAsn1(r.certExtensions):c.extensions=[],c.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),c},s.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(s.certificateExtensionFromAsn1(n.value[i]));return t},s.certificateExtensionFromAsn1=function(e){var t={};if(t.id=i.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===i.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in o)if(t.name=o[t.id],"keyUsage"===t.name){var r=0,s=0;(c=i.fromDer(t.value)).value.length>1&&(r=c.value.charCodeAt(1),s=c.value.length>2?c.value.charCodeAt(2):0),t.digitalSignature=128==(128&r),t.nonRepudiation=64==(64&r),t.keyEncipherment=32==(32&r),t.dataEncipherment=16==(16&r),t.keyAgreement=8==(8&r),t.keyCertSign=4==(4&r),t.cRLSign=2==(2&r),t.encipherOnly=1==(1&r),t.decipherOnly=128==(128&s)}else if("basicConstraints"===t.name){(c=i.fromDer(t.value)).value.length>0&&c.value[0].type===i.Type.BOOLEAN?t.cA=0!==c.value[0].value.charCodeAt(0):t.cA=!1;var a=null;c.value.length>0&&c.value[0].type===i.Type.INTEGER?a=c.value[0].value:c.value.length>1&&(a=c.value[1].value),null!==a&&(t.pathLenConstraint=i.derToInteger(a))}else if("extKeyUsage"===t.name)for(var c=i.fromDer(t.value),u=0;u<c.value.length;++u){var h=i.derToOid(c.value[u].value);h in o?t[o[h]]=!0:t[h]=!0}else if("nsCertType"===t.name){r=0;(c=i.fromDer(t.value)).value.length>1&&(r=c.value.charCodeAt(1)),t.client=128==(128&r),t.server=64==(64&r),t.email=32==(32&r),t.objsign=16==(16&r),t.reserved=8==(8&r),t.sslCA=4==(4&r),t.emailCA=2==(2&r),t.objCA=1==(1&r)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){var l;t.altNames=[];c=i.fromDer(t.value);for(var f=0;f<c.value.length;++f){var d={type:(l=c.value[f]).type,value:l.value};switch(t.altNames.push(d),l.type){case 1:case 2:case 6:break;case 7:d.ip=n.util.bytesToIP(l.value);break;case 8:d.oid=i.derToOid(l.value)}}}else if("subjectKeyIdentifier"===t.name){c=i.fromDer(t.value);t.subjectKeyIdentifier=n.util.bytesToHex(c.value)}return t},s.certificationRequestFromAsn1=function(e,t){var r={},a=[];if(!i.validate(e,f,r,a))throw(u=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=a,u;if(i.derToOid(r.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=n.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=p(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,t){var u;if(c.md=null,c.signatureOid in o)switch(o[c.signatureOid]){case"sha1WithRSAEncryption":c.md=n.md.sha1.create();break;case"md5WithRSAEncryption":c.md=n.md.md5.create();break;case"sha256WithRSAEncryption":c.md=n.md.sha256.create();break;case"sha384WithRSAEncryption":c.md=n.md.sha384.create();break;case"sha512WithRSAEncryption":c.md=n.md.sha512.create();break;case"RSASSA-PSS":c.md=n.md.sha256.create()}if(null===c.md)throw(u=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=c.signatureOid,u;var h=i.toDer(c.certificationRequestInfo);c.md.update(h.getBytes())}var l=n.md.sha1.create();return c.subject.getField=function(e){return d(c.subject,e)},c.subject.addField=function(e){g([e]),c.subject.attributes.push(e)},c.subject.attributes=s.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),c.subject.hash=l.digest().toHex(),c.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(e){return d(c,e)},c.addAttribute=function(e){g([e]),c.attributes.push(e)},c.attributes=s.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c},s.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return d(e.subject,t)},e.subject.addField=function(t){g([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return d(e,t)},e.addAttribute=function(t){g([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){g(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){g(t),e.attributes=t},e.sign=function(t,r){e.md=r||n.md.sha1.create();var a=o[e.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=a,e.certificationRequestInfo=s.getCertificationRequestInfo(e);var u=i.toDer(e.certificationRequestInfo);e.md.update(u.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){if(e.signatureOid in o)switch(o[e.signatureOid]){case"sha1WithRSAEncryption":r=n.md.sha1.create();break;case"md5WithRSAEncryption":r=n.md.md5.create();break;case"sha256WithRSAEncryption":r=n.md.sha256.create();break;case"sha384WithRSAEncryption":r=n.md.sha384.create();break;case"sha512WithRSAEncryption":r=n.md.sha512.create();break;case"RSASSA-PSS":r=n.md.sha256.create()}if(null===r)throw(f=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=e.signatureOid,f;var a=e.certificationRequestInfo||s.getCertificationRequestInfo(e),c=i.toDer(a);r.update(c.getBytes())}if(null!==r){var u;switch(e.signatureOid){case o.sha1WithRSAEncryption:break;case o["RSASSA-PSS"]:var h,l,f;if(void 0===(h=o[e.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[h])throw(f=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,f.name=h,f;if(void 0===(l=o[e.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[l])throw(f=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,f.name=l,f;if(l=n.mgf[l].create(n.md[h].create()),void 0===(h=o[e.signatureParameters.hash.algorithmOid])||void 0===n.md[h])throw(f=new Error("Unsupported RSASSA-PSS hash function.")).oid=e.signatureParameters.hash.algorithmOid,f.name=h,f;u=n.pss.create(n.md[h].create(),l,e.signatureParameters.saltLength)}t=e.publicKey.verify(r.digest().getBytes(),e.signature,u)}return t},e};var b=new Date("1950-01-01T00:00:00Z"),w=new Date("2050-01-01T00:00:00Z");function v(e){return e>=b&&e<w?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(e)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(e))}s.getTBSCertificate=function(e){var t=v(e.validity.notBefore),r=v(e.validity.notAfter),o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.siginfo.algorithmOid).getBytes()),m(e.siginfo.algorithmOid,e.siginfo.parameters)]),A(e.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,r]),A(e.subject),s.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&o.value.push(s.certificateExtensionsToAsn1(e.extensions)),o},s.getCertificationRequestInfo=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),A(e.subject),s.publicKeyToAsn1(e.publicKey),_(e)])},s.distinguishedNameToAsn1=function(e){return A(e)},s.certificateToAsn1=function(e){var t=e.tbsCertificate||s.getTBSCertificate(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),m(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.certificateExtensionsToAsn1=function(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),r=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(s.certificateExtensionToAsn1(e[n]));return t},s.certificateExtensionToAsn1=function(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.id).getBytes())),e.critical&&t.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=i.toDer(r).getBytes()),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)),t},s.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||s.getCertificationRequestInfo(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),m(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.createCaStore=function(e){var t={certs:{}};function r(e){return o(e),t.certs[e.hash]||null}function o(e){if(!e.hash){var t=n.md.sha1.create();e.attributes=s.RDNAttributesAsArray(A(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return r(e.issuer)},t.addCertificate=function(e){if("string"==typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var r=t.certs[e.subject.hash];n.util.isArray(r)||(r=[r]),r.push(e),t.certs[e.subject.hash]=r}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"==typeof e&&(e=n.pki.certificateFromPem(e));var t=r(e.subject);if(!t)return!1;n.util.isArray(t)||(t=[t]);for(var o=i.toDer(s.certificateToAsn1(e)).getBytes(),a=0;a<t.length;++a){if(o===i.toDer(s.certificateToAsn1(t[a])).getBytes())return!0}return!1},t.listAllCertificates=function(){var e=[];for(var r in t.certs)if(t.certs.hasOwnProperty(r)){var i=t.certs[r];if(n.util.isArray(i))for(var s=0;s<i.length;++s)e.push(i[s]);else e.push(i)}return e},t.removeCertificate=function(e){var a;if("string"==typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))return null;var c=r(e.subject);if(!n.util.isArray(c))return a=t.certs[e.subject.hash],delete t.certs[e.subject.hash],a;for(var u=i.toDer(s.certificateToAsn1(e)).getBytes(),h=0;h<c.length;++h){u===i.toDer(s.certificateToAsn1(c[h])).getBytes()&&(a=c[h],c.splice(h,1))}return 0===c.length&&delete t.certs[e.subject.hash],a},e)for(var a=0;a<e.length;++a){var c=e[a];t.addCertificate(c)}return t},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(e,t,r){"function"==typeof r&&(r={verify:r}),r=r||{};var i=(t=t.slice(0)).slice(0),o=r.validityCheckDate;void 0===o&&(o=new Date);var a=!0,c=null,u=0;do{var h=t.shift(),l=null,f=!1;if(o&&(o<h.validity.notBefore||o>h.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:h.validity.notBefore,notAfter:h.validity.notAfter,now:o}),null===c){if(null===(l=t[0]||e.getIssuer(h))&&h.isIssuer(h)&&(f=!0,l=h),l){var d=l;n.util.isArray(d)||(d=[d]);for(var p=!1;!p&&d.length>0;){l=d.shift();try{p=l.verify(h)}catch(e){}}p||(c={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==c||l&&!f||e.hasCertificate(h)||(c={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===c&&l&&!h.isIssuer(l)&&(c={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===c)for(var A={keyUsage:!0,basicConstraints:!0},g=0;null===c&&g<h.extensions.length;++g){var y=h.extensions[g];!y.critical||y.name in A||(c={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===c&&(!a||0===t.length&&(!l||f))){var m=h.getExtension("basicConstraints"),_=h.getExtension("keyUsage");if(null!==_&&(_.keyCertSign&&null!==m||(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==c||null===m||m.cA||(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===c&&null!==_&&"pathLenConstraint"in m)u-1>m.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}var b=null===c||c.error,w=r.verify?r.verify(b,u,i):b;if(!0!==w)throw!0===b&&(c={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(w||0===w)&&("object"!=typeof w||n.util.isArray(w)?"string"==typeof w&&(c.error=w):(w.message&&(c.message=w.message),w.error&&(c.error=w.error))),c;c=null,a=!1,++u}while(t.length>0);return!0}},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/rsa.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);if(r(/*! ./asn1 */107),r(/*! ./jsbn */377),r(/*! ./oids */108),r(/*! ./pkcs1 */756),r(/*! ./prime */758),r(/*! ./random */83),r(/*! ./util */20),void 0===i)var i=n.jsbn.BigInteger;var s=n.util.isNodejs?r(/*! crypto */215):null,o=n.asn1,a=n.util;n.pki=n.pki||{},e.exports=n.pki.rsa=n.rsa=n.rsa||{};var c=n.pki,u=[6,4,2,4,2,4,6,2],h={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},l={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},f={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},d=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},p=function(e){var t;if(!(e.algorithm in c.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=c.oids[e.algorithm];var n=o.oidToDer(t).getBytes(),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),s=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);s.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,n)),s.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var a=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(a),o.toDer(i).getBytes()},A=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var s;t.dP||(t.dP=t.d.mod(t.p.subtract(i.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(i.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{s=new i(n.util.bytesToHex(n.random.getBytes(t.n.bitLength()/8)),16)}while(s.compareTo(t.n)>=0||!s.gcd(t.n).equals(i.ONE));for(var o=(e=e.multiply(s.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);o.compareTo(a)<0;)o=o.add(t.p);var c=o.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return c=c.multiply(s.modInverse(t.n)).mod(t.n)};function g(e,t,r){var i=n.util.createBuffer(),s=Math.ceil(t.n.bitLength()/8);if(e.length>s-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=s-11,o}i.putByte(0),i.putByte(r);var a,c=s-3-e.length;if(0===r||1===r){a=0===r?0:255;for(var u=0;u<c;++u)i.putByte(a)}else for(;c>0;){var h=0,l=n.random.getBytes(c);for(u=0;u<c;++u)0===(a=l.charCodeAt(u))?++h:i.putByte(a);c=h}return i.putByte(0),i.putBytes(e),i}function y(e,t,r,i){var s=Math.ceil(t.n.bitLength()/8),o=n.util.createBuffer(e),a=o.getByte(),c=o.getByte();if(0!==a||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&void 0===i)throw new Error("Encryption block is invalid.");var u=0;if(0===c){u=s-3-i;for(var h=0;h<u;++h)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===c)for(u=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++u}else if(2===c)for(u=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++u}if(0!==o.getByte()||u!==s-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function m(e,t,r){"function"==typeof t&&(r=t,t={});var s={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function o(){a(e.pBits,(function(t,n){return t?r(t):(e.p=n,null!==e.q?u(t,e.q):void a(e.qBits,u))}))}function a(e,t){n.prime.generateProbablePrime(e,s,t)}function u(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(i.ONE).gcd(e.e).compareTo(i.ONE))return e.p=null,void o();if(0!==e.q.subtract(i.ONE).gcd(e.e).compareTo(i.ONE))return e.q=null,void a(e.qBits,u);if(e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(i.ONE))return e.p=e.q=null,void o();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void a(e.qBits,u);var h=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"prng"in t&&(s.prng=t.prng),o()}function _(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=n.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function b(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function w(e){return n.util.isNodejs&&"function"==typeof s[e]}function v(e){return void 0!==a.globalScope&&"object"==typeof a.globalScope.crypto&&"object"==typeof a.globalScope.crypto.subtle&&"function"==typeof a.globalScope.crypto.subtle[e]}function E(e){return void 0!==a.globalScope&&"object"==typeof a.globalScope.msCrypto&&"object"==typeof a.globalScope.msCrypto.subtle&&"function"==typeof a.globalScope.msCrypto.subtle[e]}function S(e){for(var t=n.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}c.rsa.encrypt=function(e,t,r){var s,o=r,a=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(o=2===r,s=g(e,t,r)):(s=n.util.createBuffer()).putBytes(e);for(var c=new i(s.toHex(),16),u=A(c,t,o).toString(16),h=n.util.createBuffer(),l=a-Math.ceil(u.length/2);l>0;)h.putByte(0),--l;return h.putBytes(n.util.hexToBytes(u)),h.getBytes()},c.rsa.decrypt=function(e,t,r,s){var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=o,a}var c=new i(n.util.createBuffer(e).toHex(),16);if(c.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var u=A(c,t,r).toString(16),h=n.util.createBuffer(),l=o-Math.ceil(u.length/2);l>0;)h.putByte(0),--l;return h.putBytes(n.util.hexToBytes(u)),!1!==s?y(h.getBytes(),t,r):h.getBytes()},c.rsa.createKeyPairGenerationState=function(e,t,r){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var s,o=(r=r||{}).prng||n.random,a={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},c=r.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return(s={algorithm:c,state:0,bits:e,rng:a,eInt:t||65537,e:new i(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(s.eInt),s},c.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);for(var n,s=0,o=function(e,t){return e|t},a=+new Date,h=0;null===e.keys&&(t<=0||h<t);){if(0===e.state){var l=null===e.p?e.pBits:e.qBits,f=l-1;0===e.pqState?(e.num=new i(l,e.rng),e.num.testBit(f)||e.num.bitwiseTo(i.ONE.shiftLeft(f),o,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),s=0,++e.pqState):1===e.pqState?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(b(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(u[s++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(i.ONE).gcd(e.e).compareTo(i.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(i.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var d=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,d,e.p,e.q,d.mod(e.p1),d.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)}}h+=(n=+new Date)-a,a=n}return null!==e.keys},c.rsa.generateKeyPair=function(e,t,r,i){if(1===arguments.length?"object"==typeof e?(r=e,e=void 0):"function"==typeof e&&(i=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(i=t,t=void 0):"number"!=typeof t&&(r=t,t=void 0):(r=e,i=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(i=r,r=void 0):(i=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(i){if(w("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,r){if(e)return i(e);i(null,{privateKey:c.privateKeyFromPem(r),publicKey:c.publicKeyFromPem(t)})}));if(v("generateKey")&&v("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:S(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return a.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){i(e)})).then((function(e){if(e){var t=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(e)));i(null,{privateKey:t,publicKey:c.setRsaPublicKey(t.n,t.e)})}}));if(E("generateKey")&&E("exportKey")){var u=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:S(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return u.oncomplete=function(e){var t=e.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(t)));i(null,{privateKey:r,publicKey:c.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){i(e)}},void(u.onerror=function(e){i(e)})}}else if(w("generateKeyPairSync")){var h=s.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(h.privateKey),publicKey:c.publicKeyFromPem(h.publicKey)}}var l=c.rsa.createKeyPairGenerationState(e,t,r);if(!i)return c.rsa.stepKeyPairGenerationState(l,0),l.keys;m(l,r,i)},c.setRsaPublicKey=c.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,i){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return g(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return n.pkcs1.encode_rsa_oaep(t,e,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var s=t.encode(e,r,!0);return c.rsa.encrypt(s,r,!0)},verify:function(e,t,n){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===n?n={verify:function(e,t){return t=y(t,r,!0),e===o.fromDer(t).value[1].value}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(e,t){return e===(t=y(t,r,!0))}});var i=c.rsa.decrypt(t,r,!0,!1);return n.verify(e,i,r.n.bitLength())}};return r},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(e,t,r,i,s,o,a,u){var h={n:e,e:t,d:r,p:i,q:s,dP:o,dQ:a,qInv:u,decrypt:function(e,t,r){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var i=c.rsa.decrypt(e,h,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:y};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return n.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(i,h,!1)},sign:function(e,t){var r=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:p},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,h.n.bitLength());return c.rsa.encrypt(n,h,r)}};return h},c.wrapRsaPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(e).getBytes())])},c.privateKeyFromAsn1=function(e){var t,r,s,a,u,f,d,p,A={},g=[];if(o.validate(e,h,A,g)&&(e=o.fromDer(n.util.createBuffer(A.privateKey))),A={},g=[],!o.validate(e,l,A,g)){var y=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw y.errors=g,y}return t=n.util.createBuffer(A.privateKeyModulus).toHex(),r=n.util.createBuffer(A.privateKeyPublicExponent).toHex(),s=n.util.createBuffer(A.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(A.privateKeyPrime1).toHex(),u=n.util.createBuffer(A.privateKeyPrime2).toHex(),f=n.util.createBuffer(A.privateKeyExponent1).toHex(),d=n.util.createBuffer(A.privateKeyExponent2).toHex(),p=n.util.createBuffer(A.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new i(t,16),new i(r,16),new i(s,16),new i(a,16),new i(u,16),new i(f,16),new i(d,16),new i(p,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.qInv))])},c.publicKeyFromAsn1=function(e){var t={},r=[];if(o.validate(e,d,t,r)){var s,a=o.derToOid(t.publicKeyOid);if(a!==c.oids.rsaEncryption)throw(s=new Error("Cannot read public key. Unknown OID.")).oid=a,s;e=t.rsaPublicKey}if(r=[],!o.validate(e,f,t,r))throw(s=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,s;var u=n.util.createBuffer(t.publicKeyModulus).toHex(),h=n.util.createBuffer(t.publicKeyExponent).toHex();return c.setRsaPublicKey(new i(u,16),new i(h,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(e)])])},c.publicKeyToRSAPublicKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,_(e.e))])}},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/jsbn.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n,i=r(/*! ./forge */12);e.exports=i.jsbn=i.jsbn||{};function s(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function o(){return new s(null)}function a(e,t,r,n,i,s){for(var o=16383&t,a=t>>14;--s>=0;){var c=16383&this.data[e],u=this.data[e++]>>14,h=a*c+u*o;i=((c=o*c+((16383&h)<<14)+r.data[n]+i)>>28)+(h>>14)+a*u,r.data[n++]=268435455&c}return i}i.jsbn.BigInteger=s,"undefined"==typeof navigator?(s.prototype.am=a,n=28):"Microsoft Internet Explorer"==navigator.appName?(s.prototype.am=function(e,t,r,n,i,s){for(var o=32767&t,a=t>>15;--s>=0;){var c=32767&this.data[e],u=this.data[e++]>>15,h=a*c+u*o;i=((c=o*c+((32767&h)<<15)+r.data[n]+(1073741823&i))>>>30)+(h>>>15)+a*u+(i>>>30),r.data[n++]=1073741823&c}return i},n=30):"Netscape"!=navigator.appName?(s.prototype.am=function(e,t,r,n,i,s){for(;--s>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i},n=26):(s.prototype.am=a,n=28),s.prototype.DB=n,s.prototype.DM=(1<<n)-1,s.prototype.DV=1<<n;s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-n,s.prototype.F2=2*n-52;var c,u,h="0123456789abcdefghijklmnopqrstuvwxyz",l=new Array;for(c="0".charCodeAt(0),u=0;u<=9;++u)l[c++]=u;for(c="a".charCodeAt(0),u=10;u<36;++u)l[c++]=u;for(c="A".charCodeAt(0),u=10;u<36;++u)l[c++]=u;function f(e){return h.charAt(e)}function d(e,t){var r=l[e.charCodeAt(t)];return null==r?-1:r}function p(e){var t=o();return t.fromInt(e),t}function A(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function g(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function m(e,t){return e&t}function _(e,t){return e|t}function b(e,t){return e^t}function w(e,t){return e&~t}function v(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function E(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function S(){}function C(e){return e}function k(e){this.r2=o(),this.q3=o(),s.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}g.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},g.prototype.revert=function(e){return e},g.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},g.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},g.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(s.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=o();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},s.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},s.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},s.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var a=8==r?255&e[n]:d(e,n);a<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==o?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},s.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},s.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},s.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>i|a,a=(this.data[r]&s)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},s.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}},s.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},s.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&s.ZERO.subTo(t,t)},s.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},s.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=o());var a=o(),c=this.s,u=e.s,h=this.DB-A(n.data[n.t-1]);h>0?(n.lShiftTo(h,a),i.lShiftTo(h,r)):(n.copyTo(a),i.copyTo(r));var l=a.t,f=a.data[l-1];if(0!=f){var d=f*(1<<this.F1)+(l>1?a.data[l-2]>>this.F2:0),p=this.FV/d,g=(1<<this.F1)/d,y=1<<this.F2,m=r.t,_=m-l,b=null==t?o():t;for(a.dlShiftTo(_,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),s.ONE.dlShiftTo(l,b),b.subTo(a,a);a.t<l;)a.data[a.t++]=0;for(;--_>=0;){var w=r.data[--m]==f?this.DM:Math.floor(r.data[m]*p+(r.data[m-1]+y)*g);if((r.data[m]+=a.am(0,w,r,_,0,l))<w)for(a.dlShiftTo(_,b),r.subTo(b,r);r.data[m]<--w;)r.subTo(b,r)}null!=t&&(r.drShiftTo(l,t),c!=u&&s.ZERO.subTo(t,t)),r.t=l,r.clamp(),h>0&&r.rShiftTo(h,r),c<0&&s.ZERO.subTo(r,r)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},s.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},s.prototype.exp=function(e,t){if(e>4294967295||e<1)return s.ONE;var r=o(),n=o(),i=t.convert(this),a=A(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var c=r;r=n,n=c}return t.revert(r)},s.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(r=this.data[o]>>a)>0&&(i=!0,s=f(r));o>=0;)a<t?(r=(this.data[o]&(1<<a)-1)<<t-a,r|=this.data[--o]>>(a+=this.DB-t)):(r=this.data[o]>>(a-=t)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=f(r));return i?s:"0"},s.prototype.negate=function(){var e=o();return s.ZERO.subTo(this,e),e},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+A(this.data[this.t-1]^this.s&this.DM)},s.prototype.mod=function(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(s.ZERO)>0&&e.subTo(t,t),t},s.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new g(t):new y(t),this.exp(e,r)},s.ZERO=p(0),s.ONE=p(1),S.prototype.convert=C,S.prototype.revert=C,S.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},S.prototype.sqrTo=function(e,t){e.squareTo(t)},k.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=o();return e.copyTo(t),this.reduce(t),t},k.prototype.revert=function(e){return e},k.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},k.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},k.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],T=(1<<26)/I[I.length-1];s.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},s.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=p(r),i=o(),s=o(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(e)+a},s.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,a=0,c=0;c<e.length;++c){var u=d(e,c);u<0?"-"==e.charAt(c)&&0==this.signum()&&(i=!0):(a=t*a+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(a,0)),i&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(s.ONE.shiftLeft(e-1),_,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(s.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},s.prototype.bitwiseTo=function(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},s.prototype.changeBit=function(e,t){var r=s.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},s.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},s.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},s.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()},s.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},s.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},s.prototype.millerRabin=function(e){var t=this.subtract(s.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),o={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},a=0;a<e;++a){do{n=new s(this.bitLength(),o)}while(n.compareTo(s.ONE)<=0||n.compareTo(t)>=0);var c=n.modPow(i,this);if(0!=c.compareTo(s.ONE)&&0!=c.compareTo(t)){for(var u=1;u++<r&&0!=c.compareTo(t);)if(0==(c=c.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},s.prototype.clone=function(){var e=o();return this.copyTo(e),e},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},s.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},s.prototype.equals=function(e){return 0==this.compareTo(e)},s.prototype.min=function(e){return this.compareTo(e)<0?this:e},s.prototype.max=function(e){return this.compareTo(e)>0?this:e},s.prototype.and=function(e){var t=o();return this.bitwiseTo(e,m,t),t},s.prototype.or=function(e){var t=o();return this.bitwiseTo(e,_,t),t},s.prototype.xor=function(e){var t=o();return this.bitwiseTo(e,b,t),t},s.prototype.andNot=function(e){var t=o();return this.bitwiseTo(e,w,t),t},s.prototype.not=function(){for(var e=o(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},s.prototype.shiftLeft=function(e){var t=o();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},s.prototype.shiftRight=function(e){var t=o();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},s.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+v(this.data[e]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=E(this.data[r]^t);return e},s.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},s.prototype.setBit=function(e){return this.changeBit(e,_)},s.prototype.clearBit=function(e){return this.changeBit(e,w)},s.prototype.flipBit=function(e){return this.changeBit(e,b)},s.prototype.add=function(e){var t=o();return this.addTo(e,t),t},s.prototype.subtract=function(e){var t=o();return this.subTo(e,t),t},s.prototype.multiply=function(e){var t=o();return this.multiplyTo(e,t),t},s.prototype.divide=function(e){var t=o();return this.divRemTo(e,t,null),t},s.prototype.remainder=function(e){var t=o();return this.divRemTo(e,null,t),t},s.prototype.divideAndRemainder=function(e){var t=o(),r=o();return this.divRemTo(e,t,r),new Array(t,r)},s.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),s=p(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new g(t):t.isEven()?new k(t):new y(t);var a=new Array,c=3,u=r-1,h=(1<<r)-1;if(a[1]=n.convert(this),r>1){var l=o();for(n.sqrTo(a[1],l);c<=h;)a[c]=o(),n.mulTo(l,a[c-2],a[c]),c+=2}var f,d,m=e.t-1,_=!0,b=o();for(i=A(e.data[m])-1;m>=0;){for(i>=u?f=e.data[m]>>i-u&h:(f=(e.data[m]&(1<<i+1)-1)<<u-i,m>0&&(f|=e.data[m-1]>>this.DB+i-u)),c=r;0==(1&f);)f>>=1,--c;if((i-=c)<0&&(i+=this.DB,--m),_)a[f].copyTo(s),_=!1;else{for(;c>1;)n.sqrTo(s,b),n.sqrTo(b,s),c-=2;c>0?n.sqrTo(s,b):(d=s,s=b,b=d),n.mulTo(b,a[f],s)}for(;m>=0&&0==(e.data[m]&1<<i);)n.sqrTo(s,b),d=s,s=b,b=d,--i<0&&(i=this.DB-1,--m)}return n.revert(s)},s.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return s.ZERO;for(var r=e.clone(),n=this.clone(),i=p(1),o=p(0),a=p(0),c=p(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(e,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),t&&a.subTo(i,a),c.subTo(o,c))}return 0!=n.compareTo(s.ONE)?s.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},s.prototype.pow=function(e){return this.exp(e,new S)},s.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},s.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=I[I.length-1]){for(t=0;t<I.length;++t)if(r.data[0]==I[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<I.length;){for(var n=I[t],i=t+1;i<I.length&&n<T;)n*=I[i++];for(n=r.modInt(n);t<i;)if(n%I[t++]==0)return!1}return r.millerRabin(e)}},
/*!*********************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/err-code/index.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?r=t:null!=t&&(e.code=t),r)for(n in r)e[n]=r[n];return e}},
/*!************************************************!*\
  !*** ./node_modules/just-debounce-it/index.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){var n;return function(){if(!t)return e.apply(this,arguments);var i=this,s=arguments,o=r&&!n;return clearTimeout(n),n=setTimeout((function(){if(n=null,!o)return e.apply(i,s)}),t),o?e.apply(this,arguments):void 0}}},
/*!*******************************************!*\
  !*** ./node_modules/pull-reader/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./state */783);function i(e){return"function"==typeof e}function s(e,t){return t?function(r,n){var i=setTimeout((function(){e(new Error("pull-reader: read exceeded timeout"),n)}),t);e(r,(function(e,t){clearTimeout(i),n(e,t)}))}:e}e.exports=function(e){var t,r,o,a,c,u=[],h=!1,l=n();function f(){for(;u.length;)if(null==u[0].length&&l.has(1))u.shift().cb(null,l.get());else if(l.has(u[0].length)){var e=u.shift();e.cb(null,l.get(e.length))}else if(1==o&&u[0].length&&l.length<u[0].length){var t="stream ended with:"+l.length+" but wanted:"+u[0].length;u.shift().cb(new Error(t))}else{if(!o)return!!u.length;u.shift().cb(o)}return u.length||!l.has(1)||c}function d(){f()&&!h&&(!t||h||a||(h=!0,r(null,(function(e,t){if(h=!1,e)return o=e,f();l.add(t),d()}))))}function p(n){if(c){for(;u.length;)u.shift().cb(c);return cb&&cb(c)}r=s(n,e),t=n,d()}return p.abort=function(e,r){c=e||!0,t?(h=!0,t(c,(function(){for(;u.length;)u.shift().cb(c);r&&r(c)}))):r()},p.read=function(r,n,o){if(i(n)&&(o=n,n=e),!i(o))return a=!0,function(e,r){if(h||l.has(1)){if(e)return t(e,r);u.push({length:null,cb:r}),d()}else s(t,n)(e,(function(e,t){r(e,t)}))};var c;u.push({length:(c=r,Number.isFinite(c)?r:null),cb:o}),d()},p}},
/*!***************************************************!*\
  !*** ./node_modules/pull-stream/util/abort-cb.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){e(t),r&&r(!0===t?null:t)}},
/*!*************************************************!*\
  !*** ./node_modules/pull-stream/util/tester.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./prop */111);function i(e){return e}e.exports=function(e){return"object"==typeof e&&"function"==typeof e.test?function(t){return e.test(t)}:n(e)||i}},
/*!*****************************************************!*\
  !*** ./node_modules/pull-stream/throughs/unique.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(e){return e}var i=r(/*! ../util/prop */111),s=r(/*! ./filter */148);e.exports=function(e,t){e=i(e)||n;var r={};return s((function(n){var i=e(n);return r[i]?!!t:(r[i]=!0,!t)}))}},
/*!**********************************************!*\
  !*** ./node_modules/moving-average/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=Math.exp;e.exports=function(e){if("number"!=typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let t,r,i=0,s=0,o=0,a={};return a.push=function(a,c){if(r){const u=1-n(-(a-r)/e),h=c-t;t=u*c+(1-u)*t,i=(1-u)*(i+h*(u*h)),s=Math.sqrt(i),o=t+u*h}else t=c;r=a},a.movingAverage=function(){return t},a.variance=function(){return i},a.deviation=function(){return s},a.forecast=function(){return o},a}},
/*!**************************************************!*\
  !*** ./node_modules/ipfs/src/core/ipns/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{createFromPrivKey:n}=r(/*! peer-id */7),i=r(/*! promisify-es6 */9),s=r(/*! err-code */22),o=r(/*! debug */1),a=o("ipfs:ipns");a.error=o("ipfs:ipns:error");const c=r(/*! ./publisher */802),u=r(/*! ./republisher */809),h=r(/*! ./resolver */810),l=r(/*! ./path */386),{normalizePath:f}=r(/*! ../utils */66),d=r(/*! ../../utils/tlru */387),p=6e4;class A{constructor(e,t,r,n,i){this.publisher=new c(e,t),this.republisher=new u(this.publisher,t,r,n,i),this.resolver=new h(e),this.cache=new d(1e3),this.routing=e}async publish(e,t,r=c.defaultRecordLifetime){try{t=f(t);const s=await i(n)(e.bytes);await this.publisher.publishWithEOL(e,t,r),a(`IPNS value ${t} was published correctly`);const o=s.toB58String(),c=parseFloat(r),u=c<p?c:p;return this.cache.set(o,t,u),a(`IPNS value ${t} was cached correctly`),{name:o,value:t}}catch(e){throw a.error(e),e}}async resolve(e,t){if("string"!=typeof e)throw s(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!(t=t||{}).nocache&&!t.recursive){const t=e.split("/")[2],r=this.cache.get(t);if(r)return r}try{const r=await this.resolver.resolve(e,t);return a(`IPNS record from ${e} was resolved correctly`),r}catch(e){throw a.error(e),e}}async initializeKeyspace(e,t){return this.publish(e,t,c.defaultRecordLifetime)}}A.path=l,e.exports=A},
/*!*************************************************!*\
  !*** ./node_modules/ipfs/src/core/ipns/path.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! is-ipfs */62),i=r(/*! debug */1),s=i("ipfs:ipns:path");s.error=i("ipfs:ipns:path:error");e.exports={resolvePath:(e,t)=>n.ipnsPath(t)?(s(`resolve ipns path ${t}`),e._ipns.resolve(t)):e.dag.get(t.substring("/ipfs/".length))}},
/*!*********************************************!*\
  !*** ./node_modules/ipfs/src/utils/tlru.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! hashlru */223);e.exports=class{constructor(e){this.lru=n(e)}get(e){const t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}set(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}}},
/*!******************************************!*\
  !*** ./node_modules/dlv/dist/dlv.umd.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=function(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}},
/*!*********************************************************************!*\
  !*** ./node_modules/ipfs/src/core/ipns/routing/pubsub-datastore.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ipns */112),{fromB58String:i,toB58String:s}=r(/*! multihashes */13),o=r(/*! datastore-pubsub */812),a=r(/*! class-is */34),c=r(/*! err-code */22),u=r(/*! debug */1),h=u("ipfs:ipns:pubsub");h.error=u("ipfs:ipns:pubsub:error");e.exports=a(class{constructor(e,t,r){this._pubsub=e,this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new o(e,t,r,n.validator,this._handleSubscriptionKey)}async put(e,t){return this._pubsubDs.put(e,t)}async get(e){let t,r;try{t=await this._pubsubDs.get(e)}catch(e){r=e}if(e.slice(0,n.namespaceLength).toString()===n.namespace){const t=s(e),r=s(e.slice(n.namespaceLength));this._subscriptions[t]=r,h(`subscribed to pubsub topic ${t}, id ${r}`)}if(r)throw r;return t}_handleSubscriptionKey(e){t.isBuffer(e)&&(e=s(e));const r=this._subscriptions[e];if(!r)throw c(new Error(`key ${e} does not correspond to a subscription`),"ERR_INVALID_KEY");let o;try{o=n.getIdKeys(i(r))}catch(e){throw h.error(e),e}return o.routingKey.toBuffer()}getSubscriptions(){return Object.values(this._subscriptions).filter(Boolean).map(e=>`${n.namespace}${e}`)}async cancel(e){if("string"!=typeof e)throw c(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");e.startsWith(n.namespace)&&(e=e.substring(n.namespaceLength));const r=Object.keys(this._subscriptions).find(t=>this._subscriptions[t]===e);if(!r)return{canceled:!1};const i=t.from(r);return this._pubsubDs.unsubscribe(i),this._subscriptions[r]=void 0,h(`unsubscribed pubsub ${r}: ${e}`),{canceled:!0}}},{className:"IpnsPubsubDatastore",symbolName:"@js-ipfs/ipns/IpnsPubsubDatastore"})}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************************************!*\
  !*** ./node_modules/datastore-pubsub/node_modules/err-code/index.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?r=t:null!=t&&(e.code=t),r)for(n in r)e[n]=r[n];return e}},
/*!**********************************************************************!*\
  !*** ./node_modules/ipfs/src/core/ipns/routing/offline-datastore.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const{Key:n}=r(/*! interface-datastore */14),{Record:i}=r(/*! libp2p-record */814),{encodeBase32:s}=r(/*! ./utils */392),o=r(/*! err-code */22),a=r(/*! debug */1),c=a("ipfs:ipns:offline-datastore");c.error=a("ipfs:ipns:offline-datastore:error");e.exports=class{constructor(e){this._repo=e}async put(e,r){if(!t.isBuffer(e))throw o(new Error("Offline datastore key must be a buffer"),"ERR_INVALID_KEY");if(!t.isBuffer(r))throw o(new Error("Offline datastore value must be a buffer"),"ERR_INVALID_VALUE");let n;try{n=this._routingKey(e)}catch(e){throw c.error(e),o(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const s=new i(e,r);return this._repo.datastore.put(n,s.serialize())}async get(e){if(!t.isBuffer(e))throw o(new Error("Offline datastore key must be a buffer"),"ERR_INVALID_KEY");let r;try{r=this._routingKey(e)}catch(e){throw c.error(e),o(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const n=await this._repo.datastore.get(r);let s;try{s=i.deserialize(n)}catch(e){throw c.error(e),e}return s.value}_routingKey(e){return new n("/"+s(e),!1)}}}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************************!*\
  !*** ./node_modules/ipfs/src/core/ipns/routing/utils.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multibase */72),i=r(/*! ipns */112);e.exports={encodeBase32:e=>{return n.encode("base32",e).slice(1).toString().toUpperCase()},validator:{func:(e,t,r)=>i.validator.validate(t,e,r)},selector:(e,t)=>i.validator.select(t[0],t[1])}},
/*!*********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/libp2p.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! dlv */388),i=r(/*! merge-options */51),s=r(/*! err-code */22),o=r(/*! ../ipns/routing/utils */392),a=r(/*! multiaddr */15),c=r(/*! libp2p-delegated-peer-routing */825),u=r(/*! libp2p-delegated-content-routing */850),h=r(/*! ../runtime/libp2p-pubsub-routers-nodejs */857);function l({datastore:e,peerInfo:t,peerBook:l,options:f,config:d}){let p,A;const g=n(f,"config.Addresses.Delegates",n(d,"Addresses.Delegates",[]));if(g.length>0){const e=g[Math.floor(Math.random()*g.length)],r=a(e).toOptions(),n={host:r.host,protocol:443===parseInt(r.port)?"https":"http",port:r.port};p=[new u(t.id,n)],A=[new c(n)]}const y={datastore:e,peerInfo:t,peerBook:l,modules:{contentRouting:p,peerRouting:A,pubsub:(()=>{let e=n(d,"Pubsub.Router","gossipsub");if(e||(e="gossipsub"),!h[e])throw s(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${e} router.`),"ERR_NOT_SUPPORTED");return h[e]})()},config:{peerDiscovery:{mdns:{enabled:n(f,"config.Discovery.MDNS.Enabled",n(d,"Discovery.MDNS.Enabled",!0))},webRTCStar:{enabled:n(f,"config.Discovery.webRTCStar.Enabled",n(d,"Discovery.webRTCStar.Enabled",!0))},bootstrap:{list:n(f,"config.Bootstrap",n(d,"Bootstrap",[]))}},relay:{enabled:n(f,"relay.enabled",n(d,"relay.enabled",!0)),hop:{enabled:n(f,"relay.hop.enabled",n(d,"relay.hop.enabled",!1)),active:n(f,"relay.hop.active",n(d,"relay.hop.active",!1))}},dht:{kBucketSize:n(f,"dht.kBucketSize",20),enabled:!1,randomWalk:{enabled:!1},validators:{ipns:o.validator},selectors:{ipns:o.selector}},pubsub:{enabled:n(d,"Pubsub.Enabled",!0)}},connectionManager:n(f,"connectionManager",{maxPeers:n(d,"Swarm.ConnMgr.HighWater"),minPeers:n(d,"Swarm.ConnMgr.LowWater")})},m=i(y,n(f,"libp2p",{}));return new(r(/*! ../runtime/libp2p-nodejs */904))(m)}e.exports=function(e,t){const r=e._options||{};t=t||{};const n="function"==typeof r.libp2p?r.libp2p:l,{datastore:i}=e._repo,s=e._peerInfo,o=e._peerInfoBook,a=n({options:r,config:t,datastore:i,peerInfo:s,peerBook:o});return a.on("stop",()=>{s.multiaddrs.clear()}),a.on("start",()=>{s.multiaddrs.forEach(t=>{e._print("Swarm listening on",t.toString())})}),a.on("peer:connect",e=>o.put(e)),a}},
/*!********************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/dht/index.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../utils/module-config */150);e.exports=e=>{const t=n(e);return{get:r(/*! ./get */844)(t),put:r(/*! ./put */845)(t),findProvs:r(/*! ./findprovs */846)(t),findPeer:r(/*! ./findpeer */847)(t),provide:r(/*! ./provide */848)(t),query:r(/*! ./query */849)(t)}}},
/*!**********************************************************************!*\
  !*** ./node_modules/ipfs-http-client/node_modules/qs/lib/formats.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=String.prototype.replace,i=/%20/g,s=r(/*! ./utils */151),o={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=s.assign({default:o.RFC3986,formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return String(e)}}},o)},
/*!*******************************************!*\
  !*** ./node_modules/through2/through2.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! readable-stream */37).Transform,i=r(/*! util */99).inherits;function s(e){n.call(this,e),this._destroyed=!1}function o(e,t,r){r(null,e)}function a(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=o),"function"!=typeof n&&(n=null),e(t,r,n)}}i(s,n),s.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var r=this;t.nextTick((function(){e&&r.emit("error",e),r.emit("close")}))}},e.exports=a((function(e,t,r){var n=new s(e);return n._transform=t,r&&(n._flush=r),n})),e.exports.ctor=a((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=Object.assign({},e,t),s.call(this,this.options)}return i(n,s),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),e.exports.obj=a((function(e,t,r){var n=new s(Object.assign({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this,r(/*! ./../process/browser.js */2))},
/*!********************************************************!*\
  !*** ./node_modules/iso-stream-http/lib/capability.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e){return"function"==typeof e}e.exports={fetch:"fetch"in self&&r(self.fecth),writableStream:"WritableStream"in self&&r(self.WritableStream),abortController:"AbortController"in self&&r(self.AbortController),arrayBuffer:"ArrayBuffer"in self}},
/*!**************************************************************!*\
  !*** ./node_modules/iso-stream-http/lib/incoming-message.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t,n){var i=r(/*! ./capability */397),s=r(/*! inherits */3),o=r(/*! readable-stream */37),a=function(e,r,s){if(o.Readable.call(this),this._mode=r,this.headers={},this.rawHeaders=[],this.trailers={},this.rawTrailers=[],this.on("end",()=>{t.nextTick(()=>this.emit("close"))}),this._fetchResponse=e,this.url=e.url,this.statusCode=e.status,this.statusMessage=e.statusText,e.headers.forEach((e,t)=>{this.headers[t.toLowerCase()]=e,this.rawHeaders.push(t,e)}),i.writableStream){var a=new WritableStream({write:e=>new Promise((t,r)=>{this._destroyed?r():this.push(n.from(e))?t():this._resumeFetch=t}),close:()=>{clearTimeout(s),this._destroyed||this.push(null)},abort:e=>{this._destroyed||this.emit("error",e)}});try{return void e.body.pipeTo(a).catch(e=>{console.log(e),self.clearTimeout(s),this._destroyed||this.emit("error",e)})}catch(e){}}var c=e.body.getReader();!function e(t){c.read().then(r=>{if(!t._destroyed){if(r.done)return clearTimeout(s),void t.push(null);t.push(n.from(r.value)),e(t)}}).catch(e=>{clearTimeout(s),t._destroyed||t.emit("error",e)})}(this)};s(a,o.Readable),a.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},e.exports=a}).call(this,r(/*! ./../../process/browser.js */2),r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*****************************************************!*\
  !*** ./node_modules/stream-to-pull-stream/index.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(n){r(/*! pull-stream/pull */17);var i=r(/*! looper */400);function s(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function o(e,t,r){var o,a,c=!1;function u(){a||(a=!0,r&&r(!0===o?null:o))}function h(){c||(c=!0,f(),o?u():e(o=!0,u))}function l(t){f(),o||e(o=t,u)}function f(){t.on("finish",h),t.removeListener("close",h),t.removeListener("error",l)}t.on("close",h),t.on("finish",h),t.on("error",l),n.nextTick((function(){i((function(r){e(null,(function(e,n){if(o=o||e,!0===e)return t._isStdio?u():t.end();if(o=o||e)return s(t),u();t._isStdio?t.write(n,(function(){r()})):!1===t.write(n)?t.once("drain",r):r()}))}))}))}function a(e){var t,r=[],n=[],i=!1;function o(){for(;(r.length||t)&&n.length;)n.shift()(r.length?null:t,r.shift());!r.length&&i&&(i=!1,e.resume())}return e.on("data",(function(t){r.push(t),o(),r.length&&e.pause&&(i=!0,e.pause())})),e.on("end",(function(){t=!0,o()})),e.on("close",(function(){t=!0,o()})),e.on("error",(function(e){t=e,o()})),function(r,i){if(!i)throw new Error("*must* provide cb");if(r){function a(){for(;n.length;)n.shift()(r);i(r)}if(t)return a();e.once("close",a),s(e)}else n.push(i),o()}}var c=a,u=function(e,t){return function(r){return o(r,e,t)}},h=function(e){return a(e)};(t=e.exports=function(e,t){return e.writable&&e.write?e.readable?function(r){return o(r,e,t),a(e)}:u(e,t):h(e)}).sink=u,t.source=h,t.read=c,t.read1=a,t.read2=function(e){var t,r=!1,n=!1;function i(){var r=e.read();if(null!==r&&t){var n=t;t=null,n(null,r)}}return e.on("readable",(function(){n=!0,t&&i()})).on("end",(function(){r=!0,t&&t(r)})).on("error",(function(e){r=e,t&&t(r)})),function(e,s){t=s,r?s(r):n&&i()}},t.duplex=function(e,t){return{source:h(e),sink:u(e,t)}},t.transform=function(e){return function(t){var r=h(e);return u(e)(t),r}}}).call(this,r(/*! ./../process/browser.js */2))},
/*!**************************************!*\
  !*** ./node_modules/looper/index.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){!function t(){var r=!0,n=!1;do{n=!0,r=!1,e.call(this,(function(){n?r=!0:t()})),n=!1}while(r)}()}},
/*!*******************************************!*\
  !*** ./node_modules/pull-defer/source.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(){var e,t,r,n,i=function(i,s){e?e(i,s):i?(n=i,r=s):t=s};return i.resolve=function(i){if(e)throw new Error("already resolved");if(!(e=i))throw new Error("no read cannot resolve!"+e);t&&i(null,t),r&&i(n,r)},i.abort=function(e){i.resolve((function(t,r){r(e||!0)}))},i}},
/*!*****************************************!*\
  !*** ./node_modules/pull-defer/sink.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){var t,r=!1;function n(n){if(!n)throw new Error("must be passed a readable");t=n,r&&e(t)}return n.resolve=n.ready=n.start=function(i){return r=!0,e=i||e,t&&e(t),n},n}},
/*!*******************************************!*\
  !*** ./node_modules/pull-defer/duplex.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./source */401),i=r(/*! ./sink */402);e.exports=function(){var e=n(),t=i();return{source:e,sink:t,resolve:function(r){e.resolve(r.source),t.resolve(r.sink)}}}},
/*!****************************************************!*\
  !*** ./node_modules/libp2p-gossipsub/src/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! assert */24),{utils:i}=r(/*! libp2p-pubsub */86),s=r(/*! ./pubsub */885),{MessageCache:o}=r(/*! ./messageCache */902),{rpc:a}=r(/*! ./message */413),c=r(/*! ./constants */414),u=r(/*! ./heartbeat */903);e.exports=class extends s{constructor(e,t){super("libp2p:gossipsub",c.GossipSubID,e,t),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.messageCache=new o(c.GossipSubHistoryGossip,c.GossipSubHistoryLength),this.heartbeat=new u(this)}_removePeer(e){if(super._removePeer(e),0===e._references){for(const[t,r]of this.mesh.entries())r.delete(e);for(const[t,r]of this.fanout.entries())r.delete(e);this.gossip.delete(e),this.control.delete(e)}return e}_handleRpcControl(e,t){const r=t.control;if(!r)return;const n=this._handleIHave(e,r.ihave),i=this._handleIWant(e,r.iwant),s=this._handleGraft(e,r.graft);if(this._handlePrune(e,r.prune),!n||!i||!s)return;const o=this._rpcWithControl(i,null,n,null,s);this._sendRpc(t.from,o)}_processRpcMessage(e){super._processRpcMessage(e);const t=e.topicIDs;this._options.gossipIncoming&&(this.peers.forEach(r=>{r.info.protocols.has(c.FloodSubID)&&r.info.id.toB58String()!==e.from&&i.anyMatch(r.topics,t)&&r.isWritable&&(r.sendMessages(i.normalizeOutRpcMessages([e])),this.log("publish msg on topics - floodsub",t,r.info.id.toB58String()))}),t.forEach(t=>{this.mesh.has(t)&&this.mesh.get(t).forEach(r=>{r.isWritable&&r.info.id.toB58String()!==e.from&&(r.sendMessages(i.normalizeOutRpcMessages([e])),this.log("publish msg on topic - meshsub",t,r.info.id.toB58String()))})}))}_handleIHave(e,t){const r=new Set;if(t.forEach(({topicID:e,messageIDs:t})=>{this.mesh.has(e)&&t.forEach(e=>{this.seenCache.has(e)||r.add(e)})}),r.size)return this.log("IHAVE: Asking for %d messages from %s",r.size,e.info.id.toB58String()),{messageIDs:Array.from(r)}}_handleIWant(e,t){const r=new Map;if(t.forEach(({messageIDs:e})=>{e.forEach(e=>{const t=this.messageCache.get(e);t&&r.set(e,t)})}),r.size)return this.log("IWANT: Sending %d messages to %s",r.size,e.info.id.toB58String()),Array.from(r.values())}_handleGraft(e,t){const r=[];if(t.forEach(({topicID:t})=>{const n=this.mesh.get(t);n?(this.log("GRAFT: Add mesh link from %s in %s",e.info.id.toB58String(),t),n.add(e),e.topics.add(t),this.mesh.set(t,n)):r.push(t)}),!r.length)return;return r.map(e=>({topicID:e}))}_handlePrune(e,t){t.forEach(({topicID:t})=>{const r=this.mesh.get(t);r&&(this.log("PRUNE: Remove mesh link to %s in %s",e.info.id.toB58String(),t),r.delete(e),e.topics.delete(t))})}start(e){super.start(t=>{if(t)return e(t);this.heartbeat.start(e)})}stop(e){super.stop(t=>{if(t)return e(t);this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.heartbeat.stop(e)})}join(e){n(this.started,"GossipSub has not started"),e=i.ensureArray(e),this.log("JOIN %s",e),e.forEach(e=>{const t=this.fanout.get(e);if(t)this.mesh.set(e,t),this.fanout.delete(e),this.lastpub.delete(e);else{const t=this._getPeers(e,c.GossipSubD);this.mesh.set(e,t)}this.mesh.get(e).forEach(t=>{this.log("JOIN: Add mesh link to %s in %s",t.info.id.toB58String(),e),this._sendGraft(t,e)})})}leave(e){e=i.ensureArray(e),this.log("LEAVE %s",e),e.forEach(e=>{const t=this.mesh.get(e);t&&(t.forEach(t=>{this.log("LEAVE: Remove mesh link to %s in %s",t.info.id.toB58String(),e),this._sendPrune(t,e)}),this.mesh.delete(e))})}_publish(e){e.forEach(e=>{this.messageCache.put(e);const t=new Set;e.topicIDs.forEach(e=>{const r=this.topics.get(e);if(!r)return;r.forEach(e=>{e.info.protocols.has(c.FloodSubID)&&t.add(e)});let n=this.mesh.get(e);if(!n){if(!(n=this.fanout.get(e))){const t=this._getPeers(e,c.GossipSubD);t.size>0?(n=t,this.fanout.set(e,t)):n=[]}this.lastpub.set(e,this._now())}n.forEach(e=>{t.add(e)})}),t.forEach(t=>{t.info.id.toB58String()!==e.from&&this._sendRpc(t,{msgs:[e]})})})}_sendGraft(e,t){const r=[{topicID:t}],n=this._rpcWithControl(null,null,null,r,null);this._sendRpc(e,n)}_sendPrune(e,t){const r=[{topicID:t}],n=this._rpcWithControl(null,null,null,null,r);this._sendRpc(e,n)}_sendRpc(e,t){if(!e||!e.isWritable)return;const r=this.control.get(e);r&&(this._piggybackControl(e,t,r),this.control.delete(e));const n=this.gossip.get(e);n&&(this._piggybackGossip(e,t,n),this.gossip.delete(e)),e.write(a.RPC.encode(t))}_piggybackControl(e,t,r){const n=(r.graft||[]).filter(({topicID:t})=>(this.mesh.get(t)||new Set).has(e)),i=(r.prune||[]).filter(({topicID:t})=>!(this.mesh.get(t)||new Set).has(e));(n.length||i.length)&&(t.control=t.control||{},t.control.graft=(t.control.graft||[]).concat(n),t.control.prune=(t.control.prune||[]).concat(i))}_piggybackGossip(e,t,r){t.control=t.control||{},t.control.ihave=r}_sendGraftPrune(e,t){for(const[r,n]of e){const e=n.map(e=>({topicID:e}));let i=null;const s=t.get(r);s&&(i=s.map(e=>({topicID:e})),t.delete(r));const o=this._rpcWithControl(null,null,null,e,i);this._sendRpc(r,o)}for(const[e,r]of t){const t=r.map(e=>({topicID:e})),n=this._rpcWithControl(null,null,null,null,t);this._sendRpc(e,n)}}_emitGossip(e,t){const r=this.messageCache.getGossipIDs(e);r.length&&this._getPeers(e,c.GossipSubD).forEach(n=>{t.has(n)||this._pushGossip(n,{topicID:e,messageIDs:r})})}_flush(){for(const[e,t]of this.gossip.entries()){this.gossip.delete(e);const r=this._rpcWithControl(null,t,null,null,null);this._sendRpc(e,r)}for(const[e,t]of this.control.entries()){this.control.delete(e);const r=this._rpcWithControl(null,null,null,t.graft,t.prune);this._sendRpc(e,r)}}_pushGossip(e,t){this.log("Add gossip to %s",e.info.id.toB58String());const r=this.gossip.get(e)||[];this.gossip.set(e,r.concat(t))}_now(){return Date.now()}}},
/*!********************************************!*\
  !*** ./node_modules/lodash/_freeGlobal.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(/*! ./../webpack/buildin/global.js */10))},
/*!*****************************************!*\
  !*** ./node_modules/lodash/isLength.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},
/*!*******************************************!*\
  !*** ./node_modules/async/eachOfLimit.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,s){(0,n.default)(t)(e,(0,i.default)(r),s)};var n=s(r(/*! ./internal/eachOfLimit */408)),i=s(r(/*! ./internal/wrapAsync */33));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!****************************************************!*\
  !*** ./node_modules/async/internal/eachOfLimit.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,r,c){if(c=(0,i.default)(c||n.default),e<=0||!t)return c(null);var u=(0,s.default)(t),h=!1,l=0,f=!1;function d(e,t){if(l-=1,e)h=!0,c(e);else{if(t===a.default||h&&l<=0)return h=!0,c(null);f||p()}}function p(){for(f=!0;l<e&&!h;){var t=u();if(null===t)return h=!0,void(l<=0&&c(null));l+=1,r(t.value,t.key,(0,o.default)(d))}f=!1}p()}};var n=c(r(/*! lodash/noop */42)),i=c(r(/*! ./once */202)),s=c(r(/*! ./iterator */860)),o=c(r(/*! ./onlyOnce */105)),a=c(r(/*! ./breakLoop */230));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!*****************************************************!*\
  !*** ./node_modules/async/internal/withoutIndex.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,r,n){return e(t,n)}},e.exports=t.default},
/*!*******************************************************!*\
  !*** ./node_modules/multistream-select/src/select.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! pull-handshake */67),i=r(/*! pull-length-prefixed */30),s=r(/*! ./util */156).writeEncoded,o=r(/*! err-code */8),{errors:a}=r(/*! ./constants */157);e.exports=function(e,r,c){const u=n({timeout:6e4},r),h=u.handshake;return c("writing multicodec: "+e),s(h,t.from(e+"\n"),r),i.decodeFromReader(h,(t,n)=>{if(t)return r(t);const i=n.toString().slice(0,-1);if(i!==e){const t=o(new Error(`"${e}" not supported`),a.MULTICODEC_NOT_SUPPORTED);return r(t,h.rest())}c("received ack: "+i),r(null,h.rest())}),u}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!****************************************!*\
  !*** ./node_modules/pull-cat/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e,t,r){var n=e.length;if(!n)return r(t);function i(){--n||r(t)}e.forEach((function(e){e?e(t,i):i()})),n||i()}e.exports=function(e){return function(t,n){!function i(){t?r(e,t,n):e.length?e[0]?e[0](null,(function(t,s){t?(e.shift(),!0===t?i():r(e,t,n)):n(null,s)})):(e.shift(),i()):n(!0)}()}}},
/*!*********************************************************************!*\
  !*** ./node_modules/multistream-select/src/listener/match-exact.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){r(null,e===t)}},
/*!************************************************************!*\
  !*** ./node_modules/libp2p-gossipsub/src/message/index.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! protons */28),i=n(r(/*! ./rpc.proto.js */900)),s=n(r(/*! ./topic-descriptor.proto.js */901));(t=e.exports).rpc=i,t.td=s},
/*!********************************************************!*\
  !*** ./node_modules/libp2p-gossipsub/src/constants.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=t.second=1e3,i=t.minute=60*n;t.FloodSubID="/floodsub/1.0.0",t.GossipSubID="/meshsub/1.0.0",t.GossipSubD=6,t.GossipSubDlo=4,t.GossipSubDhi=12,t.GossipSubHistoryLength=5,t.GossipSubHistoryGossip=3,t.GossipSubHeartbeatInitialDelay=100/n,t.GossipSubHeartbeatInterval=n,t.GossipSubFanoutTTL=i},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p-websockets/src/index.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-ws/client */905),i=r(/*! mafmt */43),s=r(/*! class-is */34),o=r(/*! interface-connection */38).Connection,a=r(/*! multiaddr-to-uri */416),c=r(/*! debug */1)("libp2p:websockets:dialer"),u=r(/*! ./listener */913);e.exports=s(class{dial(e,t,r){"function"==typeof t&&(r=t,t={}),r=r||function(){};const i=a(e);c("dialing %s",i);const s=n(i,{binary:!0,onConnect:e=>{r(e)}}),u=new o(s);return u.getObservedAddrs=t=>t(null,[e]),u.close=e=>s.close(e),u}createListener(e,t){return"function"==typeof e&&(t=e,e={}),u(e,t)}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>!e.protoNames().includes("p2p-circuit")&&("function"==typeof e.decapsulateCode?e=e.decapsulateCode(421):e.protoNames().includes("ipfs")&&(e=e.decapsulate("ipfs")),i.WebSockets.matches(e)||i.WebSocketsSecure.matches(e)))}},{className:"WebSockets",symbolName:"@libp2p/js-libp2p-websockets/websockets"})},
/*!************************************************!*\
  !*** ./node_modules/multiaddr-to-uri/index.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! multiaddr */15),i=(e,t)=>t,s={ip4:i,ip6:(e,t,r,n)=>1===n.length&&"ip6"===n[0].protocol?t:`[${t}]`,tcp:(e,t,r,n,i)=>n.some(e=>["http","https","ws","wss"].includes(e.protocol))?`${e}:${t}`:((e,t,r,n)=>{if(n&&!1===n.assumeHttp)return`tcp://${e}:${t}`;let i="tcp",s=`:${t}`;return"tcp"===r[r.length-1].protocol&&(i=443===t?"https":"http",s=443===t||80===t?"":s),`${i}://${e}${s}`})(e,t,n,i),udp:(e,t)=>`udp://${e}:${t}`,dnsaddr:i,dns4:i,dns6:i,ipfs:(e,t)=>`${e}/ipfs/${t}`,p2p:(e,t)=>`${e}/p2p/${t}`,http:e=>`http://${e}`,https:e=>`https://${e}`,ws:e=>`ws://${e}`,wss:e=>`wss://${e}`,"p2p-websocket-star":e=>`${e}/p2p-websocket-star`,"p2p-webrtc-star":e=>`${e}/p2p-webrtc-star`,"p2p-webrtc-direct":e=>`${e}/p2p-webrtc-direct`};e.exports=(e,t)=>n(e).stringTuples().map(e=>({protocol:n.protocols.codes[e[0]].name,content:e[1]})).reduce((e,r,n,i)=>{const o=s[r.protocol];if(!o)throw new Error(`Unsupported protocol ${r.protocol}`);return o(e,r.content,n,i,t)},"")},
/*!****************************************************!*\
  !*** ./node_modules/socket.io-client/lib/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./url */915),i=r(/*! socket.io-parser */234),s=r(/*! ./manager */420),o=r(/*! debug */1)("socket.io-client");e.exports=t=c;var a=t.managers={};function c(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i=n(e),c=i.source,u=i.id,h=i.path,l=a[u]&&h in a[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||l?(o("ignoring socket cache for %s",c),r=s(c,t)):(a[u]||(o("new io instance for %s",c),a[u]=s(c,t)),r=a[u]),i.query&&!t.query&&(t.query=i.query),r.socket(i.path,t)}t.protocol=i.protocol,t.connect=c,t.Manager=r(/*! ./manager */420),t.Socket=r(/*! ./socket */426)},
/*!****************************************!*\
  !*** ./node_modules/parseuri/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),s=e.indexOf("]");-1!=i&&-1!=s&&(e=e.substring(0,i)+e.substring(i,s).replace(/:/g,";")+e.substring(s,e.length));for(var o=r.exec(e||""),a={},c=14;c--;)a[n[c]]=o[c]||"";return-1!=i&&-1!=s&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},
/*!**********************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/socket.io-parser/is-buffer.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){e.exports=function(e){return r&&t.isBuffer(e)||n&&(e instanceof ArrayBuffer||i(e))};var r="function"==typeof t&&"function"==typeof t.isBuffer,n="function"==typeof ArrayBuffer,i=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************************!*\
  !*** ./node_modules/socket.io-client/lib/manager.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! engine.io-client */920),i=r(/*! ./socket */426),s=r(/*! component-emitter */87),o=r(/*! socket.io-parser */234),a=r(/*! ./on */427),c=r(/*! component-bind */428),u=r(/*! debug */1)("socket.io-client:manager"),h=r(/*! indexof */425),l=r(/*! backo2 */934),f=Object.prototype.hasOwnProperty;function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||o;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},d.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},s(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=n(this.uri,this.opts);var r=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var s=a(r,"open",(function(){i.onopen(),e&&e()})),o=a(r,"error",(function(t){if(u("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;u("connect attempt will timeout after %d",c);var h=setTimeout((function(){u("connect attempt timed out after %d",c),s.destroy(),r.close(),r.emit("error","timeout"),i.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(s),this.subs.push(o),this},d.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(e,"ping",c(this,"onping"))),this.subs.push(a(e,"pong",c(this,"onpong"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},d.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new i(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",s),r.on("connect",(function(){r.id=n.generateId(e)})),this.autoConnect&&s()}function s(){~h(n.connecting,r)||n.connecting.push(r)}return r},d.prototype.destroy=function(e){var t=h(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},d.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout((function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},
/*!***************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/index.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! xmlhttprequest-ssl */236),i=r(/*! ./polling-xhr */923),s=r(/*! ./polling-jsonp */930),o=r(/*! ./websocket */931);t.polling=function(e){var t=!1,r=!1,o=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),t=e.hostname!==location.hostname||c!==e.port,r=e.secure!==a}if(e.xdomain=t,e.xscheme=r,"open"in new n(e)&&!e.forceJSONP)return new i(e);if(!o)throw new Error("JSONP disabled");return new s(e)},t.websocket=o},
/*!*****************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../transport */237),i=r(/*! parseqs */158),s=r(/*! engine.io-parser */88),o=r(/*! component-inherit */159),a=r(/*! yeast */424),c=r(/*! debug */1)("engine.io-client:polling");e.exports=h;var u=null!=new(r(/*! xmlhttprequest-ssl */236))({xdomain:!1}).responseType;function h(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),n.call(this,e)}o(h,n),h.prototype.name="polling",h.prototype.doOpen=function(){this.poll()},h.prototype.pause=function(e){var t=this;function r(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(c("we are currently polling - waiting to pause"),n++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--n||r()}))),this.writable||(c("we are currently writing - waiting to pause"),n++,this.once("drain",(function(){c("pre-pause writing complete"),--n||r()})))}else r()},h.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},h.prototype.onData=function(e){var t=this;c("polling got data %s",e);s.decodePayload(e,this.socket.binaryType,(function(e,r,n){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},h.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},h.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,r)}))},h.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e}},
/*!*******************************************!*\
  !*** ./node_modules/has-binary2/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! isarray */235),i=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function e(r){if(!r||"object"!=typeof r)return!1;if(n(r)){for(var i=0,a=r.length;i<a;i++)if(e(r[i]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(r)||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||s&&r instanceof Blob||o&&r instanceof File)return!0;if(r.toJSON&&"function"==typeof r.toJSON&&1===arguments.length)return e(r.toJSON(),!0);for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)&&e(r[c]))return!0;return!1}}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************!*\
  !*** ./node_modules/yeast/index.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,o={},a=0,c=0;function u(e){var t="";do{t=i[e%s]+t,e=Math.floor(e/s)}while(e>0);return t}function h(){var e=u(+new Date);return e!==n?(a=0,n=e):e+"."+u(a++)}for(;c<s;c++)o[i[c]]=c;h.encode=u,h.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*s+o[e.charAt(c)];return t},e.exports=h},
/*!***************************************!*\
  !*** ./node_modules/indexof/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=[].indexOf;e.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},
/*!*****************************************************!*\
  !*** ./node_modules/socket.io-client/lib/socket.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! socket.io-parser */234),i=r(/*! component-emitter */87),s=r(/*! to-array */933),o=r(/*! ./on */427),a=r(/*! component-bind */428),c=r(/*! debug */1)("socket.io-client:socket"),u=r(/*! parseqs */158),h=r(/*! has-binary2 */423);e.exports=d;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;function d(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}i(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[o(e,"open",a(this,"onopen")),o(e,"packet",a(this,"onpacket")),o(e,"close",a(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(l.hasOwnProperty(e))return f.apply(this,arguments),this;var t=s(arguments),r={type:(void 0!==this.flags.binary?this.flags.binary:h(t))?n.BINARY_EVENT:n.EVENT,data:t,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?u.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:n.CONNECT,query:e})}else this.packet({type:n.CONNECT})},d.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){var t=e.nsp===this.nsp,r=e.type===n.ERROR&&"/"===e.nsp;if(t||r)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var i=s(arguments);c("sending ack %j",i),t.packet({type:h(i)?n.BINARY_ACK:n.ACK,id:e,data:i})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags.compress=e,this},d.prototype.binary=function(e){return this.flags.binary=e,this}},
/*!*************************************************!*\
  !*** ./node_modules/socket.io-client/lib/on.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}},
/*!**********************************************!*\
  !*** ./node_modules/component-bind/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},
/*!*********************************************!*\
  !*** ./node_modules/randombytes/browser.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t,n){var i=65536,s=4294967295;var o=r(/*! safe-buffer */6).Buffer,a=t.crypto||t.msCrypto;a&&a.getRandomValues?e.exports=function(e,t){if(e>s)throw new RangeError("requested too many random bytes");var r=o.allocUnsafe(e);if(e>0)if(e>i)for(var c=0;c<e;c+=i)a.getRandomValues(r.slice(c,c+i));else a.getRandomValues(r);if("function"==typeof t)return n.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(/*! ./../webpack/buildin/global.js */10),r(/*! ./../process/browser.js */2))},
/*!*************************************************!*\
  !*** ./node_modules/async/internal/parallel.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){r=r||n.default;var a=(0,i.default)(t)?[]:{};e(t,(function(e,t,r){(0,o.default)(e)((function(e,n){arguments.length>2&&(n=(0,s.default)(arguments,1)),a[t]=n,r(e)}))}),(function(e){r(e,a)}))};var n=a(r(/*! lodash/noop */42)),i=a(r(/*! lodash/isArrayLike */115)),s=a(r(/*! ./slice */76)),o=a(r(/*! ./wrapAsync */33));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!*********************************************************!*\
  !*** ./node_modules/libp2p-websocket-star/src/utils.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n){const i=r(/*! multiaddr */15),s=r(/*! peer-id */7),o=r(/*! libp2p-crypto */36),a=r(/*! mafmt */43);const c={string:e=>"string"==typeof e,object:e=>"object"==typeof e,multiaddr:e=>{if(c.string(e))try{return i(e),!0}catch(e){return!1}},function:e=>"function"==typeof e};function u(e,t){if(!Array.isArray(t))throw new Error("Data is not an array");e.forEach((e,r)=>{if(!c[e])throw console.error("Type %s does not exist",e),new Error("Type "+e+" does not exist");if(!c[e](t[r]))throw new Error("Data at index "+r+" is invalid for type "+e)})}(t=e.exports).cleanUrlSIO=function(e){const t=e.protos(),r=t[0].name,n=t[1].name,i=t[2].name,s=e.stringTuples(),o=s[1][1];if("tcp"!==n||"ws"!==i&&"wss"!==i)throw new Error("invalid multiaddr: "+e.toString());let a=s[0][1];"ip6"===r&&(a="["+a+"]");let c="ws"===i&&80===o||"wss"===i&&443===o?"":o;return("wss"===i?"https":"http")+"://"+a+(c?":"+c:"")},t.validate=u,t.Protocol=function(e){e||(e=()=>{});const t=this;t.requests={},t.addRequest=(e,r,n)=>{t.requests[e]={def:r,handle:n}},t.handleSocket=r=>{r.r={},Object.keys(t.requests).forEach(n=>{const i=t.requests[n];r.on(n,(function(){const t=[...arguments];try{u(i.def,t),t.unshift(r),i.handle.apply(null,t)}catch(i){e(i),e("peer %s has sent invalid data for request %s",r.id||"<server>",n,t)}}))})}},t.getIdAndValidate=function(e,t,r){s.createFromPubKey(n.from(e,"hex"),(i,s)=>i?r(new Error("Crypto error")):s.toB58String()!==t?r(new Error("Id is not matching")):r(null,o.keys.unmarshalPublicKey(n.from(e,"hex"))))},t.validateMa=e=>a.WebSocketStar.matches(i(e))}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************!*\
  !*** ./node_modules/uuid/index.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./v1 */945),i=r(/*! ./v4 */207),s=i;s.v1=n,s.v4=i,e.exports=s},
/*!**********************************************!*\
  !*** ./node_modules/pull-mplex/src/codec.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="/mplex/6.7.0"},
/*!********************************************!*\
  !*** ./node_modules/pull-through/index.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! looper */400);e.exports=function(e,t){return function(r){var i,s,o=[];function a(e){o.push(e)}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var c,u={emit:function(e,t){"data"==e&&a(t),"end"==e&&(i=!0,a(null)),"error"==e&&(s=t)},queue:a};return function(a,h){if(i=i||a,a)return r(a,(function(){if(c){var e=c;c=null,e(a)}h(a)}));c=h,n((function n(a){if(c)if(h=c,s)c=null,h(s);else if(o.length){var l=o.shift();c=null,h(null===l,l)}else r(i,(function(o,l){if(o&&!0!==o)return s=o,a();if(i=i||o)t.call(u);else if(null!==l&&(e.call(u,l),s||i))return r(s||i,(function(){c=null,h(s||i)}));a(n)}))}))}}}},
/*!**************************************************************!*\
  !*** ./node_modules/pull-mplex/node_modules/looper/index.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){var t=!1,r=0;return function(){if(r=!0,!t){for(t=!0;r;)r=!1,e();t=!1}}}},
/*!***************************************************!*\
  !*** ./node_modules/pull-mplex/src/util/index.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports.emitError=function(e,t){e.emit("error",t)},e.exports.emitStream=function(e,t,r){e.emit("stream",t,r)}},
/*!***********************************************!*\
  !*** ./node_modules/pull-mplex/src/consts.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.Types={NEW:0,IN_MESSAGE:1,OUT_MESSAGE:2,IN_CLOSE:3,OUT_CLOSE:4,IN_RESET:5,OUT_RESET:6},t.MAX_MSG_SIZE=1<<20},
/*!********************************************************************************!*\
  !*** ./node_modules/libp2p-secio/node_modules/multihashing-async/src/utils.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e,r){t.toCallback=t=>(function(r,n){let i;try{i=t(r)}catch(t){return void e.nextTick(n,t)}e.nextTick(n,null,i)}),t.toBuf=(e,t)=>n=>{let i=e(n,t);return r.from(i,"hex")},t.fromString=(e,t)=>n=>{const i=r.isBuffer(n)?n.toString():n;return e(i,t)},t.fromNumberTo32BitBuf=(e,t)=>n=>{let i=e(n,t);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return r.from(s)}}).call(this,r(/*! ./../../../../process/browser.js */2),r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/node_modules/multihashing-async/src/utils.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e,r){t.toCallback=t=>(function(r,n){let i;try{i=t(r)}catch(t){return void e.nextTick(n,t)}e.nextTick(n,null,i)}),t.toBuf=(e,t)=>n=>{let i=e(n,t);return r.from(i,"hex")},t.fromString=(e,t)=>n=>{const i=r.isBuffer(n)?n.toString():n;return e(i,t)},t.fromNumberTo32BitBuf=(e,t)=>n=>{let i=e(n,t);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return r.from(s)}}).call(this,r(/*! ./../../../../../../process/browser.js */2),r(/*! ./../../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************!*\
  !*** ./node_modules/lodash/_arrayMap.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},
/*!**********************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/multihashing-async/src/index.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! multihashes */13),i=r(/*! ./crypto */990);function s(e,t,r,i){if("function"==typeof r&&(i=r,r=void 0),!i)throw new Error("Missing callback");s.digest(e,t,r,(e,s)=>{if(e)return i(e);i(null,n.encode(s,t,r))})}e.exports=s,s.Buffer=t,s.multihash=n,s.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=s.createHash(t)}catch(e){return o(e)}i(e,o)},s.createHash=function(e){if(e=n.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions)}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/multihashing-async/src/utils.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e,r){t.toCallback=t=>(function(r,n){let i;try{i=t(r)}catch(t){return void e.nextTick(n,t)}e.nextTick(n,null,i)}),t.toBuf=(e,t)=>n=>{let i=e(n,t);return r.from(i,"hex")},t.fromString=(e,t)=>n=>{const i=r.isBuffer(n)?n.toString():n;return e(i,t)},t.fromNumberTo32BitBuf=(e,t)=>n=>{let i=e(n,t);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return r.from(s)}}).call(this,r(/*! ./../../../../process/browser.js */2),r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/query/index.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multihashes */13),i=r(/*! ../utils */26),s=r(/*! ./run */993);e.exports=class{constructor(e,t,r){this.dht=e,this.key=t,this.makePath=r,this._log=i.logger(this.dht.peerInfo.id,"query:"+n.toB58String(t)),this.running=!1,this._onStart=this._onStart.bind(this),this._onComplete=this._onComplete.bind(this)}async run(e){return this.dht._queryManager.running?0===e.length?(this._log.error("Running query with no peers"),{finalSet:new Set,paths:[]}):(this._run=new s(this),this._log(`query running with K=${this.dht.kBucketSize}, A=${this.dht.concurrency}, D=${Math.min(this.dht.disjointPaths,e.length)}`),this._run.once("start",this._onStart),this._run.once("complete",this._onComplete),this._run.execute(e)):(this._log.error("Attempt to run query after shutdown"),{finalSet:new Set,paths:[]})}_onStart(){this.running=!0,this._startTime=Date.now(),this._log("query:start"),this.dht._queryManager.queryStarted(this)}_onComplete(){this.stop()}stop(){this._log(`query:done in ${Date.now()-this._startTime}ms`),this._run&&this._log(`${this._run.errors.length} of ${this._run.peersSeen.size} peers errored (${this._run.errors.length/this._run.peersSeen.size*100}% fail rate)`),this.running&&(this._run.removeListener("start",this._onStart),this._run.removeListener("complete",this._onComplete),this.running=!1,this._run&&this._run.stop(),this.dht._queryManager.queryCompleted(this))}}},
/*!*************************************!*\
  !*** ./node_modules/async/queue.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,i.default)(e);return(0,n.default)((function(e,t){r(e[0],t)}),t,1)};var n=s(r(/*! ./internal/queue */1e3)),i=s(r(/*! ./internal/wrapAsync */33));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!******************************************!*\
  !*** ./node_modules/async/eachSeries.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(/*! ./eachLimit */1028)),i=s(r(/*! ./internal/doLimit */231));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)(n.default,1),e.exports=t.default},
/*!************************************************************!*\
  !*** ./node_modules/libp2p/src/switch/connection/index.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! fsm-event */119),i=r(/*! ../../circuit */241),s=r(/*! multistream-select */117),o=r(/*! class-is */34),a=r(/*! ./base */447),c=r(/*! async/parallel */56),u=r(/*! async/nextTick */35),h=r(/*! ../../identify */247),l=r(/*! err-code */8),{msHandle:f,msSelect:d,identifyDialer:p}=r(/*! ../utils */246),A=r(/*! ../observe-connection */249),{CONNECTION_FAILED:g,DIAL_SELF:y,INVALID_STATE_TRANSITION:m,NO_TRANSPORTS_REGISTERED:_,maybeUnexpectedEnd:b}=r(/*! ../errors */162);e.exports=o(class extends a{constructor({_switch:e,peerInfo:t,muxer:r,conn:i,type:s="out"}){super({_switch:e,name:`${s}:${e._peerInfo.id.toB58String().slice(0,8)}`}),this.theirPeerInfo=t,this.theirB58Id=this.theirPeerInfo.id.toB58String(),this.conn=i,this.muxer=r;let o="DISCONNECTED";this.muxer&&(o="MUXED"),this._state=n(o,{DISCONNECTED:{dial:"DIALING",disconnect:"DISCONNECTED",done:"DISCONNECTED"},DIALING:{abort:"ABORTED",done:"DIALED",error:"ERRORED",disconnect:"DISCONNECTING"},DIALED:{encrypt:"ENCRYPTING",privatize:"PRIVATIZING"},PRIVATIZING:{done:"PRIVATIZED",abort:"ABORTED",disconnect:"DISCONNECTING"},PRIVATIZED:{encrypt:"ENCRYPTING"},ENCRYPTING:{done:"ENCRYPTED",error:"ERRORED",disconnect:"DISCONNECTING"},ENCRYPTED:{upgrade:"UPGRADING",disconnect:"DISCONNECTING"},UPGRADING:{stop:"CONNECTED",done:"MUXED",error:"ERRORED",disconnect:"DISCONNECTING"},MUXED:{disconnect:"DISCONNECTING"},CONNECTED:{disconnect:"DISCONNECTING"},DISCONNECTING:{done:"DISCONNECTED",disconnect:"DISCONNECTING"},ABORTED:{},ERRORED:{disconnect:"DISCONNECTING"}}),this._state.on("DISCONNECTED",()=>this._onDisconnected()),this._state.on("DIALING",()=>this._onDialing()),this._state.on("DIALED",()=>this._onDialed()),this._state.on("PRIVATIZING",()=>this._onPrivatizing()),this._state.on("PRIVATIZED",()=>this._onPrivatized()),this._state.on("ENCRYPTING",()=>this._onEncrypting()),this._state.on("ENCRYPTED",()=>{this.log("successfully encrypted connection to %s",this.theirB58Id),this.emit("encrypted",this.conn)}),this._state.on("UPGRADING",()=>this._onUpgrading()),this._state.on("MUXED",()=>{this.log("successfully muxed connection to %s",this.theirB58Id),delete this.switch.conns[this.theirB58Id],this.emit("muxed",this.muxer)}),this._state.on("CONNECTED",()=>{this.log("unmuxed connection opened to %s",this.theirB58Id),this.emit("unmuxed",this.conn)}),this._state.on("DISCONNECTING",()=>this._onDisconnecting()),this._state.on("ABORTED",()=>this._onAborted()),this._state.on("ERRORED",()=>this._onErrored()),this._state.on("error",e=>this._onStateError(e))}dial(){return this.theirB58Id===this.ourPeerInfo.id.toB58String()?this.emit("error",y()):"DIALING"===this.getState()?this.log("attempted to dial while already dialing, ignoring"):void this._state("dial")}shake(e,t){return e?this.muxer&&this.muxer.newStream?this.muxer.newStream((r,n)=>{if(r)return t(r,null);this.log("created new stream to %s",this.theirB58Id),this._protocolHandshake(e,n,t)}):void this._protocolHandshake(e,this.conn,t):t(null,null)}upgrade(){this._state("upgrade")}_onDialing(){if(this.log("dialing %s",this.theirB58Id),!this.switch.hasTransports())return this.close(_());const e=this.switch.availableTransports(this.theirPeerInfo),t=Boolean(this.switch.transports[i.tag]);t&&!e.includes(i.tag)&&e.push(i.tag);const r=n=>{const s=n;if(!s)return t?this.close(g(`No available transports to dial peer ${this.theirB58Id}!`)):this.close(g(`Circuit not enabled and all transports failed to dial peer ${this.theirB58Id}!`));s===i.tag&&this.theirPeerInfo.multiaddrs.add(`/p2p-circuit/p2p/${this.theirB58Id}`),this.log("dialing transport %s",s),this.switch.transport.dial(s,this.theirPeerInfo,(t,n)=>{if(t)return this.emit("error:connection_attempt_failed",t),this.log(t),r(e.shift());this.conn=A(s,null,n,this.switch.observer),this._state("done")})};r(e.shift())}_onDialed(){this.log("successfully dialed %s",this.theirB58Id),this.emit("connected",this.conn)}_onDisconnecting(){this.log("disconnecting from %s",this.theirB58Id,Boolean(this.muxer)),delete this.switch.conns[this.theirB58Id];const e=[];if(this.muxer&&e.push(e=>{this.muxer.end(()=>{delete this.muxer,e()})}),this.conn){try{this.conn.source.abort()}catch(e){}delete this.conn}c(e,()=>{this._state("done")})}_onEncrypting(){const e=new s.Dialer;e.handle(this.conn,t=>{if(t)return this.close(b(t));this.log("selecting crypto %s to %s",this.switch.crypto.tag,this.theirB58Id),e.select(this.switch.crypto.tag,(e,t)=>{if(e)return this.close(b(e));const r=A(null,this.switch.crypto.tag,t,this.switch.observer),n=this.switch.crypto.encrypt(this.ourPeerInfo.id,r,this.theirPeerInfo.id,e=>{if(e)return this.close(e);this.conn=n,this.conn.setPeerInfo(this.theirPeerInfo),this._state("done")})})})}_onUpgrading(){const e=Object.keys(this.switch.muxers);if(this.log("upgrading connection to %s",this.theirB58Id),0===e.length)return this._state("stop");const t=new s.Dialer;t.handle(this.conn,r=>{if(r)return this._didUpgrade(r);const n=r=>{this.log("selecting %s",r),t.select(r,(t,i)=>{if(t)return 0===e.length?this._didUpgrade(t):n(e.shift());const s=A(null,r,i,this.switch.observer);this.muxer=this.switch.muxers[r].dialer(s),this.muxer.once("close",()=>{this.close()}),this.muxer.on("stream",e=>{this.log("new stream created via muxer to %s",this.theirB58Id),e.setPeerInfo(this.theirPeerInfo),this.switch.protocolMuxer(null)(e)}),this._didUpgrade(null),this.switch.identify&&this._identify((e,t)=>{if(e)return this.close(e);this.theirPeerInfo=this.switch._peerBook.put(t.peerInfo)})})};n(e.shift())})}_identify(e){if(!this.muxer)return u(e,l("The connection was already closed","ERR_CONNECTION_CLOSED"));this.muxer.newStream(async(t,r)=>{if(t)return e(t);const n=new s.Dialer;let i;try{await f(n,r);const e=await d(n,h.multicodec);i=await p(e,this.theirPeerInfo)}catch(t){return e(t)}e(null,i)})}_didUpgrade(e){if(e)return this.log("Error upgrading connection:",e),this.switch.conns[this.theirB58Id]=this,this.emit("error:upgrade_failed",e),this._state("stop");this._state("done")}_protocolHandshake(e,t,r){const n=new s.Dialer;n.handle(t,t=>{if(t)return r(t,null);n.select(e,(t,n)=>{if(t)return this.log("could not perform protocol handshake:",t),r(t,null);const i=A(null,e,n,this.switch.observer);this.log("successfully performed handshake of %s to %s",e,this.theirB58Id),this.emit("connection",i),r(null,i)})})}_onStateError(e){this.emit("error",m(e)),this.log(e)}},{className:"ConnectionFSM",symbolName:"libp2p-switch/ConnectionFSM"})},
/*!***********************************************************!*\
  !*** ./node_modules/libp2p/src/switch/connection/base.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5).EventEmitter,i=r(/*! debug */1),s=r(/*! class-is */34);e.exports=s(class extends n{constructor({_switch:e,name:t}){super(),this.switch=e,this.ourPeerInfo=this.switch._peerInfo,this.log=i(`libp2p:conn:${t}`),this.log.error=i(`libp2p:conn:${t}:error`)}close(e){"DISCONNECTING"!==this._state._state&&(this.log("closing connection to %s",this.theirB58Id),e&&this._events.error&&this.emit("error",e),this._state("disconnect"))}emit(e,...t){"error"!==e||this._events.error?super.emit(e,...t):this.log.error(...t)}getState(){return this._state._state}encrypt(){this._state("encrypt")}protect(){this._state("privatize")}upgrade(){this._state("upgrade")}_onDisconnected(){this.switch.connection.remove(this),this.log("disconnected from %s",this.theirB58Id),this.emit("close"),this.removeAllListeners()}_onPrivatized(){this.emit("private",this.conn)}_onPrivatizing(){if(!this.switch.protector)return this._state("done");this.conn=this.switch.protector.protect(this.conn,e=>{if(e)return this.close(e);this.log("successfully privatized conn to %s",this.theirB58Id),this.conn.setPeerInfo(this.theirPeerInfo),this._state("done")})}},{className:"BaseConnection",symbolName:"libp2p-switch/BaseConnection"})},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p/src/switch/plaintext.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/setImmediate */32);e.exports={tag:"/plaintext/1.0.0",encrypt:(e,t,r,i)=>("function"==typeof r&&(i=r,r=void 0),n(()=>i()),t)}},
/*!*****************************************!*\
  !*** ./node_modules/retimer/retimer.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./time */1043);function i(e,t,r){var i=this;this._started=n(),this._rescheduled=0,this._scheduled=t,this._args=r,this._timer=setTimeout((function t(){i._rescheduled>0?(i._scheduled=i._rescheduled-(n()-i._started),i._timer=setTimeout(t,i._scheduled),i._rescheduled=0):e.apply(null,i._args)}),t)}i.prototype.reschedule=function(e){var t=n();return!(t+e-(this._started+this._scheduled)<0)&&(this._started=t,this._rescheduled=e,!0)},i.prototype.clear=function(){clearTimeout(this._timer)},e.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("timeout needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new i(arguments[0],arguments[1],e)}},
/*!*******************************************!*\
  !*** ./node_modules/lodash/_getNative.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseIsNative */1069),i=r(/*! ./_getValue */1073);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},
/*!************************************************************************!*\
  !*** ./node_modules/latency-monitor/node_modules/debug/src/browser.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(n){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(/*! ./debug */1095)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))})),e.splice(s,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,r(/*! ./../../../../process/browser.js */2))},
/*!****************************************!*\
  !*** ./node_modules/ipfs/package.json ***!
  \****************************************/
/*! exports provided: name, version, description, keywords, homepage, bugs, license, leadMaintainer, files, main, browser, browser-all-ipld-formats, bin, repository, scripts, dependencies, devDependencies, optionalDependencies, engines, contributors, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"name":"ipfs","version":"0.39.0","description":"JavaScript implementation of the IPFS specification","keywords":["IPFS"],"homepage":"https://js.ipfs.io","bugs":"https://github.com/ipfs/js-ipfs/issues","license":"MIT","leadMaintainer":"Alan Shaw <alan@tableflip.io>","files":["src","dist"],"main":"src/core/index.js","browser":{"./src/core/components/init-assets.js":false,"./src/core/runtime/add-from-fs-nodejs.js":"./src/core/runtime/add-from-fs-browser.js","./src/core/runtime/config-nodejs.js":"./src/core/runtime/config-browser.js","./src/core/runtime/dns-nodejs.js":"./src/core/runtime/dns-browser.js","./src/core/runtime/libp2p-nodejs.js":"./src/core/runtime/libp2p-browser.js","./src/core/runtime/libp2p-pubsub-routers-nodejs.js":"./src/core/runtime/libp2p-pubsub-routers-browser.js","./src/core/runtime/preload-nodejs.js":"./src/core/runtime/preload-browser.js","./src/core/runtime/repo-nodejs.js":"./src/core/runtime/repo-browser.js","./src/core/runtime/ipld-nodejs.js":"./src/core/runtime/ipld-browser.js","./test/utils/create-repo-nodejs.js":"./test/utils/create-repo-browser.js","stream":"readable-stream"},"browser-all-ipld-formats":{"./src/core/runtime/ipld-browser.js":"./src/core/runtime/ipld-browser-all.js"},"bin":{"jsipfs":"src/cli/bin.js"},"repository":"github:ipfs/js-ipfs","scripts":{"lint":"aegir lint","build":"aegir build","test":"aegir test","test:node":"aegir test -t node","test:browser":"aegir test -t browser","test:webworker":"aegir test -t webworker","test:node:core":"aegir test -t node -f test/core/**/*.js","test:node:http":"aegir test -t node -f test/http-api/index.js","test:node:gateway":"aegir test -t node -f test/gateway/index.js","test:node:cli":"aegir test -t node -f test/cli/index.js","test:node:interface":"aegir test -t node -f test/core/interface.spec.js","test:bootstrapers":"IPFS_TEST=bootstrapers aegir test -t browser -f test/bootstrapers.js","test:interop":"IPFS_JS_EXEC=$PWD/src/cli/bin.js ipfs-interop","test:external":"aegir test-external","coverage":"nyc --reporter=text --reporter=lcov npm run test:node","benchmark":"echo \\"Error: no benchmarks yet\\" && exit 1","benchmark:node":"echo \\"Error: no benchmarks yet\\" && exit 1","benchmark:node:core":"echo \\"Error: no benchmarks yet\\" && exit 1","benchmark:node:http":"echo \\"Error: no benchmarks yet\\" && exit 1","benchmark:browser":"echo \\"Error: no benchmarks yet\\" && exit 1","release":"aegir release -t node -t browser","release-minor":"aegir release --type minor -t node -t browser","release-major":"aegir release --type major -t node -t browser"},"dependencies":{"@hapi/ammo":"^3.1.1","@hapi/boom":"^7.4.3","@hapi/hapi":"^18.3.2","@hapi/joi":"^15.0.0","array-shuffle":"^1.0.1","async":"^2.6.1","async-iterator-all":"^1.0.0","async-iterator-to-pull-stream":"^1.3.0","async-iterator-to-stream":"^1.1.0","base32.js":"~0.1.0","bignumber.js":"^9.0.0","binary-querystring":"~0.1.2","bl":"^3.0.0","bs58":"^4.0.1","buffer-peek-stream":"^1.0.1","byteman":"^1.3.5","callbackify":"^1.1.0","cid-tool":"~0.3.0","cids":"~0.7.1","class-is":"^1.1.0","dag-cbor-links":"^1.3.0","datastore-core":"~0.7.0","datastore-pubsub":"^0.2.1","debug":"^4.1.0","dlv":"^1.1.3","err-code":"^2.0.0","explain-error":"^1.0.4","file-type":"^12.0.1","fnv1a":"^1.0.1","fsm-event":"^2.1.0","get-folder-size":"^2.0.0","glob":"^7.1.3","hapi-pino":"^6.1.0","hashlru":"^2.3.0","human-to-milliseconds":"^2.0.0","interface-datastore":"~0.7.0","ipfs-bitswap":"^0.26.0","ipfs-block":"~0.8.1","ipfs-block-service":"~0.16.0","ipfs-http-client":"^38.2.0","ipfs-http-response":"~0.3.1","ipfs-mfs":"^0.13.0","ipfs-multipart":"^0.2.0","ipfs-repo":"^0.28.0","ipfs-unixfs":"~0.1.16","ipfs-unixfs-exporter":"^0.38.0","ipfs-unixfs-importer":"^0.40.0","ipfs-utils":"~0.4.0","ipld":"~0.25.0","ipld-bitcoin":"~0.3.0","ipld-dag-cbor":"~0.15.0","ipld-dag-pb":"~0.18.0","ipld-ethereum":"^4.0.0","ipld-git":"~0.5.0","ipld-raw":"^4.0.0","ipld-zcash":"~0.3.0","ipns":"^0.6.1","is-domain-name":"^1.0.1","is-ipfs":"~0.6.1","is-pull-stream":"~0.0.0","is-stream":"^2.0.0","iso-url":"~0.4.6","it-pipe":"^1.0.1","it-to-stream":"^0.1.1","jsondiffpatch":"~0.3.11","just-safe-set":"^2.1.0","kind-of":"^6.0.2","ky":"^0.14.0","ky-universal":"~0.3.0","libp2p":"^0.26.2","libp2p-bootstrap":"~0.9.3","libp2p-crypto":"^0.16.2","libp2p-delegated-content-routing":"^0.3.1","libp2p-delegated-peer-routing":"^0.3.1","libp2p-floodsub":"^0.18.0","libp2p-gossipsub":"~0.0.5","libp2p-kad-dht":"~0.16.0","libp2p-keychain":"^0.5.1","libp2p-mdns":"~0.12.0","libp2p-record":"~0.7.0","libp2p-secio":"~0.11.0","libp2p-tcp":"^0.13.0","libp2p-webrtc-star":"~0.16.0","libp2p-websocket-star-multi":"~0.4.3","libp2p-websockets":"~0.12.3","lodash":"^4.17.15","lodash.flatten":"^4.4.0","mafmt":"^6.0.10","merge-options":"^1.0.1","mime-types":"^2.1.21","mkdirp":"~0.5.1","mortice":"^2.0.0","multiaddr":"^6.1.1","multiaddr-to-uri":"^5.0.0","multibase":"~0.6.0","multicodec":"~0.5.5","multihashes":"~0.4.14","multihashing-async":"^0.8.0","node-fetch":"^2.3.0","p-iteration":"^1.1.8","p-queue":"^6.1.0","peer-book":"^0.9.1","peer-id":"^0.12.2","peer-info":"~0.15.1","progress":"^2.0.1","promise-nodeify":"^3.0.1","promisify-es6":"^1.0.3","protons":"^1.0.1","pull-abortable":"^4.1.1","pull-cat":"^1.1.11","pull-defer":"~0.2.3","pull-file":"^1.1.0","pull-mplex":"~0.1.1","pull-ndjson":"^0.2.0","pull-pushable":"^2.2.0","pull-sort":"^1.0.1","pull-stream":"^3.6.14","pull-stream-to-async-iterator":"^1.0.2","pull-stream-to-stream":"^1.3.4","pull-traverse":"^1.0.3","readable-stream":"^3.4.0","receptacle":"^1.3.2","semver":"^6.3.0","stream-to-pull-stream":"^1.7.3","superstruct":"~0.6.2","tar-stream":"^2.0.0","temp":"~0.9.0","update-notifier":"^3.0.1","uri-to-multiaddr":"^3.0.1","varint":"^5.0.0","yargs":"^14.0.0","yargs-promise":"^1.1.0"},"devDependencies":{"aegir":"^20.4.1","base64url":"^3.0.1","clear-module":"^4.0.0","delay":"^4.1.0","detect-node":"^2.0.4","dir-compare":"^1.7.3","execa":"^2.0.4","form-data":"^2.5.1","hat":"0.0.3","interface-ipfs-core":"^0.117.2","ipfs-interop":"^0.1.1","ipfsd-ctl":"^0.47.2","libp2p-websocket-star":"~0.10.2","ncp":"^2.0.0","p-event":"^4.1.0","qs":"^6.5.2","rimraf":"^3.0.0","sinon":"^7.4.2","stream-to-promise":"^2.2.0","temp-write":"^4.0.0"},"optionalDependencies":{"prom-client":"^11.5.3","prometheus-gc-stats":"~0.6.0"},"engines":{"node":">=10.0.0","npm":">=6.0.0"},"contributors":["0xflotus <0xflotus@gmail.com>","A_A <21040751+Otto-AA@users.noreply.github.com>","Alan Shaw <alan.shaw@protocol.ai>","Alan Shaw <alan@tableflip.io>","Alex North <alex@alexnorth.me>","Andrew Nesbitt <andrewnez@gmail.com>","Andrew de Andrade <andrew@deandrade.com.br>","André Cruz <andremiguelcruz@msn.com>","Arkadiy Kukarkin <parkan@users.noreply.github.com>","Arpit Agarwal <93arpit@gmail.com>","Arpit Agarwal <atvanguard@users.noreply.github.com>","Bernard Mordan <bernard@tableflip.io>","Brian Vander Schaaf <bvs330@gmail.com>","Bruno Zell <bruno.zzell@gmail.com>","CHEVALAY JOSSELIN <josselin54.chevalay@gmail.com>","Caio Gondim <me@caiogondim.com>","Chance Hudson <jchancehud@gmail.com>","Chirag Shinde <chirag-shinde@users.noreply.github.com>","Christian Couder <chriscool@tuxfamily.org>","Dafeng <dfguo.joe@gmail.com>","Dan Ordille <dordille@gmail.com>","Dan Shields <35669742+NukeManDan@users.noreply.github.com>","Daniel J. O\'Quinn <danieljoquinn@gmail.com>","Daniela Borges Matos de Carvalho <alunassertiva@gmail.com>","David Dias <daviddias.p@gmail.com>","David Gilbertson <gilbertson.david@gmail.com>","David da Silva <dasilvacontin@gmail.com>","Diogo Silva <fsdiogo@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Dominic Della Valle <ddvpublic@Gmail.com>","Dzmitry Bachko <dbachko@gmail.com>","Enrico Marino <enrico.marino@email.com>","Faheel Ahmad <faheel@live.in>","Felix Yan <felixonmars@archlinux.org>","Francisco Baio Dias <xicombd@gmail.com>","Francisco Baio Dias <francisco@typeform.com>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Gar <gar+gh@danger.computer>","Georgios Rassias <georassias@gmail.com>","Gorka Ludlow <gorka@aquigorka.com>","Grant Herman <grantlouisherman041@gmail.com>","Greenkeeper <support@greenkeeper.io>","Haad <haadcode@users.noreply.github.com>","Haoliang Yu <haoliangyu@users.noreply.github.com>","Harsh Vakharia <harshjv@users.noreply.github.com>","Henrique Dias <hacdias@gmail.com>","Henry Rodrick <moshisushi@gmail.com>","Heo Sangmin <heo@mapiacompany.com>","Hugo Dias <hugomrdias@gmail.com>","Hugo Dias <mail@hugodias.me>","Irakli Gozalishvili <contact@gozala.io>","Jacob Heun <jacobheun@gmail.com>","Jacob Heun <jake@andyet.net>","Jade Meskill <jade.meskill@gmail.com>","Johannes Wikner <johannes.wikner@gmail.com>","Jon Schlinkert <dev@sellside.com>","Jonathan <jkrone@vt.edu>","Jonybang <Jonybange@gmail.com>","João Antunes <j.goncalo.antunes@gmail.com>","João Santos <joaosantos15@users.noreply.github.com>","Kevin Wang <kevin@fossa.io>","Lars Gierth <larsg@systemli.org>","Lukas Drgon <lukas.drgon@gmail.com>","Maciej Krüger <mkg20001@gmail.com>","Marcin Rataj <lidel@lidel.org>","Marius Darila <marius.darila@gmail.com>","Mark Robert Henderson <henderson.mark@gmail.com>","Mat Kelly <machawk1@gmail.com>","Michelle Lee <michelle@protocol.ai>","Mikeal Rogers <mikeal.rogers@gmail.com>","Mithgol <getgit@mithgol.ru>","Molly <momack2@users.noreply.github.com>","Mounish Sai <pvsmounish@gmail.com>","My9Bot <34904312+My9Bot@users.noreply.github.com>","Nick Poulden <nick@poulden.com>","Nitin Patel <31539366+niinpatel@users.noreply.github.com>","Nuno Nogueira <nunofmn@gmail.com>","Oli Evans <oli@tableflip.io>","Oskar Nyberg <oskar@oskarnyberg.com>","Pascal Precht <pascal.precht@googlemail.com>","Pau Ramon Revilla <masylum@gmail.com>","Paulo Rodrigues <me@paulogr.com>","Pedro Teixeira <i@pgte.me>","Portia Burton <plburton@gmail.com>","Prabhakar Poudel <yuvrajzohan@gmail.com>","Qmstream <51881352+Qmstream@users.noreply.github.com>","Raoul Millais <raoul@raoulmillais.com>","RasmusErik Voel Jensen <github@solsort.com>","Richard Littauer <richard.littauer@gmail.com>","Richard Schneider <makaretu@gmail.com>","Rob Brackett <rob@robbrackett.com>","Rod Keys <rod@zokos.com>","Sangwon Hong <qpakzk@gmail.com>","Sid Harder <sideharder@gmail.com>","SidHarder <softwarenavigator@gmail.com>","Stephen Whitmore <stephen.whitmore@gmail.com>","Stephen Whitmore <noffle@users.noreply.github.com>","Steven Allen <steven@stebalien.com>","Terence Pae <terencepae@gmail.com>","Teri Chadbourne <terichadbourne@users.noreply.github.com>","Travis CI <travis@travis-ci.org>","Uroš Jurglič <jurglic@gmail.com>","Vasco Santos <vasco.santos@moxy.studio>","Vasco Santos <vasco.santos@ua.pt>","Vincent Martin <vince@finalatomicbuster.net>","Volker Mische <volker.mische@gmail.com>","Xiao Liang <yxliang01@users.noreply.github.com>","Yahya <ya7yaz@gmail.com>","Yole <yole@ultiledger.io>","achingbrain <alex@achingbrain.net>","bitspill <bitspill+github@bitspill.net>","datafatmunger <jbg@peerparty.org>","dirkmc <dirkmdev@gmail.com>","dirkmc <dirk@mccormick.cx>","greenkeeper[bot] <23040076+greenkeeper[bot]@users.noreply.github.com>","greenkeeper[bot] <greenkeeper[bot]@users.noreply.github.com>","haad <haad@headbanggames.com>","hapsody <hapsody@gmail.com>","jbenet <juan@benet.ai>","jonahweissman <19804455+jonahweissman@users.noreply.github.com>","kevingzhang <kevin.zhang.canada@gmail.com>","kumavis <kumavis@users.noreply.github.com>","nginnever <ginneversource@gmail.com>","npmcdn-to-unpkg-bot <npmcdn-to-unpkg-bot@users.noreply.github.com>","robbsolter <35879806+robbsolter@users.noreply.github.com>","seungwon-kang <ksw3894@gmail.com>","swedneck <40505480+swedneck@users.noreply.github.com>","tcme <hi@this-connect.me>","victorbjelkholm <victorbjelkholm@gmail.com>","Łukasz Magiera <magik6k@users.noreply.github.com>","Максим Ильин <negamaxi@gmail.com>"]}')},
/*!*******************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/repo.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-repo */206).repoVersion,i=r(/*! callbackify */19);e.exports=function(e){return{init:i(async(e,t)=>{}),version:i(async()=>{try{await e._repo._checkInitialized()}catch(e){if([/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some(t=>t.test(e.message)))return n;throw e}return e._repo.version.get()}),gc:r(/*! ./pin/gc */1107)(e),stat:i.variadic(async t=>{t=t||{};const r=await e._repo.stat(t);return{numObjects:r.numObjects,repoSize:r.repoSize,repoPath:r.repoPath,version:r.version.toString(),storageMax:r.storageMax}}),path:()=>e._repo.path}}},
/*!*********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/config.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! callbackify */19),i=r(/*! ../runtime/config-nodejs.js */253),s=r(/*! debug */1)("ipfs:core:config");async function o(e){return Object.keys(a).map(e=>({name:e,description:a[e].description}))}e.exports=function(e){return{get:n.variadic(e._repo.config.get),set:n(e._repo.config.set),replace:n.variadic(e._repo.config.set),profiles:{apply:n.variadic((async function(t,r){r=r||{};const{dryRun:n}=r,i=a[t];if(!i)throw new Error(`No profile with name '${t}' exists`);try{const t=await e.config.get();let r=JSON.parse(JSON.stringify(t));return r=i.transform(r),n||await e.config.replace(r),delete t.Identity.PrivKey,delete r.Identity.PrivKey,{original:t,updated:r}}catch(e){throw s(e),new Error(`Could not apply profile '${t}' to config: ${e.message}`)}})),list:n.variadic(o)}}};const a={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery in local networks.",transform:e=>(e.Discovery.MDNS.Enabled=!1,e.Discovery.webRTCStar.Enabled=!1,e)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery in local networks.",transform:e=>(e.Discovery.MDNS.Enabled=!0,e.Discovery.webRTCStar.Enabled=!0,e)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:e=>{const t=i();return e.Addresses.API=t.Addresses.API?"/ip4/127.0.0.1/tcp/0":"",e.Addresses.Gateway=t.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":"",e.Addresses.Swarm=t.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[],e.Bootstrap=[],e.Discovery.MDNS.Enabled=!1,e.Discovery.webRTCStar.Enabled=!1,e}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:e=>{const t=i();return e.Addresses.API=t.Addresses.API,e.Addresses.Gateway=t.Addresses.Gateway,e.Addresses.Swarm=t.Addresses.Swarm,e.Bootstrap=t.Bootstrap,e.Discovery.MDNS.Enabled=t.Discovery.MDNS.Enabled,e.Discovery.webRTCStar.Enabled=t.Discovery.webRTCStar.Enabled,e}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:e=>(e.Swarm=e.Swarm||{},e.Swarm.ConnMgr=e.Swarm.ConnMgr||{},e.Swarm.ConnMgr.LowWater=20,e.Swarm.ConnMgr.HighWater=40,e)},"default-power":{description:'Inverse of "lowpower" profile.',transform:e=>{const t=i();return e.Swarm=t.Swarm,e}}};e.exports.profiles=a},
/*!******************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/pin/pin-manager.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const{DAGNode:n,DAGLink:i}=r(/*! ipld-dag-pb */29),s=r(/*! cids */4),{default:o}=r(/*! p-queue */45),{Key:a}=r(/*! interface-datastore */14),c=r(/*! err-code */22),u=r(/*! multicodec */27),h=r(/*! dag-cbor-links */456),l=r(/*! debug */1),{cidToString:f}=r(/*! ../../../utils/cid */122),d=r(/*! ./pin-set */1120),{Errors:p}=r(/*! interface-datastore */14),A=p.notFoundError().code,g=300,y=300,m=new a("/local/pins");const _={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};class b{constructor(e,t){this.repo=e,this.dag=t,this.log=l("ipfs:pin"),this.pinset=d(t),this.directPins=new Set,this.recursivePins=new Set}async _walkDag({cid:e,preload:t=!1,onCid:r=(()=>{})}){s.isCID(e)||(e=new s(e));const n=e=>async()=>{const{value:s}=await this.dag.get(e,{preload:t});if(r(e),"dag-pb"===e.codec)i.addAll(s.Links.map(e=>n(e.Hash)));else if("dag-cbor"===e.codec)for(const[e,t]of h(s))i.add(n(t))},i=new o({concurrency:g});i.add(n(e)),await i.onIdle()}directKeys(){return Array.from(this.directPins,e=>new s(e).buffer)}recursiveKeys(){return Array.from(this.recursivePins,e=>new s(e).buffer)}async getIndirectKeys({preload:e}){const t=new Set;for(const r of this.recursiveKeys())await this._walkDag({cid:new s(r),preload:e||!1,onCid:e=>{e=e.toString(),this.recursivePins.has(e)||t.add(e)}});return Array.from(t)}async flushPins(){const[e,r]=await Promise.all([this.pinset.storeSet(this.directKeys()).then(e=>new i(_.direct,e.node.size,e.cid)),this.pinset.storeSet(this.recursiveKeys()).then(e=>new i(_.recursive,e.node.size,e.cid)),this.dag.put(new n(t.alloc(0)),{version:0,format:u.DAG_PB,hashAlg:u.SHA2_256,preload:!1})]),s=new n(t.alloc(0),[e,r]),o=await this.dag.put(s,{version:0,format:u.DAG_PB,hashAlg:u.SHA2_256,preload:!1});await this.repo.datastore.put(m,o.buffer),this.log(`Flushed pins with root: ${o}`)}async load(){if(!await this.repo.datastore.has(m))return;const e=await this.repo.datastore.get(m),t=await this.dag.get(new s(e),"",{preload:!1}),[r,n]=await Promise.all([this.pinset.loadSet(t.value,_.recursive),this.pinset.loadSet(t.value,_.direct)]);this.directPins=new Set(n.map(e=>f(e))),this.recursivePins=new Set(r.map(e=>f(e))),this.log("Loaded pins from the datastore")}async isPinnedWithType(e,t){const r=f(e),{recursive:n,direct:i,all:a}=_;if((t===n||t===a)&&this.recursivePins.has(r))return{key:r,pinned:!0,reason:n};if(t===n)return{key:r,pinned:!1};if((t===i||t===a)&&this.directPins.has(r))return{key:r,pinned:!0,reason:i};if(t===i)return{key:r,pinned:!1};const c=new o({concurrency:y});let u;return c.addAll(this.recursiveKeys().map(e=>(e=new s(e),async()=>{await this.pinset.hasDescendant(e,r)&&(u=e,c.clear())}))),await c.onIdle(),{key:r,pinned:Boolean(u),reason:u}}async getInternalBlocks(){let e;try{e=await this.repo.datastore.get(m)}catch(e){if(e.code===A)return this.log("No pinned blocks"),[];throw new Error(`Could not get pin sets root from datastore: ${e.message}`)}const t=new s(e),r=await this.dag.get(t,"",{preload:!1});return(await this.pinset.getInternalCids(r.value)).concat(t)}async fetchCompleteDag(e,t){await this._walkDag({cid:e,preload:t.preload})}static checkPinType(e){if("string"!=typeof e||!Object.keys(_).includes(e))return function(e){return c(new Error(`Invalid type '${e}', must be one of {direct, indirect, recursive, all}`),"ERR_INVALID_PIN_TYPE")}(e)}}b.PinTypes=_,e.exports=b}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/dag-cbor-links/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){const n=r(/*! dag-cbor-sync */1113)(1e6),i=r(/*! cids */4),s=(e,r=[])=>(t.isBuffer(e)&&(e=n.deserialize(e)),function*(){for(let t of Object.keys(e)){let n=r.slice();n.push(t);let o=e[t];if(o&&"object"==typeof o)if(Array.isArray(o))for(let e=0;e<o.length;e++){let t=n.slice();t.push(e);let r=o[e];i.isCID(r)?yield[t.join("/"),r]:"object"==typeof r&&(yield*s(r,n))}else i.isCID(o)?yield[n.join("/"),o]:yield*s(o,n)}}());e.exports=s}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/add.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async-iterator-all */123);e.exports=function(e){return(t,r,i)=>{i||"function"!=typeof r||(i=r,r={});const s=n(e._addAsyncIterator(t,r));if(!i)return s;s.then(e=>i(null,e),i)}}},
/*!********************************************!*\
  !*** ./node_modules/get-iterator/index.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){if(e){if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"==typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}},
/*!*************************************************!*\
  !*** ./node_modules/it-to-stream/src/duplex.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){const{Readable:n,Writable:i,Duplex:s}=r(/*! stream */37),o=r(/*! get-iterator */458),a=r(/*! p-fifo */1139),c=t.alloc(0);e.exports=function(e,t){t=t||{};let r=!1;const u=new a;e={sink:e.sink,source:e.source?o(e.source):null};let h=s;e.source?e.sink||(h=n):h=i,Object.assign(t,e.source?{async read(t){if(!r){r=!0;try{for(;;){const{value:r,done:n}=await e.source.next(t);if(n)return this.push(null);if(!this.push(r))break}}catch(e){this.emit("error",e)}finally{r=!1}}}}:{},e.sink?{write(e,t,r){u.push(e).then(()=>r(),r)},final(e){u.push(c).then(()=>e(),e)}}:{});const l=new h(t);return e.sink&&e.sink({[Symbol.asyncIterator](){return this},async next(){const e=await u.shift();return e===c?{done:!0}:{value:e}},throw:async e=>(l.destroy(e),{done:!0}),return:async()=>(l.destroy(),{done:!0})}),l}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************!*\
  !*** ./node_modules/p-defer/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=()=>{const e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}},
/*!********************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/index.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{superstruct:n}=r(/*! superstruct */205),i=r(/*! ./dag-builder */1143),s=r(/*! ./tree-builder */1157),o=r(/*! multihashes */13),a=n({types:{codec:e=>["dag-pb","dag-cbor","raw"].includes(e),hashAlg:e=>Object.keys(o.names).includes(e),leafType:e=>["file","raw"].includes(e)}}),c=a({minChunkSize:"number?",maxChunkSize:"number?",avgChunkSize:"number?",window:"number?",polynomial:"number?"},{maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804}),u=a({maxChildrenPerNode:"number?",layerRepeat:"number?"},{maxChildrenPerNode:174,layerRepeat:4}),h=a({chunker:a.enum(["fixed","rabin"]),rawLeaves:"boolean?",hashOnly:"boolean?",strategy:a.enum(["balanced","flat","trickle"]),reduceSingleLeafToSelf:"boolean?",codec:"codec?",format:"codec?",hashAlg:"hashAlg?",leafType:"leafType?",cidVersion:"number?",progress:"function?",wrapWithDirectory:"boolean?",shardSplitThreshold:"number?",onlyHash:"boolean?",chunkerOptions:c,builderOptions:u,wrap:"boolean?",pin:"boolean?",recursive:"boolean?",ignore:"array?",hidden:"boolean?",preload:"boolean?"},{chunker:"fixed",strategy:"balanced",rawLeaves:!1,reduceSingleLeafToSelf:!0,codec:"dag-pb",hashAlg:"sha2-256",leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3});e.exports=async function*(e,t,r={}){const n=h(r);r.cidVersion>0&&void 0===r.rawLeaves&&(n.rawLeaves=!0),void 0!==r.hashAlg&&void 0===r.rawLeaves&&(n.rawLeaves=!0),"trickle"===r.strategy&&(n.leafType="raw",n.reduceSingleLeafToSelf=!1),r.format&&(r.codec=r.format);for await(const r of s(i(e,t,n),t,n))yield{cid:r.cid,path:r.path,unixfs:r.unixfs,size:r.size}}},
/*!*******************************!*\
  !*** ./node_modules/bl/bl.js ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){var n=r(/*! readable-stream */37).Duplex;function i(e){if(!(this instanceof i))return new i(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)}))}else this.append(e);n.call(this)}r(/*! util */99).inherits(i,n),i.prototype._offset=function(e){var t,r=0,n=0;if(0===e)return[0,0];for(;n<this._bufs.length;n++){if(e<(t=r+this._bufs[n].length)||n==this._bufs.length-1)return[n,e-r];r=t}},i.prototype._reverseOffset=function(e){for(var t=e[0],r=e[1],n=0;n<t;n++)r+=this._bufs[n].length;return r},i.prototype.append=function(e){var r=0;if(t.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;r<e.length;r++)this.append(e[r]);else if(e instanceof i)for(;r<e._bufs.length;r++)this.append(e._bufs[r]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(t.from(e)));return this},i.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},i.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},i.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},i.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype.get=function(e){if(!(e>this.length||e<0)){var t=this._offset(e);return this._bufs[t[0]][t[1]]}},i.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},i.prototype.copy=function(e,r,n,i){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length)return e||t.alloc(0);if(i<=0)return e||t.alloc(0);var s,o,a=!!e,c=this._offset(n),u=i-n,h=u,l=a&&r||0,f=c[1];if(0===n&&i==this.length){if(!a)return 1===this._bufs.length?this._bufs[0]:t.concat(this._bufs,this.length);for(o=0;o<this._bufs.length;o++)this._bufs[o].copy(e,l),l+=this._bufs[o].length;return e}if(h<=this._bufs[c[0]].length-f)return a?this._bufs[c[0]].copy(e,r,f,f+h):this._bufs[c[0]].slice(f,f+h);for(a||(e=t.allocUnsafe(u)),o=c[0];o<this._bufs.length;o++){if(!(h>(s=this._bufs[o].length-f))){this._bufs[o].copy(e,l,f,f+h);break}this._bufs[o].copy(e,l,f),l+=s,h-=s,f&&(f=0)}return e},i.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return new i;var r=this._offset(e),n=this._offset(t),s=this._bufs.slice(r[0],n[0]+1);return 0==n[1]?s.pop():s[s.length-1]=s[s.length-1].slice(0,n[1]),0!=r[1]&&(s[0]=s[0].slice(r[1])),new i(s)},i.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},i.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){for(var e=0,t=new i;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},i.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},i.prototype.indexOf=function(e,r,n){if(void 0===n&&"string"==typeof r&&(n=r,r=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=t.from([e]):"string"==typeof e?e=t.from(e,n):e instanceof i?e=e.slice():t.isBuffer(e)||(e=t.from(e)),r=Number(r||0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),0===e.length)return r>this.length?this.length:r;for(var s=this._offset(r),o=s[0],a=s[1];o<this._bufs.length;o++){for(var c=this._bufs[o];a<c.length;){if(c.length-a>=e.length){var u=c.indexOf(e,a);if(-1!==u)return this._reverseOffset([o,u]);a=c.length-e.length+1}else{var h=this._reverseOffset([o,a]);if(this._match(h,e))return h;a++}}a=0}return-1},i.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(var r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var t in e)!function(t){i.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(r){return this.slice(r,r+e[t])[t](0)}}(t)}(),e.exports=i}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/is-pull-stream/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e){return"function"==typeof e}function n(e){return r(e)&&2===e.length}function i(e){return r(e)&&1===e.length}t.isDuplex=function(e){return"object"==typeof e&&n(e.source)&&i(e.sink)},t.isSource=n,t.isSink=i},
/*!***********************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/resolvers/unixfs-v1/content/file.js ***!
  \***********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ../../../utils/extract-data-from-block */465),i=r(/*! ../../../utils/validate-offset-and-length */466),s=r(/*! ipfs-unixfs */39),o=r(/*! err-code */70);e.exports=(e,r,a,c,u,h,l)=>(e={})=>{const c=a.fileSize(),{offset:u,length:h}=i(c,e.offset,e.length);return async function*e(r,i,a,c,u=0){if(t.isBuffer(i)){const e=n(i,u,a,c);return e.length&&(yield e),u+=e.length}let h;try{h=s.unmarshal(i.Data)}catch(e){throw o(e,"ERR_NOT_UNIXFS")}if(Boolean(h.data&&h.data.length)){const e=n(h.data,u,a,c);e.length&&(yield e),u+=h.data.length}let l=u;for(let t=0;t<i.Links.length;t++){const n=i.Links[t],s=u+h.blockSizes[t];if(a>=l&&a<s||c>l&&c<=s||a<l&&c>s){const t=await r.get(n.Hash);for await(const n of e(r,t,a,c,u))u+=n.length,yield n}u=s,l=s+1}}(l,r,u,u+h)}}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/utils/extract-data-from-block.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){e.exports=function(e,r,n,i){const s=r+e.length;return n>=s||i<r?t.alloc(0):(i>=r&&i<s&&(e=e.slice(0,i-r)),n>=r&&n<s&&(e=e.slice(n-r)),e)}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/utils/validate-offset-and-length.js ***!
  \***********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */70);e.exports=(e,t,r)=>{if(t||(t=0),t<0)throw n(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(t>e)throw n(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(r||0===r||(r=e-t),r<0)throw n(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return t+r>e&&(r=e-t),{offset:t,length:r}}},
/*!*********************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/refs.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9),i=r(/*! pull-stream */25);e.exports=function(e){return n((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{},i(e.refsPullStream(t,r),i.collect((e,t)=>{if(e)return n(e);n(null,t)}))})},e.exports.Format={default:"<dst>",edges:"<src> -> <dst>"}},
/*!*************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/create-lock.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! mortice */469);let i;e.exports=e=>{if(i)return i;const t=n({singleProcess:e});return i={readLock:e=>async(...r)=>{const n=await t.readLock();try{return await e.apply(null,r)}finally{n()}},writeLock:e=>async(...r)=>{const n=await t.writeLock();try{return await e.apply(null,r)}finally{n()}}}}},
/*!*******************************************!*\
  !*** ./node_modules/mortice/lib/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){const n=r(/*! ./node */1196),i=r(/*! ./browser */1206),{default:s}=r(/*! p-queue */45),{timeout:o}=r(/*! promise-timeout */1211),a=r(/*! observable-webworkers */472),c={};let u;function h(e,t){let r;const n=new Promise(e=>{r=e});return e.add(()=>o((()=>new Promise(e=>{r(()=>{e()})}))(),t.timeout)),n}const l={concurrency:1/0,timeout:846e5,global:t,singleProcess:!1};e.exports=(e,t)=>(t||(t={}),"object"==typeof e&&(t=e,e="lock"),e||(e="lock"),t=Object.assign({},l,t),u||(u=n(t)||i(t)).isWorker||(u.on("requestReadLock",(e,t)=>{c[e]&&c[e].readLock().then(e=>t().finally(()=>e()))}),u.on("requestWriteLock",async(e,t)=>{c[e]&&c[e].writeLock().then(e=>t().finally(()=>e()))})),c[e]||(c[e]=((e,t)=>{if(u.isWorker)return{readLock:u.readLock(e,t),writeLock:u.writeLock(e,t)};const r=new s({concurrency:1});let n=null;return{readLock:()=>{if(n)return h(n,t);const e=n=new s({concurrency:t.concurrency,autoStart:!1}),i=h(n,t);return r.add(()=>(e.start(),e.onIdle().then(()=>{n===e&&(n=null)}))),i},writeLock:()=>(n=null,h(r,t))}})(e,t)),c[e]),e.exports.Worker=function(e,r){let n;r=r||t.Worker;try{n=new r(e)}catch(t){t.message.includes("not a constructor")&&(n=r(e))}if(!n)throw new Error("Could not create Worker from",r);return a(n),n}}).call(this,r(/*! ./../../webpack/buildin/global.js */10))},
/*!***************************************!*\
  !*** ./node_modules/shortid/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=r(/*! ./lib/index */1197)},
/*!***********************************************!*\
  !*** ./node_modules/mortice/lib/constants.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}},
/*!*********************************************************!*\
  !*** ./node_modules/observable-webworkers/lib/index.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){const r={},n=e=>{e.addEventListener("message",t=>{n.dispatchEvent("message",e,t)}),e.port&&e.port.addEventListener("message",t=>{n.dispatchEvent("message",e,t)})};n.addEventListener=(e,t)=>{r[e]||(r[e]=[]),r[e].push(t)},n.removeEventListener=(e,t)=>{r[e]&&(r[e]=r[e].filter(e=>e===t))},n.dispatchEvent=function(){const e=Array.prototype.slice.call(arguments),t=e.shift();r[t]&&r[t].forEach(t=>t.apply(null,e))},e.exports=n},
/*!*************************************************!*\
  !*** ./node_modules/define-properties/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! object-keys */1208),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,o=Array.prototype.concat,a=Object.defineProperty,c=a&&function(){var e={};try{for(var t in a(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),u=function(e,t,r,n){var i;t in e&&("function"!=typeof(i=n)||"[object Function]"!==s.call(i)||!n())||(c?a(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},h=function(e,t){var r=arguments.length>2?arguments[2]:{},s=n(t);i&&(s=o.call(s,Object.getOwnPropertySymbols(t)));for(var a=0;a<s.length;a+=1)u(e,s[a],t[s[a]],r[s[a]])};h.supportsDescriptors=!!c,e.exports=h},
/*!*************************************************!*\
  !*** ./node_modules/object-keys/isArguments.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t=n.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===n.call(e.callee)),r}},
/*!***************************************************!*\
  !*** ./node_modules/globalthis/implementation.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){"undefined"!=typeof self?e.exports=self:"undefined"!=typeof window?e.exports=window:e.exports=void 0!==t?t:Function("return this")()}).call(this,r(/*! ./../webpack/buildin/global.js */10))},
/*!*********************************************!*\
  !*** ./node_modules/globalthis/polyfill.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){var n=r(/*! ./implementation */475);e.exports=function(){return"object"==typeof t&&t&&t.Math===Math&&t.Array===Array?t:n}}).call(this,r(/*! ./../webpack/buildin/global.js */10))},
/*!***************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/with-mfs-root.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! cids */4),i=r(/*! ipfs-unixfs */39),{DAGNode:s}=r(/*! ipld-dag-pb */29),o=r(/*! debug */1)("ipfs:mfs:utils:with-mfs-root"),a=r(/*! multicodec */27),c=r(/*! multihashes */13),{MFS_ROOT_KEY:u}=r(/*! ./constants */46);e.exports=async e=>{let t;await e.repo.datastore.open();try{const r=await e.repo.datastore.get(u);t=new n(r)}catch(r){if("ERR_NOT_FOUND"!==r.code)throw r;o("Creating new MFS root");const n=new s(new i("directory").marshal());t=await e.ipld.put(n,a.DAG_PB,{cidVersion:0,hashAlg:c.names["sha2-256"]}),await e.repo.datastore.put(u,t.buffer)}return o(`Loaded MFS root /ipfs/${t}`),t}},
/*!**********************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/cp.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./mkdir */261),i=r(/*! ./stat */171),s=r(/*! debug */1)("ipfs:mfs:cp"),o=r(/*! err-code */44),a=r(/*! ./utils/update-tree */173),c=r(/*! ./utils/update-mfs-root */172),u=r(/*! ./utils/add-link */174),h=r(/*! ./utils/apply-default-options */53),l=r(/*! ./utils/to-mfs-path */71),f=r(/*! ./utils/to-sources-and-destination */1213),d=r(/*! ./utils/to-trail */263),p={parents:!1,flush:!0,format:"dag-pb",hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};e.exports=e=>(async function(...t){const r=h(t,p);let{sources:a,destination:c}=await f(e,t);if(!a.length)throw o(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");if(!c)throw o(new Error("Please supply a destination"),"ERR_INVALID_PARAMS");r.parents=r.p||r.parents;const u=a.find(e=>!e.exists);if(u)throw o(new Error(`${u.path} does not exist`),"ERR_INVALID_PARAMS");const m=A(c);if(c.exists){if(s("Destination exists"),1===a.length&&!m)throw o(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(s("Destination does not exist"),a.length>1){if(!r.parents)throw o(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await n(e)(c.path,r),c=await l(e,c.path)}else if(c.parts.length>1){const t=`/${c.parts.slice(0,-1).join("/")}`;try{await i(e)(t,r)}catch(i){if("ERR_NOT_FOUND"!==i.code)throw i;if(!r.parents)throw o(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await n(e)(t,r),c=await l(e,c.path)}}const _=A(c)?c.mfsPath:c.mfsDirectory,b=await d(e,_,r);if(1===a.length){const t=a.pop(),n=m?t.name:c.name;return s(`Only one source, copying to destination ${m?"directory":"file"} ${n}`),g(e,t,n,b,r)}return s("Multiple sources, wrapping in a directory"),y(e,a,c,b,r)});const A=e=>e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory"),g=async(e,t,r,n,i)=>{let s=n.pop();s=await m(e,t,r,s,i),n.push(s);const o=await a(e,n,i);await c(e,o)},y=async(e,t,r,n,i)=>{for(let n=0;n<t.length;n++){const s=t[n];r=await m(e,s,s.name,r,i)}n[n.length-1]=r;const s=await a(e,n,i);await c(e,s)},m=async(e,t,r,n,i)=>{const s=await e.repo.blocks.get(t.cid),{node:o,cid:a}=await u(e,{parentCid:n.cid,size:s.data.length,cid:t.cid,name:r,format:i.format,hashAlg:i.hashAlg,cidVersion:i.cidVersion});return n.node=o,n.cid=a,n.size=o.size,n}},
/*!************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/hamt-utils.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const{DAGNode:n}=r(/*! ipld-dag-pb */29),i=r(/*! hamt-sharding/src/bucket */259),s=r(/*! ipfs-unixfs-importer/src/dir-sharded */168),o=r(/*! debug */1)("ipfs:mfs:core:utils:hamt-utils"),a=r(/*! ipfs-unixfs */39),c=r(/*! multicodec */27),u=r(/*! multihashes */13),h=r(/*! async-iterator-last */169),l=async(e,t,r,n)=>{const o=new i({hashFn:s.hashFn,hash:r?r._options.hash:void 0},r,n);return r&&r._putObjectAt(n,o),await f(e,o,t),o},f=async(e,t,r)=>{await Promise.all(e.map(e=>{if(2===e.Name.length){const r=parseInt(e.Name,16);return t._putObjectAt(r,new i({hashFn:s.hashFn},t,r)),Promise.resolve()}return(r||t).put(e.Name.substring(2),{size:e.TSize,cid:e.Hash})}))},d=e=>e.toString("16").toUpperCase().padStart(2,"0").substring(0,2);e.exports={generatePath:async(e,t,r)=>{const n=await l(r.Links,null,null,null),i=await n._findNewBucketAndPos(t),s=[{bucket:i.bucket,prefix:d(i.pos)}];let a=i.bucket;for(;a!==n;)s.push({bucket:a,prefix:d(a._posAtParent)}),a=a._parent;s.reverse(),s[0].node=r;for(let r=0;r<s.length;r++){const i=s[r],a=i.node.Links.filter(e=>e.Name.substring(0,2)===i.prefix).pop();if(!a){o(`Link ${i.prefix}${t} will be added`);continue}if(a.Name===`${i.prefix}${t}`){o(`Link ${i.prefix}${t} will be replaced`);continue}o(`Found subshard ${i.prefix}`);const c=await e.ipld.get(a.Hash);if(!s[r+1]){o(`Loaded new subshard ${i.prefix}`),await l(c.Links,n,i.bucket,parseInt(i.prefix,16));const e=await n._findNewBucketAndPos(t);s.push({bucket:e.bucket,prefix:d(e.pos),node:c});continue}const u=s[r+1];await f(c.Links,u.bucket,n),u.node=c}return await n.put(t,!0),s.reverse(),{rootBucket:n,path:s}},updateHamtDirectory:async(e,r,i,o)=>{const h=t.from(i._children.bitField().reverse()),l=new a("hamt-sharded-directory",h);l.fanout=i.tableSize(),l.hashType=s.hashFn.code;const f=c[o.format.toUpperCase().replace(/-/g,"_")],d=u.names[o.hashAlg],p=new n(l.marshal(),r);return{node:p,cid:await e.ipld.put(p,f,{cidVersion:o.cidVersion,hashAlg:d,hashOnly:!o.flush})}},recreateHamtLevel:l,addLinksToHamtBucket:f,toPrefix:d,createShard:async(e,t,r)=>{const n=new s({root:!0,dir:!0,parent:null,parentKey:null,path:"",dirty:!0,flat:!1},r);for(let e=0;e<t.length;e++)await n._bucket.put(t[e].name,{size:t[e].size,cid:t[e].cid});return h(n.flush("",e.ipld,null))}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/rm.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */44),i=r(/*! ./utils/update-tree */173),s=r(/*! ./utils/update-mfs-root */172),o=r(/*! ./utils/to-sources */262),a=r(/*! ./utils/remove-link */1216),c=r(/*! ./utils/to-mfs-path */71),u=r(/*! ./utils/to-trail */263),h=r(/*! ./utils/apply-default-options */53),{FILE_SEPARATOR:l}=r(/*! ./utils/constants */46),f={recursive:!1,cidVersion:0,hashAlg:"sha2-256",format:"dag-pb",flush:!0};e.exports=e=>(async function(){const t=Array.from(arguments),{sources:r}=await o(e,t,f),i=h(t,f);if(!r.length)throw n(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");r.forEach(e=>{if(e.path===l)throw n(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")});for(const t of r)await d(e,t.path,i)});const d=async(e,t,r)=>{const o=await c(e,t),h=await u(e,o.mfsPath,r),l=h.pop(),f=h[h.length-1];if(!f)throw n(new Error(`${t} does not exist`),"ERR_NOT_FOUND");if("directory"===l.type&&!r.recursive)throw n(new Error(`${t} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:d}=await a(e,{parentCid:f.cid,name:l.name,format:r.format,hashAlg:r.hashAlg,cidVersion:r.cidVersion,flush:r.flush});f.cid=d;const p=await i(e,h,r);await s(e,p)}},
/*!**********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/bitswap.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../utils */66).OFFLINE_ERROR,i=r(/*! callbackify */19),s=r(/*! bignumber.js */48),o=r(/*! cids */4),a=r(/*! peer-id */7),c=r(/*! err-code */22);function u(e,t){return Array.from(e).map(e=>({"/":e[1].cid.toBaseEncodedString(t)}))}e.exports=function(e){return{wantlist:i.variadic(async t=>{if(!e.isOnline())throw new Error(n);let r;return t?(t=a.createFromB58String(t),r=e._bitswap.wantlistForPeer(t)):r=e._bitswap.getWantlist(),{Keys:u(r)}}),stat:i(async()=>{if(!e.isOnline())throw new Error(n);const t=e._bitswap.stat().snapshot;return{provideBufLen:parseInt(t.providesBufferLength.toString()),blocksReceived:new s(t.blocksReceived),wantlist:u(e._bitswap.getWantlist()),peers:e._bitswap.peers().map(e=>e.toB58String()),dupBlksReceived:new s(t.dupBlksReceived),dupDataReceived:new s(t.dupDataReceived),dataReceived:new s(t.dataReceived),blocksSent:new s(t.blocksSent),dataSent:new s(t.dataSent)}}),unwant:i(async t=>{if(!e.isOnline())throw new Error(n);Array.isArray(t)||(t=[t]);try{t=t.map(e=>new o(e))}catch(e){throw c(e,"ERR_INVALID_CID")}return e._bitswap.unwant(t)})}}},
/*!********************************************************!*\
  !*** ./node_modules/p-iteration/lib/static-methods.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){t.forEach=async(e,t,r)=>{const n=[];for(let i=0;i<e.length;i++)if(i in e){const s=Promise.resolve(e[i]).then(n=>t.call(r||this,n,i,e));n.push(s)}await Promise.all(n)},t.forEachSeries=async(e,t,r)=>{for(let n=0;n<e.length;n++)n in e&&await t.call(r||this,await e[n],n,e)},t.map=async(e,t,r)=>{const n=[];for(let i=0;i<e.length;i++)i in e&&(n[i]=Promise.resolve(e[i]).then(n=>t.call(r||this,n,i,e)));return Promise.all(n)},t.mapSeries=async(e,t,r)=>{const n=[];for(let i=0;i<e.length;i++)i in e&&(n[i]=await t.call(r||this,await e[i],i,e));return n},t.find=(e,t,r)=>new Promise((n,i)=>{if(0===e.length)return n();let s=1;for(let o=0;o<e.length;o++){const a=t=>{t?n(e[o]):s===e.length&&n(),s++};Promise.resolve(e[o]).then(n=>t.call(r||this,n,o,e)).then(a).catch(i)}}),t.findSeries=async(e,t,r)=>{for(let n=0;n<e.length;n++)if(await t.call(r||this,await e[n],n,e))return e[n]},t.findIndex=(e,t,r)=>new Promise((n,i)=>{if(0===e.length)return n(-1);let s=1;for(let o=0;o<e.length;o++){const a=t=>{t?n(o):s===e.length&&n(-1),s++};Promise.resolve(e[o]).then(n=>t.call(r||this,n,o,e)).then(a).catch(i)}}),t.findIndexSeries=async(e,t,r)=>{for(let n=0;n<e.length;n++)if(await t.call(r||this,await e[n],n,e))return n},t.some=(e,t,r)=>new Promise((n,i)=>{if(0===e.length)return n(!1);let s=1;for(let o=0;o<e.length;o++){if(!(o in e)){s++;continue}const a=t=>{t?n(!0):s===e.length&&n(!1),s++};Promise.resolve(e[o]).then(n=>t.call(r||this,n,o,e)).then(a).catch(i)}}),t.someSeries=async(e,t,r)=>{for(let n=0;n<e.length;n++)if(n in e&&await t.call(r||this,await e[n],n,e))return!0;return!1},t.every=(e,t,r)=>new Promise((n,i)=>{if(0===e.length)return n(!0);let s=1;for(let o=0;o<e.length;o++){if(!(o in e)){s++;continue}const a=t=>{t?s===e.length&&n(!0):n(!1),s++};Promise.resolve(e[o]).then(n=>t.call(r||this,n,o,e)).then(a).catch(i)}}),t.everySeries=async(e,t,r)=>{for(let n=0;n<e.length;n++)if(n in e&&!await t.call(r||this,await e[n],n,e))return!1;return!0},t.filter=(e,t,r)=>new Promise(async(n,i)=>{const s=[];for(let n=0;n<e.length;n++)n in e&&(s[n]=Promise.resolve(e[n]).then(i=>t.call(r||this,i,n,e)).catch(i));const o=[];for(let t=0;t<s.length;t++)await s[t]&&o.push(await e[t]);n(o)}),t.filterSeries=async(e,t,r)=>{const n=[];for(let i=0;i<e.length;i++)i in e&&await t.call(r||this,await e[i],i,e)&&n.push(await e[i]);return n},t.reduce=async(e,t,r)=>{if(0===e.length&&void 0===r)throw TypeError("Reduce of empty array with no initial value");let n,i;for(void 0!==r?(i=r,n=0):(i=e[0],n=1);n<e.length;n++)n in e&&(i=await t(await i,await e[n],n,e));return i}},
/*!*********************************************************!*\
  !*** ./node_modules/human-to-milliseconds/src/index.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=/^((\d+(\.\d+)*)(ns|ms|us|µs|m|s|h))+$/,i=/((\d+(\.\d+)*)(ns|ms|us|µs|m|s|h))/g,s=/(ns|ms|us|µs|m|s|h)/g,o={ns:1e-6,us:.001,"µs":.001,ms:1,s:1e3,m:6e4,h:36e5};e.exports=function(e){if("string"!=typeof e)throw new Error("the first argument must be a string");if(!n.test(e))throw new Error("invalid time");return e.match(i).reduce((e,t)=>e+function(e){let t=e.match(s)[0];return e=e.substring(0,e.length-t.length),parseFloat(e)*o[t]}(t),0)}},
/*!********************************!*\
  !*** ./src/components/shop.ts ***!
  \********************************/
/*! exports provided: NimiqShop */
/*! exports used: NimiqShop */
/*! ModuleConcatenation bailout: Module uses eval() */function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return NimiqShop}));var lit_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(/*! lit-element */18),_checkout_button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(/*! ./checkout-button */126),_frontend__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(/*! ../frontend */490),__decorate=function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};const TAG_NAME="nimiq-shop";let NimiqShop=class NimiqShop extends lit_element__WEBPACK_IMPORTED_MODULE_0__.a{constructor(){super(),this.metadataCallback=e=>{console.warn("collect metadata not implemented"),console.log(e)},this.successCallback=(e,t,r,n)=>{console.log({message:"order successful",products:e,sum:t,orderId:r,txHash:n})},this.errorCallback=e=>{console.warn(e)},this.config="./nimiq-pop-up-shop-configuration.json",this.checkout=this.checkout.bind(this)}firstUpdated(e){console.log(this.config),this.frontend=new Promise(e=>{fetch(location+this.config).then(e=>e.json()).then(t=>e(new _frontend__WEBPACK_IMPORTED_MODULE_2__.a(t)))})}connectedCallback(){super.connectedCallback();for(const e of document.getElementsByTagName(_checkout_button__WEBPACK_IMPORTED_MODULE_1__.b))e.addEventListener("checkout",this.checkout);this.collectMetadata&&(this.metadataCallback=eval(this.collectMetadata)),this.onSuccess&&(this.successCallback=eval(this.onSuccess)),this.onError&&(this.errorCallback=eval(this.onError))}disconnectedCallback(){super.disconnectedCallback();for(const e of this.getElementsByTagName(_checkout_button__WEBPACK_IMPORTED_MODULE_1__.b))e.removeEventListener("checkout",this.checkout)}async checkout(e){console.log("checkout",e);const t=await this.frontend,r=[e.detail],n=t.sumUp(r);try{const e=await this.metadataCallback(r,n);if(e){const n=await t.checkout(r,e);this.successCallback(n)}}catch(e){this.errorCallback(e)}}render(){return lit_element__WEBPACK_IMPORTED_MODULE_0__.d`
      <slot></slot>
    `}};__decorate([Object(lit_element__WEBPACK_IMPORTED_MODULE_0__.e)({type:String})],NimiqShop.prototype,"config",void 0),__decorate([Object(lit_element__WEBPACK_IMPORTED_MODULE_0__.e)({type:String})],NimiqShop.prototype,"collectMetadata",void 0),__decorate([Object(lit_element__WEBPACK_IMPORTED_MODULE_0__.e)({type:String})],NimiqShop.prototype,"onSuccess",void 0),__decorate([Object(lit_element__WEBPACK_IMPORTED_MODULE_0__.e)({type:String})],NimiqShop.prototype,"onError",void 0),NimiqShop=__decorate([Object(lit_element__WEBPACK_IMPORTED_MODULE_0__.c)(TAG_NAME)],NimiqShop)},
/*!******************************!*\
  !*** ./src/storage/index.ts ***!
  \******************************/
/*! exports provided: Storage */
/*! exports used: Storage */
/*! ModuleConcatenation bailout: Module uses injected variables (process) */function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return a}));var n=r(/*! ./dummy */486),i=r(/*! ./ipfs */487),s=r(/*! ./encryption/webcrypto */175),o=r(/*! ./encryption/dummy */489);class a{constructor(t,r="true"==e.env.production,a=r){this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.backend=r?new i.a(t):new n.a(t),this.encryption=a?new s.a:new o.a}async store(e,t){return this.backend.store(await this.encryption.encrypt(this.encode(e),t))}async load(e,t){return this.decode(await this.encryption.decrypt(await this.backend.load(e),t))}async list(e){return Promise.all((await this.backend.list()).map(async t=>this.decode(await this.encryption.decrypt(t,e))))}encode(e){return this.encoder.encode(JSON.stringify(e))}decode(e){return JSON.parse(this.decoder.decode(e))}}}).call(this,r(/*! ./../../node_modules/process/browser.js */2))},
/*!******************************!*\
  !*** ./src/storage/dummy.ts ***!
  \******************************/
/*! exports provided: DummyStorage */
/*! exports used: DummyStorage */function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e){this.repository=e,this.namespace=`dummy-${this.repository}`}_id(e){return`${this.namespace}-${e}`}async store(e){const t=Math.floor(1e11*Math.random()).toString(16);return localStorage.setItem(this._id(t),this.encode(e)),t}async load(e){const t=localStorage.getItem(this._id(e));if(null==t)throw new Error(`Order with id ${e} not found in storage`);return this.decode(t)}async list(){const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r.startsWith(this.namespace)&&e.push(this.decode(localStorage.getItem(r)))}return e}decode(e){return new Uint8Array(JSON.parse(e))}encode(e){return JSON.stringify(Array.from(e))}}},
/*!*****************************!*\
  !*** ./src/storage/ipfs.ts ***!
  \*****************************/
/*! exports provided: IpfsStorage */
/*! exports used: IpfsStorage */function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(/*! buffer */0),i=r(/*! ipfs */488),s=r.n(i);class o{constructor(e){this.ipfs=s.a.createNode(null),this.repository=e}async store(e){return(await this.ipfs.add(n.Buffer.from(e)))[0].hash}async load(e){console.log(`IPFS online ${this.ipfs.isOnline()}`);const t=await this.ipfs.cat(e);return new Uint8Array(t)}async list(){return console.warn("not implemented!"),null}}},
/*!*********************************************!*\
  !*** ./node_modules/ipfs/src/core/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ipfs-block-service */525),i=r(/*! ipld */527),s=r(/*! peer-id */7),o=r(/*! peer-info */21),a=r(/*! libp2p-crypto */36),c=r(/*! is-ipfs */62),u=r(/*! multiaddr */15),h=r(/*! multihashes */13),l=r(/*! peer-book */340),f=r(/*! multibase */72),d=r(/*! multicodec */27),p=r(/*! multihashing-async */341),A=r(/*! cids */4),g=r(/*! debug */1),y=r(/*! merge-options */51),m=r(/*! events */5),_=r(/*! ./config */678),b=r(/*! ./boot */680),w=r(/*! ./components */740),v=r(/*! ./components/pin/gc-lock */1235),E=r(/*! ./runtime/repo-nodejs */1237),S=r(/*! ./preload */1238),C=r(/*! ./mfs-preload */1243),k=r(/*! ./runtime/ipld-nodejs */1244),{isTest:I}=r(/*! ipfs-utils/src/env */343);class T extends m{constructor(e){super();const t={init:!0,start:!0,EXPERIMENTAL:{},preload:{enabled:!I,addresses:["/dnsaddr/node0.preload.ipfs.io/https","/dnsaddr/node1.preload.ipfs.io/https"]}};e=_.validate(e||{}),this._options=y(t,e),!1===e.init&&(this._options.init=!1),!1!==e.start&&(this._options.start=!0),"string"==typeof e.repo||void 0===e.repo?this._repo=E(e.repo):this._repo=e.repo,this.log=g("ipfs"),this.log.err=g("ipfs:err"),this._peerInfoBook=new l,this._peerInfo=void 0,this._bitswap=void 0,this._blockService=new n(this._repo),this._ipld=new i(k(this._blockService,this._options.ipld,this.log)),this._preload=S(this),this._mfsPreload=C(this),this._ipns=void 0,this._print=this._options.silent?this.log:console.log,this._gcLock=new v(this._options.repoOwner,{morticeId:this._repo.path}),this.init=w.init(this),this.preStart=w.preStart(this),this.start=w.start(this),this.stop=w.stop(this),this.shutdown=this.stop,this.isOnline=w.isOnline(this),Object.assign(this,w.filesRegular(this)),this.version=w.version(this),this.id=w.id(this),this.repo=w.repo(this),this.bootstrap=w.bootstrap(this),this.config=w.config(this),this.block=w.block(this),this.object=w.object(this),this.dag=w.dag(this),this.files=w.filesMFS(this),this.libp2p=null,this.swarm=w.swarm(this),this.name=w.name(this),this.bitswap=w.bitswap(this),this.pin=w.pin(this),this.ping=w.ping(this),this.pingPullStream=w.pingPullStream(this),this.pingReadableStream=w.pingReadableStream(this),this.pubsub=w.pubsub(this),this.dht=w.dht(this),this.dns=w.dns(this),this.key=w.key(this),this.stats=w.stats(this),this.resolve=w.resolve(this),this._options.EXPERIMENTAL.ipnsPubsub&&this.log("EXPERIMENTAL IPNS pubsub is enabled"),this._options.EXPERIMENTAL.sharding&&this.log("EXPERIMENTAL sharding is enabled"),this.state=r(/*! ./state */1245)(this);const s=()=>{this.removeListener("error",o),this._ready=!0},o=e=>{this.removeListener("ready",s),this._readyError=e};this.once("ready",s).once("error",o),b(this)}get ready(){return new Promise((e,t)=>this._ready?e(this):this._readyError?t(this._readyError):(this.once("ready",()=>e(this)),void this.once("error",t)))}}e.exports=T;const R=t;Object.assign(e.exports,{crypto:a,isIPFS:c,Buffer:R,CID:A,multiaddr:u,multibase:f,multihash:h,multihashing:p,multicodec:d,PeerId:s,PeerInfo:o}),e.exports.createNode=e=>new T(e),e.exports.create=e=>new T(e).ready}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*****************************************!*\
  !*** ./src/storage/encryption/dummy.ts ***!
  \*****************************************/
/*! exports provided: DummyEncryption */
/*! exports used: DummyEncryption */function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{encrypt(e){return new Promise(t=>t(e))}decrypt(e){return new Promise(t=>t(e))}}},
/*!*************************************!*\
  !*** ./src/frontend.ts + 2 modules ***!
  \*************************************/
/*! exports provided: Frontend */
/*! exports used: Frontend */
/*! ModuleConcatenation bailout: Cannot concat with ./src/shop.ts because of ./src/index.ts */function(e,t,r){"use strict";var n,i,s=r(92);class o{static byteLength(e){const[t,r]=o._getLengths(e);return o._byteLength(t,r)}static decode(e){o._initRevLookup();const[t,r]=o._getLengths(e),n=new Uint8Array(o._byteLength(t,r));let i=0;const s=r>0?t-4:t;let a=0;for(;a<s;a+=4){const t=o._revLookup[e.charCodeAt(a)]<<18|o._revLookup[e.charCodeAt(a+1)]<<12|o._revLookup[e.charCodeAt(a+2)]<<6|o._revLookup[e.charCodeAt(a+3)];n[i++]=t>>16&255,n[i++]=t>>8&255,n[i++]=255&t}if(2===r){const t=o._revLookup[e.charCodeAt(a)]<<2|o._revLookup[e.charCodeAt(a+1)]>>4;n[i++]=255&t}if(1===r){const t=o._revLookup[e.charCodeAt(a)]<<10|o._revLookup[e.charCodeAt(a+1)]<<4|o._revLookup[e.charCodeAt(a+2)]>>2;n[i++]=t>>8&255,n[i]=255&t}return n}static encode(e){const t=e.length,r=t%3,n=[];for(let i=0,s=t-r;i<s;i+=16383)n.push(o._encodeChunk(e,i,i+16383>s?s:i+16383));if(1===r){const r=e[t-1];n.push(o._lookup[r>>2]+o._lookup[r<<4&63]+"==")}else if(2===r){const r=(e[t-2]<<8)+e[t-1];n.push(o._lookup[r>>10]+o._lookup[r>>4&63]+o._lookup[r<<2&63]+"=")}return n.join("")}static encodeUrl(e){return o.encode(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,".")}static decodeUrl(e){return o.decode(e.replace(/_/g,"/").replace(/-/g,"+").replace(/\./g,"="))}static _initRevLookup(){if(0===o._revLookup.length){o._revLookup=[];for(let e=0,t=o._lookup.length;e<t;e++)o._revLookup[o._lookup.charCodeAt(e)]=e;o._revLookup["-".charCodeAt(0)]=62,o._revLookup["_".charCodeAt(0)]=63}}static _getLengths(e){const t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");let r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}static _byteLength(e,t){return 3*(e+t)/4-t}static _tripletToBase64(e){return o._lookup[e>>18&63]+o._lookup[e>>12&63]+o._lookup[e>>6&63]+o._lookup[63&e]}static _encodeChunk(e,t,r){const n=[];for(let i=t;i<r;i+=3){const t=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]);n.push(o._tripletToBase64(t))}return n.join("")}}o._lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o._revLookup=[],function(e){e[e.UINT8_ARRAY=0]="UINT8_ARRAY"}(n||(n={}));class a{static stringify(e){return JSON.stringify(e,a._jsonifyType)}static parse(e){return JSON.parse(e,a._parseType)}static _parseType(e,t){if(t&&t.hasOwnProperty&&t.hasOwnProperty(a.TYPE_SYMBOL)&&t.hasOwnProperty(a.VALUE_SYMBOL))switch(t[a.TYPE_SYMBOL]){case n.UINT8_ARRAY:return o.decode(t[a.VALUE_SYMBOL])}return t}static _jsonifyType(e,t){return t instanceof Uint8Array?a._typedObject(n.UINT8_ARRAY,o.encode(t)):t}static _typedObject(e,t){const r={};return r[a.TYPE_SYMBOL]=e,r[a.VALUE_SYMBOL]=t,r}}a.TYPE_SYMBOL="__",a.VALUE_SYMBOL="v";class c{static generateRandomId(){const e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}}!function(e){e.OK="ok",e.ERROR="error"}(i||(i={}));const u="<postMessage>";class h{constructor(e=!0){this._store=e?window.sessionStorage:null,this._validIds=new Map,e&&this._restoreIds()}static _decodeIds(e){const t=a.parse(e),r=new Map;for(const e of Object.keys(t)){const n=parseInt(e,10);r.set(isNaN(n)?e:n,t[e])}return r}has(e){return this._validIds.has(e)}getCommand(e){const t=this._validIds.get(e);return t?t[0]:null}getState(e){const t=this._validIds.get(e);return t?t[1]:null}add(e,t,r=null){this._validIds.set(e,[t,r]),this._storeIds()}remove(e){this._validIds.delete(e),this._storeIds()}clear(){this._validIds.clear(),this._store&&this._store.removeItem(h.KEY)}_encodeIds(){const e=Object.create(null);for(const[t,r]of this._validIds)e[t]=r;return a.stringify(e)}_restoreIds(){const e=this._store.getItem(h.KEY);e&&(this._validIds=h._decodeIds(e))}_storeIds(){this._store&&this._store.setItem(h.KEY,this._encodeIds())}}h.KEY="rpcRequests";class l{static receiveRedirectCommand(e){const t=new URL(e.href);if(!document.referrer)return null;const r=new URL(document.referrer),n=new URLSearchParams(t.search),i=new URLSearchParams(t.hash.substring(1));if(!i.has("id"))return null;const s=parseInt(i.get("id"),10);if(i.delete("id"),n.set(l.URL_SEARCHPARAM_NAME,s.toString()),!i.has("command"))return null;const o=i.get("command");if(i.delete("command"),!i.has("returnURL"))return null;const c=i.get("returnURL");i.delete("returnURL");const h=c===u&&(window.opener||window.parent);if(!h&&new URL(c).origin!==r.origin)return null;let f=[];if(i.has("args"))try{f=a.parse(i.get("args"))}catch(e){}return f=Array.isArray(f)?f:[],i.delete("args"),t.search=n.toString(),this._setUrlFragment(t,i),history.replaceState(history.state,"",t.href),{origin:r.origin,data:{id:s,command:o,args:f},returnURL:c,source:h?window.opener||window.parent:null}}static receiveRedirectResponse(e){const t=new URL(e.href);if(!document.referrer)return null;const r=new URL(document.referrer),n=new URLSearchParams(t.search),s=new URLSearchParams(t.hash.substring(1));if(!s.has("id"))return null;const o=parseInt(s.get("id"),10);if(s.delete("id"),n.set(l.URL_SEARCHPARAM_NAME,o.toString()),!s.has("status"))return null;const c=s.get("status")===i.OK?i.OK:i.ERROR;if(s.delete("status"),!s.has("result"))return null;const u=a.parse(s.get("result"));return s.delete("result"),t.search=n.toString(),this._setUrlFragment(t,s),history.replaceState(history.state,"",t.href),{origin:r.origin,data:{id:o,status:c,result:u}}}static prepareRedirectReply(e,t,r){const n=new URL(e.returnURL),i=new URLSearchParams(n.hash.substring(1));return i.set("id",e.id.toString()),i.set("status",t),i.set("result",a.stringify(r)),n.hash=i.toString(),n.href}static prepareRedirectInvocation(e,t,r,n,i){const s=new URL(e),o=new URLSearchParams(s.hash.substring(1));return o.set("id",t.toString()),o.set("returnURL",r),o.set("command",n),Array.isArray(i)&&o.set("args",a.stringify(i)),s.hash=o.toString(),s.href}static _setUrlFragment(e,t){t.toString().endsWith("=")?e.hash=t.toString().slice(0,-1):e.hash=t.toString()}}l.URL_SEARCHPARAM_NAME="rpcId";class f{constructor(e,t=!1){this._allowedOrigin=e,this._waitingRequests=new h(t),this._responseHandlers=new Map,this._preserveRequests=!1}onResponse(e,t,r){this._responseHandlers.set(e,{resolve:t,reject:r})}_receive(e){if(!e.data||!e.data.status||!e.data.id||"*"!==this._allowedOrigin&&e.origin!==this._allowedOrigin)return!1;const t=e.data,r=this._getCallback(t.id),n=this._waitingRequests.getState(t.id);if(r){if(this._preserveRequests||(this._waitingRequests.remove(t.id),this._responseHandlers.delete(t.id)),console.debug("RpcClient RECEIVE",t),t.status===i.OK)r.resolve(t.result,t.id,n);else if(t.status===i.ERROR){const e=new Error(t.result.message);t.result.stack&&(e.stack=t.result.stack),t.result.name&&(e.name=t.result.name),r.reject(e,t.id,n)}return!0}return console.warn("Unknown RPC response:",t),!1}_getCallback(e){if(this._responseHandlers.has(e))return this._responseHandlers.get(e);{const t=this._waitingRequests.getCommand(e);if(t)return this._responseHandlers.get(t)}}}class d extends f{constructor(e,t){super(t),this._serverCloseCheckInterval=-1,this._target=e,this._connectionState=0,this._receiveListener=this._receive.bind(this)}async init(){2!==this._connectionState&&(await this._connect(),window.addEventListener("message",this._receiveListener),-1===this._serverCloseCheckInterval&&(this._serverCloseCheckInterval=window.setInterval(()=>this._checkIfServerClosed(),300)))}async call(e,...t){return this._call({command:e,args:t,id:c.generateRandomId()})}close(){this._connectionState=0,window.removeEventListener("message",this._receiveListener),window.clearInterval(this._serverCloseCheckInterval),this._serverCloseCheckInterval=-1;for(const[e,{reject:t}]of this._responseHandlers){const r=this._waitingRequests.getState(e);t("Connection was closed","number"==typeof e?e:void 0,r)}this._waitingRequests.clear(),this._responseHandlers.clear(),this._target&&this._target.closed&&(this._target=null)}_receive(e){return e.source===this._target&&super._receive(e)}async _call(e){if(!this._target||this._target.closed)throw new Error("Connection was closed.");if(2!==this._connectionState)throw new Error("Client is not connected, call init first");return new Promise((t,r)=>{this._responseHandlers.set(e.id,{resolve:t,reject:r}),this._waitingRequests.add(e.id,e.command),console.debug("RpcClient REQUEST",e.command,e.args),this._target.postMessage(e,this._allowedOrigin)})}_connect(){if(2!==this._connectionState)return this._connectionState=1,new Promise((e,t)=>{const r=t=>{const{source:n,origin:s,data:o}=t;if(n===this._target&&o.status===i.OK&&"pong"===o.result&&1===o.id&&("*"===this._allowedOrigin||s===this._allowedOrigin)){if(o.result.stack){const e=new Error(o.result.message);e.stack=o.result.stack,o.result.name&&(e.name=o.result.name),console.error(e)}window.removeEventListener("message",r),this._connectionState=2,console.log("RpcClient: Connection established"),e(!0)}};window.addEventListener("message",r);const n=()=>{if(2!==this._connectionState){if(0===this._connectionState||this._checkIfServerClosed())return window.removeEventListener("message",r),void t(new Error("Connection was closed"));try{this._target.postMessage({command:"ping",id:1},this._allowedOrigin)}catch(e){console.error(`postMessage failed: ${e}`)}window.setTimeout(n,100)}};window.setTimeout(n,100)})}_checkIfServerClosed(){return!(this._target&&!this._target.closed)&&(this.close(),!0)}}class p extends f{constructor(e,t,r=!0){super(t,!0),this._target=e,this._preserveRequests=r}async init(){const e=l.receiveRedirectResponse(window.location);if(e)return void this._receive(e);if(this._rejectOnBack())return;const t=new URLSearchParams(window.location.search);if(t.has(l.URL_SEARCHPARAM_NAME)){const e=window.sessionStorage.getItem(`response-${t.get(l.URL_SEARCHPARAM_NAME)}`);if(e)return void this._receive(a.parse(e),!1)}}close(){}call(e,t,r=!1,...n){this.callAndSaveLocalState(e,null,t,r,...n)}callAndSaveLocalState(e,t,r,n=!1,...i){const s=c.generateRandomId(),o=l.prepareRedirectInvocation(this._target,s,e,r,i);this._waitingRequests.add(s,r,t),n&&history.replaceState(Object.assign({},history.state,{rpcBackRejectionId:s}),""),console.debug("RpcClient REQUEST",r,i),window.location.href=o}_receive(e,t=!0){const r=super._receive(e);return r&&t&&window.sessionStorage.setItem(`response-${e.data.id}`,a.stringify(e)),r}_rejectOnBack(){if(!history.state||!history.state.rpcBackRejectionId)return!1;const e=history.state.rpcBackRejectionId;history.replaceState(Object.assign({},history.state,{rpcBackRejectionId:null}),"");const t=this._getCallback(e),r=this._waitingRequests.getState(e);if(t){this._preserveRequests||(this._waitingRequests.remove(e),this._responseHandlers.delete(e)),console.debug("RpcClient BACK");const n=new Error("Request aborted");return t.reject(n,e,r),!0}return!1}}class A{constructor(e){this._type=e}static getAllowedOrigin(e){return new URL(e).origin}async request(e,t,r){throw new Error("Not implemented")}}var g,y;!function(e){e[e.REDIRECT=0]="REDIRECT",e[e.POPUP=1]="POPUP",e[e.IFRAME=2]="IFRAME"}(g||(g={}));class m extends A{static withLocalState(e){return new m(void 0,e)}constructor(e,t){super(g.REDIRECT);const r=window.location;if(this._returnUrl=e||`${r.origin}${r.pathname}`,this._localState=t||{},void 0!==this._localState.__command)throw new Error("Invalid localState: Property '__command' is reserved")}async request(e,t,r){const n=A.getAllowedOrigin(e),i=new p(e,n);await i.init();const s=Object.assign({},this._localState,{__command:t});i.callAndSaveLocalState(this._returnUrl,s,t,!0,...r)}}class _ extends A{constructor(e=_.DEFAULT_OPTIONS){super(g.POPUP),this._options=e}async request(e,t,r){const n=A.getAllowedOrigin(e),i=this.createPopup(e),s=new d(i,n);await s.init();try{return await s.call(t,...r)}catch(e){throw e}finally{s.close(),i.close()}}createPopup(e){const t=window.open(e,"NimiqAccounts",this._options);if(!t)throw new Error("Failed to open popup");return t}}_.DEFAULT_OPTIONS="";class b extends A{constructor(){super(g.IFRAME),this._iframe=null,this._client=null}async request(e,t,r){if(this._iframe&&this._iframe.src!==`${e}${b.IFRAME_PATH_SUFFIX}`)throw new Error("Hub iframe is already opened with another endpoint");const n=A.getAllowedOrigin(e);if(this._iframe||(this._iframe=await this.createIFrame(e)),!this._iframe.contentWindow)throw new Error(`IFrame contentWindow is ${typeof this._iframe.contentWindow}`);return this._client||(this._client=new d(this._iframe.contentWindow,n),await this._client.init()),await this._client.call(t,...r)}async createIFrame(e){return new Promise((t,r)=>{const n=document.createElement("iframe");n.name="NimiqAccountsIFrame",n.style.display="none",document.body.appendChild(n),n.src=`${e}${b.IFRAME_PATH_SUFFIX}`,n.onload=()=>t(n),n.onerror=r})}}b.IFRAME_PATH_SUFFIX="/iframe.html",function(e){e.LIST="list",e.MIGRATE="migrate",e.CHECKOUT="checkout",e.SIGN_MESSAGE="sign-message",e.SIGN_TRANSACTION="sign-transaction",e.ONBOARD="onboard",e.SIGNUP="signup",e.LOGIN="login",e.EXPORT="export",e.CHANGE_PASSWORD="change-password",e.LOGOUT="logout",e.ADD_ADDRESS="add-address",e.RENAME="rename",e.CHOOSE_ADDRESS="choose-address"}(y||(y={}));class w{constructor(e=w.DEFAULT_ENDPOINT,t){this._endpoint=e,this._defaultBehavior=t||new _(`left=${window.innerWidth/2-400},top=75,width=800,height=850,location=yes,dependent=yes`),this._iframeBehavior=new b,this._redirectClient=new p("",A.getAllowedOrigin(this._endpoint))}static get DEFAULT_ENDPOINT(){const e=location.origin.split(".");switch(e.shift(),e.join(".")){case"nimiq.com":return"https://hub.nimiq.com";case"nimiq-testnet.com":return"https://hub.nimiq-testnet.com";default:return"http://localhost:8080"}}checkRedirectResponse(){return this._redirectClient.init()}on(e,t,r){this._redirectClient.onResponse(e,(e,r,n)=>t(e,n),(e,t,n)=>{r&&r(e,n)})}checkout(e,t=this._defaultBehavior){return this._request(t,y.CHECKOUT,[e])}chooseAddress(e,t=this._defaultBehavior){return this._request(t,y.CHOOSE_ADDRESS,[e])}signTransaction(e,t=this._defaultBehavior){return this._request(t,y.SIGN_TRANSACTION,[e])}signMessage(e,t=this._defaultBehavior){return this._request(t,y.SIGN_MESSAGE,[e])}onboard(e,t=this._defaultBehavior){return this._request(t,y.ONBOARD,[e])}signup(e,t=this._defaultBehavior){return this._request(t,y.SIGNUP,[e])}login(e,t=this._defaultBehavior){return this._request(t,y.LOGIN,[e])}logout(e,t=this._defaultBehavior){return this._request(t,y.LOGOUT,[e])}export(e,t=this._defaultBehavior){return this._request(t,y.EXPORT,[e])}changePassword(e,t=this._defaultBehavior){return this._request(t,y.CHANGE_PASSWORD,[e])}addAddress(e,t=this._defaultBehavior){return this._request(t,y.ADD_ADDRESS,[e])}rename(e,t=this._defaultBehavior){return this._request(t,y.RENAME,[e])}migrate(e=this._defaultBehavior){return this._request(e,y.MIGRATE,[{appName:"Account list"}])}list(e=this._iframeBehavior){return this._request(e,y.LIST,[])}_request(e,t,r){return e.request(this._endpoint,t,r)}}w.RequestType=y,w.RedirectRequestBehavior=m,w.MSG_PREFIX="Nimiq Signed Message:\n";var v=w;r.d(t,"a",(function(){return S}));const E=new TextEncoder;class S extends s.a{constructor(e){super(e);const{hubUrl:t,live:r}=e;this.hubApi=new v(t||`https://hub.nimiq${r?"":"-testnet"}.com`)}async checkout(e,t){const r=super.sumUp(e),n=await this.order(e,t);return{products:e,sum:r,orderId:n,txHash:await this.pay(n,r)}}async pay(e,t){const{name:r,address:n,fee:i,logo:s}=this.configuration,o={appName:r,recipient:n,value:1e5*t,extraData:E.encode(e),fee:i,shopLogoUrl:s};return await this.hubApi.checkout(o)}async order(e,t){const r={products:e,meta:t,timestamp:(new Date).getTime()};return await this.storage.store(r,this.configuration.publicKey)}}},
/*!****************************!*\
  !*** multi ./src/index.ts ***!
  \****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! /home/svub/code/nimiq/nimiq-popup-shop/src/index.ts */1247)},
/*!***************************************!*\
  !*** ./src/polyfills/custom-event.ts ***!
  \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}}()},
/*!***************************************************!*\
  !*** ./node_modules/core-js/es/array/includes.js ***!
  \***************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../../modules/es.array.includes */494);var n=r(/*! ../../internals/entry-unbind */520);e.exports=n("Array","includes")},
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.includes.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ../internals/export */495),i=r(/*! ../internals/array-includes */274).includes,s=r(/*! ../internals/add-to-unscopables */513);n({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},
/*!**************************************************!*\
  !*** ./node_modules/core-js/internals/export.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/global */40),i=r(/*! ../internals/object-get-own-property-descriptor */264).f,s=r(/*! ../internals/create-non-enumerable-property */96),o=r(/*! ../internals/redefine */500),a=r(/*! ../internals/set-global */178),c=r(/*! ../internals/copy-constructor-properties */505),u=r(/*! ../internals/is-forced */512);e.exports=function(e,t){var r,h,l,f,d,p=e.target,A=e.global,g=e.stat;if(r=A?n:g?n[p]||a(p,{}):(n[p]||{}).prototype)for(h in t){if(f=t[h],l=e.noTargetGet?(d=i(r,h))&&d.value:r[h],!u(A?h:p+(g?".":"#")+h,e.forced)&&void 0!==l){if(typeof f==typeof l)continue;c(f,l)}(e.sham||l&&l.sham)&&s(f,"sham",!0),o(r,h,f,e)}}},
/*!*************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-property-is-enumerable.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!n.call({1:2},1);t.f=s?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/indexed-object.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/fails */94),i=r(/*! ../internals/classof-raw */498),s="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?s.call(e,""):Object(e)}:Object},
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/classof-raw.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/require-object-coercible.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/redefine.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/global */40),i=r(/*! ../internals/shared */130),s=r(/*! ../internals/create-non-enumerable-property */96),o=r(/*! ../internals/has */95),a=r(/*! ../internals/set-global */178),c=r(/*! ../internals/function-to-string */269),u=r(/*! ../internals/internal-state */503),h=u.get,l=u.enforce,f=String(c).split("toString");i("inspectSource",(function(e){return c.call(e)})),(e.exports=function(e,t,r,i){var c=!!i&&!!i.unsafe,u=!!i&&!!i.enumerable,h=!!i&&!!i.noTargetGet;"function"==typeof r&&("string"!=typeof t||o(r,"name")||s(r,"name",t),l(r).source=f.join("string"==typeof t?t:"")),e!==n?(c?!h&&e[t]&&(u=!0):delete e[t],u?e[t]=r:s(e,t,r)):u?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&h(this).source||c.call(this)}))},
/*!***************************************************!*\
  !*** ./node_modules/core-js/internals/is-pure.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=!1},
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/shared-store.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/global */40),i=r(/*! ../internals/set-global */178),s=n["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=s},
/*!**********************************************************!*\
  !*** ./node_modules/core-js/internals/internal-state.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n,i,s,o=r(/*! ../internals/native-weak-map */504),a=r(/*! ../internals/global */40),c=r(/*! ../internals/is-object */128),u=r(/*! ../internals/create-non-enumerable-property */96),h=r(/*! ../internals/has */95),l=r(/*! ../internals/shared-key */270),f=r(/*! ../internals/hidden-keys */179),d=a.WeakMap;if(o){var p=new d,A=p.get,g=p.has,y=p.set;n=function(e,t){return y.call(p,e,t),t},i=function(e){return A.call(p,e)||{}},s=function(e){return g.call(p,e)}}else{var m=l("state");f[m]=!0,n=function(e,t){return u(e,m,t),t},i=function(e){return h(e,m)?e[m]:{}},s=function(e){return h(e,m)}}e.exports={set:n,get:i,has:s,enforce:function(e){return s(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},
/*!***********************************************************!*\
  !*** ./node_modules/core-js/internals/native-weak-map.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/global */40),i=r(/*! ../internals/function-to-string */269),s=n.WeakMap;e.exports="function"==typeof s&&/native code/.test(i.call(s))},
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/internals/copy-constructor-properties.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/has */95),i=r(/*! ../internals/own-keys */506),s=r(/*! ../internals/object-get-own-property-descriptor */264),o=r(/*! ../internals/object-define-property */177);e.exports=function(e,t){for(var r=i(t),a=o.f,c=s.f,u=0;u<r.length;u++){var h=r[u];n(e,h)||a(e,h,c(t,h))}}},
/*!****************************************************!*\
  !*** ./node_modules/core-js/internals/own-keys.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/get-built-in */272),i=r(/*! ../internals/object-get-own-property-names */508),s=r(/*! ../internals/object-get-own-property-symbols */511),o=r(/*! ../internals/an-object */129);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(o(e)),r=s.f;return r?t.concat(r(e)):t}},
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/path.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ../internals/global */40)},
/*!*************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-names.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/object-keys-internal */273),i=r(/*! ../internals/enum-bug-keys */180).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/to-length.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/to-integer */275),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/to-absolute-index.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/to-integer */275),i=Math.max,s=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):s(r,t)}},
/*!***************************************************************************!*\
  !*** ./node_modules/core-js/internals/object-get-own-property-symbols.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){t.f=Object.getOwnPropertySymbols},
/*!*****************************************************!*\
  !*** ./node_modules/core-js/internals/is-forced.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/fails */94),i=/#|\.prototype\./,s=function(e,t){var r=a[o(e)];return r==u||r!=c&&("function"==typeof t?n(t):!!t)},o=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},
/*!**************************************************************!*\
  !*** ./node_modules/core-js/internals/add-to-unscopables.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/well-known-symbol */514),i=r(/*! ../internals/object-create */516),s=r(/*! ../internals/create-non-enumerable-property */96),o=n("unscopables"),a=Array.prototype;null==a[o]&&s(a,o,i(null)),e.exports=function(e){a[o][e]=!0}},
/*!*************************************************************!*\
  !*** ./node_modules/core-js/internals/well-known-symbol.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/global */40),i=r(/*! ../internals/shared */130),s=r(/*! ../internals/uid */271),o=r(/*! ../internals/native-symbol */515),a=n.Symbol,c=i("wks");e.exports=function(e){return c[e]||(c[e]=o&&a[e]||(o?a:s)("Symbol."+e))}},
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/native-symbol.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/fails */94);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},
/*!*********************************************************!*\
  !*** ./node_modules/core-js/internals/object-create.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/an-object */129),i=r(/*! ../internals/object-define-properties */517),s=r(/*! ../internals/enum-bug-keys */180),o=r(/*! ../internals/hidden-keys */179),a=r(/*! ../internals/html */519),c=r(/*! ../internals/document-create-element */268),u=r(/*! ../internals/shared-key */270)("IE_PROTO"),h=function(){},l=function(){var e,t=c("iframe"),r=s.length;for(t.style.display="none",a.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[s[r]];return l()};e.exports=Object.create||function(e,t){var r;return null!==e?(h.prototype=n(e),r=new h,h.prototype=null,r[u]=e):r=l(),void 0===t?r:i(r,t)},o[u]=!0},
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/object-define-properties.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/descriptors */93),i=r(/*! ../internals/object-define-property */177),s=r(/*! ../internals/an-object */129),o=r(/*! ../internals/object-keys */518);e.exports=n?Object.defineProperties:function(e,t){s(e);for(var r,n=o(t),a=n.length,c=0;a>c;)i.f(e,r=n[c++],t[r]);return e}},
/*!*******************************************************!*\
  !*** ./node_modules/core-js/internals/object-keys.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/object-keys-internal */273),i=r(/*! ../internals/enum-bug-keys */180);e.exports=Object.keys||function(e){return n(e,i)}},
/*!************************************************!*\
  !*** ./node_modules/core-js/internals/html.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/get-built-in */272);e.exports=n("document","documentElement")},
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/entry-unbind.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/global */40),i=r(/*! ../internals/bind-context */521),s=Function.call;e.exports=function(e,t,r){return i(s,n[e].prototype[t],r)}},
/*!********************************************************!*\
  !*** ./node_modules/core-js/internals/bind-context.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ../internals/a-function */522);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},
/*!******************************************************!*\
  !*** ./node_modules/core-js/internals/a-function.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),o=n[0],a=n[1],c=new s(function(e,t,r){return 3*(t+r)/4-r}(0,o,a)),h=0,l=a>0?o-4:o;for(r=0;r<l;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[h++]=t>>16&255,c[h++]=t>>8&255,c[h++]=255&t;2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[h++]=255&t);1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[h++]=t>>8&255,c[h++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,s=[],o=0,a=r-i;o<a;o+=16383)s.push(h(e,o,o+16383>a?a:o+16383));1===i?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function h(e,t,r){for(var i,s,o=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},
/*!**********************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/isarray/index.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},
/*!******************************************************!*\
  !*** ./node_modules/ipfs-block-service/src/index.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{map:n}=r(/*! streaming-iterables */526);e.exports=class{constructor(e){this._repo=e,this._bitswap=null}setExchange(e){this._bitswap=e}unsetExchange(){this._bitswap=null}hasExchange(){return null!=this._bitswap}put(e){return this.hasExchange()?this._bitswap.put(e):this._repo.blocks.put(e)}putMany(e){return this.hasExchange()?this._bitswap.putMany(e):this._repo.blocks.putMany(e)}get(e){return this.hasExchange()?this._bitswap.get(e):this._repo.blocks.get(e)}getMany(e){if(!Array.isArray(e))throw new Error("first arg must be an array of cids");if(this.hasExchange())return this._bitswap.getMany(e);return n(e=>this._repo.blocks.get(e))(e)}delete(e){return this._repo.blocks.delete(e)}}},
/*!************************************************************!*\
  !*** ./node_modules/streaming-iterables/dist/index-esm.js ***!
  \************************************************************/
/*! exports provided: batch, buffer, collect, concat, consume, filter, flatMap, flatten, flatTransform, fromStream, getIterator, map, merge, parallelFlatMap, parallelMap, parallelMerge, pipeline, reduce, take, tap, time, transform, writeToStream */
/*! all exports used */
/*! ModuleConcatenation bailout: Module uses injected variables (process) */function(e,t,r){"use strict";r.r(t),function(e){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function n(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function i(e){return this instanceof i?(this.v=e,this):new i(e)}function s(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){s[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=s[e](t)).value instanceof i?Promise.resolve(r.value.v).then(u,h):l(o[0][2],r)}catch(e){l(o[0][3],e)}var r}function u(e){c("next",e)}function h(e){c("throw",e)}function l(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}}function o(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,s){t[n]=e[n]?function(t){return(r=!r)?{value:i(e[n](t)),done:"return"===n}:s?s(t):t}:s}}function a(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=n(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}}function c(e,t){return void 0===t?t=>c(e,t):t[Symbol.asyncIterator]?function(e,t){return s(this,arguments,(function*(){var r,n;let s=[];try{for(var o,c=a(t);!(o=yield i(c.next())).done;){const t=o.value;s.push(t),s.length===e&&(yield yield i(s),s=[])}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=c.return)&&(yield i(n.call(c)))}finally{if(r)throw r.error}}s.length>0&&(yield yield i(s))}))}(e,t):function*(e,t){let r=[];for(const n of t)r.push(n),r.length===e&&(yield r,r=[]);r.length>0&&(yield r)}(e,t)}function u(e){if("function"==typeof e.next)return e;if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function h(){let e,t;return{promise:new Promise((r,n)=>{t=r,e=n}),reject:e,resolve:t}}function l(e,t){const r=u(t),n=[],i=[];let s=!1,o=!1;async function a(){if(!o&&!(s||n.length>=e)){s=!0;try{const{done:e,value:t}=await r.next();e?o=!0:n.push({value:t})}catch(e){o=!0,n.push({error:e})}!function(){for(;i.length>0&&n.length>0;){const e=i.shift(),{error:t,value:r}=n.shift();t?e.reject(t):e.resolve({done:!1,value:r})}for(;i.length>0&&o;){const{resolve:e}=i.shift();e({done:!0,value:void 0})}}(),s=!1,a()}}const c={next:async function(){if(n.length>0){const{error:e,value:t}=n.shift();if(e)throw e;return a(),{done:!1,value:t}}if(o)return{done:!0,value:void 0};const e=h();return i.push(e),a(),e.promise},[Symbol.asyncIterator]:()=>c};return c}function f(e,t){return void 0===t?t=>f(e,t):t[Symbol.asyncIterator]?l(e,t):function*(e,t){const r=[];let n;try{for(const n of t)r.push(n),r.length<=e||(yield r.shift())}catch(e){n=e}for(const e of r)yield e;if(n)throw n}(e,t)}function d(e){return e[Symbol.asyncIterator]?async function(e){var t,r;const n=[];try{for(var i,s=a(e);!(i=await s.next()).done;){const e=i.value;n.push(e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=s.return)&&await r.call(s)}finally{if(t)throw t.error}}return n}(e):Array.from(e)}function p(...e){return e.find(e=>void 0!==e[Symbol.asyncIterator])?function(e){return s(this,arguments,(function*(){var t,r;try{for(var n,s=a(e);!(n=yield i(s.next())).done;){const e=n.value;yield i(yield*o(a(e)))}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=s.return)&&(yield i(r.call(s)))}finally{if(t)throw t.error}}}))}(e):function*(e){for(const t of e)yield*t}(e)}function A(e){if(e[Symbol.asyncIterator])return async function(e){var t,r;try{for(var n,i=a(e);!(n=await i.next()).done;){n.value}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&await r.call(i)}finally{if(t)throw t.error}}}(e)}function g(e,t){return s(this,arguments,(function*(){var r,n;try{for(var s,o=a(t);!(s=yield i(o.next())).done;){const t=s.value;(yield i(e(t)))&&(yield yield i(t))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&(yield i(n.call(o)))}finally{if(r)throw r.error}}}))}function y(e,t){return void 0===t?t=>g(e,t):g(e,t)}function m(e){return s(this,arguments,(function*(){var t,r;try{for(var n,s=a(e);!(n=yield i(s.next())).done;){const e=n.value;e&&"string"!=typeof e&&(e[Symbol.iterator]||e[Symbol.asyncIterator])?yield i(yield*o(a(m(e)))):yield yield i(e)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=s.return)&&(yield i(r.call(s)))}finally{if(t)throw t.error}}}))}function _(e,t){return s(this,arguments,(function*(){var r,n;try{for(var s,o=a(t);!(s=yield i(o.next())).done;){const t=s.value;yield yield i(yield i(e(t)))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&(yield i(n.call(o)))}finally{if(r)throw r.error}}}))}function b(e,t){return void 0===t?t=>_(e,t):_(e,t)}function w(e,t){return void 0===t?t=>w(e,t):y(e=>null!=e,m(b(e,t)))}function v(e,t,r){const n=u(r),i=[],s=[];let o=!1,c=!1,l=0,f=null;function d(){for(;s.length>0&&i.length>0;){const{resolve:e}=s.shift();e({done:!1,value:i.shift()})}for(;s.length>0&&0===l&&o;){const{resolve:e,reject:t}=s.shift();f?(t(f),f=null):e({done:!0,value:void 0})}}async function p(){if(o)d();else if(!(c||l+i.length>=e)){c=!0,l++;try{const{done:e,value:r}=await n.next();e?(o=!0,l--,d()):async function(e){var r,n;try{const o=await t(e);if(o&&o[Symbol.asyncIterator])try{for(var s,c=a(o);!(s=await c.next()).done;){const e=s.value;i.push(e)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=c.return)&&await n.call(c)}finally{if(r)throw r.error}}else i.push(o)}catch(e){o=!0,f=e}l--,d(),p()}(r)}catch(e){o=!0,l--,f=e,d()}c=!1,p()}}const A={next:async function(){if(0===i.length){const e=h();return s.push(e),p(),e.promise}const e=i.shift();return p(),{done:!1,value:e}},[Symbol.asyncIterator]:()=>A};return A}function E(e,t,r){return void 0===t?(t,r)=>r?E(e,t,r):E(e,t):void 0===r?r=>E(e,t,r):y(e=>null!=e,m(v(e,t,r)))}async function S(e){return new Promise(t=>{e.once("readable",()=>{t()})})}function C(e){return"function"==typeof e[Symbol.asyncIterator]?e:function(e){return s(this,arguments,(function*(){for(;;){const t=e.read();if(null===t){if(e._readableState.ended)return yield i(void 0);yield i(S(e))}else yield yield i(t)}}))}(e)}function k(...e){return s(this,arguments,(function*(){const t=new Set(e.map(u));for(;t.size>0;)for(const e of t){const r=yield i(e.next());r.done?t.delete(e):yield yield i(r.value)}}))}function I(e,...t){let r=e();for(const e of t)r=e(r);return r}function T(e,t,r){return void 0===t?(t,r)=>T(e,t,r):void 0===r?r=>T(e,t,r):function(e,t,r){return s(this,arguments,(function*(){let n=null;const o=u(I(()=>r,f(1),(function(e){return s(this,arguments,(function*(){var t,r;try{for(var s,o=a(e);!(s=yield i(o.next())).done;){const e=s.value;if(n)return yield i(void 0);yield yield i(e)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&(yield i(r.call(o)))}finally{if(t)throw t.error}}}))}),b(e=>({value:t(e)})),f(e)));for(;;){const{value:e,done:t}=yield i(o.next());if(t)break;try{const t=yield i(e.value);n||(yield yield i(t))}catch(e){n=e}}if(n)throw n}))}(e,t,r)}function R(e,t,r){return void 0===t?(t,r)=>r?R(e,t,r):R(e,t):void 0===r?r=>R(e,t,r):y(e=>null!=e,m(T(e,t,r)))}function N(...e){return s(this,arguments,(function*(){const t=e.map(u),r=new Set,n=new Map,s=e=>{const t=Promise.resolve(e.next()).then(async({done:i,value:s})=>{i||n.set(e,s),r.delete(t)});r.add(t)};for(const e of t)s(e);for(;;){if(0===r.size)return yield i(void 0);yield i(Promise.race(r));for(const[e,t]of n)n.delete(e),yield yield i(t),s(e)}}))}function B(e,t,r){return void 0===t?(t,r)=>r?B(e,t,r):B(e,t):void 0===r?r=>B(e,t,r):async function(e,t,r){var n,i;let s=t;try{for(var o,c=a(r);!(o=await c.next()).done;){const t=o.value;s=await e(s,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}return s}(e,t,r)}function O(e,t){return void 0===t?t=>O(e,t):t[Symbol.asyncIterator]?function(e,t){return s(this,arguments,(function*(){var r,n;let s=0;try{for(var o,c=a(t);!(o=yield i(c.next())).done;){const t=o.value;if(yield yield i(yield i(t)),++s>=e)return yield i(void 0)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=c.return)&&(yield i(n.call(c)))}finally{if(r)throw r.error}}}))}(e,t):function*(e,t){let r=0;for(const n of t)if(yield n,++r>=e)return}(e,t)}function P(e,t){return s(this,arguments,(function*(){var r,n;try{for(var s,o=a(t);!(s=yield i(o.next())).done;){const t=s.value;yield i(e(t)),yield yield i(t)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&(yield i(n.call(o)))}finally{if(r)throw r.error}}}))}function x(e,t){return void 0===t?t=>P(e,t):P(e,t)}function L(e,t){let r=e[0]+t[0],n=e[1]+t[1];if(n>=1e9){const e=n%1e9;r+=(n-e)/1e9,n=e}return[r,n]}function D(t={},r){return void 0===r?e=>D(t,e):void 0!==r[Symbol.asyncIterator]?function(t,r){return s(this,arguments,(function*(){const n=r[Symbol.asyncIterator]();let s=[0,0];for(;;){const r=e.hrtime(),{value:o,done:a}=yield i(n.next()),c=e.hrtime(r);if(s=L(s,c),t.progress&&t.progress(c,s),a)return t.total&&t.total(s),yield i(o);yield yield i(o)}}))}(t,r):function*(t,r){const n=r[Symbol.iterator]();let i=[0,0];for(;;){const r=e.hrtime(),{value:s,done:o}=n.next(),a=e.hrtime(r);if(i=L(i,a),t.progress&&t.progress(a,i),o)return t.total&&t.total(i),s;yield s}}(t,r)}function M(e,t,r){const n=u(r),i=[],s=[];let o=!1,a=!1,c=0,l=null;function f(){for(;s.length>0&&i.length>0;){const{resolve:e}=s.shift();e({done:!1,value:i.shift()})}for(;s.length>0&&0===c&&o;){const{resolve:e,reject:t}=s.shift();l?(t(l),l=null):e({done:!0,value:void 0})}}async function d(){if(o)f();else if(!(a||c+i.length>=e)){a=!0,c++;try{const{done:e,value:r}=await n.next();e?(o=!0,c--,f()):async function(e){try{const r=await t(e);i.push(r)}catch(e){o=!0,l=e}c--,f(),d()}(r)}catch(e){o=!0,c--,l=e,f()}a=!1,d()}}const p={next:async function(){if(0===i.length){const e=h();return s.push(e),d(),e.promise}const e=i.shift();return d(),{done:!1,value:e}},[Symbol.asyncIterator]:()=>p};return p}function U(e,t,r){return void 0===t?(t,r)=>r?U(e,t,r):U(e,t):void 0===r?r=>U(e,t,r):M(e,t,r)}function K(e,t){return new Promise(r=>{t.once(e,r)})}async function F(e,t){var r,n;let i,s;const o=new Promise((t,r)=>{i=e=>{s=e,r(e)},e.once("error",i)});try{for(var c,u=a(t);!(c=await u.next()).done;){const t=c.value;if(!1===e.write(t)&&await Promise.race([o,K("drain",e)]),s)return o}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=u.return)&&await n.call(u)}finally{if(r)throw r.error}}if(e.removeListener("error",i),s)return o}function z(e,t){return void 0===t?t=>F(e,t):F(e,t)}r.d(t,"batch",(function(){return c})),r.d(t,"buffer",(function(){return f})),r.d(t,"collect",(function(){return d})),r.d(t,"concat",(function(){return p})),r.d(t,"consume",(function(){return A})),r.d(t,"filter",(function(){return y})),r.d(t,"flatMap",(function(){return w})),r.d(t,"flatten",(function(){return m})),r.d(t,"flatTransform",(function(){return E})),r.d(t,"fromStream",(function(){return C})),r.d(t,"getIterator",(function(){return u})),r.d(t,"map",(function(){return b})),r.d(t,"merge",(function(){return k})),r.d(t,"parallelFlatMap",(function(){return R})),r.d(t,"parallelMap",(function(){return T})),r.d(t,"parallelMerge",(function(){return N})),r.d(t,"pipeline",(function(){return I})),r.d(t,"reduce",(function(){return B})),r.d(t,"take",(function(){return O})),r.d(t,"tap",(function(){return x})),r.d(t,"time",(function(){return D})),r.d(t,"transform",(function(){return U})),r.d(t,"writeToStream",(function(){return z})),void 0===Symbol.asyncIterator&&(Symbol.asyncIterator=Symbol.for("asyncIterator"))}.call(this,r(/*! ./../../process/browser.js */2))},
/*!****************************************!*\
  !*** ./node_modules/ipld/src/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ipfs-block */97),i=r(/*! cids */4),s=r(/*! merge-options */543),o=r(/*! ipld-dag-cbor */280),a=r(/*! ipld-dag-pb */29),c=r(/*! ipld-raw */297),u=r(/*! multicodec */27),h=r(/*! typical */577),{extendIterator:l}=r(/*! ./util */578);class f{constructor(e){const t=s(f.defaultOptions,e);if(!t.blockService)throw new Error("Missing blockservice");this.bs=t.blockService,this.resolvers={},"function"!=typeof t.loadFormat?this.loadFormat=e=>{const t=u.print[e];throw new Error(`No resolver found for codec "${t}"`)}:this.loadFormat=t.loadFormat;for(const e of t.formats)this.addFormat(e)}addFormat(e){const t=e.codec;if(this.resolvers[e.format]){const e=u.print[t];throw new Error(`Resolver already exists for codec "${e}"`)}return this.resolvers[t]=e,this}removeFormat(e){return this.resolvers[e]&&delete this.resolvers[e],this}resolve(e,t){if(!i.isCID(e))throw new Error("`cid` argument must be a CID");if("string"!=typeof t)throw new Error("`path` argument must be a string");const r=async function*(){for(;null!==e;){const r=await this._getFormat(e.codec),n=await this.bs.get(e),s=r.resolver.resolve(n.data,t);t=s.remainderPath;let o=s.value;if(1===Object.keys(o).length&&"/"in o)try{o=new i(o["/"])}catch(e){o=null}e=i.isCID(o)?o:null,yield{remainderPath:t,value:o}}}.bind(this);return l(r())}async get(e){const t=await this.bs.get(e);return(await this._getFormat(t.cid.codec)).util.deserialize(t.data)}getMany(e){if(!h.isIterable(e)||"string"==typeof e||t.isBuffer(e))throw new Error("`cids` must be an iterable of CIDs");const r=async function*(){for await(const t of e)yield this.get(t)}.bind(this);return l(r())}async put(e,t,r){if(void 0===t)throw new Error("`put` requires a format");if("number"!=typeof t)throw new Error("`format` parameter must be number (multicodec)");const i=await this._getFormat(t),o={hashAlg:i.defaultHashAlg,cidVersion:1,onlyHash:!1},a=s(o,r),c={cidVersion:a.cidVersion,hashAlg:a.hashAlg,onlyHash:a.onlyHash},u=i.util.serialize(e),h=await i.util.cid(u,c);if(!a.onlyHash){const e=new n(u,h);await this.bs.put(e)}return h}putMany(e,r,n){if(!h.isIterable(e)||"string"==typeof e||t.isBuffer(e))throw new Error("`nodes` must be an iterable");if(void 0===r)throw new Error("`put` requires a format");if("number"!=typeof r)throw new Error("`format` parameter must be number (multicodec)");let i,o;const a=async function*(){for await(const t of e){if(void 0===i){const e={hashAlg:(o=await this._getFormat(r)).defaultHashAlg,cidVersion:1,onlyHash:!1};i=s(e,n)}yield this.put(t,r,i)}}.bind(this);return l(a())}async remove(e){return this.bs.delete(e)}removeMany(e){if(!h.isIterable(e)||"string"==typeof e||t.isBuffer(e))throw new Error("`cids` must be an iterable of CIDs");const r=async function*(){for await(const t of e)yield this.remove(t)}.bind(this);return l(r())}tree(e,t,r){"object"==typeof t&&(r=t,t=void 0),t=t||"";const n=s({recursive:!1},r),o=async(e,t)=>{const r=(await this._getFormat(e.cid.codec)).resolver.resolve(e.data,t);return i.isCID(r.value)?r.value:null},a=async function*(){const r=[];let i;const s=[{cid:e,basePath:""}];let a;for(;r.length>0||s.length>0;){if(0===r.length&&s.length>0){({cid:e,basePath:a}=s.shift());const t=await this._getFormat(e.codec);i=await this.bs.get(e);const n=t.resolver.tree(i.data);r.push(...n)}const c=r.shift();let u=a+c;n.recursive&&null!==(e=await o(i,c))&&s.push({cid:e,basePath:u+"/"}),u.startsWith(t)&&u.length>t.length&&(t.length>0&&(u=u.slice(t.length+1)),yield u)}}.bind(this);return l(a())}async _getFormat(e){if("string"==typeof e){const t=e.toUpperCase().replace(/-/g,"_");e=u[t]}if(this.resolvers[e])return this.resolvers[e];const t=await this.loadFormat(e);return this.addFormat(t),t}}f.defaultOptions={formats:[o,a,c]},e.exports=f}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************!*\
  !*** ./node_modules/base-x/src/index.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! safe-buffer */6).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");var t=new Uint8Array(256);t.fill(255);for(var r=0;r<e.length;r++){var i=e.charAt(r),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=r}var o=e.length,a=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);var r=0;if(" "!==e[r]){for(var i=0,s=0;e[r]===a;)i++,r++;for(var u=(e.length-r)*c+1>>>0,h=new Uint8Array(u);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var f=0,d=u-1;(0!==l||f<s)&&-1!==d;d--,f++)l+=o*h[d]>>>0,h[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");s=f,r++}if(" "!==e[r]){for(var p=u-s;p!==u&&0===h[p];)p++;var A=n.allocUnsafe(i+(u-p));A.fill(0,0,i);for(var g=i;p!==u;)A[g++]=h[p++];return A}}}return{encode:function(t){if(!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,s=0,c=t.length;s!==c&&0===t[s];)s++,r++;for(var h=(c-s)*u+1>>>0,l=new Uint8Array(h);s!==c;){for(var f=t[s],d=0,p=h-1;(0!==f||d<i)&&-1!==p;p--,d++)f+=256*l[p]>>>0,l[p]=f%o>>>0,f=f/o>>>0;if(0!==f)throw new Error("Non-zero carry");i=d,s++}for(var A=h-i;A!==h&&0===l[A];)A++;for(var g=a.repeat(r);A<h;++A)g+=e.charAt(l[A]);return g},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}},
/*!***************************************************!*\
  !*** ./node_modules/multihashes/src/constants.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.names=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"dbl-sha2-256":86,"sha3-224":23,"sha3-256":22,"sha3-384":21,"sha3-512":20,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,"murmur3-128":34,"murmur3-32":35,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"Skein256-8":45825,"Skein256-16":45826,"Skein256-24":45827,"Skein256-32":45828,"Skein256-40":45829,"Skein256-48":45830,"Skein256-56":45831,"Skein256-64":45832,"Skein256-72":45833,"Skein256-80":45834,"Skein256-88":45835,"Skein256-96":45836,"Skein256-104":45837,"Skein256-112":45838,"Skein256-120":45839,"Skein256-128":45840,"Skein256-136":45841,"Skein256-144":45842,"Skein256-152":45843,"Skein256-160":45844,"Skein256-168":45845,"Skein256-176":45846,"Skein256-184":45847,"Skein256-192":45848,"Skein256-200":45849,"Skein256-208":45850,"Skein256-216":45851,"Skein256-224":45852,"Skein256-232":45853,"Skein256-240":45854,"Skein256-248":45855,"Skein256-256":45856,"Skein512-8":45857,"Skein512-16":45858,"Skein512-24":45859,"Skein512-32":45860,"Skein512-40":45861,"Skein512-48":45862,"Skein512-56":45863,"Skein512-64":45864,"Skein512-72":45865,"Skein512-80":45866,"Skein512-88":45867,"Skein512-96":45868,"Skein512-104":45869,"Skein512-112":45870,"Skein512-120":45871,"Skein512-128":45872,"Skein512-136":45873,"Skein512-144":45874,"Skein512-152":45875,"Skein512-160":45876,"Skein512-168":45877,"Skein512-176":45878,"Skein512-184":45879,"Skein512-192":45880,"Skein512-200":45881,"Skein512-208":45882,"Skein512-216":45883,"Skein512-224":45884,"Skein512-232":45885,"Skein512-240":45886,"Skein512-248":45887,"Skein512-256":45888,"Skein512-264":45889,"Skein512-272":45890,"Skein512-280":45891,"Skein512-288":45892,"Skein512-296":45893,"Skein512-304":45894,"Skein512-312":45895,"Skein512-320":45896,"Skein512-328":45897,"Skein512-336":45898,"Skein512-344":45899,"Skein512-352":45900,"Skein512-360":45901,"Skein512-368":45902,"Skein512-376":45903,"Skein512-384":45904,"Skein512-392":45905,"Skein512-400":45906,"Skein512-408":45907,"Skein512-416":45908,"Skein512-424":45909,"Skein512-432":45910,"Skein512-440":45911,"Skein512-448":45912,"Skein512-456":45913,"Skein512-464":45914,"Skein512-472":45915,"Skein512-480":45916,"Skein512-488":45917,"Skein512-496":45918,"Skein512-504":45919,"Skein512-512":45920,"Skein1024-8":45921,"Skein1024-16":45922,"Skein1024-24":45923,"Skein1024-32":45924,"Skein1024-40":45925,"Skein1024-48":45926,"Skein1024-56":45927,"Skein1024-64":45928,"Skein1024-72":45929,"Skein1024-80":45930,"Skein1024-88":45931,"Skein1024-96":45932,"Skein1024-104":45933,"Skein1024-112":45934,"Skein1024-120":45935,"Skein1024-128":45936,"Skein1024-136":45937,"Skein1024-144":45938,"Skein1024-152":45939,"Skein1024-160":45940,"Skein1024-168":45941,"Skein1024-176":45942,"Skein1024-184":45943,"Skein1024-192":45944,"Skein1024-200":45945,"Skein1024-208":45946,"Skein1024-216":45947,"Skein1024-224":45948,"Skein1024-232":45949,"Skein1024-240":45950,"Skein1024-248":45951,"Skein1024-256":45952,"Skein1024-264":45953,"Skein1024-272":45954,"Skein1024-280":45955,"Skein1024-288":45956,"Skein1024-296":45957,"Skein1024-304":45958,"Skein1024-312":45959,"Skein1024-320":45960,"Skein1024-328":45961,"Skein1024-336":45962,"Skein1024-344":45963,"Skein1024-352":45964,"Skein1024-360":45965,"Skein1024-368":45966,"Skein1024-376":45967,"Skein1024-384":45968,"Skein1024-392":45969,"Skein1024-400":45970,"Skein1024-408":45971,"Skein1024-416":45972,"Skein1024-424":45973,"Skein1024-432":45974,"Skein1024-440":45975,"Skein1024-448":45976,"Skein1024-456":45977,"Skein1024-464":45978,"Skein1024-472":45979,"Skein1024-480":45980,"Skein1024-488":45981,"Skein1024-496":45982,"Skein1024-504":45983,"Skein1024-512":45984,"Skein1024-520":45985,"Skein1024-528":45986,"Skein1024-536":45987,"Skein1024-544":45988,"Skein1024-552":45989,"Skein1024-560":45990,"Skein1024-568":45991,"Skein1024-576":45992,"Skein1024-584":45993,"Skein1024-592":45994,"Skein1024-600":45995,"Skein1024-608":45996,"Skein1024-616":45997,"Skein1024-624":45998,"Skein1024-632":45999,"Skein1024-640":46e3,"Skein1024-648":46001,"Skein1024-656":46002,"Skein1024-664":46003,"Skein1024-672":46004,"Skein1024-680":46005,"Skein1024-688":46006,"Skein1024-696":46007,"Skein1024-704":46008,"Skein1024-712":46009,"Skein1024-720":46010,"Skein1024-728":46011,"Skein1024-736":46012,"Skein1024-744":46013,"Skein1024-752":46014,"Skein1024-760":46015,"Skein1024-768":46016,"Skein1024-776":46017,"Skein1024-784":46018,"Skein1024-792":46019,"Skein1024-800":46020,"Skein1024-808":46021,"Skein1024-816":46022,"Skein1024-824":46023,"Skein1024-832":46024,"Skein1024-840":46025,"Skein1024-848":46026,"Skein1024-856":46027,"Skein1024-864":46028,"Skein1024-872":46029,"Skein1024-880":46030,"Skein1024-888":46031,"Skein1024-896":46032,"Skein1024-904":46033,"Skein1024-912":46034,"Skein1024-920":46035,"Skein1024-928":46036,"Skein1024-936":46037,"Skein1024-944":46038,"Skein1024-952":46039,"Skein1024-960":46040,"Skein1024-968":46041,"Skein1024-976":46042,"Skein1024-984":46043,"Skein1024-992":46044,"Skein1024-1000":46045,"Skein1024-1008":46046,"Skein1024-1016":46047,"Skein1024-1024":46048}),t.codes=Object.freeze({0:"identity",17:"sha1",18:"sha2-256",19:"sha2-512",86:"dbl-sha2-256",23:"sha3-224",22:"sha3-256",21:"sha3-384",20:"sha3-512",24:"shake-128",25:"shake-256",26:"keccak-224",27:"keccak-256",28:"keccak-384",29:"keccak-512",34:"murmur3-128",35:"murmur3-32",45569:"blake2b-8",45570:"blake2b-16",45571:"blake2b-24",45572:"blake2b-32",45573:"blake2b-40",45574:"blake2b-48",45575:"blake2b-56",45576:"blake2b-64",45577:"blake2b-72",45578:"blake2b-80",45579:"blake2b-88",45580:"blake2b-96",45581:"blake2b-104",45582:"blake2b-112",45583:"blake2b-120",45584:"blake2b-128",45585:"blake2b-136",45586:"blake2b-144",45587:"blake2b-152",45588:"blake2b-160",45589:"blake2b-168",45590:"blake2b-176",45591:"blake2b-184",45592:"blake2b-192",45593:"blake2b-200",45594:"blake2b-208",45595:"blake2b-216",45596:"blake2b-224",45597:"blake2b-232",45598:"blake2b-240",45599:"blake2b-248",45600:"blake2b-256",45601:"blake2b-264",45602:"blake2b-272",45603:"blake2b-280",45604:"blake2b-288",45605:"blake2b-296",45606:"blake2b-304",45607:"blake2b-312",45608:"blake2b-320",45609:"blake2b-328",45610:"blake2b-336",45611:"blake2b-344",45612:"blake2b-352",45613:"blake2b-360",45614:"blake2b-368",45615:"blake2b-376",45616:"blake2b-384",45617:"blake2b-392",45618:"blake2b-400",45619:"blake2b-408",45620:"blake2b-416",45621:"blake2b-424",45622:"blake2b-432",45623:"blake2b-440",45624:"blake2b-448",45625:"blake2b-456",45626:"blake2b-464",45627:"blake2b-472",45628:"blake2b-480",45629:"blake2b-488",45630:"blake2b-496",45631:"blake2b-504",45632:"blake2b-512",45633:"blake2s-8",45634:"blake2s-16",45635:"blake2s-24",45636:"blake2s-32",45637:"blake2s-40",45638:"blake2s-48",45639:"blake2s-56",45640:"blake2s-64",45641:"blake2s-72",45642:"blake2s-80",45643:"blake2s-88",45644:"blake2s-96",45645:"blake2s-104",45646:"blake2s-112",45647:"blake2s-120",45648:"blake2s-128",45649:"blake2s-136",45650:"blake2s-144",45651:"blake2s-152",45652:"blake2s-160",45653:"blake2s-168",45654:"blake2s-176",45655:"blake2s-184",45656:"blake2s-192",45657:"blake2s-200",45658:"blake2s-208",45659:"blake2s-216",45660:"blake2s-224",45661:"blake2s-232",45662:"blake2s-240",45663:"blake2s-248",45664:"blake2s-256",45825:"Skein256-8",45826:"Skein256-16",45827:"Skein256-24",45828:"Skein256-32",45829:"Skein256-40",45830:"Skein256-48",45831:"Skein256-56",45832:"Skein256-64",45833:"Skein256-72",45834:"Skein256-80",45835:"Skein256-88",45836:"Skein256-96",45837:"Skein256-104",45838:"Skein256-112",45839:"Skein256-120",45840:"Skein256-128",45841:"Skein256-136",45842:"Skein256-144",45843:"Skein256-152",45844:"Skein256-160",45845:"Skein256-168",45846:"Skein256-176",45847:"Skein256-184",45848:"Skein256-192",45849:"Skein256-200",45850:"Skein256-208",45851:"Skein256-216",45852:"Skein256-224",45853:"Skein256-232",45854:"Skein256-240",45855:"Skein256-248",45856:"Skein256-256",45857:"Skein512-8",45858:"Skein512-16",45859:"Skein512-24",45860:"Skein512-32",45861:"Skein512-40",45862:"Skein512-48",45863:"Skein512-56",45864:"Skein512-64",45865:"Skein512-72",45866:"Skein512-80",45867:"Skein512-88",45868:"Skein512-96",45869:"Skein512-104",45870:"Skein512-112",45871:"Skein512-120",45872:"Skein512-128",45873:"Skein512-136",45874:"Skein512-144",45875:"Skein512-152",45876:"Skein512-160",45877:"Skein512-168",45878:"Skein512-176",45879:"Skein512-184",45880:"Skein512-192",45881:"Skein512-200",45882:"Skein512-208",45883:"Skein512-216",45884:"Skein512-224",45885:"Skein512-232",45886:"Skein512-240",45887:"Skein512-248",45888:"Skein512-256",45889:"Skein512-264",45890:"Skein512-272",45891:"Skein512-280",45892:"Skein512-288",45893:"Skein512-296",45894:"Skein512-304",45895:"Skein512-312",45896:"Skein512-320",45897:"Skein512-328",45898:"Skein512-336",45899:"Skein512-344",45900:"Skein512-352",45901:"Skein512-360",45902:"Skein512-368",45903:"Skein512-376",45904:"Skein512-384",45905:"Skein512-392",45906:"Skein512-400",45907:"Skein512-408",45908:"Skein512-416",45909:"Skein512-424",45910:"Skein512-432",45911:"Skein512-440",45912:"Skein512-448",45913:"Skein512-456",45914:"Skein512-464",45915:"Skein512-472",45916:"Skein512-480",45917:"Skein512-488",45918:"Skein512-496",45919:"Skein512-504",45920:"Skein512-512",45921:"Skein1024-8",45922:"Skein1024-16",45923:"Skein1024-24",45924:"Skein1024-32",45925:"Skein1024-40",45926:"Skein1024-48",45927:"Skein1024-56",45928:"Skein1024-64",45929:"Skein1024-72",45930:"Skein1024-80",45931:"Skein1024-88",45932:"Skein1024-96",45933:"Skein1024-104",45934:"Skein1024-112",45935:"Skein1024-120",45936:"Skein1024-128",45937:"Skein1024-136",45938:"Skein1024-144",45939:"Skein1024-152",45940:"Skein1024-160",45941:"Skein1024-168",45942:"Skein1024-176",45943:"Skein1024-184",45944:"Skein1024-192",45945:"Skein1024-200",45946:"Skein1024-208",45947:"Skein1024-216",45948:"Skein1024-224",45949:"Skein1024-232",45950:"Skein1024-240",45951:"Skein1024-248",45952:"Skein1024-256",45953:"Skein1024-264",45954:"Skein1024-272",45955:"Skein1024-280",45956:"Skein1024-288",45957:"Skein1024-296",45958:"Skein1024-304",45959:"Skein1024-312",45960:"Skein1024-320",45961:"Skein1024-328",45962:"Skein1024-336",45963:"Skein1024-344",45964:"Skein1024-352",45965:"Skein1024-360",45966:"Skein1024-368",45967:"Skein1024-376",45968:"Skein1024-384",45969:"Skein1024-392",45970:"Skein1024-400",45971:"Skein1024-408",45972:"Skein1024-416",45973:"Skein1024-424",45974:"Skein1024-432",45975:"Skein1024-440",45976:"Skein1024-448",45977:"Skein1024-456",45978:"Skein1024-464",45979:"Skein1024-472",45980:"Skein1024-480",45981:"Skein1024-488",45982:"Skein1024-496",45983:"Skein1024-504",45984:"Skein1024-512",45985:"Skein1024-520",45986:"Skein1024-528",45987:"Skein1024-536",45988:"Skein1024-544",45989:"Skein1024-552",45990:"Skein1024-560",45991:"Skein1024-568",45992:"Skein1024-576",45993:"Skein1024-584",45994:"Skein1024-592",45995:"Skein1024-600",45996:"Skein1024-608",45997:"Skein1024-616",45998:"Skein1024-624",45999:"Skein1024-632",46e3:"Skein1024-640",46001:"Skein1024-648",46002:"Skein1024-656",46003:"Skein1024-664",46004:"Skein1024-672",46005:"Skein1024-680",46006:"Skein1024-688",46007:"Skein1024-696",46008:"Skein1024-704",46009:"Skein1024-712",46010:"Skein1024-720",46011:"Skein1024-728",46012:"Skein1024-736",46013:"Skein1024-744",46014:"Skein1024-752",46015:"Skein1024-760",46016:"Skein1024-768",46017:"Skein1024-776",46018:"Skein1024-784",46019:"Skein1024-792",46020:"Skein1024-800",46021:"Skein1024-808",46022:"Skein1024-816",46023:"Skein1024-824",46024:"Skein1024-832",46025:"Skein1024-840",46026:"Skein1024-848",46027:"Skein1024-856",46028:"Skein1024-864",46029:"Skein1024-872",46030:"Skein1024-880",46031:"Skein1024-888",46032:"Skein1024-896",46033:"Skein1024-904",46034:"Skein1024-912",46035:"Skein1024-920",46036:"Skein1024-928",46037:"Skein1024-936",46038:"Skein1024-944",46039:"Skein1024-952",46040:"Skein1024-960",46041:"Skein1024-968",46042:"Skein1024-976",46043:"Skein1024-984",46044:"Skein1024-992",46045:"Skein1024-1000",46046:"Skein1024-1008",46047:"Skein1024-1016",46048:"Skein1024-1024"}),t.defaultLengths=Object.freeze({17:20,18:32,19:64,86:32,23:28,22:32,21:48,20:64,24:32,25:64,26:28,27:32,28:48,29:64,34:32,45569:1,45570:2,45571:3,45572:4,45573:5,45574:6,45575:7,45576:8,45577:9,45578:10,45579:11,45580:12,45581:13,45582:14,45583:15,45584:16,45585:17,45586:18,45587:19,45588:20,45589:21,45590:22,45591:23,45592:24,45593:25,45594:26,45595:27,45596:28,45597:29,45598:30,45599:31,45600:32,45601:33,45602:34,45603:35,45604:36,45605:37,45606:38,45607:39,45608:40,45609:41,45610:42,45611:43,45612:44,45613:45,45614:46,45615:47,45616:48,45617:49,45618:50,45619:51,45620:52,45621:53,45622:54,45623:55,45624:56,45625:57,45626:58,45627:59,45628:60,45629:61,45630:62,45631:63,45632:64,45633:1,45634:2,45635:3,45636:4,45637:5,45638:6,45639:7,45640:8,45641:9,45642:10,45643:11,45644:12,45645:13,45646:14,45647:15,45648:16,45649:17,45650:18,45651:19,45652:20,45653:21,45654:22,45655:23,45656:24,45657:25,45658:26,45659:27,45660:28,45661:29,45662:30,45663:31,45664:32,45825:1,45826:2,45827:3,45828:4,45829:5,45830:6,45831:7,45832:8,45833:9,45834:10,45835:11,45836:12,45837:13,45838:14,45839:15,45840:16,45841:17,45842:18,45843:19,45844:20,45845:21,45846:22,45847:23,45848:24,45849:25,45850:26,45851:27,45852:28,45853:29,45854:30,45855:31,45856:32,45857:1,45858:2,45859:3,45860:4,45861:5,45862:6,45863:7,45864:8,45865:9,45866:10,45867:11,45868:12,45869:13,45870:14,45871:15,45872:16,45873:17,45874:18,45875:19,45876:20,45877:21,45878:22,45879:23,45880:24,45881:25,45882:26,45883:27,45884:28,45885:29,45886:30,45887:31,45888:32,45889:33,45890:34,45891:35,45892:36,45893:37,45894:38,45895:39,45896:40,45897:41,45898:42,45899:43,45900:44,45901:45,45902:46,45903:47,45904:48,45905:49,45906:50,45907:51,45908:52,45909:53,45910:54,45911:55,45912:56,45913:57,45914:58,45915:59,45916:60,45917:61,45918:62,45919:63,45920:64,45921:1,45922:2,45923:3,45924:4,45925:5,45926:6,45927:7,45928:8,45929:9,45930:10,45931:11,45932:12,45933:13,45934:14,45935:15,45936:16,45937:17,45938:18,45939:19,45940:20,45941:21,45942:22,45943:23,45944:24,45945:25,45946:26,45947:27,45948:28,45949:29,45950:30,45951:31,45952:32,45953:33,45954:34,45955:35,45956:36,45957:37,45958:38,45959:39,45960:40,45961:41,45962:42,45963:43,45964:44,45965:45,45966:46,45967:47,45968:48,45969:49,45970:50,45971:51,45972:52,45973:53,45974:54,45975:55,45976:56,45977:57,45978:58,45979:59,45980:60,45981:61,45982:62,45983:63,45984:64,45985:65,45986:66,45987:67,45988:68,45989:69,45990:70,45991:71,45992:72,45993:73,45994:74,45995:75,45996:76,45997:77,45998:78,45999:79,46e3:80,46001:81,46002:82,46003:83,46004:84,46005:85,46006:86,46007:87,46008:88,46009:89,46010:90,46011:91,46012:92,46013:93,46014:94,46015:95,46016:96,46017:97,46018:98,46019:99,46020:100,46021:101,46022:102,46023:103,46024:104,46025:105,46026:106,46027:107,46028:108,46029:109,46030:110,46031:111,46032:112,46033:113,46034:114,46035:115,46036:116,46037:117,46038:118,46039:119,46040:120,46041:121,46042:122,46043:123,46044:124,46045:125,46046:126,46047:127,46048:128})},
/*!***************************************!*\
  !*** ./node_modules/varint/encode.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function e(t,s,o){s=s||[];o=o||0;var a=o;for(;t>=i;)s[o++]=255&t|r,t/=128;for(;t&n;)s[o++]=255&t|r,t>>>=7;s[o]=0|t;e.bytes=o-a+1;return s};var r=128,n=-128,i=Math.pow(2,31)},
/*!***************************************!*\
  !*** ./node_modules/varint/decode.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function e(t,i){var s,o=0,a=(i=i||0,0),c=i,u=t.length;do{if(c>=u)throw e.bytes=0,new RangeError("Could not decode varint");s=t[c++],o+=a<28?(s&n)<<a:(s&n)*Math.pow(2,a),a+=7}while(s>=r);e.bytes=c-i;return o};var r=128,n=127},
/*!***************************************!*\
  !*** ./node_modules/varint/length.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=Math.pow(2,7),n=Math.pow(2,14),i=Math.pow(2,21),s=Math.pow(2,28),o=Math.pow(2,35),a=Math.pow(2,42),c=Math.pow(2,49),u=Math.pow(2,56),h=Math.pow(2,63);e.exports=function(e){return e<r?1:e<n?2:e<i?3:e<s?4:e<o?5:e<a?6:e<c?7:e<u?8:e<h?9:10}},
/*!*************************************************!*\
  !*** ./node_modules/multibase/src/constants.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./base.js */534),i=r(/*! base-x */535),s=r(/*! ./base16 */536),o=r(/*! ./base32 */537),a=r(/*! ./base64 */538),c=[["base1","1","","1"],["base2","0",i,"01"],["base8","7",i,"01234567"],["base10","9",i,"0123456789"],["base16","f",s,"0123456789abcdef"],["base32","b",o,"abcdefghijklmnopqrstuvwxyz234567"],["base32pad","c",o,"abcdefghijklmnopqrstuvwxyz234567="],["base32hex","v",o,"0123456789abcdefghijklmnopqrstuv"],["base32hexpad","t",o,"0123456789abcdefghijklmnopqrstuv="],["base32z","h",o,"ybndrfg8ejkmcpqxot1uwisza345h769"],["base58flickr","Z",i,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base58btc","z",i,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base64","m",a,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",a,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",a,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",a,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],u=c.reduce((e,t)=>(e[t[0]]=new n(t[0],t[1],t[2],t[3]),e),{}),h=c.reduce((e,t)=>(e[t[1]]=u[t[0]],e),{});e.exports={names:u,codes:h}},
/*!********************************************!*\
  !*** ./node_modules/multibase/src/base.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=class{constructor(e,t,r,n){this.name=e,this.code=t,this.alphabet=n,r&&n&&(this.engine=r(n))}encode(e){return this.engine.encode(e)}decode(e){return this.engine.decode(e)}isImplemented(){return this.engine}}},
/*!*************************************************************!*\
  !*** ./node_modules/multibase/node_modules/base-x/index.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer;e.exports=function(e){for(var t={},r=e.length,i=e.charAt(0),s=0;s<e.length;s++){var o=e.charAt(s);if(void 0!==t[o])throw new TypeError(o+" is ambiguous");t[o]=s}function a(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.allocUnsafe(0);for(var s=[0],o=0;o<e.length;o++){var a=t[e[o]];if(void 0===a)return;for(var c=0,u=a;c<s.length;++c)u+=s[c]*r,s[c]=255&u,u>>=8;for(;u>0;)s.push(255&u),u>>=8}for(var h=0;e[h]===i&&h<e.length-1;++h)s.push(0);return n.from(s.reverse())}return{encode:function(t){if(0===t.length)return"";for(var n=[0],s=0;s<t.length;++s){for(var o=0,a=t[s];o<n.length;++o)a+=n[o]<<8,n[o]=a%r,a=a/r|0;for(;a>0;)n.push(a%r),a=a/r|0}for(var c="",u=0;0===t[u]&&u<t.length-1;++u)c+=i;for(var h=n.length-1;h>=0;--h)c+=e[n[h]];return c},decodeUnsafe:a,decode:function(e){var t=a(e);if(t)return t;throw new Error("Non-base"+r+" character")}}}},
/*!**********************************************!*\
  !*** ./node_modules/multibase/src/base16.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){e.exports=function(e){return{encode:e=>"string"==typeof e?t.from(e).toString("hex"):e.toString("hex"),decode(r){for(let t of r)if(e.indexOf(t)<0)throw new Error("invalid base16 character");return t.from(r,"hex")}}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/multibase/src/base32.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){function r(e,t){let r=e.byteLength,n=new Uint8Array(e),i=t.indexOf("=")===t.length-1;i&&(t=t.substring(0,t.length-2));let s=0,o=0,a="";for(let e=0;e<r;e++)for(o=o<<8|n[e],s+=8;s>=5;)a+=t[o>>>s-5&31],s-=5;if(s>0&&(a+=t[o<<5-s&31]),i)for(;a.length%8!=0;)a+="=";return a}e.exports=function(e){return{encode:n=>r("string"==typeof n?t.from(n):n,e),decode(t){for(let r of t)if(e.indexOf(r)<0)throw new Error("invalid base32 character");return function(e,t){let r=(e=e.replace(new RegExp("=","g"),"")).length,n=0,i=0,s=0,o=new Uint8Array(5*r/8|0);for(let a=0;a<r;a++)i=i<<5|t.indexOf(e[a]),(n+=5)>=8&&(o[s++]=i>>>n-8&255,n-=8);return o.buffer}(t,e)}}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/multibase/src/base64.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){e.exports=function(e){const r=e.indexOf("=")>-1,n=e.indexOf("-")>-1&&e.indexOf("_")>-1;return{encode(e){let i="";i="string"==typeof e?t.from(e).toString("base64"):e.toString("base64"),n&&(i=i.replace(/\+/g,"-").replace(/\//g,"_"));const s=i.indexOf("=");return s>0&&!r&&(i=i.substring(0,s)),i},decode(r){for(let t of r)if(e.indexOf(t)<0)throw new Error("invalid base64 character");return t.from(r,"base64")}}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*****************************************************!*\
  !*** ./node_modules/multicodec/src/varint-table.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./base-table */181),i=r(/*! ./util */277).varintBufferEncode,s={};e.exports=s;for(let e in n){let t=n[e];s[e]=i(t)}},
/*!**************************************************!*\
  !*** ./node_modules/multicodec/src/constants.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=Object.freeze({PROTOBUF:80,CBOR:81,RLP:96,BENCODE:99,JSON:512,MESSAGEPACK:513,MULTICODEC:48,MULTIHASH:49,MULTIADDR:50,MULTIBASE:51,IDENTITY:0,SHA1:17,SHA2_256:18,SHA2_512:19,SHA3_512:20,SHA3_384:21,SHA3_256:22,SHA3_224:23,SHAKE_128:24,SHAKE_256:25,KECCAK_224:26,KECCAK_256:27,KECCAK_384:28,KECCAK_512:29,MURMUR3_128:34,MURMUR3_32:35,DBL_SHA2_256:86,MD4:212,MD5:213,BMT:214,X11:4352,BLAKE2B_8:45569,BLAKE2B_16:45570,BLAKE2B_24:45571,BLAKE2B_32:45572,BLAKE2B_40:45573,BLAKE2B_48:45574,BLAKE2B_56:45575,BLAKE2B_64:45576,BLAKE2B_72:45577,BLAKE2B_80:45578,BLAKE2B_88:45579,BLAKE2B_96:45580,BLAKE2B_104:45581,BLAKE2B_112:45582,BLAKE2B_120:45583,BLAKE2B_128:45584,BLAKE2B_136:45585,BLAKE2B_144:45586,BLAKE2B_152:45587,BLAKE2B_160:45588,BLAKE2B_168:45589,BLAKE2B_176:45590,BLAKE2B_184:45591,BLAKE2B_192:45592,BLAKE2B_200:45593,BLAKE2B_208:45594,BLAKE2B_216:45595,BLAKE2B_224:45596,BLAKE2B_232:45597,BLAKE2B_240:45598,BLAKE2B_248:45599,BLAKE2B_256:45600,BLAKE2B_264:45601,BLAKE2B_272:45602,BLAKE2B_280:45603,BLAKE2B_288:45604,BLAKE2B_296:45605,BLAKE2B_304:45606,BLAKE2B_312:45607,BLAKE2B_320:45608,BLAKE2B_328:45609,BLAKE2B_336:45610,BLAKE2B_344:45611,BLAKE2B_352:45612,BLAKE2B_360:45613,BLAKE2B_368:45614,BLAKE2B_376:45615,BLAKE2B_384:45616,BLAKE2B_392:45617,BLAKE2B_400:45618,BLAKE2B_408:45619,BLAKE2B_416:45620,BLAKE2B_424:45621,BLAKE2B_432:45622,BLAKE2B_440:45623,BLAKE2B_448:45624,BLAKE2B_456:45625,BLAKE2B_464:45626,BLAKE2B_472:45627,BLAKE2B_480:45628,BLAKE2B_488:45629,BLAKE2B_496:45630,BLAKE2B_504:45631,BLAKE2B_512:45632,BLAKE2S_8:45633,BLAKE2S_16:45634,BLAKE2S_24:45635,BLAKE2S_32:45636,BLAKE2S_40:45637,BLAKE2S_48:45638,BLAKE2S_56:45639,BLAKE2S_64:45640,BLAKE2S_72:45641,BLAKE2S_80:45642,BLAKE2S_88:45643,BLAKE2S_96:45644,BLAKE2S_104:45645,BLAKE2S_112:45646,BLAKE2S_120:45647,BLAKE2S_128:45648,BLAKE2S_136:45649,BLAKE2S_144:45650,BLAKE2S_152:45651,BLAKE2S_160:45652,BLAKE2S_168:45653,BLAKE2S_176:45654,BLAKE2S_184:45655,BLAKE2S_192:45656,BLAKE2S_200:45657,BLAKE2S_208:45658,BLAKE2S_216:45659,BLAKE2S_224:45660,BLAKE2S_232:45661,BLAKE2S_240:45662,BLAKE2S_248:45663,BLAKE2S_256:45664,SKEIN256_8:45825,SKEIN256_16:45826,SKEIN256_24:45827,SKEIN256_32:45828,SKEIN256_40:45829,SKEIN256_48:45830,SKEIN256_56:45831,SKEIN256_64:45832,SKEIN256_72:45833,SKEIN256_80:45834,SKEIN256_88:45835,SKEIN256_96:45836,SKEIN256_104:45837,SKEIN256_112:45838,SKEIN256_120:45839,SKEIN256_128:45840,SKEIN256_136:45841,SKEIN256_144:45842,SKEIN256_152:45843,SKEIN256_160:45844,SKEIN256_168:45845,SKEIN256_176:45846,SKEIN256_184:45847,SKEIN256_192:45848,SKEIN256_200:45849,SKEIN256_208:45850,SKEIN256_216:45851,SKEIN256_224:45852,SKEIN256_232:45853,SKEIN256_240:45854,SKEIN256_248:45855,SKEIN256_256:45856,SKEIN512_8:45857,SKEIN512_16:45858,SKEIN512_24:45859,SKEIN512_32:45860,SKEIN512_40:45861,SKEIN512_48:45862,SKEIN512_56:45863,SKEIN512_64:45864,SKEIN512_72:45865,SKEIN512_80:45866,SKEIN512_88:45867,SKEIN512_96:45868,SKEIN512_104:45869,SKEIN512_112:45870,SKEIN512_120:45871,SKEIN512_128:45872,SKEIN512_136:45873,SKEIN512_144:45874,SKEIN512_152:45875,SKEIN512_160:45876,SKEIN512_168:45877,SKEIN512_176:45878,SKEIN512_184:45879,SKEIN512_192:45880,SKEIN512_200:45881,SKEIN512_208:45882,SKEIN512_216:45883,SKEIN512_224:45884,SKEIN512_232:45885,SKEIN512_240:45886,SKEIN512_248:45887,SKEIN512_256:45888,SKEIN512_264:45889,SKEIN512_272:45890,SKEIN512_280:45891,SKEIN512_288:45892,SKEIN512_296:45893,SKEIN512_304:45894,SKEIN512_312:45895,SKEIN512_320:45896,SKEIN512_328:45897,SKEIN512_336:45898,SKEIN512_344:45899,SKEIN512_352:45900,SKEIN512_360:45901,SKEIN512_368:45902,SKEIN512_376:45903,SKEIN512_384:45904,SKEIN512_392:45905,SKEIN512_400:45906,SKEIN512_408:45907,SKEIN512_416:45908,SKEIN512_424:45909,SKEIN512_432:45910,SKEIN512_440:45911,SKEIN512_448:45912,SKEIN512_456:45913,SKEIN512_464:45914,SKEIN512_472:45915,SKEIN512_480:45916,SKEIN512_488:45917,SKEIN512_496:45918,SKEIN512_504:45919,SKEIN512_512:45920,SKEIN1024_8:45921,SKEIN1024_16:45922,SKEIN1024_24:45923,SKEIN1024_32:45924,SKEIN1024_40:45925,SKEIN1024_48:45926,SKEIN1024_56:45927,SKEIN1024_64:45928,SKEIN1024_72:45929,SKEIN1024_80:45930,SKEIN1024_88:45931,SKEIN1024_96:45932,SKEIN1024_104:45933,SKEIN1024_112:45934,SKEIN1024_120:45935,SKEIN1024_128:45936,SKEIN1024_136:45937,SKEIN1024_144:45938,SKEIN1024_152:45939,SKEIN1024_160:45940,SKEIN1024_168:45941,SKEIN1024_176:45942,SKEIN1024_184:45943,SKEIN1024_192:45944,SKEIN1024_200:45945,SKEIN1024_208:45946,SKEIN1024_216:45947,SKEIN1024_224:45948,SKEIN1024_232:45949,SKEIN1024_240:45950,SKEIN1024_248:45951,SKEIN1024_256:45952,SKEIN1024_264:45953,SKEIN1024_272:45954,SKEIN1024_280:45955,SKEIN1024_288:45956,SKEIN1024_296:45957,SKEIN1024_304:45958,SKEIN1024_312:45959,SKEIN1024_320:45960,SKEIN1024_328:45961,SKEIN1024_336:45962,SKEIN1024_344:45963,SKEIN1024_352:45964,SKEIN1024_360:45965,SKEIN1024_368:45966,SKEIN1024_376:45967,SKEIN1024_384:45968,SKEIN1024_392:45969,SKEIN1024_400:45970,SKEIN1024_408:45971,SKEIN1024_416:45972,SKEIN1024_424:45973,SKEIN1024_432:45974,SKEIN1024_440:45975,SKEIN1024_448:45976,SKEIN1024_456:45977,SKEIN1024_464:45978,SKEIN1024_472:45979,SKEIN1024_480:45980,SKEIN1024_488:45981,SKEIN1024_496:45982,SKEIN1024_504:45983,SKEIN1024_512:45984,SKEIN1024_520:45985,SKEIN1024_528:45986,SKEIN1024_536:45987,SKEIN1024_544:45988,SKEIN1024_552:45989,SKEIN1024_560:45990,SKEIN1024_568:45991,SKEIN1024_576:45992,SKEIN1024_584:45993,SKEIN1024_592:45994,SKEIN1024_600:45995,SKEIN1024_608:45996,SKEIN1024_616:45997,SKEIN1024_624:45998,SKEIN1024_632:45999,SKEIN1024_640:46e3,SKEIN1024_648:46001,SKEIN1024_656:46002,SKEIN1024_664:46003,SKEIN1024_672:46004,SKEIN1024_680:46005,SKEIN1024_688:46006,SKEIN1024_696:46007,SKEIN1024_704:46008,SKEIN1024_712:46009,SKEIN1024_720:46010,SKEIN1024_728:46011,SKEIN1024_736:46012,SKEIN1024_744:46013,SKEIN1024_752:46014,SKEIN1024_760:46015,SKEIN1024_768:46016,SKEIN1024_776:46017,SKEIN1024_784:46018,SKEIN1024_792:46019,SKEIN1024_800:46020,SKEIN1024_808:46021,SKEIN1024_816:46022,SKEIN1024_824:46023,SKEIN1024_832:46024,SKEIN1024_840:46025,SKEIN1024_848:46026,SKEIN1024_856:46027,SKEIN1024_864:46028,SKEIN1024_872:46029,SKEIN1024_880:46030,SKEIN1024_888:46031,SKEIN1024_896:46032,SKEIN1024_904:46033,SKEIN1024_912:46034,SKEIN1024_920:46035,SKEIN1024_928:46036,SKEIN1024_936:46037,SKEIN1024_944:46038,SKEIN1024_952:46039,SKEIN1024_960:46040,SKEIN1024_968:46041,SKEIN1024_976:46042,SKEIN1024_984:46043,SKEIN1024_992:46044,SKEIN1024_1000:46045,SKEIN1024_1008:46046,SKEIN1024_1016:46047,SKEIN1024_1024:46048,IP4:4,TCP:6,DCCP:33,IP6:41,IP6ZONE:42,DNS:53,DNS4:54,DNS6:55,DNSADDR:56,SCTP:132,UDP:273,P2P_WEBRTC_STAR:275,P2P_WEBRTC_DIRECT:276,P2P_STARDUST:277,P2P_CIRCUIT:290,UDT:301,UTP:302,UNIX:400,P2P:421,IPFS:421,HTTPS:443,ONION:444,ONION3:445,GARLIC64:446,GARLIC32:447,QUIC:460,WS:477,WSS:478,P2P_WEBSOCKET_STAR:479,HTTP:480,RAW:85,DAG_PB:112,DAG_CBOR:113,LIBP2P_KEY:114,GIT_RAW:120,TORRENT_INFO:123,TORRENT_FILE:124,LEOFCOIN_BLOCK:129,LEOFCOIN_TX:130,LEOFCOIN_PR:131,ETH_BLOCK:144,ETH_BLOCK_LIST:145,ETH_TX_TRIE:146,ETH_TX:147,ETH_TX_RECEIPT_TRIE:148,ETH_TX_RECEIPT:149,ETH_STATE_TRIE:150,ETH_ACCOUNT_SNAPSHOT:151,ETH_STORAGE_TRIE:152,BITCOIN_BLOCK:176,BITCOIN_TX:177,ZCASH_BLOCK:192,ZCASH_TX:193,STELLAR_BLOCK:208,STELLAR_TX:209,DECRED_BLOCK:224,DECRED_TX:225,DASH_BLOCK:240,DASH_TX:241,SWARM_MANIFEST:250,SWARM_FEED:251,DAG_JSON:297,PATH:47,IPLD_NS:226,IPFS_NS:227,SWARM_NS:228,IPNS_NS:229,ZERONET:230,ED25519_PUB:237,HOLOCHAIN_ADR_V0:8417572,HOLOCHAIN_ADR_V1:8483108,HOLOCHAIN_KEY_V0:9728292,HOLOCHAIN_KEY_V1:9793828,HOLOCHAIN_SIG_V0:10645796,HOLOCHAIN_SIG_V1:10711332})},
/*!**********************************************!*\
  !*** ./node_modules/multicodec/src/print.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=Object.freeze({80:"protobuf",81:"cbor",96:"rlp",99:"bencode",512:"json",513:"messagepack",48:"multicodec",49:"multihash",50:"multiaddr",51:"multibase",0:"identity",17:"sha1",18:"sha2-256",19:"sha2-512",20:"sha3-512",21:"sha3-384",22:"sha3-256",23:"sha3-224",24:"shake-128",25:"shake-256",26:"keccak-224",27:"keccak-256",28:"keccak-384",29:"keccak-512",34:"murmur3-128",35:"murmur3-32",86:"dbl-sha2-256",212:"md4",213:"md5",214:"bmt",4352:"x11",45569:"blake2b-8",45570:"blake2b-16",45571:"blake2b-24",45572:"blake2b-32",45573:"blake2b-40",45574:"blake2b-48",45575:"blake2b-56",45576:"blake2b-64",45577:"blake2b-72",45578:"blake2b-80",45579:"blake2b-88",45580:"blake2b-96",45581:"blake2b-104",45582:"blake2b-112",45583:"blake2b-120",45584:"blake2b-128",45585:"blake2b-136",45586:"blake2b-144",45587:"blake2b-152",45588:"blake2b-160",45589:"blake2b-168",45590:"blake2b-176",45591:"blake2b-184",45592:"blake2b-192",45593:"blake2b-200",45594:"blake2b-208",45595:"blake2b-216",45596:"blake2b-224",45597:"blake2b-232",45598:"blake2b-240",45599:"blake2b-248",45600:"blake2b-256",45601:"blake2b-264",45602:"blake2b-272",45603:"blake2b-280",45604:"blake2b-288",45605:"blake2b-296",45606:"blake2b-304",45607:"blake2b-312",45608:"blake2b-320",45609:"blake2b-328",45610:"blake2b-336",45611:"blake2b-344",45612:"blake2b-352",45613:"blake2b-360",45614:"blake2b-368",45615:"blake2b-376",45616:"blake2b-384",45617:"blake2b-392",45618:"blake2b-400",45619:"blake2b-408",45620:"blake2b-416",45621:"blake2b-424",45622:"blake2b-432",45623:"blake2b-440",45624:"blake2b-448",45625:"blake2b-456",45626:"blake2b-464",45627:"blake2b-472",45628:"blake2b-480",45629:"blake2b-488",45630:"blake2b-496",45631:"blake2b-504",45632:"blake2b-512",45633:"blake2s-8",45634:"blake2s-16",45635:"blake2s-24",45636:"blake2s-32",45637:"blake2s-40",45638:"blake2s-48",45639:"blake2s-56",45640:"blake2s-64",45641:"blake2s-72",45642:"blake2s-80",45643:"blake2s-88",45644:"blake2s-96",45645:"blake2s-104",45646:"blake2s-112",45647:"blake2s-120",45648:"blake2s-128",45649:"blake2s-136",45650:"blake2s-144",45651:"blake2s-152",45652:"blake2s-160",45653:"blake2s-168",45654:"blake2s-176",45655:"blake2s-184",45656:"blake2s-192",45657:"blake2s-200",45658:"blake2s-208",45659:"blake2s-216",45660:"blake2s-224",45661:"blake2s-232",45662:"blake2s-240",45663:"blake2s-248",45664:"blake2s-256",45825:"skein256-8",45826:"skein256-16",45827:"skein256-24",45828:"skein256-32",45829:"skein256-40",45830:"skein256-48",45831:"skein256-56",45832:"skein256-64",45833:"skein256-72",45834:"skein256-80",45835:"skein256-88",45836:"skein256-96",45837:"skein256-104",45838:"skein256-112",45839:"skein256-120",45840:"skein256-128",45841:"skein256-136",45842:"skein256-144",45843:"skein256-152",45844:"skein256-160",45845:"skein256-168",45846:"skein256-176",45847:"skein256-184",45848:"skein256-192",45849:"skein256-200",45850:"skein256-208",45851:"skein256-216",45852:"skein256-224",45853:"skein256-232",45854:"skein256-240",45855:"skein256-248",45856:"skein256-256",45857:"skein512-8",45858:"skein512-16",45859:"skein512-24",45860:"skein512-32",45861:"skein512-40",45862:"skein512-48",45863:"skein512-56",45864:"skein512-64",45865:"skein512-72",45866:"skein512-80",45867:"skein512-88",45868:"skein512-96",45869:"skein512-104",45870:"skein512-112",45871:"skein512-120",45872:"skein512-128",45873:"skein512-136",45874:"skein512-144",45875:"skein512-152",45876:"skein512-160",45877:"skein512-168",45878:"skein512-176",45879:"skein512-184",45880:"skein512-192",45881:"skein512-200",45882:"skein512-208",45883:"skein512-216",45884:"skein512-224",45885:"skein512-232",45886:"skein512-240",45887:"skein512-248",45888:"skein512-256",45889:"skein512-264",45890:"skein512-272",45891:"skein512-280",45892:"skein512-288",45893:"skein512-296",45894:"skein512-304",45895:"skein512-312",45896:"skein512-320",45897:"skein512-328",45898:"skein512-336",45899:"skein512-344",45900:"skein512-352",45901:"skein512-360",45902:"skein512-368",45903:"skein512-376",45904:"skein512-384",45905:"skein512-392",45906:"skein512-400",45907:"skein512-408",45908:"skein512-416",45909:"skein512-424",45910:"skein512-432",45911:"skein512-440",45912:"skein512-448",45913:"skein512-456",45914:"skein512-464",45915:"skein512-472",45916:"skein512-480",45917:"skein512-488",45918:"skein512-496",45919:"skein512-504",45920:"skein512-512",45921:"skein1024-8",45922:"skein1024-16",45923:"skein1024-24",45924:"skein1024-32",45925:"skein1024-40",45926:"skein1024-48",45927:"skein1024-56",45928:"skein1024-64",45929:"skein1024-72",45930:"skein1024-80",45931:"skein1024-88",45932:"skein1024-96",45933:"skein1024-104",45934:"skein1024-112",45935:"skein1024-120",45936:"skein1024-128",45937:"skein1024-136",45938:"skein1024-144",45939:"skein1024-152",45940:"skein1024-160",45941:"skein1024-168",45942:"skein1024-176",45943:"skein1024-184",45944:"skein1024-192",45945:"skein1024-200",45946:"skein1024-208",45947:"skein1024-216",45948:"skein1024-224",45949:"skein1024-232",45950:"skein1024-240",45951:"skein1024-248",45952:"skein1024-256",45953:"skein1024-264",45954:"skein1024-272",45955:"skein1024-280",45956:"skein1024-288",45957:"skein1024-296",45958:"skein1024-304",45959:"skein1024-312",45960:"skein1024-320",45961:"skein1024-328",45962:"skein1024-336",45963:"skein1024-344",45964:"skein1024-352",45965:"skein1024-360",45966:"skein1024-368",45967:"skein1024-376",45968:"skein1024-384",45969:"skein1024-392",45970:"skein1024-400",45971:"skein1024-408",45972:"skein1024-416",45973:"skein1024-424",45974:"skein1024-432",45975:"skein1024-440",45976:"skein1024-448",45977:"skein1024-456",45978:"skein1024-464",45979:"skein1024-472",45980:"skein1024-480",45981:"skein1024-488",45982:"skein1024-496",45983:"skein1024-504",45984:"skein1024-512",45985:"skein1024-520",45986:"skein1024-528",45987:"skein1024-536",45988:"skein1024-544",45989:"skein1024-552",45990:"skein1024-560",45991:"skein1024-568",45992:"skein1024-576",45993:"skein1024-584",45994:"skein1024-592",45995:"skein1024-600",45996:"skein1024-608",45997:"skein1024-616",45998:"skein1024-624",45999:"skein1024-632",46e3:"skein1024-640",46001:"skein1024-648",46002:"skein1024-656",46003:"skein1024-664",46004:"skein1024-672",46005:"skein1024-680",46006:"skein1024-688",46007:"skein1024-696",46008:"skein1024-704",46009:"skein1024-712",46010:"skein1024-720",46011:"skein1024-728",46012:"skein1024-736",46013:"skein1024-744",46014:"skein1024-752",46015:"skein1024-760",46016:"skein1024-768",46017:"skein1024-776",46018:"skein1024-784",46019:"skein1024-792",46020:"skein1024-800",46021:"skein1024-808",46022:"skein1024-816",46023:"skein1024-824",46024:"skein1024-832",46025:"skein1024-840",46026:"skein1024-848",46027:"skein1024-856",46028:"skein1024-864",46029:"skein1024-872",46030:"skein1024-880",46031:"skein1024-888",46032:"skein1024-896",46033:"skein1024-904",46034:"skein1024-912",46035:"skein1024-920",46036:"skein1024-928",46037:"skein1024-936",46038:"skein1024-944",46039:"skein1024-952",46040:"skein1024-960",46041:"skein1024-968",46042:"skein1024-976",46043:"skein1024-984",46044:"skein1024-992",46045:"skein1024-1000",46046:"skein1024-1008",46047:"skein1024-1016",46048:"skein1024-1024",4:"ip4",6:"tcp",33:"dccp",41:"ip6",42:"ip6zone",53:"dns",54:"dns4",55:"dns6",56:"dnsaddr",132:"sctp",273:"udp",275:"p2p-webrtc-star",276:"p2p-webrtc-direct",277:"p2p-stardust",290:"p2p-circuit",301:"udt",302:"utp",400:"unix",421:"p2p",443:"https",444:"onion",445:"onion3",446:"garlic64",447:"garlic32",460:"quic",477:"ws",478:"wss",479:"p2p-websocket-star",480:"http",85:"raw",112:"dag-pb",113:"dag-cbor",114:"libp2p-key",120:"git-raw",123:"torrent-info",124:"torrent-file",129:"leofcoin-block",130:"leofcoin-tx",131:"leofcoin-pr",144:"eth-block",145:"eth-block-list",146:"eth-tx-trie",147:"eth-tx",148:"eth-tx-receipt-trie",149:"eth-tx-receipt",150:"eth-state-trie",151:"eth-account-snapshot",152:"eth-storage-trie",176:"bitcoin-block",177:"bitcoin-tx",192:"zcash-block",193:"zcash-tx",208:"stellar-block",209:"stellar-tx",224:"decred-block",225:"decred-tx",240:"dash-block",241:"dash-tx",250:"swarm-manifest",251:"swarm-feed",297:"dag-json",47:"path",226:"ipld-ns",227:"ipfs-ns",228:"swarm-ns",229:"ipns-ns",230:"zeronet",237:"ed25519-pub",8417572:"holochain-adr-v0",8483108:"holochain-adr-v1",9728292:"holochain-key-v0",9793828:"holochain-key-v1",10645796:"holochain-sig-v0",10711332:"holochain-sig-v1"})},
/*!*******************************************!*\
  !*** ./node_modules/cids/src/cid-util.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! multihashes */13);var i={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!t.isBuffer(e.multihash))return"multihash must be a Buffer";try{n.validate(e.multihash)}catch(e){let t=e.message;return t||(t="Multihash validation failed"),t}}};e.exports=i}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************************************!*\
  !*** ./node_modules/ipld/node_modules/merge-options/index.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! is-plain-obj */279),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:s}=Object,o=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1,ignoreUndefined:!1},u=e=>{const t=[];for(const r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(const n of r)s.call(e,n)&&t.push(n)}return t};function h(e){return Array.isArray(e)?function(e){const t=e.slice(0,0);return u(e).forEach(r=>{o(t,r,h(e[r]))}),t}(e):n(e)?function(e){const t=null===Object.getPrototypeOf(e)?Object.create(null):{};return u(e).forEach(r=>{o(t,r,h(e[r]))}),t}(e):e}const l=(e,t,r,n)=>(r.forEach(r=>{void 0===t[r]&&n.ignoreUndefined||(r in e&&e[r]!==Object.getPrototypeOf(e)?o(e,r,d(e[r],t[r],n)):o(e,r,h(t[r])))}),e),f=(e,t,r)=>{let n=e.slice(0,0),s=0;return[e,t].forEach(t=>{const a=[];for(let r=0;r<t.length;r++)i.call(t,r)&&(a.push(String(r)),o(n,s++,t===e?t[r]:h(t[r])));n=l(n,t,u(t).filter(e=>!a.includes(e)),r)}),n};function d(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?f(e,t,r):n(t)&&n(e)?l(e,t,u(t),r):h(t)}e.exports=function(...e){const t=d(h(c),this!==a&&this||{},c);let r={_:{}};for(const i of e)if(void 0!==i){if(!n(i))throw new TypeError("`"+i+"` is not an Option Object");r=d(r,{_:i},t)}return r._}},
/*!*******************************************!*\
  !*** ./node_modules/borc/src/diagnose.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ./decoder */283),i=r(/*! ./utils */182);class s extends n{createTag(e,t){return`${e}(${t})`}createInt(e){return super.createInt(e).toString()}createInt32(e,t){return super.createInt32(e,t).toString()}createInt64(e,t,r,n){return super.createInt64(e,t,r,n).toString()}createInt32Neg(e,t){return super.createInt32Neg(e,t).toString()}createInt64Neg(e,t,r,n){return super.createInt64Neg(e,t,r,n).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const t=super.createFloat(e);return i.isNegativeZero(e)?"-0_1":`${t}_1`}createFloatSingle(e,t,r,n){return`${super.createFloatSingle(e,t,r,n)}_2`}createFloatDouble(e,t,r,n,i,s,o,a){return`${super.createFloatDouble(e,t,r,n,i,s,o,a)}_3`}createByteString(e,t){const r=e.join(", ");return-1===t?`(_ ${r})`:`h'${r}`}createByteStringFromHeap(e,r){return`h'${t.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,t){const r=super.createArray(e,t);return-1===t?`[_ ${r.join(", ")}]`:`[${r.join(", ")}]`}createMap(e,t){const r=super.createMap(e),n=Array.from(r.keys()).reduce(o(r),"");return-1===t?`{_ ${n}}`:`{${n}}`}createObject(e,t){const r=super.createObject(e),n=Object.keys(r).reduce(o(r),"");return-1===t?`{_ ${n}}`:`{${n}}`}createUtf8String(e,t){const r=e.join(", ");return-1===t?`(_ ${r})`:`"${r}"`}createUtf8StringFromHeap(e,r){return`"${t.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return"string"==typeof e&&(e=t.from(e,r||"hex")),(new s).decodeFirst(e)}}function o(e){return(t,r)=>t?`${t}, ${r}: ${e[r]}`:`${r}: ${e[r]}`}e.exports=s}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/borc/src/decoder.asm.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){"use asm";var n=new e.Uint8Array(r);var i=t.pushInt;var s=t.pushInt32;var o=t.pushInt32Neg;var a=t.pushInt64;var c=t.pushInt64Neg;var u=t.pushFloat;var h=t.pushFloatSingle;var l=t.pushFloatDouble;var f=t.pushTrue;var d=t.pushFalse;var p=t.pushUndefined;var A=t.pushNull;var g=t.pushInfinity;var y=t.pushInfinityNeg;var m=t.pushNaN;var _=t.pushNaNNeg;var b=t.pushArrayStart;var w=t.pushArrayStartFixed;var v=t.pushArrayStartFixed32;var E=t.pushArrayStartFixed64;var S=t.pushObjectStart;var C=t.pushObjectStartFixed;var k=t.pushObjectStartFixed32;var I=t.pushObjectStartFixed64;var T=t.pushByteString;var R=t.pushByteStringStart;var N=t.pushUtf8String;var B=t.pushUtf8StringStart;var O=t.pushSimpleUnassigned;var P=t.pushTagStart;var x=t.pushTagStart4;var L=t.pushTagStart8;var D=t.pushTagUnassigned;var M=t.pushBreak;var U=e.Math.pow;var K=0;var F=0;var z=0;function j(e){e=e|0;K=0;F=e;while((K|0)<(F|0)){z=Xe[n[K]&255](n[K]|0)|0;if((z|0)>0){break}}return z|0}function H(e){e=e|0;if(((K|0)+(e|0)|0)<(F|0)){return 0}return 1}function q(e){e=e|0;return n[e|0]<<8|n[e+1|0]|0}function V(e){e=e|0;return n[e|0]<<24|n[e+1|0]<<16|n[e+2|0]<<8|n[e+3|0]|0}function G(e){e=e|0;i(e|0);K=K+1|0;return 0}function W(e){e=e|0;if(H(1)|0){return 1}i(n[K+1|0]|0);K=K+2|0;return 0}function Q(e){e=e|0;if(H(2)|0){return 1}i(q(K+1|0)|0);K=K+3|0;return 0}function Y(e){e=e|0;if(H(4)|0){return 1}s(q(K+1|0)|0,q(K+3|0)|0);K=K+5|0;return 0}function X(e){e=e|0;if(H(8)|0){return 1}a(q(K+1|0)|0,q(K+3|0)|0,q(K+5|0)|0,q(K+7|0)|0);K=K+9|0;return 0}function $(e){e=e|0;i(-1-(e-32|0)|0);K=K+1|0;return 0}function Z(e){e=e|0;if(H(1)|0){return 1}i(-1-(n[K+1|0]|0)|0);K=K+2|0;return 0}function J(e){e=e|0;var t=0;if(H(2)|0){return 1}t=q(K+1|0)|0;i(-1-(t|0)|0);K=K+3|0;return 0}function ee(e){e=e|0;if(H(4)|0){return 1}o(q(K+1|0)|0,q(K+3|0)|0);K=K+5|0;return 0}function te(e){e=e|0;if(H(8)|0){return 1}c(q(K+1|0)|0,q(K+3|0)|0,q(K+5|0)|0,q(K+7|0)|0);K=K+9|0;return 0}function re(e){e=e|0;var t=0;var r=0;var n=0;n=e-64|0;if(H(n|0)|0){return 1}t=K+1|0;r=(K+1|0)+(n|0)|0;T(t|0,r|0);K=r|0;return 0}function ne(e){e=e|0;var t=0;var r=0;var i=0;if(H(1)|0){return 1}i=n[K+1|0]|0;t=K+2|0;r=(K+2|0)+(i|0)|0;if(H(i+1|0)|0){return 1}T(t|0,r|0);K=r|0;return 0}function ie(e){e=e|0;var t=0;var r=0;var n=0;if(H(2)|0){return 1}n=q(K+1|0)|0;t=K+3|0;r=(K+3|0)+(n|0)|0;if(H(n+2|0)|0){return 1}T(t|0,r|0);K=r|0;return 0}function se(e){e=e|0;var t=0;var r=0;var n=0;if(H(4)|0){return 1}n=V(K+1|0)|0;t=K+5|0;r=(K+5|0)+(n|0)|0;if(H(n+4|0)|0){return 1}T(t|0,r|0);K=r|0;return 0}function oe(e){e=e|0;return 1}function ae(e){e=e|0;R();K=K+1|0;return 0}function ce(e){e=e|0;var t=0;var r=0;var n=0;n=e-96|0;if(H(n|0)|0){return 1}t=K+1|0;r=(K+1|0)+(n|0)|0;N(t|0,r|0);K=r|0;return 0}function ue(e){e=e|0;var t=0;var r=0;var i=0;if(H(1)|0){return 1}i=n[K+1|0]|0;t=K+2|0;r=(K+2|0)+(i|0)|0;if(H(i+1|0)|0){return 1}N(t|0,r|0);K=r|0;return 0}function he(e){e=e|0;var t=0;var r=0;var n=0;if(H(2)|0){return 1}n=q(K+1|0)|0;t=K+3|0;r=(K+3|0)+(n|0)|0;if(H(n+2|0)|0){return 1}N(t|0,r|0);K=r|0;return 0}function le(e){e=e|0;var t=0;var r=0;var n=0;if(H(4)|0){return 1}n=V(K+1|0)|0;t=K+5|0;r=(K+5|0)+(n|0)|0;if(H(n+4|0)|0){return 1}N(t|0,r|0);K=r|0;return 0}function fe(e){e=e|0;return 1}function de(e){e=e|0;B();K=K+1|0;return 0}function pe(e){e=e|0;w(e-128|0);K=K+1|0;return 0}function Ae(e){e=e|0;if(H(1)|0){return 1}w(n[K+1|0]|0);K=K+2|0;return 0}function ge(e){e=e|0;if(H(2)|0){return 1}w(q(K+1|0)|0);K=K+3|0;return 0}function ye(e){e=e|0;if(H(4)|0){return 1}v(q(K+1|0)|0,q(K+3|0)|0);K=K+5|0;return 0}function me(e){e=e|0;if(H(8)|0){return 1}E(q(K+1|0)|0,q(K+3|0)|0,q(K+5|0)|0,q(K+7|0)|0);K=K+9|0;return 0}function _e(e){e=e|0;b();K=K+1|0;return 0}function be(e){e=e|0;var t=0;t=e-160|0;if(H(t|0)|0){return 1}C(t|0);K=K+1|0;return 0}function we(e){e=e|0;if(H(1)|0){return 1}C(n[K+1|0]|0);K=K+2|0;return 0}function ve(e){e=e|0;if(H(2)|0){return 1}C(q(K+1|0)|0);K=K+3|0;return 0}function Ee(e){e=e|0;if(H(4)|0){return 1}k(q(K+1|0)|0,q(K+3|0)|0);K=K+5|0;return 0}function Se(e){e=e|0;if(H(8)|0){return 1}I(q(K+1|0)|0,q(K+3|0)|0,q(K+5|0)|0,q(K+7|0)|0);K=K+9|0;return 0}function Ce(e){e=e|0;S();K=K+1|0;return 0}function ke(e){e=e|0;P(e-192|0|0);K=K+1|0;return 0}function Ie(e){e|0;P(e|0);K=K+1|0;return 0}function Te(e){e|0;P(e|0);K=K+1|0;return 0}function Re(e){e|0;P(e|0);K=K+1|0;return 0}function Ne(e){e|0;P(e|0);K=K+1|0;return 0}function Be(e){e=e|0;P(e-192|0|0);K=K+1|0;return 0}function Oe(e){e|0;P(e|0);K=K+1|0;return 0}function Pe(e){e|0;P(e|0);K=K+1|0;return 0}function xe(e){e|0;P(e|0);K=K+1|0;return 0}function Le(e){e=e|0;if(H(1)|0){return 1}P(n[K+1|0]|0);K=K+2|0;return 0}function De(e){e=e|0;if(H(2)|0){return 1}P(q(K+1|0)|0);K=K+3|0;return 0}function Me(e){e=e|0;if(H(4)|0){return 1}x(q(K+1|0)|0,q(K+3|0)|0);K=K+5|0;return 0}function Ue(e){e=e|0;if(H(8)|0){return 1}L(q(K+1|0)|0,q(K+3|0)|0,q(K+5|0)|0,q(K+7|0)|0);K=K+9|0;return 0}function Ke(e){e=e|0;O((e|0)-224|0);K=K+1|0;return 0}function Fe(e){e=e|0;d();K=K+1|0;return 0}function ze(e){e=e|0;f();K=K+1|0;return 0}function je(e){e=e|0;A();K=K+1|0;return 0}function He(e){e=e|0;p();K=K+1|0;return 0}function qe(e){e=e|0;if(H(1)|0){return 1}O(n[K+1|0]|0);K=K+2|0;return 0}function Ve(e){e=e|0;var t=0;var r=0;var i=1.0;var s=0.0;var o=0.0;var a=0.0;if(H(2)|0){return 1}t=n[K+1|0]|0;r=n[K+2|0]|0;if((t|0)&0x80){i=-1.0}s=+(((t|0)&0x7C)>>2);o=+(((t|0)&0x03)<<8|r);if(+s==0.0){u(+(+i*+5.9604644775390625e-8*+o))}else if(+s==31.0){if(+i==1.0){if(+o>0.0){m()}else{g()}}else{if(+o>0.0){_()}else{y()}}}else{u(+(+i*U(+2,+(+s-25.0))*+(1024.0+o)))}K=K+3|0;return 0}function Ge(e){e=e|0;if(H(4)|0){return 1}h(n[K+1|0]|0,n[K+2|0]|0,n[K+3|0]|0,n[K+4|0]|0);K=K+5|0;return 0}function We(e){e=e|0;if(H(8)|0){return 1}l(n[K+1|0]|0,n[K+2|0]|0,n[K+3|0]|0,n[K+4|0]|0,n[K+5|0]|0,n[K+6|0]|0,n[K+7|0]|0,n[K+8|0]|0);K=K+9|0;return 0}function Qe(e){e=e|0;return 1}function Ye(e){e=e|0;M();K=K+1|0;return 0}var Xe=[G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,W,Q,Y,X,Qe,Qe,Qe,Qe,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Z,J,ee,te,Qe,Qe,Qe,Qe,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,ne,ie,se,oe,Qe,Qe,Qe,ae,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ue,he,le,fe,Qe,Qe,Qe,de,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,Ae,ge,ye,me,Qe,Qe,Qe,_e,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,be,we,ve,Ee,Se,Qe,Qe,Qe,Ce,ke,ke,ke,ke,ke,ke,Be,Be,Be,Be,Be,Be,Be,Be,Be,Be,Be,Be,Be,Be,Be,Be,Be,Be,Le,De,Me,Ue,Qe,Qe,Qe,Qe,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Fe,ze,je,He,qe,Ve,Ge,We,Qe,Qe,Qe,Ye];return{parse:j}}},
/*!**********************************************!*\
  !*** ./node_modules/iso-url/src/relative.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{URLWithLegacySupport:n,format:i}=r(/*! ./url */286);e.exports=(e,t={},r={},s)=>{let o,a=t.protocol?t.protocol.replace(":",""):"http";a=(r[a]||s||a)+":";try{o=new n(e)}catch(e){o={}}const c=Object.assign({},t,{protocol:a||o.protocol,host:t.host||o.host});return new n(e,i(c)).toString()}},
/*!******************************************!*\
  !*** ./node_modules/borc/src/encoder.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const{URL:n}=r(/*! iso-url */132),i=r(/*! bignumber.js */48).BigNumber,s=r(/*! ./utils */182),o=r(/*! ./constants */131),a=o.MT,c=o.NUMBYTES,u=o.SHIFT32,h=o.SYMS,l=o.TAG,f=o.MT.SIMPLE_FLOAT<<5|o.NUMBYTES.TWO,d=o.MT.SIMPLE_FLOAT<<5|o.NUMBYTES.FOUR,p=o.MT.SIMPLE_FLOAT<<5|o.NUMBYTES.EIGHT,A=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.TRUE,g=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.FALSE,y=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.UNDEFINED,m=o.MT.SIMPLE_FLOAT<<5|o.SIMPLE.NULL,_=new i("0x20000000000000"),b=t.from("f97e00","hex"),w=t.from("f9fc00","hex"),v=t.from("f97c00","hex");class E{constructor(e){e=e||{},this.streaming="function"==typeof e.stream,this.onData=e.stream,this.semanticTypes=[[n,this._pushUrl],[i,this._pushBigNumber]];const t=e.genTypes||[],r=t.length;for(let e=0;e<r;e++)this.addSemanticType(t[e][0],t[e][1]);this._reset()}addSemanticType(e,t){const r=this.semanticTypes.length;for(let n=0;n<r;n++){if(this.semanticTypes[n][0]===e){const e=this.semanticTypes[n][1];return this.semanticTypes[n][1]=t,e}}return this.semanticTypes.push([e,t]),null}push(e){return!e||(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}pushWrite(e,t,r){return this.result[this.offset]=e,this.resultMethod[this.offset]=t,this.resultLength[this.offset]=r,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(b)}_pushInfinity(e){const t=e<0?w:v;return this.push(t)}_pushFloat(e){const r=t.allocUnsafe(2);if(s.writeHalf(r,e)&&s.parseHalf(r)===e)return this._pushUInt8(f)&&this.push(r);const n=t.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(d)&&this.push(n):this._pushUInt8(p)&&this._pushDoubleBE(e)}_pushInt(e,t,r){const n=t<<5;return e<24?this._pushUInt8(n|e):e<=255?this._pushUInt8(n|c.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(n|c.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(n|c.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(n|c.EIGHT)&&this._pushUInt32BE(Math.floor(e/u))&&this._pushUInt32BE(e%u):t===a.NEG_INT?this._pushFloat(r):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,a.NEG_INT,e):this._pushInt(e,a.POS_INT)}_pushNumber(e){switch(!1){case e==e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!=0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=t.byteLength(e,"utf8");return this._pushInt(r,a.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?A:g)}_pushUndefined(e){return this._pushUInt8(y)}_pushArray(e,t){const r=t.length;if(!e._pushInt(r,a.ARRAY))return!1;for(let n=0;n<r;n++)if(!e.pushAny(t[n]))return!1;return!0}_pushTag(e){return this._pushInt(e,a.TAG)}_pushDate(e,t){return e._pushTag(l.DATE_EPOCH)&&e.pushAny(Math.round(t/1e3))}_pushBuffer(e,t){return e._pushInt(t.length,a.BYTE_STRING)&&e.push(t)}_pushNoFilter(e,t){return e._pushBuffer(e,t.slice())}_pushRegexp(e,t){return e._pushTag(l.REGEXP)&&e.pushAny(t.source)}_pushSet(e,t){if(!e._pushInt(t.size,a.ARRAY))return!1;for(let r of t)if(!e.pushAny(r))return!1;return!0}_pushUrl(e,t){return e._pushTag(l.URI)&&e.pushAny(t.format())}_pushBigint(e){let r=l.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=l.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=t.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-1/0:1/0);if(t.isInteger())return e._pushBigint(t);if(!e._pushTag(l.DECIMAL_FRAC)||!e._pushInt(2,a.ARRAY))return!1;const r=t.decimalPlaces(),n=t.multipliedBy(new i(10).pow(r));return!!e._pushIntNum(-r)&&(n.abs().isLessThan(_)?e._pushIntNum(n.toNumber()):e._pushBigint(n))}_pushMap(e,t){return!!e._pushInt(t.size,a.MAP)&&this._pushRawMap(t.size,Array.from(t))}_pushObject(e){if(!e)return this._pushUInt8(m);for(var t=this.semanticTypes.length,r=0;r<t;r++)if(e instanceof this.semanticTypes[r][0])return this.semanticTypes[r][1].call(e,this,e);var n=e.encodeCBOR;if("function"==typeof n)return n.call(e,this);var i=Object.keys(e),s=i.length;return!!this._pushInt(s,a.MAP)&&this._pushRawMap(s,i.map(t=>[t,e[t]]))}_pushRawMap(e,t){t=t.map((function(e){return e[0]=E.encode(e[0]),e})).sort(s.keySorter);for(var r=0;r<e;r++){if(!this.push(t[r][0]))return!1;if(!this.pushAny(t[r][1]))return!1}return!0}write(e){return this.pushAny(e)}pushAny(e){switch(function(e){return{}.toString.call(e).slice(8,-1)}(e)){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,t.isBuffer(e)?e:t.from(e));case"Null":return this._pushUInt8(m);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case h.NULL:return this._pushObject(null);case h.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(0===this.offset)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,s=0,o=0;o<i;o++)s+=r[o];var a=t.allocUnsafe(s),c=0,u=0;for(o=0;o<i;o++){switch(u=r[o],n[o]){case 0:e[o].copy(a,c);break;case 1:a.writeUInt8(e[o],c,!0);break;case 2:a.writeUInt16BE(e[o],c,!0);break;case 3:a.writeUInt32BE(e[o],c,!0);break;case 4:a.writeDoubleBE(e[o],c,!0);break;case 5:a.write(e[o],c,u,"utf8");break;default:throw new Error("unkown method")}c+=u}var h=a;return this._reset(),h}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const t=new E;if(!t.pushAny(e))throw new Error("Failed to encode input");return t.finalize()}}e.exports=E}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************************!*\
  !*** ./node_modules/multihashing-async/src/crypto.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! js-sha3 */49),s=r(/*! murmurhash3js-revisited */133),o=r(/*! ./sha */550),{fromNumberTo32BitBuf:a}=r(/*! ./utils */551),c=e=>async t=>{switch(e){case"sha3-224":return n.from(i.sha3_224.arrayBuffer(t));case"sha3-256":return n.from(i.sha3_256.arrayBuffer(t));case"sha3-384":return n.from(i.sha3_384.arrayBuffer(t));case"sha3-512":return n.from(i.sha3_512.arrayBuffer(t));case"shake-128":return n.from(i.shake128.create(128).update(t).arrayBuffer());case"shake-256":return n.from(i.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return n.from(i.keccak224.arrayBuffer(t));case"keccak-256":return n.from(i.keccak256.arrayBuffer(t));case"keccak-384":return n.from(i.keccak384.arrayBuffer(t));case"keccak-512":return n.from(i.keccak512.arrayBuffer(t));case"murmur3-128":return n.from(s.x64.hash128(t),"hex");case"murmur3-32":return a(s.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};e.exports={sha1:o("sha1"),sha2256:o("sha2-256"),sha2512:o("sha2-512"),dblSha2256:o("dbl-sha2-256"),sha3224:c("sha3-224"),sha3256:c("sha3-256"),sha3384:c("sha3-384"),sha3512:c("sha3-512"),shake128:c("shake-128"),shake256:c("shake-256"),keccak224:c("keccak-224"),keccak256:c("keccak-256"),keccak384:c("keccak-384"),keccak512:c("keccak-512"),murmur3128:c("murmur3-128"),murmur332:c("murmur3-32"),addBlake:r(/*! ./blake */552)}},
/*!*******************************************************************!*\
  !*** ./node_modules/murmurhash3js-revisited/lib/murmurHash3js.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){!function(r,n){"use strict";var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function o(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function a(e,t){return e<<t|e>>>32-t}function c(e){return e=o(e^=e>>>16,2246822507),e=o(e^=e>>>13,3266489909),e^=e>>>16}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function h(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function f(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function d(e,t){return[e[0]^t[0],e[1]^t[1]]}function p(e){return e=d(e,[0,e[0]>>>1]),e=d(e=h(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=d(e=h(e,[3301882366,444984403]),[0,e[0]>>>1])}i.x86.hash32=function(e,t){if(!i.inputValidation||s(e)){t=t||0;for(var r=e.length%4,n=e.length-r,u=t,h=0,l=3432918353,f=461845907,d=0;d<n;d+=4)h=o(h=e[d]|e[d+1]<<8|e[d+2]<<16|e[d+3]<<24,l),h=o(h=a(h,15),f),u=o(u=a(u^=h,13),5)+3864292196;switch(h=0,r){case 3:h^=e[d+2]<<16;case 2:h^=e[d+1]<<8;case 1:h=o(h^=e[d],l),u^=h=o(h=a(h,15),f)}return(u=c(u^=e.length))>>>0}},i.x86.hash128=function(e,t){if(!i.inputValidation||s(e)){t=t||0;for(var r=e.length%16,n=e.length-r,u=t,h=t,l=t,f=t,d=0,p=0,A=0,g=0,y=597399067,m=2869860233,_=951274213,b=2716044179,w=0;w<n;w+=16)d=e[w]|e[w+1]<<8|e[w+2]<<16|e[w+3]<<24,p=e[w+4]|e[w+5]<<8|e[w+6]<<16|e[w+7]<<24,A=e[w+8]|e[w+9]<<8|e[w+10]<<16|e[w+11]<<24,g=e[w+12]|e[w+13]<<8|e[w+14]<<16|e[w+15]<<24,d=a(d=o(d,y),15),u=a(u^=d=o(d,m),19),u=o(u+=h,5)+1444728091,p=a(p=o(p,m),16),h=a(h^=p=o(p,_),17),h=o(h+=l,5)+197830471,A=a(A=o(A,_),17),l=a(l^=A=o(A,b),15),l=o(l+=f,5)+2530024501,g=a(g=o(g,b),18),f=a(f^=g=o(g,y),13),f=o(f+=u,5)+850148119;switch(d=0,p=0,A=0,g=0,r){case 15:g^=e[w+14]<<16;case 14:g^=e[w+13]<<8;case 13:g=o(g^=e[w+12],b),f^=g=o(g=a(g,18),y);case 12:A^=e[w+11]<<24;case 11:A^=e[w+10]<<16;case 10:A^=e[w+9]<<8;case 9:A=o(A^=e[w+8],_),l^=A=o(A=a(A,17),b);case 8:p^=e[w+7]<<24;case 7:p^=e[w+6]<<16;case 6:p^=e[w+5]<<8;case 5:p=o(p^=e[w+4],m),h^=p=o(p=a(p,16),_);case 4:d^=e[w+3]<<24;case 3:d^=e[w+2]<<16;case 2:d^=e[w+1]<<8;case 1:d=o(d^=e[w],y),u^=d=o(d=a(d,15),m)}return u^=e.length,u+=h^=e.length,u+=l^=e.length,h+=u+=f^=e.length,l+=u,f+=u,u=c(u),u+=h=c(h),u+=l=c(l),h+=u+=f=c(f),l+=u,f+=u,("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)}},i.x64.hash128=function(e,t){if(!i.inputValidation||s(e)){t=t||0;for(var r=e.length%16,n=e.length-r,o=[0,t],a=[0,t],c=[0,0],A=[0,0],g=[2277735313,289559509],y=[1291169091,658871167],m=0;m<n;m+=16)c=[e[m+4]|e[m+5]<<8|e[m+6]<<16|e[m+7]<<24,e[m]|e[m+1]<<8|e[m+2]<<16|e[m+3]<<24],A=[e[m+12]|e[m+13]<<8|e[m+14]<<16|e[m+15]<<24,e[m+8]|e[m+9]<<8|e[m+10]<<16|e[m+11]<<24],c=l(c=h(c,g),31),o=u(o=l(o=d(o,c=h(c,y)),27),a),o=u(h(o,[0,5]),[0,1390208809]),A=l(A=h(A,y),33),a=u(a=l(a=d(a,A=h(A,g)),31),o),a=u(h(a,[0,5]),[0,944331445]);switch(c=[0,0],A=[0,0],r){case 15:A=d(A,f([0,e[m+14]],48));case 14:A=d(A,f([0,e[m+13]],40));case 13:A=d(A,f([0,e[m+12]],32));case 12:A=d(A,f([0,e[m+11]],24));case 11:A=d(A,f([0,e[m+10]],16));case 10:A=d(A,f([0,e[m+9]],8));case 9:A=h(A=d(A,[0,e[m+8]]),y),a=d(a,A=h(A=l(A,33),g));case 8:c=d(c,f([0,e[m+7]],56));case 7:c=d(c,f([0,e[m+6]],48));case 6:c=d(c,f([0,e[m+5]],40));case 5:c=d(c,f([0,e[m+4]],32));case 4:c=d(c,f([0,e[m+3]],24));case 3:c=d(c,f([0,e[m+2]],16));case 2:c=d(c,f([0,e[m+1]],8));case 1:c=h(c=d(c,[0,e[m]]),g),o=d(o,c=h(c=l(c,31),y))}return o=u(o=d(o,[0,e.length]),a=d(a,[0,e.length])),a=u(a,o),o=u(o=p(o),a=p(a)),a=u(a,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}},e.exports&&(t=e.exports=i),t.murmurHash3=i}()},
/*!************************************************************!*\
  !*** ./node_modules/multihashing-async/src/sha.browser.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=self.crypto||self.msCrypto;e.exports=e=>{if("undefined"==typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return async t=>{switch(e){case"sha1":return n.from(await i.subtle.digest({name:"SHA-1"},t));case"sha2-256":return n.from(await i.subtle.digest({name:"SHA-256"},t));case"sha2-512":return n.from(await i.subtle.digest({name:"SHA-512"},t));case"dbl-sha2-256":{const e=await i.subtle.digest({name:"SHA-256"},t);return n.from(await i.subtle.digest({name:"SHA-256"},e))}default:throw new Error(`${e} is not a supported algorithm`)}}}},
/*!******************************************************!*\
  !*** ./node_modules/multihashing-async/src/utils.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0);e.exports={fromNumberTo32BitBuf:e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return n.from(t)}}},
/*!******************************************************!*\
  !*** ./node_modules/multihashing-async/src/blake.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! blakejs */50),s={init:i.blake2bInit,update:i.blake2bUpdate,digest:i.blake2bFinal},o={init:i.blake2sInit,update:i.blake2sUpdate,digest:i.blake2sFinal},a=(e,t)=>async r=>{const i=t.init(e,null);return t.update(i,r),n.from(t.digest(i))};e.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}},
/*!*****************************************!*\
  !*** ./node_modules/blakejs/blake2b.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./util */288);function i(e,t,r){var n=e[t]+e[r],i=e[t+1]+e[r+1];n>=4294967296&&i++,e[t]=n,e[t+1]=i}function s(e,t,r,n){var i=e[t]+r;r<0&&(i+=4294967296);var s=e[t+1]+n;i>=4294967296&&s++,e[t]=i,e[t+1]=s}function o(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function a(e,t,r,n,o,a){var c=l[o],u=l[o+1],f=l[a],d=l[a+1];i(h,e,t),s(h,e,c,u);var p=h[n]^h[e],A=h[n+1]^h[e+1];h[n]=A,h[n+1]=p,i(h,r,n),p=h[t]^h[r],A=h[t+1]^h[r+1],h[t]=p>>>24^A<<8,h[t+1]=A>>>24^p<<8,i(h,e,t),s(h,e,f,d),p=h[n]^h[e],A=h[n+1]^h[e+1],h[n]=p>>>16^A<<16,h[n+1]=A>>>16^p<<16,i(h,r,n),p=h[t]^h[r],A=h[t+1]^h[r+1],h[t]=A>>>31^p<<1,h[t+1]=p>>>31^A<<1}var c=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),u=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),h=new Uint32Array(32),l=new Uint32Array(32);function f(e,t){var r=0;for(r=0;r<16;r++)h[r]=e.h[r],h[r+16]=c[r];for(h[24]=h[24]^e.t,h[25]=h[25]^e.t/4294967296,t&&(h[28]=~h[28],h[29]=~h[29]),r=0;r<32;r++)l[r]=o(e.b,4*r);for(r=0;r<12;r++)a(0,8,16,24,u[16*r+0],u[16*r+1]),a(2,10,18,26,u[16*r+2],u[16*r+3]),a(4,12,20,28,u[16*r+4],u[16*r+5]),a(6,14,22,30,u[16*r+6],u[16*r+7]),a(0,10,20,30,u[16*r+8],u[16*r+9]),a(2,12,22,24,u[16*r+10],u[16*r+11]),a(4,14,16,26,u[16*r+12],u[16*r+13]),a(6,8,18,28,u[16*r+14],u[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^h[r]^h[r+16]}function d(e,t){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var r={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e},n=0;n<16;n++)r.h[n]=c[n];var i=t?t.length:0;return r.h[0]^=16842752^i<<8^e,t&&(p(r,t),r.c=128),r}function p(e,t){for(var r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,f(e,!1),e.c=0),e.b[e.c++]=t[r]}function A(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;f(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r);return t}function g(e,t,r){r=r||64,e=n.normalizeInput(e);var i=d(r,t);return p(i,e),A(i)}e.exports={blake2b:g,blake2bHex:function(e,t,r){var i=g(e,t,r);return n.toHex(i)},blake2bInit:d,blake2bUpdate:p,blake2bFinal:A}},
/*!*****************************************!*\
  !*** ./node_modules/blakejs/blake2s.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./util */288);function i(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function s(e,t,r,n,i,s){u[e]=u[e]+u[t]+i,u[n]=o(u[n]^u[e],16),u[r]=u[r]+u[n],u[t]=o(u[t]^u[r],12),u[e]=u[e]+u[t]+s,u[n]=o(u[n]^u[e],8),u[r]=u[r]+u[n],u[t]=o(u[t]^u[r],7)}function o(e,t){return e>>>t^e<<32-t}var a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),u=new Uint32Array(16),h=new Uint32Array(16);function l(e,t){var r=0;for(r=0;r<8;r++)u[r]=e.h[r],u[r+8]=a[r];for(u[12]^=e.t,u[13]^=e.t/4294967296,t&&(u[14]=~u[14]),r=0;r<16;r++)h[r]=i(e.b,4*r);for(r=0;r<10;r++)s(0,4,8,12,h[c[16*r+0]],h[c[16*r+1]]),s(1,5,9,13,h[c[16*r+2]],h[c[16*r+3]]),s(2,6,10,14,h[c[16*r+4]],h[c[16*r+5]]),s(3,7,11,15,h[c[16*r+6]],h[c[16*r+7]]),s(0,5,10,15,h[c[16*r+8]],h[c[16*r+9]]),s(1,6,11,12,h[c[16*r+10]],h[c[16*r+11]]),s(2,7,8,13,h[c[16*r+12]],h[c[16*r+13]]),s(3,4,9,14,h[c[16*r+14]],h[c[16*r+15]]);for(r=0;r<8;r++)e.h[r]^=u[r]^u[r+8]}function f(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");var r=t?t.length:0;if(t&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");var n={h:new Uint32Array(a),b:new Uint32Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(d(n,t),n.c=64),n}function d(e,t){for(var r=0;r<t.length;r++)64===e.c&&(e.t+=e.c,l(e,!1),e.c=0),e.b[e.c++]=t[r]}function p(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;l(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)&255;return t}function A(e,t,r){r=r||32,e=n.normalizeInput(e);var i=f(r,t);return d(i,e),p(i)}e.exports={blake2s:A,blake2sHex:function(e,t,r){var i=A(e,t,r);return n.toHex(i)},blake2sInit:f,blake2sUpdate:d,blake2sFinal:p}},
/*!**********************************************!*\
  !*** ./node_modules/is-circular/lib/node.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e,t){this.value=e,this.next=t}e.exports=r,r.prototype.contains=function(e){for(var t=this;t;){if(t.value===e)return!0;t=t.next}return!1}},
/*!****************************************************!*\
  !*** ./node_modules/ipld-dag-cbor/src/resolver.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! cids */4),i=r(/*! ./util */281);t.resolve=(e,t)=>{let r=i.deserialize(e);const s=t.split("/").filter(Boolean);for(;s.length;){const e=s.shift();if(void 0===r[e])throw new Error(`Object has no property '${e}'`);if(r=r[e],n.isCID(r))return{value:r,remainderPath:s.join("/")}}return{value:r,remainderPath:""}};const s=function*(t,r){if(!e.isBuffer(t)&&!n.isCID(t)&&"string"!=typeof t&&null!==t)for(const e of Object.keys(t)){const n=void 0===r?e:r+"/"+e;yield n,yield*s(t[e],n)}};t.tree=function*(e){const t=i.deserialize(e);yield*s(t)}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/dag-node/index.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=r(/*! ./dagNode */290)},
/*!***************************************!*\
  !*** ./node_modules/stable/stable.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){
//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//! © 2018 Angry Bytes and contributors. MIT licensed.
e.exports=function(){"use strict";var e=function(e,r){return t(e.slice(),r)};function t(e,t){"function"!=typeof t&&(t=function(e,t){return String(e).localeCompare(t)});var n=e.length;if(n<=1)return e;for(var i=new Array(n),s=1;s<n;s*=2){r(e,t,s,i);var o=e;e=i,i=o}return e}e.inplace=function(e,n){var i=t(e,n);return i!==e&&r(i,null,e.length,e),e};var r=function(e,t,r,n){var i,s,o,a,c,u=e.length,h=0,l=2*r;for(i=0;i<u;i+=l)for(o=(s=i+r)+r,s>u&&(s=u),o>u&&(o=u),a=i,c=s;;)if(a<s&&c<o)t(e[a],e[c])<=0?n[h++]=e[a++]:n[h++]=e[c++];else if(a<s)n[h++]=e[a++];else{if(!(c<o))break;n[h++]=e[c++]}};return e}()},
/*!*********************************************!*\
  !*** ./node_modules/object-assign/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,c=o(e),u=1;u<arguments.length;u++){for(var h in r=Object(arguments[u]))i.call(r,h)&&(c[h]=r[h]);if(n){a=n(r);for(var l=0;l<a.length;l++)s.call(r,a[l])&&(c[a[l]]=r[a[l]])}}return c}},
/*!******************************************************!*\
  !*** ./node_modules/util/support/isBufferBrowser.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},
/*!*********************************************************************!*\
  !*** ./node_modules/util/node_modules/inherits/inherits_browser.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},
/*!*******************************************************!*\
  !*** ./node_modules/protocol-buffers-schema/index.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./parse */563),i=r(/*! ./stringify */565);e.exports=n,e.exports.parse=n,e.exports.stringify=i},
/*!*******************************************************!*\
  !*** ./node_modules/protocol-buffers-schema/parse.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./tokenize */564),i=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],s=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var r=e.shift();if("("===r&&(r=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[r]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},o=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var r=e.shift();t.required="required"===r,t.repeated="repeated"===r,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=s(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},a=function(e){for(var t={enums:[],messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(o(e));break;case"enum":t.enums.push(p(e));break;case"message":t.messages.push(h(e));break;case"extensions":t.extensions=u(e);break;case"oneof":e.shift();var r=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var n=o(e);n.oneof=r,t.fields.push(n)}e.shift();break;case"extend":t.extends.push(c(e));break;case";":e.shift();break;case"reserved":case"option":for(e.shift();";"!==e[0];)e.shift();break;default:e.unshift("optional"),t.fields.push(o(e))}return t},c=function(e){return{name:e[1],message:h(e)}},u=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var r=e.shift();if("max"===r&&(r=536870911),r=Number(r),isNaN(r))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:r}},h=function(e){e.shift();var t=1,r=[],n={name:e.shift(),enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),r=a(r),n.enums=r.enums,n.messages=r.messages,n.fields=r.fields,n.extends=r.extends,n.extensions=r.extensions,n;r.push(e.shift())}if(t)throw new Error("No closing tag for message")},l=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},f=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},d=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var r={value:null,options:{}};return r.value=Number(e.shift()),"["===e[0]&&(r.options=s(e)),e.shift(),{name:t,val:r}},p=function(e){e.shift();var t={},r={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),r;if("option"!==e[0]){var n=d(e);r.values[n.name]=n.val}else t=A(e),r.options[t.name]=t.value}throw new Error("No closing tag for enum")},A=function(e){for(var t=null,r=null,n=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:r};switch(e[0]){case"option":e.shift();var i="("===e[0];if(i&&e.shift(),t=e.shift(),i){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(r=n(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(r))throw new Error("Unexpected value for option optimize_for: "+r);"{"===r&&(r=g(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},g=function(e){for(var t=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},r={};e.length;){if("}"===e[0])return e.shift(),r;var n="("===e[0];n&&e.shift();var i=e.shift();if(n){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}var s=null;switch(e[0]){case":":if(void 0!==r[i])throw new Error("Duplicate option map key "+i);e.shift(),"{"===(s=t(e.shift()))&&(s=g(e)),r[i]=s,";"===e[0]&&e.shift();break;case"{":if(e.shift(),s=g(e),void 0===r[i]&&(r[i]=[]),!Array.isArray(r[i]))throw new Error("Duplicate option map key "+i);r[i].push(s);break;default:throw new Error("Unexpected token in option map: "+e[0])}}throw new Error("No closing tag for option map")},y=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},m=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var r=A(e);if(void 0!==t.options[r.name])throw new Error("Duplicate option "+r.name);t.options[r.name]=r.value;break;case"rpc":t.methods.push(_(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},_=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var r=A(e);if(void 0!==t.options[r.name])throw new Error("Duplicate option "+r.name);t.options[r.name]=r.value}throw new Error("No closing tag for rpc")};e.exports=function(e){for(var t=n(e.toString()),r=0;r<t.length;r++){var s;if(/^("|')([^'"]*)$/.test(t[r]))for(s=1===t[r].length?r+1:r;s<t.length;s++)if(/^([^'"]*)("|')$/.test(t[s])){t=t.slice(0,r).concat(t.slice(r,s+1).join("")).concat(t.slice(s+1));break}}for(var o={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},a=!0;t.length;){switch(t[0]){case"package":o.package=l(t);break;case"syntax":if(!a)throw new Error("Protobuf syntax version should be first thing in file");o.syntax=f(t);break;case"message":o.messages.push(h(t));break;case"enum":o.enums.push(p(t));break;case"option":var u=A(t);if(o.options[u.name])throw new Error("Duplicate option "+u.name);o.options[u.name]=u.value;break;case"import":o.imports.push(y(t));break;case"extend":o.extends.push(c(t));break;case"service":o.services||(o.services=[]),o.services.push(m(t));break;default:throw new Error("Unexpected token: "+t[0])}a=!1}return o.extends.forEach((function(e){o.messages.forEach((function(t){t.name===e.name&&e.message.fields.forEach((function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)}))}))})),o.messages.forEach((function(e){e.fields.forEach((function(t){var r,n,s,a;if(t.options&&"true"===t.options.packed&&-1===i.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some((function(e){return e.name===t.type})))return}else{if((r=t.type.split(".")).length>2)throw new Error("what is this?");if(n=r[0],s=r[1],o.messages.some((function(e){if(e.name===n)return a=e,e})),a&&a.enums&&a.enums.some((function(e){return e.name===s})))return}throw new Error("Fields of type "+t.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}}))})),o}},
/*!**********************************************************!*\
  !*** ./node_modules/protocol-buffers-schema/tokenize.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){var t,r=function(e){return e.trim()};return e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(r).filter(Boolean).map((function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e})).map(r).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((t=!1,function(e){return"/*"===e?(t=!0,!1):"*/"===e?(t=!1,!1):!t}))}},
/*!***********************************************************!*\
  !*** ./node_modules/protocol-buffers-schema/stringify.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=function(e,t){var r=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(r="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(r="");var n=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return n&&(n=" ["+n+"]"),t.push((r?r+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+n+";"),t},n=function(e,t){t.push("message "+e.name+" {"),e.enums||(e.enums=[]),e.enums.forEach((function(e){t.push(i(e,[]))})),e.messages||(e.messages=[]),e.messages.forEach((function(e){t.push(n(e,[]))}));var s={};return e.fields||(e.fields=[]),e.fields.forEach((function(e){e.oneof?(s[e.oneof]||(s[e.oneof]=[]),s[e.oneof].push(r(e,[]))):t.push(r(e,[]))})),Object.keys(s).forEach((function(e){s[e].unshift("oneof "+e+" {"),s[e].push("}"),t.push(s[e])})),t.push("}",""),t},i=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var r=o(e.options,[]);return r.length>1&&t.push(r.slice(0,-1)),Object.keys(e.values).map((function(r){var n=s(e.values[r]);t.push([r+" = "+n+";"])})),t.push("}",""),t},s=function(e,t){var r=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return r&&(r=" ["+r+"]"),e.value+r},o=function(e,t){var r=Object.keys(e);return r.forEach((function(r){var n=e[r];~r.indexOf(".")&&(r="("+r+")");var i=typeof n;"object"===i?(n=a(n,[])).length&&t.push("option "+r+" = {",n,"};"):("string"===i&&"optimize_for"!==r&&(n='"'+n+'"'),t.push("option "+r+" = "+n+";"))})),r.length>0&&t.push(""),t},a=function(e,t){return Object.keys(e).forEach((function(r){var n=e[r],i=typeof n;"object"===i?Array.isArray(n)?n.forEach((function(e){(e=a(e,[])).length&&t.push(r+" {",e,"}")})):(n=a(n,[])).length&&t.push(r+" {",n,"}"):("string"===i&&(n='"'+n+'"'),t.push(r+": "+n))})),t},c=function(e,t){var r="rpc "+e.name+"(";e.client_streaming&&(r+="stream "),r+=e.input_type+") returns (",e.server_streaming&&(r+="stream "),r+=e.output_type+")",e.options||(e.options={});var n=o(e.options,[]);return n.length>1?t.push(r+" {",n.slice(0,-1),"}"):t.push(r+";"),t},u=function(e){return function(t){return Array.isArray(t)?t.map(u(e+"  ")).join("\n"):e+t}};e.exports=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),o(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){i(e,t)})),e.messages||(e.messages=[]),e.messages.forEach((function(e){n(e,t)})),e.services&&e.services.forEach((function(e){!function(e,t){t.push("service "+e.name+" {"),e.options||(e.options={}),o(e.options,t),e.methods||(e.methods=[]),e.methods.forEach((function(e){t.push(c(e,[]))})),t.push("}","")}(e,t)})),t.map(u("")).join("\n")}},
/*!***************************************************!*\
  !*** ./node_modules/protons/src/compile/index.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./encodings */567),i=r(/*! ./decode */569),s=r(/*! ./encode */570),o=r(/*! ./encoding-length */571),a=r(/*! varint */23);e.exports=function(e,t){var r={},c={},u={},h=function(e,t){e.enums&&e.enums.forEach((function(e){e.id=t+(t?".":"")+e.name,c[e.id]=e,h(e,e.id)})),e.messages&&e.messages.forEach((function(n){n.id=t+(t?".":"")+n.name,r[n.id]=n,n.fields.forEach((function(n){if(n.map){var i="Map_"+n.map.from+"_"+n.map.to,s={name:i,enums:[],messages:[],fields:[{name:"key",type:n.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:n.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:t+(t?".":"")+i};r[s.id]||(r[s.id]=s,e.messages.push(s)),n.type=i,n.repeated=!0}})),h(n,n.id)}))};h(e,"");var l=function(e,t){e.messages.forEach((function(r){t[r.name]=f(r.name,e.id)})),e.enums.forEach((function(e){t[e.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(r){t[r]=e[r].value})),t}(e.values)})),t.type=2,t.message=!0,t.name=e.name;var r={};e.fields.forEach((function(e){e.oneof&&(r[e.oneof]||(r[e.oneof]=[]),r[e.oneof].push(e.name))}));var n=e.fields.map((function(t){return f(t.type,e.id)})),a=o(e,n,r),c=s(e,f,n,r,a),u=i(e,f,n);return c.bytes=u.bytes=0,t.buffer=!0,t.encode=c,t.decode=u,t.encodingLength=a,t},f=function(e,i,s){if(t&&t[e])return t[e];if(n[e])return n[e];var o,h,f=(i?i+"."+e:e).split(".").map((function(t,r,n){return n.slice(0,r).concat(e).join(".")})).reverse().reduce((function(e,t){return e||r[t]||c[t]}),null);if(!1===s)return f;if(!f)throw new Error("Could not resolve "+e);return f.values?(o=f,h=Object.keys(o.values||[]).map((function(e){return parseInt(o.values[e].value,10)})),n.make(0,(function e(t,r,n){if(!h.length||-1===h.indexOf(t))throw new Error("Invalid enum value: "+t);return a.encode(t,r,n),e.bytes=a.encode.bytes,r}),(function e(t,r){var n=a.decode(t,r);if(!h.length||-1===h.indexOf(n))throw new Error("Invalid enum value: "+n);return e.bytes=a.decode.bytes,n}),a.encodingLength)):u[f.id]||l(f,u[f.id]={})};return(e.enums||[]).concat((e.messages||[]).map((function(e){return f(e.id)})))}},
/*!*******************************************************!*\
  !*** ./node_modules/protons/src/compile/encodings.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n,i,s,o=r(/*! varint */23),a=r(/*! signed-varint */568),c=r(/*! safe-buffer */6).Buffer,u=function(e,t,r,n){return t.bytes=r.bytes=0,{type:e,encode:t,decode:r,encodingLength:n}};t.make=u,t.bytes=(n=function(e){return c.isBuffer(e)?e.length:c.byteLength(e)},u(2,i=function(e,t,r){var s=r,a=n(e);return o.encode(a,t,r),r+=o.encode.bytes,c.isBuffer(e)?e.copy(t,r):t.write(e,r,a),r+=a,i.bytes=r-s,t},s=function(e,t){var r=t,n=o.decode(e,t);t+=o.decode.bytes;var i=e.slice(t,t+n);return t+=i.length,s.bytes=t-r,i},(function(e){var t=n(e);return o.encodingLength(t)+t}))),t.string=function(){var e=function(t,r,n){var i=n,s=c.byteLength(t);return o.encode(s,r,n,"utf-8"),n+=o.encode.bytes,r.write(t,n,s),n+=s,e.bytes=n-i,r},t=function(e,r){var n=r,i=o.decode(e,r);r+=o.decode.bytes;var s=e.toString("utf-8",r,r+i);return r+=i,t.bytes=r-n,s};return u(2,e,t,(function(e){var t=c.byteLength(e);return o.encodingLength(t)+t}))}(),t.bool=function(){var e=function(t,r,n){return r[n]=t?1:0,e.bytes=1,r},t=function(e,r){var n=e[r]>0;return t.bytes=1,n};return u(0,e,t,(function(e){return 1}))}(),t.int32=function(){var e=function(t,r){var n=o.decode(t,r);return e.bytes=o.decode.bytes,n>2147483647?n-4294967296:n};return u(0,o.encode,e,(function(e){return o.encodingLength(e<0?e+4294967296:e)}))}(),t.int64=function(){var e=function(t,r){var n=o.decode(t,r);if(n>=Math.pow(2,63)){for(var i=9;255===t[r+i-1];)i--;i=i||9;var s=c.allocUnsafe(i);t.copy(s,0,r,r+i),s[i-1]=127&s[i-1],n=-1*o.decode(s,0),e.bytes=10}else e.bytes=o.decode.bytes;return n},t=function(e,r,n){if(e<0){var i=n+9;for(o.encode(-1*e,r,n),r[n+=o.encode.bytes-1]=128|r[n];n<i-1;)r[++n]=255;r[i]=1,t.bytes=10}else o.encode(e,r,n),t.bytes=o.encode.bytes;return r};return u(0,t,e,(function(e){return e<0?10:o.encodingLength(e)}))}(),t.sint32=t.sint64=u(0,a.encode,a.decode,a.encodingLength),t.uint32=t.uint64=t.enum=t.varint=u(0,o.encode,o.decode,o.encodingLength),t.fixed64=t.sfixed64=function(){var e=function(t,r,n){return t.copy(r,n),e.bytes=8,r},t=function(e,r){var n=e.slice(r,r+8);return t.bytes=8,n};return u(1,e,t,(function(e){return 8}))}(),t.double=function(){var e=function(t,r,n){return r.writeDoubleLE(t,n),e.bytes=8,r},t=function(e,r){var n=e.readDoubleLE(r);return t.bytes=8,n};return u(1,e,t,(function(e){return 8}))}(),t.fixed32=function(){var e=function(t,r,n){return r.writeUInt32LE(t,n),e.bytes=4,r},t=function(e,r){var n=e.readUInt32LE(r);return t.bytes=4,n};return u(5,e,t,(function(e){return 4}))}(),t.sfixed32=function(){var e=function(t,r,n){return r.writeInt32LE(t,n),e.bytes=4,r},t=function(e,r){var n=e.readInt32LE(r);return t.bytes=4,n};return u(5,e,t,(function(e){return 4}))}(),t.float=function(){var e=function(t,r,n){return r.writeFloatLE(t,n),e.bytes=4,r},t=function(e,r){var n=e.readFloatLE(r);return t.bytes=4,n};return u(5,e,t,(function(e){return 4}))}()},
/*!*********************************************!*\
  !*** ./node_modules/signed-varint/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! varint */23);t.encode=function e(t,r,i){t=t>=0?2*t:-2*t-1;var s=n.encode(t,r,i);return e.bytes=n.encode.bytes,s},t.decode=function e(t,r){var i=n.decode(t,r);return e.bytes=n.decode.bytes,1&i?(i+1)/-2:i/2},t.encodingLength=function(e){return n.encodingLength(e>=0?2*e:-2*e-1)}},
/*!****************************************************!*\
  !*** ./node_modules/protons/src/compile/decode.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! varint */23),i=r(/*! ./utils */183).defined;var s=function(e,t,r){switch(e){case 0:return n.decode(t,r),r+n.decode.bytes;case 1:return r+8;case 2:var i=n.decode(t,r);return r+n.decode.bytes+i;case 3:case 4:throw new Error("Groups are not supported");case 5:return r+4;default:throw new Error("Unknown wire type: "+e)}},o=function(e,t){if(e.map)return{};if(e.repeated)return[];switch(e.type){case"string":return null!=t?t:"";case"bool":return"true"===t;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return parseInt(t||0,10);default:return null}};e.exports=function(e,t,r){for(var a=[],c={},u=[],h=[],l=0;l<r.length;l++){var f=e.fields[l];c[f.tag]=l;var d=f.options&&f.options.default,p=t(f.type,e.id,!1);h[l]=[d,p&&p.values],e.fields[l].packed=f.repeated&&f.options&&f.options.packed&&"false"!==f.options.packed,f.required&&a.push(f.name),f.oneof&&u.push(f.name)}function A(e,t,r,i,s,o){var a=t.name;if(t.oneof)for(var c=Object.keys(r),h=0;h<c.length;h++)u.indexOf(c[h])>-1&&delete r[c[h]];if(e.message){var l=n.decode(i,s);s+=n.decode.bytes;var f=e.decode(i,s,s+l);t.map?(r[a]=r[a]||{},r[a][f.key]=f.value):t.repeated?(r[a]=r[a]||[],r[a].push(f)):r[a]=f}else t.repeated?(r[a]=r[a]||[],r[a].push(e.decode(i,s))):r[a]=e.decode(i,s);return s+=e.decode.bytes}return function t(l,f,d){if(null==f&&(f=0),null==d&&(d=l.length),!(d<=l.length&&f<=l.length))throw new Error("Decoded message is not valid");for(var p,g=f,y={};;){if(d<=f){var m,_,b="",w=0;for(w=0;w<a.length;w++)if(b=a[w],!i(y[b]))throw new Error("Decoded message is not valid, missing required field: "+b);for(w=0;w<r.length;w++)if(p=e.fields[w],_=h[w][0],m=h[w][1],b=p.name,!i(y[b])){var v=!1;if(p.oneof)for(var E=Object.keys(y),S=0;S<E.length;S++)if(u.indexOf(E[S])>-1){v=!0;break}v||(m?p.repeated?y[b]=[]:(_=_&&m[_]?m[_].value:m[Object.keys(m)[0]].value,y[b]=parseInt(_||0,10)):y[b]=o(p,_))}return t.bytes=f-g,y}var C=n.decode(l,f);f+=n.decode.bytes;var k=c[C>>3];if(null!=k){var I=r[k];if((p=e.fields[k]).packed){var T=n.decode(l,f);for(T+=f+=n.decode.bytes;f<T;)f=A(I,p,y,l,f)}else f=A(I,p,y,l,f)}else f=s(7&C,l,f)}}}},
/*!****************************************************!*\
  !*** ./node_modules/protons/src/compile/encode.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){var n=r(/*! ./utils */183).defined,i=r(/*! varint */23);e.exports=function(e,r,s,o,a){for(var c=Object.keys(o),u=s.length,h={},l=0;l<u;l++){h[l]={p:i.encode(e.fields[l].tag<<3|2),h:i.encode(e.fields[l].tag<<3|s[l].type)};var f=e.fields[l];e.fields[l].packed=f.repeated&&f.options&&f.options.packed&&"false"!==f.options.packed}function d(e,t,r,n,s,o){var a=0;if(!s)for(a=0;a<r.length;a++)e[t++]=r[a];return n.message&&(i.encode(n.encodingLength(o),e,t),t+=i.encode.bytes),n.encode(o,e,t),t+n.encode.bytes}return function r(l,f,p){null==p&&(p=0),null==f&&(f=t.allocUnsafe(a(l)));var A=p,g=Object.keys(l),y=0,m=!1;for(y=0;y<c.length;y++){var _=c[y],b=o[y];if(g.indexOf(b)>-1){if(m)throw new Error("only one of the properties defined in oneof "+_+" can be set");m=!0}}for(y=0;y<u;y++){var w=s[y],v=e.fields[y],E=l[v.name],S=0;if(n(E)){var C,k=h[y].p,I=h[y].h,T=v.packed;if(v.map){var R=Object.keys(E);for(S=0;S<R.length;S++)R[S]={key:R[S],value:E[R[S]]};E=R}if(T){var N=0;for(S=0;S<E.length;S++)n(E[S])&&(N+=w.encodingLength(E[S]));if(N){for(S=0;S<I.length;S++)f[p++]=k[S];i.encode(N,f,p),p+=i.encode.bytes}}if(v.repeated)for(S=0;S<E.length;S++)C=E[S],n(C)&&(p=d(f,p,I,w,T,C));else p=d(f,p,I,w,T,E)}else if(v.required)throw new Error(v.name+" is required")}return r.bytes=p-A,f}}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************!*\
  !*** ./node_modules/protons/src/compile/encoding-length.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./utils */183).defined,i=r(/*! varint */23);e.exports=function(e,t,r){for(var s=Object.keys(r),o=t.length,a=new Array(o),c=0;c<e.fields.length;c++){a[c]=i.encodingLength(e.fields[c].tag<<3|t[c].type);var u=e.fields[c];e.fields[c].packed=u.repeated&&u.options&&u.options.packed&&"false"!==u.options.packed}return function(c){var u=0,h=0,l=0;for(h=0;h<s.length;h++){var f=s[h],d=r[f],p=!1;for(l=0;l<d.length;l++)if(n(c[d[l]])){if(p)throw new Error("only one of the properties defined in oneof "+f+" can be set");p=!0}}for(h=0;h<o;h++){var A,g=t[h],y=e.fields[h],m=c[y.name],_=a[h];if(n(m)){if(y.map){var b=Object.keys(m);for(l=0;l<b.length;l++)b[l]={key:b[l],value:m[b[l]]};m=b}if(y.packed){var w=0;for(l=0;l<m.length;l++)n(m[l])&&(w+=A=g.encodingLength(m[l]),g.message&&(w+=i.encodingLength(A)));w&&(u+=_+w+i.encodingLength(w))}else if(y.repeated)for(l=0;l<m.length;l++)n(m[l])&&(u+=_+(A=g.encodingLength(m[l]))+(g.message?i.encodingLength(A):0));else u+=_+(A=g.encodingLength(m))+(g.message?i.encodingLength(A):0)}else if(y.required)throw new Error(y.name+" is required")}return u}}},
/*!************************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/dag-node/toDagLink.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../dag-link/dagLink */73),i=r(/*! ../genCid */294);e.exports=async(e,t={})=>{const r=await i.cid(e.serialize(),t);return new n(t.name||"",e.size,r)}},
/*!**********************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/dag-node/addLink.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./sortLinks */291),i=r(/*! ../dag-link */295);e.exports=(e,t)=>{const r=(e=>{if(i.isDAGLink(e))return e;if(!("cid"in e||"hash"in e||"Hash"in e||"multihash"in e))throw new Error("Link must be a DAGLink or DAGLink-like. Convert the DAGNode into a DAGLink via `node.toDAGLink()`.");return new i(e.Name||e.name,e.Tsize||e.size,e.Hash||e.multihash||e.hash||e.cid)})(t);e._links.push(r),e._links=n(e._links)}},
/*!*******************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/dag-link/util.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./dagLink */73);e.exports.createDagLinkFromB58EncodedHash=function(e){return new n(e.Name||e.name||"",e.Tsize||e.Size||e.size||0,e.Hash||e.hash||e.multihash||e.cid)}},
/*!*********************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/dag-node/rmLink.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! cids */4);e.exports=(e,r)=>{if("string"==typeof r)e._links=e._links.filter(e=>e.Name!==r);else{if(!t.isBuffer(r)&&!n.isCID(r))throw new Error("second arg needs to be a name or CID");e._links=e._links.filter(e=>!e.Hash.equals(r))}}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************************!*\
  !*** ./node_modules/ipld-dag-pb/src/resolver.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! cids */4),i=r(/*! ./util */296);t.resolve=(e,t)=>{let r=i.deserialize(e);const s=t.split("/").filter(Boolean);for(;s.length;){const e=s.shift();if(void 0===r[e]){for(const t of r.Links)if(t.Name===e)return{value:t.Hash,remainderPath:s.join("/")};throw new Error(`Object has no property '${e}'`)}if(r=r[e],n.isCID(r))return{value:r,remainderPath:s.join("/")}}return{value:r,remainderPath:""}},t.tree=function*(e){const t=i.deserialize(e);yield"Data",yield"Links";for(let e=0;e<t.Links.length;e++)yield`Links/${e}`,yield`Links/${e}/Name`,yield`Links/${e}/Tsize`,yield`Links/${e}/Hash`}},
/*!********************************************!*\
  !*** ./node_modules/typical/dist/index.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){!function(e){"use strict";function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function n(e){return i(e)&&"number"==typeof e.length}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0!==e}function o(e){return!s(e)}function a(e){return null===e}function c(e){return s(e)&&!a(e)&&!Number.isNaN(e)}function u(e){return"function"==typeof e&&/^class /.test(Function.prototype.toString.call(e))}function h(e){if(null===e)return!0;switch(typeof e){case"string":case"number":case"symbol":case"undefined":case"boolean":return!0;default:return!1}}function l(e){if(e){const t=s(Promise)&&e instanceof Promise,r=e.then&&"function"==typeof e.then;return!(!t&&!r)}return!1}function f(e){return!(null===e||!s(e)||"function"!=typeof e[Symbol.iterator]&&"function"!=typeof e[Symbol.asyncIterator])}function d(e){return"string"==typeof e}function p(e){return"function"==typeof e}var A={isNumber:t,isPlainObject:r,isArrayLike:n,isObject:i,isDefined:s,isUndefined:o,isNull:a,isDefinedValue:c,isClass:u,isPrimitive:h,isPromise:l,isIterable:f,isString:d,isFunction:p};e.default=A,e.isArrayLike=n,e.isClass=u,e.isDefined=s,e.isDefinedValue=c,e.isFunction=p,e.isIterable=f,e.isNull=a,e.isNumber=t,e.isObject=i,e.isPlainObject=r,e.isPrimitive=h,e.isPromise=l,e.isString=d,e.isUndefined=o,Object.defineProperty(e,"__esModule",{value:!0})}(t)},
/*!***************************************!*\
  !*** ./node_modules/ipld/src/util.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.first=async e=>{for await(const t of e)return t},t.last=async e=>{let t;for await(t of e);return t},t.all=async e=>{const t=[];for await(const r of e)t.push(r);return t},t.extendIterator=e=>(e.first=()=>t.first(e),e.last=()=>t.last(e),e.all=()=>t.all(e),e)},
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i,s,o,a,c=1,u={},h=!1,l=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){p(e.data)},n=function(e){s.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,n=function(e){var t=l.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(o+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return u[c]=i,n(c),c++},f.clearImmediate=d}function d(e){delete u[e]}function p(e){if(h)setTimeout(p,0,e);else{var t=u[e];if(t){h=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{d(e),h=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(/*! ./../webpack/buildin/global.js */10),r(/*! ./../process/browser.js */2))},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/baseN.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var r={};e.exports=r;var n={};r.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var c=0,u=e[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%s,u=u/s|0;for(;u>0;)a.push(u%s),u=u/s|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}else n=function(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var o=0,a=e.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var c="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=t[s[r]];return c}(e,t);if(r){var h=new RegExp(".{1,"+r+"}","g");n=n.match(h).join("\r\n")}return n},r.decode=function(e,r){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof r)throw new TypeError('"alphabet" must be a string.');var i=n[r];if(!i){i=n[r]=[];for(var s=0;s<r.length;++s)i[r.charCodeAt(s)]=s}e=e.replace(/\s/g,"");var o=r.length,a=r.charAt(0),c=[0];for(s=0;s<e.length;s++){var u=i[e.charCodeAt(s)];if(void 0===u)return;for(var h=0,l=u;h<c.length;++h)l+=c[h]*o,c[h]=255&l,l>>=8;for(;l>0;)c.push(255&l),l>>=8}for(var f=0;e[f]===a&&f<e.length-1;++f)c.push(0);return void 0!==t?t.from(c.reverse()):new Uint8Array(c.reverse())}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/pkcs1.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./util */16),r(/*! ./random */75),r(/*! ./sha1 */301);var i=e.exports=n.pkcs1=n.pkcs1||{};function s(e,t,r){r||(r=n.md.sha1.create());for(var i="",s=Math.ceil(t/r.digestLength),o=0;o<s;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(e+a),i+=r.digest().getBytes()}return i.substring(0,t)}i.encode_rsa_oaep=function(e,t,r){var i,o,a,c;"string"==typeof r?(i=r,o=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,o=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),c||(c=a);var u=Math.ceil(e.n.bitLength()/8),h=u-2*a.digestLength-2;if(t.length>h)throw(g=new Error("RSAES-OAEP input message length is too long.")).length=t.length,g.maxLength=h,g;i||(i=""),a.update(i,"raw");for(var l=a.digest(),f="",d=h-t.length,p=0;p<d;p++)f+="\0";var A=l.getBytes()+f+""+t;if(o){if(o.length!==a.digestLength){var g;throw(g=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,g.digestLength=a.digestLength,g}}else o=n.random.getBytes(a.digestLength);var y=s(o,u-a.digestLength-1,c),m=n.util.xorBytes(A,y,A.length),_=s(m,a.digestLength,c),b=n.util.xorBytes(o,_,o.length);return"\0"+b+m},i.decode_rsa_oaep=function(e,t,r){var i,o,a;"string"==typeof r?(i=r,o=arguments[3]||void 0):r&&(i=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var c=Math.ceil(e.n.bitLength()/8);if(t.length!==c)throw(m=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,m.expectedLength=c,m;if(void 0===o?o=n.md.sha1.create():o.start(),a||(a=o),c<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),o.update(i,"raw");for(var u=o.digest().getBytes(),h=t.charAt(0),l=t.substring(1,o.digestLength+1),f=t.substring(1+o.digestLength),d=s(f,o.digestLength,a),p=n.util.xorBytes(l,d,l.length),A=s(p,c-o.digestLength-1,a),g=n.util.xorBytes(f,A,f.length),y=g.substring(0,o.digestLength),m="\0"!==h,_=0;_<o.digestLength;++_)m|=u.charAt(_)!==y.charAt(_);for(var b=1,w=o.digestLength,v=o.digestLength;v<g.length;v++){var E=g.charCodeAt(v),S=1&E^1,C=b?65534:0;m|=E&C,w+=b&=S}if(m||1!==g.charCodeAt(w))throw new Error("Invalid RSAES-OAEP padding.");return g.substring(w+1)}},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/sha256.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./md */59),r(/*! ./util */16);var i=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){o||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var e=null,t=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var a=s.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=a[1],a[1]=a[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(s),c(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var a,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-u));for(var h=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)h+=(a=8*i.fullMessageLength[l+1])/4294967296>>>0,o.putInt32(h>>>0),h=a>>>0;o.putInt32(h);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};c(f,r,o);var d=n.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d.putInt32(f.h5),d.putInt32(f.h6),d.putInt32(f.h7),d},i};var s=null,o=!1,a=null;function c(e,t,r){for(var n,i,s,o,c,u,h,l,f,d,p,A,g,y=r.length();y>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=((n=t[c-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=t[c-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(u=e.h0,h=e.h1,l=e.h2,f=e.h3,d=e.h4,p=e.h5,A=e.h6,g=e.h7,c=0;c<64;++c)s=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),o=u&h|l&(u^h),n=g+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(A^d&(p^A))+a[c]+t[c],g=A,A=p,p=d,d=f+n>>>0,f=l,l=h,h=u,u=n+(i=s+o)>>>0;e.h0=e.h0+u|0,e.h1=e.h1+h|0,e.h2=e.h2+l|0,e.h3=e.h3+f|0,e.h4=e.h4+d|0,e.h5=e.h5+p|0,e.h6=e.h6+A|0,e.h7=e.h7+g|0,y-=64}}},
/*!************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/prng.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! ./forge */11);r(/*! ./util */16);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||t.versions["node-webkit"]||(i=r(/*! crypto */187)),(e.exports=n.prng=n.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,s=new Array(32),o=0;o<32;++o)s[o]=r.create();function a(){if(t.pools[0].messageLength>=32)return c();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),c()}function c(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r==0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var i=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(i),t.generated=0}function u(e){var t=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(t=function(e){return i.getRandomValues(e)});var s=n.util.createBuffer();if(t)for(;s.length()<e;){var o=Math.max(1,Math.min(e-s.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{t(a);for(var c=0;c<a.length;++c)s.putInt32(a[c])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(s.length()<e)for(var u,h,l,f=Math.floor(65536*Math.random());s.length()<e;){h=16807*(65535&f),h+=(32767&(u=16807*(f>>16)))<<16,f=4294967295&(h=(2147483647&(h+=u>>15))+(h>>31));for(c=0;c<3;++c)l=f>>>(c<<3),l^=Math.floor(256*Math.random()),s.putByte(String.fromCharCode(255&l))}return s.getBytes(e)}return t.pools=s,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var i=t.plugin.cipher,s=t.plugin.increment,o=t.plugin.formatKey,a=t.plugin.formatSeed,u=n.util.createBuffer();t.key=null,function h(l){if(l)return r(l);if(u.length()>=e)return r(null,u.getBytes(e));t.generated>1048575&&(t.key=null);if(null===t.key)return n.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return c(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,(function(r,n){if(r)return e(r);t.collect(n),c(),e()}))}(h)}));var f=i(t.key,t.seed);t.generated+=f.length;u.putBytes(f);t.key=o(i(t.key,s(t.seed)));t.seed=a(i(t.key,t.seed));n.util.setImmediate(h)}()},t.generateSync=function(e){var r=t.plugin.cipher,i=t.plugin.increment,s=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;for(var c=n.util.createBuffer();c.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&a();var u=r(t.key,t.seed);t.generated+=u.length,c.putBytes(u),t.key=s(r(t.key,i(t.seed))),t.seed=o(r(t.key,t.seed))}return c.getBytes(e)},i?(t.seedFile=function(e,t){i.randomBytes(e,(function(e,r){if(e)return t(e);t(null,r.toString())}))},t.seedFileSync=function(e){return i.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,u(e))}catch(e){t(e)}},t.seedFileSync=u),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(e>>i&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener("message",(function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,(function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})}))}))}},t}}).call(this,r(/*! ./../../../../process/browser.js */2))},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/prime.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./util */16),r(/*! ./jsbn */185),r(/*! ./random */75),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],s=new r(null);s.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,i){"function"==typeof t&&(i=t,t={});var s=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof s&&(s={name:s}),s.options=s.options||{};var o=t.prng||n.random,u={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===s.name)return function(e,t,i,s){if("workers"in i)return function(e,t,i,s){if("undefined"==typeof Worker)return a(e,t,i,s);var o=c(e,t),u=i.workers,h=i.workLoad||100,l=30*h/8,f=i.workerScript||"forge/prime.worker.js";if(-1===u)return n.util.estimateCores((function(e,t){e&&(t=2),u=t-1,d()}));function d(){u=Math.max(1,u);for(var n=[],i=0;i<u;++i)n[i]=new Worker(f);for(i=0;i<u;++i)n[i].addEventListener("message",d);var a=!1;function d(i){if(!a){0;var u=i.data;if(u.found){for(var f=0;f<n.length;++f)n[f].terminate();return a=!0,s(null,new r(u.prime,16))}o.bitLength()>e&&(o=c(e,t));var d=o.toString(16);i.target.postMessage({hex:d,workLoad:h}),o.dAddOffset(l,0)}}}d()}(e,t,i,s);return a(e,t,i,s)}(e,u,s.options,i);throw new Error("Invalid prime generation algorithm: "+s.name)}}function a(e,t,r,s){var o=c(e,t),a=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(o.bitLength());"millerRabinTests"in r&&(a=r.millerRabinTests);var u=10;"maxBlockTime"in r&&(u=r.maxBlockTime),function e(t,r,s,o,a,u,h){var l=+new Date;do{if(t.bitLength()>r&&(t=c(r,s)),t.isProbablePrime(a))return h(null,t);t.dAddOffset(i[o++%8],0)}while(u<0||+new Date-l<u);n.util.setImmediate((function(){e(t,r,s,o,a,u,h)}))}(o,e,t,0,a,u,s)}function c(e,t){var n=new r(e,t),i=e-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),o,n),n.dAddOffset(31-n.mod(s).byteValue(),0),n}}()},
/*!***********************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/rc2.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./util */16);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],o=function(e,t){return e<<t&65535|(65535&e)>>16-t},a=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"==typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,s=e,o=e.length(),a=t,c=Math.ceil(a/8),u=255>>(7&a);for(r=o;r<128;r++)s.putByte(i[s.at(r-1)+s.at(r-o)&255]);for(s.setAt(128-c,i[s.at(128-c)&u]),r=127-c;r>=0;r--)s.setAt(r,i[s.at(r+1)^s.at(r+c)]);return s};var c=function(e,t,r){var i,c,u,h,l=!1,f=null,d=null,p=null,A=[];for(e=n.rc2.expandKey(e,t),u=0;u<64;u++)A.push(e.getInt16Le());r?(i=function(e){for(u=0;u<4;u++)e[u]+=A[h]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),e[u]=o(e[u],s[u]),h++},c=function(e){for(u=0;u<4;u++)e[u]+=A[63&e[(u+3)%4]]}):(i=function(e){for(u=3;u>=0;u--)e[u]=a(e[u],s[u]),e[u]-=A[h]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),h--},c=function(e){for(u=3;u>=0;u--)e[u]-=A[63&e[(u+3)%4]]});var g=function(e){var t=[];for(u=0;u<4;u++){var n=f.getInt16Le();null!==p&&(r?n^=p.getInt16Le():p.putInt16Le(n)),t.push(65535&n)}h=r?0:63;for(var i=0;i<e.length;i++)for(var s=0;s<e[i][0];s++)e[i][1](t);for(u=0;u<4;u++)null!==p&&(r?p.putInt16Le(t[u]):t[u]^=p.getInt16Le()),d.putInt16Le(t[u])},y=null;return y={start:function(e,t){e&&"string"==typeof e&&(e=n.util.createBuffer(e)),l=!1,f=n.util.createBuffer(),d=t||new n.util.createBuffer,p=e,y.output=d},update:function(e){for(l||f.putBuffer(e);f.length()>=8;)g([[5,i],[1,c],[6,i],[1,c],[5,i]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,f,!r);else{var n=8===f.length()?8:8-f.length();f.fillWithByte(n,n)}if(t&&(l=!0,y.update()),!r&&(t=0===f.length()))if(e)t=e(8,d,!r);else{var i=d.length(),s=d.at(i-1);s>i?t=!1:d.truncate(s)}return t}}};n.rc2.startEncrypting=function(e,t,r){var i=n.rc2.createEncryptionCipher(e,128);return i.start(t,r),i},n.rc2.createEncryptionCipher=function(e,t){return c(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var i=n.rc2.createDecryptionCipher(e,128);return i.start(t,r),i},n.rc2.createDecryptionCipher=function(e,t){return c(e,t,!1)}},
/*!**********************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/rsa-class.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multihashing-async */304),i=r(/*! protons */28),s=r(/*! bs58 */47),o=r(/*! async/nextTick */35),a=r(/*! ./rsa */592),c=i(r(/*! ./keys.proto */184));r(/*! node-forge/lib/sha512 */608),r(/*! node-forge/lib/pbe */134);const u=r(/*! node-forge/lib/forge */11);class h{constructor(e){this._key=e}verify(e,t,r){d(r),a.hashAndVerify(this._key,t,e,r)}marshal(){return a.utils.jwkToPkix(this._key)}get bytes(){return c.PublicKey.encode({Type:c.KeyType.RSA,Data:this.marshal()})}encrypt(e,t){return l(()=>a.encrypt(this._key,e),t)}equals(e){return this.bytes.equals(e.bytes)}hash(e){d(e),n(this.bytes,"sha2-256",e)}}function l(e,t){let r;try{r=e()}catch(e){t(e)}return t(null,r)}class f{constructor(e,t){this._key=e,this._publicKey=t}genSecret(){return a.getRandomValues(16)}sign(e,t){d(t),a.hashAndSign(this._key,e,t)}get public(){if(!this._publicKey)throw new Error("public key not provided");return new h(this._publicKey)}decrypt(e,t){l(()=>a.decrypt(this._key,e),t)}marshal(){return a.utils.jwkToPkcs1(this._key)}get bytes(){return c.PrivateKey.encode({Type:c.KeyType.RSA,Data:this.marshal()})}equals(e){return this.bytes.equals(e.bytes)}hash(e){d(e),n(this.bytes,"sha2-256",e)}id(e){this.public.hash((t,r)=>{if(t)return e(t);e(null,s.encode(r))})}export(e,t,r){"function"==typeof t&&(r=t,t=e,e="pkcs-8"),d(r),o(()=>{let n=null,i=null;try{const r=new u.util.ByteBuffer(this.marshal()),s=u.asn1.fromDer(r),o=u.pki.privateKeyFromAsn1(s);if("pkcs-8"===e){const e={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};i=u.pki.encryptRsaPrivateKey(o,t,e)}else n=new Error(`Unknown export format '${e}'`)}catch(e){n=e}r(n,i)})}}function d(e){if("function"!=typeof e)throw new Error("callback is required")}e.exports={RsaPublicKey:h,RsaPrivateKey:f,unmarshalRsaPublicKey:function(e){const t=a.utils.pkixToJwk(e);return new h(t)},unmarshalRsaPrivateKey:function(e,t){const r=a.utils.pkcs1ToJwk(e);a.unmarshalPrivateKey(r,(e,r)=>{if(e)return t(e);t(null,new f(r.privateKey,r.publicKey))})},generateKeyPair:function(e,t){a.generateKey(e,(e,r)=>{if(e)return t(e);t(null,new f(r.privateKey,r.publicKey))})},fromJwk:function(e,t){a.unmarshalPrivateKey(e,(e,r)=>{if(e)return t(e);t(null,new f(r.privateKey,r.publicKey))})}}},
/*!**********************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/multihashing-async/src/crypto.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! js-sha3 */49),i=r(/*! murmurhash3js */101),s=r(/*! ./utils */305),o=r(/*! ./crypto-sha1-2 */589),a=s.toCallback,c=s.toBuf,u=s.fromString,h=s.fromNumberTo32BitBuf;e.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(n.sha3_512)),sha3384:a(c(n.sha3_384)),sha3256:a(c(n.sha3_256)),sha3224:a(c(n.sha3_224)),shake128:a(c(n.shake_128,128)),shake256:a(c(n.shake_256,256)),keccak224:a(c(n.keccak_224)),keccak256:a(c(n.keccak_256)),keccak384:a(c(n.keccak_384)),keccak512:a(c(n.keccak_512)),murmur3128:a(c(u(i.x64.hash128))),murmur332:a(h(u(i.x86.hash32))),addBlake:r(/*! ./blake */591),dblSha2256:(e,r)=>{o.sha2256(e,(e,n)=>{e&&r(e),o.sha2256(t.from(n),r)})}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************************!*\
  !*** ./node_modules/murmurhash3js/lib/murmurHash3js.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){!function(r,n){"use strict";var i={version:"3.0.1",x86:{},x64:{}};function s(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function o(e,t){return e<<t|e>>>32-t}function a(e){return e=s(e^=e>>>16,2246822507),e=s(e^=e>>>13,3266489909),e^=e>>>16}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function h(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function l(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function f(e,t){return[e[0]^t[0],e[1]^t[1]]}function d(e){return e=f(e,[0,e[0]>>>1]),e=f(e=u(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=f(e=u(e,[3301882366,444984403]),[0,e[0]>>>1])}i.x86.hash32=function(e,t){t=t||0;for(var r=(e=e||"").length%4,n=e.length-r,i=t,c=0,u=3432918353,h=461845907,l=0;l<n;l+=4)c=s(c=255&e.charCodeAt(l)|(255&e.charCodeAt(l+1))<<8|(255&e.charCodeAt(l+2))<<16|(255&e.charCodeAt(l+3))<<24,u),c=s(c=o(c,15),h),i=s(i=o(i^=c,13),5)+3864292196;switch(c=0,r){case 3:c^=(255&e.charCodeAt(l+2))<<16;case 2:c^=(255&e.charCodeAt(l+1))<<8;case 1:c=s(c^=255&e.charCodeAt(l),u),i^=c=s(c=o(c,15),h)}return(i=a(i^=e.length))>>>0},i.x86.hash128=function(e,t){t=t||0;for(var r=(e=e||"").length%16,n=e.length-r,i=t,c=t,u=t,h=t,l=0,f=0,d=0,p=0,A=597399067,g=2869860233,y=951274213,m=2716044179,_=0;_<n;_+=16)l=255&e.charCodeAt(_)|(255&e.charCodeAt(_+1))<<8|(255&e.charCodeAt(_+2))<<16|(255&e.charCodeAt(_+3))<<24,f=255&e.charCodeAt(_+4)|(255&e.charCodeAt(_+5))<<8|(255&e.charCodeAt(_+6))<<16|(255&e.charCodeAt(_+7))<<24,d=255&e.charCodeAt(_+8)|(255&e.charCodeAt(_+9))<<8|(255&e.charCodeAt(_+10))<<16|(255&e.charCodeAt(_+11))<<24,p=255&e.charCodeAt(_+12)|(255&e.charCodeAt(_+13))<<8|(255&e.charCodeAt(_+14))<<16|(255&e.charCodeAt(_+15))<<24,l=o(l=s(l,A),15),i=o(i^=l=s(l,g),19),i=s(i+=c,5)+1444728091,f=o(f=s(f,g),16),c=o(c^=f=s(f,y),17),c=s(c+=u,5)+197830471,d=o(d=s(d,y),17),u=o(u^=d=s(d,m),15),u=s(u+=h,5)+2530024501,p=o(p=s(p,m),18),h=o(h^=p=s(p,A),13),h=s(h+=i,5)+850148119;switch(l=0,f=0,d=0,p=0,r){case 15:p^=e.charCodeAt(_+14)<<16;case 14:p^=e.charCodeAt(_+13)<<8;case 13:p=s(p^=e.charCodeAt(_+12),m),h^=p=s(p=o(p,18),A);case 12:d^=e.charCodeAt(_+11)<<24;case 11:d^=e.charCodeAt(_+10)<<16;case 10:d^=e.charCodeAt(_+9)<<8;case 9:d=s(d^=e.charCodeAt(_+8),y),u^=d=s(d=o(d,17),m);case 8:f^=e.charCodeAt(_+7)<<24;case 7:f^=e.charCodeAt(_+6)<<16;case 6:f^=e.charCodeAt(_+5)<<8;case 5:f=s(f^=e.charCodeAt(_+4),g),c^=f=s(f=o(f,16),y);case 4:l^=e.charCodeAt(_+3)<<24;case 3:l^=e.charCodeAt(_+2)<<16;case 2:l^=e.charCodeAt(_+1)<<8;case 1:l=s(l^=e.charCodeAt(_),A),i^=l=s(l=o(l,15),g)}return i^=e.length,i+=c^=e.length,i+=u^=e.length,c+=i+=h^=e.length,u+=i,h+=i,i=a(i),i+=c=a(c),i+=u=a(u),c+=i+=h=a(h),u+=i,h+=i,("00000000"+(i>>>0).toString(16)).slice(-8)+("00000000"+(c>>>0).toString(16)).slice(-8)+("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)},i.x64.hash128=function(e,t){t=t||0;for(var r=(e=e||"").length%16,n=e.length-r,i=[0,t],s=[0,t],o=[0,0],a=[0,0],p=[2277735313,289559509],A=[1291169091,658871167],g=0;g<n;g+=16)o=[255&e.charCodeAt(g+4)|(255&e.charCodeAt(g+5))<<8|(255&e.charCodeAt(g+6))<<16|(255&e.charCodeAt(g+7))<<24,255&e.charCodeAt(g)|(255&e.charCodeAt(g+1))<<8|(255&e.charCodeAt(g+2))<<16|(255&e.charCodeAt(g+3))<<24],a=[255&e.charCodeAt(g+12)|(255&e.charCodeAt(g+13))<<8|(255&e.charCodeAt(g+14))<<16|(255&e.charCodeAt(g+15))<<24,255&e.charCodeAt(g+8)|(255&e.charCodeAt(g+9))<<8|(255&e.charCodeAt(g+10))<<16|(255&e.charCodeAt(g+11))<<24],o=h(o=u(o,p),31),i=c(i=h(i=f(i,o=u(o,A)),27),s),i=c(u(i,[0,5]),[0,1390208809]),a=h(a=u(a,A),33),s=c(s=h(s=f(s,a=u(a,p)),31),i),s=c(u(s,[0,5]),[0,944331445]);switch(o=[0,0],a=[0,0],r){case 15:a=f(a,l([0,e.charCodeAt(g+14)],48));case 14:a=f(a,l([0,e.charCodeAt(g+13)],40));case 13:a=f(a,l([0,e.charCodeAt(g+12)],32));case 12:a=f(a,l([0,e.charCodeAt(g+11)],24));case 11:a=f(a,l([0,e.charCodeAt(g+10)],16));case 10:a=f(a,l([0,e.charCodeAt(g+9)],8));case 9:a=u(a=f(a,[0,e.charCodeAt(g+8)]),A),s=f(s,a=u(a=h(a,33),p));case 8:o=f(o,l([0,e.charCodeAt(g+7)],56));case 7:o=f(o,l([0,e.charCodeAt(g+6)],48));case 6:o=f(o,l([0,e.charCodeAt(g+5)],40));case 5:o=f(o,l([0,e.charCodeAt(g+4)],32));case 4:o=f(o,l([0,e.charCodeAt(g+3)],24));case 3:o=f(o,l([0,e.charCodeAt(g+2)],16));case 2:o=f(o,l([0,e.charCodeAt(g+1)],8));case 1:o=u(o=f(o,[0,e.charCodeAt(g)]),p),i=f(i,o=u(o=h(o,31),A))}return i=c(i=f(i,[0,e.length]),s=f(s,[0,e.length])),s=c(s,i),i=c(i=d(i),s=d(s)),s=c(s,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=i),t.murmurHash3=i}()},
/*!*************************************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/multihashing-async/src/crypto-sha1-2-browser.js ***!
  \*************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! nodeify */102),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(r,s)=>{const o=i.digest({name:e},r);if("function"!=typeof o.then)return o.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(o.oncomplete=e=>{s(null,e.target.result)});n(o.then(e=>t.from(new Uint8Array(e))),s)}}e.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************!*\
  !*** ./node_modules/promise/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n,i=r(/*! is-promise */306);n="function"==typeof setImediate?setImediate:"object"==typeof t&&t&&t.nextTick?t.nextTick:function(e){setTimeout(e,0)};var s=[];function o(e){if(!(this instanceof o))return"function"==typeof e?new o(e):(r=new o((function(e){t=e})),{resolver:t,promise:r});var t,r,a,c=!1,u=!1,h=[],l=!1;function f(e){h.length?(l=!0,h.shift()(e||!1)):l=!1}this.then=function(e,t){return new o((function(r){h.push((function(i){var s=u?e:t;if("function"==typeof s){function o(){var e;try{e=s(a)}catch(e){return r.reject(e),f()}r.fulfill(e),f(!0)}i?o():n(o)}else u?(r.fulfill(a),f(i)):(r.reject(a),f(i))})),c&&!l&&f()}))},function(){function t(e){c||(c=!0,u=!1,a=e,f())}for(var r={fulfill:function e(r){c||(i(r)?r.then(e,t):(c=u=!0,a=r,f()))},reject:t},n=0;n<s.length;n++)s[n](this,r);if("function"==typeof e)try{e(r)}catch(e){r.reject(e)}}()}e.exports=o,o.use=function(e){s.push(e)}}).call(this,r(/*! ./../process/browser.js */2))},
/*!*********************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/multihashing-async/src/blake.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! blakejs */50),i=r(/*! ./utils */305).toCallback,s={init:n.blake2bInit,update:n.blake2bUpdate,digest:n.blake2bFinal},o={init:n.blake2sInit,update:n.blake2sUpdate,digest:n.blake2sFinal},a=(e,r)=>i(n=>{const i=r.init(e,null);return r.update(i,n),t.from(r.digest(i))});e.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/rsa-browser.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! ../nodeify */190),i=r(/*! ../webcrypto */191),s=r(/*! ../random-bytes */192);function o(e){return Promise.all([i.subtle.exportKey("jwk",e.privateKey),i.subtle.exportKey("jwk",e.publicKey)])}t.utils=r(/*! ./rsa-utils */594),t.generateKey=function(e,t){n(i.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(o).then(e=>({privateKey:e[0],publicKey:e[1]})),t)},t.unmarshalPrivateKey=function(e,t){const r=i.subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]);var s;n(Promise.all([r,(s=e,i.subtle.importKey("jwk",{kty:s.kty,n:s.n,e:s.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"]))]).then(e=>o({privateKey:e[0],publicKey:e[1]})).then(e=>({privateKey:e[0],publicKey:e[1]})),t)},t.getRandomValues=s,t.hashAndSign=function(t,r,s){n(i.subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]).then(e=>i.subtle.sign({name:"RSASSA-PKCS1-v1_5"},e,Uint8Array.from(r))).then(t=>e.from(t)),s)},t.hashAndVerify=function(e,t,r,s){n(i.subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]).then(e=>i.subtle.verify({name:"RSASSA-PKCS1-v1_5"},e,t,r)),s)};const{jwk2pub:a,jwk2priv:c}=r(/*! ./jwk2pem */602);function u(t,r,n,i){const s=r?a(t):c(t),o=i(e.from(n).toString("binary"),s);return e.from(o,"binary")}t.encrypt=function(e,t){return u(e,!0,t,(e,t)=>t.encrypt(e))},t.decrypt=function(e,t){return u(e,!1,t,(e,t)=>t.decrypt(e))}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************************************!*\
  !*** ./node_modules/iso-random-stream/src/random.browser.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=self.crypto||self.msCrypto,{Buffer:i}=r(/*! buffer */0),s=65536;n&&n.getRandomValues?e.exports=function(e){const t=new Uint8Array(e);let r=0;if(e>0)if(e>s)for(;r<e;)r+s>e?(n.getRandomValues(t.subarray(r,r+(e-r))),r+=e-r):(n.getRandomValues(t.subarray(r,r+s)),r+=s);else n.getRandomValues(t);return i.from(t)}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},
/*!**********************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/rsa-utils.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! asn1.js */193),i=r(/*! ./../util */312),s=i.toBase64,o=i.toBn,a=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())})),c=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid({"1.2.840.113549.1.1.1":"rsa"}),this.key("none").optional().null_(),this.key("curve").optional().objid(),this.key("params").optional().seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()))})),u=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())})),h=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.pkcs1ToJwk=function(e){const t=a.decode(e,"der");return{kty:"RSA",n:s(t.modulus),e:s(t.publicExponent),d:s(t.privateExponent),p:s(t.prime1),q:s(t.prime2),dp:s(t.exponent1),dq:s(t.exponent2),qi:s(t.coefficient),alg:"RS256",kid:"2011-04-29"}},t.jwkToPkcs1=function(e){return a.encode({version:0,modulus:o(e.n),publicExponent:o(e.e),privateExponent:o(e.d),prime1:o(e.p),prime2:o(e.q),exponent1:o(e.dp),exponent2:o(e.dq),coefficient:o(e.qi)},"der")},t.pkixToJwk=function(e){const t=u.decode(e,"der"),r=h.decode(t.subjectPublicKey.data,"der");return{kty:"RSA",n:s(r.modulus),e:s(r.publicExponent),alg:"RS256",kid:"2011-04-29"}},t.jwkToPkix=function(e){return u.encode({algorithm:{algorithm:"rsa",none:null},subjectPublicKey:{data:h.encode({modulus:o(e.n),publicExponent:o(e.e)},"der")}},"der")}},
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!**********************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/api.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./encoders */308),i=r(/*! ./decoders */310),s=r(/*! inherits */3);function o(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new o(e,t)},o.prototype._createNamed=function(e){const t=this.name;function r(e){this._initNamed(e,t)}return s(r,e),r.prototype._initNamed=function(t,r){e.call(this,t,r)},new r(this)},o.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(i[e])),this.decoders[e]},o.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},o.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(n[e])),this.encoders[e]},o.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}},
/*!***************************************************!*\
  !*** ./node_modules/minimalistic-assert/index.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=r,r.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},
/*!*******************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/encoders/pem.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! inherits */3),i=r(/*! ./der */309);function s(e){i.call(this,e),this.enc="pem"}n(s,i),e.exports=s,s.prototype.encode=function(e,t){const r=i.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+t.label+"-----"];for(let e=0;e<r.length;e+=64)n.push(r.slice(e,e+64));return n.push("-----END "+t.label+"-----"),n.join("\n")}},
/*!*******************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/decoders/pem.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! inherits */3),i=r(/*! buffer */0).Buffer,s=r(/*! ./der */311);function o(e){s.call(this,e),this.enc="pem"}n(o,s),e.exports=o,o.prototype.decode=function(e,t){const r=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,c=-1;for(let e=0;e<r.length;e++){const t=r[e].match(o);if(null!==t&&t[2]===n){if(-1!==a){if("END"!==t[1])break;c=e;break}if("BEGIN"!==t[1])break;a=e}}if(-1===a||-1===c)throw new Error("PEM section not found for: "+n);const u=r.slice(a+1,c).join("");u.replace(/[^a-z0-9+/=]+/gi,"");const h=new i(u,"base64");return s.prototype.decode.call(this,h,t)}},
/*!*****************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/base/index.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=t;n.Reporter=r(/*! ./reporter */195).Reporter,n.DecoderBuffer=r(/*! ./buffer */103).DecoderBuffer,n.EncoderBuffer=r(/*! ./buffer */103).EncoderBuffer,n.Node=r(/*! ./node */194)},
/*!**********************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/constants/index.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=t;n._reverse=function(e){const t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);const n=e[r];t[n]=r})),t},n.der=r(/*! ./der */196)},
/*!********************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/jwk2pem.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n={util:r(/*! node-forge/lib/util */16),pki:r(/*! node-forge/lib/pki */603),jsbn:r(/*! node-forge/lib/jsbn */185)};function i(e,t){return t.map(t=>(function(e){var t=n.util.decode64((e+"===".slice((e.length+3)%4)).replace(/-/g,"+").replace(/_/g,"/"));return new n.jsbn.BigInteger(n.util.bytesToHex(t),16)})(e[t]))}function s(e){return n.pki.setRsaPrivateKey(...i(e,["n","e","d","p","q","dp","dq","qi"]))}function o(e){return n.pki.setRsaPublicKey(...i(e,["n","e"]))}e.exports={jwk2pub:o,jwk2pubPem:function(e){return n.pki.publicKeyToPem(o(e))},jwk2priv:s,jwk2privPem:function(e){return n.pki.privateKeyToPem(s(e))}}},
/*!***********************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/pki.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./asn1 */58),r(/*! ./oids */74),r(/*! ./pbe */134),r(/*! ./pem */189),r(/*! ./pbkdf2 */188),r(/*! ./pkcs12 */604),r(/*! ./pss */314),r(/*! ./rsa */100),r(/*! ./util */16),r(/*! ./x509 */313);var i=n.asn1,s=e.exports=n.pki=n.pki||{};s.pemToDer=function(e){var t=n.pem.decode(e)[0];if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(t.body)},s.privateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PRIVATE KEY"!==t.type&&"RSA PRIVATE KEY"!==t.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.privateKeyFromAsn1(o)},s.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:i.toDer(s.privateKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:i.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})}},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/pkcs12.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./asn1 */58),r(/*! ./hmac */303),r(/*! ./oids */74),r(/*! ./pkcs7asn1 */605),r(/*! ./pbe */134),r(/*! ./random */75),r(/*! ./rsa */100),r(/*! ./sha1 */301),r(/*! ./util */16),r(/*! ./x509 */313);var i=n.asn1,s=n.pki,o=e.exports=n.pkcs12=n.pkcs12||{},a={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},c={name:"PFX",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},a,{name:"PFX.macData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},u={name:"SafeBag",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},h={name:"Attribute",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,capture:"values"}]},l={name:"CertBag",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:i.Class.UNIVERSAL,type:i.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function f(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var o=0;o<e[s].safeBags.length;o++){var a=e[s].safeBags[o];void 0!==n&&a.type!==n||(null!==t?void 0!==a.attributes[t]&&a.attributes[t].indexOf(r)>=0&&i.push(a):i.push(a))}return i}function d(e){if(e.composed||e.constructed){for(var t=n.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function p(e,t){var r={},o=[];if(!i.validate(e,n.pkcs7.asn1.encryptedDataValidator,r,o))throw(a=new Error("Cannot read EncryptedContentInfo.")).errors=o,a;var a,c=i.derToOid(r.contentType);if(c!==s.oids.data)throw(a=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=c,a;c=i.derToOid(r.encAlgorithm);var u=s.pbe.getCipher(c,r.encParameter,t),h=d(r.encryptedContentAsn1),l=n.util.createBuffer(h.value);if(u.update(l),!u.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return u.output.getBytes()}function A(e,t,r){if(!t&&0===e.length)return[];if((e=i.fromDer(e,t)).tagClass!==i.Class.UNIVERSAL||e.type!==i.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],o=0;o<e.value.length;o++){var a=e.value[o],c={},h=[];if(!i.validate(a,u,c,h))throw(y=new Error("Cannot read SafeBag.")).errors=h,y;var f,d,p={type:i.derToOid(c.bagId),attributes:g(c.bagAttributes)};n.push(p);var A=c.bagValue.value[0];switch(p.type){case s.oids.pkcs8ShroudedKeyBag:if(null===(A=s.decryptPrivateKeyInfo(A,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case s.oids.keyBag:try{p.key=s.privateKeyFromAsn1(A)}catch(e){p.key=null,p.asn1=A}continue;case s.oids.certBag:f=l,d=function(){if(i.derToOid(c.certId)!==s.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=i.derToOid(c.certId),e}var r=i.fromDer(c.cert,t);try{p.cert=s.certificateFromAsn1(r,!0)}catch(e){p.cert=null,p.asn1=r}};break;default:var y;throw(y=new Error("Unsupported PKCS#12 SafeBag type.")).oid=p.type,y}if(void 0!==f&&!i.validate(A,f,c,h))throw(y=new Error("Cannot read PKCS#12 "+f.name)).errors=h,y;d()}return n}function g(e){var t={};if(void 0!==e)for(var r=0;r<e.length;++r){var n={},o=[];if(!i.validate(e[r],h,n,o)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=o,a}var c=i.derToOid(n.oid);if(void 0!==s.oids[c]){t[s.oids[c]]=[];for(var u=0;u<n.values.length;++u)t[s.oids[c]].push(n.values[u].value)}}return t}o.pkcs12FromAsn1=function(e,t,r){"string"==typeof t?(r=t,t=!0):void 0===t&&(t=!0);var u={};if(!i.validate(e,c,u,[]))throw(h=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=h,h;var h,l={version:u.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,r={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=n.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(r[e.bagType]=f(l.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=f(l.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(r.friendlyName=f(l.safeContents,"friendlyName",e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return f(l.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return f(l.safeContents,"localKeyId",e,t)}};if(3!==u.version.charCodeAt(0))throw(h=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=u.version.charCodeAt(0),h;if(i.derToOid(u.contentType)!==s.oids.data)throw(h=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=i.derToOid(u.contentType),h;var g=u.content.value[0];if(g.tagClass!==i.Class.UNIVERSAL||g.type!==i.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(g=d(g),u.mac){var y=null,m=0,_=i.derToOid(u.macAlgorithm);switch(_){case s.oids.sha1:y=n.md.sha1.create(),m=20;break;case s.oids.sha256:y=n.md.sha256.create(),m=32;break;case s.oids.sha384:y=n.md.sha384.create(),m=48;break;case s.oids.sha512:y=n.md.sha512.create(),m=64;break;case s.oids.md5:y=n.md.md5.create(),m=16}if(null===y)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+_);var b=new n.util.ByteBuffer(u.macSalt),w="macIterations"in u?parseInt(n.util.bytesToHex(u.macIterations),16):1,v=o.generateKey(r,b,3,w,m,y),E=n.hmac.create();if(E.start(y,v),E.update(g.value),E.getMac().getBytes()!==u.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(e,t,r,n){if((t=i.fromDer(t,r)).tagClass!==i.Class.UNIVERSAL||t.type!==i.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var o=0;o<t.value.length;o++){var c=t.value[o],u={},h=[];if(!i.validate(c,a,u,h))throw(y=new Error("Cannot read ContentInfo.")).errors=h,y;var l={encrypted:!1},f=null,g=u.content.value[0];switch(i.derToOid(u.contentType)){case s.oids.data:if(g.tagClass!==i.Class.UNIVERSAL||g.type!==i.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");f=d(g).value;break;case s.oids.encryptedData:f=p(g,n),l.encrypted=!0;break;default:var y;throw(y=new Error("Unsupported PKCS#12 contentType.")).contentType=i.derToOid(u.contentType),y}l.safeBags=A(f,r,n),e.safeContents.push(l)}}(l,g.value,t,r),l},o.toPkcs12Asn1=function(e,t,r,a){(a=a||{}).saltSize=a.saltSize||8,a.count=a.count||2048,a.algorithm=a.algorithm||a.encAlgorithm||"aes128","useMac"in a||(a.useMac=!0),"localKeyId"in a||(a.localKeyId=null),"generateLocalKeyId"in a||(a.generateLocalKeyId=!0);var c,u=a.localKeyId;if(null!==u)u=n.util.hexToBytes(u);else if(a.generateLocalKeyId)if(t){var h=n.util.isArray(t)?t[0]:t;"string"==typeof h&&(h=s.certificateFromPem(h)),(I=n.md.sha1.create()).update(i.toDer(s.certificateToAsn1(h)).getBytes()),u=I.digest().getBytes()}else u=n.random.getBytes(20);var l=[];null!==u&&l.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.localKeyId).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,u)])])),"friendlyName"in a&&l.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.friendlyName).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.BMPSTRING,!1,a.friendlyName)])])),l.length>0&&(c=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,l));var f=[],d=[];null!==t&&(d=n.util.isArray(t)?t:[t]);for(var p=[],A=0;A<d.length;++A){"string"==typeof(t=d[A])&&(t=s.certificateFromPem(t));var g=0===A?c:void 0,y=s.certificateToAsn1(t),m=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.certBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.x509Certificate).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(y).getBytes())])])]),g]);p.push(m)}if(p.length>0){var _=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,p),b=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(_).getBytes())])]);f.push(b)}var w=null;if(null!==e){var v=s.wrapRsaPrivateKey(s.privateKeyToAsn1(e));w=null===r?i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.keyBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[v]),c]):i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.pkcs8ShroudedKeyBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[s.encryptPrivateKeyInfo(v,r,a)]),c]);var E=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[w]),S=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(E).getBytes())])]);f.push(S)}var C,k=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,f);if(a.useMac){var I=n.md.sha1.create(),T=new n.util.ByteBuffer(n.random.getBytes(a.saltSize)),R=a.count,N=(e=o.generateKey(r,T,3,R,20),n.hmac.create());N.start(I,e),N.update(i.toDer(k).getBytes());var B=N.getMac();C=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.sha1).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,B.getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,T.getBytes()),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(R).getBytes())])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(3).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(k).getBytes())])]),C])},o.generateKey=n.pbe.generatePkcs12Key},
/*!*****************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/pkcs7asn1.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./asn1 */58),r(/*! ./util */16);var i=n.asn1,s=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=s;var o={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=o;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},s.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var c={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},
/*!***********************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/mgf.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./mgf1 */607),e.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},
/*!************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/mgf1.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./util */16),n.mgf=n.mgf||{},(e.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(e){return{generate:function(t,r){for(var i=new n.util.ByteBuffer,s=Math.ceil(r/e.digestLength),o=0;o<s;o++){var a=new n.util.ByteBuffer;a.putInt32(o),e.start(),e.update(t+a.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-r),i.getBytes()}}}},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-crypto/node_modules/node-forge/lib/sha512.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */11);r(/*! ./md */59),r(/*! ./util */16);var i=e.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var s=n.sha384=n.sha512.sha384=n.sha512.sha384||{};s.create=function(){return i.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=s,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,i.create=function(e){if(a||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(u={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),void 0===e&&(e="SHA-512"),!(e in u))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=u[e],r=null,i=n.util.createBuffer(),s=new Array(80),l=0;l<80;++l)s[l]=new Array(2);var f=64;switch(e){case"SHA-384":f=48;break;case"SHA-512/256":f=32;break;case"SHA-512/224":f=28}var d={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:f,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var e=d.messageLengthSize/4,s=0;s<e;++s)d.fullMessageLength.push(0);i=n.util.createBuffer(),r=new Array(t.length);for(s=0;s<t.length;++s)r[s]=t[s].slice(0);return d}};return d.start(),d.update=function(e,t){"utf8"===t&&(e=n.util.encodeUtf8(e));var o=e.length;d.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=d.fullMessageLength.length-1;a>=0;--a)d.fullMessageLength[a]+=o[1],o[1]=o[0]+(d.fullMessageLength[a]/4294967296>>>0),d.fullMessageLength[a]=d.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return i.putBytes(e),h(r,s,i),(i.read>2048||0===i.length())&&i.compact(),d},d.digest=function(){var t=n.util.createBuffer();t.putBytes(i.bytes());var a,c=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize&d.blockLength-1;t.putBytes(o.substr(0,d.blockLength-c));for(var u=8*d.fullMessageLength[0],l=0;l<d.fullMessageLength.length-1;++l)u+=(a=8*d.fullMessageLength[l+1])/4294967296>>>0,t.putInt32(u>>>0),u=a>>>0;t.putInt32(u);var f=new Array(r.length);for(l=0;l<r.length;++l)f[l]=r[l].slice(0);h(f,s,t);var p,A=n.util.createBuffer();p="SHA-512"===e?f.length:"SHA-384"===e?f.length-2:f.length-4;for(l=0;l<p;++l)A.putInt32(f[l][0]),l===p-1&&"SHA-512/224"===e||A.putInt32(f[l][1]);return A},d};var o=null,a=!1,c=null,u=null;function h(e,t,r){for(var n,i,s,o,a,u,h,l,f,d,p,A,g,y,m,_,b,w,v,E,S,C,k,I,T,R,N,B,O,P,x,L,D,M=r.length();M>=128;){for(N=0;N<16;++N)t[N][0]=r.getInt32()>>>0,t[N][1]=r.getInt32()>>>0;for(;N<80;++N)n=(((B=(P=t[N-2])[0])>>>19|(O=P[1])<<13)^(O>>>29|B<<3)^B>>>6)>>>0,i=((B<<13|O>>>19)^(O<<3|B>>>29)^(B<<26|O>>>6))>>>0,s=(((B=(L=t[N-15])[0])>>>1|(O=L[1])<<31)^(B>>>8|O<<24)^B>>>7)>>>0,o=((B<<31|O>>>1)^(B<<24|O>>>8)^(B<<25|O>>>7))>>>0,x=t[N-7],D=t[N-16],O=i+x[1]+o+D[1],t[N][0]=n+x[0]+s+D[0]+(O/4294967296>>>0)>>>0,t[N][1]=O>>>0;for(p=e[0][0],A=e[0][1],g=e[1][0],y=e[1][1],m=e[2][0],_=e[2][1],b=e[3][0],w=e[3][1],v=e[4][0],E=e[4][1],S=e[5][0],C=e[5][1],k=e[6][0],I=e[6][1],T=e[7][0],R=e[7][1],N=0;N<80;++N)h=((v>>>14|E<<18)^(v>>>18|E<<14)^(E>>>9|v<<23))>>>0,l=(k^v&(S^k))>>>0,a=((p>>>28|A<<4)^(A>>>2|p<<30)^(A>>>7|p<<25))>>>0,u=((p<<4|A>>>28)^(A<<30|p>>>2)^(A<<25|p>>>7))>>>0,f=(p&g|m&(p^g))>>>0,d=(A&y|_&(A^y))>>>0,O=R+(((v<<18|E>>>14)^(v<<14|E>>>18)^(E<<23|v>>>9))>>>0)+((I^E&(C^I))>>>0)+c[N][1]+t[N][1],n=T+h+l+c[N][0]+t[N][0]+(O/4294967296>>>0)>>>0,i=O>>>0,s=a+f+((O=u+d)/4294967296>>>0)>>>0,o=O>>>0,T=k,R=I,k=S,I=C,S=v,C=E,v=b+n+((O=w+i)/4294967296>>>0)>>>0,E=O>>>0,b=m,w=_,m=g,_=y,g=p,y=A,p=n+s+((O=i+o)/4294967296>>>0)>>>0,A=O>>>0;O=e[0][1]+A,e[0][0]=e[0][0]+p+(O/4294967296>>>0)>>>0,e[0][1]=O>>>0,O=e[1][1]+y,e[1][0]=e[1][0]+g+(O/4294967296>>>0)>>>0,e[1][1]=O>>>0,O=e[2][1]+_,e[2][0]=e[2][0]+m+(O/4294967296>>>0)>>>0,e[2][1]=O>>>0,O=e[3][1]+w,e[3][0]=e[3][0]+b+(O/4294967296>>>0)>>>0,e[3][1]=O>>>0,O=e[4][1]+E,e[4][0]=e[4][0]+v+(O/4294967296>>>0)>>>0,e[4][1]=O>>>0,O=e[5][1]+C,e[5][0]=e[5][0]+S+(O/4294967296>>>0)>>>0,e[5][1]=O>>>0,O=e[6][1]+I,e[6][0]=e[6][0]+k+(O/4294967296>>>0)>>>0,e[6][1]=O>>>0,O=e[7][1]+R,e[7][0]=e[7][0]+T+(O/4294967296>>>0)>>>0,e[7][1]=O>>>0,M-=128}}},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/ed25519-class.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! multihashing-async */304),i=r(/*! protons */28),s=r(/*! bs58 */47),o=r(/*! ./ed25519 */610),a=i(r(/*! ./keys.proto */184));class c{constructor(e){this._key=l(e,o.publicKeyLength)}verify(e,t,r){h(r),o.hashAndVerify(this._key,t,e,r)}marshal(){return t.from(this._key)}get bytes(){return a.PublicKey.encode({Type:a.KeyType.Ed25519,Data:this.marshal()})}equals(e){return this.bytes.equals(e.bytes)}hash(e){h(e),n(this.bytes,"sha2-256",e)}}class u{constructor(e,t){this._key=l(e,o.privateKeyLength),this._publicKey=l(t,o.publicKeyLength)}sign(e,t){h(t),o.hashAndSign(this._key,e,t)}get public(){if(!this._publicKey)throw new Error("public key not provided");return new c(this._publicKey)}marshal(){return t.concat([t.from(this._key),t.from(this._publicKey)])}get bytes(){return a.PrivateKey.encode({Type:a.KeyType.Ed25519,Data:this.marshal()})}equals(e){return this.bytes.equals(e.bytes)}hash(e){h(e),n(this.bytes,"sha2-256",e)}id(e){this.public.hash((t,r)=>{if(t)return e(t);e(null,s.encode(r))})}}function h(e){if("function"!=typeof e)throw new Error("callback is required")}function l(e,r){if(t.isBuffer(e)&&(e=new Uint8Array(e)),!(e instanceof Uint8Array)||e.length!==r)throw new Error("Key must be a Uint8Array or Buffer of length "+r);return e}e.exports={Ed25519PublicKey:c,Ed25519PrivateKey:u,unmarshalEd25519PrivateKey:function(e,t){try{e=l(e,o.privateKeyLength+o.publicKeyLength)}catch(e){return t(e)}const r=e.slice(0,o.privateKeyLength),n=e.slice(o.privateKeyLength,e.length);t(null,new u(r,n))},unmarshalEd25519PublicKey:function(e){return e=l(e,o.publicKeyLength),new c(e)},generateKeyPair:function(e,t){void 0===t&&"function"==typeof e&&(t=e),o.generateKey((e,r)=>{if(e)return t(e);let n;try{n=new u(r.secretKey,r.publicKey)}catch(e){return void t(e)}t(null,n)})},generateKeyPairFromSeed:function(e,t,r){void 0===r&&"function"==typeof t&&(r=t),o.generateKeyFromSeed(e,(e,t)=>{if(e)return r(e);let n;try{n=new u(t.secretKey,t.publicKey)}catch(e){return void r(e)}r(null,n)})}}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/ed25519.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! tweetnacl */611),i=r(/*! async/nextTick */35);t.publicKeyLength=n.sign.publicKeyLength,t.privateKeyLength=n.sign.secretKeyLength,t.generateKey=function(e){i(()=>{let t;try{t=n.sign.keyPair()}catch(t){return e(t)}e(null,t)})},t.generateKeyFromSeed=function(e,t){i(()=>{let r;try{r=n.sign.keyPair.fromSeed(e)}catch(e){return t(e)}t(null,r)})},t.hashAndSign=function(t,r,s){i(()=>{s(null,e.from(n.sign.detached(r,t)))})},t.hashAndVerify=function(e,t,r,s){i(()=>{let i;try{i=n.sign.detached.verify(r,t,e)}catch(e){return s(e)}s(null,i)})}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************!*\
  !*** ./node_modules/tweetnacl/nacl-fast.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=t(),a=t([1]),c=t([56129,1]),u=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function A(e,t,r,n,i){var s,o=0;for(s=0;s<i;s++)o|=e[t+s]^r[n+s];return(1&o-1>>>8)-1}function g(e,t,r,n){return A(e,t,r,n,16)}function y(e,t,r,n){return A(e,t,r,n,32)}function m(e,t,r,n){!function(e,t,r,n){for(var i,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,f=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,A=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,m=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=s,v=o,E=a,S=c,C=u,k=h,I=l,T=f,R=d,N=p,B=A,O=g,P=y,x=m,L=_,D=b,M=0;M<20;M+=2)w^=(i=(P^=(i=(R^=(i=(C^=(i=w+P|0)<<7|i>>>25)+w|0)<<9|i>>>23)+C|0)<<13|i>>>19)+R|0)<<18|i>>>14,k^=(i=(v^=(i=(x^=(i=(N^=(i=k+v|0)<<7|i>>>25)+k|0)<<9|i>>>23)+N|0)<<13|i>>>19)+x|0)<<18|i>>>14,B^=(i=(I^=(i=(E^=(i=(L^=(i=B+I|0)<<7|i>>>25)+B|0)<<9|i>>>23)+L|0)<<13|i>>>19)+E|0)<<18|i>>>14,D^=(i=(O^=(i=(T^=(i=(S^=(i=D+O|0)<<7|i>>>25)+D|0)<<9|i>>>23)+S|0)<<13|i>>>19)+T|0)<<18|i>>>14,w^=(i=(S^=(i=(E^=(i=(v^=(i=w+S|0)<<7|i>>>25)+w|0)<<9|i>>>23)+v|0)<<13|i>>>19)+E|0)<<18|i>>>14,k^=(i=(C^=(i=(T^=(i=(I^=(i=k+C|0)<<7|i>>>25)+k|0)<<9|i>>>23)+I|0)<<13|i>>>19)+T|0)<<18|i>>>14,B^=(i=(N^=(i=(R^=(i=(O^=(i=B+N|0)<<7|i>>>25)+B|0)<<9|i>>>23)+O|0)<<13|i>>>19)+R|0)<<18|i>>>14,D^=(i=(L^=(i=(x^=(i=(P^=(i=D+L|0)<<7|i>>>25)+D|0)<<9|i>>>23)+P|0)<<13|i>>>19)+x|0)<<18|i>>>14;w=w+s|0,v=v+o|0,E=E+a|0,S=S+c|0,C=C+u|0,k=k+h|0,I=I+l|0,T=T+f|0,R=R+d|0,N=N+p|0,B=B+A|0,O=O+g|0,P=P+y|0,x=x+m|0,L=L+_|0,D=D+b|0,e[0]=w>>>0&255,e[1]=w>>>8&255,e[2]=w>>>16&255,e[3]=w>>>24&255,e[4]=v>>>0&255,e[5]=v>>>8&255,e[6]=v>>>16&255,e[7]=v>>>24&255,e[8]=E>>>0&255,e[9]=E>>>8&255,e[10]=E>>>16&255,e[11]=E>>>24&255,e[12]=S>>>0&255,e[13]=S>>>8&255,e[14]=S>>>16&255,e[15]=S>>>24&255,e[16]=C>>>0&255,e[17]=C>>>8&255,e[18]=C>>>16&255,e[19]=C>>>24&255,e[20]=k>>>0&255,e[21]=k>>>8&255,e[22]=k>>>16&255,e[23]=k>>>24&255,e[24]=I>>>0&255,e[25]=I>>>8&255,e[26]=I>>>16&255,e[27]=I>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=R>>>0&255,e[33]=R>>>8&255,e[34]=R>>>16&255,e[35]=R>>>24&255,e[36]=N>>>0&255,e[37]=N>>>8&255,e[38]=N>>>16&255,e[39]=N>>>24&255,e[40]=B>>>0&255,e[41]=B>>>8&255,e[42]=B>>>16&255,e[43]=B>>>24&255,e[44]=O>>>0&255,e[45]=O>>>8&255,e[46]=O>>>16&255,e[47]=O>>>24&255,e[48]=P>>>0&255,e[49]=P>>>8&255,e[50]=P>>>16&255,e[51]=P>>>24&255,e[52]=x>>>0&255,e[53]=x>>>8&255,e[54]=x>>>16&255,e[55]=x>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=D>>>0&255,e[61]=D>>>8&255,e[62]=D>>>16&255,e[63]=D>>>24&255}(e,t,r,n)}function _(e,t,r,n){!function(e,t,r,n){for(var i,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,f=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,A=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,m=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=0;w<20;w+=2)s^=(i=(y^=(i=(d^=(i=(u^=(i=s+y|0)<<7|i>>>25)+s|0)<<9|i>>>23)+u|0)<<13|i>>>19)+d|0)<<18|i>>>14,h^=(i=(o^=(i=(m^=(i=(p^=(i=h+o|0)<<7|i>>>25)+h|0)<<9|i>>>23)+p|0)<<13|i>>>19)+m|0)<<18|i>>>14,A^=(i=(l^=(i=(a^=(i=(_^=(i=A+l|0)<<7|i>>>25)+A|0)<<9|i>>>23)+_|0)<<13|i>>>19)+a|0)<<18|i>>>14,b^=(i=(g^=(i=(f^=(i=(c^=(i=b+g|0)<<7|i>>>25)+b|0)<<9|i>>>23)+c|0)<<13|i>>>19)+f|0)<<18|i>>>14,s^=(i=(c^=(i=(a^=(i=(o^=(i=s+c|0)<<7|i>>>25)+s|0)<<9|i>>>23)+o|0)<<13|i>>>19)+a|0)<<18|i>>>14,h^=(i=(u^=(i=(f^=(i=(l^=(i=h+u|0)<<7|i>>>25)+h|0)<<9|i>>>23)+l|0)<<13|i>>>19)+f|0)<<18|i>>>14,A^=(i=(p^=(i=(d^=(i=(g^=(i=A+p|0)<<7|i>>>25)+A|0)<<9|i>>>23)+g|0)<<13|i>>>19)+d|0)<<18|i>>>14,b^=(i=(_^=(i=(m^=(i=(y^=(i=b+_|0)<<7|i>>>25)+b|0)<<9|i>>>23)+y|0)<<13|i>>>19)+m|0)<<18|i>>>14;e[0]=s>>>0&255,e[1]=s>>>8&255,e[2]=s>>>16&255,e[3]=s>>>24&255,e[4]=h>>>0&255,e[5]=h>>>8&255,e[6]=h>>>16&255,e[7]=h>>>24&255,e[8]=A>>>0&255,e[9]=A>>>8&255,e[10]=A>>>16&255,e[11]=A>>>24&255,e[12]=b>>>0&255,e[13]=b>>>8&255,e[14]=b>>>16&255,e[15]=b>>>24&255,e[16]=l>>>0&255,e[17]=l>>>8&255,e[18]=l>>>16&255,e[19]=l>>>24&255,e[20]=f>>>0&255,e[21]=f>>>8&255,e[22]=f>>>16&255,e[23]=f>>>24&255,e[24]=d>>>0&255,e[25]=d>>>8&255,e[26]=d>>>16&255,e[27]=d>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,n)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(e,t,r,n,i,s,o){var a,c,u=new Uint8Array(16),h=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=s[c];for(;i>=64;){for(m(h,u,o,b),c=0;c<64;c++)e[t+c]=r[n+c]^h[c];for(a=1,c=8;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(m(h,u,o,b),c=0;c<i;c++)e[t+c]=r[n+c]^h[c];return 0}function v(e,t,r,n,i){var s,o,a=new Uint8Array(16),c=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=n[o];for(;r>=64;){for(m(c,a,i,b),o=0;o<64;o++)e[t+o]=c[o];for(s=1,o=8;o<16;o++)s=s+(255&a[o])|0,a[o]=255&s,s>>>=8;r-=64,t+=64}if(r>0)for(m(c,a,i,b),o=0;o<r;o++)e[t+o]=c[o];return 0}function E(e,t,r,n,i){var s=new Uint8Array(32);_(s,n,i,b);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=n[a+16];return v(e,t,r,o,s)}function S(e,t,r,n,i,s,o){var a=new Uint8Array(32);_(a,s,o,b);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=s[u+16];return w(e,t,r,n,i,c,a)}var C=function(e){var t,r,n,i,s,o,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),s=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,o=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(s>>>14|o<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(o>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function k(e,t,r,n,i,s){var o=new C(s);return o.update(r,n,i),o.finish(e,t),0}function I(e,t,r,n,i,s){var o=new Uint8Array(16);return k(o,0,r,n,i,s),g(e,t,o,0)}function T(e,t,r,n,i){var s;if(r<32)return-1;for(S(e,0,t,0,r,n,i),k(e,16,e,32,r-32,e),s=0;s<16;s++)e[s]=0;return 0}function R(e,t,r,n,i){var s,o=new Uint8Array(32);if(r<32)return-1;if(E(o,0,32,n,i),0!==I(t,16,t,32,r-32,o))return-1;for(S(e,0,t,0,r,n,i),s=0;s<32;s++)e[s]=0;return 0}function N(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function B(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function O(e,t,r){for(var n,i=~(r-1),s=0;s<16;s++)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n}function P(e,r){var n,i,s,o=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(B(a),B(a),B(a),i=0;i<2;i++){for(o[0]=a[0]-65517,n=1;n<15;n++)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),s=o[15]>>16&1,o[14]&=65535,O(a,o,1-s)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function x(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return P(r,e),P(n,t),y(r,0,n,0)}function L(e){var t=new Uint8Array(32);return P(t,e),1&t[0]}function D(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function M(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function K(e,t,r){var n,i,s=0,o=0,a=0,c=0,u=0,h=0,l=0,f=0,d=0,p=0,A=0,g=0,y=0,m=0,_=0,b=0,w=0,v=0,E=0,S=0,C=0,k=0,I=0,T=0,R=0,N=0,B=0,O=0,P=0,x=0,L=0,D=r[0],M=r[1],U=r[2],K=r[3],F=r[4],z=r[5],j=r[6],H=r[7],q=r[8],V=r[9],G=r[10],W=r[11],Q=r[12],Y=r[13],X=r[14],$=r[15];s+=(n=t[0])*D,o+=n*M,a+=n*U,c+=n*K,u+=n*F,h+=n*z,l+=n*j,f+=n*H,d+=n*q,p+=n*V,A+=n*G,g+=n*W,y+=n*Q,m+=n*Y,_+=n*X,b+=n*$,o+=(n=t[1])*D,a+=n*M,c+=n*U,u+=n*K,h+=n*F,l+=n*z,f+=n*j,d+=n*H,p+=n*q,A+=n*V,g+=n*G,y+=n*W,m+=n*Q,_+=n*Y,b+=n*X,w+=n*$,a+=(n=t[2])*D,c+=n*M,u+=n*U,h+=n*K,l+=n*F,f+=n*z,d+=n*j,p+=n*H,A+=n*q,g+=n*V,y+=n*G,m+=n*W,_+=n*Q,b+=n*Y,w+=n*X,v+=n*$,c+=(n=t[3])*D,u+=n*M,h+=n*U,l+=n*K,f+=n*F,d+=n*z,p+=n*j,A+=n*H,g+=n*q,y+=n*V,m+=n*G,_+=n*W,b+=n*Q,w+=n*Y,v+=n*X,E+=n*$,u+=(n=t[4])*D,h+=n*M,l+=n*U,f+=n*K,d+=n*F,p+=n*z,A+=n*j,g+=n*H,y+=n*q,m+=n*V,_+=n*G,b+=n*W,w+=n*Q,v+=n*Y,E+=n*X,S+=n*$,h+=(n=t[5])*D,l+=n*M,f+=n*U,d+=n*K,p+=n*F,A+=n*z,g+=n*j,y+=n*H,m+=n*q,_+=n*V,b+=n*G,w+=n*W,v+=n*Q,E+=n*Y,S+=n*X,C+=n*$,l+=(n=t[6])*D,f+=n*M,d+=n*U,p+=n*K,A+=n*F,g+=n*z,y+=n*j,m+=n*H,_+=n*q,b+=n*V,w+=n*G,v+=n*W,E+=n*Q,S+=n*Y,C+=n*X,k+=n*$,f+=(n=t[7])*D,d+=n*M,p+=n*U,A+=n*K,g+=n*F,y+=n*z,m+=n*j,_+=n*H,b+=n*q,w+=n*V,v+=n*G,E+=n*W,S+=n*Q,C+=n*Y,k+=n*X,I+=n*$,d+=(n=t[8])*D,p+=n*M,A+=n*U,g+=n*K,y+=n*F,m+=n*z,_+=n*j,b+=n*H,w+=n*q,v+=n*V,E+=n*G,S+=n*W,C+=n*Q,k+=n*Y,I+=n*X,T+=n*$,p+=(n=t[9])*D,A+=n*M,g+=n*U,y+=n*K,m+=n*F,_+=n*z,b+=n*j,w+=n*H,v+=n*q,E+=n*V,S+=n*G,C+=n*W,k+=n*Q,I+=n*Y,T+=n*X,R+=n*$,A+=(n=t[10])*D,g+=n*M,y+=n*U,m+=n*K,_+=n*F,b+=n*z,w+=n*j,v+=n*H,E+=n*q,S+=n*V,C+=n*G,k+=n*W,I+=n*Q,T+=n*Y,R+=n*X,N+=n*$,g+=(n=t[11])*D,y+=n*M,m+=n*U,_+=n*K,b+=n*F,w+=n*z,v+=n*j,E+=n*H,S+=n*q,C+=n*V,k+=n*G,I+=n*W,T+=n*Q,R+=n*Y,N+=n*X,B+=n*$,y+=(n=t[12])*D,m+=n*M,_+=n*U,b+=n*K,w+=n*F,v+=n*z,E+=n*j,S+=n*H,C+=n*q,k+=n*V,I+=n*G,T+=n*W,R+=n*Q,N+=n*Y,B+=n*X,O+=n*$,m+=(n=t[13])*D,_+=n*M,b+=n*U,w+=n*K,v+=n*F,E+=n*z,S+=n*j,C+=n*H,k+=n*q,I+=n*V,T+=n*G,R+=n*W,N+=n*Q,B+=n*Y,O+=n*X,P+=n*$,_+=(n=t[14])*D,b+=n*M,w+=n*U,v+=n*K,E+=n*F,S+=n*z,C+=n*j,k+=n*H,I+=n*q,T+=n*V,R+=n*G,N+=n*W,B+=n*Q,O+=n*Y,P+=n*X,x+=n*$,b+=(n=t[15])*D,o+=38*(v+=n*U),a+=38*(E+=n*K),c+=38*(S+=n*F),u+=38*(C+=n*z),h+=38*(k+=n*j),l+=38*(I+=n*H),f+=38*(T+=n*q),d+=38*(R+=n*V),p+=38*(N+=n*G),A+=38*(B+=n*W),g+=38*(O+=n*Q),y+=38*(P+=n*Y),m+=38*(x+=n*X),_+=38*(L+=n*$),s=(n=(s+=38*(w+=n*M))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),A=(n=A+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),s=(n=(s+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),A=(n=A+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=c,e[4]=u,e[5]=h,e[6]=l,e[7]=f,e[8]=d,e[9]=p,e[10]=A,e[11]=g,e[12]=y,e[13]=m,e[14]=_,e[15]=b}function F(e,t){K(e,t,t)}function z(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)F(i,i),2!==n&&4!==n&&K(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function j(e,r,n){var i,s,o=new Uint8Array(32),a=new Float64Array(80),u=t(),h=t(),l=t(),f=t(),d=t(),p=t();for(s=0;s<31;s++)o[s]=r[s];for(o[31]=127&r[31]|64,o[0]&=248,D(a,n),s=0;s<16;s++)h[s]=a[s],f[s]=u[s]=l[s]=0;for(u[0]=f[0]=1,s=254;s>=0;--s)O(u,h,i=o[s>>>3]>>>(7&s)&1),O(l,f,i),M(d,u,l),U(u,u,l),M(l,h,f),U(h,h,f),F(f,d),F(p,u),K(u,l,u),K(l,h,d),M(d,u,l),U(u,u,l),F(h,u),U(l,f,p),K(u,l,c),M(u,u,f),K(l,l,u),K(u,f,p),K(f,h,a),F(h,d),O(u,h,i),O(l,f,i);for(s=0;s<16;s++)a[s+16]=u[s],a[s+32]=l[s],a[s+48]=h[s],a[s+64]=f[s];var A=a.subarray(32),g=a.subarray(16);return z(A,A),K(g,g,A),P(e,g),0}function H(e,t){return j(e,t,s)}function q(e,t){return n(t,32),H(e,t)}function V(e,t,r){var n=new Uint8Array(32);return j(n,r,t),_(e,i,n,b)}C.prototype.blocks=function(e,t,r){for(var n,i,s,o,a,c,u,h,l,f,d,p,A,g,y,m,_,b,w,v=this.fin?0:2048,E=this.h[0],S=this.h[1],C=this.h[2],k=this.h[3],I=this.h[4],T=this.h[5],R=this.h[6],N=this.h[7],B=this.h[8],O=this.h[9],P=this.r[0],x=this.r[1],L=this.r[2],D=this.r[3],M=this.r[4],U=this.r[5],K=this.r[6],F=this.r[7],z=this.r[8],j=this.r[9];r>=16;)f=l=0,f+=(E+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*P,f+=(S+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*j),f+=(C+=8191&(i>>>10|(s=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*z),f+=(k+=8191&(s>>>7|(o=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*F),l=(f+=(I+=8191&(o>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*K))>>>13,f&=8191,f+=(T+=a>>>1&8191)*(5*U),f+=(R+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*M),f+=(N+=8191&(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*D),f+=(B+=8191&(u>>>8|(h=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*L),d=l+=(f+=(O+=h>>>5|v)*(5*x))>>>13,d+=E*x,d+=S*P,d+=C*(5*j),d+=k*(5*z),l=(d+=I*(5*F))>>>13,d&=8191,d+=T*(5*K),d+=R*(5*U),d+=N*(5*M),d+=B*(5*D),l+=(d+=O*(5*L))>>>13,d&=8191,p=l,p+=E*L,p+=S*x,p+=C*P,p+=k*(5*j),l=(p+=I*(5*z))>>>13,p&=8191,p+=T*(5*F),p+=R*(5*K),p+=N*(5*U),p+=B*(5*M),A=l+=(p+=O*(5*D))>>>13,A+=E*D,A+=S*L,A+=C*x,A+=k*P,l=(A+=I*(5*j))>>>13,A&=8191,A+=T*(5*z),A+=R*(5*F),A+=N*(5*K),A+=B*(5*U),g=l+=(A+=O*(5*M))>>>13,g+=E*M,g+=S*D,g+=C*L,g+=k*x,l=(g+=I*P)>>>13,g&=8191,g+=T*(5*j),g+=R*(5*z),g+=N*(5*F),g+=B*(5*K),y=l+=(g+=O*(5*U))>>>13,y+=E*U,y+=S*M,y+=C*D,y+=k*L,l=(y+=I*x)>>>13,y&=8191,y+=T*P,y+=R*(5*j),y+=N*(5*z),y+=B*(5*F),m=l+=(y+=O*(5*K))>>>13,m+=E*K,m+=S*U,m+=C*M,m+=k*D,l=(m+=I*L)>>>13,m&=8191,m+=T*x,m+=R*P,m+=N*(5*j),m+=B*(5*z),_=l+=(m+=O*(5*F))>>>13,_+=E*F,_+=S*K,_+=C*U,_+=k*M,l=(_+=I*D)>>>13,_&=8191,_+=T*L,_+=R*x,_+=N*P,_+=B*(5*j),b=l+=(_+=O*(5*z))>>>13,b+=E*z,b+=S*F,b+=C*K,b+=k*U,l=(b+=I*M)>>>13,b&=8191,b+=T*D,b+=R*L,b+=N*x,b+=B*P,w=l+=(b+=O*(5*j))>>>13,w+=E*j,w+=S*z,w+=C*F,w+=k*K,l=(w+=I*U)>>>13,w&=8191,w+=T*M,w+=R*D,w+=N*L,w+=B*x,E=f=8191&(l=(l=((l+=(w+=O*P)>>>13)<<2)+l|0)+(f&=8191)|0),S=d+=l>>>=13,C=p&=8191,k=A&=8191,I=g&=8191,T=y&=8191,R=m&=8191,N=_&=8191,B=b&=8191,O=w&=8191,t+=16,r-=16;this.h[0]=E,this.h[1]=S,this.h[2]=C,this.h[3]=k,this.h[4]=I,this.h[5]=T,this.h[6]=R,this.h[7]=N,this.h[8]=B,this.h[9]=O},C.prototype.finish=function(e,t){var r,n,i,s,o=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=r,r=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this.h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this.h[s]=this.h[s]&n|o[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,s=1;s<8;s++)i=(this.h[s]+this.pad[s]|0)+(i>>>16)|0,this.h[s]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},C.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var G=T,W=R;var Q=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Y(e,t,r,n){for(var i,s,o,a,c,u,h,l,f,d,p,A,g,y,m,_,b,w,v,E,S,C,k,I,T,R,N=new Int32Array(16),B=new Int32Array(16),O=e[0],P=e[1],x=e[2],L=e[3],D=e[4],M=e[5],U=e[6],K=e[7],F=t[0],z=t[1],j=t[2],H=t[3],q=t[4],V=t[5],G=t[6],W=t[7],Y=0;n>=128;){for(v=0;v<16;v++)E=8*v+Y,N[v]=r[E+0]<<24|r[E+1]<<16|r[E+2]<<8|r[E+3],B[v]=r[E+4]<<24|r[E+5]<<16|r[E+6]<<8|r[E+7];for(v=0;v<80;v++)if(i=O,s=P,o=x,a=L,c=D,u=M,h=U,K,f=F,d=z,p=j,A=H,g=q,y=V,m=G,W,k=65535&(C=W),I=C>>>16,T=65535&(S=K),R=S>>>16,k+=65535&(C=(q>>>14|D<<18)^(q>>>18|D<<14)^(D>>>9|q<<23)),I+=C>>>16,T+=65535&(S=(D>>>14|q<<18)^(D>>>18|q<<14)^(q>>>9|D<<23)),R+=S>>>16,k+=65535&(C=q&V^~q&G),I+=C>>>16,T+=65535&(S=D&M^~D&U),R+=S>>>16,S=Q[2*v],k+=65535&(C=Q[2*v+1]),I+=C>>>16,T+=65535&S,R+=S>>>16,S=N[v%16],I+=(C=B[v%16])>>>16,T+=65535&S,R+=S>>>16,T+=(I+=(k+=65535&C)>>>16)>>>16,k=65535&(C=w=65535&k|I<<16),I=C>>>16,T=65535&(S=b=65535&T|(R+=T>>>16)<<16),R=S>>>16,k+=65535&(C=(F>>>28|O<<4)^(O>>>2|F<<30)^(O>>>7|F<<25)),I+=C>>>16,T+=65535&(S=(O>>>28|F<<4)^(F>>>2|O<<30)^(F>>>7|O<<25)),R+=S>>>16,I+=(C=F&z^F&j^z&j)>>>16,T+=65535&(S=O&P^O&x^P&x),R+=S>>>16,l=65535&(T+=(I+=(k+=65535&C)>>>16)>>>16)|(R+=T>>>16)<<16,_=65535&k|I<<16,k=65535&(C=A),I=C>>>16,T=65535&(S=a),R=S>>>16,I+=(C=w)>>>16,T+=65535&(S=b),R+=S>>>16,P=i,x=s,L=o,D=a=65535&(T+=(I+=(k+=65535&C)>>>16)>>>16)|(R+=T>>>16)<<16,M=c,U=u,K=h,O=l,z=f,j=d,H=p,q=A=65535&k|I<<16,V=g,G=y,W=m,F=_,v%16==15)for(E=0;E<16;E++)S=N[E],k=65535&(C=B[E]),I=C>>>16,T=65535&S,R=S>>>16,S=N[(E+9)%16],k+=65535&(C=B[(E+9)%16]),I+=C>>>16,T+=65535&S,R+=S>>>16,b=N[(E+1)%16],k+=65535&(C=((w=B[(E+1)%16])>>>1|b<<31)^(w>>>8|b<<24)^(w>>>7|b<<25)),I+=C>>>16,T+=65535&(S=(b>>>1|w<<31)^(b>>>8|w<<24)^b>>>7),R+=S>>>16,b=N[(E+14)%16],I+=(C=((w=B[(E+14)%16])>>>19|b<<13)^(b>>>29|w<<3)^(w>>>6|b<<26))>>>16,T+=65535&(S=(b>>>19|w<<13)^(w>>>29|b<<3)^b>>>6),R+=S>>>16,R+=(T+=(I+=(k+=65535&C)>>>16)>>>16)>>>16,N[E]=65535&T|R<<16,B[E]=65535&k|I<<16;k=65535&(C=F),I=C>>>16,T=65535&(S=O),R=S>>>16,S=e[0],I+=(C=t[0])>>>16,T+=65535&S,R+=S>>>16,R+=(T+=(I+=(k+=65535&C)>>>16)>>>16)>>>16,e[0]=O=65535&T|R<<16,t[0]=F=65535&k|I<<16,k=65535&(C=z),I=C>>>16,T=65535&(S=P),R=S>>>16,S=e[1],I+=(C=t[1])>>>16,T+=65535&S,R+=S>>>16,R+=(T+=(I+=(k+=65535&C)>>>16)>>>16)>>>16,e[1]=P=65535&T|R<<16,t[1]=z=65535&k|I<<16,k=65535&(C=j),I=C>>>16,T=65535&(S=x),R=S>>>16,S=e[2],I+=(C=t[2])>>>16,T+=65535&S,R+=S>>>16,R+=(T+=(I+=(k+=65535&C)>>>16)>>>16)>>>16,e[2]=x=65535&T|R<<16,t[2]=j=65535&k|I<<16,k=65535&(C=H),I=C>>>16,T=65535&(S=L),R=S>>>16,S=e[3],I+=(C=t[3])>>>16,T+=65535&S,R+=S>>>16,R+=(T+=(I+=(k+=65535&C)>>>16)>>>16)>>>16,e[3]=L=65535&T|R<<16,t[3]=H=65535&k|I<<16,k=65535&(C=q),I=C>>>16,T=65535&(S=D),R=S>>>16,S=e[4],I+=(C=t[4])>>>16,T+=65535&S,R+=S>>>16,R+=(T+=(I+=(k+=65535&C)>>>16)>>>16)>>>16,e[4]=D=65535&T|R<<16,t[4]=q=65535&k|I<<16,k=65535&(C=V),I=C>>>16,T=65535&(S=M),R=S>>>16,S=e[5],I+=(C=t[5])>>>16,T+=65535&S,R+=S>>>16,R+=(T+=(I+=(k+=65535&C)>>>16)>>>16)>>>16,e[5]=M=65535&T|R<<16,t[5]=V=65535&k|I<<16,k=65535&(C=G),I=C>>>16,T=65535&(S=U),R=S>>>16,S=e[6],I+=(C=t[6])>>>16,T+=65535&S,R+=S>>>16,R+=(T+=(I+=(k+=65535&C)>>>16)>>>16)>>>16,e[6]=U=65535&T|R<<16,t[6]=G=65535&k|I<<16,k=65535&(C=W),I=C>>>16,T=65535&(S=K),R=S>>>16,S=e[7],I+=(C=t[7])>>>16,T+=65535&S,R+=S>>>16,R+=(T+=(I+=(k+=65535&C)>>>16)>>>16)>>>16,e[7]=K=65535&T|R<<16,t[7]=W=65535&k|I<<16,Y+=128,n-=128}return n}function X(e,t,r){var n,i=new Int32Array(8),s=new Int32Array(8),o=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,Y(i,s,t,r),r%=128,n=0;n<r;n++)o[n]=t[a-r+n];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,p(o,r-8,a/536870912|0,a<<3),Y(i,s,o,r),n=0;n<8;n++)p(e,8*n,i[n],s[n]);return 0}function $(e,r){var n=t(),i=t(),s=t(),o=t(),a=t(),c=t(),u=t(),l=t(),f=t();U(n,e[1],e[0]),U(f,r[1],r[0]),K(n,n,f),M(i,e[0],e[1]),M(f,r[0],r[1]),K(i,i,f),K(s,e[3],r[3]),K(s,s,h),K(o,e[2],r[2]),M(o,o,o),U(a,i,n),U(c,o,s),M(u,o,s),M(l,i,n),K(e[0],a,c),K(e[1],l,u),K(e[2],u,c),K(e[3],a,l)}function Z(e,t,r){var n;for(n=0;n<4;n++)O(e[n],t[n],r)}function J(e,r){var n=t(),i=t(),s=t();z(s,r[2]),K(n,r[0],s),K(i,r[1],s),P(e,i),e[31]^=L(n)<<7}function ee(e,t,r){var n,i;for(N(e[0],o),N(e[1],a),N(e[2],a),N(e[3],o),i=255;i>=0;--i)Z(e,t,n=r[i/8|0]>>(7&i)&1),$(t,e),$(e,e),Z(e,t,n)}function te(e,r){var n=[t(),t(),t(),t()];N(n[0],l),N(n[1],f),N(n[2],a),K(n[3],l,f),ee(e,n,r)}function re(e,r,i){var s,o=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||n(r,32),X(o,r,32),o[0]&=248,o[31]&=127,o[31]|=64,te(a,o),J(e,a),s=0;s<32;s++)r[s+32]=e[s];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*ne[i-(n-32)],r=t[i]+128>>8,t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*ne[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*ne[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function se(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function oe(e,r,n,i){var s,o,a=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),h=new Float64Array(64),l=[t(),t(),t(),t()];X(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var f=n+64;for(s=0;s<n;s++)e[64+s]=r[s];for(s=0;s<32;s++)e[32+s]=a[32+s];for(X(u,e.subarray(32),n+32),se(u),te(l,u),J(e,l),s=32;s<64;s++)e[s]=i[s];for(X(c,e,n+64),se(c),s=0;s<64;s++)h[s]=0;for(s=0;s<32;s++)h[s]=u[s];for(s=0;s<32;s++)for(o=0;o<32;o++)h[s+o]+=c[s]*a[o];return ie(e.subarray(32),h),f}function ae(e,r){var n=t(),i=t(),s=t(),c=t(),h=t(),l=t(),f=t();return N(e[2],a),D(e[1],r),F(s,e[1]),K(c,s,u),U(s,s,e[2]),M(c,e[2],c),F(h,c),F(l,h),K(f,l,h),K(n,f,s),K(n,n,c),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)F(i,i),1!==n&&K(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(n,n),K(n,n,s),K(n,n,c),K(n,n,c),K(e[0],n,c),F(i,e[0]),K(i,i,c),x(i,s)&&K(e[0],e[0],d),F(i,e[0]),K(i,i,c),x(i,s)?-1:(L(e[0])===r[31]>>7&&U(e[0],o,e[0]),K(e[3],e[0],e[1]),0)}function ce(e,r,n,i){var s,o=new Uint8Array(32),a=new Uint8Array(64),c=[t(),t(),t(),t()],u=[t(),t(),t(),t()];if(-1,n<64)return-1;if(ae(u,i))return-1;for(s=0;s<n;s++)e[s]=r[s];for(s=0;s<32;s++)e[s+32]=i[s];if(X(a,e,n),se(a),ee(c,u,a),te(u,r.subarray(32)),$(c,u),J(o,c),n-=64,y(r,0,o,0)){for(s=0;s<n;s++)e[s]=0;return-1}for(s=0;s<n;s++)e[s]=r[s+64];return n}var ue=32,he=24,le=32,fe=32,de=he;function pe(e,t){if(e.length!==ue)throw new Error("bad key size");if(t.length!==he)throw new Error("bad nonce size")}function Ae(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ge(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:_,crypto_stream_xor:S,crypto_stream:E,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:v,crypto_onetimeauth:k,crypto_onetimeauth_verify:I,crypto_verify_16:g,crypto_verify_32:y,crypto_secretbox:T,crypto_secretbox_open:R,crypto_scalarmult:j,crypto_scalarmult_base:H,crypto_box_beforenm:V,crypto_box_afternm:G,crypto_box:function(e,t,r,n,i,s){var o=new Uint8Array(32);return V(o,i,s),G(e,t,r,n,o)},crypto_box_open:function(e,t,r,n,i,s){var o=new Uint8Array(32);return V(o,i,s),W(e,t,r,n,o)},crypto_box_keypair:q,crypto_hash:X,crypto_sign:oe,crypto_sign_keypair:re,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:ue,crypto_secretbox_NONCEBYTES:he,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:le,crypto_box_SECRETKEYBYTES:fe,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:de,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){Ae(e,t,r),pe(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),s=0;s<e.length;s++)n[s+32]=e[s];return T(i,n,n.length,t,r),i.subarray(16)},e.secretbox.open=function(e,t,r){Ae(e,t,r),pe(r,t);for(var n=new Uint8Array(16+e.length),i=new Uint8Array(n.length),s=0;s<e.length;s++)n[s+16]=e[s];return n.length<32?null:0!==R(i,n,n.length,t,r)?null:i.subarray(32)},e.secretbox.keyLength=ue,e.secretbox.nonceLength=he,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(Ae(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return j(r,e,t),r},e.scalarMult.base=function(e){if(Ae(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return H(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var s=e.box.before(n,i);return e.secretbox(t,r,s)},e.box.before=function(e,t){Ae(e,t),function(e,t){if(e.length!==le)throw new Error("bad public key size");if(t.length!==fe)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return V(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var s=e.box.before(n,i);return e.secretbox.open(t,r,s)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(le),t=new Uint8Array(fe);return q(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(Ae(e),e.length!==fe)throw new Error("bad secret key size");var t=new Uint8Array(le);return H(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=le,e.box.secretKeyLength=fe,e.box.sharedKeyLength=32,e.box.nonceLength=de,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(Ae(e,t),64!==t.length)throw new Error("bad secret key size");var r=new Uint8Array(64+e.length);return oe(r,e,e.length,t),r},e.sign.open=function(e,t){if(Ae(e,t),32!==t.length)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ce(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),s=0;s<i.length;s++)i[s]=r[s];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(64),s=0;s<i.length;s++)i[s]=n[s];return i},e.sign.detached.verify=function(e,t,r){if(Ae(e,t,r),64!==t.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var n,i=new Uint8Array(64+e.length),s=new Uint8Array(64+e.length);for(n=0;n<64;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+64]=e[n];return ce(s,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(Ae(e),64!==e.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(Ae(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=e[n];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){Ae(e);var t=new Uint8Array(64);return X(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return Ae(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===A(e,0,t,0,e.length))},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];ge(i)}))}else(t=r(/*! crypto */612))&&t.randomBytes&&e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];ge(i)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!***********************************************************!*\
  !*** ./node_modules/libp2p-crypto-secp256k1/src/index.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! bs58 */47),i=r(/*! multihashing-async */315);e.exports=(e,t,s)=>{s=s||r(/*! ./crypto */617)(t);class o{constructor(e){s.validatePublicKey(e),this._key=e}verify(e,t,r){c(r),s.hashAndVerify(this._key,t,e,r)}marshal(){return s.compressPublicKey(this._key)}get bytes(){return e.PublicKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()})}equals(e){return this.bytes.equals(e.bytes)}hash(e){c(e),i(this.bytes,"sha2-256",e)}}class a{constructor(e,t){this._key=e,this._publicKey=t||s.computePublicKey(e),s.validatePrivateKey(this._key),s.validatePublicKey(this._publicKey)}sign(e,t){c(t),s.hashAndSign(this._key,e,t)}get public(){return new o(this._publicKey)}marshal(){return this._key}get bytes(){return e.PrivateKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()})}equals(e){return this.bytes.equals(e.bytes)}hash(e){c(e),i(this.bytes,"sha2-256",e)}id(e){this.public.hash((t,r)=>{if(t)return e(t);e(null,n.encode(r))})}}function c(e){if("function"!=typeof e)throw new Error("callback is required")}return{Secp256k1PublicKey:o,Secp256k1PrivateKey:a,unmarshalSecp256k1PrivateKey:function(e,t){t(null,new a(e))},unmarshalSecp256k1PublicKey:function(e){return new o(e)},generateKeyPair:function(e,t){void 0===t&&"function"==typeof e&&(t=e),c(t),s.generateKey((e,r)=>{if(e)return t(e);let n;try{n=new a(r)}catch(e){return t(e)}t(null,n)})}}}},
/*!********************************************************************************************!*\
  !*** ./node_modules/libp2p-crypto-secp256k1/node_modules/multihashing-async/src/crypto.js ***!
  \********************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! js-sha3 */49),i=r(/*! murmurhash3js */101),s=r(/*! ./utils */316),o=r(/*! ./crypto-sha1-2 */615),a=s.toCallback,c=s.toBuf,u=s.fromString,h=s.fromNumberTo32BitBuf;e.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(n.sha3_512)),sha3384:a(c(n.sha3_384)),sha3256:a(c(n.sha3_256)),sha3224:a(c(n.sha3_224)),shake128:a(c(n.shake_128,128)),shake256:a(c(n.shake_256,256)),keccak224:a(c(n.keccak_224)),keccak256:a(c(n.keccak_256)),keccak384:a(c(n.keccak_384)),keccak512:a(c(n.keccak_512)),murmur3128:a(c(u(i.x64.hash128))),murmur332:a(h(u(i.x86.hash32))),addBlake:r(/*! ./blake */616),dblSha2256:(e,r)=>{o.sha2256(e,(e,n)=>{e&&r(e),o.sha2256(t.from(n),r)})}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************************************************************************************!*\
  !*** ./node_modules/libp2p-crypto-secp256k1/node_modules/multihashing-async/src/crypto-sha1-2-browser.js ***!
  \***********************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! nodeify */102),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(r,s)=>{const o=i.digest({name:e},r);if("function"!=typeof o.then)return o.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(o.oncomplete=e=>{s(null,e.target.result)});n(o.then(e=>t.from(new Uint8Array(e))),s)}}e.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************************************************************!*\
  !*** ./node_modules/libp2p-crypto-secp256k1/node_modules/multihashing-async/src/blake.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! blakejs */50),i=r(/*! ./utils */316).toCallback,s={init:n.blake2bInit,update:n.blake2bUpdate,digest:n.blake2bFinal},o={init:n.blake2sInit,update:n.blake2sUpdate,digest:n.blake2sFinal},a=(e,r)=>i(n=>{const i=r.init(e,null);return r.update(i,n),t.from(r.digest(i))});e.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************!*\
  !*** ./node_modules/libp2p-crypto-secp256k1/src/crypto.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! secp256k1 */618),i=r(/*! multihashing-async */315),s=r(/*! async/setImmediate */32),o="sha2-256";e.exports=e=>{function t(e){if(!n.privateKeyVerify(e))throw new Error("Invalid private key")}return{generateKey:function(t){let r;do{r=e(32)}while(!n.privateKeyVerify(r));((e,r)=>s(()=>t(e,r)))(null,r)},privateKeyLength:32,hashAndSign:function(e,t,r){const a=(e,t)=>s(()=>r(e,t));i.digest(t,o,(t,r)=>{if(t)return a(t);try{const t=n.sign(r,e),i=n.signatureExport(t.signature);return a(null,i)}catch(t){a(t)}})},hashAndVerify:function(e,t,r,a){const c=(e,t)=>s(()=>a(e,t));i.digest(r,o,(r,i)=>{if(r)return c(r);try{t=n.signatureImport(t);const r=n.verify(i,t,e);return c(null,r)}catch(r){c(r)}})},compressPublicKey:function(e){if(!n.publicKeyVerify(e))throw new Error("Invalid public key");return n.publicKeyConvert(e,!0)},decompressPublicKey:function(e){return n.publicKeyConvert(e,!1)},validatePrivateKey:t,validatePublicKey:function(e){if(!n.publicKeyVerify(e))throw new Error("Invalid public key")},computePublicKey:function(e){return t(e),n.publicKeyCreate(e)}}}},
/*!**************************************!*\
  !*** ./node_modules/secp256k1/js.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=r(/*! ./lib */619)(r(/*! ./lib/js */623))},
/*!*********************************************!*\
  !*** ./node_modules/secp256k1/lib/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./assert */620),i=r(/*! ./der */621),s=r(/*! ./messages.json */317);function o(e,t){return void 0===e?t:(n.isBoolean(e,s.COMPRESSED_TYPE_INVALID),e)}e.exports=function(e){return{privateKeyVerify:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0);var a=e.privateKeyExport(t,r);return i.privateKeyExport(t,a,r)},privateKeyImport:function(t){if(n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),(t=i.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(s.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return n.isBuffer(t,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),r=o(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),i=o(i,!0),e.publicKeyTweakAdd(t,r,i)},publicKeyTweakMul:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,s.TWEAK_LENGTH_INVALID),i=o(i,!0),e.publicKeyTweakMul(t,r,i)},publicKeyCombine:function(t,r){n.isArray(t,s.EC_PUBLIC_KEYS_TYPE_INVALID),n.isLengthGTZero(t,s.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<t.length;++i)n.isBuffer(t[i],s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t[i],33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID);return r=o(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return i.signatureExport(r)},signatureImport:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(s.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){n.isBuffer(t,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,s.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(s.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,i){n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID);var o=null,a=null;return void 0!==i&&(n.isObject(i,s.OPTIONS_TYPE_INVALID),void 0!==i.data&&(n.isBuffer(i.data,s.OPTIONS_DATA_TYPE_INVALID),n.isBufferLength(i.data,32,s.OPTIONS_DATA_LENGTH_INVALID),o=i.data),void 0!==i.noncefn&&(n.isFunction(i.noncefn,s.OPTIONS_NONCEFN_TYPE_INVALID),a=i.noncefn)),e.sign(t,r,a,o)},verify:function(t,r,i){return n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),n.isBuffer(i,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(i,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,i)},recover:function(t,r,i,a){return n.isBuffer(t,s.MSG32_TYPE_INVALID),n.isBufferLength(t,32,s.MSG32_LENGTH_INVALID),n.isBuffer(r,s.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,s.ECDSA_SIGNATURE_LENGTH_INVALID),n.isNumber(i,s.RECOVERY_ID_TYPE_INVALID),n.isNumberInInterval(i,-1,4,s.RECOVERY_ID_VALUE_INVALID),a=o(a,!0),e.recover(t,r,i,a)},ecdh:function(t,r){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,i){return n.isBuffer(t,s.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,s.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,s.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,s.EC_PRIVATE_KEY_LENGTH_INVALID),i=o(i,!0),e.ecdhUnsafe(t,r,i)}}}},
/*!**********************************************!*\
  !*** ./node_modules/secp256k1/lib/assert.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){var r=Object.prototype.toString;t.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},t.isBoolean=function(e,t){if("[object Boolean]"!==r.call(e))throw TypeError(t)},t.isBuffer=function(t,r){if(!e.isBuffer(t))throw TypeError(r)},t.isFunction=function(e,t){if("[object Function]"!==r.call(e))throw TypeError(t)},t.isNumber=function(e,t){if("[object Number]"!==r.call(e))throw TypeError(t)},t.isObject=function(e,t){if("[object Object]"!==r.call(e))throw TypeError(t)},t.isBufferLength=function(e,t,r){if(e.length!==t)throw RangeError(r)},t.isBufferLength2=function(e,t,r,n){if(e.length!==t&&e.length!==r)throw RangeError(n)},t.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},t.isNumberInInterval=function(e,t,r,n){if(e<=t||e>=r)throw RangeError(n)}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************!*\
  !*** ./node_modules/secp256k1/lib/der.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! safe-buffer */6).Buffer,i=r(/*! bip66 */622),s=n.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=n.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t.privateKeyExport=function(e,t,r){var i=n.from(r?s:o);return e.copy(i,r?8:9),t.copy(i,r?181:214),i},t.privateKeyImport=function(e){var t=e.length,r=0;if(!(t<r+1||48!==e[r])&&!(t<(r+=1)+1)&&128&e[r]){var n=127&e[r];if(r+=1,!(n<1||n>2||t<r+n)){var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);if(!(t<(r+=n)+i||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]))return e.slice(r+2,r+2+e[r+1])}}},t.signatureExport=function(e){for(var t=n.concat([n.from([0]),e.r]),r=33,s=0;r>1&&0===t[s]&&!(128&t[s+1]);--r,++s);for(var o=n.concat([n.from([0]),e.s]),a=33,c=0;a>1&&0===o[c]&&!(128&o[c+1]);--a,++c);return i.encode(t.slice(s),o.slice(c))},t.signatureImport=function(e){var t=n.alloc(32,0),r=n.alloc(32,0);try{var s=i.decode(e);if(33===s.r.length&&0===s.r[0]&&(s.r=s.r.slice(1)),s.r.length>32)throw new Error("R length is too long");if(33===s.s.length&&0===s.s[0]&&(s.s=s.s.slice(1)),s.s.length>32)throw new Error("S length is too long")}catch(e){return}return s.r.copy(t,32-s.r.length),s.s.copy(r,32-s.s.length),{r:t,s:r}},t.signatureImportLax=function(e){var t=n.alloc(32,0),r=n.alloc(32,0),i=e.length,s=0;if(48===e[s++]){var o=e[s++];if(!(128&o&&(s+=o-128)>i)&&2===e[s++]){var a=e[s++];if(128&a){if(s+(o=a-128)>i)return;for(;o>0&&0===e[s];s+=1,o-=1);for(a=0;o>0;s+=1,o-=1)a=(a<<8)+e[s]}if(!(a>i-s)){var c=s;if(s+=a,2===e[s++]){var u=e[s++];if(128&u){if(s+(o=u-128)>i)return;for(;o>0&&0===e[s];s+=1,o-=1);for(u=0;o>0;s+=1,o-=1)u=(u<<8)+e[s]}if(!(u>i-s)){var h=s;for(s+=u;a>0&&0===e[c];a-=1,c+=1);if(!(a>32)){var l=e.slice(c,c+a);for(l.copy(t,32-l.length);u>0&&0===e[h];u-=1,h+=1);if(!(u>32)){var f=e.slice(h,h+u);return f.copy(r,32-f.length),{r:t,s:r}}}}}}}}}},
/*!*************************************!*\
  !*** ./node_modules/bip66/index.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer;e.exports={check:function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var r=e[5+t];return 0!==r&&(6+t+r===e.length&&(!(128&e[4])&&(!(t>1&&0===e[4]&&!(128&e[5]))&&(!(128&e[t+6])&&!(r>1&&0===e[t+6]&&!(128&e[t+7]))))))},decode:function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var r=e[5+t];if(0===r)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},encode:function(e,t){var r=e.length,i=t.length;if(0===r)throw new Error("R length is zero");if(0===i)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(i>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(i>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var s=n.allocUnsafe(6+r+i);return s[0]=48,s[1]=s.length-2,s[2]=2,s[3]=e.length,e.copy(s,4),s[4+r]=2,s[5+r]=t.length,t.copy(s,6+r),s}}},
/*!************************************************!*\
  !*** ./node_modules/secp256k1/lib/js/index.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! safe-buffer */6).Buffer,i=r(/*! create-hash */624),s=r(/*! drbg.js/hmac */638),o=r(/*! ../messages.json */317),a=r(/*! ./bn */139),c=r(/*! ./ecpoint */328),u=r(/*! ./ecpointg */644);t.privateKeyVerify=function(e){var t=a.fromBuffer(e);return!(t.isOverflow()||t.isZero())},t.privateKeyExport=function(e,t){var r=a.fromBuffer(e);if(r.isOverflow()||r.isZero())throw new Error(o.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return u.mul(r).toPublicKey(t)},t.privateKeyNegate=function(e){var t=a.fromBuffer(e);return t.isZero()?n.alloc(32):(t.ucmp(a.n)>0&&t.isub(a.n),a.n.sub(t).toBuffer())},t.privateKeyModInverse=function(e){var t=a.fromBuffer(e);if(t.isOverflow()||t.isZero())throw new Error(o.EC_PRIVATE_KEY_RANGE_INVALID);return t.uinvm().toBuffer()},t.privateKeyTweakAdd=function(e,t){var r=a.fromBuffer(t);if(r.isOverflow())throw new Error(o.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(a.fromBuffer(e)),r.isOverflow()&&r.isub(a.n),r.isZero())throw new Error(o.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toBuffer()},t.privateKeyTweakMul=function(e,t){var r=a.fromBuffer(t);if(r.isOverflow()||r.isZero())throw new Error(o.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);var n=a.fromBuffer(e);return r.umul(n).ureduce().toBuffer()},t.publicKeyCreate=function(e,t){var r=a.fromBuffer(e);if(r.isOverflow()||r.isZero())throw new Error(o.EC_PUBLIC_KEY_CREATE_FAIL);return u.mul(r).toPublicKey(t)},t.publicKeyConvert=function(e,t){var r=c.fromPublicKey(e);if(null===r)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);return r.toPublicKey(t)},t.publicKeyVerify=function(e){return null!==c.fromPublicKey(e)},t.publicKeyTweakAdd=function(e,t,r){var n=c.fromPublicKey(e);if(null===n)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);if((t=a.fromBuffer(t)).isOverflow())throw new Error(o.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var i=u.mul(t).add(n);if(i.inf)throw new Error(o.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return i.toPublicKey(r)},t.publicKeyTweakMul=function(e,t,r){var n=c.fromPublicKey(e);if(null===n)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);if((t=a.fromBuffer(t)).isOverflow()||t.isZero())throw new Error(o.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.mul(t).toPublicKey(r)},t.publicKeyCombine=function(e,t){for(var r=new Array(e.length),n=0;n<e.length;++n)if(r[n]=c.fromPublicKey(e[n]),null===r[n])throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);for(var i=r[0],s=1;s<r.length;++s)i=i.add(r[s]);if(i.inf)throw new Error(o.EC_PUBLIC_KEY_COMBINE_FAIL);return i.toPublicKey(t)},t.signatureNormalize=function(e){var t=a.fromBuffer(e.slice(0,32)),r=a.fromBuffer(e.slice(32,64));if(t.isOverflow()||r.isOverflow())throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);var i=n.from(e);return r.isHigh()&&a.n.sub(r).toBuffer().copy(i,32),i},t.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(a.fromBuffer(t).isOverflow()||a.fromBuffer(r).isOverflow())throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},t.signatureImport=function(e){var t=a.fromBuffer(e.r);t.isOverflow()&&(t=a.fromNumber(0));var r=a.fromBuffer(e.s);return r.isOverflow()&&(r=a.fromNumber(0)),n.concat([t.toBuffer(),r.toBuffer()])},t.sign=function(e,t,r,i){var c=a.fromBuffer(t);if(c.isOverflow()||c.isZero())throw new Error(o.ECDSA_SIGN_FAIL);if(null===r){var h=new s("sha256",t,e,i);r=function(){return h.generate(32)}}for(var l=a.fromBuffer(e),f=0;;++f){var d=r(e,t,null,i,f);if(!n.isBuffer(d)||32!==d.length)throw new Error(o.ECDSA_SIGN_FAIL);var p=a.fromBuffer(d);if(!p.isOverflow()&&!p.isZero()){var A=u.mul(p),g=A.x.fireduce();if(!g.isZero()){var y=p.uinvm().umul(g.umul(c).ureduce().iadd(l).fireduce()).ureduce();if(!y.isZero()){var m=(0!==A.x.ucmp(g)?2:0)|(A.y.isOdd()?1:0);return y.isHigh()&&(y=a.n.sub(y),m^=1),{signature:n.concat([g.toBuffer(),y.toBuffer()]),recovery:m}}}}}},t.verify=function(e,t,r){var n=a.fromBuffer(t.slice(0,32)),i=a.fromBuffer(t.slice(32,64));if(n.isOverflow()||i.isOverflow())throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);if(i.isHigh()||n.isZero()||i.isZero())return!1;var s=c.fromPublicKey(r);if(null===s)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);var h=i.uinvm(),l=h.umul(a.fromBuffer(e)).ureduce(),f=h.umul(n).ureduce(),d=u.mulAdd(l,s,f);if(d.inf)return!1;var p=d.z.redSqr();return 0===n.redMul(p).ucmp(d.x)||!(n.ucmp(a.psn)>=0)&&0===n.iadd(a.psn).redMul(p).ucmp(d.x)},t.recover=function(e,t,r,i){var s=a.fromBuffer(t.slice(0,32)),h=a.fromBuffer(t.slice(32,64));if(s.isOverflow()||h.isOverflow())throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);do{if(s.isZero()||h.isZero())break;var l=s;if(r>>1){if(l.ucmp(a.psn)>=0)break;l=s.add(a.n)}var f=n.concat([n.from([2+(1&r)]),l.toBuffer()]),d=c.fromPublicKey(f);if(null===d)break;var p=s.uinvm(),A=a.n.sub(a.fromBuffer(e)).umul(p).ureduce(),g=h.umul(p).ureduce();return c.fromECJPoint(u.mulAdd(A,d,g)).toPublicKey(i)}while(0);throw new Error(o.ECDSA_RECOVER_FAIL)},t.ecdh=function(e,r){var n=t.ecdhUnsafe(e,r,!0);return i("sha256").update(n).digest()},t.ecdhUnsafe=function(e,t,r){var n=c.fromPublicKey(e);if(null===n)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);var i=a.fromBuffer(t);if(i.isOverflow()||i.isZero())throw new Error(o.ECDH_FAIL);return n.mul(i).toPublicKey(r)}},
/*!*********************************************!*\
  !*** ./node_modules/create-hash/browser.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! inherits */3),i=r(/*! md5.js */197),s=r(/*! ripemd160 */324),o=r(/*! sha.js */325),a=r(/*! cipher-base */61);function c(e){a.call(this,"digest"),this._hash=e}n(c,a),c.prototype._update=function(e){this._hash.update(e)},c.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new s:new c(o(e))}},
/*!**********************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/isarray/index.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!********************************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/BufferList.js ***!
  \********************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! safe-buffer */199).Buffer,i=r(/*! util */628);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,s=n.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=s,i=a,t.copy(r,i),a+=o.data.length,o=o.next;return s},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!************************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_passthrough.js ***!
  \************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=s;var n=r(/*! ./_stream_transform */323),i=r(/*! core-util-is */104);function s(e){if(!(this instanceof s))return new s(e);n.call(this,e)}i.inherits=r(/*! inherits */3),i.inherits(s,n),s.prototype._transform=function(e,t,r){r(null,e)}},
/*!*****************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/writable-browser.js ***!
  \*****************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ./lib/_stream_writable.js */200)},
/*!***************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/duplex-browser.js ***!
  \***************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ./lib/_stream_duplex.js */60)},
/*!**********************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/transform.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ./readable */198).Transform},
/*!************************************************************************************!*\
  !*** ./node_modules/stream-browserify/node_modules/readable-stream/passthrough.js ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ./readable */198).PassThrough},
/*!************************************!*\
  !*** ./node_modules/sha.js/sha.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! inherits */3),i=r(/*! ./hash */78),s=r(/*! safe-buffer */6).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function c(){this.init(),this._w=a,i.call(this,64,56)}function u(e){return e<<30|e>>>2}function h(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(c,i),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,s=0|this._c,a=0|this._d,c=0|this._e,l=0;l<16;++l)r[l]=e.readInt32BE(4*l);for(;l<80;++l)r[l]=r[l-3]^r[l-8]^r[l-14]^r[l-16];for(var f=0;f<80;++f){var d=~~(f/20),p=0|((t=n)<<5|t>>>27)+h(d,i,s,a)+c+r[f]+o[d];c=a,a=s,s=u(i),i=n,n=p}this._a=n+this._a|0,this._b=i+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=s.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},
/*!*************************************!*\
  !*** ./node_modules/sha.js/sha1.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! inherits */3),i=r(/*! ./hash */78),s=r(/*! safe-buffer */6).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function c(){this.init(),this._w=a,i.call(this,64,56)}function u(e){return e<<5|e>>>27}function h(e){return e<<30|e>>>2}function l(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(c,i),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,s=0|this._c,a=0|this._d,c=0|this._e,f=0;f<16;++f)r[f]=e.readInt32BE(4*f);for(;f<80;++f)r[f]=(t=r[f-3]^r[f-8]^r[f-14]^r[f-16])<<1|t>>>31;for(var d=0;d<80;++d){var p=~~(d/20),A=u(n)+l(p,i,s,a)+c+r[d]+o[p]|0;c=a,a=s,s=h(i),i=n,n=A}this._a=n+this._a|0,this._b=i+this._b|0,this._c=s+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=s.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},
/*!***************************************!*\
  !*** ./node_modules/sha.js/sha224.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! inherits */3),i=r(/*! ./sha256 */326),s=r(/*! ./hash */78),o=r(/*! safe-buffer */6).Buffer,a=new Array(64);function c(){this.init(),this._w=a,s.call(this,64,56)}n(c,i),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var e=o.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=c},
/*!***************************************!*\
  !*** ./node_modules/sha.js/sha384.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! inherits */3),i=r(/*! ./sha512 */327),s=r(/*! ./hash */78),o=r(/*! safe-buffer */6).Buffer,a=new Array(160);function c(){this.init(),this._w=a,s.call(this,128,112)}n(c,i),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var e=o.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=c},
/*!**************************************!*\
  !*** ./node_modules/drbg.js/hmac.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){var n=r(/*! create-hmac */639),i=r(/*! ./lib/hash-info.json */642),s=new t(0),o=new t([0]),a=new t([1]);function c(e,t,r,n){var s=i[e];if(void 0===s)throw new Error("hash "+e+" is not supported");this._algo=e,this._securityStrength=s.securityStrength/8,this._outlen=s.outlen/8,this._reseedInterval=281474976710656,this._init(t,r,n)}c.prototype._update=function(e){var t=n(this._algo,this._K).update(this._V).update(o);e&&t.update(e),this._K=t.digest(),this._V=n(this._algo,this._K).update(this._V).digest(),e&&(this._K=n(this._algo,this._K).update(this._V).update(a).update(e).digest(),this._V=n(this._algo,this._K).update(this._V).digest())},c.prototype._init=function(e,r,n){if(e.length<this._securityStrength)throw new Error("Not enough entropy");this._K=new t(this._outlen),this._V=new t(this._outlen);for(var i=0;i<this._K.length;++i)this._K[i]=0,this._V[i]=1;this._update(t.concat([e,r,n||s])),this._reseed=1},c.prototype.reseed=function(e,r){if(e.length<this._securityStrength)throw new Error("Not enough entropy");this._update(t.concat([e,r||s])),this._reseed=1},c.prototype.generate=function(e,r){if(this._reseed>this._reseedInterval)throw new Error("Reseed is required");r&&0===r.length&&(r=void 0),r&&this._update(r);for(var i=new t(0);i.length<e;)this._V=n(this._algo,this._K).update(this._V).digest(),i=t.concat([i,this._V]);return this._update(r),this._reseed+=1,i.slice(0,e)},e.exports=c}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************!*\
  !*** ./node_modules/create-hmac/browser.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! inherits */3),i=r(/*! ./legacy */640),s=r(/*! cipher-base */61),o=r(/*! safe-buffer */6).Buffer,a=r(/*! create-hash/md5 */641),c=r(/*! ripemd160 */324),u=r(/*! sha.js */325),h=o.alloc(128);function l(e,t){s.call(this,"digest"),"string"==typeof t&&(t=o.from(t));var r="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>r)?t=("rmd160"===e?new c:u(e)).update(t).digest():t.length<r&&(t=o.concat([t,h],r));for(var n=this._ipad=o.allocUnsafe(r),i=this._opad=o.allocUnsafe(r),a=0;a<r;a++)n[a]=54^t[a],i[a]=92^t[a];this._hash="rmd160"===e?new c:u(e),this._hash.update(n)}n(l,s),l.prototype._update=function(e){this._hash.update(e)},l.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new c:u(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new l("rmd160",t):"md5"===e?new i(a,t):new l(e,t)}},
/*!********************************************!*\
  !*** ./node_modules/create-hmac/legacy.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! inherits */3),i=r(/*! safe-buffer */6).Buffer,s=r(/*! cipher-base */61),o=i.alloc(128),a=64;function c(e,t){s.call(this,"digest"),"string"==typeof t&&(t=i.from(t)),this._alg=e,this._key=t,t.length>a?t=e(t):t.length<a&&(t=i.concat([t,o],a));for(var r=this._ipad=i.allocUnsafe(a),n=this._opad=i.allocUnsafe(a),c=0;c<a;c++)r[c]=54^t[c],n[c]=92^t[c];this._hash=[r]}n(c,s),c.prototype._update=function(e){this._hash.push(e)},c.prototype._final=function(){var e=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,e]))},e.exports=c},
/*!*****************************************!*\
  !*** ./node_modules/create-hash/md5.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! md5.js */197);e.exports=function(e){return(new n).update(e).digest()}},
/*!*************************************************!*\
  !*** ./node_modules/drbg.js/lib/hash-info.json ***!
  \*************************************************/
/*! exports provided: sha1, sha224, sha256, sha384, sha512, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"sha1":{"securityStrength":128,"outlen":160,"seedlen":440},"sha224":{"securityStrength":192,"outlen":224,"seedlen":440},"sha256":{"securityStrength":256,"outlen":256,"seedlen":440},"sha384":{"securityStrength":256,"outlen":384,"seedlen":888},"sha512":{"securityStrength":256,"outlen":512,"seedlen":888}}')},
/*!*******************************************************!*\
  !*** ./node_modules/secp256k1/lib/js/bn/optimized.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.umulTo10x10=function(e,t,r){var n,i,s,o=e.words,a=t.words,c=r.words,u=0,h=0|o[0],l=8191&h,f=h>>>13,d=0|o[1],p=8191&d,A=d>>>13,g=0|o[2],y=8191&g,m=g>>>13,_=0|o[3],b=8191&_,w=_>>>13,v=0|o[4],E=8191&v,S=v>>>13,C=0|o[5],k=8191&C,I=C>>>13,T=0|o[6],R=8191&T,N=T>>>13,B=0|o[7],O=8191&B,P=B>>>13,x=0|o[8],L=8191&x,D=x>>>13,M=0|o[9],U=8191&M,K=M>>>13,F=0|a[0],z=8191&F,j=F>>>13,H=0|a[1],q=8191&H,V=H>>>13,G=0|a[2],W=8191&G,Q=G>>>13,Y=0|a[3],X=8191&Y,$=Y>>>13,Z=0|a[4],J=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,he=0|a[8],le=8191&he,fe=he>>>13,de=0|a[9],pe=8191&de,Ae=de>>>13;r.length=19,n=Math.imul(l,z),i=Math.imul(l,j);var ge=u+n+((8191&(i+=Math.imul(f,z)))<<13);u=(s=Math.imul(f,j))+(i>>>13)+(ge>>>26),ge&=67108863,n=Math.imul(p,z),i=Math.imul(p,j),i+=Math.imul(A,z),s=Math.imul(A,j),n+=Math.imul(l,q),i+=Math.imul(l,V);var ye=u+n+((8191&(i+=Math.imul(f,q)))<<13);u=(s+=Math.imul(f,V))+(i>>>13)+(ye>>>26),ye&=67108863,n=Math.imul(y,z),i=Math.imul(y,j),i+=Math.imul(m,z),s=Math.imul(m,j),n+=Math.imul(p,q),i+=Math.imul(p,V),i+=Math.imul(A,q),s+=Math.imul(A,V),n+=Math.imul(l,W),i+=Math.imul(l,Q);var me=u+n+((8191&(i+=Math.imul(f,W)))<<13);u=(s+=Math.imul(f,Q))+(i>>>13)+(me>>>26),me&=67108863,n=Math.imul(b,z),i=Math.imul(b,j),i+=Math.imul(w,z),s=Math.imul(w,j),n+=Math.imul(y,q),i+=Math.imul(y,V),i+=Math.imul(m,q),s+=Math.imul(m,V),n+=Math.imul(p,W),i+=Math.imul(p,Q),i+=Math.imul(A,W),s+=Math.imul(A,Q),n+=Math.imul(l,X),i+=Math.imul(l,$);var _e=u+n+((8191&(i+=Math.imul(f,X)))<<13);u=(s+=Math.imul(f,$))+(i>>>13)+(_e>>>26),_e&=67108863,n=Math.imul(E,z),i=Math.imul(E,j),i+=Math.imul(S,z),s=Math.imul(S,j),n+=Math.imul(b,q),i+=Math.imul(b,V),i+=Math.imul(w,q),s+=Math.imul(w,V),n+=Math.imul(y,W),i+=Math.imul(y,Q),i+=Math.imul(m,W),s+=Math.imul(m,Q),n+=Math.imul(p,X),i+=Math.imul(p,$),i+=Math.imul(A,X),s+=Math.imul(A,$),n+=Math.imul(l,J),i+=Math.imul(l,ee);var be=u+n+((8191&(i+=Math.imul(f,J)))<<13);u=(s+=Math.imul(f,ee))+(i>>>13)+(be>>>26),be&=67108863,n=Math.imul(k,z),i=Math.imul(k,j),i+=Math.imul(I,z),s=Math.imul(I,j),n+=Math.imul(E,q),i+=Math.imul(E,V),i+=Math.imul(S,q),s+=Math.imul(S,V),n+=Math.imul(b,W),i+=Math.imul(b,Q),i+=Math.imul(w,W),s+=Math.imul(w,Q),n+=Math.imul(y,X),i+=Math.imul(y,$),i+=Math.imul(m,X),s+=Math.imul(m,$),n+=Math.imul(p,J),i+=Math.imul(p,ee),i+=Math.imul(A,J),s+=Math.imul(A,ee),n+=Math.imul(l,re),i+=Math.imul(l,ne);var we=u+n+((8191&(i+=Math.imul(f,re)))<<13);u=(s+=Math.imul(f,ne))+(i>>>13)+(we>>>26),we&=67108863,n=Math.imul(R,z),i=Math.imul(R,j),i+=Math.imul(N,z),s=Math.imul(N,j),n+=Math.imul(k,q),i+=Math.imul(k,V),i+=Math.imul(I,q),s+=Math.imul(I,V),n+=Math.imul(E,W),i+=Math.imul(E,Q),i+=Math.imul(S,W),s+=Math.imul(S,Q),n+=Math.imul(b,X),i+=Math.imul(b,$),i+=Math.imul(w,X),s+=Math.imul(w,$),n+=Math.imul(y,J),i+=Math.imul(y,ee),i+=Math.imul(m,J),s+=Math.imul(m,ee),n+=Math.imul(p,re),i+=Math.imul(p,ne),i+=Math.imul(A,re),s+=Math.imul(A,ne),n+=Math.imul(l,se),i+=Math.imul(l,oe);var ve=u+n+((8191&(i+=Math.imul(f,se)))<<13);u=(s+=Math.imul(f,oe))+(i>>>13)+(ve>>>26),ve&=67108863,n=Math.imul(O,z),i=Math.imul(O,j),i+=Math.imul(P,z),s=Math.imul(P,j),n+=Math.imul(R,q),i+=Math.imul(R,V),i+=Math.imul(N,q),s+=Math.imul(N,V),n+=Math.imul(k,W),i+=Math.imul(k,Q),i+=Math.imul(I,W),s+=Math.imul(I,Q),n+=Math.imul(E,X),i+=Math.imul(E,$),i+=Math.imul(S,X),s+=Math.imul(S,$),n+=Math.imul(b,J),i+=Math.imul(b,ee),i+=Math.imul(w,J),s+=Math.imul(w,ee),n+=Math.imul(y,re),i+=Math.imul(y,ne),i+=Math.imul(m,re),s+=Math.imul(m,ne),n+=Math.imul(p,se),i+=Math.imul(p,oe),i+=Math.imul(A,se),s+=Math.imul(A,oe),n+=Math.imul(l,ce),i+=Math.imul(l,ue);var Ee=u+n+((8191&(i+=Math.imul(f,ce)))<<13);u=(s+=Math.imul(f,ue))+(i>>>13)+(Ee>>>26),Ee&=67108863,n=Math.imul(L,z),i=Math.imul(L,j),i+=Math.imul(D,z),s=Math.imul(D,j),n+=Math.imul(O,q),i+=Math.imul(O,V),i+=Math.imul(P,q),s+=Math.imul(P,V),n+=Math.imul(R,W),i+=Math.imul(R,Q),i+=Math.imul(N,W),s+=Math.imul(N,Q),n+=Math.imul(k,X),i+=Math.imul(k,$),i+=Math.imul(I,X),s+=Math.imul(I,$),n+=Math.imul(E,J),i+=Math.imul(E,ee),i+=Math.imul(S,J),s+=Math.imul(S,ee),n+=Math.imul(b,re),i+=Math.imul(b,ne),i+=Math.imul(w,re),s+=Math.imul(w,ne),n+=Math.imul(y,se),i+=Math.imul(y,oe),i+=Math.imul(m,se),s+=Math.imul(m,oe),n+=Math.imul(p,ce),i+=Math.imul(p,ue),i+=Math.imul(A,ce),s+=Math.imul(A,ue),n+=Math.imul(l,le),i+=Math.imul(l,fe);var Se=u+n+((8191&(i+=Math.imul(f,le)))<<13);u=(s+=Math.imul(f,fe))+(i>>>13)+(Se>>>26),Se&=67108863,n=Math.imul(U,z),i=Math.imul(U,j),i+=Math.imul(K,z),s=Math.imul(K,j),n+=Math.imul(L,q),i+=Math.imul(L,V),i+=Math.imul(D,q),s+=Math.imul(D,V),n+=Math.imul(O,W),i+=Math.imul(O,Q),i+=Math.imul(P,W),s+=Math.imul(P,Q),n+=Math.imul(R,X),i+=Math.imul(R,$),i+=Math.imul(N,X),s+=Math.imul(N,$),n+=Math.imul(k,J),i+=Math.imul(k,ee),i+=Math.imul(I,J),s+=Math.imul(I,ee),n+=Math.imul(E,re),i+=Math.imul(E,ne),i+=Math.imul(S,re),s+=Math.imul(S,ne),n+=Math.imul(b,se),i+=Math.imul(b,oe),i+=Math.imul(w,se),s+=Math.imul(w,oe),n+=Math.imul(y,ce),i+=Math.imul(y,ue),i+=Math.imul(m,ce),s+=Math.imul(m,ue),n+=Math.imul(p,le),i+=Math.imul(p,fe),i+=Math.imul(A,le),s+=Math.imul(A,fe),n+=Math.imul(l,pe),i+=Math.imul(l,Ae);var Ce=u+n+((8191&(i+=Math.imul(f,pe)))<<13);u=(s+=Math.imul(f,Ae))+(i>>>13)+(Ce>>>26),Ce&=67108863,n=Math.imul(U,q),i=Math.imul(U,V),i+=Math.imul(K,q),s=Math.imul(K,V),n+=Math.imul(L,W),i+=Math.imul(L,Q),i+=Math.imul(D,W),s+=Math.imul(D,Q),n+=Math.imul(O,X),i+=Math.imul(O,$),i+=Math.imul(P,X),s+=Math.imul(P,$),n+=Math.imul(R,J),i+=Math.imul(R,ee),i+=Math.imul(N,J),s+=Math.imul(N,ee),n+=Math.imul(k,re),i+=Math.imul(k,ne),i+=Math.imul(I,re),s+=Math.imul(I,ne),n+=Math.imul(E,se),i+=Math.imul(E,oe),i+=Math.imul(S,se),s+=Math.imul(S,oe),n+=Math.imul(b,ce),i+=Math.imul(b,ue),i+=Math.imul(w,ce),s+=Math.imul(w,ue),n+=Math.imul(y,le),i+=Math.imul(y,fe),i+=Math.imul(m,le),s+=Math.imul(m,fe),n+=Math.imul(p,pe),i+=Math.imul(p,Ae);var ke=u+n+((8191&(i+=Math.imul(A,pe)))<<13);u=(s+=Math.imul(A,Ae))+(i>>>13)+(ke>>>26),ke&=67108863,n=Math.imul(U,W),i=Math.imul(U,Q),i+=Math.imul(K,W),s=Math.imul(K,Q),n+=Math.imul(L,X),i+=Math.imul(L,$),i+=Math.imul(D,X),s+=Math.imul(D,$),n+=Math.imul(O,J),i+=Math.imul(O,ee),i+=Math.imul(P,J),s+=Math.imul(P,ee),n+=Math.imul(R,re),i+=Math.imul(R,ne),i+=Math.imul(N,re),s+=Math.imul(N,ne),n+=Math.imul(k,se),i+=Math.imul(k,oe),i+=Math.imul(I,se),s+=Math.imul(I,oe),n+=Math.imul(E,ce),i+=Math.imul(E,ue),i+=Math.imul(S,ce),s+=Math.imul(S,ue),n+=Math.imul(b,le),i+=Math.imul(b,fe),i+=Math.imul(w,le),s+=Math.imul(w,fe),n+=Math.imul(y,pe),i+=Math.imul(y,Ae);var Ie=u+n+((8191&(i+=Math.imul(m,pe)))<<13);u=(s+=Math.imul(m,Ae))+(i>>>13)+(Ie>>>26),Ie&=67108863,n=Math.imul(U,X),i=Math.imul(U,$),i+=Math.imul(K,X),s=Math.imul(K,$),n+=Math.imul(L,J),i+=Math.imul(L,ee),i+=Math.imul(D,J),s+=Math.imul(D,ee),n+=Math.imul(O,re),i+=Math.imul(O,ne),i+=Math.imul(P,re),s+=Math.imul(P,ne),n+=Math.imul(R,se),i+=Math.imul(R,oe),i+=Math.imul(N,se),s+=Math.imul(N,oe),n+=Math.imul(k,ce),i+=Math.imul(k,ue),i+=Math.imul(I,ce),s+=Math.imul(I,ue),n+=Math.imul(E,le),i+=Math.imul(E,fe),i+=Math.imul(S,le),s+=Math.imul(S,fe),n+=Math.imul(b,pe),i+=Math.imul(b,Ae);var Te=u+n+((8191&(i+=Math.imul(w,pe)))<<13);u=(s+=Math.imul(w,Ae))+(i>>>13)+(Te>>>26),Te&=67108863,n=Math.imul(U,J),i=Math.imul(U,ee),i+=Math.imul(K,J),s=Math.imul(K,ee),n+=Math.imul(L,re),i+=Math.imul(L,ne),i+=Math.imul(D,re),s+=Math.imul(D,ne),n+=Math.imul(O,se),i+=Math.imul(O,oe),i+=Math.imul(P,se),s+=Math.imul(P,oe),n+=Math.imul(R,ce),i+=Math.imul(R,ue),i+=Math.imul(N,ce),s+=Math.imul(N,ue),n+=Math.imul(k,le),i+=Math.imul(k,fe),i+=Math.imul(I,le),s+=Math.imul(I,fe),n+=Math.imul(E,pe),i+=Math.imul(E,Ae);var Re=u+n+((8191&(i+=Math.imul(S,pe)))<<13);u=(s+=Math.imul(S,Ae))+(i>>>13)+(Re>>>26),Re&=67108863,n=Math.imul(U,re),i=Math.imul(U,ne),i+=Math.imul(K,re),s=Math.imul(K,ne),n+=Math.imul(L,se),i+=Math.imul(L,oe),i+=Math.imul(D,se),s+=Math.imul(D,oe),n+=Math.imul(O,ce),i+=Math.imul(O,ue),i+=Math.imul(P,ce),s+=Math.imul(P,ue),n+=Math.imul(R,le),i+=Math.imul(R,fe),i+=Math.imul(N,le),s+=Math.imul(N,fe),n+=Math.imul(k,pe),i+=Math.imul(k,Ae);var Ne=u+n+((8191&(i+=Math.imul(I,pe)))<<13);u=(s+=Math.imul(I,Ae))+(i>>>13)+(Ne>>>26),Ne&=67108863,n=Math.imul(U,se),i=Math.imul(U,oe),i+=Math.imul(K,se),s=Math.imul(K,oe),n+=Math.imul(L,ce),i+=Math.imul(L,ue),i+=Math.imul(D,ce),s+=Math.imul(D,ue),n+=Math.imul(O,le),i+=Math.imul(O,fe),i+=Math.imul(P,le),s+=Math.imul(P,fe),n+=Math.imul(R,pe),i+=Math.imul(R,Ae);var Be=u+n+((8191&(i+=Math.imul(N,pe)))<<13);u=(s+=Math.imul(N,Ae))+(i>>>13)+(Be>>>26),Be&=67108863,n=Math.imul(U,ce),i=Math.imul(U,ue),i+=Math.imul(K,ce),s=Math.imul(K,ue),n+=Math.imul(L,le),i+=Math.imul(L,fe),i+=Math.imul(D,le),s+=Math.imul(D,fe),n+=Math.imul(O,pe),i+=Math.imul(O,Ae);var Oe=u+n+((8191&(i+=Math.imul(P,pe)))<<13);u=(s+=Math.imul(P,Ae))+(i>>>13)+(Oe>>>26),Oe&=67108863,n=Math.imul(U,le),i=Math.imul(U,fe),i+=Math.imul(K,le),s=Math.imul(K,fe),n+=Math.imul(L,pe),i+=Math.imul(L,Ae);var Pe=u+n+((8191&(i+=Math.imul(D,pe)))<<13);u=(s+=Math.imul(D,Ae))+(i>>>13)+(Pe>>>26),Pe&=67108863,n=Math.imul(U,pe),i=Math.imul(U,Ae);var xe=u+n+((8191&(i+=Math.imul(K,pe)))<<13);return u=(s=Math.imul(K,Ae))+(i>>>13)+(xe>>>26),xe&=67108863,c[0]=ge,c[1]=ye,c[2]=me,c[3]=_e,c[4]=be,c[5]=we,c[6]=ve,c[7]=Ee,c[8]=Se,c[9]=Ce,c[10]=ke,c[11]=Ie,c[12]=Te,c[13]=Re,c[14]=Ne,c[15]=Be,c[16]=Oe,c[17]=Pe,c[18]=xe,0!==u&&(c[19]=u,r.length++),r}},
/*!***************************************************!*\
  !*** ./node_modules/secp256k1/lib/js/ecpointg.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! safe-buffer */6).Buffer,i=r(/*! ./bn */139),s=r(/*! ./ecpoint */328),o=r(/*! ./ecjpoint */329);function a(){this.x=i.fromBuffer(n.from("79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","hex")),this.y=i.fromBuffer(n.from("483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8","hex")),this.inf=!1,this._precompute()}a.prototype._precompute=function(){for(var e=new s(this.x,this.y),t=new Array(1+Math.ceil(64.25)),r=t[0]=e,n=1;n<t.length;++n){for(var i=0;i<4;i++)r=r.dbl();t[n]=r}this.precomputed={naf:e._getNAFPoints(7),doubles:{step:4,points:t,negpoints:t.map((function(e){return e.neg()}))}}},a.prototype.mul=function(e){for(var t=this.precomputed.doubles.step,r=this.precomputed.doubles.points,n=this.precomputed.doubles.negpoints,i=e.getNAF(1),a=((1<<t+1)-(t%2==0?2:1))/3,c=[],u=0;u<i.length;u+=t){for(var h=0,l=u+t-1;l>=u;l--)h=(h<<1)+i[l];c.push(h)}for(var f=new o(null,null,null),d=new o(null,null,null),p=a;p>0;p--){for(var A=0;A<c.length;A++)c[A]===p?d=d.mixedAdd(r[A]):c[A]===-p&&(d=d.mixedAdd(n[A]));f=f.add(d)}return s.fromECJPoint(f)},a.prototype.mulAdd=function(e,t,r){for(var n=this.precomputed.naf,i=t._getNAFPoints1(),s=[n.points,i.points],a=[e.getNAF(n.wnd),r.getNAF(i.wnd)],c=new o(null,null,null),u=[null,null],h=Math.max(a[0].length,a[1].length);h>=0;h--){for(var l=0;h>=0&&(u[0]=0|a[0][h],u[1]=0|a[1][h],0===u[0]&&0===u[1]);++l,--h);if(h>=0&&(l+=1),c=c.dblp(l),h<0)break;for(var f=0;f<2;f++){var d,p=u[f];0!==p&&(p>0?d=s[f][p>>1]:p<0&&(d=s[f][-p>>1].neg()),c=void 0===d.z?c.mixedAdd(d):c.add(d))}}return c},e.exports=new a},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/key-stretcher.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! async/whilst */646),i=r(/*! ../hmac */331),s={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};e.exports=(e,r,o,a)=>{const c=s[e];if(!c)return a(new Error("unkown cipherType passed"));if(!r)return a(new Error("unkown hashType passed"));const u=c.keySize,h=c.ivSize,l=t.from("key expansion"),f=2*(h+u+20);i.create(r,o,(e,r)=>{if(e)return a(e);r.digest(l,(e,i)=>{if(e)return a(e);const s=[];let o=0;n(()=>o<f,(function(e){r.digest(t.concat([i,l]),(t,n)=>{if(t)return e(t);let a=n.length;o+a>f&&(a=f-o),s.push(n),o+=a,r.digest(i,(t,r)=>{if(t)return e(t);i=r,e()})})}),(function(e){if(e)return a(e);const r=f/2,n=t.concat(s),i=n.slice(0,r),o=n.slice(r,f),c=e=>({iv:e.slice(0,h),cipherKey:e.slice(h,h+u),macKey:e.slice(h+u)});a(null,{k1:c(i),k2:c(o)})}))})})}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************!*\
  !*** ./node_modules/async/whilst.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){r=(0,s.default)(r||n.default);var a=(0,o.default)(t);if(!e())return r(null);var c=function(t){if(t)return r(t);if(e())return a(c);var n=(0,i.default)(arguments,1);r.apply(null,[null].concat(n))};a(c)};var n=a(r(/*! lodash/noop */42)),i=a(r(/*! ./internal/slice */76)),s=a(r(/*! ./internal/onlyOnce */105)),o=a(r(/*! ./internal/wrapAsync */33));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!****************************************!*\
  !*** ./node_modules/async/asyncify.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)((function(t,r){var i;try{i=e.apply(this,t)}catch(e){return r(e)}(0,n.default)(i)&&"function"==typeof i.then?i.then((function(e){a(r,null,e)}),(function(e){a(r,e.message?e:new Error(e))})):r(null,i)}))};var n=o(r(/*! lodash/isObject */201)),i=o(r(/*! ./internal/initialParams */330)),s=o(r(/*! ./internal/setImmediate */135));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){try{e(t,r)}catch(e){(0,s.default)(c,e)}}function c(e){throw e}e.exports=t.default},
/*!********************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/hmac/lengths.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={SHA1:20,SHA256:32,SHA512:64}},
/*!***************************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/ephemeral-keys.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./ecdh */650);e.exports=(e,t)=>{n.generateEphmeralKeyPair(e,t)}},
/*!*************************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/keys/ecdh-browser.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! ../webcrypto */191),i=r(/*! ../nodeify */190),s=r(/*! asn1.js */193).bignum,o=r(/*! ../util */312),a=o.toBase64,c=o.toBn,u={"P-256":256,"P-384":384,"P-521":521};t.generateEphmeralKeyPair=function(t,r){i(n.subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]).then(r=>{const o=(o,c,h)=>{let l;"function"==typeof c&&(h=c,c=void 0),l=c?n.subtle.importKey("jwk",function(e,t){const r=f(e,t.public);return r.d=a(new s(t.private)),r}(t,c),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):Promise.resolve(r.privateKey);const d=Promise.all([n.subtle.importKey("jwk",f(t,o),{name:"ECDH",namedCurve:t},!1,[]),l]);i(d.then(e=>n.subtle.deriveBits({name:"ECDH",namedCurve:t,public:e[0]},e[1],u[t])).then(t=>e.from(t)),h)};return n.subtle.exportKey("jwk",r.publicKey).then(e=>({key:l(e),genSharedKey:o}))}),r)};const h={"P-256":32,"P-384":48,"P-521":66};function l(t){const r=h[t.crv];return e.concat([e.from([4]),c(t.x).toArrayLike(e,"be",r),c(t.y).toArrayLike(e,"be",r)],1+2*r)}function f(t,r){const n=h[t];if(!r.slice(0,1).equals(e.from([4])))throw new Error("Invalid key format");const i=new s(r.slice(1,n+1)),o=new s(r.slice(1+n));return{kty:"EC",crv:t,x:a(i,n),y:a(o,n),ext:!0}}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************!*\
  !*** ./node_modules/multiaddr/src/codec.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ./convert */652),i=r(/*! ./protocols-table */204),s=r(/*! varint */23);function o(e){const t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const s=r[n],o=i(s);if(0!==o.size){if(++n>=r.length)throw y("invalid address: "+e);if(o.path){t.push([s,g(r.slice(n).join("/"))]);break}t.push([s,r[n]])}else t.push([s])}return t}function a(e){const t=[];return e.map(e=>{const r=m(e);t.push(r.name),e.length>1&&t.push(e[1])}),g(t.join("/"))}function c(e){return e.map(e=>{Array.isArray(e)||(e=[e]);const t=m(e);return e.length>1?[t.code,n.toBuffer(t.code,e[1])]:[t.code]})}function u(e){return e.map(e=>{const t=m(e);return e.length>1?[t.code,n.toString(t.code,e[1])]:[t.code]})}function h(e){return p(t.concat(e.map(e=>{const r=m(e);let n=t.from(s.encode(r.code));return e.length>1&&(n=t.concat([n,e[1]])),n})))}function l(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;return s.decode(t)+s.decode.bytes}function f(e){const t=[];let r=0;for(;r<e.length;){const n=s.decode(e,r),o=s.decode.bytes,a=l(i(n),e.slice(r+o));if(0===a){t.push([n]),r+=o;continue}const c=e.slice(r+o,r+o+a);if((r+=a+o)>e.length)throw y("Invalid address buffer: "+e.toString("hex"));t.push([n,c])}return t}function d(e){return h(c(o(e=g(e))))}function p(e){const r=A(e);if(r)throw r;return t.from(e)}function A(e){try{f(e)}catch(e){return e}}function g(e){return"/"+e.trim().split("/").filter(e=>e).join("/")}function y(e){return new Error("Error parsing address: "+e)}function m(e){return i(e[0])}e.exports={stringToStringTuples:o,stringTuplesToString:a,tuplesToStringTuples:u,stringTuplesToTuples:c,bufferToTuples:f,tuplesToBuffer:h,bufferToString:function(e){return a(u(f(e)))},stringToBuffer:d,fromString:function(e){return d(e)},fromBuffer:p,validateBuffer:A,isValidBuffer:function(e){return void 0===A(e)},cleanPath:g,ParseError:y,protoFromTuple:m,sizeForAddr:l}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************************!*\
  !*** ./node_modules/multiaddr/src/convert.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ip */653),i=r(/*! is-ip */654),s=r(/*! ./protocols-table */204),o=r(/*! bs58 */47),a=r(/*! hi-base32 */656),c=r(/*! varint */23);function u(e,r){return r instanceof t?u.toString(e,r):u.toBuffer(e,r)}function h(e){if(!i(e))throw new Error("invalid ip address");return n.toBuffer(e)}function l(e){const r=t.alloc(2);return r.writeUInt16BE(e,0),r}function f(e){return e.readUInt16BE(0)}function d(e){const t=e.slice(0,e.length-2),r=e.slice(e.length-2);return a.encode(t).toString("ascii").toLowerCase()+":"+f(r)}e.exports=u,u.toString=function(e,t){switch((e=s(e)).code){case 4:case 41:return function(e){const t=n.toString(e);if(!i(t))throw new Error("invalid ip address");return t}(t);case 6:case 273:case 33:case 132:return f(t);case 53:case 54:case 55:case 56:case 400:return function(e){const t=c.decode(e);if((e=e.slice(c.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return e.toString()}(t);case 421:return function(e){const t=c.decode(e),r=e.slice(c.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return o.encode(r)}(t);case 444:case 445:return d(t);default:return t.toString("hex")}},u.toBuffer=function(e,r){switch((e=s(e)).code){case 4:case 41:return h(r);case 6:case 273:case 33:case 132:return l(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:return function(e){const r=t.from(e),n=t.from(c.encode(r.length));return t.concat([n,r])}(r);case 421:return function(e){const r=t.from(o.decode(e)),n=t.from(c.encode(r.length));return t.concat([n,r])}(r);case 444:return function(e){const r=e.split(":");if(2!==r.length)throw new Error("failed to parse onion addr: "+r+" does not contain a port number");if(16!==r[0].length)throw new Error("failed to parse onion addr: "+r[0]+" not a Tor onion address.");const n=t.from(a.decode.asBytes(r[0].toUpperCase())),i=parseInt(r[1],10);if(i<1||i>65536)throw new Error("Port number is not in range(1, 65536)");const s=l(i);return t.concat([n,s])}(r);case 445:return function(e){const r=e.split(":");if(2!==r.length)throw new Error("failed to parse onion addr: "+r+" does not contain a port number");if(56!==r[0].length)throw new Error("failed to parse onion addr: "+r[0]+" not a Tor onion3 address.");const n=t.from(a.decode.asBytes(r[0].toUpperCase())),i=parseInt(r[1],10);if(i<1||i>65536)throw new Error("Port number is not in range(1, 65536)");const s=l(i);return t.concat([n,s])}(r);default:return t.from(r,"hex")}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************!*\
  !*** ./node_modules/ip/lib/ip.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=t,i=r(/*! buffer */0).Buffer,s=r(/*! os */203);n.toBuffer=function(e,t,r){var n;if(r=~~r,this.isV4Format(e))n=t||new i(r+4),e.split(/\./g).map((function(e){n[r++]=255&parseInt(e,10)}));else if(this.isV6Format(e)){var s,o=e.split(":",8);for(s=0;s<o.length;s++){var a;this.isV4Format(o[s])&&(a=this.toBuffer(o[s]),o[s]=a.slice(0,2).toString("hex")),a&&++s<8&&o.splice(s,0,a.slice(2,4).toString("hex"))}if(""===o[0])for(;o.length<8;)o.unshift("0");else if(""===o[o.length-1])for(;o.length<8;)o.push("0");else if(o.length<8){for(s=0;s<o.length&&""!==o[s];s++);var c=[s,1];for(s=9-o.length;s>0;s--)c.push("0");o.splice.apply(o,c)}for(n=t||new i(r+16),s=0;s<o.length;s++){var u=parseInt(o[s],16);n[r++]=u>>8&255,n[r++]=255&u}}if(!n)throw Error("Invalid ip address: "+e);return n},n.toString=function(e,t,r){t=~~t;var n=[];if(4===(r=r||e.length-t)){for(var i=0;i<r;i++)n.push(e[t+i]);n=n.join(".")}else if(16===r){for(i=0;i<r;i+=2)n.push(e.readUInt16BE(t+i).toString(16));n=(n=(n=n.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return n};var o=/^(\d{1,3}\.){3,3}\d{1,3}$/,a=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function c(e){return e?e.toLowerCase():"ipv4"}n.isV4Format=function(e){return o.test(e)},n.isV6Format=function(e){return a.test(e)},n.fromPrefixLen=function(e,t){var r=4;"ipv6"===(t=e>32?"ipv6":c(t))&&(r=16);for(var s=new i(r),o=0,a=s.length;o<a;++o){var u=8;e<8&&(u=e),e-=u,s[o]=255&~(255>>u)}return n.toString(s)},n.mask=function(e,t){e=n.toBuffer(e),t=n.toBuffer(t);var r=new i(Math.max(e.length,t.length)),s=0;if(e.length===t.length)for(s=0;s<e.length;s++)r[s]=e[s]&t[s];else if(4===t.length)for(s=0;s<t.length;s++)r[s]=e[e.length-4+s]&t[s];else{for(s=0;s<r.length-6;s++)r[s]=0;for(r[10]=255,r[11]=255,s=0;s<e.length;s++)r[s+12]=e[s]&t[s+12];s+=12}for(;s<r.length;s++)r[s]=0;return n.toString(r)},n.cidr=function(e){var t=e.split("/"),r=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+r);var i=n.fromPrefixLen(parseInt(t[1],10));return n.mask(r,i)},n.subnet=function(e,t){for(var r=n.toLong(n.mask(e,t)),i=n.toBuffer(t),s=0,o=0;o<i.length;o++)if(255===i[o])s+=8;else for(var a=255&i[o];a;)a=a<<1&255,s++;var c=Math.pow(2,32-s);return{networkAddress:n.fromLong(r),firstAddress:c<=2?n.fromLong(r):n.fromLong(r+1),lastAddress:c<=2?n.fromLong(r+c-1):n.fromLong(r+c-2),broadcastAddress:n.fromLong(r+c-1),subnetMask:t,subnetMaskLength:s,numHosts:c<=2?c:c-2,length:c,contains:function(e){return r===n.toLong(n.mask(e,t))}}},n.cidrSubnet=function(e){var t=e.split("/"),r=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+r);var i=n.fromPrefixLen(parseInt(t[1],10));return n.subnet(r,i)},n.not=function(e){for(var t=n.toBuffer(e),r=0;r<t.length;r++)t[r]=255^t[r];return n.toString(t)},n.or=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;++r)e[r]|=t[r];return n.toString(e)}var i=e,s=t;t.length>e.length&&(i=t,s=e);var o=i.length-s.length;for(r=o;r<i.length;++r)i[r]|=s[r-o];return n.toString(i)},n.isEqual=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if(4===t.length){var i=t;t=e,e=i}for(r=0;r<10;r++)if(0!==t[r])return!1;var s=t.readUInt16BE(10);if(0!==s&&65535!==s)return!1;for(r=0;r<4;r++)if(e[r]!==t[r+12])return!1;return!0},n.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.isPublic=function(e){return!n.isPrivate(e)},n.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.loopback=function(e){if("ipv4"!==(e=c(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},n.address=function(e,t){var r,i=s.networkInterfaces();if(t=c(t),e&&"private"!==e&&"public"!==e){var o=i[e].filter((function(e){return e.family.toLowerCase()===t}));if(0===o.length)return;return o[0].address}return(r=Object.keys(i).map((function(r){var s=i[r].filter((function(r){return r.family=r.family.toLowerCase(),r.family===t&&!n.isLoopback(r.address)&&(!e||("public"===e?n.isPrivate(r.address):n.isPublic(r.address)))}));return s.length?s[0].address:void 0})).filter(Boolean)).length?r[0]:n.loopback(t)},n.toLong=function(e){var t=0;return e.split(".").forEach((function(e){t<<=8,t+=parseInt(e)})),t>>>0},n.fromLong=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)}},
/*!*************************************!*\
  !*** ./node_modules/is-ip/index.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ip-regex */655),i=e.exports=e=>n({exact:!0}).test(e);i.v4=e=>n.v4({exact:!0}).test(e),i.v6=e=>n.v6({exact:!0}).test(e)},
/*!****************************************!*\
  !*** ./node_modules/ip-regex/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n="(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}",i="[0-9a-fA-F]{1,4}",s=`\n(\n(?:${i}:){7}(?:${i}|:)|                                // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${i}:){6}(?:${n}|:${i}|:)|                         // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${i}:){5}(?::${n}|(:${i}){1,2}|:)|                 // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${i}:){4}(?:(:${i}){0,1}:${n}|(:${i}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${i}:){3}(?:(:${i}){0,2}:${n}|(:${i}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${i}:){2}(?:(:${i}){0,3}:${n}|(:${i}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${i}:){1}(?:(:${i}){0,4}:${n}|(:${i}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::((?::${i}){0,5}:${n}|(?::${i}){1,7}|:))           // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(%[0-9a-zA-Z]{1,})?                                           // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=e.exports=e=>e&&e.exact?new RegExp(`(?:^${n}$)|(?:^${s}$)`):new RegExp(`(?:${n})|(?:${s})`,"g");o.v4=e=>e&&e.exact?new RegExp(`^${n}$`):new RegExp(n,"g"),o.v6=e=>e&&e.exact?new RegExp(`^${s}$`):new RegExp(s,"g")},
/*!**********************************************!*\
  !*** ./node_modules/hi-base32/src/base32.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t,n){var i;
/*
 * [hi-base32]{@link https://github.com/emn178/hi-base32}
 *
 * @version 0.5.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */!function(){"use strict";var s="object"==typeof window?window:{};!s.HI_BASE32_NO_NODE_JS&&"object"==typeof t&&t.versions&&t.versions.node&&(s=n);var o=!s.HI_BASE32_NO_COMMON_JS&&"object"==typeof e&&e.exports,a=r(/*! !webpack amd options */287),c="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),u={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},h=[0,0,0,0,0,0,0,0],l=function(e,t){t.length>10&&(t="..."+t.substr(-10));var r=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+e+" bytes: "+t+" <-");throw r.position=e,r},f=function(e){if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");for(var t,r,n,i,s,o,a,c,h=[],l=0,f=(e=e.replace(/=/g,"")).length,d=0,p=f>>3<<3;d<p;)t=u[e.charAt(d++)],r=u[e.charAt(d++)],n=u[e.charAt(d++)],i=u[e.charAt(d++)],s=u[e.charAt(d++)],o=u[e.charAt(d++)],a=u[e.charAt(d++)],c=u[e.charAt(d++)],h[l++]=255&(t<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4),h[l++]=255&(i<<4|s>>>1),h[l++]=255&(s<<7|o<<2|a>>>3),h[l++]=255&(a<<5|c);var A=f-p;return 2===A?(t=u[e.charAt(d++)],r=u[e.charAt(d++)],h[l++]=255&(t<<3|r>>>2)):4===A?(t=u[e.charAt(d++)],r=u[e.charAt(d++)],n=u[e.charAt(d++)],i=u[e.charAt(d++)],h[l++]=255&(t<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4)):5===A?(t=u[e.charAt(d++)],r=u[e.charAt(d++)],n=u[e.charAt(d++)],i=u[e.charAt(d++)],s=u[e.charAt(d++)],h[l++]=255&(t<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4),h[l++]=255&(i<<4|s>>>1)):7===A&&(t=u[e.charAt(d++)],r=u[e.charAt(d++)],n=u[e.charAt(d++)],i=u[e.charAt(d++)],s=u[e.charAt(d++)],o=u[e.charAt(d++)],a=u[e.charAt(d++)],h[l++]=255&(t<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4),h[l++]=255&(i<<4|s>>>1),h[l++]=255&(s<<7|o<<2|a>>>3)),h},d=function(e,t){if(!t)return function(e){for(var t,r,n="",i=e.length,s=0,o=0;s<i;)if((t=e[s++])<=127)n+=String.fromCharCode(t);else{t>191&&t<=223?(r=31&t,o=1):t<=239?(r=15&t,o=2):t<=247?(r=7&t,o=3):l(s,n);for(var a=0;a<o;++a)((t=e[s++])<128||t>191)&&l(s,n),r<<=6,r+=63&t;r>=55296&&r<=57343&&l(s,n),r>1114111&&l(s,n),r<=65535?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+(1023&r)))}return n}(f(e));if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");var r,n,i,s,o,a,c,h,d="",p=e.indexOf("=");-1===p&&(p=e.length);for(var A=0,g=p>>3<<3;A<g;)r=u[e.charAt(A++)],n=u[e.charAt(A++)],i=u[e.charAt(A++)],s=u[e.charAt(A++)],o=u[e.charAt(A++)],a=u[e.charAt(A++)],c=u[e.charAt(A++)],h=u[e.charAt(A++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|s>>>4))+String.fromCharCode(255&(s<<4|o>>>1))+String.fromCharCode(255&(o<<7|a<<2|c>>>3))+String.fromCharCode(255&(c<<5|h));var y=p-g;return 2===y?(r=u[e.charAt(A++)],n=u[e.charAt(A++)],d+=String.fromCharCode(255&(r<<3|n>>>2))):4===y?(r=u[e.charAt(A++)],n=u[e.charAt(A++)],i=u[e.charAt(A++)],s=u[e.charAt(A++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|s>>>4))):5===y?(r=u[e.charAt(A++)],n=u[e.charAt(A++)],i=u[e.charAt(A++)],s=u[e.charAt(A++)],o=u[e.charAt(A++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|s>>>4))+String.fromCharCode(255&(s<<4|o>>>1))):7===y&&(r=u[e.charAt(A++)],n=u[e.charAt(A++)],i=u[e.charAt(A++)],s=u[e.charAt(A++)],o=u[e.charAt(A++)],a=u[e.charAt(A++)],c=u[e.charAt(A++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|s>>>4))+String.fromCharCode(255&(s<<4|o>>>1))+String.fromCharCode(255&(o<<7|a<<2|c>>>3))),d},p={encode:function(e,t){var r="string"!=typeof e;return r&&e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),r?function(e){for(var t,r,n,i,s,o="",a=e.length,u=0,h=5*parseInt(a/5);u<h;)t=e[u++],r=e[u++],n=e[u++],i=e[u++],s=e[u++],o+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[31&(i<<3|s>>>5)]+c[31&s];var l=a-h;return 1===l?(t=e[u],o+=c[t>>>3]+c[t<<2&31]+"======"):2===l?(t=e[u++],r=e[u],o+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[r<<4&31]+"===="):3===l?(t=e[u++],r=e[u++],n=e[u],o+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[n<<1&31]+"==="):4===l&&(t=e[u++],r=e[u++],n=e[u++],i=e[u],o+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[i<<3&31]+"="),o}(e):t?function(e){for(var t,r,n,i,s,o="",a=e.length,u=0,h=5*parseInt(a/5);u<h;)t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u++),s=e.charCodeAt(u++),o+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[31&(i<<3|s>>>5)]+c[31&s];var l=a-h;return 1===l?(t=e.charCodeAt(u),o+=c[t>>>3]+c[t<<2&31]+"======"):2===l?(t=e.charCodeAt(u++),r=e.charCodeAt(u),o+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[r<<4&31]+"===="):3===l?(t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u),o+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[n<<1&31]+"==="):4===l&&(t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u),o+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[i<<3&31]+"="),o}(e):function(e){var t,r,n,i,s,o,a,u=!1,l="",f=0,d=0,p=e.length;do{for(h[0]=h[5],h[1]=h[6],h[2]=h[7],a=d;f<p&&a<5;++f)(o=e.charCodeAt(f))<128?h[a++]=o:o<2048?(h[a++]=192|o>>6,h[a++]=128|63&o):o<55296||o>=57344?(h[a++]=224|o>>12,h[a++]=128|o>>6&63,h[a++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++f)),h[a++]=240|o>>18,h[a++]=128|o>>12&63,h[a++]=128|o>>6&63,h[a++]=128|63&o);a-d,d=a-5,f===p&&++f,f>p&&a<6&&(u=!0),t=h[0],a>4?(r=h[1],n=h[2],i=h[3],s=h[4],l+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[31&(i<<3|s>>>5)]+c[31&s]):1===a?l+=c[t>>>3]+c[t<<2&31]+"======":2===a?(r=h[1],l+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[r<<4&31]+"===="):3===a?(r=h[1],n=h[2],l+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[n<<1&31]+"==="):(r=h[1],n=h[2],i=h[3],l+=c[t>>>3]+c[31&(t<<2|r>>>6)]+c[r>>>1&31]+c[31&(r<<4|n>>>4)]+c[31&(n<<1|i>>>7)]+c[i>>>2&31]+c[i<<3&31]+"=")}while(!u);return l}(e)},decode:d};d.asBytes=f,o?e.exports=p:(s.base32=p,a&&(void 0===(i=function(){return p}.call(p,r,p,e))||(e.exports=i)))}()}).call(this,r(/*! ./../../process/browser.js */2),r(/*! ./../../webpack/buildin/global.js */10))},
/*!*****************************************************!*\
  !*** ./node_modules/peer-info/src/multiaddr-set.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{ensureMultiaddr:n}=r(/*! ./utils */332),i=r(/*! unique-by */658);e.exports=class{constructor(e){this._multiaddrs=e||[],this._observedMultiaddrs=[]}add(e){e=n(e),this.has(e)||this._multiaddrs.push(e)}addSafe(e){e=n(e),this._observedMultiaddrs.some((t,r)=>{if(t.equals(e))return this.add(e),this._observedMultiaddrs.splice(r,1),!0})||this._observedMultiaddrs.push(e)}toArray(){return this._multiaddrs.slice()}get size(){return this._multiaddrs.length}forEach(e){return this._multiaddrs.forEach(e)}filterBy(e){return"object"!=typeof e||"function"!=typeof e.matches||"function"!=typeof e.partialMatch||"function"!=typeof e.toString?[]:this._multiaddrs.filter(t=>e.matches(t))}has(e){return e=n(e),this._multiaddrs.some(t=>t.equals(e))}delete(e){e=n(e),this._multiaddrs.some((t,r)=>{if(t.equals(e))return this._multiaddrs.splice(r,1),!0})}replace(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),e.forEach(e=>this.delete(e)),t.forEach(e=>this.add(e))}clear(){this._multiaddrs=[]}distinct(){return i(this._multiaddrs,e=>[e.toOptions().port,e.toOptions().transport].join())}}},
/*!*****************************************!*\
  !*** ./node_modules/unique-by/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t){var r=[],n={};if("function"!=typeof t){var i=t;t=function(e){return e[i]}}return e.forEach((function(e){var i=t(e);n[i]||(n[i]=!0,r.push(e))})),r}},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/aes/index.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./ciphers */660),i={16:"aes-128-ctr",32:"aes-256-ctr"};t.create=function(e,t,r){const s=i[e.length];if(!s)return r(new Error("Invalid key length"));const o=n.createCipheriv(s,e,t),a=n.createDecipheriv(s,e,t);r(null,{encrypt(e,t){t(null,o.update(e))},decrypt(e,t){t(null,a.update(e))}})}},
/*!***************************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/aes/ciphers-browser.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! browserify-aes */661);e.exports={createCipheriv:n.createCipheriv,createDecipheriv:n.createDecipheriv}},
/*!************************************************!*\
  !*** ./node_modules/browserify-aes/browser.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./encrypter */662),i=r(/*! ./decrypter */670),s=r(/*! ./modes/list.json */336);t.createCipher=t.Cipher=n.createCipher,t.createCipheriv=t.Cipheriv=n.createCipheriv,t.createDecipher=t.Decipher=i.createDecipher,t.createDecipheriv=t.Decipheriv=i.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(s)}},
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/encrypter.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./modes */333),i=r(/*! ./authCipher */337),s=r(/*! safe-buffer */6).Buffer,o=r(/*! ./streamCipher */338),a=r(/*! cipher-base */61),c=r(/*! ./aes */140),u=r(/*! evp_bytestokey */339);function h(e,t,r){a.call(this),this._cache=new f,this._cipher=new c.AES(t),this._prev=s.from(r),this._mode=e,this._autopadding=!0}r(/*! inherits */3)(h,a),h.prototype._update=function(e){var t,r;this._cache.add(e);for(var n=[];t=this._cache.get();)r=this._mode.encrypt(this,t),n.push(r);return s.concat(n)};var l=s.alloc(16,16);function f(){this.cache=s.allocUnsafe(0)}function d(e,t,r){var a=n[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=s.from(t)),t.length!==a.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof r&&(r=s.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===a.type?new o(a.module,t,r):"auth"===a.type?new i(a.module,t,r):new h(a.module,t,r)}h.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(l))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},f.prototype.add=function(e){this.cache=s.concat([this.cache,e])},f.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},f.prototype.flush=function(){for(var e=16-this.cache.length,t=s.allocUnsafe(e),r=-1;++r<e;)t.writeUInt8(e,r);return s.concat([this.cache,t])},t.createCipheriv=d,t.createCipher=function(e,t){var r=n[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=u(t,!1,r.key,r.iv);return d(e,i.key,i.iv)}},
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/modes/ecb.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/modes/cbc.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! buffer-xor */106);t.encrypt=function(e,t){var r=n(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},t.decrypt=function(e,t){var r=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return n(i,r)}},
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/modes/cfb.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer,i=r(/*! buffer-xor */106);function s(e,t,r){var s=t.length,o=i(t,e._cache);return e._cache=e._cache.slice(s),e._prev=n.concat([e._prev,r?t:o]),o}t.encrypt=function(e,t,r){for(var i,o=n.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=n.allocUnsafe(0)),!(e._cache.length<=t.length)){o=n.concat([o,s(e,t,r)]);break}i=e._cache.length,o=n.concat([o,s(e,t.slice(0,i),r)]),t=t.slice(i)}return o}},
/*!***************************************************!*\
  !*** ./node_modules/browserify-aes/modes/cfb8.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer;function i(e,t,r){var i=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=n.concat([e._prev.slice(1),n.from([r?t:i])]),i}t.encrypt=function(e,t,r){for(var s=t.length,o=n.allocUnsafe(s),a=-1;++a<s;)o[a]=i(e,t[a],r);return o}},
/*!***************************************************!*\
  !*** ./node_modules/browserify-aes/modes/cfb1.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer;function i(e,t,r){for(var n,i,o=-1,a=0;++o<8;)n=t&1<<7-o?128:0,a+=(128&(i=e._cipher.encryptBlock(e._prev)[0]^n))>>o%8,e._prev=s(e._prev,r?n:i);return a}function s(e,t){var r=e.length,i=-1,s=n.allocUnsafe(e.length);for(e=n.concat([e,n.from([t])]);++i<r;)s[i]=e[i]<<1|e[i+1]>>7;return s}t.encrypt=function(e,t,r){for(var s=t.length,o=n.allocUnsafe(s),a=-1;++a<s;)o[a]=i(e,t[a],r);return o}},
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/modes/ofb.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e){var n=r(/*! buffer-xor */106);function i(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(t,r){for(;t._cache.length<r.length;)t._cache=e.concat([t._cache,i(t)]);var s=t._cache.slice(0,r.length);return t._cache=t._cache.slice(r.length),n(r,s)}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/browserify-aes/ghash.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer,i=n.alloc(16,0);function s(e){var t=n.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function o(e){this.h=e,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}o.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},o.prototype._multiply=function(){for(var e,t,r,n=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],i=[0,0,0,0],o=-1;++o<128;){for(0!=(this.state[~~(o/8)]&1<<7-o%8)&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=0!=(1&n[3]),t=3;t>0;t--)n[t]=n[t]>>>1|(1&n[t-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=s(i)},o.prototype.update=function(e){var t;for(this.cache=n.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},o.prototype.final=function(e,t){return this.cache.length&&this.ghash(n.concat([this.cache,i],16)),this.ghash(s([0,e,0,t])),this.state},e.exports=o},
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/decrypter.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./authCipher */337),i=r(/*! safe-buffer */6).Buffer,s=r(/*! ./modes */333),o=r(/*! ./streamCipher */338),a=r(/*! cipher-base */61),c=r(/*! ./aes */140),u=r(/*! evp_bytestokey */339);function h(e,t,r){a.call(this),this._cache=new l,this._last=void 0,this._cipher=new c.AES(t),this._prev=i.from(r),this._mode=e,this._autopadding=!0}function l(){this.cache=i.allocUnsafe(0)}function f(e,t,r){var a=s[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=i.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof t&&(t=i.from(t)),t.length!==a.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===a.type?new o(a.module,t,r,!0):"auth"===a.type?new n(a.module,t,r,!0):new h(a.module,t,r)}r(/*! inherits */3)(h,a),h.prototype._update=function(e){var t,r;this._cache.add(e);for(var n=[];t=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,t),n.push(r);return i.concat(n)},h.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},l.prototype.add=function(e){this.cache=i.concat([this.cache,e])},l.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},l.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var r=s[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=u(t,!1,r.key,r.iv);return f(e,n.key,n.iv)},t.createDecipheriv=f},
/*!**************************************************!*\
  !*** ./node_modules/libp2p-crypto/src/pbkdf2.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! node-forge/lib/pbkdf2 */188),i=r(/*! node-forge/lib/util */16),s={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};e.exports=function(e,t,r,o,a){const c=s[a];if(!c)throw new Error(`Hash '${a}' is unknown or not supported`);const u=n(e,t,r,o,c);return i.encode64(u)}},
/*!*************************************************************************!*\
  !*** ./node_modules/ipfs/node_modules/multihashing-async/src/crypto.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! js-sha3 */49),s=r(/*! murmurhash3js-revisited */133),o=r(/*! ./sha */673),{fromNumberTo32BitBuf:a}=r(/*! ./utils */674),c=e=>async t=>{switch(e){case"sha3-224":return n.from(i.sha3_224.arrayBuffer(t));case"sha3-256":return n.from(i.sha3_256.arrayBuffer(t));case"sha3-384":return n.from(i.sha3_384.arrayBuffer(t));case"sha3-512":return n.from(i.sha3_512.arrayBuffer(t));case"shake-128":return n.from(i.shake128.create(128).update(t).arrayBuffer());case"shake-256":return n.from(i.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return n.from(i.keccak224.arrayBuffer(t));case"keccak-256":return n.from(i.keccak256.arrayBuffer(t));case"keccak-384":return n.from(i.keccak384.arrayBuffer(t));case"keccak-512":return n.from(i.keccak512.arrayBuffer(t));case"murmur3-128":return n.from(s.x64.hash128(t),"hex");case"murmur3-32":return a(s.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};e.exports={identity:e=>n.from(e),sha1:o("sha1"),sha2256:o("sha2-256"),sha2512:o("sha2-512"),dblSha2256:o("dbl-sha2-256"),sha3224:c("sha3-224"),sha3256:c("sha3-256"),sha3384:c("sha3-384"),sha3512:c("sha3-512"),shake128:c("shake-128"),shake256:c("shake-256"),keccak224:c("keccak-224"),keccak256:c("keccak-256"),keccak384:c("keccak-384"),keccak512:c("keccak-512"),murmur3128:c("murmur3-128"),murmur332:c("murmur3-32"),addBlake:r(/*! ./blake */675)}},
/*!******************************************************************************!*\
  !*** ./node_modules/ipfs/node_modules/multihashing-async/src/sha.browser.js ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=self.crypto||self.msCrypto;e.exports=e=>{if("undefined"==typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return async t=>{switch(e){case"sha1":return n.from(await i.subtle.digest({name:"SHA-1"},t));case"sha2-256":return n.from(await i.subtle.digest({name:"SHA-256"},t));case"sha2-512":return n.from(await i.subtle.digest({name:"SHA-512"},t));case"dbl-sha2-256":{const e=await i.subtle.digest({name:"SHA-256"},t);return n.from(await i.subtle.digest({name:"SHA-256"},e))}default:throw new Error(`${e} is not a supported algorithm`)}}}},
/*!************************************************************************!*\
  !*** ./node_modules/ipfs/node_modules/multihashing-async/src/utils.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0);e.exports={fromNumberTo32BitBuf:e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return n.from(t)}}},
/*!************************************************************************!*\
  !*** ./node_modules/ipfs/node_modules/multihashing-async/src/blake.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! blakejs */50),s={init:i.blake2bInit,update:i.blake2bUpdate,digest:i.blake2bFinal},o={init:i.blake2sInit,update:i.blake2sUpdate,digest:i.blake2sFinal},a=(e,t)=>async r=>{const i=t.init(e,null);return t.update(i,r),n.from(t.digest(i))};e.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}},
/*!******************************************!*\
  !*** ./node_modules/debug/src/common.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=function(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){let r;function o(...e){if(!o.enabled)return;const t=o,i=Number(new Date),s=i-(r||i);t.diff=s,t.prev=r,t.curr=i,r=i,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,i)=>{if("%%"===r)return r;a++;const s=n.formatters[i];if("function"==typeof s){const n=e[a];r=s.call(t,n),e.splice(a,1),a--}return r}),n.formatArgs.call(t,e),(t.log||n.log).apply(t,e)}return o.namespace=e,o.enabled=n.enabled(e),o.useColors=n.useColors(),o.color=t(e),o.destroy=i,o.extend=s,"function"==typeof n.init&&n.init(o),n.instances.push(o),o}function i(){const e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function s(e,t){const r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){const e=[...n.names.map(o),...n.skips.map(o).map(e=>"-"+e)].join(",");return n.enable(""),e},n.enable=function(e){let t;n.save(e),n.names=[],n.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){const e=n.instances[t];e.enabled=n.enabled(e.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(/*! ms */342),Object.keys(e).forEach(t=>{n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},
/*!***********************************************************************!*\
  !*** ./node_modules/merge-options/node_modules/is-plain-obj/index.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===n.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},
/*!**********************************************!*\
  !*** ./node_modules/ipfs/src/core/config.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multiaddr */15),i=r(/*! mafmt */43),{struct:s,superstruct:o}=r(/*! superstruct */205),{isTest:a}=r(/*! ipfs-utils/src/env */343),{optional:c,union:u}=s,h=o({types:{multiaddr:e=>{if(null===e)return`multiaddr invalid, value must be a string, Buffer, or another Multiaddr got ${e}`;try{n(e)}catch(e){return`multiaddr invalid, ${e.message}`}return!0},"multiaddr-ipfs":e=>!!i.IPFS.matches(e)||"multiaddr IPFS invalid"}}),l=h({repo:c(h("object|string")),repoOwner:"boolean?",preload:h({enabled:"boolean?",addresses:c(h(["multiaddr"])),interval:"number?"},{enabled:!a,interval:3e4}),init:c(u(["boolean",h({bits:"number?",emptyRepo:"boolean?",privateKey:c(h("object|string")),pass:"string?",profiles:"array?"})])),start:"boolean?",offline:"boolean?",pass:"string?",silent:"boolean?",relay:"object?",EXPERIMENTAL:c(h({pubsub:"boolean?",ipnsPubsub:"boolean?",sharding:"boolean?",dht:"boolean?"})),connectionManager:"object?",config:c(h({API:"object?",Addresses:c(h({Delegates:c(h(["multiaddr"])),Swarm:c(h(["multiaddr"])),API:c(u([h("multiaddr"),h(["multiaddr"])])),Gateway:c(u([h("multiaddr"),h(["multiaddr"])]))})),Discovery:c(h({MDNS:c(h({Enabled:"boolean?",Interval:"number?"})),webRTCStar:c(h({Enabled:"boolean?"}))})),Bootstrap:c(h(["multiaddr-ipfs"])),Pubsub:c(h({Router:"string?",Enabled:"boolean?"})),Swarm:c(h({ConnMgr:c(h({LowWater:"number?",HighWater:"number?"}))}))})),ipld:"object?",libp2p:c(u(["function","object"]))},{repoOwner:!0});e.exports={validate:e=>{const[t,r]=l.validate(e);if(t)throw t;return r}}},
/*!*******************************************!*\
  !*** ./node_modules/is-electron/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){e.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!(void 0===t||"object"!=typeof t.versions||!t.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}}).call(this,r(/*! ./../process/browser.js */2))},
/*!********************************************!*\
  !*** ./node_modules/ipfs/src/core/boot.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-repo */206).errors;e.exports=async e=>{e.log("booting");const t=e._options,r=t.init,i=t.start;try{if(await async function(){if(!e._repo.closed)return!0;try{await e._repo.open()}catch(e){if(function(e){if(e.code===n.ERR_REPO_NOT_INITIALIZED)return!0;if(e.message.match(/not found/)||e.message.match(/ENOENT/)||e.message.match(/No value/))return!0;return!1}(e))return!1;if(e)throw e}return!0}())try{await e.init({repo:e._repo})}catch(e){throw Object.assign(e,{emitted:!0})}else if(r){const r={bits:2048,pass:e._options.pass},n=Object.assign(r,"object"==typeof t.init?t.init:{});await e.init(n)}i&&await e.start(),e.log("booted"),e.emit("ready")}catch(t){t.emitted||e.emit("error",t)}}},
/*!************************************************!*\
  !*** ./node_modules/ipfs-repo/src/backends.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.create=function(e,t,r){return new(0,r.storageBackends[e])(t,Object.assign({},r.storageBackendOptions[e]||{}))}},
/*!***********************************************!*\
  !*** ./node_modules/ipfs-repo/src/version.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! interface-datastore */14).Key,i=r(/*! debug */1)("repo:version"),s=r(/*! err-code */8),o=new n("version");e.exports=e=>({exists:async()=>e.has(o),async get(){const t=await e.get(o);return parseInt(t.toString().trim(),10)},set:async r=>e.put(o,t.from(String(r))),async check(e){const t=await this.get();if(i("comparing version: %s and %s",t,e),t!==e&&!(6===t&&7===e||6===e&&7===t))throw s(new Error(`ipfs repo needs migration: expected version v${e}, found version v${t}`),"ERR_INVALID_REPO_VERSION")}})}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************!*\
  !*** ./node_modules/interface-datastore/src/memory.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{filter:n,sortAll:i,take:s,map:o}=r(/*! ./utils */349),a=r(/*! ./key */346),c=r(/*! ./errors */350);e.exports=class{constructor(){this.data={}}async open(){}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw c.notFoundError();return this.data[e.toString()]}async has(e){return void 0!==this.data[e.toString()]}async delete(e){delete this.data[e.toString()]}batch(){let e=[],t=[];return{put(t,r){e.push([t,r])},delete(e){t.push(e)},commit:async()=>{e.forEach(e=>{this.data[e[0].toString()]=e[1]}),e=[],t.forEach(e=>{delete this.data[e.toString()]}),t=[]}}}query(e){let t=Object.entries(this.data);if(t=o(t,e=>({key:new a(e[0]),value:e[1]})),null!=e.prefix&&(t=n(t,t=>t.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(t=e.filters.reduce((e,t)=>n(e,t),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((e,t)=>i(e,t),t)),null!=e.offset){let r=0;t=n(t,()=>r++>=e.offset)}return null!=e.limit&&(t=s(t,e.limit)),!0===e.keysOnly&&(t=o(t,e=>({key:e.key}))),t}async close(){}}},
/*!**********************************************!*\
  !*** ./node_modules/ipfs-repo/src/config.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! interface-datastore */14).Key,{default:i}=r(/*! p-queue */45),s=r(/*! just-safe-get */344),o=r(/*! just-safe-set */690),a=r(/*! lodash.has */691),c=r(/*! err-code */8),u=r(/*! ./errors */208),h=new n("config");e.exports=e=>{const r=new i({concurrency:1}),n={async get(t){t||(t=void 0);const r=await e.get(h),n=JSON.parse(r.toString());if(void 0!==t&&!a(n,t))throw new u.NotFoundError(`Key ${t} does not exist in config`);return void 0!==t?s(n,t):n},async set(e,i){if(1===arguments.length)i=e,e=void 0;else if(!e||"string"!=typeof e)throw c(new Error("Invalid key type: "+typeof e),"ERR_INVALID_KEY");if(void 0===i||t.isBuffer(i))throw c(new Error("Invalid value type: "+typeof i),"ERR_INVALID_VALUE");return r.add(()=>(async function(e){const t=e.key,r=e.value;if(t){const e=await n.get();return o(e,t,r),l(e)}return l(r)})({key:e,value:i}))},exists:async()=>e.has(h)};return n;function l(r){const n=t.from(JSON.stringify(r,null,2));return e.put(h,n)}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function s(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||e,s),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,s,o){var a=i?i+e:e;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,r),!0;case 4:return h.fn.call(h.context,t,r,n),!0;case 5:return h.fn.call(h.context,t,r,n,s),!0;case 6:return h.fn.call(h.context,t,r,n,s,o),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var f,d=h.length;for(u=0;u<d;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,r);break;case 4:h[u].fn.call(h[u].context,t,r,n);break;default:if(!c)for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];h[u].fn.apply(h[u].context,c)}}return!0},u.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return c(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||c(this,s);else{for(var a=0,u=[],h=o.length;a<h;a++)(o[a].fn!==t||n&&!o[a].once||r&&o[a].context!==r)&&u.push(o[a]);u.length?this._events[s]=1===u.length?u[0]:u:c(this,s)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},
/*!*****************************************!*\
  !*** ./node_modules/p-timeout/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! p-finally */687);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const s=(e,t,r)=>new Promise((s,o)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void s(e);const a=setTimeout(()=>{if("function"==typeof r){try{s(r())}catch(e){o(e)}return}const n=r instanceof Error?r:new i("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),o(n)},t);n(e.then(s,o),()=>{clearTimeout(a)})});e.exports=s,e.exports.default=s,e.exports.TimeoutError=i},
/*!*****************************************!*\
  !*** ./node_modules/p-finally/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},
/*!*****************************************************!*\
  !*** ./node_modules/p-queue/dist/priority-queue.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(/*! ./lower-bound */689);t.default=class{constructor(){Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:[]})}enqueue(e,t){const r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);const i=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return e&&e.run}get size(){return this._queue.length}}},
/*!**************************************************!*\
  !*** ./node_modules/p-queue/dist/lower-bound.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){const s=i/2|0;let o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}},
/*!*********************************************!*\
  !*** ./node_modules/just-safe-set/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){"string"==typeof t&&(t=t.split("."));"symbol"==typeof t&&(t=[t]);var n,i=t.pop();if(!i)return!1;for(;n=t.shift();)if(void 0===e[n]&&(e[n]={}),!(e=e[n])||"object"!=typeof e)return!1;return e[i]=r,!0}},
/*!******************************************!*\
  !*** ./node_modules/lodash.has/index.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var r="Expected a function",n="__lodash_hash_undefined__",i=1/0,s=9007199254740991,o="[object Arguments]",a="[object Function]",c="[object GeneratorFunction]",u="[object Symbol]",h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,f=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,A=/^\[object .+?Constructor\]$/,g=/^(?:0|[1-9]\d*)$/,y="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,_=y||m||Function("return this")();var b,w=Array.prototype,v=Function.prototype,E=Object.prototype,S=_["__core-js_shared__"],C=(b=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",k=v.toString,I=E.hasOwnProperty,T=E.toString,R=RegExp("^"+k.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=_.Symbol,B=E.propertyIsEnumerable,O=w.splice,P=q(_,"Map"),x=q(Object,"create"),L=N?N.prototype:void 0,D=L?L.toString:void 0;function M(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function U(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function K(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function F(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function z(e,t){return null!=e&&I.call(e,t)}function j(e){return!(!Z(e)||(t=e,C&&C in t))&&(X(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?R:A).test(function(e){if(null!=e){try{return k.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function H(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function q(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return j(r)?r:void 0}function V(e,t,r){for(var n,i,a=-1,c=(t=function(e,t){if(Y(e))return!1;var r=typeof e;if("number"==r||"symbol"==r||"boolean"==r||null==e||ee(e))return!0;return l.test(e)||!h.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:Y(n=t)?n:G(n)).length;++a<c;){var u=W(t[a]);if(!(i=null!=e&&r(e,u)))break;e=e[u]}return i||!!(c=e?e.length:0)&&$(c)&&function(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||g.test(e))&&e>-1&&e%1==0&&e<t}(u,c)&&(Y(e)||function(e){return function(e){return J(e)&&function(e){return null!=e&&$(e.length)&&!X(e)}(e)}(e)&&I.call(e,"callee")&&(!B.call(e,"callee")||T.call(e)==o)}(e))}M.prototype.clear=function(){this.__data__=x?x(null):{}},M.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},M.prototype.get=function(e){var t=this.__data__;if(x){var r=t[e];return r===n?void 0:r}return I.call(t,e)?t[e]:void 0},M.prototype.has=function(e){var t=this.__data__;return x?void 0!==t[e]:I.call(t,e)},M.prototype.set=function(e,t){return this.__data__[e]=x&&void 0===t?n:t,this},U.prototype.clear=function(){this.__data__=[]},U.prototype.delete=function(e){var t=this.__data__,r=F(t,e);return!(r<0)&&(r==t.length-1?t.pop():O.call(t,r,1),!0)},U.prototype.get=function(e){var t=this.__data__,r=F(t,e);return r<0?void 0:t[r][1]},U.prototype.has=function(e){return F(this.__data__,e)>-1},U.prototype.set=function(e,t){var r=this.__data__,n=F(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},K.prototype.clear=function(){this.__data__={hash:new M,map:new(P||U),string:new M}},K.prototype.delete=function(e){return H(this,e).delete(e)},K.prototype.get=function(e){return H(this,e).get(e)},K.prototype.has=function(e){return H(this,e).has(e)},K.prototype.set=function(e,t){return H(this,e).set(e,t),this};var G=Q((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(ee(e))return D?D.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}(t);var r=[];return f.test(e)&&r.push(""),e.replace(d,(function(e,t,n,i){r.push(n?i.replace(p,"$1"):t||e)})),r}));function W(e){if("string"==typeof e||ee(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}function Q(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o),o};return n.cache=new(Q.Cache||K),n}Q.Cache=K;var Y=Array.isArray;function X(e){var t=Z(e)?T.call(e):"";return t==a||t==c}function $(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Z(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function J(e){return!!e&&"object"==typeof e}function ee(e){return"symbol"==typeof e||J(e)&&T.call(e)==u}e.exports=function(e,t){return null!=e&&V(e,t,z)}}).call(this,r(/*! ./../webpack/buildin/global.js */10))},
/*!********************************************!*\
  !*** ./node_modules/ipfs-repo/src/spec.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! interface-datastore */14).Key,i=r(/*! sort-keys */693),s=new n("datastore_spec");e.exports=e=>({exists:async()=>e.has(s),async get(){const t=await e.get(s);return JSON.parse(t.toString())},set:async r=>e.put(s,t.from(JSON.stringify(i(r,{deep:!0}))))})}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*****************************************!*\
  !*** ./node_modules/sort-keys/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! is-plain-obj */279);e.exports=(e,t={})=>{if(!n(e))throw new TypeError("Expected a plain object");const{deep:r}=t,i=[],s=[],o=e=>{const a=i.indexOf(e);if(-1!==a)return s[a];const c={},u=Object.keys(e).sort(t.compare);i.push(e),s.push(c);for(const t of u){const i=e[t];r&&Array.isArray(i)?c[t]=i.map(e=>n(e)?o(e):e):c[t]=r&&n(i)?o(i):i}return c};return o(e)}},
/*!************************************************!*\
  !*** ./node_modules/ipfs-repo/src/api-addr.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=new(0,r(/*! interface-datastore */14).Key)("api");e.exports=e=>({async get(){const t=await e.get(n);return t&&t.toString()},set:async r=>e.put(n,t.from(r.toString())),delete:async()=>e.delete(n)})}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************************!*\
  !*** ./node_modules/ipfs-repo/src/blockstore.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! datastore-core */351),i=n.ShardingDatastore,s=r(/*! ipfs-block */97),o=r(/*! cids */4),a=r(/*! err-code */8),{cidToKey:c}=r(/*! ./blockstore-utils */353);function u(e){try{return 0===e.version?e.toV1():e.toV0()}catch(e){return null}}e.exports=async(e,t)=>{return function(e){return{async*query(t){for await(const r of e.query(t))yield r},async get(t){if(!o.isCID(t))throw a(new Error("Not a valid cid"),"ERR_INVALID_CID");const r=c(t);let n;try{return n=await e.get(r),new s(n,t)}catch(n){if("ERR_NOT_FOUND"===n.code){const i=u(t);if(!i)throw n;const o=c(i),a=await e.get(o);return await e.put(r,a),new s(a,t)}throw n}},async put(t){if(!s.isBlock(t))throw new Error("invalid block");const r=c(t.cid);if(!await e.has(r))return e.put(r,t.data)},async putMany(t){const r=e.batch();for await(const n of t){const t=c(n.cid);await e.has(t)||r.put(t,n.data)}return r.commit()},async has(t){if(!o.isCID(t))throw a(new Error("Not a valid cid"),"ERR_INVALID_CID");const r=await e.has(c(t));if(r)return r;const n=u(t);return!!n&&e.has(c(n))},async delete(t){if(!o.isCID(t))throw a(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.delete(c(t))},close:async()=>e.close()}}(await function(e,t){if(t.sharding){const t=new n.shard.NextToLast(2);return i.createOrOpen(e,t)}return e}(e,t))}},
/*!*****************************************************!*\
  !*** ./node_modules/datastore-core/src/sharding.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! interface-datastore */14).Key,i=r(/*! ./shard */352),s=r(/*! ./keytransform */141),o=new n(i.SHARDING_FN),a=new n(i.README_FN);class c{constructor(e,t){this.child=new s(e,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)}),this.shard=t}open(){return this.child.open()}_convertKey(e){const t=e.toString();return t===o.toString()||t===a.toString()?e:new n(this.shard.fun(t)).child(e)}_invertKey(e){const t=e.toString();return t===o.toString()||t===a.toString()?e:n.withNamespaces(e.list().slice(1))}static async createOrOpen(e,t){try{await c.create(e,t)}catch(e){if(e&&"datastore exists"!==e.message)throw e}return c.open(e)}static async open(e){const t=await i.readShardFun("/",e);return new c(e,t)}static async create(e,r){if(!await e.has(o)){const n="function"==typeof e.putRaw?e.putRaw.bind(e):e.put.bind(e);return Promise.all([n(o,t.from(r.toString()+"\n")),n(a,t.from(i.readme))])}const n=(await i.readShardFun("/",e)||"").toString(),s=r.toString();if(n!==s)throw new Error(`specified fun ${s} does not match repo shard fun ${n}`);throw new Error("datastore exists")}put(e,t){return this.child.put(e,t)}get(e){return this.child.get(e)}has(e){return this.child.has(e)}delete(e){return this.child.delete(e)}batch(){return this.child.batch()}query(e){const t={keysOnly:e.keysOnly,offset:e.offset,limit:e.limit,filters:[e=>e.key.toString()!==o.toString(),e=>e.key.toString()!==a.toString()]};if(null!=e.prefix&&t.filters.push(t=>this._invertKey(t.key).toString().startsWith(e.prefix)),null!=e.filters){const r=e.filters.map(e=>t=>e(Object.assign({},t,{key:this._invertKey(t.key)})));t.filters=t.filters.concat(r)}return null!=e.orders&&(t.orders=e.orders.map(e=>async t=>{t.forEach(e=>{e.key=this._invertKey(e.key)});const r=await e(t);return r.forEach(e=>{e.key=this._convertKey(e.key)}),r})),this.child.query(t)}close(){return this.child.close()}}e.exports=c}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************************!*\
  !*** ./node_modules/datastore-core/src/shard-readme.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="This is a repository of IPLD objects. Each IPLD object is in a single file,\nnamed <base32 encoding of cid>.data. Where <base32 encoding of cid> is the\n\"base32\" encoding of the CID (as specified in\nhttps://github.com/multiformats/multibase) without the 'B' prefix.\nAll the object files are placed in a tree of directories, based on a\nfunction of the CID. This is a form of sharding similar to\nthe objects directory in git repositories. Previously, we used\nprefixes, we now use the next-to-last two charters.\n    func NextToLast(base32cid string) {\n      nextToLastLen := 2\n      offset := len(base32cid) - nextToLastLen - 1\n      return str[offset : offset+nextToLastLen]\n    }\nFor example, an object with a base58 CIDv1 of\n    zb2rhYSxw4ZjuzgCnWSt19Q94ERaeFhu9uSqRgjSdx9bsgM6f\nhas a base32 CIDv1 of\n    BAFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA\nand will be placed at\n    SC/AFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA.data\nwith 'SC' being the last-to-next two characters and the 'B' at the\nbeginning of the CIDv1 string is the multibase prefix that is not\nstored in the filename.\n"},
/*!**************************************************!*\
  !*** ./node_modules/datastore-core/src/mount.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! interface-datastore */14).Key,i=r(/*! interface-datastore */14).Errors,s=r(/*! interface-datastore */14).utils,o=s.filter,a=s.take,c=s.sortAll,u=s.replaceStartWith,h=r(/*! ./keytransform */141);e.exports=class{constructor(e){this.mounts=e.slice()}open(){return Promise.all(this.mounts.map(e=>e.datastore.open()))}_lookup(e){for(let t of this.mounts)if(t.prefix.toString()===e.toString()||t.prefix.isAncestorOf(e)){const r=u(e.toString(),t.prefix.toString());return{datastore:t.datastore,mountpoint:t.prefix,rest:new n(r)}}}put(e,t){const r=this._lookup(e);if(null==r)throw i.dbWriteFailedError(new Error("No datastore mounted for this key"));return r.datastore.put(r.rest,t)}get(e){const t=this._lookup(e);if(null==t)throw i.notFoundError(new Error("No datastore mounted for this key"));return t.datastore.get(t.rest)}has(e){const t=this._lookup(e);return null!=t&&t.datastore.has(t.rest)}delete(e){const t=this._lookup(e);if(null==t)throw i.dbDeleteFailedError(new Error("No datastore mounted for this key"));return t.datastore.delete(t.rest)}close(){return Promise.all(this.mounts.map(e=>e.datastore.close()))}batch(){const e={},t=t=>{const r=this._lookup(t);if(null==r)throw new Error("No datastore mounted for this key");const n=r.mountpoint.toString();return null==e[n]&&(e[n]=r.datastore.batch()),{batch:e[n],rest:r.rest}};return{put:(e,r)=>{const n=t(e);n.batch.put(n.rest,r)},delete:e=>{const r=t(e);r.batch.delete(r.rest)},commit:()=>Promise.all(Object.keys(e).map(t=>e[t].commit()))}}query(e){const t=this.mounts.map(t=>{const r=new h(t.datastore,{convert:e=>{throw new Error("should never be called")},invert:e=>t.prefix.child(e)});let n;return null!=e.prefix&&(n=u(e.prefix,t.prefix.toString())),r.query({prefix:n,filters:e.filters,keysOnly:e.keysOnly})});let r=(n=t,async function*(){let e=n.map(()=>!1);for(;!e.every(Boolean);)for(const[t,r]of n.entries()){const n=await r.next();n.done?e[t]=!0:yield n.value}}());var n;if(e.filters&&e.filters.forEach(e=>{r=o(r,e)}),e.orders&&e.orders.forEach(e=>{r=c(r,e)}),null!=e.offset){let t=0;r=o(r,()=>t++>=e.offset)}return null!=e.limit&&(r=a(r,e.limit)),r}}},
/*!***************************************************!*\
  !*** ./node_modules/datastore-core/src/tiered.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! interface-datastore */14).Errors,i=r(/*! debug */1)("datastore:core:tiered");e.exports=class{constructor(e){this.stores=e.slice()}async open(){try{await this.stores.map(e=>e.open())}catch(e){throw n.dbOpenFailedError()}}async put(e,t){try{await Promise.all(this.stores.map(r=>r.put(e,t)))}catch(e){throw n.dbWriteFailedError()}}async get(e){for(const t of this.stores)try{const r=await t.get(e);if(r)return r}catch(e){i(e)}throw n.notFoundError()}has(e){return new Promise(async t=>{await Promise.all(this.stores.map(async r=>{await r.has(e)&&t(!0)})),t(!1)})}async delete(e){try{await Promise.all(this.stores.map(t=>t.delete(e)))}catch(e){throw n.dbDeleteFailedError()}}async close(){await Promise.all(this.stores.map(e=>e.close()))}batch(){const e=this.stores.map(e=>e.batch());return{put:(t,r)=>{e.forEach(e=>e.put(t,r))},delete:t=>{e.forEach(e=>e.delete(t))},commit:async()=>{for(const t of e)await t.commit()}}}query(e){return this.stores[this.stores.length-1].query(e)}}},
/*!******************************************************!*\
  !*** ./node_modules/datastore-core/src/namespace.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! interface-datastore */14).Key,i=r(/*! ./keytransform */141);e.exports=class extends i{constructor(e,t){super(e,{convert:e=>t.child(e),invert(e){if("/"===t.toString())return e;if(!t.isAncestorOf(e))throw new Error(`Expected prefix: (${t.toString()}) in key: ${e.toString()}`);return new n(e.toString().slice(t.toString().length),!1)}}),this.prefix=t}query(e){return e.prefix&&"/"!==this.prefix.toString()?super.query(Object.assign({},e,{prefix:this.prefix.child(new n(e.prefix)).toString()})):super.query(e)}}},
/*!***************************************************************!*\
  !*** ./node_modules/ipfs-repo/src/default-options-browser.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={lock:"memory",storageBackends:{root:r(/*! datastore-level */143),blocks:r(/*! datastore-level */143),keys:r(/*! datastore-level */143),datastore:r(/*! datastore-level */143)},storageBackendOptions:{root:{extension:""},blocks:{sharding:!1},keys:{sharding:!1}}}},
/*!***************************************!*\
  !*** ./node_modules/level/browser.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! level-packager */703)(r(/*! level-js */725))},
/*!*******************************************************!*\
  !*** ./node_modules/level-packager/level-packager.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! levelup */704),i=r(/*! encoding-down */721);e.exports=function(e){function t(t,s,o){return"function"==typeof t?o=t:"function"==typeof s&&(o=s),r(s)||(s=r(t)?t:{}),n(i(e(t),s),s,o)}function r(e){return"object"==typeof e&&null!==e}return["destroy","repair"].forEach((function(r){"function"==typeof e[r]&&(t[r]=function(){e[r].apply(e,arguments)})})),t.errors=n.errors,t}},
/*!*********************************************!*\
  !*** ./node_modules/levelup/lib/levelup.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! events */5).EventEmitter,i=r(/*! util */99).inherits,s=r(/*! xtend */80),o=r(/*! deferred-leveldown */705),a=r(/*! level-iterator-stream */709),c=r(/*! ./batch */717),u=r(/*! level-errors */211),h=r(/*! level-supports */209),l=r(/*! assert */24),f=r(/*! ./promisify */363),d=r(/*! ./common */144).getCallback,p=r(/*! ./common */144).getOptions,A=u.WriteError,g=u.ReadError,y=u.NotFoundError,m=u.OpenError,_=u.InitializationError;function b(e,r,i){if(!(this instanceof b))return new b(e,r,i);var s,a=this;if(n.call(this),this.setMaxListeners(1/0),"function"==typeof r&&(i=r,r={}),r=r||{},!e||"object"!=typeof e){if(s=new _("First argument must be an abstract-leveldown compliant store"),"function"==typeof i)return t.nextTick(i,s);throw s}l.strictEqual(typeof e.status,"string",".status required, old abstract-leveldown"),this.options=p(r),this._db=e,this.db=new o(e),this.open(i||function(e){e&&a.emit("error",e)}),this.supports=h(this.db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0}),Object.keys(this.supports.additionalMethods).forEach((function(e){null==this[e]&&(this[e]=function(){return this.db[e].apply(this.db,arguments)})}),this)}function w(e,r){if(!e._isOpening()&&!e.isOpen())return t.nextTick(r,new g("Database is not open")),!0}b.prototype.emit=n.prototype.emit,b.prototype.once=n.prototype.once,i(b,n),b.prototype.open=function(e,r){var n,i=this;return"function"==typeof e&&(r=e,e=null),r||(n=(r=f()).promise),e||(e=this.options),this.isOpen()?(t.nextTick(r,null,i),n):this._isOpening()?(this.once("open",(function(){r(null,i)})),n):(this.emit("opening"),this.db.open(e,(function(e){if(e)return r(new m(e));i.db=i._db,r(null,i),i.emit("open"),i.emit("ready")})),n)},b.prototype.close=function(e){var r,n=this;return e||(r=(e=f()).promise),this.isOpen()?(this.db.close((function(){n.emit("closed"),e.apply(null,arguments)})),this.emit("closing"),this.db=new o(this._db)):this.isClosed()?t.nextTick(e):"closing"===this.db.status?this.once("closed",e):this._isOpening()&&this.once("open",(function(){n.close(e)})),r},b.prototype.isOpen=function(){return"open"===this.db.status},b.prototype._isOpening=function(){return"opening"===this.db.status},b.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},b.prototype.get=function(e,t,r){if(null==e)throw new g("get() requires a key argument");var n;return(r=d(t,r))||(n=(r=f()).promise),w(this,r)?n:(t=p(t),this.db.get(e,t,(function(t,n){if(t)return t=/notfound/i.test(t)||t.notFound?new y("Key not found in database ["+e+"]",t):new g(t),r(t);r(null,n)})),n)},b.prototype.put=function(e,t,r,n){if(null==e)throw new A("put() requires a key argument");var i,s=this;return(n=d(r,n))||(i=(n=f()).promise),w(this,n)?i:(r=p(r),this.db.put(e,t,r,(function(r){if(r)return n(new A(r));s.emit("put",e,t),n()})),i)},b.prototype.del=function(e,t,r){if(null==e)throw new A("del() requires a key argument");var n,i=this;return(r=d(t,r))||(n=(r=f()).promise),w(this,r)?n:(t=p(t),this.db.del(e,t,(function(t){if(t)return r(new A(t));i.emit("del",e),r()})),n)},b.prototype.batch=function(e,t,r){if(!arguments.length)return new c(this);if(!Array.isArray(e))throw new A("batch() requires an array argument");var n,i=this;return(r=d(t,r))||(n=(r=f()).promise),w(this,r)?n:(t=p(t),this.db.batch(e,t,(function(t){if(t)return r(new A(t));i.emit("batch",e),r()})),n)},b.prototype.iterator=function(e){return this.db.iterator(e)},b.prototype.clear=function(e,t){var r,n=this;return t=d(e,t),e=p(e),t||(r=(t=f()).promise),w(this,t)?r:(this.db.clear(e,(function(r){if(r)return t(new A(r));n.emit("clear",e),t()})),r)},b.prototype.readStream=b.prototype.createReadStream=function(e){return"number"!=typeof(e=s({keys:!0,values:!0},e)).limit&&(e.limit=-1),new a(this.db.iterator(e),e)},b.prototype.keyStream=b.prototype.createKeyStream=function(e){return this.createReadStream(s(e,{keys:!0,values:!1}))},b.prototype.valueStream=b.prototype.createValueStream=function(e){return this.createReadStream(s(e,{keys:!1,values:!0}))},b.prototype.toString=function(){return"LevelUP"},b.prototype.type="levelup",b.errors=u,e.exports=b.default=b}).call(this,r(/*! ./../../process/browser.js */2))},
/*!***************************************************************!*\
  !*** ./node_modules/deferred-leveldown/deferred-leveldown.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! abstract-leveldown */354).AbstractLevelDOWN,i=r(/*! inherits */3),s=r(/*! ./deferred-iterator */708),o="put get del batch clear".split(" "),a="approximateSize compactRange".split(" ");function c(e){n.call(this,e.supports||{}),a.forEach((function(t){"function"!=typeof e[t]||this.supports.additionalMethods[t]||(this.supports.additionalMethods[t]=!0)}),this),this._db=e,this._operations=[],u(this)}function u(e){o.forEach((function(t){e["_"+t]=function(){this._operations.push({method:t,args:arguments})}})),Object.keys(e.supports.additionalMethods).forEach((function(t){e[t]=function(){this._operations.push({method:t,args:arguments})}})),e._iterator=function(t){var r=new s(e,t);return this._operations.push({iterator:r}),r}}i(c,n),c.prototype.type="deferred-leveldown",c.prototype._open=function(e,t){var r=this;this._db.open(e,(function(e){if(e)return t(e);r._operations.forEach((function(e){e.iterator?e.iterator.setDb(r._db):r._db[e.method].apply(r._db,e.args)})),r._operations=[],function(e){o.concat("iterator").forEach((function(t){e["_"+t]=function(){return this._db[t].apply(this._db,arguments)}})),Object.keys(e.supports.additionalMethods).forEach((function(t){e[t]=function(){return this._db[t].apply(this._db,arguments)}}))}(r),t()}))},c.prototype._close=function(e){var t=this;this._db.close((function(r){if(r)return e(r);u(t),e()}))},c.prototype._serializeKey=function(e){return e},c.prototype._serializeValue=function(e){return e},e.exports=c,e.exports.DeferredIterator=s},
/*!***********************************************************************************************!*\
  !*** ./node_modules/deferred-leveldown/node_modules/abstract-leveldown/abstract-leveldown.js ***!
  \***********************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t,n){var i=r(/*! xtend */80),s=r(/*! level-supports */209),o=r(/*! ./abstract-iterator */355),a=r(/*! ./abstract-chained-batch */356),c=Object.prototype.hasOwnProperty,u="start end gt gte lt lte".split(" ");function h(e){this.status="new",this.supports=s(e,{status:!0})}function l(e,t){var r={};for(var n in t)if(c.call(t,n)){var i=t[n];f(n)&&(i=e._serializeKey(i)),r[n]=i}return r}function f(e){return-1!==u.indexOf(e)}h.prototype.open=function(e,t){var r=this,n=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"==typeof e&&null!==e||(e={}),e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists,this.status="opening",this._open(e,(function(e){if(e)return r.status=n,t(e);r.status="open",t()}))},h.prototype._open=function(e,r){t.nextTick(r)},h.prototype.close=function(e){var t=this,r=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");this.status="closing",this._close((function(n){if(n)return t.status=r,e(n);t.status="closed",e()}))},h.prototype._close=function(e){t.nextTick(e)},h.prototype.get=function(e,r,n){if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("get() requires a callback argument");var i=this._checkKey(e);if(i)return t.nextTick(n,i);e=this._serializeKey(e),"object"==typeof r&&null!==r||(r={}),r.asBuffer=!1!==r.asBuffer,this._get(e,r,n)},h.prototype._get=function(e,r,n){t.nextTick((function(){n(new Error("NotFound"))}))},h.prototype.put=function(e,r,n,i){if("function"==typeof n&&(i=n),"function"!=typeof i)throw new Error("put() requires a callback argument");var s=this._checkKey(e)||this._checkValue(r);if(s)return t.nextTick(i,s);e=this._serializeKey(e),r=this._serializeValue(r),"object"==typeof n&&null!==n||(n={}),this._put(e,r,n,i)},h.prototype._put=function(e,r,n,i){t.nextTick(i)},h.prototype.del=function(e,r,n){if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("del() requires a callback argument");var i=this._checkKey(e);if(i)return t.nextTick(n,i);e=this._serializeKey(e),"object"==typeof r&&null!==r||(r={}),this._del(e,r,n)},h.prototype._del=function(e,r,n){t.nextTick(n)},h.prototype.batch=function(e,r,n){if(!arguments.length)return this._chainedBatch();if("function"==typeof r&&(n=r),"function"==typeof e&&(n=e),"function"!=typeof n)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return t.nextTick(n,new Error("batch(array) requires an array argument"));if(0===e.length)return t.nextTick(n);"object"==typeof r&&null!==r||(r={});for(var s=new Array(e.length),o=0;o<e.length;o++){if("object"!=typeof e[o]||null===e[o])return t.nextTick(n,new Error("batch(array) element must be an object and not `null`"));var a=i(e[o]);if("put"!==a.type&&"del"!==a.type)return t.nextTick(n,new Error("`type` must be 'put' or 'del'"));var c=this._checkKey(a.key);if(c)return t.nextTick(n,c);if(a.key=this._serializeKey(a.key),"put"===a.type){var u=this._checkValue(a.value);if(u)return t.nextTick(n,u);a.value=this._serializeValue(a.value)}s[o]=a}this._batch(s,r,n)},h.prototype._batch=function(e,r,n){t.nextTick(n)},h.prototype.clear=function(e,t){if("function"==typeof e)t=e;else if("function"!=typeof t)throw new Error("clear() requires a callback argument");(e=l(this,e)).reverse=!!e.reverse,e.limit="limit"in e?e.limit:-1,this._clear(e,t)},h.prototype._clear=function(e,t){e.keys=!0,e.values=!1,e.keyAsBuffer=!0,e.valueAsBuffer=!0;var r=this._iterator(e),n={},i=this,s=function(e){if(e)return r.end((function(){t(e)}));r.next((function(e,o){return e?s(e):void 0===o?r.end(t):void i._del(o,n,s)}))};s()},h.prototype._setupIteratorOptions=function(e){return(e=l(this,e)).reverse=!!e.reverse,e.keys=!1!==e.keys,e.values=!1!==e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=!1!==e.keyAsBuffer,e.valueAsBuffer=!1!==e.valueAsBuffer,e},h.prototype.iterator=function(e){return"object"==typeof e&&null!==e||(e={}),e=this._setupIteratorOptions(e),this._iterator(e)},h.prototype._iterator=function(e){return new o(this)},h.prototype._chainedBatch=function(){return new a(this)},h.prototype._serializeKey=function(e){return e},h.prototype._serializeValue=function(e){return e},h.prototype._checkKey=function(e){return null==e?new Error("key cannot be `null` or `undefined`"):n.isBuffer(e)&&0===e.length?new Error("key cannot be an empty Buffer"):""===e?new Error("key cannot be an empty String"):Array.isArray(e)&&0===e.length?new Error("key cannot be an empty Array"):void 0},h.prototype._checkValue=function(e){if(null==e)return new Error("value cannot be `null` or `undefined`")},e.exports=h}).call(this,r(/*! ./../../../process/browser.js */2),r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************!*\
  !*** ./node_modules/xtend/mutable.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty},
/*!**************************************************************!*\
  !*** ./node_modules/deferred-leveldown/deferred-iterator.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! abstract-leveldown */354).AbstractIterator;function i(e,t){n.call(this,e),this._options=t,this._iterator=null,this._operations=[]}r(/*! inherits */3)(i,n),i.prototype.setDb=function(e){var t=this._iterator=e.iterator(this._options);this._operations.forEach((function(e){t[e.method].apply(t,e.args)}))},i.prototype._operation=function(e,t){if(this._iterator)return this._iterator[e].apply(this._iterator,t);this._operations.push({method:e,args:t})},"next end".split(" ").forEach((function(e){i.prototype["_"+e]=function(){this._operation(e,arguments)}})),i.prototype.seek=function(){this._operation("seek",arguments)},e.exports=i},
/*!*****************************************************!*\
  !*** ./node_modules/level-iterator-stream/index.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! inherits */3),i=r(/*! readable-stream */37).Readable,s=r(/*! xtend */80);function o(e,t){if(!(this instanceof o))return new o(e,t);t=t||{},i.call(this,s(t,{objectMode:!0})),this._iterator=e,this._options=t,this.on("end",this.destroy.bind(this,null,null))}e.exports=o,n(o,i),o.prototype._read=function(){var e=this,t=this._options;this.destroyed||this._iterator.next((function(r,n,i){if(!e.destroyed)return r?e.destroy(r):void(void 0===n&&void 0===i?e.push(null):!1!==t.keys&&!1===t.values?e.push(n):!1===t.keys&&!1!==t.values?e.push(i):e.push({key:n,value:i}))}))},o.prototype._destroy=function(e,t){this._iterator.end((function(r){t(e||r)}))}},
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!**************************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/buffer_list.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(/*! buffer */0).Buffer,s=r(/*! util */712).inspect,o=s&&s.custom||"inspect";e.exports=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},t.concat=function(e){if(0===this.length)return i.alloc(0);for(var t,r,n,s=i.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=s,n=a,i.prototype.copy.call(t,r,n),a+=o.data.length,o=o.next;return s},t.consume=function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0===(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n},t._getBuffer=function(e){var t=i.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,o),0===(e-=o)){o===s.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=s.slice(o));break}++n}return this.length-=n,t},t[o]=function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){n(e,t,r[t])}))}return e}({},t,{depth:0,customInspect:!1}))},e}()},
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!*************************************************************!*\
  !*** ./node_modules/readable-stream/experimentalWarning.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){var r=new Set;e.exports.emitExperimentalWarning=t.emitWarning?function(e){if(!r.has(e)){var n=e+" is an experimental feature. This feature could change at any time";r.add(e),t.emitWarning(n,"ExperimentalWarning")}}:function(){}}).call(this,r(/*! ./../process/browser.js */2))},
/*!*****************************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/async_iterator.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(/*! ./end-of-stream */210),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),h=Symbol("lastPromise"),l=Symbol("handlePromise"),f=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var r=e[f].read();null!==r&&(e[h]=null,e[o]=null,e[a]=null,t(d(r,!1)))}}function A(e){t.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var e=this,r=this[c];if(null!==r)return Promise.reject(r);if(this[u])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(r,n){t.nextTick((function(){e[c]?n(e[c]):r(d(void 0,!0))}))}));var n,i=this[h];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[u]?r(d(void 0,!0)):t[l](r,n)}),n)}}(i,this));else{var s=this[f].read();if(null!==s)return Promise.resolve(d(s,!1));n=new Promise(this[l])}return this[h]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[f].destroy(null,(function(e){e?r(e):t(d(void 0,!0))}))}))})),n),g);e.exports=function(e){var t,r=Object.create(y,(i(t={},f,{value:e,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,l,{value:function(e,t){var n=r[f].read();n?(r[h]=null,r[o]=null,r[a]=null,e(d(n,!1))):(r[o]=e,r[a]=t)},writable:!0}),t));return r[h]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[h]=null,r[o]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[o];null!==n&&(r[h]=null,r[o]=null,r[a]=null,n(d(void 0,!0))),r[u]=!0})),e.on("readable",A.bind(null,r)),r}}).call(this,r(/*! ./../../../../process/browser.js */2))},
/*!*****************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_passthrough.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=i;var n=r(/*! ./_stream_transform */362);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(/*! inherits */3)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},
/*!***********************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/pipeline.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n;var i=r(/*! ../../../errors */81).codes,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var h,l=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var f=t.map((function(e,i){var s=i<t.length-1;return function(e,t,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(/*! ./end-of-stream */210)),n(e,{readable:t,writable:i},(function(e){if(e)return s(e);a=!0,s()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void s(t||new o("pipe"))}}(e,s,i>0,(function(e){h||(h=e),e&&f.forEach(c),s||(f.forEach(c),l(h))}))}));return t.reduce(u)}},
/*!*******************************************!*\
  !*** ./node_modules/levelup/lib/batch.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! level-errors */211).WriteError,i=r(/*! ./promisify */363),s=r(/*! ./common */144).getCallback,o=r(/*! ./common */144).getOptions;function a(e){this._levelup=e,this.batch=e.db.batch(),this.ops=[],this.length=0}a.prototype.put=function(e,t){try{this.batch.put(e,t)}catch(e){throw new n(e)}return this.ops.push({type:"put",key:e,value:t}),this.length++,this},a.prototype.del=function(e){try{this.batch.del(e)}catch(e){throw new n(e)}return this.ops.push({type:"del",key:e}),this.length++,this},a.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new n(e)}return this.ops=[],this.length=0,this},a.prototype.write=function(e,t){var r,a=this._levelup,c=this.ops;(t=s(e,t))||(r=(t=i()).promise),e=o(e);try{this.batch.write(e,(function(e){if(e)return t(new n(e));a.emit("batch",c),t()}))}catch(e){throw new n(e)}return r},e.exports=a},
/*!*************************************!*\
  !*** ./node_modules/errno/errno.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=e.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];e.exports.errno={},e.exports.code={},n.forEach((function(t){e.exports.errno[t.errno]=t,e.exports.code[t.code]=t})),e.exports.custom=r(/*! ./custom */719)(e.exports),e.exports.create=e.exports.custom.createError},
/*!**************************************!*\
  !*** ./node_modules/errno/custom.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! prr */720);function i(e,t,r){t&&"string"!=typeof t&&(t=t.message||t.name),n(this,{type:e,name:e,cause:"string"!=typeof t?t:r,message:t},"ewr")}function s(e,t){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),i.call(this,"CustomError",e,t)}s.prototype=new Error,e.exports=function(e){var t=function(t,r){return function(e,t,r){var n=function(r,s){i.call(this,t,r,s),"FilesystemError"==t&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,n)};return n.prototype=r?new r:new s,n}(e,t,r)};return{CustomError:s,FilesystemError:t("FilesystemError"),createError:t}}},
/*!*********************************!*\
  !*** ./node_modules/prr/prr.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){
/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */
var n,i;n=this,i=function(){var e="function"==typeof Object.defineProperty?function(e,t,r){return Object.defineProperty(e,t,r),e}:function(e,t,r){return e[t]=r.value,e};return function(t,r,n,i){var s;if(i=function(e,t){var r="object"==typeof t,n=!r&&"string"==typeof t,i=function(e){return r?!!t[e]:!!n&&t.indexOf(e[0])>-1};return{enumerable:i("enumerable"),configurable:i("configurable"),writable:i("writable"),value:e}}(n,i),"object"==typeof r){for(s in r)Object.hasOwnProperty.call(r,s)&&(i.value=r[s],e(t,s,i));return t}return e(t,r,i)}},e.exports?e.exports=i():n.prr=i()},
/*!*********************************************!*\
  !*** ./node_modules/encoding-down/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! abstract-leveldown */212).AbstractLevelDOWN,i=r(/*! abstract-leveldown */212).AbstractChainedBatch,s=r(/*! abstract-leveldown */212).AbstractIterator,o=r(/*! inherits */3),a=r(/*! level-codec */723),c=r(/*! level-errors */211).EncodingError,u=["approximateSize","compactRange"];function h(e,t){if(!(this instanceof h))return new h(e,t);var r=e.supports||{},i=r.additionalMethods||{};n.call(this,r),this.supports.encodings=!0,this.supports.additionalMethods={},u.forEach((function(t){var r="function"==typeof e[t];(i[t]||r)&&(this.supports.additionalMethods[t]=!0,this[t]=function(e,r,n,i){return e=this.codec.encodeKey(e,n),r=this.codec.encodeKey(r,n),this.db[t](e,r,n,i)})}),this),void 0===(t=t||{}).keyEncoding&&(t.keyEncoding="utf8"),void 0===t.valueEncoding&&(t.valueEncoding="utf8"),this.db=e,this.codec=new a(t)}function l(e,t){s.call(this,e),this.codec=e.codec,this.keys=t.keys,this.values=t.values,this.opts=this.codec.encodeLtgt(t),this.it=e.db.iterator(this.opts)}function f(e,t){i.call(this,e),this.codec=e.codec,this.batch=e.db.batch()}e.exports=h.default=h,o(h,n),h.prototype.type="encoding-down",h.prototype._serializeKey=h.prototype._serializeValue=function(e){return e},h.prototype._open=function(e,t){this.db.open(e,t)},h.prototype._close=function(e){this.db.close(e)},h.prototype._put=function(e,t,r,n){e=this.codec.encodeKey(e,r),t=this.codec.encodeValue(t,r),this.db.put(e,t,r,n)},h.prototype._get=function(e,t,r){var n=this;e=this.codec.encodeKey(e,t),t.asBuffer=this.codec.valueAsBuffer(t),this.db.get(e,t,(function(e,i){if(e)return r(e);try{i=n.codec.decodeValue(i,t)}catch(e){return r(new c(e))}r(null,i)}))},h.prototype._del=function(e,t,r){e=this.codec.encodeKey(e,t),this.db.del(e,t,r)},h.prototype._chainedBatch=function(){return new f(this)},h.prototype._batch=function(e,t,r){e=this.codec.encodeBatch(e,t),this.db.batch(e,t,r)},h.prototype._iterator=function(e){return e.keyAsBuffer=this.codec.keyAsBuffer(e),e.valueAsBuffer=this.codec.valueAsBuffer(e),new l(this,e)},h.prototype._clear=function(e,t){e=this.codec.encodeLtgt(e),this.db.clear(e,t)},o(l,s),l.prototype._next=function(e){var t=this;this.it.next((function(r,n,i){if(r)return e(r);try{n=t.keys&&void 0!==n?t.codec.decodeKey(n,t.opts):void 0,i=t.values&&void 0!==i?t.codec.decodeValue(i,t.opts):void 0}catch(r){return e(new c(r))}e(null,n,i)}))},l.prototype._seek=function(e){e=this.codec.encodeKey(e,this.opts),this.it.seek(e)},l.prototype._end=function(e){this.it.end(e)},o(f,i),f.prototype._put=function(e,t){e=this.codec.encodeKey(e),t=this.codec.encodeValue(t),this.batch.put(e,t)},f.prototype._del=function(e){e=this.codec.encodeKey(e),this.batch.del(e)},f.prototype._clear=function(){this.batch.clear()},f.prototype._write=function(e,t){this.batch.write(e,t)}},
/*!******************************************************************************************!*\
  !*** ./node_modules/encoding-down/node_modules/abstract-leveldown/abstract-leveldown.js ***!
  \******************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t,n){var i=r(/*! xtend */80),s=r(/*! level-supports */209),o=r(/*! ./abstract-iterator */364),a=r(/*! ./abstract-chained-batch */365),c=Object.prototype.hasOwnProperty,u="start end gt gte lt lte".split(" ");function h(e){this.status="new",this.supports=s(e,{status:!0})}function l(e,t){var r={};for(var n in t)if(c.call(t,n)){var i=t[n];f(n)&&(i=e._serializeKey(i)),r[n]=i}return r}function f(e){return-1!==u.indexOf(e)}h.prototype.open=function(e,t){var r=this,n=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"==typeof e&&null!==e||(e={}),e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists,this.status="opening",this._open(e,(function(e){if(e)return r.status=n,t(e);r.status="open",t()}))},h.prototype._open=function(e,r){t.nextTick(r)},h.prototype.close=function(e){var t=this,r=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");this.status="closing",this._close((function(n){if(n)return t.status=r,e(n);t.status="closed",e()}))},h.prototype._close=function(e){t.nextTick(e)},h.prototype.get=function(e,r,n){if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("get() requires a callback argument");var i=this._checkKey(e);if(i)return t.nextTick(n,i);e=this._serializeKey(e),"object"==typeof r&&null!==r||(r={}),r.asBuffer=!1!==r.asBuffer,this._get(e,r,n)},h.prototype._get=function(e,r,n){t.nextTick((function(){n(new Error("NotFound"))}))},h.prototype.put=function(e,r,n,i){if("function"==typeof n&&(i=n),"function"!=typeof i)throw new Error("put() requires a callback argument");var s=this._checkKey(e)||this._checkValue(r);if(s)return t.nextTick(i,s);e=this._serializeKey(e),r=this._serializeValue(r),"object"==typeof n&&null!==n||(n={}),this._put(e,r,n,i)},h.prototype._put=function(e,r,n,i){t.nextTick(i)},h.prototype.del=function(e,r,n){if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("del() requires a callback argument");var i=this._checkKey(e);if(i)return t.nextTick(n,i);e=this._serializeKey(e),"object"==typeof r&&null!==r||(r={}),this._del(e,r,n)},h.prototype._del=function(e,r,n){t.nextTick(n)},h.prototype.batch=function(e,r,n){if(!arguments.length)return this._chainedBatch();if("function"==typeof r&&(n=r),"function"==typeof e&&(n=e),"function"!=typeof n)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return t.nextTick(n,new Error("batch(array) requires an array argument"));if(0===e.length)return t.nextTick(n);"object"==typeof r&&null!==r||(r={});for(var s=new Array(e.length),o=0;o<e.length;o++){if("object"!=typeof e[o]||null===e[o])return t.nextTick(n,new Error("batch(array) element must be an object and not `null`"));var a=i(e[o]);if("put"!==a.type&&"del"!==a.type)return t.nextTick(n,new Error("`type` must be 'put' or 'del'"));var c=this._checkKey(a.key);if(c)return t.nextTick(n,c);if(a.key=this._serializeKey(a.key),"put"===a.type){var u=this._checkValue(a.value);if(u)return t.nextTick(n,u);a.value=this._serializeValue(a.value)}s[o]=a}this._batch(s,r,n)},h.prototype._batch=function(e,r,n){t.nextTick(n)},h.prototype.clear=function(e,t){if("function"==typeof e)t=e;else if("function"!=typeof t)throw new Error("clear() requires a callback argument");(e=l(this,e)).reverse=!!e.reverse,e.limit="limit"in e?e.limit:-1,this._clear(e,t)},h.prototype._clear=function(e,t){e.keys=!0,e.values=!1,e.keyAsBuffer=!0,e.valueAsBuffer=!0;var r=this._iterator(e),n={},i=this,s=function(e){if(e)return r.end((function(){t(e)}));r.next((function(e,o){return e?s(e):void 0===o?r.end(t):void i._del(o,n,s)}))};s()},h.prototype._setupIteratorOptions=function(e){return(e=l(this,e)).reverse=!!e.reverse,e.keys=!1!==e.keys,e.values=!1!==e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=!1!==e.keyAsBuffer,e.valueAsBuffer=!1!==e.valueAsBuffer,e},h.prototype.iterator=function(e){return"object"==typeof e&&null!==e||(e={}),e=this._setupIteratorOptions(e),this._iterator(e)},h.prototype._iterator=function(e){return new o(this)},h.prototype._chainedBatch=function(){return new a(this)},h.prototype._serializeKey=function(e){return e},h.prototype._serializeValue=function(e){return e},h.prototype._checkKey=function(e){return null==e?new Error("key cannot be `null` or `undefined`"):n.isBuffer(e)&&0===e.length?new Error("key cannot be an empty Buffer"):""===e?new Error("key cannot be an empty String"):Array.isArray(e)&&0===e.length?new Error("key cannot be an empty Array"):void 0},h.prototype._checkValue=function(e){if(null==e)return new Error("value cannot be `null` or `undefined`")},e.exports=h}).call(this,r(/*! ./../../../process/browser.js */2),r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************!*\
  !*** ./node_modules/level-codec/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./lib/encodings */724);function i(e){if(!(this instanceof i))return new i(e);this.opts=e||{},this.encodings=n}e.exports=i,i.prototype._encoding=function(e){return"string"==typeof e&&(e=n[e]),e||(e=n.id),e},i.prototype._keyEncoding=function(e,t){return this._encoding(t&&t.keyEncoding||e&&e.keyEncoding||this.opts.keyEncoding)},i.prototype._valueEncoding=function(e,t){return this._encoding(t&&(t.valueEncoding||t.encoding)||e&&(e.valueEncoding||e.encoding)||this.opts.valueEncoding||this.opts.encoding)},i.prototype.encodeKey=function(e,t,r){return this._keyEncoding(t,r).encode(e)},i.prototype.encodeValue=function(e,t,r){return this._valueEncoding(t,r).encode(e)},i.prototype.decodeKey=function(e,t){return this._keyEncoding(t).decode(e)},i.prototype.decodeValue=function(e,t){return this._valueEncoding(t).decode(e)},i.prototype.encodeBatch=function(e,t){var r=this;return e.map((function(e){var n={type:e.type,key:r.encodeKey(e.key,t,e)};return r.keyAsBuffer(t,e)&&(n.keyEncoding="binary"),e.prefix&&(n.prefix=e.prefix),"value"in e&&(n.value=r.encodeValue(e.value,t,e),r.valueAsBuffer(t,e)&&(n.valueEncoding="binary")),n}))};var s=["lt","gt","lte","gte","start","end"];i.prototype.encodeLtgt=function(e){var t=this,r={};return Object.keys(e).forEach((function(n){r[n]=s.indexOf(n)>-1?t.encodeKey(e[n],e):e[n]})),r},i.prototype.createStreamDecoder=function(e){var t=this;return e.keys&&e.values?function(r,n){return{key:t.decodeKey(r,e),value:t.decodeValue(n,e)}}:e.keys?function(r){return t.decodeKey(r,e)}:e.values?function(r,n){return t.decodeValue(n,e)}:function(){}},i.prototype.keyAsBuffer=function(e){return this._keyEncoding(e).buffer},i.prototype.valueAsBuffer=function(e){return this._valueEncoding(e).buffer}},
/*!***************************************************!*\
  !*** ./node_modules/level-codec/lib/encodings.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e){t.utf8=t["utf-8"]={encode:function(e){return n(e)?e:String(e)},decode:r,buffer:!1,type:"utf8"},t.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},t.binary={encode:function(t){return n(t)?t:e.from(t)},decode:r,buffer:!0,type:"binary"},t.none={encode:r,decode:r,buffer:!1,type:"id"},t.id=t.none;function r(e){return e}function n(t){return null==t||e.isBuffer(t)}["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"].forEach((function(r){t[r]={encode:function(t){return n(t)?t:e.from(t,r)},decode:function(e){return e.toString(r)},buffer:!0,type:r}}))}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!****************************************!*\
  !*** ./node_modules/level-js/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){e.exports=h;var n=r(/*! abstract-leveldown */366).AbstractLevelDOWN,i=r(/*! inherits */3),s=r(/*! ./iterator */727),o=r(/*! ./util/mixed-to-buffer */369),a=r(/*! ./util/immediate */370),c=r(/*! ./util/support */737),u="level-js-";function h(e,t){if(!(this instanceof h))return new h(e,t);if(n.call(this),t=t||{},"string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.prefix=t.prefix||u,this.version=parseInt(t.version||1,10)}i(h,n),h.binaryKeys=c.binaryKeys(indexedDB),h.arrayKeys=c.arrayKeys(indexedDB),h.prototype._open=function(e,t){var r=indexedDB.open(this.prefix+this.location,this.version),n=this;r.onerror=function(){t(r.error||new Error("unknown error"))},r.onsuccess=function(){n.db=r.result,t()},r.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(n.location)||t.createObjectStore(n.location)}},h.prototype.store=function(e){return this.db.transaction([this.location],e).objectStore(this.location)},h.prototype.await=function(e,t){var r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}},h.prototype._get=function(e,t,r){var n=this.store("readonly");try{var i=n.get(e)}catch(e){return a((function(){r(e)}))}this.await(i,(function(e,n){return e?r(e):void 0===n?r(new Error("NotFound")):(t.asBuffer&&(n=o(n)),void r(null,n))}))},h.prototype._del=function(e,t,r){var n=this.store("readwrite");try{var i=n.delete(e)}catch(e){return a((function(){r(e)}))}this.await(i,r)},h.prototype._put=function(e,t,r,n){var i=this.store("readwrite");try{var s=i.put(t,e)}catch(e){return a((function(){n(e)}))}this.await(s,n)},h.prototype._serializeKey=function(e){return t.isBuffer(e)?h.binaryKeys?e:e.toString():Array.isArray(e)?h.arrayKeys?e.map(this._serializeKey,this):String(e):e},h.prototype._serializeValue=function(e){return e},h.prototype._iterator=function(e){return new s(this,this.location,e)},h.prototype._batch=function(e,t,r){if(0===e.length)return a(r);var n,i=this.store("readwrite"),s=i.transaction,o=0;s.onabort=function(){r(n||s.error||new Error("aborted by user"))},s.oncomplete=function(){r()},function t(){var r=e[o++],a=r.key;try{var c="del"===r.type?i.delete(a):i.put(r.value,a)}catch(e){return n=e,void s.abort()}o<e.length&&(c.onsuccess=t)}()},h.prototype._close=function(e){this.db.close(),a(e)},h.destroy=function(e,t,r){"function"==typeof t&&(r=t,t=u);var n=indexedDB.deleteDatabase(t+e);n.onsuccess=function(){r()},n.onerror=function(e){r(e)}}}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************************************!*\
  !*** ./node_modules/level-js/node_modules/abstract-leveldown/abstract-leveldown.js ***!
  \*************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t,n){var i=r(/*! xtend */80),s=r(/*! ./abstract-iterator */367),o=r(/*! ./abstract-chained-batch */368),a=Object.prototype.hasOwnProperty,c="start end gt gte lt lte".split(" ");function u(){this.status="new"}function h(e){return-1!==c.indexOf(e)}u.prototype.open=function(e,t){var r=this,n=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"==typeof e&&null!==e||(e={}),e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists,this.status="opening",this._open(e,(function(e){if(e)return r.status=n,t(e);r.status="open",t()}))},u.prototype._open=function(e,r){t.nextTick(r)},u.prototype.close=function(e){var t=this,r=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");this.status="closing",this._close((function(n){if(n)return t.status=r,e(n);t.status="closed",e()}))},u.prototype._close=function(e){t.nextTick(e)},u.prototype.get=function(e,r,n){if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("get() requires a callback argument");var i=this._checkKey(e);if(i)return t.nextTick(n,i);e=this._serializeKey(e),"object"==typeof r&&null!==r||(r={}),r.asBuffer=!1!==r.asBuffer,this._get(e,r,n)},u.prototype._get=function(e,r,n){t.nextTick((function(){n(new Error("NotFound"))}))},u.prototype.put=function(e,r,n,i){if("function"==typeof n&&(i=n),"function"!=typeof i)throw new Error("put() requires a callback argument");var s=this._checkKey(e)||this._checkValue(r);if(s)return t.nextTick(i,s);e=this._serializeKey(e),r=this._serializeValue(r),"object"==typeof n&&null!==n||(n={}),this._put(e,r,n,i)},u.prototype._put=function(e,r,n,i){t.nextTick(i)},u.prototype.del=function(e,r,n){if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("del() requires a callback argument");var i=this._checkKey(e);if(i)return t.nextTick(n,i);e=this._serializeKey(e),"object"==typeof r&&null!==r||(r={}),this._del(e,r,n)},u.prototype._del=function(e,r,n){t.nextTick(n)},u.prototype.batch=function(e,r,n){if(!arguments.length)return this._chainedBatch();if("function"==typeof r&&(n=r),"function"==typeof e&&(n=e),"function"!=typeof n)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return t.nextTick(n,new Error("batch(array) requires an array argument"));if(0===e.length)return t.nextTick(n);"object"==typeof r&&null!==r||(r={});for(var s=new Array(e.length),o=0;o<e.length;o++){if("object"!=typeof e[o]||null===e[o])return t.nextTick(n,new Error("batch(array) element must be an object and not `null`"));var a=i(e[o]);if("put"!==a.type&&"del"!==a.type)return t.nextTick(n,new Error("`type` must be 'put' or 'del'"));var c=this._checkKey(a.key);if(c)return t.nextTick(n,c);if(a.key=this._serializeKey(a.key),"put"===a.type){var u=this._checkValue(a.value);if(u)return t.nextTick(n,u);a.value=this._serializeValue(a.value)}s[o]=a}this._batch(s,r,n)},u.prototype._batch=function(e,r,n){t.nextTick(n)},u.prototype._setupIteratorOptions=function(e){return(e=function(e,t){var r={};for(var n in t)if(a.call(t,n)){var i=t[n];h(n)&&(i=e._serializeKey(i)),r[n]=i}return r}(this,e)).reverse=!!e.reverse,e.keys=!1!==e.keys,e.values=!1!==e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=!1!==e.keyAsBuffer,e.valueAsBuffer=!1!==e.valueAsBuffer,e},u.prototype.iterator=function(e){return"object"==typeof e&&null!==e||(e={}),e=this._setupIteratorOptions(e),this._iterator(e)},u.prototype._iterator=function(e){return new s(this)},u.prototype._chainedBatch=function(){return new o(this)},u.prototype._serializeKey=function(e){return e},u.prototype._serializeValue=function(e){return e},u.prototype._checkKey=function(e){return null==e?new Error("key cannot be `null` or `undefined`"):n.isBuffer(e)&&0===e.length?new Error("key cannot be an empty Buffer"):""===e?new Error("key cannot be an empty String"):Array.isArray(e)&&0===e.length?new Error("key cannot be an empty Array"):void 0},u.prototype._checkValue=function(e){if(null==e)return new Error("value cannot be `null` or `undefined`")},e.exports=u}).call(this,r(/*! ./../../../process/browser.js */2),r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************!*\
  !*** ./node_modules/level-js/iterator.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! inherits */3),i=r(/*! abstract-leveldown */366).AbstractIterator,s=r(/*! ltgt */728),o=r(/*! ./util/mixed-to-buffer */369),a=r(/*! ./util/immediate */370),c=function(){};function u(e,t,r){if(i.call(this,e),this._limit=r.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keyAsBuffer=r.keyAsBuffer,this._valueAsBuffer=r.valueAsBuffer,0!==this._limit){try{var n=this.createKeyRange(r)}catch(e){return void(this._completed=!0)}this.createIterator(t,n,r.reverse)}else this._completed=!0}e.exports=u,n(u,i),u.prototype.createKeyRange=function(e){var t=s.lowerBound(e),r=s.upperBound(e),n=s.lowerBoundExclusive(e),i=s.upperBoundExclusive(e);return void 0!==t&&void 0!==r?IDBKeyRange.bound(t,r,n,i):void 0!==t?IDBKeyRange.lowerBound(t,n):void 0!==r?IDBKeyRange.upperBound(r,i):null},u.prototype.createIterator=function(e,t,r){var n=this,i=this.db.db.transaction([e],"readonly");i.objectStore(e).openCursor(t,r?"prev":"next").onsuccess=function(e){var t=e.target.result;t&&n.onItem(t)},this._transaction=i,i.onabort=function(){n.onAbort(n._transaction.error||new Error("aborted by user"))},i.oncomplete=function(){n.onComplete()}},u.prototype.onItem=function(e){this._cache.push(e.key,e.value),(this._limit<=0||++this._count<this._limit)&&e.continue(),this.maybeNext()},u.prototype.onAbort=function(e){this._aborted=!0,this._error=e,this.maybeNext()},u.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},u.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},u.prototype._next=function(e){if(this._aborted){var t=this._error;this._error=null,a((function(){e(t)}))}else if(this._cache.length>0){var r=this._cache.shift(),n=this._cache.shift();this._keyAsBuffer&&(r=o(r)),this._valueAsBuffer&&(n=o(n)),a((function(){e(null,r,n)}))}else this._completed?a(e):this._callback=e},u.prototype._end=function(e){if(this._aborted||this._completed){var t=this._error;a((function(){e(t)}))}else this.onItem=c,this.onAbort=e,this.onComplete=e}},
/*!************************************!*\
  !*** ./node_modules/ltgt/index.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e){function r(e){return void 0!==e&&""!==e}function n(e,t){return Object.hasOwnProperty.call(e,t)}function i(e,t){return Object.hasOwnProperty.call(e,t)&&t}t.compare=function(t,r){if(e.isBuffer(t)){for(var n=Math.min(t.length,r.length),i=0;i<n;i++){var s=t[i]-r[i];if(s)return s}return t.length-r.length}return t<r?-1:t>r?1:0};var s=t.lowerBoundKey=function(e){return i(e,"gt")||i(e,"gte")||i(e,"min")||(e.reverse?i(e,"end"):i(e,"start"))||void 0},o=t.lowerBound=function(e,t){var r=s(e);return r?e[r]:t},a=t.lowerBoundInclusive=function(e){return!n(e,"gt")},c=t.upperBoundInclusive=function(e){return!n(e,"lt")},u=t.lowerBoundExclusive=function(e){return!a(e)},h=t.upperBoundExclusive=function(e){return!c(e)},l=t.upperBoundKey=function(e){return i(e,"lt")||i(e,"lte")||i(e,"max")||(e.reverse?i(e,"start"):i(e,"end"))||void 0},f=t.upperBound=function(e,t){var r=l(e);return r?e[r]:t};function d(e){return e}t.start=function(e,t){return e.reverse?f(e,t):o(e,t)},t.end=function(e,t){return e.reverse?o(e,t):f(e,t)},t.startInclusive=function(e){return e.reverse?c(e):a(e)},t.endInclusive=function(e){return e.reverse?a(e):c(e)},t.toLtgt=function(e,r,i,s,o){r=r||{},i=i||d;var a=arguments.length>3,c=t.lowerBoundKey(e),u=t.upperBoundKey(e);return c?"gt"===c?r.gt=i(e.gt,!1):r.gte=i(e[c],!1):a&&(r.gte=i(s,!1)),u?"lt"===u?r.lt=i(e.lt,!0):r.lte=i(e[u],!0):a&&(r.lte=i(o,!0)),null!=e.reverse&&(r.reverse=!!e.reverse),n(r,"max")&&delete r.max,n(r,"min")&&delete r.min,n(r,"start")&&delete r.start,n(r,"end")&&delete r.end,r},t.contains=function(e,n,i){i=i||t.compare;var s=o(e);if(r(s)&&((a=i(n,s))<0||0===a&&u(e)))return!1;var a,c=f(e);if(r(c)&&((a=i(n,c))>0||0===a&&h(e)))return!1;return!0},t.filter=function(e,r){return function(n){return t.contains(e,n,r)}}}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!****************************************************!*\
  !*** ./node_modules/typedarray-to-buffer/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! is-typedarray */730).strict;e.exports=function(e){if(n(e)){var r=t.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(r=r.slice(e.byteOffset,e.byteOffset+e.byteLength)),r}return t.from(e)}}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************!*\
  !*** ./node_modules/is-typedarray/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=i,i.strict=s,i.loose=o;var r=Object.prototype.toString,n={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function i(e){return s(e)||o(e)}function s(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function o(e){return n[r.call(e)]}},
/*!*********************************************!*\
  !*** ./node_modules/immediate/lib/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n,i,s,o=[r(/*! ./nextTick */732),r(/*! ./mutation.js */733),r(/*! ./messageChannel */734),r(/*! ./stateChange */735),r(/*! ./timeout */736)],a=-1,c=[],u=!1;function h(){n&&i&&(n=!1,i.length?c=i.concat(c):a=-1,c.length&&l())}function l(){if(!n){u=!1,n=!0;for(var e=c.length,t=setTimeout(h);e;){for(i=c,c=[];i&&++a<e;)i[a].run();a=-1,e=c.length}i=null,a=-1,n=!1,clearTimeout(t)}}for(var f=-1,d=o.length;++f<d;)if(o[f]&&o[f].test&&o[f].test()){s=o[f].install(l);break}function p(e,t){this.fun=e,this.array=t}p.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},e.exports=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),u||n||(u=!0,s())}},
/*!************************************************!*\
  !*** ./node_modules/immediate/lib/nextTick.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){t.test=function(){return void 0!==e&&!e.browser},t.install=function(t){return function(){e.nextTick(t)}}}).call(this,r(/*! ./../../process/browser.js */2))},
/*!************************************************!*\
  !*** ./node_modules/immediate/lib/mutation.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){var r=e.MutationObserver||e.WebKitMutationObserver;t.test=function(){return r},t.install=function(t){var n=0,i=new r(t),s=e.document.createTextNode("");return i.observe(s,{characterData:!0}),function(){s.data=n=++n%2}}}).call(this,r(/*! ./../../webpack/buildin/global.js */10))},
/*!******************************************************!*\
  !*** ./node_modules/immediate/lib/messageChannel.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){t.test=function(){return!e.setImmediate&&void 0!==e.MessageChannel},t.install=function(t){var r=new e.MessageChannel;return r.port1.onmessage=t,function(){r.port2.postMessage(0)}}}).call(this,r(/*! ./../../webpack/buildin/global.js */10))},
/*!***************************************************!*\
  !*** ./node_modules/immediate/lib/stateChange.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){t.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},t.install=function(t){return function(){var r=e.document.createElement("script");return r.onreadystatechange=function(){t(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},e.document.documentElement.appendChild(r),t}}}).call(this,r(/*! ./../../webpack/buildin/global.js */10))},
/*!***********************************************!*\
  !*** ./node_modules/immediate/lib/timeout.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.test=function(){return!0},t.install=function(e){return function(){setTimeout(e,0)}}},
/*!***********************************************!*\
  !*** ./node_modules/level-js/util/support.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.test=function(e){return function(t){try{return t.cmp(e,0),!0}catch(e){return!1}}},t.binaryKeys=t.test(new Uint8Array(0)),t.arrayKeys=t.test([1])},
/*!*********************************************************!*\
  !*** ./node_modules/ipfs-repo/src/default-datastore.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}}},
/*!*************************************************!*\
  !*** ./node_modules/ipfs-repo/src/constants.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={repoVersion:7}},
/*!********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/index.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.preStart=r(/*! ./pre-start */741),t.start=r(/*! ./start */765),t.stop=r(/*! ./stop */1103),t.isOnline=r(/*! ./is-online */1104),t.version=r(/*! ./version */1105),t.id=r(/*! ./id */1106),t.repo=r(/*! ./repo */453),t.init=r(/*! ./init */1108),t.bootstrap=r(/*! ./bootstrap */1111),t.config=r(/*! ./config */454),t.block=r(/*! ./block */1112),t.object=r(/*! ./object */1123),t.dag=r(/*! ./dag */1124),t.libp2p=r(/*! ./libp2p */393),t.swarm=r(/*! ./swarm */1125),t.ping=r(/*! ./ping */1126),t.pingPullStream=r(/*! ./ping-pull-stream */1127),t.pingReadableStream=r(/*! ./ping-readable-stream */1128),t.pin=r(/*! ./pin */1129),t.filesRegular=r(/*! ./files-regular */1130),t.filesMFS=r(/*! ./files-mfs */1193),t.bitswap=r(/*! ./bitswap */481),t.pubsub=r(/*! ./pubsub */1223),t.dht=r(/*! ./dht */1224),t.dns=r(/*! ./dns */1227),t.key=r(/*! ./key */1229),t.stats=r(/*! ./stats */1230),t.resolve=r(/*! ./resolve */1231),t.name=r(/*! ./name */1232)},
/*!************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/pre-start.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! peer-id */7),i=r(/*! peer-info */21),s=r(/*! multiaddr */15),o=r(/*! libp2p-keychain */372),a=r(/*! merge-options */51),c=r(/*! ./no-keychain */764),u=r(/*! callbackify */19),h=r(/*! promisify-es6 */9);e.exports=function(e){return u(async()=>{e.log("pre-start");const t=e._options.pass;let r=await e._repo.config.get();if(e._options.config&&(r=a(r,e._options.config),await e.config.replace(r)),r.Keychain||(r.Keychain=o.generateOptions(),await e.config.set("Keychain",r.Keychain),e.log("using default keychain options")),e._keychain);else if(t){const n=Object.assign({passPhrase:t},r.Keychain);e._keychain=new o(e._repo.keys,n),e.log("keychain constructed")}else e._keychain=new c,e.log("no keychain, use --pass");const u=r.Identity.PrivKey,l=await h(n.createFromPrivKey)(u);if(t)try{await e._keychain.findKeyByName("self")}catch(t){e.log('Creating "self" key'),await e._keychain.importPeer("self",l)}e.log("peer created"),e._peerInfo=new i(l),r.Addresses&&r.Addresses.Swarm&&r.Addresses.Swarm.forEach(t=>{let r=s(t);r.getPeerId()&&(r=r.encapsulate("/ipfs/"+e._peerInfo.id.toB58String())),e._peerInfo.multiaddrs.add(r)}),await e.pin.pinManager.load()})}},
/*!******************************************************!*\
  !*** ./node_modules/libp2p-keychain/src/keychain.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! sanitize-filename */743),i=r(/*! merge-options */51),s=r(/*! libp2p-crypto */36),o=r(/*! interface-datastore */14),a=r(/*! promisify-es6 */9),c=r(/*! ./cms */747),u=r(/*! err-code */378),h="/pkcs8/",l="/info/",f={minKeyLength:14,minSaltLength:16,minIterationCount:1e3},d={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function p(e){return!!e&&("string"==typeof e&&e===n(e.trim()))}async function A(e){const t=800*Math.random()+200;throw await new Promise(e=>setTimeout(e,t)),e}function g(e){return new o.Key(h+e)}function y(e){return new o.Key(l+e)}e.exports=class{constructor(e,t){if(!e)throw new Error("store is required");this.store=e;const r=i(d,t);if(!r.passPhrase||r.passPhrase.length<20)throw new Error("passPhrase must be least 20 characters");if(r.dek.keyLength<f.minKeyLength)throw new Error(`dek.keyLength must be least ${f.minKeyLength} bytes`);if(r.dek.salt.length<f.minSaltLength)throw new Error(`dek.saltLength must be least ${f.minSaltLength} bytes`);if(r.dek.iterationCount<f.minIterationCount)throw new Error(`dek.iterationCount must be least ${f.minIterationCount}`);const n=s.pbkdf2(r.passPhrase,r.dek.salt,r.dek.iterationCount,r.dek.keyLength,r.dek.hash);Object.defineProperty(this,"_",{value:()=>n})}get cms(){return new c(this)}static generateOptions(){const e=Object.assign({},d),t=3*Math.ceil(f.minSaltLength/3);return e.dek.salt=s.randomBytes(t).toString("base64"),e}static get options(){return d}async createKey(e,t,r){const n=this;if(!p(e)||"self"===e)return A(u(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if("string"!=typeof t)return A(u(new Error(`Invalid key type '${t}'`),"ERR_INVALID_KEY_TYPE"));if(!Number.isSafeInteger(r))return A(u(new Error(`Invalid key size '${r}'`),"ERR_INVALID_KEY_SIZE"));const i=g(e);if(await n.store.has(i))return A(u(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS"));switch(t.toLowerCase()){case"rsa":if(r<2048)return A(u(new Error(`Invalid RSA key size ${r}`),"ERR_INVALID_KEY_SIZE"))}let o;try{const c=await a(s.keys.generateKeyPair,{context:s.keys})(t,r),u=await a(c.id,{context:c})(),h=await a(c.export,{context:c})(this._());o={name:e,id:u};const l=n.store.batch();l.put(i,h),l.put(y(e),JSON.stringify(o)),await l.commit()}catch(e){return A(e)}return o}async listKeys(){const e=this,t={prefix:l},r=[];for await(const n of e.store.query(t))r.push(JSON.parse(n.value));return r}async findKeyById(e){try{return(await this.listKeys()).find(t=>t.id===e)}catch(e){return A(e)}}async findKeyByName(e){if(!p(e))return A(u(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));const t=y(e);try{const e=await this.store.get(t);return JSON.parse(e.toString())}catch(t){return A(u(new Error(`Key '${e}' does not exist. ${t.message}`),"ERR_KEY_NOT_FOUND"))}}async removeKey(e){if(!p(e)||"self"===e)return A(u(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));const t=g(e),r=await this.findKeyByName(e),n=this.store.batch();return n.delete(t),n.delete(y(e)),await n.commit(),r}async renameKey(e,t){const r=this;if(!p(e)||"self"===e)return A(u(new Error(`Invalid old key name '${e}'`),"ERR_OLD_KEY_NAME_INVALID"));if(!p(t)||"self"===t)return A(u(new Error(`Invalid new key name '${t}'`),"ERR_NEW_KEY_NAME_INVALID"));const n=g(e),i=g(t),s=y(e),o=y(t);if(await r.store.has(i))return A(u(new Error(`Key '${t}' already exists`),"ERR_KEY_ALREADY_EXISTS"));try{let e=await this.store.get(n);const a=e.toString();e=await r.store.get(s);const c=JSON.parse(e.toString());c.name=t;const u=r.store.batch();return u.put(i,a),u.put(o,JSON.stringify(c)),u.delete(n),u.delete(s),await u.commit(),c}catch(e){return A(e)}}async exportKey(e,t){if(!p(e))return A(u(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!t)return A(u(new Error("Password is required"),"ERR_PASSWORD_REQUIRED"));const r=g(e);try{const e=(await this.store.get(r)).toString(),n=await a(s.keys.import,{context:s.keys})(e,this._());return a(n.export,{context:n})(t)}catch(e){return A(e)}}async importKey(e,t,r){if(!p(e)||"self"===e)return A(u(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!t)return A(u(new Error("PEM encoded key is required"),"ERR_PEM_REQUIRED"));const n=g(e);if(await this.store.has(n))return A(u(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS"));let i,o;try{i=await a(s.keys.import,{context:s.keys})(t,r)}catch(e){return A(u(new Error("Cannot read the key, most likely the password is wrong"),"ERR_CANNOT_READ_KEY"))}try{o=await a(i.id,{context:i})(),t=await a(i.export,{context:i})(this._())}catch(e){return A(e)}const c={name:e,id:o},h=this.store.batch();return h.put(n,t),h.put(y(e),JSON.stringify(c)),await h.commit(),c}async importPeer(e,t){const r=this;if(!p(e))return A(u(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!t||!t.privKey)return A(u(new Error("Peer.privKey is required"),"ERR_MISSING_PRIVATE_KEY"));const n=t.privKey,i=g(e);if(await r.store.has(i))return A(u(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS"));try{const t=await a(n.id,{context:n})(),s=await a(n.export,{context:n})(this._()),o={name:e,id:t},c=r.store.batch();return c.put(i,s),c.put(y(e),JSON.stringify(o)),await c.commit(),o}catch(e){return A(e)}}async _getPrivateKey(e){if(!p(e))return A(u(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));try{const t=g(e);return(await this.store.get(t)).toString()}catch(t){return A(u(new Error(`Key '${e}' does not exist. ${t.message}`),"ERR_KEY_NOT_FOUND"))}}}},
/*!*************************************************!*\
  !*** ./node_modules/sanitize-filename/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! truncate-utf8-bytes */744),i=/[\/\?<>\\:\*\|"]/g,s=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,c=/[\. ]+$/;function u(e,t){if("string"!=typeof e)throw new Error("Input must be string");var r=e.replace(i,t).replace(s,t).replace(o,t).replace(a,t).replace(c,t);return n(r,255)}e.exports=function(e,t){var r=t&&t.replacement||"",n=u(e,r);return""===r?n:u(n,"")}},
/*!*****************************************************!*\
  !*** ./node_modules/truncate-utf8-bytes/browser.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./lib/truncate */745),i=r(/*! utf8-byte-length/browser */746);e.exports=n.bind(null,i)},
/*!**********************************************************!*\
  !*** ./node_modules/truncate-utf8-bytes/lib/truncate.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(e){return e>=55296&&e<=56319}function i(e){return e>=56320&&e<=57343}e.exports=function(e,t,r){if("string"!=typeof t)throw new Error("Input must be string");for(var s,o,a=t.length,c=0,u=0;u<a;u+=1){if(s=t.charCodeAt(u),o=t[u],n(s)&&i(t.charCodeAt(u+1))&&(o+=t[u+=1]),(c+=e(o))===r)return t.slice(0,u+1);if(c>r)return t.slice(0,u-o.length+1)}return t}},
/*!**************************************************!*\
  !*** ./node_modules/utf8-byte-length/browser.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(e){return e>=55296&&e<=56319}function i(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!=typeof e)throw new Error("Input must be string");for(var t=e.length,r=0,s=null,o=null,a=0;a<t;a++)i(s=e.charCodeAt(a))?null!=o&&n(o)?r+=1:r+=3:s<=127?r+=1:s>=128&&s<=2047?r+=2:s>=2048&&s<=65535&&(r+=3),o=s;return r}},
/*!*************************************************!*\
  !*** ./node_modules/libp2p-keychain/src/cms.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){r(/*! node-forge/lib/pkcs7 */748),r(/*! node-forge/lib/pbe */759);const n=r(/*! node-forge/lib/forge */12),{certificateForKey:i,findAsync:s}=r(/*! ./util */763),o=r(/*! err-code */378);e.exports=class{constructor(e){if(!e)throw o(new Error("keychain is required"),"ERR_KEYCHAIN_REQUIRED");this.keychain=e}async encrypt(e,r){if(!t.isBuffer(r))throw o(new Error("Plain data must be a Buffer"),"ERR_INVALID_PARAMS");const s=await this.keychain.findKeyByName(e),a=await this.keychain._getPrivateKey(e),c=n.pki.decryptRsaPrivateKey(a,this.keychain._()),u=await i(s,c),h=n.pkcs7.createEnvelopedData();h.addRecipient(u),h.content=n.util.createBuffer(r),h.encrypt();const l=n.asn1.toDer(h.toAsn1()).getBytes();return t.from(l,"binary")}async decrypt(e){if(!t.isBuffer(e))throw o(new Error("CMS data is required"),"ERR_INVALID_PARAMS");let r;try{const t=n.util.createBuffer(e.toString("binary")),i=n.asn1.fromDer(t);r=n.pkcs7.messageFromAsn1(i)}catch(e){throw o(new Error("Invalid CMS: "+e.message),"ERR_INVALID_CMS")}const i=r.recipients.filter(e=>e.issuer.find(e=>"O"===e.shortName&&"ipfs"===e.value)).filter(e=>e.issuer.find(e=>"CN"===e.shortName)).map(e=>({recipient:e,keyId:e.issuer.find(e=>"CN"===e.shortName).value})),a=await s(i,async e=>{try{if(await this.keychain.findKeyById(e.keyId))return!0}catch(e){return!1}return!1});if(!a){const e=i.map(e=>e.keyId);throw o(new Error("Decryption needs one of the key(s): "+e.join(", ")),"ERR_MISSING_KEYS",{missingKeys:e})}const c=await this.keychain.findKeyById(a.keyId),u=await this.keychain._getPrivateKey(c.name),h=n.pki.decryptRsaPrivateKey(u,this.keychain._());return r.decrypt(a.recipient,h),t.from(r.content.getBytes(),"binary")}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/pkcs7.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./aes */145),r(/*! ./asn1 */107),r(/*! ./des */213),r(/*! ./oids */108),r(/*! ./pem */214),r(/*! ./pkcs7asn1 */750),r(/*! ./random */83),r(/*! ./util */20),r(/*! ./x509 */375);var i=n.asn1,s=e.exports=n.pkcs7=n.pkcs7||{};function o(e){var t={},r=[];if(!i.validate(e,s.asn1.recipientInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=r,o}return{version:t.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(t.issuer),serialNumber:n.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:i.derToOid(t.encAlgorithm),parameter:t.encParameter.value,content:t.encKey}}}function a(e){for(var t,r=[],s=0;s<e.length;++s)r.push((t=e[s],i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}function c(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]),s=0;s<e.unauthenticatedAttributes.length;++s){var o=e.unauthenticatedAttributes[s];r.values.push(u(o))}t.value.push(r)}return t}function u(e){var t;if(e.type===n.pki.oids.contentType)t=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.value).getBytes());else if(e.type===n.pki.oids.messageDigest)t=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),o=e.value;if("string"==typeof o){var a=Date.parse(o);o=isNaN(a)?13===o.length?i.utcTimeToDate(o):i.generalizedTimeToDate(o):new Date(a)}t=o>=r&&o<s?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(o)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(o))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[t])])}function h(e,t,r){var s={};if(!i.validate(t,r,s,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(i.derToOid(s.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(s.encryptedContent){var a="";if(n.util.isArray(s.encryptedContent))for(var c=0;c<s.encryptedContent.length;++c){if(s.encryptedContent[c].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=s.encryptedContent[c].value}else a=s.encryptedContent;e.encryptedContent={algorithm:i.derToOid(s.encAlgorithm),parameter:n.util.createBuffer(s.encParameter.value),content:n.util.createBuffer(a)}}if(s.content){a="";if(n.util.isArray(s.content))for(c=0;c<s.content.length;++c){if(s.content[c].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=s.content[c].value}else a=s.content;e.content=n.util.createBuffer(a)}return e.version=s.version.charCodeAt(0),e.rawCapture=s,s}function l(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:t=n.aes.createDecryptionCipher(e.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:t=n.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}s.messageFromPem=function(e){var t=n.pem.decode(e)[0];if("PKCS7"!==t.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.messageFromAsn1(o)},s.messageToPem=function(e,t){var r={type:"PKCS7",body:i.toDer(e.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:t})},s.messageFromAsn1=function(e){var t={},r=[];if(!i.validate(e,s.asn1.contentInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=r,o}var a,c=i.derToOid(t.contentType);switch(c){case n.pki.oids.envelopedData:a=s.createEnvelopedData();break;case n.pki.oids.encryptedData:a=s.createEncryptedData();break;case n.pki.oids.signedData:a=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+c+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a},s.createSignedData=function(){var e=null;return e={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(h(e,t,s.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,i=0;i<r.length;++i)e.certificates.push(n.pki.certificateFromAsn1(r[i]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],r=0;r<e.certificates.length;++r)t.push(n.pki.certificateToAsn1(e.certificates[r]));var s=[],o=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,t)),s.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,e.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var r=t.issuer,i=t.serialNumber;if(t.certificate){var s=t.certificate;"string"==typeof s&&(s=n.pki.certificateFromPem(s)),r=s.issuer.attributes,i=s.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof o&&(o=n.pki.privateKeyFromPem(o));var a=t.digestAlgorithm||n.pki.oids.sha1;switch(a){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var c=t.authenticatedAttributes||[];if(c.length>0){for(var u=!1,h=!1,l=0;l<c.length;++l){var f=c[l];if(u||f.type!==n.pki.oids.contentType){if(h||f.type!==n.pki.oids.messageDigest);else if(h=!0,u)break}else if(u=!0,h)break}if(!u||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:r,serialNumber:i,digestAlgorithm:a,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(t){var r;(t=t||{},"object"!=typeof e.content||null===e.contentInfo)&&(e.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof n.util.ByteBuffer?r=e.content.bytes():"string"==typeof e.content&&(r=n.util.encodeUtf8(e.content)),t.detached?e.detachedContent=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)]))));0!==e.signers.length&&function(t){var r;r=e.detachedContent?e.detachedContent:(r=e.contentInfo.value[1]).value[0];if(!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=i.derToOid(e.contentInfo.value[0].value),o=i.toDer(r);for(var a in o.getByte(),i.getBerValueLength(o),o=o.getBytes(),t)t[a].start().update(o);for(var h=new Date,l=0;l<e.signers.length;++l){var f=e.signers[l];if(0===f.authenticatedAttributes.length){if(s!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]),p=0;p<f.authenticatedAttributes.length;++p){var A=f.authenticatedAttributes[p];A.type===n.pki.oids.messageDigest?A.value=t[f.digestAlgorithm].digest():A.type===n.pki.oids.signingTime&&(A.value||(A.value=h)),d.value.push(u(A)),f.authenticatedAttributesAsn1.value.push(u(A))}o=i.toDer(d).getBytes(),f.md.start().update(o)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(c(e[r]));return t}(e.signers)}(function(){for(var t={},r=0;r<e.signers.length;++r){var s=e.signers[r];(o=s.digestAlgorithm)in t||(t[o]=n.md[n.pki.oids[o]].create()),0===s.authenticatedAttributes.length?s.md=t[o]:s.md=n.md[n.pki.oids[o]].create()}for(var o in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return t}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=n.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},s.createEncryptedData=function(){var e=null;return e={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){h(e,t,s.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),l(e)}}},s.createEnvelopedData=function(){var e=null;return e={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=h(e,t,s.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(o(e[r]));return t}(r.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,a(e.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,(t=e.encryptedContent,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.parameter.getBytes())]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var i=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=n.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}l(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){var i,s,o;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:i=16,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:i=24,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:i=32,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:i=24,s=8,o=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=n.util.createBuffer(n.random.getBytes(i));else if(t.length()!=i)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+i+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(s));var a=o(t);if(a.start(e.encryptedContent.parameter.copy()),a.update(e.content),!a.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=a.output}for(var c=0;c<e.recipients.length;++c){var u=e.recipients[c];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}}}},
/*!***************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/baseN.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var r={};e.exports=r;var n={};r.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var c=0,u=e[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%s,u=u/s|0;for(;u>0;)a.push(u%s),u=u/s|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}else n=function(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var o=0,a=e.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var c="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=t[s[r]];return c}(e,t);if(r){var h=new RegExp(".{1,"+r+"}","g");n=n.match(h).join("\r\n")}return n},r.decode=function(e,r){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof r)throw new TypeError('"alphabet" must be a string.');var i=n[r];if(!i){i=n[r]=[];for(var s=0;s<r.length;++s)i[r.charCodeAt(s)]=s}e=e.replace(/\s/g,"");var o=r.length,a=r.charAt(0),c=[0];for(s=0;s<e.length;s++){var u=i[e.charCodeAt(s)];if(void 0===u)return;for(var h=0,l=u;h<c.length;++h)l+=c[h]*o,c[h]=255&l,l>>=8;for(;l>0;)c.push(255&l),l>>=8}for(var f=0;e[f]===a&&f<e.length-1;++f)c.push(0);return void 0!==t?t.from(c.reverse()):new Uint8Array(c.reverse())}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/pkcs7asn1.js ***!
  \*******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./asn1 */107),r(/*! ./util */20);var i=n.asn1,s=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=s;var o={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=o;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},s.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var c={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},
/*!****************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/sha256.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./md */84),r(/*! ./util */20);var i=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){o||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var e=null,t=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var a=s.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=a[1],a[1]=a[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(s),c(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var a,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-u));for(var h=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)h+=(a=8*i.fullMessageLength[l+1])/4294967296>>>0,o.putInt32(h>>>0),h=a>>>0;o.putInt32(h);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};c(f,r,o);var d=n.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d.putInt32(f.h5),d.putInt32(f.h6),d.putInt32(f.h7),d},i};var s=null,o=!1,a=null;function c(e,t,r){for(var n,i,s,o,c,u,h,l,f,d,p,A,g,y=r.length();y>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=((n=t[c-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=t[c-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(u=e.h0,h=e.h1,l=e.h2,f=e.h3,d=e.h4,p=e.h5,A=e.h6,g=e.h7,c=0;c<64;++c)s=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),o=u&h|l&(u^h),n=g+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(A^d&(p^A))+a[c]+t[c],g=A,A=p,p=d,d=f+n>>>0,f=l,l=h,h=u,u=n+(i=s+o)>>>0;e.h0=e.h0+u|0,e.h1=e.h1+h|0,e.h2=e.h2+l|0,e.h3=e.h3+f|0,e.h4=e.h4+d|0,e.h5=e.h5+p|0,e.h6=e.h6+A|0,e.h7=e.h7+g|0,y-=64}}},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/prng.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! ./forge */12);r(/*! ./util */20);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||t.versions["node-webkit"]||(i=r(/*! crypto */215)),(e.exports=n.prng=n.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,s=new Array(32),o=0;o<32;++o)s[o]=r.create();function a(){if(t.pools[0].messageLength>=32)return c();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),c()}function c(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r==0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var i=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(i),t.generated=0}function u(e){var t=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(t=function(e){return i.getRandomValues(e)});var s=n.util.createBuffer();if(t)for(;s.length()<e;){var o=Math.max(1,Math.min(e-s.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{t(a);for(var c=0;c<a.length;++c)s.putInt32(a[c])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(s.length()<e)for(var u,h,l,f=Math.floor(65536*Math.random());s.length()<e;){h=16807*(65535&f),h+=(32767&(u=16807*(f>>16)))<<16,f=4294967295&(h=(2147483647&(h+=u>>15))+(h>>31));for(c=0;c<3;++c)l=f>>>(c<<3),l^=Math.floor(256*Math.random()),s.putByte(String.fromCharCode(255&l))}return s.getBytes(e)}return t.pools=s,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var i=t.plugin.cipher,s=t.plugin.increment,o=t.plugin.formatKey,a=t.plugin.formatSeed,u=n.util.createBuffer();t.key=null,function h(l){if(l)return r(l);if(u.length()>=e)return r(null,u.getBytes(e));t.generated>1048575&&(t.key=null);if(null===t.key)return n.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return c(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,(function(r,n){if(r)return e(r);t.collect(n),c(),e()}))}(h)}));var f=i(t.key,t.seed);t.generated+=f.length;u.putBytes(f);t.key=o(i(t.key,s(t.seed)));t.seed=a(i(t.key,t.seed));n.util.setImmediate(h)}()},t.generateSync=function(e){var r=t.plugin.cipher,i=t.plugin.increment,s=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;for(var c=n.util.createBuffer();c.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&a();var u=r(t.key,t.seed);t.generated+=u.length,c.putBytes(u),t.key=s(r(t.key,i(t.seed))),t.seed=o(r(t.key,t.seed))}return c.getBytes(e)},i?(t.seedFile=function(e,t){i.randomBytes(e,(function(e,r){if(e)return t(e);t(null,r.toString())}))},t.seedFileSync=function(e){return i.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,u(e))}catch(e){t(e)}},t.seedFileSync=u),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(e>>i&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener("message",(function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,(function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})}))}))}},t}}).call(this,r(/*! ./../../../../process/browser.js */2))},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/mgf.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./mgf1 */754),e.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/mgf1.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./util */20),n.mgf=n.mgf||{},(e.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(e){return{generate:function(t,r){for(var i=new n.util.ByteBuffer,s=Math.ceil(r/e.digestLength),o=0;o<s;o++){var a=new n.util.ByteBuffer;a.putInt32(o),e.start(),e.update(t+a.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-r),i.getBytes()}}}},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/pss.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./random */83),r(/*! ./util */20),(e.exports=n.pss=n.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,i=e.mgf,s=r.digestLength,o=e.salt||null;if("string"==typeof o&&(o=n.util.createBuffer(o)),"saltLength"in e)t=e.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");t=o.length()}if(null!==o&&o.length()!==t)throw new Error("Given salt length does not match length of given salt.");var a=e.prng||n.random,c={encode:function(e,c){var u,h,l=c-1,f=Math.ceil(l/8),d=e.digest().getBytes();if(f<s+t+2)throw new Error("Message is too long to encrypt.");h=null===o?a.getBytesSync(t):o.bytes();var p=new n.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(d),p.putBytes(h),r.start(),r.update(p.getBytes());var A=r.digest().getBytes(),g=new n.util.ByteBuffer;g.fillWithByte(0,f-t-s-2),g.putByte(1),g.putBytes(h);var y=g.getBytes(),m=f-s-1,_=i.generate(A,m),b="";for(u=0;u<m;u++)b+=String.fromCharCode(y.charCodeAt(u)^_.charCodeAt(u));var w=65280>>8*f-l&255;return(b=String.fromCharCode(b.charCodeAt(0)&~w)+b.substr(1))+A+String.fromCharCode(188)},verify:function(e,o,a){var c,u=a-1,h=Math.ceil(u/8);if(o=o.substr(-h),h<s+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(h-1))throw new Error("Encoded message does not end in 0xBC.");var l=h-s-1,f=o.substr(0,l),d=o.substr(l,s),p=65280>>8*h-u&255;if(0!=(f.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var A=i.generate(d,l),g="";for(c=0;c<l;c++)g+=String.fromCharCode(f.charCodeAt(c)^A.charCodeAt(c));g=String.fromCharCode(g.charCodeAt(0)&~p)+g.substr(1);var y=h-s-t-2;for(c=0;c<y;c++)if(0!==g.charCodeAt(c))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(y))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var m=g.substr(-t),_=new n.util.ByteBuffer;return _.fillWithByte(0,8),_.putBytes(e),_.putBytes(m),r.start(),r.update(_.getBytes()),d===r.digest().getBytes()}};return c}},
/*!***************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/pkcs1.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./util */20),r(/*! ./random */83),r(/*! ./sha1 */757);var i=e.exports=n.pkcs1=n.pkcs1||{};function s(e,t,r){r||(r=n.md.sha1.create());for(var i="",s=Math.ceil(t/r.digestLength),o=0;o<s;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(e+a),i+=r.digest().getBytes()}return i.substring(0,t)}i.encode_rsa_oaep=function(e,t,r){var i,o,a,c;"string"==typeof r?(i=r,o=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,o=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),c||(c=a);var u=Math.ceil(e.n.bitLength()/8),h=u-2*a.digestLength-2;if(t.length>h)throw(g=new Error("RSAES-OAEP input message length is too long.")).length=t.length,g.maxLength=h,g;i||(i=""),a.update(i,"raw");for(var l=a.digest(),f="",d=h-t.length,p=0;p<d;p++)f+="\0";var A=l.getBytes()+f+""+t;if(o){if(o.length!==a.digestLength){var g;throw(g=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,g.digestLength=a.digestLength,g}}else o=n.random.getBytes(a.digestLength);var y=s(o,u-a.digestLength-1,c),m=n.util.xorBytes(A,y,A.length),_=s(m,a.digestLength,c),b=n.util.xorBytes(o,_,o.length);return"\0"+b+m},i.decode_rsa_oaep=function(e,t,r){var i,o,a;"string"==typeof r?(i=r,o=arguments[3]||void 0):r&&(i=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var c=Math.ceil(e.n.bitLength()/8);if(t.length!==c)throw(m=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,m.expectedLength=c,m;if(void 0===o?o=n.md.sha1.create():o.start(),a||(a=o),c<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),o.update(i,"raw");for(var u=o.digest().getBytes(),h=t.charAt(0),l=t.substring(1,o.digestLength+1),f=t.substring(1+o.digestLength),d=s(f,o.digestLength,a),p=n.util.xorBytes(l,d,l.length),A=s(p,c-o.digestLength-1,a),g=n.util.xorBytes(f,A,f.length),y=g.substring(0,o.digestLength),m="\0"!==h,_=0;_<o.digestLength;++_)m|=u.charAt(_)!==y.charAt(_);for(var b=1,w=o.digestLength,v=o.digestLength;v<g.length;v++){var E=g.charCodeAt(v),S=1&E^1,C=b?65534:0;m|=E&C,w+=b&=S}if(m||1!==g.charCodeAt(w))throw new Error("Invalid RSAES-OAEP padding.");return g.substring(w+1)}},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/sha1.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./md */84),r(/*! ./util */20);var i=e.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){o||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),o=!0);var e=null,t=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var c=s.length;i.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=c[1],c[1]=c[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,c[0]=c[1]/4294967296>>>0;return t.putBytes(s),a(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var c,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-u));for(var h=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)h+=(c=8*i.fullMessageLength[l+1])/4294967296>>>0,o.putInt32(h>>>0),h=c>>>0;o.putInt32(h);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};a(f,r,o);var d=n.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d},i};var s=null,o=!1;function a(e,t,r){for(var n,i,s,o,a,c,u,h=r.length();h>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,c=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<20;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<32;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(s^o^a)+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<40;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(s^o^a)+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<60;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(s&o|a&(s^o))+c+2400959708+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<80;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(s^o^a)+c+3395469782+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+c|0,h-=64}}},
/*!***************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/prime.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./util */20),r(/*! ./jsbn */377),r(/*! ./random */83),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],s=new r(null);s.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,i){"function"==typeof t&&(i=t,t={});var s=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof s&&(s={name:s}),s.options=s.options||{};var o=t.prng||n.random,u={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===s.name)return function(e,t,i,s){if("workers"in i)return function(e,t,i,s){if("undefined"==typeof Worker)return a(e,t,i,s);var o=c(e,t),u=i.workers,h=i.workLoad||100,l=30*h/8,f=i.workerScript||"forge/prime.worker.js";if(-1===u)return n.util.estimateCores((function(e,t){e&&(t=2),u=t-1,d()}));function d(){u=Math.max(1,u);for(var n=[],i=0;i<u;++i)n[i]=new Worker(f);for(i=0;i<u;++i)n[i].addEventListener("message",d);var a=!1;function d(i){if(!a){0;var u=i.data;if(u.found){for(var f=0;f<n.length;++f)n[f].terminate();return a=!0,s(null,new r(u.prime,16))}o.bitLength()>e&&(o=c(e,t));var d=o.toString(16);i.target.postMessage({hex:d,workLoad:h}),o.dAddOffset(l,0)}}}d()}(e,t,i,s);return a(e,t,i,s)}(e,u,s.options,i);throw new Error("Invalid prime generation algorithm: "+s.name)}}function a(e,t,r,s){var o=c(e,t),a=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(o.bitLength());"millerRabinTests"in r&&(a=r.millerRabinTests);var u=10;"maxBlockTime"in r&&(u=r.maxBlockTime),function e(t,r,s,o,a,u,h){var l=+new Date;do{if(t.bitLength()>r&&(t=c(r,s)),t.isProbablePrime(a))return h(null,t);t.dAddOffset(i[o++%8],0)}while(u<0||+new Date-l<u);n.util.setImmediate((function(){e(t,r,s,o,a,u,h)}))}(o,e,t,0,a,u,s)}function c(e,t){var n=new r(e,t),i=e-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),o,n),n.dAddOffset(31-n.mod(s).byteValue(),0),n}}()},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/pbe.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);if(r(/*! ./aes */145),r(/*! ./asn1 */107),r(/*! ./des */213),r(/*! ./md */84),r(/*! ./oids */108),r(/*! ./pbkdf2 */760),r(/*! ./pem */214),r(/*! ./random */83),r(/*! ./rc2 */762),r(/*! ./rsa */376),r(/*! ./util */20),void 0===i)var i=n.jsbn.BigInteger;var s=n.asn1,o=n.pki=n.pki||{};e.exports=o.pbe=n.pbe=n.pbe||{};var a=o.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},h={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function l(e,t){return e.start().update(t).digest().getBytes()}function f(e){var t;if(e){if(!(t=o.oids[s.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return d(t)}function d(e){var t=n.md;switch(e){case"hmacWithSHA224":t=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(t&&e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}o.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,c,u,h=n.random.getBytesSync(r.saltSize),l=r.count,f=s.integerToDer(l);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var p,A,g;switch(r.algorithm){case"aes128":i=16,p=16,A=a["aes128-CBC"],g=n.aes.createEncryptionCipher;break;case"aes192":i=24,p=16,A=a["aes192-CBC"],g=n.aes.createEncryptionCipher;break;case"aes256":i=32,p=16,A=a["aes256-CBC"],g=n.aes.createEncryptionCipher;break;case"des":i=8,p=8,A=a.desCBC,g=n.des.createEncryptionCipher;break;default:throw(v=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,v}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),m=d(y),_=n.pkcs5.pbkdf2(t,h,l,i,m),b=n.random.getBytesSync(p);(E=g(_)).start(b),E.update(s.toDer(e)),E.finish(),u=E.output.getBytes();var w=function(e,t,r,i){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,t.getBytes())]);"hmacWithSHA1"!==i&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[i]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]));return a}(h,f,i,y);c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBKDF2).getBytes()),w]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(A).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,b)])])])}else{var v;if("3des"!==r.algorithm)throw(v=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,v;i=24;var E,S=new n.util.ByteBuffer(h);_=o.pbe.generatePkcs12Key(t,S,1,l,i),b=o.pbe.generatePkcs12Key(t,S,2,l,i);(E=n.des.createEncryptionCipher(_)).start(b),E.update(s.toDer(e)),E.finish(),u=E.output.getBytes(),c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,h),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,f.getBytes())])])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[c,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,u)])},o.decryptPrivateKeyInfo=function(e,t){var r=null,i={},a=[];if(!s.validate(e,c,i,a)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}var h=s.derToOid(i.encryptionOid),l=o.pbe.getCipher(h,i.encryptionParams,t),f=n.util.createBuffer(i.encryptedData);return l.update(f),l.finish()&&(r=s.fromDer(l.output)),r},o.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},o.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(t.body)},o.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var i=o.wrapRsaPrivateKey(o.privateKeyToAsn1(e));return i=o.encryptPrivateKeyInfo(i,t,r),o.encryptedPrivateKeyToPem(i)}var a,c,u,h;switch(r.algorithm){case"aes128":a="AES-128-CBC",u=16,c=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",u=24,c=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",u=32,c=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",u=24,c=n.random.getBytesSync(8),h=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",u=8,c=n.random.getBytesSync(8),h=n.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var f=h(n.pbe.opensslDeriveBytes(t,c.substr(0,8),u));f.start(c),f.update(s.toDer(o.privateKeyToAsn1(e))),f.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(c).toUpperCase()},body:f.output.getBytes()};return n.pem.encode(d)},o.decryptRsaPrivateKey=function(e,t){var r=null,i=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw(u=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=u,u;if(i.procType&&"ENCRYPTED"===i.procType.type){var a,c;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,c=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,c=n.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,c=n.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,c=n.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,c=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,c=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":a=8,c=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":a=16,c=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:var u;throw(u=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".')).algorithm=i.dekInfo.algorithm,u}var h=n.util.hexToBytes(i.dekInfo.parameters),l=c(n.pbe.opensslDeriveBytes(t,h.substr(0,8),a));if(l.start(h),l.update(n.util.createBuffer(i.body)),!l.finish())return r;r=l.output.getBytes()}else r=i.body;return null!==(r="ENCRYPTED PRIVATE KEY"===i.type?o.decryptPrivateKeyInfo(s.fromDer(r),t):s.fromDer(r))&&(r=o.privateKeyFromAsn1(r)),r},o.pbe.generatePkcs12Key=function(e,t,r,i,s,o){var a,c;if(null==o){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');o=n.md.sha1.create()}var u=o.digestLength,h=o.blockLength,l=new n.util.ByteBuffer,f=new n.util.ByteBuffer;if(null!=e){for(c=0;c<e.length;c++)f.putInt16(e.charCodeAt(c));f.putInt16(0)}var d=f.length(),p=t.length(),A=new n.util.ByteBuffer;A.fillWithByte(r,h);var g=h*Math.ceil(p/h),y=new n.util.ByteBuffer;for(c=0;c<g;c++)y.putByte(t.at(c%p));var m=h*Math.ceil(d/h),_=new n.util.ByteBuffer;for(c=0;c<m;c++)_.putByte(f.at(c%d));var b=y;b.putBuffer(_);for(var w=Math.ceil(s/u),v=1;v<=w;v++){var E=new n.util.ByteBuffer;E.putBytes(A.bytes()),E.putBytes(b.bytes());for(var S=0;S<i;S++)o.start(),o.update(E.getBytes()),E=o.digest();var C=new n.util.ByteBuffer;for(c=0;c<h;c++)C.putByte(E.at(c%u));var k=Math.ceil(p/h)+Math.ceil(d/h),I=new n.util.ByteBuffer;for(a=0;a<k;a++){var T=new n.util.ByteBuffer(b.getBytes(h)),R=511;for(c=C.length()-1;c>=0;c--)R>>=8,R+=C.at(c)+T.at(c),T.setAt(c,255&R);I.putBuffer(T)}b=I,l.putBuffer(E)}return l.truncate(l.length()-s),l},o.pbe.getCipher=function(e,t,r){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,r);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},o.pbe.getCipherForPBES2=function(e,t,r){var i,a={},c=[];if(!s.validate(t,u,a,c))throw(i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=c,i;if((e=s.derToOid(a.kdfOid))!==o.oids.pkcs5PBKDF2)throw(i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,i.supportedOids=["pkcs5PBKDF2"],i;if((e=s.derToOid(a.encOid))!==o.oids["aes128-CBC"]&&e!==o.oids["aes192-CBC"]&&e!==o.oids["aes256-CBC"]&&e!==o.oids["des-EDE3-CBC"]&&e!==o.oids.desCBC)throw(i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i;var h,l,d=a.kdfSalt,p=n.util.createBuffer(a.kdfIterationCount);switch(p=p.getInt(p.length()<<3),o.oids[e]){case"aes128-CBC":h=16,l=n.aes.createDecryptionCipher;break;case"aes192-CBC":h=24,l=n.aes.createDecryptionCipher;break;case"aes256-CBC":h=32,l=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":h=24,l=n.des.createDecryptionCipher;break;case"desCBC":h=8,l=n.des.createDecryptionCipher}var A=f(a.prfOid),g=n.pkcs5.pbkdf2(r,d,p,h,A),y=a.encIv,m=l(g);return m.start(y),m},o.pbe.getCipherForPKCS12PBE=function(e,t,r){var i={},a=[];if(!s.validate(t,h,i,a))throw(A=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,A;var c,u,l,d=n.util.createBuffer(i.salt),p=n.util.createBuffer(i.iterations);switch(p=p.getInt(p.length()<<3),e){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,l=n.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,l=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var A;throw(A=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,A}var g=f(i.prfOid),y=o.pbe.generatePkcs12Key(r,d,1,p,c,g);return g.start(),l(y,o.pbe.generatePkcs12Key(r,d,2,p,u,g))},o.pbe.opensslDeriveBytes=function(e,t,r,i){if(null==i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===t&&(t="");for(var s=[l(i,e+t)],o=16,a=1;o<r;++a,o+=16)s.push(l(i,s[a-1]+e+t));return s.join("").substr(0,r)}},
/*!****************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/pbkdf2.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! ./forge */12);r(/*! ./hmac */761),r(/*! ./md */84),r(/*! ./util */20);var i,s=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(i=r(/*! crypto */215)),e.exports=n.pbkdf2=s.pbkdf2=function(e,r,s,o,a,c){if("function"==typeof a&&(c=a,a=null),n.util.isNodejs&&!n.options.usePureJavaScript&&i.pbkdf2&&(null===a||"object"!=typeof a)&&(i.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),e=t.from(e,"binary"),r=t.from(r,"binary"),c?4===i.pbkdf2Sync.length?i.pbkdf2(e,r,s,o,(function(e,t){if(e)return c(e);c(null,t.toString("binary"))})):i.pbkdf2(e,r,s,o,a,(function(e,t){if(e)return c(e);c(null,t.toString("binary"))})):4===i.pbkdf2Sync.length?i.pbkdf2Sync(e,r,s,o).toString("binary"):i.pbkdf2Sync(e,r,s,o,a).toString("binary");if(null==a&&(a="sha1"),"string"==typeof a){if(!(a in n.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=n.md[a].create()}var u=a.digestLength;if(o>4294967295*u){var h=new Error("Derived key is too long.");if(c)return c(h);throw h}var l=Math.ceil(o/u),f=o-(l-1)*u,d=n.hmac.create();d.start(a,e);var p,A,g,y="";if(!c){for(var m=1;m<=l;++m){d.start(null,null),d.update(r),d.update(n.util.int32ToBytes(m)),p=g=d.digest().getBytes();for(var _=2;_<=s;++_)d.start(null,null),d.update(g),A=d.digest().getBytes(),p=n.util.xorBytes(p,A,u),g=A;y+=m<l?p:p.substr(0,f)}return y}m=1;function b(){if(m>l)return c(null,y);d.start(null,null),d.update(r),d.update(n.util.int32ToBytes(m)),p=g=d.digest().getBytes(),_=2,w()}function w(){if(_<=s)return d.start(null,null),d.update(g),A=d.digest().getBytes(),p=n.util.xorBytes(p,A,u),g=A,++_,n.util.setImmediate(w);y+=m<l?p:p.substr(0,f),++m,b()}b()}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/hmac.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./md */84),r(/*! ./util */20),(e.exports=n.hmac=n.hmac||{}).create=function(){var e=null,t=null,r=null,i=null,s={start:function(s,o){if(null!==s)if("string"==typeof s){if(!((s=s.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');t=n.md.algorithms[s].create()}else t=s;if(null===o)o=e;else{if("string"==typeof o)o=n.util.createBuffer(o);else if(n.util.isArray(o)){var a=o;o=n.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),u=o.length();for(c=0;c<u;++c){a=o.at(c);r.putByte(54^a),i.putByte(92^a)}if(u<t.blockLength)for(a=t.blockLength-u,c=0;c<a;++c)r.putByte(54),i.putByte(92);e=o,r=r.bytes(),i=i.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(i),t.update(e),t.digest()}};return s.digest=s.getMac,s}},
/*!*************************************************************************!*\
  !*** ./node_modules/libp2p-keychain/node_modules/node-forge/lib/rc2.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./forge */12);r(/*! ./util */20);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],o=function(e,t){return e<<t&65535|(65535&e)>>16-t},a=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"==typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,s=e,o=e.length(),a=t,c=Math.ceil(a/8),u=255>>(7&a);for(r=o;r<128;r++)s.putByte(i[s.at(r-1)+s.at(r-o)&255]);for(s.setAt(128-c,i[s.at(128-c)&u]),r=127-c;r>=0;r--)s.setAt(r,i[s.at(r+1)^s.at(r+c)]);return s};var c=function(e,t,r){var i,c,u,h,l=!1,f=null,d=null,p=null,A=[];for(e=n.rc2.expandKey(e,t),u=0;u<64;u++)A.push(e.getInt16Le());r?(i=function(e){for(u=0;u<4;u++)e[u]+=A[h]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),e[u]=o(e[u],s[u]),h++},c=function(e){for(u=0;u<4;u++)e[u]+=A[63&e[(u+3)%4]]}):(i=function(e){for(u=3;u>=0;u--)e[u]=a(e[u],s[u]),e[u]-=A[h]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),h--},c=function(e){for(u=3;u>=0;u--)e[u]-=A[63&e[(u+3)%4]]});var g=function(e){var t=[];for(u=0;u<4;u++){var n=f.getInt16Le();null!==p&&(r?n^=p.getInt16Le():p.putInt16Le(n)),t.push(65535&n)}h=r?0:63;for(var i=0;i<e.length;i++)for(var s=0;s<e[i][0];s++)e[i][1](t);for(u=0;u<4;u++)null!==p&&(r?p.putInt16Le(t[u]):t[u]^=p.getInt16Le()),d.putInt16Le(t[u])},y=null;return y={start:function(e,t){e&&"string"==typeof e&&(e=n.util.createBuffer(e)),l=!1,f=n.util.createBuffer(),d=t||new n.util.createBuffer,p=e,y.output=d},update:function(e){for(l||f.putBuffer(e);f.length()>=8;)g([[5,i],[1,c],[6,i],[1,c],[5,i]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,f,!r);else{var n=8===f.length()?8:8-f.length();f.fillWithByte(n,n)}if(t&&(l=!0,y.update()),!r&&(t=0===f.length()))if(e)t=e(8,d,!r);else{var i=d.length(),s=d.at(i-1);s>i?t=!1:d.truncate(s)}return t}}};n.rc2.startEncrypting=function(e,t,r){var i=n.rc2.createEncryptionCipher(e,128);return i.start(t,r),i},n.rc2.createEncryptionCipher=function(e,t){return c(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var i=n.rc2.createDecryptionCipher(e,128);return i.start(t,r),i},n.rc2.createDecryptionCipher=function(e,t){return c(e,t,!1)}},
/*!**************************************************!*\
  !*** ./node_modules/libp2p-keychain/src/util.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";r(/*! node-forge/lib/x509 */375);const n=r(/*! node-forge/lib/forge */12).pki;e.exports.certificateForKey=(e,t)=>{const r=n.setRsaPublicKey(t.n,t.e),i=n.createCertificate();i.publicKey=r,i.serialNumber="01",i.validity.notBefore=new Date,i.validity.notAfter=new Date,i.validity.notAfter.setFullYear(i.validity.notBefore.getFullYear()+10);const s=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:e.id}];return i.setSubject(s),i.setIssuer(s),i.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),i.sign(t),i},e.exports.findAsync=async function(e,t){const r=e.map(t);return e[(await Promise.all(r)).findIndex(e=>e)]}},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/no-keychain.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(){throw new Error("Key management requires '--pass ...' option")}e.exports=class{static get options(){n()}static generateOptions(){n()}createKey(){n()}listKeys(){n()}findKeyById(){n()}findKeyByName(){n()}renameKey(){n()}removeKey(){n()}exportKey(){n()}importKey(){n()}importPeer(){n()}get cms(){n()}}},
/*!********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/start.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-bitswap */766),i=r(/*! callbackify */19),s=r(/*! ../ipns */385),o=r(/*! ../ipns/routing/config */811),a=r(/*! ./libp2p */393);e.exports=e=>i(async()=>{if("stopped"!==e.state.state())throw new Error(`Not able to start from state: ${e.state.state()}`);e.log("starting"),e.state.start(),e._repo.closed&&await e._repo.open();const t=await e._repo.config.get(),r=a(e,t);await r.start(),e.libp2p=r;const i=o(e);e._ipns=new s(i,e._repo.datastore,e._peerInfo,e._keychain,e._options),e._bitswap=new n(e.libp2p,e._repo.blocks,{statsEnabled:!0}),await e._bitswap.start(),e._blockService.setExchange(e._bitswap),await e._preload.start(),await e._ipns.republisher.start(),await e._mfsPreload.start(),e.state.started(),e.emit("start")})},
/*!************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/index.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./want-manager */767),i=r(/*! ./network */780),s=r(/*! ./decision-engine */797),o=r(/*! ./notifications */799),a=r(/*! ./utils */63).logger,c=r(/*! ./stats */800),u={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},h=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"];e.exports=class{constructor(e,t,r){this._libp2p=e,this._log=a(this.peerInfo.id),this._options=Object.assign({},u,r),this._stats=new c(h,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new i(e,this,{},this._stats),this.blockstore=t,this.engine=new s(this.peerInfo.id,t,this.network,this._stats),this.wm=new n(this.peerInfo.id,this.network,this._stats),this.notifications=new o(this.peerInfo.id)}get peerInfo(){return this._libp2p.peerInfo}async _receiveMessage(e,t){try{await this.engine.messageReceived(e,t)}catch(e){this._log("failed to receive message",t)}if(0===t.blocks.size)return;const r=Array.from(t.blocks.values()),n=r.filter(e=>this.wm.wantlist.contains(e.cid)).map(e=>e.cid);this.wm.cancelWants(n),await Promise.all(r.map(async t=>{const r=n.includes(t.cid);await this._handleReceivedBlock(e,t,r)}))}async _handleReceivedBlock(e,t,r){this._log("received block");const n=await this.blockstore.has(t.cid);this._updateReceiveCounters(e.toB58String(),t,n),!n&&r&&await this.put(t)}_updateReceiveCounters(e,t,r){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",t.data.length),r&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",t.data.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e){for await(const t of this.getMany([e]))return t}async*getMany(e){let t=e.length;const r=[];let n=!1;const i=async e=>{r.push(e);const n=this.notifications.wantBlock(e);t||this.wm.wantBlocks(r);const i=await n;return this.wm.cancelWants([e]),i};for(const s of e){const o=await this.blockstore.has(s);t--,o?(t||this.wm.wantBlocks(r),yield this.blockstore.get(s)):(n||(n=!0,this.network.findAndConnect(e[0]).catch(e=>this._log.error(e))),yield i(s))}}unwant(e){Array.isArray(e)||(e=[e]),this.wm.unwantBlocks(e),e.forEach(e=>this.notifications.unwantBlock(e))}cancelWants(e){Array.isArray(e)||(e=[e]),this.wm.cancelWants(e)}async put(e){return this.putMany([e])}async putMany(e){const t=this;return this.blockstore.putMany(async function*(){for await(const r of e)await t.blockstore.has(r.cid)||(yield r,t.notifications.hasBlock(r),t.engine.receivedBlocks([r.cid]),t.network.provide(r.cid).catch(e=>{t._log.error("Failed to provide: %s",e.message)}))}())}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}start(){this.wm.start(),this.network.start(),this.engine.start()}stop(){this._stats.stop(),this.wm.stop(),this.network.stop(),this.engine.stop()}}},
/*!*************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/want-manager/index.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../types/message */146),i=r(/*! ../types/wantlist */147),s=r(/*! ../constants */216),o=r(/*! ./msg-queue */779),a=r(/*! ../utils */63).logger;e.exports=class{constructor(e,t,r){this.peers=new Map,this.wantlist=new i(r),this.network=t,this._stats=r,this._peerId=e,this._log=a(e,"want")}_addEntries(e,t,r){const i=e.map((e,r)=>new n.Entry(e,s.kMaxPriority-r,t));i.forEach(e=>{e.cancel?r?this.wantlist.removeForce(e.cid):this.wantlist.remove(e.cid):(this._log("adding to wl"),this.wantlist.add(e.cid,e.priority))});for(const e of this.peers.values())e.addEntries(i)}_startPeerHandler(e){let t=this.peers.get(e.toB58String());if(t)return void t.refcnt++;t=new o(this._peerId,e,this.network);const r=new n(!0);for(const e of this.wantlist.entries())r.addEntry(e[1].cid,e[1].priority);return t.addMessage(r),this.peers.set(e.toB58String(),t),t}_stopPeerHandler(e){const t=this.peers.get(e.toB58String());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toB58String()))}wantBlocks(e){this._addEntries(e,!1)}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){this.timer=setInterval(()=>{this._log("resend full-wantlist");const e=new n(!0);this.wantlist.forEach(t=>{e.addEntry(t.cid,t.priority)}),this.peers.forEach(t=>t.addMessage(e))},6e4)}stop(){this.peers.forEach(e=>this.disconnected(e.peerId)),clearInterval(this.timer)}}},
/*!**************************************************!*\
  !*** ./node_modules/lodash.isequalwith/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e,r){var n=200,i="__lodash_hash_undefined__",s=1,o=2,a=9007199254740991,c="[object Arguments]",u="[object Array]",h="[object Boolean]",l="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",A="[object Map]",g="[object Number]",y="[object Object]",m="[object RegExp]",_="[object Set]",b="[object String]",w="[object Symbol]",v="[object ArrayBuffer]",E="[object DataView]",S=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,k={};k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k[c]=k[u]=k[v]=k[h]=k[E]=k[l]=k[f]=k[d]=k[A]=k[g]=k[y]=k[m]=k[_]=k[b]=k["[object WeakMap]"]=!1;var I="object"==typeof e&&e&&e.Object===Object&&e,T="object"==typeof self&&self&&self.Object===Object&&self,R=I||T||Function("return this")(),N=t&&!t.nodeType&&t,B=N&&"object"==typeof r&&r&&!r.nodeType&&r,O=B&&B.exports===N&&I.process,P=function(){try{return O&&O.binding("util")}catch(e){}}(),x=P&&P.isTypedArray;function L(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function D(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function M(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function U(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var K,F,z,j=Array.prototype,H=Function.prototype,q=Object.prototype,V=R["__core-js_shared__"],G=(K=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"",W=H.toString,Q=q.hasOwnProperty,Y=q.toString,X=RegExp("^"+W.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=R.Symbol,Z=R.Uint8Array,J=q.propertyIsEnumerable,ee=j.splice,te=(F=Object.keys,z=Object,function(e){return F(z(e))}),re=Ie(R,"DataView"),ne=Ie(R,"Map"),ie=Ie(R,"Promise"),se=Ie(R,"Set"),oe=Ie(R,"WeakMap"),ae=Ie(Object,"create"),ce=Ne(re),ue=Ne(ne),he=Ne(ie),le=Ne(se),fe=Ne(oe),de=$?$.prototype:void 0,pe=de?de.valueOf:void 0;function Ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ge(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ye(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function me(e){var t=-1,r=e?e.length:0;for(this.__data__=new ye;++t<r;)this.add(e[t])}function _e(e){this.__data__=new ge(e)}function be(e,t){var r=Oe(e)||function(e){return function(e){return Me(e)&&Pe(e)}(e)&&Q.call(e,"callee")&&(!J.call(e,"callee")||Y.call(e)==c)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var s in e)!t&&!Q.call(e,s)||i&&("length"==s||Re(s,n))||r.push(s);return r}function we(e,t){for(var r=e.length;r--;)if(Be(e[r][0],t))return r;return-1}function ve(e,t,r,n,i){return e===t||(null==e||null==t||!De(e)&&!Me(t)?e!=e&&t!=t:function(e,t,r,n,i,a){var d=Oe(e),p=Oe(t),S=u,C=u;d||(S=(S=Te(e))==c?y:S);p||(C=(C=Te(t))==c?y:C);var k=S==y&&!D(e),I=C==y&&!D(t),T=S==C;if(T&&!k)return a||(a=new _e),d||Ue(e)?Ce(e,t,r,n,i,a):function(e,t,r,n,i,a,c){switch(r){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case v:return!(e.byteLength!=t.byteLength||!n(new Z(e),new Z(t)));case h:case l:case g:return Be(+e,+t);case f:return e.name==t.name&&e.message==t.message;case m:case b:return e==t+"";case A:var u=M;case _:var d=a&o;if(u||(u=U),e.size!=t.size&&!d)return!1;var p=c.get(e);if(p)return p==t;a|=s,c.set(e,t);var y=Ce(u(e),u(t),n,i,a,c);return c.delete(e),y;case w:if(pe)return pe.call(e)==pe.call(t)}return!1}(e,t,S,r,n,i,a);if(!(i&o)){var R=k&&Q.call(e,"__wrapped__"),N=I&&Q.call(t,"__wrapped__");if(R||N){var B=R?e.value():e,O=N?t.value():t;return a||(a=new _e),r(B,O,n,i,a)}}if(!T)return!1;return a||(a=new _e),function(e,t,r,n,i,s){var a=i&o,c=Ke(e),u=c.length,h=Ke(t).length;if(u!=h&&!a)return!1;var l=u;for(;l--;){var f=c[l];if(!(a?f in t:Q.call(t,f)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var p=!0;s.set(e,t),s.set(t,e);var A=a;for(;++l<u;){f=c[l];var g=e[f],y=t[f];if(n)var m=a?n(y,g,f,t,e,s):n(g,y,f,e,t,s);if(!(void 0===m?g===y||r(g,y,n,i,s):m)){p=!1;break}A||(A="constructor"==f)}if(p&&!A){var _=e.constructor,b=t.constructor;_!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(p=!1)}return s.delete(e),s.delete(t),p}(e,t,r,n,i,a)}(e,t,ve,r,n,i))}function Ee(e){return!(!De(e)||function(e){return!!G&&G in e}(e))&&(xe(e)||D(e)?X:S).test(Ne(e))}function Se(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||q,t!==n)return te(e);var t,r,n,i=[];for(var s in Object(e))Q.call(e,s)&&"constructor"!=s&&i.push(s);return i}function Ce(e,t,r,n,i,a){var c=i&o,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var f=-1,d=!0,p=i&s?new me:void 0;for(a.set(e,t),a.set(t,e);++f<u;){var A=e[f],g=t[f];if(n)var y=c?n(g,A,f,t,e,a):n(A,g,f,e,t,a);if(void 0!==y){if(y)continue;d=!1;break}if(p){if(!L(t,(function(e,t){if(!p.has(t)&&(A===e||r(A,e,n,i,a)))return p.add(t)}))){d=!1;break}}else if(A!==g&&!r(A,g,n,i,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function ke(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Ie(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ee(r)?r:void 0}Ae.prototype.clear=function(){this.__data__=ae?ae(null):{}},Ae.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ae.prototype.get=function(e){var t=this.__data__;if(ae){var r=t[e];return r===i?void 0:r}return Q.call(t,e)?t[e]:void 0},Ae.prototype.has=function(e){var t=this.__data__;return ae?void 0!==t[e]:Q.call(t,e)},Ae.prototype.set=function(e,t){return this.__data__[e]=ae&&void 0===t?i:t,this},ge.prototype.clear=function(){this.__data__=[]},ge.prototype.delete=function(e){var t=this.__data__,r=we(t,e);return!(r<0)&&(r==t.length-1?t.pop():ee.call(t,r,1),!0)},ge.prototype.get=function(e){var t=this.__data__,r=we(t,e);return r<0?void 0:t[r][1]},ge.prototype.has=function(e){return we(this.__data__,e)>-1},ge.prototype.set=function(e,t){var r=this.__data__,n=we(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},ye.prototype.clear=function(){this.__data__={hash:new Ae,map:new(ne||ge),string:new Ae}},ye.prototype.delete=function(e){return ke(this,e).delete(e)},ye.prototype.get=function(e){return ke(this,e).get(e)},ye.prototype.has=function(e){return ke(this,e).has(e)},ye.prototype.set=function(e,t){return ke(this,e).set(e,t),this},me.prototype.add=me.prototype.push=function(e){return this.__data__.set(e,i),this},me.prototype.has=function(e){return this.__data__.has(e)},_e.prototype.clear=function(){this.__data__=new ge},_e.prototype.delete=function(e){return this.__data__.delete(e)},_e.prototype.get=function(e){return this.__data__.get(e)},_e.prototype.has=function(e){return this.__data__.has(e)},_e.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ge){var i=r.__data__;if(!ne||i.length<n-1)return i.push([e,t]),this;r=this.__data__=new ye(i)}return r.set(e,t),this};var Te=function(e){return Y.call(e)};function Re(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||C.test(e))&&e>-1&&e%1==0&&e<t}function Ne(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Be(e,t){return e===t||e!=e&&t!=t}(re&&Te(new re(new ArrayBuffer(1)))!=E||ne&&Te(new ne)!=A||ie&&"[object Promise]"!=Te(ie.resolve())||se&&Te(new se)!=_||oe&&"[object WeakMap]"!=Te(new oe))&&(Te=function(e){var t=Y.call(e),r=t==y?e.constructor:void 0,n=r?Ne(r):void 0;if(n)switch(n){case ce:return E;case ue:return A;case he:return"[object Promise]";case le:return _;case fe:return"[object WeakMap]"}return t});var Oe=Array.isArray;function Pe(e){return null!=e&&Le(e.length)&&!xe(e)}function xe(e){var t=De(e)?Y.call(e):"";return t==d||t==p}function Le(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function De(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Me(e){return!!e&&"object"==typeof e}var Ue=x?function(e){return function(t){return e(t)}}(x):function(e){return Me(e)&&Le(e.length)&&!!k[Y.call(e)]};function Ke(e){return Pe(e)?be(e):Se(e)}r.exports=function(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?ve(e,t,r):!!n}}).call(this,r(/*! ./../webpack/buildin/global.js */10),r(/*! ./../webpack/buildin/module.js */136)(e))},
/*!**************************************************!*\
  !*** ./node_modules/varint-decoder/src/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! varint */23);e.exports=e=>{if(!t.isBuffer(e))throw new Error("arg needs to be a buffer");let r=[];for(;e.length>0;){const t=n.decode(e);r.push(t),e=e.slice(n.decode.bytes)}return r}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/node_modules/multihashing-async/src/index.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! err-code */771),s=r(/*! multihashes */13),o=r(/*! ./crypto */772);async function a(e,t,r){const n=await a.digest(e,t,r);return s.encode(n,t,r)}a.Buffer=n,a.multihash=s,a.digest=async(e,t,r)=>{const n=a.createHash(t),i=await n(e);return r?i.slice(0,r):i},a.createHash=function(e){if(!e)throw i(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=s.coerceCode(e),!a.functions[e])throw i(new Error(`multihash function '${e}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return a.functions[e]},a.functions={0:o.identity,17:o.sha1,18:o.sha2256,19:o.sha2512,20:o.sha3512,21:o.sha3384,22:o.sha3256,23:o.sha3224,24:o.shake128,25:o.shake256,26:o.keccak224,27:o.keccak256,28:o.keccak384,29:o.keccak512,34:o.murmur3128,35:o.murmur332,86:o.dblSha2256},o.addBlake(a.functions),a.validate=async(e,t)=>{const r=await a(e,s.decode(t).name);return 0===n.compare(t,r)},e.exports=a},
/*!******************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/node_modules/err-code/index.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?r=t:null!=t&&(e.code=t),r)for(n in r)e[n]=r[n];return e}},
/*!*********************************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/node_modules/multihashing-async/src/crypto.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! js-sha3 */49),s=r(/*! murmurhash3js-revisited */133),o=r(/*! ./sha */773),{fromNumberTo32BitBuf:a}=r(/*! ./utils */774),c=e=>async t=>{switch(e){case"sha3-224":return n.from(i.sha3_224.arrayBuffer(t));case"sha3-256":return n.from(i.sha3_256.arrayBuffer(t));case"sha3-384":return n.from(i.sha3_384.arrayBuffer(t));case"sha3-512":return n.from(i.sha3_512.arrayBuffer(t));case"shake-128":return n.from(i.shake128.create(128).update(t).arrayBuffer());case"shake-256":return n.from(i.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return n.from(i.keccak224.arrayBuffer(t));case"keccak-256":return n.from(i.keccak256.arrayBuffer(t));case"keccak-384":return n.from(i.keccak384.arrayBuffer(t));case"keccak-512":return n.from(i.keccak512.arrayBuffer(t));case"murmur3-128":return n.from(s.x64.hash128(t),"hex");case"murmur3-32":return a(s.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};e.exports={identity:e=>n.from(e),sha1:o("sha1"),sha2256:o("sha2-256"),sha2512:o("sha2-512"),dblSha2256:o("dbl-sha2-256"),sha3224:c("sha3-224"),sha3256:c("sha3-256"),sha3384:c("sha3-384"),sha3512:c("sha3-512"),shake128:c("shake-128"),shake256:c("shake-256"),keccak224:c("keccak-224"),keccak256:c("keccak-256"),keccak384:c("keccak-384"),keccak512:c("keccak-512"),murmur3128:c("murmur3-128"),murmur332:c("murmur3-32"),addBlake:r(/*! ./blake */775)}},
/*!**************************************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/node_modules/multihashing-async/src/sha.browser.js ***!
  \**************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=self.crypto||self.msCrypto;e.exports=e=>{if("undefined"==typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return async t=>{switch(e){case"sha1":return n.from(await i.subtle.digest({name:"SHA-1"},t));case"sha2-256":return n.from(await i.subtle.digest({name:"SHA-256"},t));case"sha2-512":return n.from(await i.subtle.digest({name:"SHA-512"},t));case"dbl-sha2-256":{const e=await i.subtle.digest({name:"SHA-256"},t);return n.from(await i.subtle.digest({name:"SHA-256"},e))}default:throw new Error(`${e} is not a supported algorithm`)}}}},
/*!********************************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/node_modules/multihashing-async/src/utils.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0);e.exports={fromNumberTo32BitBuf:e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return n.from(t)}}},
/*!********************************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/node_modules/multihashing-async/src/blake.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! blakejs */50),s={init:i.blake2bInit,update:i.blake2bUpdate,digest:i.blake2bFinal},o={init:i.blake2sInit,update:i.blake2sUpdate,digest:i.blake2sFinal},a=(e,t)=>async r=>{const i=t.init(e,null);return t.update(i,r),n.from(t.digest(i))};e.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}},
/*!**********************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/types/message/message.proto.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="\n  message Message {\n    message Wantlist {\n      message Entry {\n        // changed from string to bytes, it makes a difference in JavaScript\n        optional bytes block = 1;      // the block cid (cidV0 in bitswap 1.0.0, cidV1 in bitswap 1.1.0)\n        optional int32 priority = 2;    // the priority (normalized). default to 1\n        optional bool cancel = 3;       // whether this revokes an entry\n      }\n\n      repeated Entry entries = 1;       // a list of wantlist entries\n      optional bool full = 2;           // whether this is the full wantlist. default to false\n    }\n\n    message Block {\n      optional bytes prefix = 1;        // CID prefix (cid version, multicodec and multihash prefix (type + length)\n      optional bytes data = 2;\n    }\n\n    optional Wantlist wantlist = 1;\n    repeated bytes blocks = 2;          // used to send Blocks in bitswap 1.0.0\n    repeated Block payload = 3;         // used to send Blocks in bitswap 1.1.0\n  }\n"},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/types/message/entry.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../wantlist */147).Entry;e.exports=class{constructor(e,t,r){this.entry=new n(e,t),this.cancel=Boolean(r)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toString("base58btc")} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.entry.equals(e.entry)}}},
/*!***************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/types/wantlist/entry.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=class{constructor(e,t){this._refCounter=1,this.cid=e,this.priority=t||1}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toString("base58btc")}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority}}},
/*!*****************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/want-manager/msg-queue.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! just-debounce-it */379),i=r(/*! ../types/message */146),s=r(/*! ../utils */63).logger;e.exports=class{constructor(e,t,r){this.peerId=t,this.network=r,this.refcnt=1,this._entries=[],this._log=s(e,"msgqueue",t.toB58String().slice(0,8)),this.sendEntries=n(this._sendEntries.bind(this),200)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new i(!1);this._entries.forEach(t=>{t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)}),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(e){return void this._log.error("cant connect to peer %s: %s",this.peerId.toB58String(),e.message)}this._log("sending message to peer %s",this.peerId.toB58String()),this.network.sendMessage(this.peerId,e).catch(e=>{this._log.error("send error: %s",e.message)})}}},
/*!**************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/network.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-length-prefixed */30),i=r(/*! pull-stream */25),s=r(/*! callbackify */19),o=r(/*! ./types/message */146),a=r(/*! ./constants */216),c=r(/*! ./utils */63).logger,u="/ipfs/bitswap/1.0.0",h="/ipfs/bitswap/1.1.0";e.exports=class{constructor(e,t,r,n){this._log=c(e.peerInfo.id,"network"),r=r||{},this.libp2p=e,this.bitswap=t,this.b100Only=r.b100Only||!1,this._stats=n,this._running=!1}start(){this._running=!0,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this.libp2p.handle(u,this._onConnection),this.b100Only||this.libp2p.handle(h,this._onConnection),this.libp2p.on("peer:connect",this._onPeerConnect),this.libp2p.on("peer:disconnect",this._onPeerDisconnect),this.libp2p.peerBook.getAllArray().filter(e=>e.isConnected()).forEach(e=>this._onPeerConnect(e))}stop(){this._running=!1,this.libp2p.unhandle(u),this.b100Only||this.libp2p.unhandle(h),this.libp2p.removeListener("peer:connect",this._onPeerConnect),this.libp2p.removeListener("peer:disconnect",this._onPeerDisconnect)}_onConnection(e,t){this._running&&(this._log("incomming new bitswap connection: %s",e),i(t,n.decode(),i.asyncMap((e,t)=>s(o.deserialize)(e,t)),i.asyncMap((e,r)=>{t.getPeerInfo((t,n)=>{if(t)return r(t);s(this.bitswap._receiveMessage.bind(this.bitswap))(n.id,e,r)})}),i.onEnd(e=>{this._log("ending connection"),e&&this.bitswap._receiveError(e)})))}_onPeerConnect(e){this._running&&this.bitswap._onPeerConnected(e.id)}_onPeerDisconnect(e){this._running&&this.bitswap._onPeerDisconnected(e.id)}findProviders(e,t){return this.libp2p.contentRouting.findProviders(e,{maxTimeout:a.providerRequestTimeout,maxNumProviders:t})}async findAndConnect(e){const t=await this.findProviders(e,a.maxProvidersPerRequest);this._log("connecting to providers",t.map(e=>e.id.toB58String())),await Promise.all(t.map(e=>this.connectTo(e)))}async provide(e){await this.libp2p.contentRouting.provide(e)}async sendMessage(e,t){if(!this._running)throw new Error("network isn't running");const r=e.toB58String()?e.toB58String():e.id.toB58String();this._log("sendMessage to %s",r,t);const{conn:s,protocol:o}=await this._dialPeer(e);let a;switch(o){case u:a=t.serializeToBitswap100();break;case h:a=t.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+o)}!function(e,t,r){i(i.values([t]),n.encode(),e.conn,i.onEnd(e=>{e&&r(e)}))}(s,a,this._log),this._updateSentStats(e,t.blocks)}async connectTo(e){if(!this._running)throw new Error("network isn't running");return this.libp2p.dial(e)}async _dialPeer(e){try{return{conn:await this.libp2p.dialProtocol(e,h),protocol:h}}catch(t){return{conn:await this.libp2p.dialProtocol(e,u),protocol:u}}}_updateSentStats(e,t){const r=e.toB58String();this._stats&&(t.forEach(e=>this._stats.push(r,"dataSent",e.data.length)),this._stats.push(r,"blocksSent",t.size))}}},
/*!*********************************************************!*\
  !*** ./node_modules/pull-length-prefixed/src/encode.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! safe-buffer */6).Buffer;e.exports=function(e){e=Object.assign({fixed:!1},e||{});const t=r(/*! varint */23);let i=e.fixed?null:s(),o=0,a=!1;return r=>(c,u)=>{if(c&&(a=c),a)return u(a);r(null,(r,c)=>{if(r&&(a=r),a)return u(a);if(!a&&!n.isBuffer(c))return a=new Error("data must be a buffer"),u(a);const h=a?0:c.length;let l;if(e.fixed?(l=n.alloc(4)).writeInt32BE(h,0):(t.encode(h,i,o),o+=t.encode.bytes,l=i.slice(o-t.encode.bytes,o),i.length-o<100&&(i=s(),o=0)),a)return u(null,l);u(null,n.concat([l,c],(e.fixed?4:t.encode.bytes)+h))})}};const i=10240;function s(){return n.alloc(i)}},
/*!*********************************************************!*\
  !*** ./node_modules/pull-length-prefixed/src/decode.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! varint */23),i=r(/*! pull-reader */380),s=r(/*! safe-buffer */6).Buffer,o=r(/*! pull-pushable */64);t.decode=function(e){let t=new i,r=o(e=>{t.abort(e)});return n=>{return t(n),function n(){let i=!0,s=!1;const o=(e,t)=>{s=!0,e?(r.end(e),i=!1):(r.push(t),i||n())};for(;i;)s=!1,u(t,e,o),s||(i=!1)}(),r}},t.decodeFromReader=function(e,t,r){"function"==typeof t&&(r=t,t={});u(e,t,(function(e,t){if(e)return r(!0===e?new Error("Unexpected end of input from reader."):e);r(null,t)}))};const a=e=>!(128&e),c=4194304;function u(e,t,r){(t=Object.assign({fixed:!1,maxLength:c},t||{})).fixed?function(e,t,r){e.read(4,(n,i)=>{if(n)return r(n);const s=i.readInt32BE(0);if(s>t)return r(new Error("size longer than max permitted length of "+t+"!"));h(e,s,r)})}(e,t.maxLength,r):function(e,t,r){let i=[];0===i.length&&function o(){e.read(1,(c,u)=>{if(c)return r(c);if(i.push(u),u&&!a(u[0]))return void o();const l=n.decode(s.concat(i));if(l>t)return r(new Error("size longer than max permitted length of "+t+"!"));h(e,l,(e,t)=>e?r(e):(i=[],t.length<l?r(new Error("Message length does not match prefix specified length.")):void r(null,t)))})}()}(e,t.maxLength,r)}function h(e,t,r){e.read(t,(e,t)=>{if(e)return r(e);r(null,t)})}},
/*!*******************************************!*\
  !*** ./node_modules/pull-reader/state.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){e.exports=function(){var e=[],r=0;return{length:r,data:this,add:function(n){if(!t.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=r+=n.length,e.push(n),this},has:function(e){return null==e?r>0:r>=e},get:function(n){var i;if(null==n||n===r){r=0;var s=e;return e=[],1==s.length?s[0]:t.concat(s)}if(e.length>1&&n<=(i=e[0].length)){var o=e[0].slice(0,n);return n===i?e.shift():e[0]=e[0].slice(n,i),r-=n,o}if(n<r){for(var a=[],c=0;c+e[0].length<n;){var u=e.shift();c+=u.length,a.push(u)}return c<n&&(a.push(e[0].slice(0,n-c)),e[0]=e[0].slice(n-c,e[0].length),this.length=r-=n),t.concat(a)}throw new Error("could not get "+n+" bytes")}}}}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************************!*\
  !*** ./node_modules/pull-stream/sources/index.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={keys:r(/*! ./keys */785),once:r(/*! ./once */217),values:r(/*! ./values */55),count:r(/*! ./count */786),infinite:r(/*! ./infinite */787),empty:r(/*! ./empty */109),error:r(/*! ./error */218)}},
/*!**************************************************!*\
  !*** ./node_modules/pull-stream/sources/keys.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./values */55);e.exports=function(e){return n(Object.keys(e))}},
/*!***************************************************!*\
  !*** ./node_modules/pull-stream/sources/count.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e){var t=0;return e=e||1/0,function(r,n){return r?n&&n(r):t>e?n(!0):void n(null,t++)}}},
/*!******************************************************!*\
  !*** ./node_modules/pull-stream/sources/infinite.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e){return e=e||Math.random,function(t,r){return t?r&&r(t):r(null,e())}}},
/*!*************************************************!*\
  !*** ./node_modules/pull-stream/sinks/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={drain:r(/*! ./drain */110),onEnd:r(/*! ./on-end */789),log:r(/*! ./log */790),find:r(/*! ./find */791),reduce:r(/*! ./reduce */219),collect:r(/*! ./collect */85),concat:r(/*! ./concat */792)}},
/*!**************************************************!*\
  !*** ./node_modules/pull-stream/sinks/on-end.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./drain */110);e.exports=function(e){return n(null,e)}},
/*!***********************************************!*\
  !*** ./node_modules/pull-stream/sinks/log.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./drain */110);e.exports=function(e){return n((function(e){console.log(e)}),e)}},
/*!************************************************!*\
  !*** ./node_modules/pull-stream/sinks/find.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(e){return e}var i=r(/*! ../util/prop */111),s=r(/*! ./drain */110);e.exports=function(e,t){var r=!1;return t?e=i(e)||n:(t=e,e=n),s((function(n){if(e(n))return r=!0,t(null,n),!1}),(function(e){r||t(!0===e?null:e,null)}))}},
/*!**************************************************!*\
  !*** ./node_modules/pull-stream/sinks/concat.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./reduce */219);e.exports=function(e){return n((function(e,t){return e+t}),"",e)}},
/*!****************************************************!*\
  !*** ./node_modules/pull-stream/throughs/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={map:r(/*! ./map */65),asyncMap:r(/*! ./async-map */220),filter:r(/*! ./filter */148),filterNot:r(/*! ./filter-not */794),through:r(/*! ./through */221),take:r(/*! ./take */222),unique:r(/*! ./unique */383),nonUnique:r(/*! ./non-unique */795),flatten:r(/*! ./flatten */796)}},
/*!*********************************************************!*\
  !*** ./node_modules/pull-stream/throughs/filter-not.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ../util/tester */382),i=r(/*! ./filter */148);e.exports=function(e){return e=n(e),i((function(t){return!e(t)}))}},
/*!*********************************************************!*\
  !*** ./node_modules/pull-stream/throughs/non-unique.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./unique */383);e.exports=function(e){return n(e,!0)}},
/*!******************************************************!*\
  !*** ./node_modules/pull-stream/throughs/flatten.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ../sources/values */55),i=r(/*! ../sources/once */217);e.exports=function(){return function(e){var t;return function(r,s){function o(){t(null,(function(t,r){!0===t?a():t?e(!0,(function(e){s(t)})):s(null,r)}))}function a(){t=null,e(null,(function(e,r){if(e)return s(e);Array.isArray(r)||r&&"object"==typeof r?r=n(r):"function"!=typeof r&&(r=i(r)),t=r,o()}))}r?t?t(r,(function(t){e(t||r,s)})):e(r,s):t?o():a()}}}},
/*!****************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/decision-engine/index.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! just-debounce-it */379),i=r(/*! ../types/message */146),s=r(/*! ../types/wantlist */147),o=r(/*! ./ledger */798),{logger:a,groupBy:c,pullAllWith:u,uniqWith:h}=r(/*! ../utils */63),l=524288;e.exports=class{constructor(e,t,r,i){this._log=a(e,"engine"),this.blockstore=t,this.network=r,this._stats=i,this.ledgerMap=new Map,this._running=!1,this._tasks=[],this._outbox=n(this._processTasks.bind(this),100)}async _sendBlocks(e,t){if(t.reduce((e,t)=>e+t.data.byteLength,0)<l)return void await this._sendSafeBlocks(e,t);let r=0,n=[],i=t.length;for(const s of t)if(i--,n.push(s),(r+=s.data.byteLength)>=l||0===i){r=0;const t=n.slice();n=[];try{await this._sendSafeBlocks(e,t)}catch(e){this._log("sendblock error: %s",e.message)}}}async _sendSafeBlocks(e,t){const r=new i(!1);t.forEach(e=>r.addBlock(e)),await this.network.sendMessage(e,r)}async _processTasks(){if(!this._running||!this._tasks.length)return;const e=this._tasks;this._tasks=[];const t=e.map(e=>e.entry).map(e=>e.cid),r=h((e,t)=>e.equals(t),t),n=c(e=>e.target.toB58String(),e),i=await Promise.all(r.map(e=>this.blockstore.get(e)));await Promise.all(Object.values(n).map(async e=>{const r=e[0].target,n=t.map(e=>i.find(t=>t.cid.equals(e)));try{await this._sendBlocks(r,n)}catch(e){return void this._log.error("should never happen: ",e)}for(const e of n)this.messageSent(r,e)})),this._tasks=[]}wantlistForPeer(e){const t=e.toB58String();return this.ledgerMap.has(t)?this.ledgerMap.get(t).wantlist.sortedEntries():new Map}ledgerForPeer(e){const t=e.toB58String(),r=this.ledgerMap.get(t);return r?{peer:r.partner.toPrint(),value:r.debtRatio(),sent:r.accounting.bytesSent,recv:r.accounting.bytesRecv,exchanged:r.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map(e=>e.partner)}receivedBlocks(e){e.length&&(this.ledgerMap.forEach(t=>{e.map(e=>t.wantlistContains(e)).filter(Boolean).forEach(e=>{this._tasks.push({entry:e,target:t.partner})})}),this._outbox())}async messageReceived(e,t){const r=this._findOrCreate(e);if(t.empty)return;if(t.full&&(r.wantlist=new s),this._processBlocks(t.blocks,r),0===t.wantlist.size)return;const n=[],i=[];t.wantlist.forEach(e=>{e.cancel?(r.cancelWant(e.cid),n.push(e)):(r.wants(e.cid,e.priority),i.push(e))}),this._cancelWants(r,e,n),await this._addWants(r,e,i)}_cancelWants(e,t,r){const n=t.toB58String();this._tasks=u((e,t)=>{const r=e.target.toB58String()===n,i=e.entry.cid.equals(t.cid);return r&&i},this._tasks,r)}async _addWants(e,t,r){await Promise.all(r.map(async e=>{let r;try{r=await this.blockstore.has(e.cid)}catch(t){return void this._log.error("failed blockstore existence check for "+e.cid)}r&&this._tasks.push({entry:e.entry,target:t})})),this._outbox()}_processBlocks(e,t){const r=[];e.forEach((e,n)=>{this._log("got block (%s bytes)",e.data.length),t.receivedBytes(e.data.length),r.push(e.cid)}),this.receivedBlocks(r)}messageSent(e,t){const r=this._findOrCreate(e);r.sentBytes(t?t.data.length:0),t&&t.cid&&r.wantlist.remove(t.cid)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){}_findOrCreate(e){const t=e.toB58String();if(this.ledgerMap.has(t))return this.ledgerMap.get(t);const r=new o(e);return this.ledgerMap.set(t,r),this._stats&&this._stats.push(t,"peerCount",1),r}start(){this._running=!0}stop(){this._running=!1}}},
/*!*****************************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/decision-engine/ledger.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../types/wantlist */147);e.exports=class{constructor(e){this.partner=e,this.wantlist=new n,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}wants(e,t){this.wantlist.add(e,t)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.contains(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}},
/*!********************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/notifications.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5).EventEmitter,i=r(/*! ./constants */216),s=r(/*! ./utils */63).logger,o=e=>`unwant:${e}`,a=e=>`block:${e}`;e.exports=class extends n{constructor(e){super(),this.setMaxListeners(i.maxListeners),this._log=s(e,"notif"),this._unwantListeners={},this._blockListeners={}}hasBlock(e){const t=`block:${e.cid.toString("base58btc")}`;this._log(t),this.emit(t,e)}wantBlock(e){const t=e.toString("base58btc");return this._log(`wantBlock:${t}`),new Promise((e,r)=>{this._unwantListeners[t]=()=>{this._log(`manual unwant: ${t}`),this._cleanup(t),e()},this._blockListeners[t]=r=>{this._cleanup(t),e(r)},this.once(o(t),this._unwantListeners[t]),this.once(a(t),this._blockListeners[t])})}unwantBlock(e){const t=`unwant:${e.toString("base58btc")}`;this._log(t),this.emit(t)}_cleanup(e){this._unwantListeners[e]&&(this.removeListener(o(e),this._unwantListeners[e]),delete this._unwantListeners[e]),this._blockListeners[e]&&(this.removeListener(a(e),this._blockListeners[e]),delete this._blockListeners[e])}}},
/*!******************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/stats/index.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5),i=r(/*! ./stat */801),s={movingAverageIntervals:[6e4,3e5,9e5]};e.exports=class extends n{constructor(e,t){super();const r=Object.assign({},s,t);if("number"!=typeof r.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!=typeof r.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=e,this._options=r,this._enabled=this._options.enabled,this._global=new i(e,r),this._global.on("update",e=>this.emit("update",e)),this._peers=new Map}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(const e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){return e.toB58String&&(e=e.toB58String()),this._peers.get(e)}push(e,t,r){if(this._enabled&&(this._global.push(t,r),e)){let n=this._peers.get(e);n||(n=new i(this._initialCounters,this._options),this._peers.set(e,n)),n.push(t,r)}}disconnected(e){const t=e.toB58String(),r=this._peers.get(t);r&&(r.stop(),this._peers.delete(t))}}},
/*!*****************************************************!*\
  !*** ./node_modules/ipfs-bitswap/src/stats/stat.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5),i=r(/*! bignumber.js */48),s=r(/*! moving-average */384);e.exports=class extends n{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach(e=>{this._stats[e]=i(0),this._movingAverages[e]={},this._options.movingAverageIntervals.forEach(t=>{(this._movingAverages[e][t]=s(t)).push(this._frequencyLastTime,0)})}),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const t=e=this._queue.shift();this._applyOp(t)}this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;Object.keys(this._stats).forEach(r=>{this._updateFrequencyFor(r,t,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,t,r){const n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const i=n/t*1e3;let o=this._movingAverages[e];o||(o=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach(e=>{let t=o[e];t||(t=o[e]=s(e)),t.push(r,i)})}_applyOp(e){const t=e[0],r=e[1];if("number"!=typeof r)throw new Error("invalid increment number:",r);let n;n=Object.prototype.hasOwnProperty.call(this._stats,t)?this._stats[t]:this._stats[t]=i(0),this._stats[t]=n.plus(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}},
/*!******************************************************!*\
  !*** ./node_modules/ipfs/src/core/ipns/publisher.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! peer-id */7),{Key:i,Errors:s}=r(/*! interface-datastore */14),o=r(/*! err-code */22),a=r(/*! promisify-es6 */9),c=r(/*! debug */1),u=c("ipfs:ipns:publisher");u.error=c("ipfs:ipns:publisher:error");const h=r(/*! ipns */112),l=s.notFoundError().code,f=36e5;class d{constructor(e,t){this._routing=e,this._datastore=t}async publishWithEOL(e,t,r){if(!e||!e.bytes)throw o(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");const i=await a(n.createFromPrivKey)(e.bytes),s=await this._updateOrCreateRecord(e,t,r,i);return this._putRecordToRouting(s,i)}async publish(e,t){return this.publishWithEOL(e,t,f)}async _putRecordToRouting(e,t){if(!n.isPeerId(t)){const e="peerId received is not valid";throw u.error(e),o(new Error(e),"ERR_INVALID_PEER_ID")}const r=t._pubKey,i=await h.embedPublicKey(r,e),s=h.getIdKeys(t.toBytes());return await this._publishEntry(s.routingKey,i||e,t),await this._publishPublicKey(s.routingPubKey,r),i||e}async _publishEntry(e,t){if(!i.isKey(e)){const e="datastore key does not have a valid format";throw u.error(e),o(new Error(e),"ERR_INVALID_DATASTORE_KEY")}let r;try{r=h.marshal(t)}catch(e){throw u.error(e),e}try{const t=await this._routing.put(e.toBuffer(),r);return u(`ipns record for ${e.toString("base64")} was stored in the routing`),t}catch(t){const r=`ipns record for ${e.toString("base64")} could not be stored in the routing`;throw u.error(r),u.error(t),o(new Error(r),"ERR_PUTTING_TO_ROUTING")}}async _publishPublicKey(e,t){if(!i.isKey(e)){const e="datastore key does not have a valid format";throw u.error(e),o(new Error(e),"ERR_INVALID_DATASTORE_KEY")}if(!t||!t.bytes){const e="one or more of the provided parameters are not defined";throw u.error(e),o(new Error(e),"ERR_UNDEFINED_PARAMETER")}try{const r=await this._routing.put(e.toBuffer(),t.bytes);return u(`public key for ${e.toString("base64")} was stored in the routing`),r}catch(t){const r=`public key for ${e.toString("base64")} could not be stored in the routing`;throw u.error(r),u.error(t),o(new Error(r),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(e,t){if(!n.isPeerId(e)){const e="peerId received is not valid";throw u.error(e),o(new Error(e),"ERR_INVALID_PEER_ID")}const r=!1!==(t=t||{}).checkRouting;try{const t=await this._datastore.get(h.getLocalKey(e.id));return this._unmarshalData(t)}catch(t){if(t.code!==l){const t=`unexpected error getting the ipns record ${e.id} from datastore`;throw u.error(t),o(new Error(t),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!r)throw o(t);try{const t=h.getIdKeys(e.toBytes()),r=await this._routing.get(t.routingKey.toBuffer());return this._unmarshalData(r)}catch(e){throw u.error(e),e}}}_unmarshalData(e){try{return h.unmarshal(e)}catch(e){throw o(e,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(e,t,r,i){if(!n.isPeerId(i)){const e="peerId received is not valid";throw u.error(e),o(new Error(e),"ERR_INVALID_PEER_ID")}const s={checkRouting:!0};let a;try{a=await this._getPublished(i,s)}catch(e){if(e.code!==l){const e=`unexpected error when determining the last published IPNS record for ${i.id}`;throw u.error(e),o(new Error(e),"ERR_DETERMINING_PUBLISHED_RECORD")}}let c,f=0;a&&void 0!==a.sequence&&(f=a.value.toString()!==t?a.sequence+1:a.sequence);try{c=await h.create(e,t,f,r)}catch(e){const r=`ipns record for ${t} could not be created`;throw u.error(e),o(new Error(r),"ERR_CREATING_IPNS_RECORD")}try{const e=h.marshal(c);return await this._datastore.put(h.getLocalKey(i.id),e),u(`ipns record for ${t} was stored in the datastore`),c}catch(e){const r=`ipns record for ${t} could not be stored in the datastore`;throw u.error(r),o(new Error(r),"ERR_STORING_IN_DATASTORE")}}}d.defaultRecordLifetime=f,e.exports=d},
/*!*********************************************!*\
  !*** ./node_modules/base32-encode/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){var n,i;switch(r=r||{},t){case"RFC3548":case"RFC4648":n="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",i=!0;break;case"RFC4648-HEX":n="0123456789ABCDEFGHIJKLMNOPQRSTUV",i=!0;break;case"Crockford":n="0123456789ABCDEFGHJKMNPQRSTVWXYZ",i=!1;break;default:throw new Error("Unknown base32 variant: "+t)}for(var s=void 0!==r.padding?r.padding:i,o=e.byteLength,a=new Uint8Array(e),c=0,u=0,h="",l=0;l<o;l++)for(u=u<<8|a[l],c+=8;c>=5;)h+=n[u>>>c-5&31],c-=5;if(c>0&&(h+=n[u<<5-c&31]),s)for(;h.length%8!=0;)h+="=";return h}},
/*!**************************************************!*\
  !*** ./node_modules/timestamp-nano/timestamp.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){
/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */
!function(){e.exports=m;var t=86400,r=3200,n=146097*r/400,i=t*n,s=1e3*i,o=1e11*t,a=16777216,c=4294967296,u=1e6,h=1e9,l="000000000",f=Math.trunc||function(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!=1/0)?-0:t},d=m.prototype;m.fromDate=function(e){return new m(+e)},m.fromInt64BE=E(0,1,2,3,0,4),m.fromInt64LE=E(3,2,1,0,4,0),m.fromString=function(e){var t,r=new m,n=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){var t=+e,n=1970+(t-1970)%400;return r.year=t-n,n})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,r,n){return r<0&&(n*=-1),t=6e4*(60*+r+ +n),""})).replace(/\.\d+$/,(function(e){return r.nano=+(e+l).substr(1,9),""})).split(/\D+/);n.length>1?n[1]--:n[1]=0;if(r.time=t=Date.UTC.apply(Date,n)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return _(r)},m.fromTimeT=function(e){return w(e,0)},d.year=0,d.time=0,d.nano=0,d.addNano=function(e){return this.nano+=+e||0,this},d.getNano=function(){var e=_(this);return(e.time%1e3*u+ +e.nano+h)%h},d.getTimeT=function(){var e=_(this),i=Math.floor(e.time/1e3),s=e.year;s&&(i+=s*n*t/r);return i},d.getYear=function(){return this.toDate().getUTCFullYear()+this.year},d.toDate=function(){return b(_(this).time)},d.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},d.toString=function(e){var t=this,r=t.toDate(),n={H:function(){return C(r.getUTCHours())},L:function(){return k(r.getUTCMilliseconds(),3)},M:function(){return C(r.getUTCMinutes())},N:function(){return k(t.getNano(),9)},S:function(){return C(r.getUTCSeconds())},Y:function(){var e=t.getYear();return e>999999?"+"+e:e>9999?"+"+k(e,6):e>=0?k(e,4):e>=-999999?"-"+k(-e,6):e},a:function(){return g[r.getUTCDay()]},b:function(){return A[r.getUTCMonth()]},d:function(){return C(r.getUTCDate())},e:function(){return e=r.getUTCDate(),(e>9?"":" ")+(0|e);var e},m:function(){return C(r.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var r=t[1],i=y[r],s=n[r];return i?e(i):s?s():t}))}(e||p)},d.writeInt64BE=v(0,1,2,3,0,4),d.writeInt64LE=v(3,2,1,0,4,0);var p="%Y-%m-%dT%H:%M:%S.%NZ",A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return m;function m(e,t,r){var n=this;if(!(n instanceof m))return new m(e,t,r);n.time=+e||0,n.nano=+t||0,n.year=+r||0,_(n)}function _(e){var t,n,i=e.year,a=e.time,c=e.nano;if(c<0||u<=c){var h=Math.floor(c/u);c-=h*u,a+=h,t=1}var l=i%r;if(a<-o||o<a||l){(n=f(a/s))&&(i+=n*r,a-=n*s);var d=b(a);d.setUTCFullYear(l+d.getUTCFullYear());var p=(a=+d)+(n=f((i-=l)/r))*s;n&&-o<=p&&p<=o&&(i-=n*r,a=p),t=1}return t&&(e.year=i,e.time=a,e.nano=c),e}function b(e){var t=new Date(0);return t.setTime(e),t}function w(e,t){t|=0,e=+e||0;var n=f((t*=c)/i)+f(e/i),s=t%i+e%i,o=f(s/i);return o&&(n+=o,s-=o*i),new m(1e3*s,0,n*r)}function v(e,i,s,o,a,u){return function(e,i){var s=_(this);e||(e=new Array(8));S(e,i|=0);var o=Math.floor(s.time/1e3),l=s.year*(n*t/r),d=f(l/c)+f(o/c),p=l%c+o%c,A=Math.floor(p/c);A&&(d+=A,p-=A*c);return h(e,i+a,d),h(e,i+u,p),e};function h(t,r,n){t[r+e]=n>>24&255,t[r+i]=n>>16&255,t[r+s]=n>>8&255,t[r+o]=255&n}}function E(e,t,r,n,i,s){return function(e,t){S(e,t|=0);var r=o(e,t+i);return w(o(e,t+s),r)};function o(i,s){return i[s+e]*a+(i[s+t]<<16|i[s+r]<<8|i[s+n])}}function S(e,t){var r=e&&e.length;if(null==r)throw new TypeError("Invalid Buffer");if(r<t+8)throw new RangeError("Out of range")}function C(e){return(e>9?"":"0")+(0|e)}function k(e,t){return(l+(0|e)).substr(-t)}}()},
/*!**********************************************************!*\
  !*** ./node_modules/ipns/node_modules/err-code/index.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?r=t:null!=t&&(e.code=t),r)for(n in r)e[n]=r[n];return e}},
/*!************************************************!*\
  !*** ./node_modules/ipns/src/pb/ipns.proto.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! protons */28);e.exports=n('\nmessage IpnsEntry {\n  enum ValidityType {\n\t\tEOL = 0; // setting an EOL says "this record is valid until..."\n\t}\n\n  required bytes value = 1;\n\trequired bytes signature = 2;\n\n\toptional ValidityType validityType = 3;\n\toptional bytes validity = 4;\n\n\toptional uint64 sequence = 5;\n\n\toptional uint64 ttl = 6;\n\n\t// in order for nodes to properly validate a record upon receipt, they need the public\n\t// key associated with it. For old RSA keys, its easiest if we just send this as part of\n\t// the record itself. For newer ed25519 keys, the public key can be embedded in the\n\t// peerID, making this field unnecessary.\n\toptional bytes pubKey = 7;\n}\n').IpnsEntry},
/*!****************************************!*\
  !*** ./node_modules/ipns/src/utils.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports.toRFC3339=e=>{return`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}T${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}:${String(e.getUTCSeconds()).padStart(2,"0")}.${1e3*e.getUTCMilliseconds()*1e3}Z`},e.exports.parseRFC3339=e=>{const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(!r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,u))}},
/*!*****************************************!*\
  !*** ./node_modules/ipns/src/errors.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.ERR_IPNS_EXPIRED_RECORD="ERR_IPNS_EXPIRED_RECORD",t.ERR_UNRECOGNIZED_VALIDITY="ERR_UNRECOGNIZED_VALIDITY",t.ERR_SIGNATURE_CREATION="ERR_SIGNATURE_CREATION",t.ERR_SIGNATURE_VERIFICATION="ERR_SIGNATURE_VERIFICATION",t.ERR_UNRECOGNIZED_FORMAT="ERR_UNRECOGNIZED_FORMAT",t.ERR_PEER_ID_FROM_PUBLIC_KEY="ERR_PEER_ID_FROM_PUBLIC_KEY",t.ERR_PUBLIC_KEY_FROM_ID="ERR_PUBLIC_KEY_FROM_ID",t.ERR_UNDEFINED_PARAMETER="ERR_UNDEFINED_PARAMETER"},
/*!********************************************************!*\
  !*** ./node_modules/ipfs/src/core/ipns/republisher.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ipns */112),i=r(/*! libp2p-crypto */36),s=r(/*! peer-id */7),o=r(/*! err-code */22),a=r(/*! promisify-es6 */9),c=r(/*! debug */1),u=c("ipfs:ipns:republisher");u.error=c("ipfs:ipns:republisher:error");const h=6e4,l=60*h,f=4*l,d=24*l;e.exports=class{constructor(e,t,r,n,i){this._publisher=e,this._datastore=t,this._peerInfo=r,this._keychain=n,this._options=i,this._republishHandle=null}start(){if(this._republishHandle)throw o(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");const e={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:t=>{e._timeoutId=setTimeout(async()=>{e._timeoutId=null;try{e._inflightTask=e._task(),await e._inflightTask,e._task&&e.runPeriodically(t)}catch(e){u.error(e)}},t())},cancel:async()=>{clearTimeout(e._timeoutId),e._task=null,await e._inflightTask}},{privKey:t}=this._peerInfo.id,{pass:r}=this._options;let n=!0;e._task=async()=>(await this._republishEntries(t,r),f),e.runPeriodically(()=>n?(n=!1,h):f),this._republishHandle=e}async stop(){const e=this._republishHandle;if(!e)throw o(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await e.cancel()}async _republishEntries(e,t){try{await this._republishEntry(e)}catch(e){const t="cannot republish entry for the node's private key";return void u.error(t)}if(t)try{const e=await this._keychain.listKeys();for(const r in e){const e=await this._keychain.exportKey(r.name,t),n=await i.keys.import(e,t);await this._republishEntry(n)}}catch(e){u.error(e)}}async _republishEntry(e){if(!e||!e.bytes)throw o(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");try{const t=await a(s.createFromPrivKey)(e.bytes),r=await this._getPreviousValue(t);await this._publisher.publishWithEOL(e,r,d)}catch(e){if("ERR_NO_ENTRY_FOUND"===e.code)return;throw e}}async _getPreviousValue(e){if(!s.isPeerId(e))throw o(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{const r=await this._datastore.get(n.getLocalKey(e.id));if(!t.isBuffer(r))throw o(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{return n.unmarshal(r).value}catch(e){throw u.error(e),o(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(t){if(t&&t.notFound)throw o(new Error(`no previous entry for record with id: ${e.id}`),"ERR_NO_ENTRY_FOUND");throw t}}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*****************************************************!*\
  !*** ./node_modules/ipfs/src/core/ipns/resolver.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipns */112),i=r(/*! libp2p-crypto */36),s=r(/*! peer-id */7),o=r(/*! err-code */22),a=r(/*! debug */1),c=a("ipfs:ipns:resolver");c.error=a("ipfs:ipns:resolver:error");const{Errors:u}=r(/*! interface-datastore */14),h=u.notFoundError().code,l=32;e.exports=class{constructor(e){this._routing=e}async resolve(e,t){if(t=t||{},"string"!=typeof e)throw o(new Error("invalid name"),"ERR_INVALID_NAME");const r=(t=t||{}).recursive&&"true"===t.recursive.toString(),n=e.split("/");if(3!==n.length||""!==n[0])throw o(new Error("invalid name"),"ERR_INVALID_NAME");const i=n[2];let s;r&&(s=l);const a=await this.resolver(i,s);return c(`${e} was locally resolved correctly`),a}async resolver(e,t){if(0===t){const e=`could not resolve name (recursion limit of ${l} exceeded)`;throw c.error(e),o(new Error(e),"ERR_RESOLVE_RECURSION_LIMIT")}const r=await this._resolveName(e),n=r.split("/");return"ipfs"!==n[1]&&t?this.resolver(n[2],t-1):r}async _resolveName(e){const t=s.createFromB58String(e),{routingKey:r}=n.getIdKeys(t.toBytes());let a,u,l;try{a=await this._routing.get(r.toBuffer())}catch(r){if(c.error(r),r.code===h)throw o(new Error(`record requested for ${e} was not found in the network`),"ERR_NO_RECORD_FOUND");throw o(new Error(`unexpected error getting the ipns record ${t.id}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}try{u=n.unmarshal(a)}catch(e){throw c.error(e),o(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_RECORD_RECEIVED")}if(u.pubKey)return this._validateRecord(t,u);try{l=await this._routing.get(r.toBuffer())}catch(r){if(c.error(r),r.code===h)throw o(new Error(`public key requested for ${e} was not found in the network`),"ERR_NO_RECORD_FOUND");throw o(new Error(`unexpected error getting the public key for the ipns record ${t.id}`),"ERR_UNEXPECTED_ERROR_GETTING_PUB_KEY")}try{t.pubKey=i.keys.unmarshalPublicKey(l)}catch(e){throw c.error(e),o(new Error("found public key record that we couldn't convert to a value"),"ERR_INVALID_PUB_KEY_RECEIVED")}return this._validateRecord(t,u)}async _validateRecord(e,t){const r=await n.extractPublicKey(e,t);return await n.validate(r,t),t.value.toString()}}},
/*!***********************************************************!*\
  !*** ./node_modules/ipfs/src/core/ipns/routing/config.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{TieredDatastore:n}=r(/*! datastore-core */351),i=r(/*! dlv */388),s=r(/*! ./pubsub-datastore */389),o=r(/*! ./offline-datastore */391);e.exports=e=>{const t=[];let r;if(i(e._options,"EXPERIMENTAL.ipnsPubsub",!1)){const n=e.libp2p.pubsub,i=e._repo.datastore,o=e._peerInfo.id;r=new s(n,i,o),t.push(r)}if(i(e._options,"offline")||!i(e._options,"libp2p.config.dht.enabled",!1)){const r=new o(e._repo);t.push(r)}else t.push(e.libp2p.dht);return new n(t)}},
/*!****************************************************!*\
  !*** ./node_modules/datastore-pubsub/src/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const{Key:n}=r(/*! interface-datastore */14),{encodeBase32:i,keyToTopic:s,topicToKey:o}=r(/*! ./utils */813),a=r(/*! err-code */390),c=r(/*! debug */1),u=c("datastore-pubsub:publisher");u.error=c("datastore-pubsub:publisher:error");e.exports=class{constructor(e,t,r,n,i){if(!n)throw a(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if("function"!=typeof n.validate)throw a(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if("function"!=typeof n.select)throw a(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(i&&"function"!=typeof i)throw a(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=t,this._peerId=r,this._validator=n,this._handleSubscriptionKeyFn=i,this._onMessage=this._onMessage.bind(this)}async put(e,r){if(!t.isBuffer(e)){const e="datastore key does not have a valid format";throw u.error(e),a(new Error(e),"ERR_INVALID_DATASTORE_KEY")}if(!t.isBuffer(r)){const e="received value is not a buffer";throw u.error(e),a(new Error(e),"ERR_INVALID_VALUE_RECEIVED")}const n=s(e);return u(`publish value for topic ${n}`),this._pubsub.publish(n,r)}async get(e){if(!t.isBuffer(e)){const e="datastore key does not have a valid format";throw u.error(e),a(new Error(e),"ERR_INVALID_DATASTORE_KEY")}const r=s(e),n=await this._pubsub.ls();if(n&&Array.isArray(n)&&n.indexOf(r)>-1)return this._getLocal(e);try{await this._pubsub.subscribe(r,this._onMessage)}catch(e){const t=`cannot subscribe topic ${r}`;throw u.error(t),a(new Error(t),"ERR_SUBSCRIBING_TOPIC")}return u(`subscribed values for key ${r}`),this._getLocal(e)}unsubscribe(e){const t=s(e);return this._pubsub.unsubscribe(t,this._onMessage)}async _getLocal(e){const r=new n("/"+i(e),!1);let s;try{s=await this._datastore.get(r)}catch(e){if("ERR_NOT_FOUND"!==e.code){const e=`unexpected error getting the ipns record for ${r.toString()}`;throw u.error(e),a(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}const t=`local record requested was not found for ${r.toString()}`;throw u.error(t),a(new Error(t),"ERR_NOT_FOUND")}if(!t.isBuffer(s)){const e="found record that we couldn't convert to a value";throw u.error(e),a(new Error(e),"ERR_INVALID_RECORD_RECEIVED")}return s}async _onMessage(e){const{data:t,from:r,topicIDs:n}=e;let i;try{i=o(n[0])}catch(e){return void u.error(e)}if(u(`message received for topic ${n[0]}`),r!==this._peerId.toB58String()){if(this._handleSubscriptionKeyFn){let e;try{e=await this._handleSubscriptionKeyFn(i)}catch(e){return void u.error("message discarded by the subscriptionKeyFn")}i=e}try{await this._storeIfSubscriptionIsBetter(i,t)}catch(e){u.error(e)}}else u("message discarded as it is from the same peer")}async _storeIfSubscriptionIsBetter(e,r){let n=!1;try{n=await this._isBetter(e,r)}catch(e){if("ERR_NOT_VALID_RECORD"!==e.code)throw e}n&&await this._storeRecord(t.from(e),r)}async _validateRecord(e,t){return this._validator.validate(e,t)}async _selectRecord(e,t){return 0===await this._validator.select(e,t)}async _isBetter(e,t){let r,i;try{i=await this._validateRecord(t,e)}catch(e){r=e}if(r||!i){const e="record received through pubsub is not valid";throw u.error(e),a(new Error(e),"ERR_NOT_VALID_RECORD")}const s=new n(e);let o;try{o=await this._getLocal(s.toBuffer())}catch(e){return!0}return!o.equals(t)&&this._selectRecord(t,o)}async _storeRecord(e,t){const r=new n("/"+i(e),!1);await this._datastore.put(r,t),u(`record for ${s(e)} was stored in the datastore`)}open(){const e="open function was not implemented yet";throw u.error(e),a(new Error(e),"ERR_NOT_IMPLEMENTED_YET")}has(e){const t="has function was not implemented yet";throw u.error(t),a(new Error(t),"ERR_NOT_IMPLEMENTED_YET")}delete(e){const t="delete function was not implemented yet";throw u.error(t),a(new Error(t),"ERR_NOT_IMPLEMENTED_YET")}close(){const e="close function was not implemented yet";throw u.error(e),a(new Error(e),"ERR_NOT_IMPLEMENTED_YET")}batch(){const e="batch function was not implemented yet";throw u.error(e),a(new Error(e),"ERR_NOT_IMPLEMENTED_YET")}query(){const e="query function was not implemented yet";throw u.error(e),a(new Error(e),"ERR_NOT_IMPLEMENTED_YET")}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!****************************************************!*\
  !*** ./node_modules/datastore-pubsub/src/utils.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multibase */72),i=r(/*! err-code */390);e.exports.encodeBase32=e=>n.encode("base32",e).slice(1),e.exports.keyToTopic=e=>{return`/record/${n.encode("base64url",e).slice(1).toString()}`},e.exports.topicToKey=e=>{if("/record/"!==e.substring(0,"/record/".length))throw i(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const t=`u${e.substring("/record/".length)}`;return n.decode(t)}},
/*!*************************************************!*\
  !*** ./node_modules/libp2p-record/src/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={Record:r(/*! ./record */815),validator:r(/*! ./validator */818),selection:r(/*! ./selection */822)}},
/*!**************************************************!*\
  !*** ./node_modules/libp2p-record/src/record.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! protons */28),i=r(/*! assert */24),s=n(r(/*! ./record.proto */816)).Record,o=r(/*! ./utils */817);class a{constructor(e,r,n){e&&i(t.isBuffer(e),"key must be a Buffer"),r&&i(t.isBuffer(r),"value must be a buffer"),this.key=e,this.value=r,this.timeReceived=n}serialize(){return s.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&o.toRFC3339(this.timeReceived)}}static deserialize(e){const t=s.decode(e);return a.fromDeserialized(t)}static fromDeserialized(e){let t;return e.timeReceived&&(t=o.parseRFC3339(e.timeReceived)),new a(e.key,e.value,t)}}e.exports=a}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************!*\
  !*** ./node_modules/libp2p-record/src/record.proto.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="// Record represents a dht record that contains a value\n// for a key value pair\nmessage Record {\n  // The key that references this record\n  bytes key = 1;\n\n  // The actual value this record is storing\n  bytes value = 2;\n\n  // Note: These fields were removed from the Record message\n  // hash of the authors public key\n  // optional bytes author = 3;\n  // A PKI signature for the key+value+author\n  // optional bytes signature = 4;\n\n  // Time the record was received, set by receiver\n  optional string timeReceived = 5;\n}"},
/*!*************************************************!*\
  !*** ./node_modules/libp2p-record/src/utils.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports.toRFC3339=e=>{return`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}T${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}:${String(e.getUTCSeconds()).padStart(2,"0")}.${1e3*e.getUTCMilliseconds()*1e3}Z`},e.exports.parseRFC3339=e=>{const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(!r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,u))}},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p-record/src/validator.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! buffer-split */149),i=r(/*! err-code */8);e.exports={verifyRecord:(e,r)=>{const s=r.key,o=n(s,t.from("/"));if(o.length<3)return;const a=e[o[1].toString()];if(!a){throw i("Invalid record keytype","ERR_INVALID_RECORD_KEY_TYPE")}return a.func(s,r.value)},validators:r(/*! ./validators */820)}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************************!*\
  !*** ./node_modules/buffer-split/node_modules/buffer-indexof/index.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){for(var n=0,i=-1,s=r=r||0;s<e.length;++s)if(e[s]==t[n]){if(-1==i&&(i=s),++n==t.length)break}else i=-1,n=0;return i>-1&&e.length-i<t.length?-1:i}},
/*!************************************************************!*\
  !*** ./node_modules/libp2p-record/src/validators/index.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={pk:r(/*! ./public-key */821)}},
/*!*****************************************************************!*\
  !*** ./node_modules/libp2p-record/src/validators/public-key.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! multihashing-async */98),i=r(/*! err-code */8);e.exports={func:async(e,r)=>{if(!t.isBuffer(e))throw i('"key" must be a Buffer',"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(e.length<5)throw i("invalid public key record","ERR_INVALID_RECORD_KEY_TOO_SHORT");if("/pk/"!==e.slice(0,4).toString())throw i("key was not prefixed with /pk/","ERR_INVALID_RECORD_KEY_BAD_PREFIX");const s=e.slice(4),o=await n(r,"sha2-256");if(!s.equals(o))throw i("public key does not match passed in key","ERR_INVALID_RECORD_HASH_MISMATCH")},sign:!1}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p-record/src/selection.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! buffer-split */149),i=r(/*! err-code */8);e.exports={bestRecord:(e,r,s)=>{if(0===s.length){throw i("No records given","ERR_NO_RECORDS_RECEIVED")}const o=n(r,t.from("/"));if(o.length<3){throw i("Record key does not have a selector function","ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}const a=e[o[1].toString()];if(!a){const e=`Unrecognized key prefix: ${o[1]}`;throw i(e,"ERR_UNRECOGNIZED_KEY_PREFIX")}return a(r,s)},selectors:r(/*! ./selectors */823)}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************************************!*\
  !*** ./node_modules/libp2p-record/src/selectors/index.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={pk:r(/*! ./public-key */824)}},
/*!****************************************************************!*\
  !*** ./node_modules/libp2p-record/src/selectors/public-key.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=(e,t)=>0},
/*!*****************************************************************!*\
  !*** ./node_modules/libp2p-delegated-peer-routing/src/index.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! peer-id */7),i=r(/*! ipfs-http-client/src/dht */394),s=r(/*! ipfs-http-client/src/utils/default-config */224),{default:o}=r(/*! p-queue */45),a=r(/*! debug */1),c=a("libp2p-delegated-peer-routing");c.error=a("libp2p-delegated-peer-routing:error");const u=3e4,h={protocol:"https",port:443,host:"node0.delegate.ipfs.io"},l=4;e.exports=class{constructor(e){this.api=Object.assign({},s(),h,e),this.dht=i(this.api),this._httpQueue=new o({concurrency:l}),c(`enabled DelegatedPeerRouting via ${this.api.protocol}://${this.api.host}:${this.api.port}`)}async findPeer(e,t={}){n.isPeerId(e)&&(e=e.toB58String()),c("findPeer starts: "+e),t.maxTimeout=t.maxTimeout||u;try{return await this._httpQueue.add(()=>this.dht.findPeer(e,{timeout:`${t.maxTimeout}ms`}))}catch(e){if(e.message.includes("not found"))return;throw e}finally{c("findPeer finished: "+e)}}}},
/*!****************************************************!*\
  !*** ./node_modules/ipfs-http-client/package.json ***!
  \****************************************************/
/*! exports provided: name, version, description, keywords, homepage, bugs, license, leadMaintainer, files, main, browser, repository, scripts, dependencies, devDependencies, engines, contributors, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"name":"ipfs-http-client","version":"33.1.1","description":"A client library for the IPFS HTTP API","keywords":["ipfs"],"homepage":"https://github.com/ipfs/js-ipfs-http-client","bugs":"https://github.com/ipfs/js-ipfs-http-client/issues","license":"MIT","leadMaintainer":"Alan Shaw <alan@tableflip.io>","files":["src","dist"],"main":"src/index.js","browser":{"glob":false,"fs":false,"stream":"readable-stream"},"repository":"github:ipfs/js-ipfs-http-client","scripts":{"test":"aegir test","test:node":"aegir test -t node","test:browser":"aegir test -t browser","test:webworker":"aegir test -t webworker","lint":"aegir lint","build":"aegir build","release":"aegir release ","release-minor":"aegir release --type minor ","release-major":"aegir release --type major ","coverage":"npx nyc -r html npm run test:node -- --bail"},"dependencies":{"async":"^2.6.1","bignumber.js":"^9.0.0","bl":"^3.0.0","bs58":"^4.0.1","buffer":"^5.2.1","cids":"~0.7.1","concat-stream":"github:hugomrdias/concat-stream#feat/smaller","debug":"^4.1.0","detect-node":"^2.0.4","end-of-stream":"^1.4.1","err-code":"^1.1.2","flatmap":"0.0.3","glob":"^7.1.3","ipfs-block":"~0.8.1","ipfs-utils":"~0.0.3","ipld-dag-cbor":"~0.15.0","ipld-dag-pb":"~0.17.3","ipld-raw":"^4.0.0","is-ipfs":"~0.6.1","is-pull-stream":"0.0.0","is-stream":"^2.0.0","iso-stream-http":"~0.1.2","iso-url":"~0.4.6","just-kebab-case":"^1.1.0","just-map-keys":"^1.1.0","kind-of":"^6.0.2","lru-cache":"^5.1.1","multiaddr":"^6.0.6","multibase":"~0.6.0","multicodec":"~0.5.1","multihashes":"~0.4.14","ndjson":"github:hugomrdias/ndjson#feat/readable-stream3","once":"^1.4.0","peer-id":"~0.12.2","peer-info":"~0.15.1","promisify-es6":"^1.0.3","pull-defer":"~0.2.3","pull-stream":"^3.6.9","pull-to-stream":"~0.1.1","pump":"^3.0.0","qs":"^6.5.2","readable-stream":"^3.1.1","stream-to-pull-stream":"^1.7.2","tar-stream":"^2.0.1","through2":"^3.0.1"},"devDependencies":{"aegir":"^19.0.3","browser-process-platform":"~0.1.1","chai":"^4.2.0","cross-env":"^5.2.0","dirty-chai":"^2.0.1","go-ipfs-dep":"~0.4.21","interface-ipfs-core":"^0.109.0","ipfsd-ctl":"~0.43.0","nock":"^10.0.2","stream-equal":"^1.1.1"},"engines":{"node":">=8.3.0","npm":">=3.0.0"},"contributors":["Alan Shaw <alan.shaw@protocol.ai>","Alan Shaw <alan@tableflip.io>","Alex Mingoia <talk@alexmingoia.com>","Alex Potsides <alex@achingbrain.net>","Antonio Tenorio-Fornés <antoniotenorio@ucm.es>","Bruno Barbieri <bbarbieri@delivery.com>","Clemo <flipflopsimsommer@users.noreply.github.com>","Connor Keenan <ckeenan89@gmail.com>","Danny <dannyid@protonmail.com>","David Braun <David.Braun@Toptal.com>","David Dias <daviddias.p@gmail.com>","Dietrich Ayala <autonome@gmail.com>","Diogo Silva <fsdiogo@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Dmitry Nikulin <dmitr-nikulin@mail.ru>","Donatas Stundys <donatas.stundys@necolt.com>","Fil <fil@rezo.net>","Filip Š <filip.stamcar@hotmail.com>","Francisco Baio Dias <xicombd@gmail.com>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Gar <gar+gh@danger.computer>","Gavin McDermott <gavinmcdermott@gmail.com>","Gopalakrishna Palem <KrishnaPG@users.noreply.github.com>","Greenkeeper <support@greenkeeper.io>","Haad <haadcode@users.noreply.github.com>","Harlan T Wood <harlantwood@users.noreply.github.com>","Harlan T Wood <code@harlantwood.net>","Henrique Dias <hacdias@gmail.com>","Holodisc <holodiscent@gmail.com>","Hugo Dias <hugomrdias@gmail.com>","Hugo Dias <mail@hugodias.me>","JGAntunes <j.goncalo.antunes@gmail.com>","Jacob Heun <jacobheun@gmail.com>","James Halliday <substack@gmail.com>","Jason Carver <jacarver@linkedin.com>","Jason Papakostas <vith@users.noreply.github.com>","Jeff Downie <JeffDownie@users.noreply.github.com>","Jeromy <why@ipfs.io>","Jeromy <jeromyj@gmail.com>","Joe Turgeon <arithmetric@gmail.com>","Jonathan <jkrone@vt.edu>","Juan Batiz-Benet <juan@benet.ai>","Kevin Wang <kevin@fossa.io>","Kristoffer Ström <kristoffer@rymdkoloni.se>","Marcin Rataj <lidel@lidel.org>","Matt Bell <mappum@gmail.com>","Matt Ober <matt.ober3@gmail.com>","Maxime Lathuilière <k@maxlath.eu>","Michael Bradley <michaelsbradleyjr@gmail.com>","Michael Muré <michael.mure@consensys.net>","Michael Muré <batolettre@gmail.com>","Mikeal Rogers <mikeal.rogers@gmail.com>","Mitar <mitar.git@tnode.com>","Mithgol <getgit@mithgol.ru>","Mohamed Abdulaziz <mohamed@mohamedabdulaziz.com>","Nitin Patel <31539366+niinpatel@users.noreply.github.com>","Nuno Nogueira <nunofmn@gmail.com>","Níckolas Goline <nickolas.goline@gmail.com>","Oli Evans <oli@tableflip.io>","Orie Steele <orie@ohs.io>","Pedro Teixeira <i@pgte.me>","Pete Thomas <pete@xminusone.net>","Richard Littauer <richard.littauer@gmail.com>","Richard Schneider <makaretu@gmail.com>","Roman Khafizianov <requilence@gmail.com>","SeungWon <ksw3894@gmail.com>","Stephen Whitmore <stephen.whitmore@gmail.com>","Tara Vancil <tbvanc@gmail.com>","Teri Chadbourne <terichadbourne@users.noreply.github.com>","Travis Person <travis@protocol.ai>","Travis Person <travis.person@gmail.com>","Vasco Santos <vasco.santos@ua.pt>","Vasco Santos <vasco.santos@moxy.studio>","Victor Bjelkholm <victor@typeform.com>","Volker Mische <volker.mische@gmail.com>","Zhiyuan Lin <edsgerlin@gmail.com>","dirkmc <dirkmdev@gmail.com>","dmitriy ryajov <dryajov@dmitriys-MacBook-Pro.local>","elsehow <yes@cosmopol.is>","ethers <ethereum@outlook.com>","greenkeeper[bot] <greenkeeper[bot]@users.noreply.github.com>","haad <haad@headbanggames.com>","kumavis <kumavis@users.noreply.github.com>","leekt216 <leekt216@gmail.com>","nginnever <ginneversource@gmail.com>","noah the goodra <peterpan0413@live.com>","priecint <tp-dev@seznam.cz>","samuli <samuli@nugg.ad>","shunkin <hiyoko.san.ipod@gmail.com>","victorbjelkholm <victorbjelkholm@gmail.com>","Łukasz Magiera <magik6k@users.noreply.github.com>","Łukasz Magiera <magik6k@gmail.com>"]}')},
/*!*****************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/utils/send-request.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! qs */828),i=r(/*! qs/lib/utils */151).encode,s=r(/*! detect-node */831),o=r(/*! ndjson */832),a=r(/*! pump */225),c=r(/*! once */31),{getRequest:u}=r(/*! iso-stream-http */838),h=r(/*! ./stream-to-value */226),l=r(/*! ./stream-to-json-value */843),f=r(/*! debug */1)("ipfs-http-client:request");function d(e){return e.headers["content-type"]&&0===e.headers["content-type"].indexOf("application/json")}function p(e,t){return r=>{const n=Boolean(r.headers["x-stream-output"]),i=Boolean(r.headers["x-chunked-output"]),s=d(r);if(r.req?f(r.req.method,`${r.req.getHeaders().host}${r.req.path}`,r.statusCode,r.statusMessage):f(r.url,r.statusCode,r.statusMessage),r.statusCode>=400||!r.statusCode)return function(e,t){const r=new Error(`Server responded with ${e.statusCode}`);if(r.statusCode=e.statusCode,!d(e))return h(e,(e,n)=>{n&&n.length&&(r.message=n.toString()),t(r)});l(e,(e,n)=>{if(e)return t(e);n&&(r.code=n.Code,r.message=n.Message||n.toString(),r.type=n.Type),t(r)})}(r,t);if(n&&!e)return t(null,r);if(i&&s){const e=o.parse();return a(r,e),r.on("end",()=>{let t=r.trailers["x-stream-error"];if(t){try{t=JSON.parse(t)}catch(e){t={Message:t}}e.emit("error",new Error(t.Message))}}),t(null,e)}return s?l(r,t):h(r,t)}}e.exports=e=>{const r=(r,o)=>"object"!=typeof r?o(new Error("no options were passed")):function(e,r,o){o=c(o),r.qs=r.qs||{},Array.isArray(r.path)&&(r.path=r.path.join("/")),r.args&&!Array.isArray(r.args)&&(r.args=[r.args]),r.args&&(r.qs.arg=r.args),r.progress&&(r.qs.progress=!0),r.qs.r&&(r.qs.recursive=r.qs.r,delete r.qs.r),r.qs["stream-channels"]=!0,r.stream&&(r.buffer=!1),delete r.qs.followSymlinks;const a=Object.assign({},e.headers);if(s&&(a["User-Agent"]=e["user-agent"]),r.multipart){if(!r.multipartBoundary)return o(new Error("No multipartBoundary"));a["Content-Type"]=`multipart/form-data; boundary=${r.multipartBoundary}`}const h=n.stringify(r.qs,{arrayFormat:"repeat",encoder:e=>{if(t.isBuffer(e)){let t="";for(const r of e)if(r>=65&&r<=90||r>=97&&r<=122||r>=48&&r<=57||45===r||46===r||95===r||126===r)t+=String.fromCharCode(r);else{const e=r.toString(16);t+=`%${1===e.length?`0${e}`:e}`}return t}return i(e)}}),l={hostname:e.host,path:`${e["api-path"]}${r.path}?${h}`,port:e.port,method:"POST",headers:a,protocol:`${e.protocol}:`},f=u(l,p(r.buffer,o));return f.on("error",e=>{o(e)}),r.stream||f.end(),f}(e,r,o);return r.andTransform=(e,t,n)=>r(e,(e,r)=>{if(e)return n(e);t(r,n)}),r}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************************!*\
  !*** ./node_modules/ipfs-http-client/node_modules/qs/lib/index.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./stringify */829),i=r(/*! ./parse */830),s=r(/*! ./formats */395);e.exports={formats:s,parse:i,stringify:n}},
/*!************************************************************************!*\
  !*** ./node_modules/ipfs-http-client/node_modules/qs/lib/stringify.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./utils */151),i=r(/*! ./formats */395),s=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,a(t)?t:[t])},h=Date.prototype.toISOString,l=i.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:l,formatter:i.formatters[l],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},d=function e(t,r,i,s,o,c,h,l,d,p,A,g,y){var m,_=t;if("function"==typeof h?_=h(r,_):_ instanceof Date?_=p(_):"comma"===i&&a(_)&&(_=_.join(",")),null===_){if(s)return c&&!g?c(r,f.encoder,y,"key"):r;_=""}if("string"==typeof(m=_)||"number"==typeof m||"boolean"==typeof m||"symbol"==typeof m||"bigint"==typeof m||n.isBuffer(_))return c?[A(g?r:c(r,f.encoder,y,"key"))+"="+A(c(_,f.encoder,y,"value"))]:[A(r)+"="+A(String(_))];var b,w=[];if(void 0===_)return w;if(a(h))b=h;else{var v=Object.keys(_);b=l?v.sort(l):v}for(var E=0;E<b.length;++E){var S=b[E];o&&null===_[S]||(a(_)?u(w,e(_[S],"function"==typeof i?i(r,S):r,i,s,o,c,h,l,d,p,A,g,y)):u(w,e(_[S],r+(d?"."+S:"["+S+"]"),i,s,o,c,h,l,d,p,A,g,y)))}return w};e.exports=function(e,t){var r,n=e,c=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!s.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=i.formatters[r],o=f.filter;return("function"==typeof e.filter||a(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:o,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"==typeof c.filter?n=(0,c.filter)("",n):a(c.filter)&&(r=c.filter);var h,l=[];if("object"!=typeof n||null===n)return"";h=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=o[h];r||(r=Object.keys(n)),c.sort&&r.sort(c.sort);for(var A=0;A<r.length;++A){var g=r[A];c.skipNulls&&null===n[g]||u(l,d(n[g],g,p,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var y=l.join(c.delimiter),m=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),y.length>0?m+y:""}},
/*!********************************************************************!*\
  !*** ./node_modules/ipfs-http-client/node_modules/qs/lib/parse.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./utils */151),i=Object.prototype.hasOwnProperty,s=Array.isArray,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,o=r.depth>0&&/(\[[^[\]]*])/.exec(n),a=o?n.slice(0,o.index):n,c=[];if(a){if(!r.plainObjects&&i.call(Object.prototype,a)&&!r.allowPrototypes)return;c.push(a)}for(var u=0;r.depth>0&&null!==(o=s.exec(n))&&u<r.depth;){if(u+=1,!r.plainObjects&&i.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+n.slice(o.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;i>=0;--i){var s,o=e[i];if("[]"===o&&r.parseArrays)s=[].concat(n);else{s=r.plainObjects?Object.create(null):{};var a="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(a,10);r.parseArrays||""!==a?!isNaN(c)&&o!==a&&String(c)===a&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(s=[])[c]=n:s[a]=n:s={0:n}}n=s}return n}(c,t,r)}};e.exports=function(e,t){var r=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var r,c={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=t.parameterLimit===1/0?void 0:t.parameterLimit,l=u.split(t.delimiter,h),f=-1,d=t.charset;if(t.charsetSentinel)for(r=0;r<l.length;++r)0===l[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===l[r]?d="utf-8":"utf8=%26%2310003%3B"===l[r]&&(d="iso-8859-1"),f=r,r=l.length);for(r=0;r<l.length;++r)if(r!==f){var p,A,g=l[r],y=g.indexOf("]="),m=-1===y?g.indexOf("="):y+1;-1===m?(p=t.decoder(g,o.decoder,d,"key"),A=t.strictNullHandling?null:""):(p=t.decoder(g.slice(0,m),o.decoder,d,"key"),A=t.decoder(g.slice(m+1),o.decoder,d,"value")),A&&t.interpretNumericEntities&&"iso-8859-1"===d&&(A=a(A)),A&&"string"==typeof A&&t.comma&&A.indexOf(",")>-1&&(A=A.split(",")),g.indexOf("[]=")>-1&&(A=s(A)?[A]:A),i.call(c,p)?c[p]=n.combine(c[p],A):c[p]=A}return c}(e,r):e,h=r.plainObjects?Object.create(null):{},l=Object.keys(u),f=0;f<l.length;++f){var d=l[f],p=c(d,u[d],r);h=n.merge(h,p,r)}return n.compact(h)}},
/*!*********************************************!*\
  !*** ./node_modules/detect-node/browser.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=!1},
/*!**************************************!*\
  !*** ./node_modules/ndjson/index.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! through2 */396),i=r(/*! split2 */833),s=r(/*! os */203).EOL,o=r(/*! json-stringify-safe */834);function a(e){return(e=e||{}).strict=!1!==e.strict,i((function(t){try{if(t)return JSON.parse(t)}catch(r){e.strict&&this.emit("error",new Error("Could not parse row "+t.slice(0,50)+"..."))}}),e)}e.exports=a,e.exports.serialize=e.exports.stringify=function(e){return n.obj(e,(function(e,t,r){r(null,o(e)+s)}))},e.exports.parse=a},
/*!**************************************!*\
  !*** ./node_modules/split2/index.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Transform:n}=r(/*! readable-stream */37),{StringDecoder:i}=r(/*! string_decoder */77),s=Symbol("last"),o=Symbol("decoder");function a(e,t,r){var n;if(this.overflow){if(1===(n=this[o].write(e).split(this.matcher)).length)return r();n.shift(),this.overflow=!1}else this[s]+=this[o].write(e),n=this[s].split(this.matcher);this[s]=n.pop();for(var i=0;i<n.length;i++)u(this,this.mapper(n[i]));if(this.overflow=this[s].length>this.maxLength,this.overflow&&!this.skipOverflow)return r(new Error("maximum buffer reached"));r()}function c(e){this[s]+=this[o].end(),this[s]&&u(this,this.mapper(this[s])),e()}function u(e,t){void 0!==t&&e.push(t)}function h(e){return e}e.exports=function(e,t,r){switch(e=e||/\r?\n/,t=t||h,r=r||{},arguments.length){case 1:"function"==typeof e?(t=e,e=/\r?\n/):"object"!=typeof e||e instanceof RegExp||(r=e,e=/\r?\n/);break;case 2:"function"==typeof e?(r=t,t=e,e=/\r?\n/):"object"==typeof t&&(r=t,t=h)}(r=Object.assign({},r)).transform=a,r.flush=c,r.readableObjectMode=!0;const u=new n(r);return u[s]="",u[o]=new i("utf8"),u.matcher=e,u.mapper=t,u.maxLength=r.maxLength,u.skipOverflow=r.skipOverflow,u.overflow=!1,u}},
/*!*******************************************************!*\
  !*** ./node_modules/json-stringify-safe/stringify.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e,t){var r=[],n=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"}),function(i,s){if(r.length>0){var o=r.indexOf(this);~o?r.splice(o+1):r.push(this),~o?n.splice(o,1/0,i):n.push(i),~r.indexOf(s)&&(s=t.call(this,i,s))}else r.push(s);return null==e?s:e.call(this,i,s)}}(e.exports=function(e,t,n,i){return JSON.stringify(e,r(t,i),n)}).getSerialize=r},
/*!***************************************!*\
  !*** ./node_modules/wrappy/wrappy.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");Object.keys(t).forEach((function(e){n[e]=t[e]}));return n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}}},
/*!*********************************************!*\
  !*** ./node_modules/end-of-stream/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! once */31),i=function(){},s=function(e,r,o){if("function"==typeof r)return s(e,null,r);r||(r={}),o=n(o||i);var a=e._writableState,c=e._readableState,u=r.readable||!1!==r.readable&&e.readable,h=r.writable||!1!==r.writable&&e.writable,l=!1,f=function(){e.writable||d()},d=function(){h=!1,u||o.call(e)},p=function(){u=!1,h||o.call(e)},A=function(t){o.call(e,t?new Error("exited with error code: "+t):null)},g=function(t){o.call(e,t)},y=function(){t.nextTick(m)},m=function(){if(!l)return(!u||c&&c.ended&&!c.destroyed)&&(!h||a&&a.ended&&!a.destroyed)?void 0:o.call(e,new Error("premature close"))},_=function(){e.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?h&&!a&&(e.on("end",f),e.on("close",f)):(e.on("complete",d),e.on("abort",y),e.req?_():e.on("request",_)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",A),e.on("end",p),e.on("finish",d),!1!==r.error&&e.on("error",g),e.on("close",y),function(){l=!0,e.removeListener("complete",d),e.removeListener("abort",y),e.removeListener("request",_),e.req&&e.req.removeListener("finish",d),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",d),e.removeListener("exit",A),e.removeListener("end",p),e.removeListener("error",g),e.removeListener("close",y)}};e.exports=s}).call(this,r(/*! ./../process/browser.js */2))},
/*!********************!*\
  !*** fs (ignored) ***!
  \********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!*******************************************************!*\
  !*** ./node_modules/iso-stream-http/index.browser.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! ./lib/http */839),i=n,s=self.URL;e.exports={http:n,https:i,getRequest:(e,t)=>{let r="http:";if("string"==typeof e){r=new s(e).protocol}else e.protocol&&(r=e.protocol);return"http:"===r?n.request(e,t):i.request(e,t)}}},
/*!**************************************************!*\
  !*** ./node_modules/iso-stream-http/lib/http.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! ./request */840),i=r(/*! ./incoming-message */398),s=r(/*! builtin-status-codes */841),o=self.URL;const a=(e,r)=>{"string"==typeof e?((e=new o(e,self.location.protocol+"//"+self.location.host)).path=e.pathname+e.search,e.auth=e.username&&e.password?e.username+":"+e.password:null):e=Object.assign({},e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||i,a=e.hostname||e.host,c=e.port,u=e.path||"/";a&&-1!==a.indexOf(":")&&(a="["+a+"]"),e.url=(a?s+"//"+a:"")+(c?":"+c:"")+u,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new n(e);return r&&h.on("response",r),h},c=function(){};c.defaultMaxSockets=4;e.exports={Agent:c,ClientRequest:n,IncomingMessage:i,METHODS:["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES:s,get:(e,t)=>{var r=a(e,t);return r.end(),r},globalAgent:new c,request:a,maxHeaderSize:"8KB"}}).call(this,r(/*! ./../../webpack/buildin/global.js */10))},
/*!*****************************************************!*\
  !*** ./node_modules/iso-stream-http/lib/request.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! ./capability */397),i=r(/*! inherits */3),s=r(/*! ./incoming-message */398),o=r(/*! readable-stream */37),a=self.fetch,c=e.exports=function(e){o.Writable.call(this),this._opts=e,this._body=[],this._headers={},e.auth&&this.setHeader("Authorization","Basic "+t.from(e.auth).toString("base64")),Object.keys(e.headers).forEach(t=>{this.setHeader(t,e.headers[t])}),this._mode="fetch",this._fetchTimer=null,this.on("finish",()=>this._onFinish())};i(c,o.Writable),c.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===u.indexOf(r)&&(this._headers[r]=t)},c.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},c.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},c.prototype._onFinish=function(){if(!this._destroyed){var e=this._opts,t=this._headers,r=null;"GET"!==e.method&&"HEAD"!==e.method&&(r=new Blob(this._body,{type:(t["content-type"]||{}).value||""}));var i=null;if(n.abortController){var s=new AbortController;i=s.signal,this._fetchAbortController=s,"requestTimeout"in e&&0!==e.requestTimeout&&(this._fetchTimer=setTimeout(()=>{this.emit("requestTimeout"),this._fetchAbortController&&this._fetchAbortController.abort()},e.requestTimeout))}a(this._opts.url,{method:this._opts.method,headers:this._headers,body:r||void 0,mode:"cors",credentials:e.withCredentials?"include":"same-origin",signal:i}).then(e=>{this._fetchResponse=e,this._connect()},e=>{clearTimeout(this._fetchTimer),this._destroyed||this.emit("error",e)})}},c.prototype._connect=function(){this._destroyed||(this._response=new s(this._fetchResponse,this._mode,this._fetchTimer),this._response.on("error",e=>this.emit("error",e)),this.emit("response",this._response))},c.prototype._write=function(e,t,r){this._body.push(e),r()},c.prototype.abort=c.prototype.destroy=function(){this._destroyed=!0,clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},c.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),o.Writable.prototype.end.call(this,e,t,r)},c.prototype.flushHeaders=function(){},c.prototype.setTimeout=function(){},c.prototype.setNoDelay=function(){},c.prototype.setSocketKeepAlive=function(){};var u=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************************!*\
  !*** ./node_modules/builtin-status-codes/browser.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},
/*!*********************************************!*\
  !*** ./node_modules/concat-stream/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! readable-stream */37).Writable,i=r(/*! inherits */3),s=Uint8Array;function o(e,t){if(!(this instanceof o))return new o(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var r=e.encoding,i=!1;r?"u8"!==(r=String(r).toLowerCase())&&"uint8"!==r||(r="uint8array"):i=!0,n.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=i,t&&this.on("finish",(function(){t(this.getBody())})),this.body=[]}function a(e){return"string"==typeof e||(t=e,/Array\]$/.test(Object.prototype.toString.call(t)))||e&&"function"==typeof e.subarray;var t}e.exports=o,i(o,n),o.prototype._write=function(e,t,r){this.body.push(e),r()},o.prototype.inferEncoding=function(e){var r=void 0===e?this.body[0]:e;return t.isBuffer(r)?"buffer":"undefined"!=typeof Uint8Array&&r instanceof Uint8Array?"uint8array":Array.isArray(r)?"array":"string"==typeof r?"string":"[object Object]"===Object.prototype.toString.call(r)?"object":"buffer"},o.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++)t.push.apply(t,e[r]);return t}(this.body):"string"===this.encoding?function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n];"string"==typeof i?r.push(i):t.isBuffer(i)?r.push(i):a(i)?r.push(t.from(i)):r.push(t.from(String(i)))}r=t.isBuffer(e[0])?(r=t.concat(r)).toString("utf8"):r.join("");return r}(this.body):"buffer"===this.encoding?function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n];t.isBuffer(i)?r.push(i):a(i)?r.push(t.from(i)):r.push(t.from(String(i)))}return t.concat(r)}(this.body):"uint8array"===this.encoding?function(e){for(var r=0,n=0;n<e.length;n++)"string"==typeof e[n]&&(e[n]=t.from(e[n])),r+=e[n].length;for(var i=new s(r),o=(n=0,0);n<e.length;n++)for(var a=e[n],c=0;c<a.length;c++)i[o++]=a[c];return i}(this.body):this.body):[]}}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/utils/stream-to-json-value.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ./stream-to-value */226);e.exports=function(e,r){n(e,(e,n)=>{if(e)return r(e);if(!n||0===n.length)return r();let i;t.isBuffer(n)&&(n=n.toString());try{i=JSON.parse(n)}catch(e){return r(new Error(`Invalid JSON: ${n}`))}r(null,i)})}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/dht/get.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9);e.exports=e=>n((t,r,n)=>{"function"!=typeof r||n||(n=r,r={}),"function"==typeof r&&"function"==typeof n&&(n=r,r={}),e({path:"dht/get",args:t,qs:r},function(e,t,r){if(t)return e(t);if(!r)return e(new Error("empty response"));if(0===r.length)return e(new Error("no value returned for key"));if(Array.isArray(r)&&(r=r[0]),5===r.Type)e(null,r.Extra);else{e(new Error("key was not found (type 6)"))}}.bind(null,n))})},
/*!******************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/dht/put.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9);e.exports=e=>n((t,r,n,i)=>{"function"!=typeof n||i||(i=n,n={}),"function"==typeof n&&"function"==typeof i&&(i=n,n={}),e({path:"dht/put",args:[t,r],qs:n},i)})},
/*!************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/dht/findprovs.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9),i=r(/*! ../utils/stream-to-value-with-transformer */113),s=r(/*! multiaddr */15),o=r(/*! peer-id */7),a=r(/*! peer-info */21);e.exports=e=>n((t,r,n)=>{"function"!=typeof r||n||(n=r,r={}),"function"==typeof r&&"function"==typeof n&&(n=r,r={});const c=(e,t)=>{Array.isArray(e)||(e=[e]);let r=[];e.forEach(e=>{4===e.Type&&e.Responses.forEach(e=>{const t=new a(o.createFromB58String(e.ID));e.Addrs&&e.Addrs.forEach(e=>{const r=s(e);t.multiaddrs.add(r)}),r.push(t)})}),t(null,r)};e({path:"dht/findprovs",args:t.toString(),qs:r},(e,t)=>{if(e)return n(e);i(t,c,n)})})},
/*!***********************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/dht/findpeer.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9),i=r(/*! ../utils/stream-to-value-with-transformer */113),s=r(/*! multiaddr */15),o=r(/*! peer-id */7),a=r(/*! peer-info */21),c=r(/*! err-code */8);e.exports=e=>n((t,r,n)=>{"function"!=typeof r||n||(n=r,r={}),"function"==typeof r&&"function"==typeof n&&(n=r,r={});const u=(e,t)=>{if(Array.isArray(e)&&(e=e.find(e=>2===e.Type)),!e||2!==e.Type){return t(c(new Error("key was not found (type 4)"),"ERR_KEY_TYPE_4_NOT_FOUND"))}const r=e.Responses[0],n=new a(o.createFromB58String(r.ID));r.Addrs.forEach(e=>{const t=s(e);n.multiaddrs.add(t)}),t(null,n)};e({path:"dht/findpeer",args:t.toString(),qs:r},(e,t)=>{if(e)return n(e);i(t,u,n)})})},
/*!**********************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/dht/provide.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9),i=r(/*! cids */4);e.exports=e=>n((t,r,n)=>{"function"!=typeof r||n||(n=r,r={}),"function"==typeof r&&"function"==typeof n&&(n=r,r={}),Array.isArray(t)||(t=[t]);try{t=t.map(e=>new i(e).toBaseEncodedString("base58btc"))}catch(e){return n(e)}e({path:"dht/provide",args:t,qs:r},n)})},
/*!********************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/dht/query.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9),i=r(/*! ../utils/stream-to-value-with-transformer */113),s=r(/*! peer-id */7),o=r(/*! peer-info */21);e.exports=e=>n((t,r,n)=>{"function"!=typeof r||n||(n=r,r={}),"function"==typeof r&&"function"==typeof n&&(n=r,r={});const a=(e,t)=>{t(null,e.map(e=>new o(s.createFromB58String(e.ID))))};e({path:"dht/query",args:t,qs:r},(e,t)=>{if(e)return n(e);i(t,a,n)})})},
/*!********************************************************************!*\
  !*** ./node_modules/libp2p-delegated-content-routing/src/index.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-http-client/src/dht */394),i=r(/*! ipfs-http-client/src/files-regular/refs */851),s=r(/*! ipfs-http-client/src/utils/default-config */224),{default:o}=r(/*! p-queue */45),a=r(/*! debug */1),c=a("libp2p-delegated-content-routing");c.error=a("libp2p-delegated-content-routing:error");const u=3e4,h={protocol:"https",port:443,host:"node0.delegate.ipfs.io"},l=4;e.exports=class{constructor(e,t){if(null==e)throw new Error("missing self peerId");this.api=Object.assign({},s(),h,t),this.dht=n(this.api),this.refs=i(this.api),this.peerId=e;const r={concurrency:l};this._httpQueue=new o(r),this._httpQueueRefs=new o(Object.assign({},r,{concurrency:2})),c(`enabled DelegatedContentRouting via ${this.api.protocol}://${this.api.host}:${this.api.port}`)}async*findProviders(e,t={}){const r=e.toBaseEncodedString();c("findProviders starts: "+r),t.maxTimeout=t.maxTimeout||u;const n=await this._httpQueue.add(()=>this.dht.findProvs(e,{timeout:`${t.maxTimeout}ms`}));for(let e=0;e<n.length;e++)yield n[e];c("findProviders finished: "+r)}async provide(e){const t=e.toBaseEncodedString();c("provide starts: "+t),await this._httpQueueRefs.add(()=>this.refs(t,{recursive:!1})),c("provide finished: "+t)}}},
/*!*****************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/files-regular/refs.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! is-ipfs */62),i=r(/*! promisify-es6 */9),s=r(/*! ../utils/stream-to-value-with-transformer */113),o=r(/*! ../utils/module-config */150),a=r(/*! ../utils/clean-cid */852);e.exports=t=>{const n=o(t),a=i((t,r,i)=>{"function"==typeof r&&(i=r,r={}),r=e.exports.normalizeOpts(r);try{t=e.exports.checkArgs(t)}catch(e){return i(e)}const o=(e,t)=>{t(null,e.map(e=>({ref:e.Ref,err:e.Err})))};n({args:t,path:"refs",qs:r},(e,t)=>{if(e)return i(e);s(t,o,i)})});return a.local=r(/*! ./refs-local */853)(t),a.localReadableStream=r(/*! ./refs-local-readable-stream */854)(t),a.localPullStream=r(/*! ./refs-local-pull-stream */855)(t),a},e.exports.checkArgs=e=>{const t=Array.isArray(e);e=t?e:[e];const r=[];for(let t of e){try{t=a(t)}catch(e){if(!n.ipfsPath(t))throw e}r.push(t)}return t?r:r[0]},e.exports.normalizeOpts=e=>("number"==typeof(e=e||{}).maxDepth&&(e["max-depth"]=e.maxDepth),e)},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/utils/clean-cid.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! cids */4);e.exports=function(e){if(t.isBuffer(e))return new n(e).toString();if(n.isCID(e))return e.toString();if("string"!=typeof e)throw new Error("unexpected cid type: "+typeof e);return new n(e.split("/")[0]),e}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/files-regular/refs-local.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9),i=r(/*! ../utils/stream-to-value-with-transformer */113),s=r(/*! ../utils/module-config */150);e.exports=e=>{const t=s(e);return n((e,r)=>{"function"==typeof e&&(r=e,e={});const n=(e,t)=>{t(null,e.map(e=>({ref:e.Ref,err:e.Err})))};t({path:"refs/local",qs:e},(e,t)=>{if(e)return r(e);i(t,n,r)})})}},
/*!***************************************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/files-regular/refs-local-readable-stream.js ***!
  \***************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! readable-stream */37),i=r(/*! pump */225),s=r(/*! through2 */396);e.exports=e=>t=>{t=t||{};const r=new n.PassThrough({objectMode:!0});return e({path:"refs/local",qs:t},(e,t)=>{if(e)return r.destroy(e);t.once("error",e=>r.destroy(e)),i(t,s.obj((function(e,t,r){r(null,{ref:e.Ref,err:e.Err})})),r)}),r}},
/*!***********************************************************************************!*\
  !*** ./node_modules/ipfs-http-client/src/files-regular/refs-local-pull-stream.js ***!
  \***********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream */25),i=r(/*! stream-to-pull-stream */399),s=r(/*! pull-defer */114),o=r(/*! ../utils/module-config */150);e.exports=e=>(e=o(e),t=>{t=t||{};const r=s.source();return e({path:"refs/local",qs:t},(e,t)=>{if(e)return r.resolve(n.error(e));r.resolve(n(i.source(t),n.map(e=>({ref:e.Ref,err:e.Err}))))}),r})},
/*!********************************************!*\
  !*** ./node_modules/pull-defer/through.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(){var e,t,r,n,i;function s(s){return i?i(s):(e=s,function(e,i){t?t(e,i):(n=e,r=i)})}return s.resolve=function(s){if(i)throw new Error("already resolved");if(!(i=s))throw new Error("resolve *must* be passed a transform stream");e&&(t=i(e),r&&t(n,r))},s}},
/*!*****************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/runtime/libp2p-pubsub-routers-browser.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={gossipsub:r(/*! libp2p-gossipsub */404)}},
/*!*******************************************!*\
  !*** ./node_modules/lodash/_getRawTag.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_Symbol */229),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var i=o.call(e);return n&&(t?e[a]=r:delete e[a]),i}},
/*!************************************************!*\
  !*** ./node_modules/lodash/_objectToString.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},
/*!*************************************************!*\
  !*** ./node_modules/async/internal/iterator.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,n.default)(e))return function(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}(e);var t=(0,i.default)(e);return t?function(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}(t):(r=e,o=(0,s.default)(r),a=-1,c=o.length,function(){var e=o[++a];return a<c?{value:r[e],key:e}:null});var r,o,a,c};var n=o(r(/*! lodash/isArrayLike */115)),i=o(r(/*! ./getIterator */861)),s=o(r(/*! lodash/keys */862));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!****************************************************!*\
  !*** ./node_modules/async/internal/getIterator.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n&&e[n]&&e[n]()};var n="function"==typeof Symbol&&Symbol.iterator;e.exports=t.default},
/*!*************************************!*\
  !*** ./node_modules/lodash/keys.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_arrayLikeKeys */863),i=r(/*! ./_baseKeys */874),s=r(/*! ./isArrayLike */115);e.exports=function(e){return s(e)?n(e):i(e)}},
/*!***********************************************!*\
  !*** ./node_modules/lodash/_arrayLikeKeys.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseTimes */864),i=r(/*! ./isArguments */865),s=r(/*! ./isArray */79),o=r(/*! ./isBuffer */867),a=r(/*! ./_isIndex */869),c=r(/*! ./isTypedArray */870),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=s(e),h=!r&&i(e),l=!r&&!h&&o(e),f=!r&&!h&&!l&&c(e),d=r||h||l||f,p=d?n(e.length,String):[],A=p.length;for(var g in e)!t&&!u.call(e,g)||d&&("length"==g||l&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,A))||p.push(g);return p}},
/*!*******************************************!*\
  !*** ./node_modules/lodash/_baseTimes.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},
/*!********************************************!*\
  !*** ./node_modules/lodash/isArguments.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseIsArguments */866),i=r(/*! ./isObjectLike */155),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return i(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},
/*!*************************************************!*\
  !*** ./node_modules/lodash/_baseIsArguments.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseGetTag */153),i=r(/*! ./isObjectLike */155),s="[object Arguments]";e.exports=function(e){return i(e)&&n(e)==s}},
/*!*****************************************!*\
  !*** ./node_modules/lodash/isBuffer.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e){var n=r(/*! ./_root */154),i=r(/*! ./stubFalse */868),s=t&&!t.nodeType&&t,o=s&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===s?n.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;e.exports=c}).call(this,r(/*! ./../webpack/buildin/module.js */136)(e))},
/*!******************************************!*\
  !*** ./node_modules/lodash/stubFalse.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(){return!1}},
/*!*****************************************!*\
  !*** ./node_modules/lodash/_isIndex.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=typeof e;return!!(t=null==t?r:t)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<t}},
/*!*********************************************!*\
  !*** ./node_modules/lodash/isTypedArray.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseIsTypedArray */871),i=r(/*! ./_baseUnary */872),s=r(/*! ./_nodeUtil */873),o=s&&s.isTypedArray,a=o?i(o):n;e.exports=a},
/*!**************************************************!*\
  !*** ./node_modules/lodash/_baseIsTypedArray.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseGetTag */153),i=r(/*! ./isLength */406),s=r(/*! ./isObjectLike */155),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&i(e.length)&&!!o[n(e)]}},
/*!*******************************************!*\
  !*** ./node_modules/lodash/_baseUnary.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return function(t){return e(t)}}},
/*!******************************************!*\
  !*** ./node_modules/lodash/_nodeUtil.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(e){var n=r(/*! ./_freeGlobal */405),i=t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=s&&s.exports===i&&n.process,a=function(){try{var e=s&&s.require&&s.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a}).call(this,r(/*! ./../webpack/buildin/module.js */136)(e))},
/*!******************************************!*\
  !*** ./node_modules/lodash/_baseKeys.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_isPrototype */875),i=r(/*! ./_nativeKeys */876),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}},
/*!*********************************************!*\
  !*** ./node_modules/lodash/_isPrototype.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},
/*!********************************************!*\
  !*** ./node_modules/lodash/_nativeKeys.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_overArg */877)(Object.keys,Object);e.exports=n},
/*!*****************************************!*\
  !*** ./node_modules/lodash/_overArg.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},
/*!**********************************************!*\
  !*** ./node_modules/time-cache/src/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! lodash.throttle */879);e.exports=function e(t){if(!(this instanceof e))return new e(t);t=t||{};const r=t.validity||30;const i=new Map;const s=n(()=>{i.forEach((e,t)=>{const n=e.validity||r;(function(e){const t=(new Date).getTime()-e.getTime();return Math.floor(t/1e3)})(e.timestamp)>n&&i.delete(t)})},200);this.put=(e,t,r)=>{this.has(e)||i.set(e,{value:t,timestamp:new Date,validity:r}),s()};this.get=e=>{if(i.has(e))return i.get(e).value;throw new Error("key does not exist")};this.has=e=>i.has(e)}},
/*!***********************************************!*\
  !*** ./node_modules/lodash.throttle/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var r="Expected a function",n=NaN,i="[object Symbol]",s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,h="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,f=h||l||Function("return this")(),d=Object.prototype.toString,p=Math.max,A=Math.min,g=function(){return f.Date.now()};function y(e,t,n){var i,s,o,a,c,u,h=0,l=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError(r);function y(t){var r=i,n=s;return i=s=void 0,h=t,a=e.apply(n,r)}function b(e){var r=e-u;return void 0===u||r>=t||r<0||f&&e-h>=o}function w(){var e=g();if(b(e))return v(e);c=setTimeout(w,function(e){var r=t-(e-u);return f?A(r,o-(e-h)):r}(e))}function v(e){return c=void 0,d&&i?y(e):(i=s=void 0,a)}function E(){var e=g(),r=b(e);if(i=arguments,s=this,u=e,r){if(void 0===c)return function(e){return h=e,c=setTimeout(w,t),l?y(e):a}(u);if(f)return c=setTimeout(w,t),y(u)}return void 0===c&&(c=setTimeout(w,t)),a}return t=_(t)||0,m(n)&&(l=!!n.leading,o=(f="maxWait"in n)?p(_(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),E.cancel=function(){void 0!==c&&clearTimeout(c),h=0,i=u=s=c=void 0},E.flush=function(){return void 0===c?a:v(g())},E}function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==i}(e))return n;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=a.test(e);return r||c.test(e)?u(e.slice(2),r?2:8):o.test(e)?n:+e}e.exports=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError(r);return m(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),y(e,t,{leading:i,maxWait:t,trailing:s})}}).call(this,r(/*! ./../webpack/buildin/global.js */10))},
/*!************************************************!*\
  !*** ./node_modules/libp2p-pubsub/src/peer.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-length-prefixed */30),i=r(/*! pull-pushable */64),s=r(/*! pull-stream */25),o=r(/*! async/setImmediate */32),a=r(/*! events */5),{RPC:c}=r(/*! ./message */232);e.exports=class extends a{constructor(e){super(),this.info=e,this.conn=null,this.topics=new Set,this.stream=null,this._references=0}get isConnected(){return Boolean(this.conn)}get isWritable(){return Boolean(this.stream)}write(e){if(!this.isWritable){const e=this.info.id.toB58String();throw new Error("No writable connection to "+e)}this.stream.push(e)}attachConnection(e){this.conn=e,this.stream=new i,s(this.stream,n.encode(),e,s.onEnd(()=>{this.conn=null,this.stream=null,this.emit("close")})),this.emit("connection")}_sendRawSubscriptions(e,t){if(0===e.size)return;const r=[];e.forEach(e=>{r.push({subscribe:t,topicID:e})}),this.write(c.encode({subscriptions:r}))}sendSubscriptions(e){this._sendRawSubscriptions(e,!0)}sendUnsubscriptions(e){this._sendRawSubscriptions(e,!1)}sendMessages(e){this.write(c.encode({msgs:e}))}updateSubscriptions(e){e.forEach(e=>{e.subscribe?this.topics.add(e.topicID):this.topics.delete(e.topicID)})}close(e){this._references=1,this.stream&&this.stream.end(),o(()=>{this.conn=null,this.stream=null,this.emit("close"),e()})}}},
/*!*************************************************************!*\
  !*** ./node_modules/libp2p-pubsub/src/message/rpc.proto.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="\nmessage RPC {\n  repeated SubOpts subscriptions = 1;\n  repeated Message msgs = 2;\n\n  message SubOpts {\n    optional bool subscribe = 1; // subscribe or unsubcribe\n    optional string topicID = 2;\n  }\n\n  message Message {\n    optional bytes from = 1;\n    optional bytes data = 2;\n    optional bytes seqno = 3;\n    repeated string topicIDs = 4;\n    optional bytes signature = 5;\n    optional bytes key = 6;\n  }\n}"},
/*!**************************************************************************!*\
  !*** ./node_modules/libp2p-pubsub/src/message/topic-descriptor.proto.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="\n// topicCID = cid(merkledag_protobuf(topicDescriptor)); (not the topic.name)\nmessage TopicDescriptor {\n  optional string name = 1;\n  optional AuthOpts auth = 2;\n  optional EncOpts enc = 2;\n\n  message AuthOpts {\n    optional AuthMode mode = 1;\n    repeated bytes keys = 2; // root keys to trust\n\n    enum AuthMode {\n      NONE = 0; // no authentication, anyone can publish\n      KEY = 1; // only messages signed by keys in the topic descriptor are accepted\n      WOT = 2; // web of trust, certificates can allow publisher set to grow\n    }\n  }\n\n  message EncOpts {\n    optional EncMode mode = 1;\n    repeated bytes keyHashes = 2; // the hashes of the shared keys used (salted)\n\n    enum EncMode {\n      NONE = 0; // no encryption, anyone can read\n      SHAREDKEY = 1; // messages are encrypted with shared key\n      WOT = 2; // web of trust, certificates can allow publisher set to grow\n    }\n  }\n}"},
/*!********************************************************!*\
  !*** ./node_modules/libp2p-pubsub/src/message/sign.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! peer-id */7),{Message:i}=r(/*! ./index */232),s=t.from("libp2p-pubsub:");function o(e,t){if(e.key)n.createFromPubKey(e.key,(r,n)=>r?t(r,null):n.isEqual(e.from)?t(null,n.pubKey):void t(new Error("Public Key does not match the originator")));else{{const r=n.createFromBytes(e.from);if(r.pubKey)return t(null,r.pubKey)}t(new Error("Could not get the public key from the originator id"))}}e.exports={messagePublicKey:o,signMessage:function(e,r,n){const o=t.concat([s,i.encode(r)]);e.privKey.sign(o,(t,i)=>{if(t)return n(t);n(null,{...r,signature:i,key:e.pubKey.bytes})})},SignPrefix:s,verifySignature:function(e,r){let n={...e};delete n.signature,delete n.key;const a=t.concat([s,i.encode(n)]);o(e,(t,n)=>{if(t)return r(t,!1);n.verify(a,e.signature,r)})}}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************!*\
  !*** ./node_modules/libp2p-pubsub/src/utils.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n){const i=r(/*! libp2p-crypto */36),s=r(/*! bs58 */47);(t=e.exports).randomSeqno=()=>i.randomBytes(20),t.msgId=(e,t)=>e+t.toString("hex"),t.anyMatch=(e,t)=>{let r;r=Array.isArray(t)?e=>t.indexOf(e)>-1:e=>t.has(e);for(let t of e)if(r(t))return!0;return!1},t.ensureArray=e=>Array.isArray(e)?e:[e],t.normalizeInRpcMessage=e=>{const t=Object.assign({},e);return n.isBuffer(e.from)&&(t.from=s.encode(e.from)),t},t.normalizeInRpcMessages=e=>e?e.map(t.normalizeInRpcMessage):e,t.normalizeOutRpcMessage=e=>{const t=Object.assign({},e);return("string"==typeof e.from||e.from instanceof String)&&(t.from=s.decode(e.from)),t},t.normalizeOutRpcMessages=e=>e?e.map(t.normalizeOutRpcMessage):e}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p-gossipsub/src/pubsub.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{multicodec:n}=r(/*! libp2p-floodsub */886),i=r(/*! libp2p-pubsub */86),s=r(/*! pull-stream */25),o=r(/*! pull-length-prefixed */30),a=r(/*! async/nextTick */35),{constants:c}=r(/*! multistream-select */117),{utils:u}=r(/*! libp2p-pubsub */86),h=r(/*! async/map */116),l=r(/*! err-code */8),f=r(/*! assert */24),{rpc:d}=r(/*! ./message */413);e.exports=class extends i{constructor(e,t,r,n){super(e,t,r,n),this.subscriptions=new Set,this._options={emitSelf:!1,gossipIncoming:!0,fallbackToFloodsub:!0,...n}}_onDial(e,t,r){const n=e.id.toB58String();super._onDial(e,t,e=>{if(e)return r(e);const t=this.peers.get(n);t&&t.isWritable&&t.sendSubscriptions(this.subscriptions),a(()=>r())})}_dialPeer(e,t){t=t||function(){};const r=e.id.toB58String(),i=this.peers.get(r);if(i&&i.isConnected)return a(()=>t());if(this._dials.has(r))return this.log("already dialing %s, ignoring dial attempt",r),a(()=>t());const s=e.protocols.has(n)&&!e.protocols.has(this.multicodec);let o=this.multicodec;this._options.fallbackToFloodsub&&s&&(o=n),this._dials.add(r),this.log("dialing %s %s",o,r),this.libp2p.dialProtocol(e,o,(i,s)=>{if(this.log("dial to %s complete",r),this._dials.delete(r),i){if(!this._options.fallbackToFloodsub||o!==this.multicodec||i.code!==c.errors.MULTICODEC_NOT_SUPPORTED)return this.log.err(i),t();this._dials.add(r),this.log("dialing %s %s",n,r),this.libp2p.dialProtocol(e,n,(n,i)=>{if(this.log("dial to %s complete",r),this._dials.delete(r),n)return this.log.err(n),t();this._onDial(e,i,t)})}else this._onDial(e,s,t)})}_processConnection(e,t,r){s(t,o.decode(),s.map(e=>d.RPC.decode(e)),s.drain(t=>this._onRpc(e,t),t=>this._onConnectionEnd(e,r,t)))}_onRpc(e,t){if(!t)return;const r=this.peers.get(e);if(!r)return;this.log("rpc from",e);const n=t.subscriptions,i=t.msgs;n.length&&(r.updateSubscriptions(n),n.forEach(e=>{const t=e.topicID;this.topics.has(t)||this.topics.set(t,new Set);const n=this.topics.get(t);e.subscribe?n.add(r):n.delete(r)}),this.emit("pubsub:subscription-change",r.info,r.topics,n)),i.length&&i.forEach(e=>{const t=u.normalizeInRpcMessage(e),r=u.msgId(t.from,t.seqno);this.seenCache.has(r)||(this.seenCache.put(r),this.validate(e,(e,r)=>{!e&&r?this._processRpcMessage(t):this.log("Message could not be validated, dropping it. isValid=%s",r,e)}))}),this._handleRpcControl(r,t)}_processRpcMessage(e){this._emitMessage(e.topicIDs,e)}_emitMessage(e,t){e.forEach(e=>{this.subscriptions.has(e)&&this.emit(e,t)})}_handleRpcControl(e,t){throw l("_handleRpcControl must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}_rpcWithControl(e,t,r,n,i){return{subscriptions:[],msgs:e||[],control:{ihave:t||[],iwant:r||[],graft:n||[],prune:i||[]}}}start(e){super.start(t=>{if(t)return e(t);this._options.fallbackToFloodsub&&this.libp2p.handle(n,this._onConnection),e()})}stop(e){super.stop(t=>{if(t)return e(t);this.subscriptions=new Set,e()})}subscribe(e){f(this.started,"Pubsub has not started");const t=(e=u.ensureArray(e)).filter(e=>!this.subscriptions.has(e));0!==t.length&&(t.forEach(e=>{this.subscriptions.add(e)}),this.peers.forEach(t=>(function t(r){if(r&&r.isWritable)return r.sendSubscriptions(e);const n=()=>{r.removeListener("connection",n),t(r)};r.on("connection",n);r.once("close",()=>r.removeListener("connection",n))})(t)),this.join(t))}join(e){throw l("join must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}unsubscribe(e){const t=(e=u.ensureArray(e)).filter(e=>this.subscriptions.has(e));t.length&&(t.forEach(e=>{this.subscriptions.delete(e)}),this.peers.forEach(t=>(function t(r){if(r&&r.isWritable)return r.sendUnsubscriptions(e);const n=()=>{r.removeListener("connection",n),t(r)};r.on("connection",n);r.once("close",()=>r.removeListener("connection",n))})(t)),this.leave(t))}leave(e){throw l("leave must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}publish(e,t,r){f(this.started,"Pubsub has not started"),this.log("publish",e,t),e=u.ensureArray(e),t=u.ensureArray(t),r=r||(()=>{});const n=this.libp2p.peerInfo.id.toB58String();h(t,(t,r)=>{const i=u.randomSeqno(),s={from:n,data:t,seqno:i,topicIDs:e};this.seenCache.put(s.seqno),this._options.emitSelf&&this._emitMessages(e,[s]),this._buildMessage(s,r)},(e,t)=>{e&&r(e),this._publish(u.normalizeOutRpcMessages(t)),r()})}_emitMessages(e,t){e.forEach(e=>{this.subscriptions.has(e)&&t.forEach(t=>{this.emit(e,t)})})}_publish(e){throw l("_publish must be implemented by the subclass","ERR_NOT_IMPLEMENTED")}_getPeers(e,t){const r=this.topics.get(e);if(!r)return new Set;let n=[];return r.forEach(e=>{e.info.protocols.has(this.multicodec)&&n.push(e)}),n=this._shufflePeers(n),t>0&&n.length>t&&(n=n.slice(0,t)),new Set(n)}_shufflePeers(e){if(e.length<=1)return e;for(let t=0;t<e.length;t++){const r=(()=>Math.floor(Math.random()*Math.floor(e.length)))(),n=e[t];return e[t]=e[r],e[r]=n,e}}}},
/*!*********************************************************************************!*\
  !*** ./node_modules/libp2p-gossipsub/node_modules/libp2p-floodsub/src/index.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream */25),i=r(/*! pull-length-prefixed */30),s=r(/*! assert */24),o=r(/*! libp2p-pubsub */86),{message:a,utils:c}=r(/*! libp2p-pubsub */86),u=r(/*! ./config */887).multicodec,h=c.ensureArray,l=r(/*! async/setImmediate */32),f=r(/*! async/map */116),d=()=>{};e.exports=class extends o{constructor(e,t={}){super("libp2p:floodsub",u,e,t),this.subscriptions=new Set,this._options={emitSelf:!0,...t}}_onDial(e,t,r){super._onDial(e,t,t=>{if(t)return r(t);const n=e.id.toB58String(),i=this.peers.get(n);i&&i.isWritable&&i.sendSubscriptions(this.subscriptions),l(()=>r())})}_processConnection(e,t,r){n(t,i.decode(),n.map(e=>a.rpc.RPC.decode(e)),n.drain(t=>this._onRpc(e,t),t=>this._onConnectionEnd(e,r,t)))}_onRpc(e,t){if(!t)return;this.log("rpc from",e);const r=t.subscriptions,n=t.msgs;if(n&&n.length&&t.msgs.forEach(e=>this._processRpcMessage(e)),r&&r.length){const t=this.peers.get(e);t&&(t.updateSubscriptions(r),this.emit("floodsub:subscription-change",t.info,t.topics,r))}}_processRpcMessage(e){const t=c.normalizeInRpcMessage(e),r=c.msgId(t.from,t.seqno);this.seenCache.has(r)||(this.seenCache.put(r),this.validate(e,(e,r)=>{!e&&r?(this._emitMessages(t.topicIDs,[t]),this._forwardMessages(t.topicIDs,[t])):this.log("Message could not be validated, dropping it. isValid=%s",r,e)}))}_emitMessages(e,t){e.forEach(e=>{this.subscriptions.has(e)&&t.forEach(t=>{this.emit(e,t)})})}_forwardMessages(e,t){this.peers.forEach(r=>{r.isWritable&&c.anyMatch(r.topics,e)&&(r.sendMessages(c.normalizeOutRpcMessages(t)),this.log("publish msgs on topics",e,r.info.id.toB58String()))})}stop(e){super.stop(t=>{if(t)return e(t);this.subscriptions=new Set,e()})}publish(e,t,r){s(this.started,"FloodSub is not started"),r=r||d,this.log("publish",e,t),e=h(e),t=h(t);const n=this.libp2p.peerInfo.id.toB58String();f(t,(t,r)=>{const i=c.randomSeqno();this.seenCache.put(c.msgId(n,i));const s={from:n,data:t,seqno:i,topicIDs:e};this._options.emitSelf&&this._emitMessages(e,[s]),this._buildMessage(s,r)},(t,n)=>{if(t)return r(t);this._forwardMessages(e,n),r(null)})}subscribe(e){s(this.started,"FloodSub is not started"),(e=h(e)).forEach(e=>this.subscriptions.add(e)),this.peers.forEach(t=>(function t(r){if(r&&r.isWritable)return r.sendSubscriptions(e);const n=()=>{r.removeListener("connection",n),t(r)};r.on("connection",n);r.once("close",()=>r.removeListener("connection",n))})(t))}unsubscribe(e){this.started&&((e=h(e)).forEach(e=>this.subscriptions.delete(e)),this.peers.forEach(t=>(function t(r){r&&r.isWritable?r.sendUnsubscriptions(e):l(t.bind(r))})(t)))}},e.exports.multicodec=u},
/*!**********************************************************************************!*\
  !*** ./node_modules/libp2p-gossipsub/node_modules/libp2p-floodsub/src/config.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1),i=n("libp2p:floodsub");i.err=n("libp2p:floodsub:error"),e.exports={log:i,multicodec:"/floodsub/1.0.0"}},
/*!********************************************!*\
  !*** ./node_modules/async/internal/map.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,s){s=s||n.default,t=t||[];var o=[],a=0,c=(0,i.default)(r);e(t,(function(e,t,r){var n=a++;c(e,(function(e,t){o[n]=t,r(e)}))}),(function(e){s(e,o)}))};var n=s(r(/*! lodash/noop */42)),i=s(r(/*! ./wrapAsync */33));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!***************************************************************!*\
  !*** ./node_modules/multistream-select/src/listener/index.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream/pull */17),i=r(/*! assert */24),s=r(/*! ../select */410),o=r(/*! ./select-handler */891),a=r(/*! ./ls-handler */896),c=r(/*! ./match-exact */412),u=r(/*! ./../util */156),h=r(/*! interface-connection */38).Connection,l=r(/*! ./../constants */157).PROTOCOL_ID;e.exports=class{constructor(){this.handlers={ls:{handlerFunc:(e,t)=>a(this,t),matchFunc:c}},this.log=u.log.listener()}handle(e,t){this.log("listener handle conn");const r=s(l,(r,i)=>{if(r)return t(r);const s=new h(i,e),a=o(s,this.handlers,this.log);n(s,a,s),t()},this.log);n(e,r,e)}addHandler(e,t,r){this.log("adding handler: "+e),i("function"==typeof t,"handler must be a function"),this.handlers[e]&&this.log("overwriting handler for "+e),r||(r=c),this.handlers[e]={handlerFunc:t,matchFunc:r}}}},
/*!*****************************************!*\
  !*** ./node_modules/pull-pair/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(){var e,t;return{source:function(r,n){e?e(r,n):t=[r,n]},sink:function(r){if("function"!=typeof r)throw new Error("read must be function");if(e)throw new Error("already piped");if(e=r,t){var n=t;t=null,e.apply(null,n)}}}}},
/*!************************************************************************!*\
  !*** ./node_modules/multistream-select/src/listener/select-handler.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! pull-handshake */67),i=r(/*! pull-length-prefixed */30),s=r(/*! interface-connection */38).Connection,o=r(/*! ../util.js */156).writeEncoded,a=r(/*! async/some */893);e.exports=function(e,r,c){const u=e=>{c.error(e)},h=n({timeout:6e4},u),l=h.handshake;return function n(){i.decodeFromReader(l,(i,h)=>{if(i)return u(i);c("received:",h.toString());const f=h.toString().slice(0,-1);!function(e,t,r){const n=Object.keys(t);let i=!1;a(n,(r,n)=>{t[r].matchFunc(r,e,(e,t)=>{if(e)return n(e);t&&(i=r),n()})},e=>{if(e)return r(e);r(null,i)})}(f,r,(i,a)=>{if(i)return u(i);const d=a;if(d){c("send ack back of: "+f),o(l,h,u);const t=new s(l.rest(),e);r[d].handlerFunc(f,t)}else c("not supported protocol: "+f),o(l,t.from("na\n")),n()})})}(),h}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************!*\
  !*** ./node_modules/interface-connection/src/connection.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-defer/duplex */403);e.exports=class{constructor(e,t){this.peerInfo=null,this.conn=n(),e?this.setInnerConn(e,t):t&&(this.info=t)}get source(){return this.conn.source}get sink(){return this.conn.sink}getPeerInfo(e){return this.info&&this.info.getPeerInfo?this.info.getPeerInfo(e):this.peerInfo?void e(null,this.peerInfo):e(new Error("Peer Info not set yet"))}setPeerInfo(e){if(this.info&&this.info.setPeerInfo)return this.info.setPeerInfo(e);this.peerInfo=e}getObservedAddrs(e){if(this.info&&this.info.getObservedAddrs)return this.info.getObservedAddrs(e);e(null,[])}setInnerConn(e,t){this.conn.resolve(e),this.info=t||e}}},
/*!************************************!*\
  !*** ./node_modules/async/some.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(/*! ./internal/createTester */894)),i=o(r(/*! ./internal/doParallel */233)),s=o(r(/*! lodash/identity */895));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)((0,n.default)(Boolean,s.default)),e.exports=t.default},
/*!*****************************************************!*\
  !*** ./node_modules/async/internal/createTester.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(r,s,o,a){a=a||n.default;var c,u=!1;r(s,(function(r,n,s){o(r,(function(n,o){n?s(n):e(o)&&!c?(u=!0,c=t(!0,r),s(null,i.default)):s()}))}),(function(e){e?a(e):a(null,u?c:t(!1))}))}};var n=s(r(/*! lodash/noop */42)),i=s(r(/*! ./breakLoop */230));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!*****************************************!*\
  !*** ./node_modules/lodash/identity.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return e}},
/*!********************************************************************!*\
  !*** ./node_modules/multistream-select/src/listener/ls-handler.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! pull-stream/pull */17),i=r(/*! pull-stream/sources/values */55),s=r(/*! pull-length-prefixed */30),o=r(/*! varint */23);e.exports=function(e,r){const a=Object.keys(e.handlers).filter(e=>"ls"!==e),c=a.length,u=a.reduce((e,r)=>{const n=t.from(r+"\n");return e+o.encodingLength(n.length)},0),h=t.concat([t.from(o.encode(c)),t.from(o.encode(u)),t.from("\n")]),l=a.map(e=>t.from(e+"\n"));n(i([h].concat(l)),s.encode(),r)}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************!*\
  !*** ./node_modules/multistream-select/src/dialer/index.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! varint */23),i=r(/*! pull-stream/pull */17),s=r(/*! pull-stream/throughs/map */65),o=r(/*! pull-stream/sinks/collect */85),a=r(/*! pull-stream/throughs/take */222),c=r(/*! pull-length-prefixed */30),u=r(/*! interface-connection */38).Connection,h=r(/*! ../util */156),l=r(/*! ../select */410),f=r(/*! once */31),d=r(/*! ./../constants */157).PROTOCOL_ID;function p(e){return e.toString().slice(0,-1)}e.exports=class{constructor(){this.conn=null,this.log=h.log.dialer()}handle(e,t){this.log("dialer handle conn"),t=f(t);const r=l(d,(r,n)=>{if(r)return t(r);this.log("handshake success"),this.conn=new u(n,e),t()},this.log);try{i(e,r,e)}catch(e){this.log.error(e),t(e)}}select(e,t){if(this.log("dialer select "+e),t=f(t),!this.conn)return t(new Error("multistream handshake has not finalized yet"));const r=l(e,(e,r)=>{if(e)return this.conn=new u(r,this.conn),t(e);t(null,new u(r,this.conn))},this.log);i(this.conn,r,this.conn)}ls(e){e=f(e);const t=l("ls",(t,r)=>{if(t)return e(t);i(r,c.decode(),function(e){let t=0;return a(e=>(n.decode(e),t=n.decode(e,n.decode.bytes),!0))}(),s(p),o((t,r)=>{if(t)return e(t);e(null,r.slice(1))}))},this.log);i(this.conn,t,this.conn)}}},
/*!**********************************************************************!*\
  !*** ./node_modules/multistream-select/src/listener/match-semver.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! semver */899);e.exports=function(e,t,r){const i=e.split("/"),s=t.split("/"),o=i[1],a=i[2],c=s[1],u=s[2];if(o!==c)return r(null,!1);r(null,n.satisfies(a,"~"+u))}},
/*!***************************************!*\
  !*** ./node_modules/semver/semver.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(r){var n;t=e.exports=d,n="object"==typeof r&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var i=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],a=t.src=[],c=t.tokens={},u=0;function h(e){c[e]=u++}h("NUMERICIDENTIFIER"),a[c.NUMERICIDENTIFIER]="0|[1-9]\\d*",h("NUMERICIDENTIFIERLOOSE"),a[c.NUMERICIDENTIFIERLOOSE]="[0-9]+",h("NONNUMERICIDENTIFIER"),a[c.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",h("MAINVERSION"),a[c.MAINVERSION]="("+a[c.NUMERICIDENTIFIER]+")\\.("+a[c.NUMERICIDENTIFIER]+")\\.("+a[c.NUMERICIDENTIFIER]+")",h("MAINVERSIONLOOSE"),a[c.MAINVERSIONLOOSE]="("+a[c.NUMERICIDENTIFIERLOOSE]+")\\.("+a[c.NUMERICIDENTIFIERLOOSE]+")\\.("+a[c.NUMERICIDENTIFIERLOOSE]+")",h("PRERELEASEIDENTIFIER"),a[c.PRERELEASEIDENTIFIER]="(?:"+a[c.NUMERICIDENTIFIER]+"|"+a[c.NONNUMERICIDENTIFIER]+")",h("PRERELEASEIDENTIFIERLOOSE"),a[c.PRERELEASEIDENTIFIERLOOSE]="(?:"+a[c.NUMERICIDENTIFIERLOOSE]+"|"+a[c.NONNUMERICIDENTIFIER]+")",h("PRERELEASE"),a[c.PRERELEASE]="(?:-("+a[c.PRERELEASEIDENTIFIER]+"(?:\\."+a[c.PRERELEASEIDENTIFIER]+")*))",h("PRERELEASELOOSE"),a[c.PRERELEASELOOSE]="(?:-?("+a[c.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+a[c.PRERELEASEIDENTIFIERLOOSE]+")*))",h("BUILDIDENTIFIER"),a[c.BUILDIDENTIFIER]="[0-9A-Za-z-]+",h("BUILD"),a[c.BUILD]="(?:\\+("+a[c.BUILDIDENTIFIER]+"(?:\\."+a[c.BUILDIDENTIFIER]+")*))",h("FULL"),h("FULLPLAIN"),a[c.FULLPLAIN]="v?"+a[c.MAINVERSION]+a[c.PRERELEASE]+"?"+a[c.BUILD]+"?",a[c.FULL]="^"+a[c.FULLPLAIN]+"$",h("LOOSEPLAIN"),a[c.LOOSEPLAIN]="[v=\\s]*"+a[c.MAINVERSIONLOOSE]+a[c.PRERELEASELOOSE]+"?"+a[c.BUILD]+"?",h("LOOSE"),a[c.LOOSE]="^"+a[c.LOOSEPLAIN]+"$",h("GTLT"),a[c.GTLT]="((?:<|>)?=?)",h("XRANGEIDENTIFIERLOOSE"),a[c.XRANGEIDENTIFIERLOOSE]=a[c.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",h("XRANGEIDENTIFIER"),a[c.XRANGEIDENTIFIER]=a[c.NUMERICIDENTIFIER]+"|x|X|\\*",h("XRANGEPLAIN"),a[c.XRANGEPLAIN]="[v=\\s]*("+a[c.XRANGEIDENTIFIER]+")(?:\\.("+a[c.XRANGEIDENTIFIER]+")(?:\\.("+a[c.XRANGEIDENTIFIER]+")(?:"+a[c.PRERELEASE]+")?"+a[c.BUILD]+"?)?)?",h("XRANGEPLAINLOOSE"),a[c.XRANGEPLAINLOOSE]="[v=\\s]*("+a[c.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+a[c.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+a[c.XRANGEIDENTIFIERLOOSE]+")(?:"+a[c.PRERELEASELOOSE]+")?"+a[c.BUILD]+"?)?)?",h("XRANGE"),a[c.XRANGE]="^"+a[c.GTLT]+"\\s*"+a[c.XRANGEPLAIN]+"$",h("XRANGELOOSE"),a[c.XRANGELOOSE]="^"+a[c.GTLT]+"\\s*"+a[c.XRANGEPLAINLOOSE]+"$",h("COERCE"),a[c.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",h("COERCERTL"),o[c.COERCERTL]=new RegExp(a[c.COERCE],"g"),h("LONETILDE"),a[c.LONETILDE]="(?:~>?)",h("TILDETRIM"),a[c.TILDETRIM]="(\\s*)"+a[c.LONETILDE]+"\\s+",o[c.TILDETRIM]=new RegExp(a[c.TILDETRIM],"g");h("TILDE"),a[c.TILDE]="^"+a[c.LONETILDE]+a[c.XRANGEPLAIN]+"$",h("TILDELOOSE"),a[c.TILDELOOSE]="^"+a[c.LONETILDE]+a[c.XRANGEPLAINLOOSE]+"$",h("LONECARET"),a[c.LONECARET]="(?:\\^)",h("CARETTRIM"),a[c.CARETTRIM]="(\\s*)"+a[c.LONECARET]+"\\s+",o[c.CARETTRIM]=new RegExp(a[c.CARETTRIM],"g");h("CARET"),a[c.CARET]="^"+a[c.LONECARET]+a[c.XRANGEPLAIN]+"$",h("CARETLOOSE"),a[c.CARETLOOSE]="^"+a[c.LONECARET]+a[c.XRANGEPLAINLOOSE]+"$",h("COMPARATORLOOSE"),a[c.COMPARATORLOOSE]="^"+a[c.GTLT]+"\\s*("+a[c.LOOSEPLAIN]+")$|^$",h("COMPARATOR"),a[c.COMPARATOR]="^"+a[c.GTLT]+"\\s*("+a[c.FULLPLAIN]+")$|^$",h("COMPARATORTRIM"),a[c.COMPARATORTRIM]="(\\s*)"+a[c.GTLT]+"\\s*("+a[c.LOOSEPLAIN]+"|"+a[c.XRANGEPLAIN]+")",o[c.COMPARATORTRIM]=new RegExp(a[c.COMPARATORTRIM],"g");h("HYPHENRANGE"),a[c.HYPHENRANGE]="^\\s*("+a[c.XRANGEPLAIN]+")\\s+-\\s+("+a[c.XRANGEPLAIN]+")\\s*$",h("HYPHENRANGELOOSE"),a[c.HYPHENRANGELOOSE]="^\\s*("+a[c.XRANGEPLAINLOOSE]+")\\s+-\\s+("+a[c.XRANGEPLAINLOOSE]+")\\s*$",h("STAR"),a[c.STAR]="(<|>)?=?\\s*\\*";for(var l=0;l<u;l++)n(l,a[l]),o[l]||(o[l]=new RegExp(a[l]));function f(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof d)return e;if("string"!=typeof e)return null;if(e.length>i)return null;if(!(t.loose?o[c.LOOSE]:o[c.FULL]).test(e))return null;try{return new d(e,t)}catch(e){return null}}function d(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof d){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof d))return new d(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?o[c.LOOSE]:o[c.FULL]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}t.parse=f,t.valid=function(e,t){var r=f(e,t);return r?r.version:null},t.clean=function(e,t){var r=f(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=d,d.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},d.prototype.toString=function(){return this.version},d.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof d||(e=new d(e,this.options)),this.compareMain(e)||this.comparePre(e)},d.prototype.compareMain=function(e){return e instanceof d||(e=new d(e,this.options)),A(this.major,e.major)||A(this.minor,e.minor)||A(this.patch,e.patch)},d.prototype.comparePre=function(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return A(r,i)}while(++t)},d.prototype.compareBuild=function(e){e instanceof d||(e=new d(e,this.options));var t=0;do{var r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return A(r,i)}while(++t)},d.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new d(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(_(e,t))return null;var r=f(e),n=f(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var s="prerelease"}for(var o in r)if(("major"===o||"minor"===o||"patch"===o)&&r[o]!==n[o])return i+o;return s},t.compareIdentifiers=A;var p=/^[0-9]+$/;function A(e,t){var r=p.test(e),n=p.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function g(e,t,r){return new d(e,r).compare(new d(t,r))}function y(e,t,r){return g(e,t,r)>0}function m(e,t,r){return g(e,t,r)<0}function _(e,t,r){return 0===g(e,t,r)}function b(e,t,r){return 0!==g(e,t,r)}function w(e,t,r){return g(e,t,r)>=0}function v(e,t,r){return g(e,t,r)<=0}function E(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return _(e,r,n);case"!=":return b(e,r,n);case">":return y(e,r,n);case">=":return w(e,r,n);case"<":return m(e,r,n);case"<=":return v(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function S(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof S){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof S))return new S(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===C?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return A(t,e)},t.major=function(e,t){return new d(e,t).major},t.minor=function(e,t){return new d(e,t).minor},t.patch=function(e,t){return new d(e,t).patch},t.compare=g,t.compareLoose=function(e,t){return g(e,t,!0)},t.compareBuild=function(e,t,r){var n=new d(e,r),i=new d(t,r);return n.compare(i)||n.compareBuild(i)},t.rcompare=function(e,t,r){return g(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compareBuild(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.compareBuild(n,e,r)}))},t.gt=y,t.lt=m,t.eq=_,t.neq=b,t.gte=w,t.lte=v,t.cmp=E,t.Comparator=S;var C={};function k(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof k)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new k(e.raw,t);if(e instanceof S)return new k(e.value,t);if(!(this instanceof k))return new k(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function I(e,t){for(var r=!0,n=e.slice(),i=n.pop();r&&n.length;)r=n.every((function(e){return i.intersects(e,t)})),i=n.pop();return r}function T(e){return!e||"x"===e.toLowerCase()||"*"===e}function R(e,t,r,n,i,s,o,a,c,u,h,l,f){return((t=T(r)?"":T(n)?">="+r+".0.0":T(i)?">="+r+"."+n+".0":">="+t)+" "+(a=T(c)?"":T(u)?"<"+(+c+1)+".0.0":T(h)?"<"+c+"."+(+u+1)+".0":l?"<="+c+"."+u+"."+h+"-"+l:"<="+a)).trim()}function N(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==C&&e[i].semver.prerelease.length>0){var s=e[i].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}function B(e,t,r){try{t=new k(t,r)}catch(e){return!1}return t.test(e)}function O(e,t,r,n){var i,s,o,a,c;switch(e=new d(e,n),t=new k(t,n),r){case">":i=y,s=v,o=m,a=">",c=">=";break;case"<":i=m,s=w,o=y,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(B(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var h=t.set[u],l=null,f=null;if(h.forEach((function(e){e.semver===C&&(e=new S(">=0.0.0")),l=l||e,f=f||e,i(e.semver,l.semver,n)?l=e:o(e.semver,f.semver,n)&&(f=e)})),l.operator===a||l.operator===c)return!1;if((!f.operator||f.operator===a)&&s(e,f.semver))return!1;if(f.operator===c&&o(e,f.semver))return!1}return!0}S.prototype.parse=function(e){var t=this.options.loose?o[c.COMPARATORLOOSE]:o[c.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new d(r[2],this.options.loose):this.semver=C},S.prototype.toString=function(){return this.value},S.prototype.test=function(e){if(n("Comparator.test",e,this.options.loose),this.semver===C||e===C)return!0;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}return E(e,this.operator,this.semver,this.options)},S.prototype.intersects=function(e,t){if(!(e instanceof S))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(r=new k(e.value,t),B(this.value,r,t));if(""===e.operator)return""===e.value||(r=new k(this.value,t),B(e.semver,r,t));var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=E(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=E(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||s&&o||a||c},t.Range=k,k.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},k.prototype.toString=function(){return this.range},k.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?o[c.HYPHENRANGELOOSE]:o[c.HYPHENRANGE];e=e.replace(r,R),n("hyphen replace",e),e=e.replace(o[c.COMPARATORTRIM],"$1$2$3"),n("comparator trim",e,o[c.COMPARATORTRIM]),e=(e=(e=e.replace(o[c.TILDETRIM],"$1~")).replace(o[c.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=t?o[c.COMPARATORLOOSE]:o[c.COMPARATOR],s=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?o[c.CARETLOOSE]:o[c.CARET];return e.replace(r,(function(t,r,i,s,o){var a;return n("caret",e,t,r,i,s,o),T(r)?a="":T(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":T(s)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":o?(n("replaceCaret pr",o),a="0"===r?"0"===i?">="+r+"."+i+"."+s+"-"+o+" <"+r+"."+i+"."+(+s+1):">="+r+"."+i+"."+s+"-"+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+s+"-"+o+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+s+" <"+r+"."+i+"."+(+s+1):">="+r+"."+i+"."+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+s+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?o[c.TILDELOOSE]:o[c.TILDE];return e.replace(r,(function(t,r,i,s,o){var a;return n("tilde",e,t,r,i,s,o),T(r)?a="":T(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":T(s)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":o?(n("replaceTilde pr",o),a=">="+r+"."+i+"."+s+"-"+o+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+s+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?o[c.XRANGELOOSE]:o[c.XRANGE];return e.replace(r,(function(r,i,s,o,a,c){n("xRange",e,r,i,s,o,a,c);var u=T(s),h=u||T(o),l=h||T(a),f=l;return"="===i&&f&&(i=""),c=t.includePrerelease?"-0":"",u?r=">"===i||"<"===i?"<0.0.0-0":"*":i&&f?(h&&(o=0),a=0,">"===i?(i=">=",h?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):"<="===i&&(i="<",h?s=+s+1:o=+o+1),r=i+s+"."+o+"."+a+c):h?r=">="+s+".0.0"+c+" <"+(+s+1)+".0.0"+c:l&&(r=">="+s+"."+o+".0"+c+" <"+s+"."+(+o+1)+".0"+c),n("xRange return",r),r}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[c.STAR],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s=s.map((function(e){return new S(e,this.options)}),this)},k.prototype.intersects=function(e,t){if(!(e instanceof k))throw new TypeError("a Range is required");return this.set.some((function(r){return I(r,t)&&e.set.some((function(e){return I(e,t)&&r.every((function(r){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new k(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},k.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(N(this.set[t],e,this.options))return!0;return!1},t.satisfies=B,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var s=new k(t,r)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(n&&-1!==i.compare(e)||(i=new d(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var s=new k(t,r)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(n&&1!==i.compare(e)||(i=new d(n=e,r)))})),n},t.minVersion=function(e,t){e=new k(e,t);var r=new d("0.0.0");if(e.test(r))return r;if(r=new d("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new d(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!y(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new k(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return O(e,t,"<",r)},t.gtr=function(e,t,r){return O(e,t,">",r)},t.outside=O,t.prerelease=function(e,t){var r=f(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new k(e,r),t=new k(t,r),e.intersects(t)},t.coerce=function(e,t){if(e instanceof d)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var r=null;if((t=t||{}).rtl){for(var n;(n=o[c.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),o[c.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;o[c.COERCERTL].lastIndex=-1}else r=e.match(o[c.COERCE]);if(null===r)return null;return f(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),t)}}).call(this,r(/*! ./../process/browser.js */2))},
/*!****************************************************************!*\
  !*** ./node_modules/libp2p-gossipsub/src/message/rpc.proto.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="\nmessage RPC {\n  repeated SubOpts subscriptions = 1;\n  repeated Message msgs = 2;\n  optional ControlMessage control = 3;\n\n  message SubOpts {\n    optional bool subscribe = 1; // subscribe or unsubcribe\n    optional string topicID = 2;\n  }\n\n  message Message {\n    optional bytes from = 1;\n    optional bytes data = 2;\n    optional bytes seqno = 3;\n    repeated string topicIDs = 4; \n    optional bytes signature = 5;\n    optional bytes key = 6;\n  }\n\n  message ControlMessage {\n    repeated ControlIHave ihave = 1;\n    repeated ControlIWant iwant = 2;\n    repeated ControlGraft graft = 3;\n    repeated ControlPrune prune = 4;\n  }\n\n  message ControlIHave {\n    optional string topicID = 1;\n    repeated string messageIDs = 2;\n  }\n\n  message ControlIWant {\n    repeated string messageIDs = 1;  \n  }\n\n  message ControlGraft {\n    optional string topicID = 1;\n  }\n\n  message ControlPrune {\n    optional string topicID = 1;\n  }\n}"},
/*!*****************************************************************************!*\
  !*** ./node_modules/libp2p-gossipsub/src/message/topic-descriptor.proto.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="\nmessage TopicDescriptor {\n  optional string name = 1;\n  optional AuthOpts auth = 2;\n  optional EncOpts enc = 3;\n\n  message AuthOpts {\n    optional AuthMode mode = 1;\n    repeated bytes keys = 2; // root keys to trust\n\n    enum AuthMode {\n      NONE = 0; // no authentication, anyone can publish\n      KEY = 1; // only messages signed by keys in the topic descriptor are accepted\n      WOT = 2; // web of trust, certificates can allow publisher set to grow\n    }\n  }\n\n  message EncOpts {\n    optional EncMode mode = 1;\n    repeated bytes keyHashes = 2; // the hashes of the shared keys used (salted)\n\n    enum EncMode {\n      NONE = 0; // no encryption, anyone can read\n      SHAREDKEY = 1; // messages are encrypted with shared key\n      WOT = 2; // web of trust, certificates can allow publisher set to grow\n    }\n  }\n}"},
/*!***********************************************************!*\
  !*** ./node_modules/libp2p-gossipsub/src/messageCache.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{utils:n}=r(/*! libp2p-pubsub */86);class i{constructor(e,t){this.msgID=e,this.topics=t}}e.exports={CacheEntry:i,MessageCache:class{constructor(e,t){this.msgs=new Map,this.history=[];for(let e=0;e<t;e++)this.history[e]=[];this.gossip=e}put(e){const t=n.msgId(e.from,e.seqno);this.msgs.set(t,e),this.history[0].push(new i(t,e.topicIDs))}get(e){return this.msgs.get(e)}getGossipIDs(e){const t=[];for(let r=0;r<this.gossip;r++)this.history[r].forEach(r=>{for(const n of r.topics)if(n===e){t.push(r.msgID);break}});return t}shift(){this.history[this.history.length-1].forEach(e=>{this.msgs.delete(e.msgID)}),this.history.pop(),this.history.unshift([])}}}},
/*!********************************************************!*\
  !*** ./node_modules/libp2p-gossipsub/src/heartbeat.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./constants */414),i=r(/*! err-code */8);e.exports=class{constructor(e){this.gossipsub=e}start(e){if(this._heartbeatTimer){const t="Heartbeat timer is already running";return this.gossipsub.log(t),e(i(new Error(t),"ERR_HEARTBEAT_ALREADY_RUNNING"))}const t={_onCancel:null,_timeoutId:null,runPeriodically:(e,r)=>{t._timeoutId=setInterval(e,r)},cancel:e=>{clearTimeout(t._timeoutId),e()}},r=this._heartbeat.bind(this);setTimeout(()=>{r(),t.runPeriodically(r,n.GossipSubHeartbeatInterval)},n.GossipSubHeartbeatInitialDelay),this._heartbeatTimer=t,e()}stop(e){if(!this._heartbeatTimer){const t="Heartbeat timer is not running";return this.gossipsub.log(t),e(i(new Error(t),"ERR_HEARTBEAT_NO_RUNNING"))}this._heartbeatTimer.cancel(()=>{this._heartbeatTimer=null,e()})}_heartbeat(){this.gossipsub._flush();const e=new Map,t=new Map;this.gossipsub.mesh.forEach((r,i)=>{if(r.size<n.GossipSubDlo){const t=n.GossipSubD-r.size;this.gossipsub._getPeers(i,t).forEach(t=>{if(r.has(t))return;this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",t.info.id.toB58String(),i),r.add(t);const n=e.get(t);n?n.push(i):e.set(t,[i])})}if(r.size>n.GossipSubDhi){const e=r.size-n.GossipSubD;let s=Array.from(r);(s=(s=this.gossipsub._shufflePeers(s)).slice(0,e)).forEach(e=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",e.info.id.toB58String(),i),r.delete(e);const n=t.get(e);n?n.push(i):t.set(e,[i])})}this.gossipsub._emitGossip(i,r)});const r=this.gossipsub._now();this.gossipsub.lastpub.forEach((e,t)=>{e+n.GossipSubFanoutTTL<r&&(this.gossipsub.fanout.delete(t),this.gossipsub.lastpub.delete(t))}),this.gossipsub.fanout.forEach((e,t)=>{if(e.forEach(t=>{this.gossipsub.topics.has(t)&&e.delete(t)}),e.size<n.GossipSubD){const r=n.GossipSubD-e.size;this.gossipsub._getPeers(t,r).forEach(t=>{e.has(t)&&e.add(t)})}this.gossipsub._emitGossip(t,e)}),this.gossipsub._sendGraftPrune(e,t),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}}},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs/src/core/runtime/libp2p-browser.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! libp2p-websockets */415),i=r(/*! libp2p-webrtc-star */914),s=r(/*! libp2p-websocket-star-multi */940),o=r(/*! pull-mplex */950),a=r(/*! libp2p-secio */956),c=r(/*! libp2p-bootstrap */968),u=r(/*! libp2p-kad-dht */969),h=r(/*! libp2p-gossipsub */404),l=r(/*! libp2p */1025),f=r(/*! merge-options */51),d=r(/*! multiaddr */15);e.exports=class extends l{constructor(e){const t=new i({id:e.peerInfo.id}),r=e.peerInfo.multiaddrs.toArray().map(String).filter(e=>e.includes("p2p-websocket-star"));e.peerInfo.multiaddrs.replace(r.map(d),"/p2p-websocket-star");const l=new s({servers:r,id:e.peerInfo.id,ignore_no_online:!r.length||e.wsStarIgnoreErrors}),p={switch:{denyTTL:12e4,denyAttempts:5,maxParallelDials:100,maxColdCalls:25,dialTimeout:2e4},modules:{transport:[n,t,l],streamMuxer:[o],connEncryption:[a],peerDiscovery:[t.discovery,l.discovery,c],dht:u,pubsub:h},config:{peerDiscovery:{autoDial:!0,bootstrap:{enabled:!0},webRTCStar:{enabled:!0},websocketStar:{enabled:!0}},dht:{enabled:!1},pubsub:{enabled:!0,emitSelf:!0}}};super(f(p,e))}}},
/*!****************************************!*\
  !*** ./node_modules/pull-ws/client.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./web-socket */906),i=r(/*! ./duplex */908),s=r(/*! ./ws-url */912);function o(e){return"function"==typeof e}e.exports=function(e,t){o(t)&&(t={onConnect:t});var r="undefined"==typeof window?{}:window.location,a=s(e,r),c=new n(a),u=i(c,t);return u.remoteAddress=a,u.close=function(e){o(e)&&c.addEventListener("close",e),c.close()},c.addEventListener("open",(function(e){t&&o(t.onConnect)&&t.onConnect(null,u)})),u},e.exports.connect=e.exports},
/*!********************************************!*\
  !*** ./node_modules/pull-ws/web-socket.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports="undefined"==typeof WebSocket?r(/*! ws */907):WebSocket},
/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!****************************************!*\
  !*** ./node_modules/pull-ws/duplex.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./source */909),i=r(/*! ./sink */910);e.exports=function(e,t){var r=e.upgradeReq||{};t&&t.binaryType?e.binaryType=t.binaryType:t&&t.binary&&(e.binaryType="arraybuffer");return{source:n(e,t&&t.onConnect),sink:i(e,t),headers:r.headers,url:r.url,upgrade:r.upgrade,method:r.method}}},
/*!****************************************!*\
  !*** ./node_modules/pull-ws/source.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! safe-buffer */6).Buffer;e.exports=function(e,t){var r,i,s=[],o=!1;return e.addEventListener("message",(function(e){var t,i=e.data;if(((t=i)instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength)&&(i=n.from(i)),r)return r(null,i);s.push(i)})),e.addEventListener("close",(function(e){i||r&&r(i=!0)})),e.addEventListener("error",(function(e){i||(i=e,o||(o=!0,t&&t(e)),r&&r(i))})),e.addEventListener("open",(function(e){o||i||(o=!0)})),function(t,n){if(r=null,i)return n(i);t?(r=n,e.close()):s.length>0?n(null,s.shift()):r=n}}},
/*!**************************************!*\
  !*** ./node_modules/pull-ws/sink.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t,n){var i=r(/*! ./ready */911),s=void 0!==t?t:n.nextTick;e.exports=function(e,t){return function(r){var n=!1!==(t=t||{}).closeOnEnd,o="function"==typeof t?t:t.onClose;r(null,(function t(a,c){a?n&&e.readyState<=1&&(o&&e.addEventListener("close",(function(e){if(e.wasClean||1006===e.code)o();else{var t=new Error("ws error");t.event=e,o(t)}})),e.close()):i(e,(function(n){if(n)return r(n,(function(){}));e.send(c),s((function(){r(null,t)}))}))}))}}}).call(this,r(/*! ./../timers-browserify/main.js */41).setImmediate,r(/*! ./../process/browser.js */2))},
/*!***************************************!*\
  !*** ./node_modules/pull-ws/ready.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){var r=e&&(e.removeEventListener||e.removeListener);function n(){"function"==typeof r&&(r.call(e,"open",i),r.call(e,"error",s))}function i(e){n(),t()}function s(e){n(),t(e)}return e.readyState>=2?t(!0):1===e.readyState?t():(e.addEventListener("open",i),void e.addEventListener("error",s))}},
/*!****************************************!*\
  !*** ./node_modules/pull-ws/ws-url.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var{relative:n}=r(/*! iso-url */132),i={http:"ws",https:"wss"};e.exports=function(e,t){return n(e,t,i,"ws")}},
/*!****************************************************************!*\
  !*** ./node_modules/libp2p-websockets/src/listener.browser.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(){throw new Error("WebSocket Servers can not be created in the browser!")}},
/*!******************************************************!*\
  !*** ./node_modules/libp2p-webrtc-star/src/index.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1)("libp2p:webrtc-star"),i=r(/*! multiaddr */15),s=r(/*! mafmt */43),o=r(/*! class-is */34),a=r(/*! socket.io-client */417),c=r(/*! events */5).EventEmitter,u=r(/*! simple-peer */935),h=r(/*! peer-id */7),l=r(/*! peer-info */21),f=r(/*! interface-connection */38).Connection,d=r(/*! stream-to-pull-stream */399),p=r(/*! once */31),A=r(/*! async/setImmediate */32),g=r(/*! webrtcsupport */938),y=r(/*! ./utils */939),m=y.cleanUrlSIO,_=y.cleanMultiaddr,b=p(()=>{}),w={transports:["websocket"],"force new connection":!0};e.exports=o(class{constructor(e){e=e||{},this.maSelf=void 0,this.sioOptions={transports:["websocket"],"force new connection":!0},e.wrtc&&(this.wrtc=e.wrtc),this.discovery=new c,this.discovery.tag="webRTCStar",this.discovery._isStarted=!1,this.discovery.start=e=>{this.discovery._isStarted=!0,A(e)},this.discovery.stop=e=>{this.discovery._isStarted=!1,A(e)},this.listenersRefs={},this._peerDiscovered=this._peerDiscovered.bind(this)}dial(e,t,r){"function"==typeof t&&(r=t,t={}),r=r?p(r):b;const i=(~~(1e9*Math.random())).toString(36)+Date.now(),s=this.listenersRefs[Object.keys(this.listenersRefs)[0]].io,o={initiator:!0,trickle:!1};let a;this.wrtc&&(o.wrtc=this.wrtc);try{a=new u(o)}catch(e){return n("Could not create connection:",e),r(e)}const c=new f(d.duplex(a));let h=!1;return a.on("signal",t=>{s.emit("ss-handshake",{intentId:i,srcMultiaddr:this.maSelf.toString(),dstMultiaddr:e.toString(),signal:t})}),a.once("timeout",()=>r(new Error("timeout"))),a.once("error",e=>{h||r(e)}),s.on("ws-handshake",t=>{if(t.intentId===i&&t.err)return r(new Error(t.err));t.intentId===i&&t.answer&&(a.once("connect",()=>{h=!0,c.destroy=a.destroy.bind(a),a.once("close",()=>c.destroy()),c.getObservedAddrs=t=>t(null,[e]),r(null,c)}),a.signal(t.signal))}),c}createListener(e,t){"function"==typeof e&&(t=e,e={});const r=new c;return r.listen=(e,i)=>{if(i=i?p(i):b,!g.support&&!this.wrtc)return A(()=>i(new Error("no WebRTC support")));this.maSelf=e;const s=m(e);n("Dialing to Signalling Server on: "+s),r.io=a.connect(s,w),r.io.once("connect_error",i),r.io.once("error",e=>{r.emit("error",e),r.emit("close")}),r.io.on("ws-handshake",(function(e){if(e.answer||e.err)return;const s={trickle:!1};o.wrtc&&(s.wrtc=o.wrtc);let a;try{a=new u(s)}catch(e){return n("Could not create incoming connection:",e),i(e)}const c=new f(d.duplex(a));a.once("connect",()=>{c.getObservedAddrs=t=>t(null,[e.srcMultiaddr]),r.emit("connection",c),t(c)}),a.once("signal",t=>{e.signal=t,e.answer=!0,r.io.emit("ss-handshake",e)}),a.signal(e.signal)})),r.io.on("ws-peer",this._peerDiscovered),r.io.on("connect",()=>{r.io.emit("ss-join",e.toString())}),r.io.once("connect",()=>{r.emit("listening"),i()});const o=this},r.close=e=>{e=e?p(e):b,r.io.emit("ss-leave"),A(()=>{r.emit("close"),e()})},r.getAddrs=e=>{A(()=>e(null,[this.maSelf]))},this.listenersRefs[i.toString()]=r,r}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>!(e.protoNames().indexOf("p2p-circuit")>-1)&&s.WebRTCStar.matches(e))}_peerDiscovered(e){if(!this.discovery._isStarted)return;n("Peer Discovered:",e);const t=(e=_(e)).split("/ipfs/"),r=t[t.length-1],s=h.createFromB58String(r),o=new l(s);o.multiaddrs.add(i(e)),this.discovery.emit("peer",o)}},{className:"WebRTCStar",symbolName:"@libp2p/js-libp2p-webrtc-star/webrtcstar"})},
/*!**************************************************!*\
  !*** ./node_modules/socket.io-client/lib/url.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! parseuri */418),i=r(/*! debug */1)("socket.io-client:url");e.exports=function(e,t){var r=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),r=n(e));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(t&&t.port===r.port?"":":"+r.port),r}},
/*!*******************************************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/socket.io-parser/node_modules/debug/src/browser.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(n){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(/*! ./debug */917)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))})),e.splice(s,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,r(/*! ./../../../../../../process/browser.js */2))},
/*!*****************************************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/socket.io-parser/node_modules/debug/src/debug.js ***!
  \*****************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,i=+new Date,s=i-(r||i);e.diff=s,e.prev=r,e.curr=i,r=i;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;c++;var i=t.formatters[n];if("function"==typeof i){var s=o[c];r=i.call(e,s),o.splice(c,1),c--}return r})),t.formatArgs.call(e,o),(n.log||t.log||console.log.bind(console)).apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=i,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var s=t.instances[r];s.enabled=t.enabled(s.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(/*! ms */918),t.instances=[],t.names=[],t.skips=[],t.formatters={}},
/*!****************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/ms/index.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=1e3,n=60*r,i=60*n,s=24*i,o=365.25*s;function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*o;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?a(c=e,s,"day")||a(c,i,"hour")||a(c,n,"minute")||a(c,r,"second")||c+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},
/*!*******************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/socket.io-parser/binary.js ***!
  \*******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! isarray */235),i=r(/*! ./is-buffer */419),s=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);t.deconstructPacket=function(e){var t=[],r=e.data,s=e;return s.data=function e(t,r){if(!t)return t;if(i(t)){var s={_placeholder:!0,num:r.length};return r.push(t),s}if(n(t)){for(var o=new Array(t.length),a=0;a<t.length;a++)o[a]=e(t[a],r);return o}if("object"==typeof t&&!(t instanceof Date)){o={};for(var c in t)o[c]=e(t[c],r);return o}return t}(r,t),s.attachments=t.length,{packet:s,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,r){if(!t)return t;if(t&&t._placeholder)return r[t.num];if(n(t))for(var i=0;i<t.length;i++)t[i]=e(t[i],r);else if("object"==typeof t)for(var s in t)t[s]=e(t[s],r);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var r=0,s=e;!function e(c,u,h){if(!c)return c;if(o&&c instanceof Blob||a&&c instanceof File){r++;var l=new FileReader;l.onload=function(){h?h[u]=this.result:s=this.result,--r||t(s)},l.readAsArrayBuffer(c)}else if(n(c))for(var f=0;f<c.length;f++)e(c[f],f,c);else if("object"==typeof c&&!i(c))for(var d in c)e(c[d],d,c)}(s),r||t(s)}},
/*!****************************************************!*\
  !*** ./node_modules/engine.io-client/lib/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ./socket */921),e.exports.parser=r(/*! engine.io-parser */88)},
/*!*****************************************************!*\
  !*** ./node_modules/engine.io-client/lib/socket.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./transports/index */421),i=r(/*! component-emitter */87),s=r(/*! debug */1)("engine.io-client:socket"),o=r(/*! indexof */425),a=r(/*! engine.io-parser */88),c=r(/*! parseuri */418),u=r(/*! parseqs */158);function h(e,t){if(!(this instanceof h))return new h(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=h,h.priorWebsocketSuccess=!1,i(h.prototype),h.protocol=a.protocol,h.Socket=h,h.Transport=r(/*! ./transport */237),h.transports=r(/*! ./transports/index */421),h.parser=r(/*! engine.io-parser */88),h.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(this.query);t.EIO=a.protocol,t.transport=e;var r=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new n[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative})},h.prototype.open=function(){var e;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},h.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},h.prototype.probe=function(e){s('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;function i(){if(n.onlyBinaryUpgrades){var i=!this.supportsBinary&&n.transport.supportsBinary;r=r||i}r||(s('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(i){if(!r)if("pong"===i.type&&"probe"===i.data){if(s('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;h.priorWebsocketSuccess="websocket"===t.name,s('pausing current transport "%s"',n.transport.name),n.transport.pause((function(){r||"closed"!==n.readyState&&(s("changing transport and sending upgrade packet"),f(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())}))}else{s('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,n.emit("upgradeError",o)}})))}function o(){r||(r=!0,f(),t.close(),t=null)}function a(r){var i=new Error("probe error: "+r);i.transport=t.name,o(),s('probe transport "%s" failed because of error: %s',e,r),n.emit("upgradeError",i)}function c(){a("transport closed")}function u(){a("socket closed")}function l(e){t&&e.name!==t.name&&(s('"%s" works - aborting "%s"',e.name,t.name),o())}function f(){t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",c),n.removeListener("close",u),n.removeListener("upgrading",l)}h.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",a),t.once("close",c),this.once("close",u),this.once("upgrading",l),t.open()},h.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},h.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},h.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},h.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},h.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},h.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},h.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},h.prototype.write=h.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},h.prototype.sendPacket=function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var i={type:e,data:t,options:r};this.emit("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}},h.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():t()})):this.upgrading?n():t()}function t(){e.onClose("forced close"),s("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return this},h.prototype.onError=function(e){s("socket error %j",e),h.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},h.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},h.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~o(this.transports,e[r])&&t.push(e[r]);return t}},
/*!****************************************!*\
  !*** ./node_modules/has-cors/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},
/*!*********************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling-xhr.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! xmlhttprequest-ssl */236),i=r(/*! ./polling */422),s=r(/*! component-emitter */87),o=r(/*! component-inherit */159),a=r(/*! debug */1)("engine.io-client:polling-xhr");function c(){}function u(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,r=location.port;r||(r=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}}function h(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=u,e.exports.Request=h,o(u,i),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new h(e)},u.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),i=this;n.on("success",t),n.on("error",(function(e){i.onError("xhr post error",e)})),this.sendXhr=n},u.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},s(h.prototype),h.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new n(e),r=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(r.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout((function(){r.onError("number"==typeof t.status?t.status:0)}),0))},a("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){r.onError(e)}),0)}"undefined"!=typeof document&&(this.index=h.requestsCount++,h.requests[this.index]=this)},h.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},h.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},h.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},h.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete h.requests[this.index],this.xhr=null}},h.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},h.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},h.prototype.abort=function(){this.cleanup()},h.requestsCount=0,h.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",f);else if("function"==typeof addEventListener){var l="onpagehide"in self?"pagehide":"unload";addEventListener(l,f,!1)}function f(){for(var e in h.requests)h.requests.hasOwnProperty(e)&&h.requests[e].abort()}},
/*!*********************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/engine.io-parser/lib/keys.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},
/*!*************************************************!*\
  !*** ./node_modules/arraybuffer.slice/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var i=new Uint8Array(e),s=new Uint8Array(r-t),o=t,a=0;o<r;o++,a++)s[a]=i[o];return s.buffer}},
/*!*************************************!*\
  !*** ./node_modules/after/index.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(){}e.exports=function(e,t,n){var i=!1;return n=n||r,s.count=e,0===e?t():s;function s(e,r){if(s.count<=0)throw new Error("after called too many times");--s.count,e?(i=!0,t(e),t=n):0!==s.count||i||t(null,r)}}},
/*!*********************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/engine.io-parser/lib/utf8.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var r,n,i,s=String.fromCharCode;function o(e){for(var t,r,n=[],i=0,s=e.length;i<s;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<s?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function a(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return s(e>>t&63|128)}function u(e,t){if(0==(4294967168&e))return s(e);var r="";return 0==(4294965248&e)?r=s(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),r=s(e>>12&15|224),r+=c(e,6)):0==(4292870144&e)&&(r=s(e>>18&7|240),r+=c(e,12),r+=c(e,6)),r+=s(63&e|128)}function h(){if(i>=n)throw Error("Invalid byte index");var e=255&r[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function l(e){var t,s;if(i>n)throw Error("Invalid byte index");if(i==n)return!1;if(t=255&r[i],i++,0==(128&t))return t;if(192==(224&t)){if((s=(31&t)<<6|h())>=128)return s;throw Error("Invalid continuation byte")}if(224==(240&t)){if((s=(15&t)<<12|h()<<6|h())>=2048)return a(s,e)?s:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(s=(7&t)<<18|h()<<12|h()<<6|h())>=65536&&s<=1114111)return s;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var r=!1!==(t=t||{}).strict,n=o(e),i=n.length,s=-1,a="";++s<i;)a+=u(n[s],r);return a},decode:function(e,t){var a=!1!==(t=t||{}).strict;r=o(e),n=r.length,i=0;for(var c,u=[];!1!==(c=l(a));)u.push(c);return function(e){for(var t,r=e.length,n=-1,i="";++n<r;)(t=e[n])>65535&&(i+=s((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=s(t);return i}(u)}}},
/*!*******************************************************************!*\
  !*** ./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<e.length;n++)r[e.charCodeAt(n)]=n;t.encode=function(t){var r,n=new Uint8Array(t),i=n.length,s="";for(r=0;r<i;r+=3)s+=e[n[r]>>2],s+=e[(3&n[r])<<4|n[r+1]>>4],s+=e[(15&n[r+1])<<2|n[r+2]>>6],s+=e[63&n[r+2]];return i%3==2?s=s.substring(0,s.length-1)+"=":i%3==1&&(s=s.substring(0,s.length-2)+"=="),s},t.decode=function(e){var t,n,i,s,o,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var h=new ArrayBuffer(a),l=new Uint8Array(h);for(t=0;t<c;t+=4)n=r[e.charCodeAt(t)],i=r[e.charCodeAt(t+1)],s=r[e.charCodeAt(t+2)],o=r[e.charCodeAt(t+3)],l[u++]=n<<2|i>>4,l[u++]=(15&i)<<4|s>>2,l[u++]=(3&s)<<6|63&o;return h}}()},
/*!************************************!*\
  !*** ./node_modules/blob/index.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=void 0!==r?r:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),s=r&&r.prototype.append&&r.prototype.getBlob;function o(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=r.buffer}return t}return e}))}function a(e,t){t=t||{};var n=new r;return o(e).forEach((function(e){n.append(e)})),t.type?n.getBlob(t.type):n.getBlob()}function c(e,t){return new Blob(o(e),t||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=n?i?Blob:c:s?a:void 0},
/*!***********************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/polling-jsonp.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! ./polling */422),i=r(/*! component-inherit */159);e.exports=h;var s,o=/\n/g,a=/\\n/g;function c(){}function u(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{}}function h(e){if(n.call(this,e),this.query=this.query||{},!s){var t=u();s=t.___eio=t.___eio||[]}this.index=s.length;var r=this;s.push((function(e){r.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){r.script&&(r.script.onerror=c)}),!1)}i(h,n),h.prototype.supportsBinary=!1,h.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},h.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},h.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n,i=document.createElement("form"),s=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=c,i.method="POST",i.setAttribute("accept-charset","utf-8"),s.name="d",i.appendChild(s),document.body.appendChild(i),this.form=i,this.area=s}function u(){h(),t()}function h(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),h(),e=e.replace(a,"\\\n"),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&u()}:this.iframe.onload=u}}).call(this,r(/*! ./../../../webpack/buildin/global.js */10))},
/*!*******************************************************************!*\
  !*** ./node_modules/engine.io-client/lib/transports/websocket.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n,i,s=r(/*! ../transport */237),o=r(/*! engine.io-parser */88),a=r(/*! parseqs */158),c=r(/*! component-inherit */159),u=r(/*! yeast */424),h=r(/*! debug */1)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof self&&(n=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{i=r(/*! ws */932)}catch(e){}var l=n||i;function f(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=n&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(l=i),s.call(this,e)}e.exports=f,c(f,s),f.prototype.name="websocket",f.prototype.supportsBinary=!0,f.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new l(e,t):new l(e):new l(e,t,r)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},f.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},f.prototype.write=function(e){var r=this;this.writable=!1;for(var n=e.length,i=0,s=n;i<s;i++)!function(e){o.encodePacket(e,r.supportsBinary,(function(i){if(!r.usingBrowserWebSocket){var s={};if(e.options&&(s.compress=e.options.compress),r.perMessageDeflate)("string"==typeof i?t.byteLength(i):i.length)<r.perMessageDeflate.threshold&&(s.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(i):r.ws.send(i,s)}catch(e){h("websocket closed before onclose event")}--n||a()}))}(e[i]);function a(){r.emit("flush"),setTimeout((function(){r.writable=!0,r.emit("drain")}),0)}},f.prototype.onClose=function(){s.prototype.onClose.call(this)},f.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},f.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e},f.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===f.prototype.name)}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!****************************************!*\
  !*** ./node_modules/to-array/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}},
/*!**************************************!*\
  !*** ./node_modules/backo2/index.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},
/*!*******************************************!*\
  !*** ./node_modules/simple-peer/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){var n=r(/*! debug */1)("simple-peer"),i=r(/*! get-browser-rtc */936),s=r(/*! randombytes */429),o=r(/*! readable-stream */37),a=r(/*! queue-microtask */937),c=65536,u=5e3,h=5e3;function l(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function f(e,t){var r=new Error(e);return r.code=t,r}class d extends o.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||d.channelConfig,this.config=Object.assign({},d.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||u,this.destroyed=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:i(),!this._wrtc)throw"undefined"==typeof window?f("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT"):f("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void a(()=>this.destroy(f(e,"ERR_PC_CONSTRUCTOR")))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},this.initiator?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this.initiator&&this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw f("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(f(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(f("signal() called with invalid signal data","ERR_SIGNALING"))}_addIceCandidate(e){var t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")?function(e){console.warn(e)}("Ignoring unsupported ICE candidate."):this.destroy(f(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,t){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(f(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:t}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}addTrack(e,t){this._debug("addTrack()");var r=this._senderMap.get(e)||new Map,n=r.get(t);if(n)throw n.removed?f("Track has been removed. You should enable/disable tracks that you want to re-add.","ERR_SENDER_REMOVED"):f("Track has already been added to that stream.","ERR_SENDER_ALREADY_ADDED");n=this._pc.addTrack(e,t),r.set(t,n),this._senderMap.set(e,r),this._needsNegotiation()}replaceTrack(e,t,r){this._debug("replaceTrack()");var n=this._senderMap.get(e),i=n?n.get(r):null;if(!i)throw f("Cannot replace track that was never added.","ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,n),null!=i.replaceTrack?i.replaceTrack(t):this.destroy(f("replaceTrack is not supported in this browser","ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){this._debug("removeSender()");var r=this._senderMap.get(e),n=r?r.get(t):null;if(!n)throw f("Cannot remove track that was never added.","ERR_TRACK_NOT_ADDED");try{n.removed=!0,this._pc.removeTrack(n)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(n):this.destroy(f(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating||(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.destroyed=!0,this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}}_setupData(e){if(!e.channel)return this.destroy(f("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=c),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{this.destroy(f(e,"ERR_DATA_CHANNEL"))};var t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},h)}_read(){}_write(e,t,r){if(this.destroyed)return r(f("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(f(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>c?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=r):r(null)}else this._debug("write before connect"),this._chunk=e,this._cb=r}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=l(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(f(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(f(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=l(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(f(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(f(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(f("Connection failed.","ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(f("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(f("Ice connection closed.","ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(r=>{var n=[];r.forEach(e=>{n.push(t(e))}),e(null,n)},t=>e(t)):this._pc.getStats.length>0?this._pc.getStats(r=>{if(!this.destroyed){var n=[];r.result().forEach(e=>{var r={};e.names().forEach(t=>{r[t]=e.stat(t)}),r.id=e.id,r.type=e.type,r.timestamp=e.timestamp,n.push(t(r))}),e(null,n)}},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,r)=>{if(this.destroyed)return;t&&(r=[]);var n={},i={},s={},o=!1;r.forEach(e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(n[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(i[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(s[e.id]=e)});const a=e=>{o=!0;var t=i[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var r=n[e.remoteCandidateId];r&&(r.ip||r.address)?(this.remoteAddress=r.ip||r.address,this.remotePort=Number(r.port)):r&&r.ipAddress?(this.remoteAddress=r.ipAddress,this.remotePort=Number(r.portNumber)):"string"==typeof e.googRemoteAddress&&(r=e.googRemoteAddress.split(":"),this.remoteAddress=r[0],this.remotePort=Number(r[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(r.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)}),o||Object.keys(s).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(f(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var c=this._cb;this._cb=null,c(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>c||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"!==this._pc.signalingState||this._firstStable||(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(!this.destroyed){var r=e.data;r instanceof ArrayBuffer&&(r=t.from(r)),this.push(r)}}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),a(()=>{this.emit("stream",t)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],n.apply(null,e)}}d.WEBRTC_SUPPORT=!!i(),d.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}],sdpSemantics:"unified-plan"},d.channelConfig={},e.exports=d}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***********************************************!*\
  !*** ./node_modules/get-browser-rtc/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},
/*!***********************************************!*\
  !*** ./node_modules/queue-microtask/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){let r;e.exports="function"==typeof queueMicrotask?queueMicrotask:e=>(r||(r=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))},
/*!*****************************************************!*\
  !*** ./node_modules/webrtcsupport/index-browser.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r,n;self.mozRTCPeerConnection||navigator.mozGetUserMedia?(r="moz",n=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(self.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(r="webkit",n=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var i=self.RTCPeerConnection||self.mozRTCPeerConnection||self.webkitRTCPeerConnection,s=self.mozRTCIceCandidate||self.RTCIceCandidate,o=self.mozRTCSessionDescription||self.RTCSessionDescription,a=self.webkitMediaStream||self.MediaStream,c="https:"===self.location.protocol&&("webkit"===r&&n>=26||"moz"===r&&n>=33),u=self.AudioContext||self.webkitAudioContext,h=self.document&&document.createElement("video"),l=h&&h.canPlayType&&"probably"===h.canPlayType('video/webm; codecs="vp8", vorbis'),f=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;e.exports={prefix:r,browserVersion:n,support:!!i&&!!f,supportRTCPeerConnection:!!i,supportVp8:l,supportGetUserMedia:!!f,supportDataChannel:!!(i&&i.prototype&&i.prototype.createDataChannel),supportWebAudio:!(!u||!u.prototype.createMediaStreamSource),supportMediaStream:!(!a||!a.prototype.removeTrack),supportScreenSharing:!!c,AudioContext:u,PeerConnection:i,SessionDescription:o,IceCandidate:s,MediaStream:a,getUserMedia:f}},
/*!******************************************************!*\
  !*** ./node_modules/libp2p-webrtc-star/src/utils.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multiaddr */15);(t=e.exports).cleanUrlSIO=function(e){const t=e.toString().split("/"),r=e.protos()[1].name,i=e.protos()[2].name,s=e.stringTuples()[1][1];if("tcp"!==r||"ws"!==i&&"wss"!==i)throw new Error("invalid multiaddr: "+e.toString());return n.isName(e)?"ws"===i?"http://"+t[2]+(80===s?"":":"+s):"wss"===i?"https://"+t[2]+(443===s?"":":"+s):void 0:"http://"+t[2]+":"+t[4]},t.cleanMultiaddr=function(e){const t="/libp2p-webrtc-star";if(-1!==e.indexOf(t)){e=e.substring(t.length,e.length);let r=n(e);const i=r.stringTuples().filter(e=>421===e[0])[0];e=(r=(r=(r=r.decapsulate("ipfs")).encapsulate("/p2p-webrtc-star")).encapsulate(`/ipfs/${i[1]}`)).toString()}return e}},
/*!***************************************************************!*\
  !*** ./node_modules/libp2p-websocket-star-multi/src/index.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1)("libp2p:websocket-star:multi"),i=r(/*! once */31),s=r(/*! events */5).EventEmitter,o=r(/*! async/map */116),a=r(/*! async/parallel */56),c=r(/*! multiaddr */15),u=r(/*! mafmt */43),h=r(/*! libp2p-websocket-star */941);e.exports=class{constructor(e){this.opt=e||{},this.servers=e.servers||[],this.ws=new h(this.opt),this.discovery=this.ws.discovery}dial(e,t,r){return n("dial",e),this.ws.dial(e,t,r)}createListener(e,t){"function"==typeof e&&(t=e,e={});const r=new s;return r.servers={},r.online=[],this.servers.forEach(n=>{const i=this.ws.createListener(e,t);i.once("error",()=>{}),i.url=n,r.servers[n]=i}),r.listen=(e,t)=>{const s=e.toString().split("ipfs/").pop();n("listen on %s server(s) with id %s",this.servers.length,s),a(this.servers.map(e=>r.servers[e]).map(e=>t=>{n("listen %s",e.url);const o=i(i=>(n("listen %s ok %s",e.url,!i),i?t(n(i)):(r.online.push(e),t())));setTimeout(o,this.opt.timeout||5e3,new Error("Timeout")),e.listen(c(e.url).encapsulate("/ipfs/"+s),o)}),()=>{if(r.online.length||this.opt.ignore_no_online)r.emit("listening"),t();else{const e=new Error("Couldn't listen on any of the servers");r.emit("error",e),t(e)}})},r.close=e=>a(r.online.map(e=>t=>e.close(t)),t=>e(t,r.online=[])),r.getAddrs=e=>o(r.online,(e,t)=>e.getAddrs(t),(t,r)=>t?e(t):e(null,r.reduce((e,t)=>e.concat(t),[]))),r}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>e.toString().startsWith("/p2p-websocket-star")||u.WebSocketStar.matches(e))}}},
/*!*********************************************************!*\
  !*** ./node_modules/libp2p-websocket-star/src/index.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1)("libp2p:websocket-star"),i=r(/*! multiaddr */15),s=r(/*! events */5).EventEmitter,o=r(/*! peer-id */7),a=r(/*! peer-info */21),c=r(/*! interface-connection */38).Connection,u=r(/*! async/setImmediate */32),h=r(/*! ./utils */431),l=r(/*! ./listener */942),f=h.cleanUrlSIO,d=r(/*! mafmt */43),p=r(/*! class-is */34);e.exports=p(class{constructor(e){e=e||{},this.id=e.id,this.flag=e.allowJoinWithDisabledChallenge,this.discovery=new s,this.discovery.tag="websocketStar",this.discovery.start=e=>{u(e)},this.discovery.stop=e=>{u(e)},this.listeners_list={},this._peerDiscovered=this._peerDiscovered.bind(this)}lazySetId(e){e&&(this.id=e,this.canCrypto=!0)}dial(e,t,r){let n;"function"==typeof t&&(r=t,t={});try{n=f(e)}catch(e){return r(e)}const i=this.listeners_list[n];return i?i.dial(e,t,r):(r(new Error("No listener for this server")),new c)}createListener(e,t){"function"==typeof e&&(t=e,e={});const r=new l({id:this.id,handler:t,listeners:this.listeners_list,flag:this.flag});return r.on("peer",this._peerDiscovered),r}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>d.WebSocketStar.matches(e))}_peerDiscovered(e){n("Peer Discovered:",e);const t=e.split("/ipfs/").pop(),r=o.createFromB58String(t),s=new a(r);s.multiaddrs.add(i(e)),this.discovery.emit("peer",s)}},{className:"WebsocketStar",symbolName:"@libp2p/js-libp2p-websocket-star/websocketstar"})},
/*!************************************************************!*\
  !*** ./node_modules/libp2p-websocket-star/src/listener.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! debug */1)("libp2p:websocket-star:listener"),i=r(/*! multiaddr */15),s=r(/*! socket.io-client */417),o=r(/*! socket.io-pull-stream */943),a=r(/*! uuid */432),c=r(/*! async/series */89),u=r(/*! events */5).EventEmitter,h=r(/*! interface-connection */38).Connection,l=r(/*! once */31),f=r(/*! async/setImmediate */32),d=r(/*! ./utils */431),p=d.cleanUrlSIO,A=r(/*! libp2p-crypto */36),g=r(/*! pull-stream/pull */17),y=r(/*! pull-stream/throughs/through */221),m=r(/*! ./errors */949),_=l(()=>{}),b={transports:["websocket"],"force new connection":!0};e.exports=class extends u{constructor(e){super(),this.id=e.id,this.log=n.bind(n,"listener#offline"),this.canCrypto=Boolean(e.id),this._handler=e.handler||_,this.listeners_list=e.listeners||{},this.flag=e.flag,this.conns=[],this.connected=!1}_up(e){if(e=e?l(e):_,this.io)return e();this.log=n.bind(n,"listener#"+this.server),this.log("dialing to signalling server");const t=this.io=s.connect(this.server,b);o(t,{codec:"buffer"}),t.once("error",e),t.once("connect_error",e),t.once("connect",e);const r=new d.Protocol(this.log);r.addRequest("ws-peer",["multiaddr"],(e,t)=>this.emit("peer",t)),r.addRequest("ss-incomming",["string","multiaddr","function"],this._incommingDial.bind(this)),r.handleSocket(t)}_down(){this.io&&(this.io.disconnect(),this.emit("close"),delete this.io)}_cryptoChallenge(e){if(!this.io)return e(new Error("Not connected"));const r=this.canCrypto?A.keys.marshalPublicKey(this.id.pubKey).toString("hex"):"",n=this.ma.toString();this.io.emit("ss-join",n,r,(r,n,i)=>{if(r)return e(r);if(n){if(!this.canCrypto)return this._down(),e(new Error("Can't sign cryptoChallenge: No id provided"));this.log("performing cryptoChallenge"),this.id.privKey.sign(t.from(n),(t,r)=>{if(t)return e(t);this.signature=r.toString("hex"),this._join(e)})}else{if(!this.flag)return this._down(),e(new Error('Tried to listen on a server with crypto challenge disabled!\n    This is prohibited by default and can lead to security issues!\n    Please set "allowJoinWithDisabledChallenge" to true in the constructor options (but only if you know what you are doing)!'));this.signature="_",e(null,null,i)}})}_crypto(e){if(e=e?l(e):_,this.log("joining"),!this.io)return e(new Error("Not connected"));this.signature?this._join(e):this._cryptoChallenge(e)}_join(e){this.io.emit("ss-join",this.ma.toString(),this.signature,e)}_incommingDial(e,t,r,n){this.log("dial#"+t+" incomming from",r);const s=i(r),o=this.io.createSource(t+".dialer"),a=this.io.createSink(t+".listener");n();const c=new h({sink:a,source:o},{getObservedAddrs:e=>e(null,[s])});this.emit("connection",c),this._handler(c)}listen(e,t){if(this.ma=e,this.server=p(e),this.listeners_list[this.server]=this,t=t?l(t):_,this.connected)return this.closing=!1,f(()=>t());c([e=>this._up(e),e=>this._crypto((t,r,n)=>e(t,n))],(e,[r,n])=>{if(e){if(e.description&&"ENOTFOUND"===e.description.code){const t=e.description.hostname;e=Object.assign(new Error(`WebSocket connection failed on ${t}`),{code:m.ERR_WS_STAR_WEBSOCKET_CONNECTION})}return this.log("error",e),e instanceof Error||(e=new Error(e)),this._down(),this.emit("error",e),this.emit("close"),t(e)}this.log("success"),this.connected=!0,this.io.on("reconnect",()=>{this.signature=null,this._crypto((e,t,r)=>{if(e)this.log("reconnect error",e),this.emit("error",e);else{this.log("reconnected");for(const e of r||[])this.emit("peer",e)}})}),this.emit("listening");for(const e of n||[])this.emit("peer",e);t()})}getAddrs(e){f(()=>e(null,this.ma?[this.ma]:[]))}get activeConnections(){return this.conns=this.conns.filter(e=>e.sink||e.source),Boolean(this.conns.length)}maybeClose(){!this.activeConnections&&this.closing&&(this.connected=!1,this.closing=!1,this.log("no more connections and listener is offline - closing"),this._down())}close(e){e=e?l(e):_,this.closing=!0,this.maybeClose(),e()}stateWatch(e,t){let r={sink:!0,source:!0};const n=e=>y(e=>e,t=>{r[e]=!1,r.sink||r.source||this.maybeClose()});return this.conns.push(r),{sink:g(n("sink"),e),source:g(t,n("source"))}}dial(e,t,r){"function"==typeof t&&(r=t,t={});const s=i(e),o=new h(null),c=a(),u=this.log.bind(n,"dial#"+c);r=r?l(r):_;let f=this.io;if(!f)return r(new Error("Not listening"));const d=f.createSink(c+".dialer");return u("dialing",e.toString()),f.emit("ss-dial",this.ma.toString(),e.toString(),c,e=>{if(e)return r(e instanceof Error?e:new Error(e));u(e?"error: "+e.toString():"success");const t=f.createSource(c+".listener");o.setInnerConn(this.stateWatch(d,t),{getObservedAddrs:e=>e(null,[s])}),r(null,o)}),o}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************************!*\
  !*** ./node_modules/socket.io-pull-stream/src/index.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! data-queue */944),i=r(/*! uuid */432),s=r(/*! pull-stream */25),o=(e,t)=>"socket.io-pull-stream."+e+(t?"."+t:""),a=r(/*! debug */946)("socket.io-pull-stream");function c(e,t){if(null==t)return t;try{return e(t)}catch(e){return console.error("Codec Error"),console.error(e),!1}}const u={hex:{encode:e=>e.toString("hex"),decode:e=>t.from(e,"hex")},plain:{encode:e=>e,decode:e=>e},buffer:{encode:e=>t.from(e),decode:e=>t.from(e)}};function h(e){if(e||(e="plain"),"object"==typeof e)return e;const t=u[e];if(!t)throw new Error("Invalid codec "+e);return t}e.exports=function(e,t){e.createSink||(e.sioplog=e.id?a.bind(a,"["+e.id+"]"):a,e.createSink=(r,s)=>{r||(r=i());const a=function(e,t,r){const i=n(),s=e.sioplog.bind(e.sioplog,"  sink("+t+")"),a=h(r.codec).encode;let u;function l(e){i.append({err:e}),u=e}return s("create sink"),e.once(o("accept",t),()=>{s("start transmission"),function r(){i.get((n,u)=>{let{data:h,err:l}=u||{};if(n&&(l=n),s("send",l&&!0===l?"finish":l?"error":h?"data":"<invalid>"),l&&!n&&i.error(l),l)return e.emit(o("error",t),l);h&&e.emit(o("queue",t),c(a,h)),r()})}()}),e.once("disconnect",()=>l(!0)),function(e){e(null,(function t(r,n){return r?l(r):u?e(u,t):(i.append({data:n}),void e(null,t))}))}}(e,r,t||s);return a.id=r,a},e.createSource=(r,i)=>{const s=function(e,t,r){const i=n(),s=e.sioplog.bind(e.sioplog,"source("+t+")"),a=h(r.codec).decode;function u(){e.removeAllListeners(o("error",t)),e.removeAllListeners(o("queue",t))}return s("create source"),e.emit(o("accept",t)),e.on(o("error",t),e=>{s(!0===e?"finish":"error"),u(),i.append({end:e})}),e.on(o("queue",t),e=>{s("queue data"),i.append({data:c(a,e)})}),e.once("disconnect",()=>{u(),i.append({end:!0})}),function(e,t){if(s("reading"),e)return t(e);i.get((e,r)=>e?t(e):r.end?(i.error(r.end),t(r.end)):t(null,r.data))}}(e,r,t||i);return s.id=r,s},e.createProxy=(t,r,n)=>{s(e.createSource(t,n),r.createSink(t,n))})}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************!*\
  !*** ./node_modules/data-queue/index.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5).EventEmitter;e.exports=function(){const e=new n;let t,r=[];function i(){e.removeAllListeners("err"),e.removeAllListeners("data")}return{append:n=>{if(t)return t;r.push(n),e.emit("data")},prepend:e=>{if(t)return t;r.unshift(e)},error:r=>{t=r,e.emit("err",r)},get:n=>(i(),t?n(t):r.length?n(null,r.shift()):(e.once("err",e=>{i(),n(e)}),void e.once("data",()=>(i(),n(null,r.shift()))))),height:()=>r.length}}},
/*!*********************************!*\
  !*** ./node_modules/uuid/v1.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n,i,s=r(/*! ./lib/rng */347),o=r(/*! ./lib/bytesToUuid */348),a=0,c=0;e.exports=function(e,t,r){var u=t&&r||0,h=t||[],l=(e=e||{}).node||n,f=void 0!==e.clockseq?e.clockseq:i;if(null==l||null==f){var d=s();null==l&&(l=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=i=16383&(d[6]<<8|d[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),A=void 0!==e.nsecs?e.nsecs:c+1,g=p-a+(A-c)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||p>a)&&void 0===e.nsecs&&(A=0),A>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=A,i=f;var y=(1e4*(268435455&(p+=122192928e5))+A)%4294967296;h[u++]=y>>>24&255,h[u++]=y>>>16&255,h[u++]=y>>>8&255,h[u++]=255&y;var m=p/4294967296*1e4&268435455;h[u++]=m>>>8&255,h[u++]=255&m,h[u++]=m>>>24&15|16,h[u++]=m>>>16&255,h[u++]=f>>>8|128,h[u++]=255&f;for(var _=0;_<6;++_)h[u+_]=l[_];return t||o(h)}},
/*!******************************************************************************!*\
  !*** ./node_modules/socket.io-pull-stream/node_modules/debug/src/browser.js ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(/*! ./common */947)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(/*! ./../../../../process/browser.js */2))},
/*!*****************************************************************************!*\
  !*** ./node_modules/socket.io-pull-stream/node_modules/debug/src/common.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var r;function o(){if(o.enabled){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=o,a=Number(new Date),c=a-(r||a);s.diff=c,s.prev=r,s.curr=a,r=a,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return e;u++;var i=n.formatters[r];if("function"==typeof i){var o=t[u];e=i.call(s,o),t.splice(u,1),u--}return e})),n.formatArgs.call(s,t),(s.log||n.log).apply(s,t)}}return o.namespace=e,o.enabled=n.enabled(e),o.useColors=n.useColors(),o.color=t(e),o.destroy=i,o.extend=s,"function"==typeof n.init&&n.init(o),n.instances.push(o),o}function i(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function s(e,t){return n(this.namespace+(void 0===t?":":t)+e)}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var s=n.instances[t];s.enabled=n.enabled(s.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(/*! ms */342),Object.keys(e).forEach((function(t){n[t]=e[t]})),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},
/*!********************************************!*\
  !*** ./node_modules/async/eachOfSeries.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(/*! ./eachOfLimit */407)),i=s(r(/*! ./internal/doLimit */231));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)(n.default,1),e.exports=t.default},
/*!****************************************************************!*\
  !*** ./node_modules/libp2p-websocket-star/src/errors/index.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.ERR_WS_STAR_WEBSOCKET_CONNECTION="ERR_WS_STAR_WEBSOCKET_CONNECTION"},
/*!**********************************************!*\
  !*** ./node_modules/pull-mplex/src/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-abortable */951),i=r(/*! pull-stream */25),s=r(/*! debug */1),o=r(/*! ./codec */433),a=r(/*! ./mplex */952),c=r(/*! ./muxer */955),u=s("pull-plex");function h(e,t){const r=new a(!t),s=n();i(e,r,s,e);const o=new c(e,r);return o.once("error",e=>{u.err("got error",e),s.abort(e)}),o.on("close",()=>{u("closing muxer"),s.abort()}),o}u.err=s("pull-plex:err"),(t=e.exports=h).pullMplex=a,t.multicodec=o,t.dialer=e=>h(e,!1),t.listener=e=>h(e,!0)},
/*!**********************************************!*\
  !*** ./node_modules/pull-abortable/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){var t,r,n=!1,i=!1;function s(){if(e)return e(n&&!0!==n?n:i&&!0!==i?i:null)}function o(){i=i||!0,function(e){s();var r=t;t=null,r&&r(n||i)}(),r&&r(n,(function(e){t&&t(e||n)}))}function a(e){return r=e,function(r,o){if(t=o,r&&(n=r),i)return o(i);n||(!0,e(r,(function(o,a){if(!1,n)return!r&&e(n,(function(){}));if(t){var c=t;t=null,o?(i=n||o,s(),c(n||o)):c(n||o,a)}})))}}return a.abort=function(e){i||(n=e||!0,o())},a}},
/*!**********************************************!*\
  !*** ./node_modules/pull-mplex/src/mplex.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! pull-stream */25),i=r(/*! pull-pushable */64),s=r(/*! pull-through */434),o=r(/*! looper */435),a=r(/*! async/nextTick */35),c=r(/*! events */5),u=r(/*! debug */1),{emitError:h,emitStream:l}=r(/*! ./util */436),{Types:f,MAX_MSG_SIZE:d}=r(/*! ./consts */437),p=r(/*! ./channel */953),A=r(/*! ./coder */954),g=u("pull-plex");g.err=u("pull-plex:err");e.exports=class extends c{constructor(e){super(),"boolean"==typeof e&&(e={initiator:e}),e={initiator:!0,onChan:null,maxChannels:1e4,maxMsgSize:d,lazy:!1,...e},this._maxChannels=e.maxChannels,this._maxMsgSize=e.maxMsgSize,this._lazy=e.lazy,this._initiator=Boolean(e.initiator),this._chanId=0,this._inChannels=new Array(this._maxChannels/2),this._outChannels=new Array(this._maxChannels/2),this._endedRemote=!1,this._endedLocal=!1,this._chandata=i(e=>{this._log("mplex ended"),this._endedRemote=!0,this.close(e)}),e.onChan&&this.on("stream",t=>e.onChan(t,t.id)),this.source=n(this._chandata,A.encode());const t=this;this.sink=n(s((function(e){if(e&&e.length>=t._maxMsgSize)return a(h,t,new Error("message too large!")),this.queue(null);this.queue(e)})),A.decode(),e=>{const r=o(()=>{e(null,(e,n)=>{if(!t._endedLocal){if(!0===e)return t.close();if(e)return t.destroy(e);t._handle(n),r()}})});r()})}_log(e,t){g({op:e,initiator:this._initiator,endedLocal:this._endedLocal,endedRemote:this._endedRemote,data:t&&t.toString()||""})}get initiator(){return this._initiator}close(e){if(this._log("close",e),this.destroyed)return;e&&a(h,this,e),e=e||"Underlying stream has been closed",this._endedLocal=!0;const t=Array.prototype.concat(this._outChannels,this._inChannels);for(let r of t)r&&r.close(e);this.emit("close")}get destroyed(){return this._endedRemote&&this._endedLocal}destroy(e){e=e||new Error("Underlying stream has been closed"),this._chandata.end(e),this.close(e)}push(e){e.data&&t.byteLength(e.data)>this._maxMsgSize&&this._chandata.end(new Error("message too large!")),this._chandata.push(e)}createStream(e){"number"==typeof e&&(e=e.toString());const t=this._newStream(null,!0,!1,e,this._outChannels);return this._lazy||t.openChan(e),t}_newStream(e,t,r,n,i){if(this.chanSize>=this._maxChannels)return void this.emit("error",new Error("max channels exceeded"));if("string"==typeof t&&(n=t,t=!1,r=!1),"string"==typeof r&&(n=r,r=!1),i[e="number"==typeof e?e:this._chanId++])return void this.emit("error",new Error(`channel with id ${e} already exist!`));const s=new p({id:e,name:n,plex:this,initiator:t,open:r||!1});return this._addChan(e,s,i)}_addChan(e,t,r){return t.once("close",()=>{r[e]=null}),t.once("error",e=>{g.err("channel error",e)}),r[e]=t,t}get chanSize(){return this._inChannels.size+this._outChannels.size}_handle(e){this._log("_handle",e);const{id:t,type:r,data:n}=e;switch(r){case f.NEW:{const e=this._newStream(t,!1,!0,n.toString(),this._inChannels);a(l,this,e,t);break}case f.OUT_MESSAGE:case f.IN_MESSAGE:{const e=(1&r?this._outChannels:this._inChannels)[t];e&&e.push(n);break}case f.OUT_CLOSE:case f.IN_CLOSE:{const e=(1&r?this._outChannels:this._inChannels)[t];e&&e.close();break}case f.OUT_RESET:case f.IN_RESET:{const e=(1&r?this._outChannels:this._inChannels)[t];e&&e.destroy();break}default:a(h,this,new Error("Invalid message type"))}}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************!*\
  !*** ./node_modules/pull-mplex/src/channel.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-pushable */64),i=r(/*! looper */435),s=r(/*! async/nextTick */35),o=r(/*! events */5),a=r(/*! debug */1),{Types:c}=r(/*! ./consts */437),{emitError:u}=r(/*! ./util */436),h=a("pull-plex:chan");h.err=a("pull-plex:chan:err");e.exports=class extends o{constructor(e){var t;super(),e={initiator:!1,...e},this._id=e.id,this._name=e.name,this._plex=e.plex,this._open=e.open,this._initiator=e.initiator,this._endedRemote=!1,this._endedLocal=!1,this._destroy=!1,this.MSG=this._initiator?c.OUT_MESSAGE:c.IN_MESSAGE,this.END=this._initiator?c.OUT_CLOSE:c.IN_CLOSE,this.RESET=this._initiator?c.OUT_RESET:c.IN_RESET,this._log("new channel",this._name),this._msgs=n(e=>{this._log("source closed",e),e&&"boolean"!=typeof e&&s(u,this,e)}),this._source=this._msgs,this.sink=(t=this,function(e){const r=i((function(){e(null,(function(e,n){if(!t._endedLocal){if(t._endedLocal=e||!1,!0===e)return t.endChan();if(e||t._destroy)return t.destroyChan(),t.emit("error",e||t._destroy),void t.destroy();t.sendMsg(n),r()}}))}));r()})}get source(){return this._source}get id(){return this._id}get open(){return this._open}set open(e){this._open=e}get name(){return this._name}get destroyed(){return this._endedRemote&&this._endedLocal}_log(e,t){h.enabled&&h({op:e,name:this._name,id:this._id,endedLocal:this._endedLocal,endedRemote:this._endedRemote,initiator:this._initiator,data:t&&t.toString()||""})}push(e){this._log("push"),this._msgs.push(e)}close(e){this._log("close",e),this._endedRemote||(this._endedRemote=e||!0,this._msgs.end(this._endedRemote),this.emit("close",e),this.plex=null)}destroy(e){this._log("destroy",e),this._destroy=e||"channel destroyed!",this.close(this._destroy)}openChan(e){this.open||(this.open=!0,this._plex.push([this._id,c.NEW,e!==this._id.toString()?e:this._id.toString()]))}sendMsg(e){this._log("sendMsg",e),this.open||this.openChan(this.name),this._plex.push([this._id,this.MSG,e])}endChan(){this._log("endChan"),this.open&&this._plex.push([this._id,this.END])}destroyChan(){this._log("destroyChan"),this.open&&this._plex.push([this._id,this.RESET])}}},
/*!**********************************************!*\
  !*** ./node_modules/pull-mplex/src/coder.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! varint */23),i=r(/*! pull-through */434),s=r(/*! debug */1),o=s("pull-plex:coder");o.err=s("pull-plex:coder:err");const a=e.alloc(0);t.encode=()=>{let t=e.allocUnsafe(10240),r=0;return i((function(i){const s=r;n.encode(i[0]<<3|i[1],t,r),r+=n.encode.bytes,n.encode(i[2]?i[2].length:0,t,r),r+=n.encode.bytes,this.queue(t.slice(s,r)),10240-r<100&&(t=e.allocUnsafe(10240),r=0),this.queue(i[2]?i[2]:a)}))};const c={PARSING:0,READING:1};t.decode=()=>{let t=c.PARSING;const r=e=>{const[r,i,s]=(e=>{let t=0,r=0;try{let i=n.decode(e);return t+=n.decode.bytes,r=n.decode(e,t),[i,t+=n.decode.bytes,r]}catch(e){o.err(e)}return[]})(e);if(void 0!==r){const n={id:r>>3,type:7&r,data:[]};return t=c.READING,[e.slice(i),n,s]}return[e]},s=(r,n,i)=>{if(i<=0)return t=c.PARSING,[0,r,n];let s=i-r.length;s<0&&(s=0);const o=i-s;if(r.length>0){const t=e.isBuffer(r)?r:e.from(r);n.push(t.slice(0,o))}return s<=0&&(t=c.PARSING),[s,r.slice(o),n]};let a=0,u=null,h=!1,l=[];return i((function(n){var i=this;!function o(){if(n&&n.length){if(c.PARSING===t){if(h&&(l.push(n),n=e.concat(l)),[n,u,a]=r(n),!u)return h||l.push(n),void(h=!0);l=[],h=!1}c.READING===t&&([a,n,u.data]=s(n,u.data,a),a<=0&&c.PARSING===t&&(u.data=e.concat(u.data),i.queue(u),u=null,a=0)),o()}}()}))}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/pull-mplex/src/muxer.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5).EventEmitter,i=r(/*! interface-connection */38).Connection,s=r(/*! async/nextTick */35),o=r(/*! debug */1),a=r(/*! ./codec */433),c=o("libp2p-mplex:muxer");function u(){}c.err=o("libp2p-mplex:muxer:error");e.exports=class extends n{constructor(e,t){super(),this.conn=e,this.multiplex=t,this.multicodec=a,t.on("close",()=>this.emit("close")),t.on("error",e=>this.emit("error",e)),t.on("stream",e=>{e.on("error",e=>{c.err("receiver stream errored",e)}),this.emit("stream",new i(e,this.conn))})}newStream(e){e=e||u;let t=this.multiplex.createStream();t.on("error",e=>{c.err("initiator stream errored",e)});const r=new i(t,this.conn);return s(e,null,r),r}end(e){if(e=e||u,this.multiplex.destroyed)return s(e);this.multiplex.once("close",e),this.multiplex.close()}}},
/*!************************************************!*\
  !*** ./node_modules/libp2p-secio/src/index.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream/pull */17),i=r(/*! interface-connection */38).Connection,s=r(/*! assert */24),o=r(/*! peer-info */21),a=r(/*! debug */1),c=r(/*! once */31),u=a("libp2p:secio");u.error=a("libp2p:secio:error");const h=r(/*! ./handshake */957),l=r(/*! ./state */967);e.exports={tag:"/secio/1.0.0",encrypt(e,t,r,a){s(e,"no local private key provided"),s(t,"no connection for the handshake  provided"),"function"==typeof r&&(a=r,r=void 0),a=c(a||function(e){e&&u.error(e)});const f=new l(e,r,3e5,a);const d=new i(void 0,t);return n(t,h(f,(function(e){if(e)return a(e);t.getPeerInfo((e,r)=>{d.setInnerConn(new i(f.secure,t)),e&&d.setPeerInfo(new o(f.id.remote)),a()})})),t),d}}},
/*!**********************************************************!*\
  !*** ./node_modules/libp2p-secio/src/handshake/index.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/series */89),i=r(/*! ./propose */958),s=r(/*! ./exchange */964),o=r(/*! ./finish */965);e.exports=function(e,t){return n([t=>i(e,t),t=>s(e,t),t=>o(e,t)],r=>{e.cleanSecrets(),r&&(!0===r&&(r=new Error("Stream ended prematurely")),e.shake.abort(r)),t(r)}),e.stream}},
/*!************************************************************!*\
  !*** ./node_modules/libp2p-secio/src/handshake/propose.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1),i=r(/*! async/waterfall */54),s=r(/*! ../support */238),o=r(/*! ./crypto */239),a=n("libp2p:secio");a.error=n("libp2p:secio:error"),e.exports=function(e,t){a("1. propose - start"),a("1. propose - writing proposal"),s.write(e,o.createProposal(e)),i([t=>s.read(e.shake,t),(t,r)=>{a("1. propose - reading proposal",t),o.identify(e,t,r)},t=>o.selectProtocols(e,t)],e=>{if(e)return t(e);a("1. propose - finish"),t()})}},
/*!********************************************************************************!*\
  !*** ./node_modules/libp2p-secio/node_modules/multihashing-async/src/index.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! multihashes */13),i=r(/*! ./crypto */960);function s(e,t,r,i){if("function"==typeof r&&(i=r,r=void 0),!i)throw new Error("Missing callback");s.digest(e,t,r,(e,s)=>{if(e)return i(e);i(null,n.encode(s,t,r))})}e.exports=s,s.Buffer=t,s.multihash=n,s.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=s.createHash(t)}catch(e){return o(e)}i(e,o)},s.createHash=function(e){if(e=n.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions)}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************************************************!*\
  !*** ./node_modules/libp2p-secio/node_modules/multihashing-async/src/crypto.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! js-sha3 */49),i=r(/*! murmurhash3js */101),s=r(/*! ./utils */438),o=r(/*! ./crypto-sha1-2 */961),a=s.toCallback,c=s.toBuf,u=s.fromString,h=s.fromNumberTo32BitBuf;e.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(n.sha3_512)),sha3384:a(c(n.sha3_384)),sha3256:a(c(n.sha3_256)),sha3224:a(c(n.sha3_224)),shake128:a(c(n.shake_128,128)),shake256:a(c(n.shake_256,256)),keccak224:a(c(n.keccak_224)),keccak256:a(c(n.keccak_256)),keccak384:a(c(n.keccak_384)),keccak512:a(c(n.keccak_512)),murmur3128:a(c(u(i.x64.hash128))),murmur332:a(h(u(i.x86.hash32))),addBlake:r(/*! ./blake */962),dblSha2256:(e,r)=>{o.sha2256(e,(e,n)=>{e&&r(e),o.sha2256(t.from(n),r)})}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************************************************!*\
  !*** ./node_modules/libp2p-secio/node_modules/multihashing-async/src/crypto-sha1-2-browser.js ***!
  \************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! nodeify */102),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(r,s)=>{const o=i.digest({name:e},r);if("function"!=typeof o.then)return o.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(o.oncomplete=e=>{s(null,e.target.result)});n(o.then(e=>t.from(new Uint8Array(e))),s)}}e.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************************************!*\
  !*** ./node_modules/libp2p-secio/node_modules/multihashing-async/src/blake.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! blakejs */50),i=r(/*! ./utils */438).toCallback,s={init:n.blake2bInit,update:n.blake2bUpdate,digest:n.blake2bFinal},o={init:n.blake2sInit,update:n.blake2sUpdate,digest:n.blake2sFinal},a=(e,r)=>i(n=>{const i=r.init(e,null);return r.update(i,n),t.from(r.digest(i))});e.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!****************************************************************!*\
  !*** ./node_modules/libp2p-secio/src/handshake/secio.proto.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="message Propose {\n  optional bytes rand = 1;\n  optional bytes pubkey = 2;\n  optional string exchanges = 3;\n  optional string ciphers = 4;\n  optional string hashes = 5;\n}\n\nmessage Exchange {\n  optional bytes epubkey = 1;\n  optional bytes signature = 2;\n}"},
/*!*************************************************************!*\
  !*** ./node_modules/libp2p-secio/src/handshake/exchange.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1),i=r(/*! async/waterfall */54),s=r(/*! ../support */238),o=r(/*! ./crypto */239),a=n("libp2p:secio");a.error=n("libp2p:secio:error"),e.exports=function(e,t){a("2. exchange - start"),a("2. exchange - writing exchange"),i([t=>o.createExchange(e,t),(t,r)=>{s.write(e,t),s.read(e.shake,r)},(t,r)=>{a("2. exchange - reading exchange"),o.verify(e,t,r)},t=>o.generateKeys(e,t)],e=>{if(e)return t(e);a("2. exchange - finish"),t()})}},
/*!***********************************************************!*\
  !*** ./node_modules/libp2p-secio/src/handshake/finish.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream/pull */17),i=r(/*! pull-stream/sources/error */218),s=r(/*! pull-handshake */67),o=r(/*! debug */1),a=o("libp2p:secio");a.error=o("libp2p:secio:error");const c=r(/*! ../etm */966),u=r(/*! ./crypto */239);e.exports=function(e,t){a("3. finish - start");const r=e.protocols,o=e.shake.rest(),h=s({timeout:e.timeout},e=>{if(e)throw e});n(o,c.createUnboxStream(r.remote.cipher,r.remote.mac),h,c.createBoxStream(r.local.cipher,r.local.mac),o),h.handshake.write(e.proposal.in.rand),h.handshake.read(e.proposal.in.rand.length,(r,n)=>{const s=r=>{a.error(r),e.secure.resolve({source:i(r),sink(e){}}),t(r)};if(r)return s(r);try{u.verifyNonce(e,n)}catch(r){return s(r)}a("3. finish - finish"),e.secure.resolve(h.handshake.rest()),t()})}},
/*!**********************************************!*\
  !*** ./node_modules/libp2p-secio/src/etm.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){const n=r(/*! pull-stream/pull */17),i=r(/*! pull-stream/throughs/map */65),s=r(/*! pull-stream/throughs/async-map */220),o=r(/*! pull-length-prefixed */30),a={fixed:!0,bytes:4};function c(){return i(t=>"string"==typeof t?e.from(t,"utf-8"):t)}t.createBoxStream=(t,r)=>n(c(),s((n,i)=>{t.encrypt(n,(t,n)=>{if(t)return i(t);r.digest(n,(t,r)=>{if(t)return i(t);i(null,e.concat([n,r]))})})}),o.encode(a)),t.createUnboxStream=(e,t)=>n(c(),o.decode(a),s((r,n)=>{const i=r.length,s=t.length;if(i<s)return n(new Error(`buffer (${i}) shorter than MAC size (${s})`));const o=i-s,a=r.slice(0,o),c=r.slice(o);t.digest(a,(t,r)=>t?n(t):c.equals(r)?void e.decrypt(a,(e,t)=>{if(e)return n(e);n(null,t)}):n(new Error(`MAC Invalid: ${c.toString("hex")} != ${r.toString("hex")}`)))}))}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************!*\
  !*** ./node_modules/libp2p-secio/src/state.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-handshake */67),i=r(/*! pull-defer */114);e.exports=class{constructor(e,t,r,s){"function"==typeof r&&(s=r,r=void 0),this.setup(),this.id.local=e,this.id.remote=t,this.key.local=e.privKey,this.timeout=r||6e4,s=s||(()=>{}),this.secure=i.duplex(),this.stream=n({timeout:this.timeout},s),this.shake=this.stream.handshake,delete this.stream.handshake}setup(){this.id={local:null,remote:null},this.key={local:null,remote:null},this.shake=null,this.cleanSecrets()}cleanSecrets(){this.shared={},this.ephemeralKey={local:null,remote:null},this.proposal={in:null,out:null},this.proposalEncoded={in:null,out:null},this.protocols={local:null,remote:null},this.exchange={in:null,out:null}}}},
/*!****************************************************!*\
  !*** ./node_modules/libp2p-bootstrap/src/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! peer-id */7),i=r(/*! peer-info */21),s=r(/*! multiaddr */15),o=r(/*! mafmt */43),a=r(/*! events */5).EventEmitter,c=r(/*! debug */1),u=r(/*! async/nextTick */35),h=c("libp2p:bootstrap");h.error=c("libp2p:bootstrap:error");(e.exports=class extends a{constructor(e){super(),this._list=e.list,this._interval=e.interval||1e4,this._timer=null}start(e){if(this._timer)return u(()=>e());this._timer=setInterval(()=>this._discoverBootstrapPeers(),this._interval),u(()=>{e(),this._discoverBootstrapPeers()})}_discoverBootstrapPeers(){this._list.forEach(e=>{if(!function(e){try{return o.IPFS.matches(e)}catch(e){return!1}}(e))return h.error("Invalid multiaddr");const t=s(e),r=n.createFromB58String(t.getPeerId());i.create(r,(e,r)=>{if(e)return h.error("Invalid bootstrap peer id",e);r.multiaddrs.add(t),this.emit("peer",r)})})}stop(e){u(e),this._timer&&(clearInterval(this._timer),this._timer=null)}}).tag="bootstrap"},
/*!**************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{EventEmitter:n}=r(/*! events */5),i=r(/*! libp2p-record */118),s=r(/*! interface-datastore */14).MemoryDatastore,o=r(/*! async/waterfall */54),a=r(/*! async/each */152),c=r(/*! async/filter */983),u=r(/*! async/timeout */160),h=r(/*! peer-id */7),l=r(/*! peer-info */21),f=r(/*! libp2p-crypto */36),d=r(/*! promise-to-callback */90),p=r(/*! err-code */8),A=r(/*! ./routing */988),g=r(/*! ./utils */26),y=r(/*! ./constants */91),m=r(/*! ./query */443),_=r(/*! ./network */1006),b=r(/*! ./private */1016),w=r(/*! ./providers */1019),v=r(/*! ./message */57),E=r(/*! ./random-walk */1020),S=r(/*! ./query-manager */1024),C=r(/*! assert */24);e.exports=class extends n{constructor(e,t){super(),C(e,"libp2p-kad-dht requires a instance of Switch"),(t=t||{}).validators=t.validators||{},t.selectors=t.selectors||{},this.switch=e,this.kBucketSize=t.kBucketSize||y.K,this.concurrency=t.concurrency||y.ALPHA,this.disjointPaths=Math.ceil(this.kBucketSize/2),this.routingTable=new A(this.peerInfo.id,this.kBucketSize),this.datastore=t.datastore||new s,this.providers=new w(this.datastore,this.peerInfo.id),this.validators={pk:i.validator.validators.pk,...t.validators},this.selectors={pk:i.selection.selectors.pk,...t.selectors},this.network=new _(this),this._log=g.logger(this.peerInfo.id);const r=b(this);Object.keys(r).forEach(e=>{this[e]=r[e]}),this.randomWalk=new E(this,t.randomWalk),this._queryManager=new S}get isStarted(){return this._running}start(e){this._running=!0,this._queryManager.start(),this.network.start(t=>{if(t)return e(t);this.randomWalk.start(),e()})}stop(e){this._running=!1,this.randomWalk.stop(),this.providers.stop(),this._queryManager.stop(),this.network.stop(e)}get peerInfo(){return this.switch._peerInfo}get peerBook(){return this.switch._peerBook}put(e,t,r,n){"function"==typeof r?(n=r,r={}):r=r||{},this._log("PutValue %b",e),o([r=>g.createPutRecord(e,t,r),(t,n)=>o([r=>this._putLocal(e,t,r),t=>this.getClosestPeers(e,{shallow:!0},t),(n,i)=>{r.minPeers=r.minPeers||n.length,c(n,(r,n)=>{this._putValueToPeer(e,t,r,e=>{if(e)return this._log.error("Failed to put to peer (%b): %s",r.id,e),n(null,!1);n(null,!0)})},(e,t)=>{if(e)return i(e);if(r.minPeers>t.length){const e=p(new Error("Failed to put value to enough peers"),"ERR_NOT_ENOUGH_PUT_PEERS");return this._log.error(e),i(e)}i()})}],n)],n)}get(e,t,r){"function"==typeof t?(r=t,t={}):t=t||{},t.maxTimeout||t.timeout?t.maxTimeout&&!t.timeout&&(t.timeout=t.maxTimeout):t.timeout=y.minute,this._get(e,t,r)}getMany(e,t,r,n){"function"==typeof r?(n=r,r={}):r=r||{},r.maxTimeout||r.timeout?r.maxTimeout&&!r.timeout&&(r.timeout=r.maxTimeout):r.timeout=y.minute,this._log("getMany %b (%s)",e,t);let i=[];this._getLocal(e,(s,a)=>{if(s&&0===t)return n(s);if(null==s&&i.push({val:a.value,from:this.peerInfo.id}),i.length>=t)return n(null,i);const c=[];o([t=>g.convertBuffer(e,t),(n,s)=>{const o=this.routingTable.closestPeers(n,this.kBucketSize);if(this._log("peers in rt: %d",o.length),0===o.length){const e="Failed to lookup key! No peers from routing table!";return this._log.error(e),s(p(new Error(e),"ERR_NO_PEERS_IN_ROUTING_TABLE"))}const a=new m(this,e,(r,n)=>{const s=g.pathSize(t-i.length,n),o=[];return c.push(o),async t=>{let r,n,i;try{const i=await this._getValueOrPeersAsync(t,e);r=i.record,n=i.peers}catch(e){if("ERR_INVALID_RECORD"!==e.code)throw e;i=e}const a={closerPeers:n};return(r&&r.value||i)&&o.push({val:r&&r.value,from:t}),o.length>=s&&(a.pathComplete=!0),a}});u(e=>{d(a.run(o))(e)},r.timeout)((e,t)=>{a.stop(),s(e,t)})}],e=>{if(i=[].concat.apply(i,c).slice(0,t),e&&0===i.length)return n(e);n(null,i)})})}getClosestPeers(e,t,r){this._log("getClosestPeers to %b",e),"function"==typeof t&&(r=t,t={shallow:!1}),g.convertBuffer(e,(n,i)=>{if(n)return r(n);const s=this.routingTable.closestPeers(i,this.kBucketSize),a=new m(this,e,()=>async r=>{return{closerPeers:await this._closerPeersSingleAsync(e,r),pathComplete:!!t.shallow||void 0}});d(a.run(s))((e,t)=>e?r(e):t&&t.finalSet?void o([e=>g.sortClosestPeers(Array.from(t.finalSet),i,e),(e,t)=>t(null,e.slice(0,this.kBucketSize))],r):r(null,[]))})}getPublicKey(e,t){let r;if(this._log("getPublicKey %s",e.toB58String()),this.peerBook.has(e)){if((r=this.peerBook.get(e))&&r.id.pubKey)return this._log("getPublicKey: found local copy"),t(null,r.id.pubKey)}else r=this.peerBook.put(new l(e));this._getPublicKeyFromNode(e,(n,i)=>{if(!n)return r.id=new h(e.id,null,i),this.peerBook.put(r),t(null,i);const s=g.keyForPublicKey(e);this.get(s,(n,i)=>{if(n)return t(n);const s=f.unmarshalPublicKey(i);r.id=new h(e,null,s),this.peerBook.put(r),t(null,s)})})}findPeerLocal(e,t){this._log("findPeerLocal %s",e.toB58String()),this.routingTable.find(e,(e,r)=>e?t(e):r&&this.peerBook.has(r)?void t(null,this.peerBook.get(r)):t())}provide(e,t){this._log("provide: %s",e.toBaseEncodedString());const r=[];o([t=>d(this.providers.addProvider(e,this.peerInfo.id))(e=>t(e)),t=>this.getClosestPeers(e.buffer,t),(t,n)=>{const i=new v(v.TYPES.ADD_PROVIDER,e.buffer,0);i.providerPeers=[this.peerInfo],a(t,(t,n)=>{this._log("putProvider %s to %s",e.toBaseEncodedString(),t.toB58String()),this.network.sendMessage(t,i,e=>{e&&r.push(e),n()})},n)}],e=>{r.length&&(e=p(`Failed to provide to ${r.length} of ${this.kBucketSize} peers`,"ERR_SOME_PROVIDES_FAILED",{errors:r})),t(e)})}findProviders(e,t,r){"function"==typeof t?(r=t,t={}):t=t||{},t.maxTimeout||t.timeout?t.maxTimeout&&!t.timeout&&(t.timeout=t.maxTimeout):t.timeout=y.minute,t.maxNumProviders=t.maxNumProviders||y.K,this._log("findProviders %s",e.toBaseEncodedString()),this._findNProviders(e,t.timeout,t.maxNumProviders,r)}findPeer(e,t,r){"function"==typeof t?(r=t,t={}):t=t||{},t.maxTimeout||t.timeout?t.maxTimeout&&!t.timeout&&(t.timeout=t.maxTimeout):t.timeout=y.minute,this._log("findPeer %s",e.toB58String()),this.findPeerLocal(e,(n,i)=>n?r(n):null!=i?(this._log("found local"),r(null,i)):void o([t=>g.convertPeerId(e,t),(r,n)=>{const i=this.routingTable.closestPeers(r,this.kBucketSize);if(0===i.length)return n(p(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED"));if(i.find(t=>t.isEqual(e))&&this.peerBook.has(e))return this._log("found in peerbook"),n(null,this.peerBook.get(e));const s=new m(this,e.id,()=>async t=>{const r=await this._findPeerSingleAsync(t,e),n=r.closerPeers.find(t=>t.id.isEqual(e));return n?{peer:n,queryComplete:!0}:{closerPeers:r.closerPeers}});u(e=>{d(s.run(i))(e)},t.timeout)((e,t)=>{s.stop(),n(e,t)})},(t,r)=>{let n=!1;if(t.paths.forEach(e=>{e.success&&(n=!0,this.peerBook.put(e.peer))}),this._log("findPeer %s: %s",e.toB58String(),n),!n)return r(p(new Error("No peer found"),"ERR_NOT_FOUND"));r(null,this.peerBook.get(e))}],r))}_peerDiscovered(e){this.emit("peer",e)}}},
/*!******************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/record.js ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! protons */28),i=r(/*! assert */24),s=n(r(/*! ./record.proto */971)).Record,o=r(/*! ./utils */972);class a{constructor(e,r,n){e&&i(t.isBuffer(e),"key must be a Buffer"),r&&i(t.isBuffer(r),"value must be a buffer"),this.key=e,this.value=r,this.timeReceived=n}serialize(){return s.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&o.toRFC3339(this.timeReceived)}}static deserialize(e){const t=s.decode(e);return a.fromDeserialized(t)}static fromDeserialized(e){let t;return e.timeReceived&&(t=o.parseRFC3339(e.timeReceived)),new a(e.key,e.value,t)}}e.exports=a}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/record.proto.js ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="// Record represents a dht record that contains a value\n// for a key value pair\nmessage Record {\n  // The key that references this record\n  bytes key = 1;\n\n  // The actual value this record is storing\n  bytes value = 2;\n\n  // Note: These fields were removed from the Record message\n  // hash of the authors public key\n  // optional bytes author = 3;\n  // A PKI signature for the key+value+author\n  // optional bytes signature = 4;\n\n  // Time the record was received, set by receiver\n  optional string timeReceived = 5;\n}"},
/*!*****************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/utils.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports.toRFC3339=e=>{return`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}T${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}:${String(e.getUTCSeconds()).padStart(2,"0")}.${1e3*e.getUTCMilliseconds()*1e3}Z`},e.exports.parseRFC3339=e=>{const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(!r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,u))}},
/*!*********************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validator.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! buffer-split */149),i=r(/*! err-code */8);e.exports={verifyRecord:(e,r,s)=>{const o=r.key,a=n(o,t.from("/"));if(a.length<3)return s();const c=e[a[1].toString()];if(!c){return s(i(new Error("Invalid record keytype"),"ERR_INVALID_RECORD_KEY_TYPE"))}c.func(o,r.value,s)},validators:r(/*! ./validators */974)}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!****************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validators/index.js ***!
  \****************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={pk:r(/*! ./public-key */975)}},
/*!*********************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/validators/public-key.js ***!
  \*********************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! async/setImmediate */32),i=r(/*! multihashing-async */976);e.exports={func:(e,r,s)=>{const o=e=>n(()=>s(e));if(!t.isBuffer(e))return o(new Error('"key" must be a Buffer'));if(e.length<3)return o(new Error("invalid public key record"));if("/pk/"!==e.slice(0,4).toString())return o(new Error("key was not prefixed with /pk/"));const a=e.slice(4);i(r,"sha2-256",(e,t)=>e?o(e):a.equals(t)?void o():o(new Error("public key does not match passed in key")))},sign:!1}}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/node_modules/multihashing-async/src/index.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! multihashes */13),i=r(/*! ./crypto */977);function s(e,t,r,i){if("function"==typeof r&&(i=r,r=void 0),!i)throw new Error("Missing callback");s.digest(e,t,r,(e,s)=>{if(e)return i(e);i(null,n.encode(s,t,r))})}e.exports=s,s.Buffer=t,s.multihash=n,s.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=void 0),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=s.createHash(t)}catch(e){return o(e)}i(e,o)},s.createHash=function(e){if(e=n.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions),s.validate=(e,r,i)=>{s(e,n.decode(r).name,(e,n)=>{if(e)return i(e);i(e,0===t.compare(r,n))})}}).call(this,r(/*! ./../../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/node_modules/multihashing-async/src/crypto.js ***!
  \**************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! js-sha3 */49),i=r(/*! murmurhash3js */101),s=r(/*! ./utils */439),o=r(/*! ./crypto-sha1-2 */978),a=s.toCallback,c=s.toBuf,u=s.fromString,h=s.fromNumberTo32BitBuf;e.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(n.sha3_512)),sha3384:a(c(n.sha3_384)),sha3256:a(c(n.sha3_256)),sha3224:a(c(n.sha3_224)),shake128:a(c(n.shake_128,128)),shake256:a(c(n.shake_256,256)),keccak224:a(c(n.keccak_224)),keccak256:a(c(n.keccak_256)),keccak384:a(c(n.keccak_384)),keccak512:a(c(n.keccak_512)),murmur3128:a(c(u(i.x64.hash128))),murmur332:a(h(u(i.x86.hash32))),addBlake:r(/*! ./blake */979),dblSha2256:(e,r)=>{o.sha2256(e,(e,n)=>{e&&r(e),o.sha2256(t.from(n),r)})}}}).call(this,r(/*! ./../../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/node_modules/multihashing-async/src/crypto-sha1-2-browser.js ***!
  \*****************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! nodeify */102),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(r,s)=>{const o=i.digest({name:e},r);if("function"!=typeof o.then)return o.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(o.oncomplete=e=>{s(null,e.target.result)});n(o.then(e=>t.from(new Uint8Array(e))),s)}}e.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this,r(/*! ./../../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/node_modules/multihashing-async/src/blake.js ***!
  \*************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! blakejs */50),i=r(/*! ./utils */439).toCallback,s={init:n.blake2bInit,update:n.blake2bUpdate,digest:n.blake2bFinal},o={init:n.blake2sInit,update:n.blake2sUpdate,digest:n.blake2sFinal},a=(e,r)=>i(n=>{const i=r.init(e,null);return r.update(i,n),t.from(r.digest(i))});e.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}}).call(this,r(/*! ./../../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/selection.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! buffer-split */149),i=r(/*! err-code */8);e.exports={bestRecord:(e,r,s)=>{if(0===s.length){throw i(new Error("No records given"),"ERR_NO_RECORDS_RECEIVED")}const o=n(r,t.from("/"));if(o.length<3){throw i(new Error("Record key does not have a selector function"),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}const a=e[o[1].toString()];if(!a){const e=`Unrecognized key prefix: ${o[1]}`;throw i(new Error(e),"ERR_UNRECOGNIZED_KEY_PREFIX")}return a(r,s)},selectors:r(/*! ./selectors */981)}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/selectors/index.js ***!
  \***************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports={pk:r(/*! ./public-key */982)}},
/*!********************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/libp2p-record/src/selectors/public-key.js ***!
  \********************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=(e,t)=>0},
/*!**************************************!*\
  !*** ./node_modules/async/filter.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(/*! ./internal/filter */984)),i=s(r(/*! ./internal/doParallel */233));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)(n.default),e.exports=t.default},
/*!***********************************************!*\
  !*** ./node_modules/async/internal/filter.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){((0,i.default)(t)?u:h)(e,t,(0,a.default)(r),n||o.default)};var n=c(r(/*! lodash/_arrayMap */440)),i=c(r(/*! lodash/isArrayLike */115)),s=c(r(/*! lodash/_baseProperty */985)),o=c(r(/*! lodash/noop */42)),a=c(r(/*! ./wrapAsync */33));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n){var i=new Array(t.length);e(t,(function(e,t,n){r(e,(function(e,r){i[t]=!!r,n(e)}))}),(function(e){if(e)return n(e);for(var r=[],s=0;s<t.length;s++)i[s]&&r.push(t[s]);n(null,r)}))}function h(e,t,r,i){var o=[];e(t,(function(e,t,n){r(e,(function(r,i){r?n(r):(i&&o.push({index:t,value:e}),n())}))}),(function(e){e?i(e):i(null,(0,n.default)(o.sort((function(e,t){return e.index-t.index})),(0,s.default)("value")))}))}e.exports=t.default},
/*!**********************************************!*\
  !*** ./node_modules/lodash/_baseProperty.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},
/*!*************************************!*\
  !*** ./node_modules/is-fn/index.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=Object.prototype.toString;e.exports=function(e){return"[object Function]"===n.call(e)}},
/*!**************************************************!*\
  !*** ./node_modules/set-immediate-shim/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){e.exports="function"==typeof t?t:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}}).call(this,r(/*! ./../timers-browserify/main.js */41).setImmediate)},
/*!****************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/routing.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! k-bucket */989),i=r(/*! ./utils */26);e.exports=class{constructor(e,t){this.self=e,this._onPing=this._onPing.bind(this),i.convertPeerId(e,(e,r)=>{if(e)throw e;this.kb=new n({localNodeId:r,numberOfNodesPerKBucket:t,numberOfNodesToPing:1}),this.kb.on("ping",this._onPing)})}_onPing(e,t){const r=e[0];this.kb.remove(r.id),this.kb.add(t)}get size(){return this.kb.count()}find(e,t){i.convertPeerId(e,(r,n)=>{if(r)return t(r);const i=this.closestPeer(n);if(i&&i.isEqual(e))return t(null,i);t()})}closestPeer(e,t){const r=this.closestPeers(e,1);if(r.length>0)return r[0]}closestPeers(e,t){return this.kb.closest(e,t).map(e=>e.peer)}add(e,t){i.convertPeerId(e,(r,n)=>{if(r)return t(r);this.kb.add({id:n,peer:e}),t()})}remove(e,t){i.convertPeerId(e,(e,r)=>{if(e)return t(e);this.kb.remove(r),t()})}}},
/*!****************************************!*\
  !*** ./node_modules/k-bucket/index.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! randombytes */429),{EventEmitter:i}=r(/*! events */5);function s(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;++r)if(e[r]!==t[r])return!1;return!0}function o(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}class a extends i{constructor(e={}){super(),this.localNodeId=e.localNodeId||n(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||a.distance,this.arbiter=e.arbiter||a.arbiter,this.metadata=Object.assign({},e.metadata),o("option.localNodeId as parameter 1",this.localNodeId),this.root={contacts:[],dontSplit:!1,left:null,right:null}}static arbiter(e,t){return e.vectorClock>t.vectorClock?e:t}static distance(e,t){let r=0,n=0;const i=Math.min(e.length,t.length),s=Math.max(e.length,t.length);for(;n<i;++n)r=256*r+(e[n]^t[n]);for(;n<s;++n)r=256*r+255;return r}add(e){o("contact.id",(e||{}).id);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e.id,t++);const n=this._indexOf(r,e.id);return n>=0?(this._update(r,n,e),this):r.contacts.length<this.numberOfNodesPerKBucket?(r.contacts.push(e),this.emit("added",e),this):r.dontSplit?(this.emit("ping",r.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(r,t),this.add(e))}closest(e,t=1/0){if(o("id",e),!Number.isInteger(t)&&t!==1/0||t<=0)throw new TypeError("n is not positive number");let r=[];for(let n=[this.root],i=0;n.length>0&&r.length<t;){const t=n.pop();if(null===t.contacts){const r=this._determineNode(t,e,i++);n.push(t.left===r?t.right:t.left),n.push(r)}else r=r.concat(t.contacts)}return r.map(t=>[this.distance(t.id,e),t]).sort((e,t)=>e[0]-t[0]).slice(0,t).map(e=>e[1])}count(){let e=0;for(const t=[this.root];t.length>0;){const r=t.pop();null===r.contacts?t.push(r.right,r.left):e+=r.contacts.length}return e}_determineNode(e,t,r){const n=r>>3,i=r%8;return t.length<=n&&0!==i?e.left:t[n]&1<<7-i?e.right:e.left}get(e){o("id",e);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e,t++);const n=this._indexOf(r,e);return n>=0?r.contacts[n]:null}_indexOf(e,t){for(let r=0;r<e.contacts.length;++r)if(s(e.contacts[r].id,t))return r;return-1}remove(e){o("the id as parameter 1",e);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e,t++);const n=this._indexOf(r,e);if(n>=0){const e=r.contacts.splice(n,1)[0];this.emit("removed",e)}return this}_split(e,t){e.left={contacts:[],dontSplit:!1,left:null,right:null},e.right={contacts:[],dontSplit:!1,left:null,right:null};for(const r of e.contacts)this._determineNode(e,r.id,t).contacts.push(r);e.contacts=null;const r=this._determineNode(e,this.localNodeId,t);(e.left===r?e.right:e.left).dontSplit=!0}toArray(){let e=[];for(const t=[this.root];t.length>0;){const r=t.pop();null===r.contacts?t.push(r.right,r.left):e=e.concat(r.contacts)}return e}_update(e,t,r){if(!s(e.contacts[t].id,r.id))throw new Error("wrong index for _update");const n=e.contacts[t],i=this.arbiter(n,r);i===n&&n!==r||(e.contacts.splice(t,1),e.contacts.push(i),this.emit("updated",n,i))}}e.exports=a},
/*!***********************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/multihashing-async/src/crypto.js ***!
  \***********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! js-sha3 */49),i=r(/*! murmurhash3js */101),s=r(/*! ./utils */442),o=r(/*! ./crypto-sha1-2 */991),a=s.toCallback,c=s.toBuf,u=s.fromString,h=s.fromNumberTo32BitBuf;e.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(n.sha3_512)),sha3384:a(c(n.sha3_384)),sha3256:a(c(n.sha3_256)),sha3224:a(c(n.sha3_224)),shake128:a(c(n.shake_128,128)),shake256:a(c(n.shake_256,256)),keccak224:a(c(n.keccak_224)),keccak256:a(c(n.keccak_256)),keccak384:a(c(n.keccak_384)),keccak512:a(c(n.keccak_512)),murmur3128:a(c(u(i.x64.hash128))),murmur332:a(h(u(i.x86.hash32))),addBlake:r(/*! ./blake */992),dblSha2256:(e,r)=>{o.sha2256(e,(e,n)=>{e&&r(e),o.sha2256(t.from(n),r)})}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**************************************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/multihashing-async/src/crypto-sha1-2-browser.js ***!
  \**************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! nodeify */102),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(r,s)=>{const o=i.digest({name:e},r);if("function"!=typeof o.then)return o.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(o.oncomplete=e=>{s(null,e.target.result)});n(o.then(e=>t.from(new Uint8Array(e))),s)}}e.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/node_modules/multihashing-async/src/blake.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! blakejs */50),i=r(/*! ./utils */442).toCallback,s={init:n.blake2bInit,update:n.blake2bUpdate,digest:n.blake2bFinal},o={init:n.blake2sInit,update:n.blake2sUpdate,digest:n.blake2sFinal},a=(e,r)=>i(n=>{const i=r.init(e,null);return r.update(i,n),t.from(r.digest(i))});e.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/query/run.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../peer-distance-list */994),i=r(/*! events */5),s=r(/*! promisify-es6 */9),o=r(/*! ./path */995),a=r(/*! ./workerQueue */999),c=r(/*! ../utils */26);e.exports=class extends i{constructor(e){super(),this.query=e,this.running=!1,this.workers=[],this.peersSeen=new Set,this.errors=[],this.peersQueried=null}stop(){if(this.running){this.running=!1;for(const e of this.workers)e.stop()}}async execute(e){const t=[],r=Math.min(this.query.dht.disjointPaths,e.length);for(let e=0;e<r;e++)t.push(new o(this,this.query.makePath(e,r)));e.forEach((e,n)=>{t[n%r].addInitialPeer(e)}),await this.executePaths(t);const n={finalSet:new Set(this.peersQueried.peers),paths:[]};for(const e of t)e.res&&(e.res.pathComplete||e.res.queryComplete)&&(e.res.success=!0,n.paths.push(e.res));return n}async executePaths(e){this.running=!0,this.emit("start");try{await Promise.all(e.map(e=>e.execute()))}finally{this.stop(),this.emit("complete")}if(this.errors.length===this.peersSeen.size)throw this.errors[0]}async workerQueue(e){await this.init(),await this.startWorker(e)}async startWorker(e){const t=new a(this.query.dht,this,e,this.query._log);this.workers.push(t),await t.execute()}async init(){this.peersQueried||(this.peersQueriedPromise?await this.peersQueriedPromise:(this.peersQueriedPromise=(async()=>{const e=await s(e=>c.convertBuffer(this.query.key,e))();this.peersQueried=new n(e,this.query.dht.kBucketSize)})(),await this.peersQueriedPromise,delete this.peersQueriedPromise))}async continueQuerying(e){if(this.peersQueried.length<this.peersQueried.capacity)return!0;const t=e.queue.workersList().map(e=>e.data);return!!await s(e=>this.peersQueried.anyCloser(t,e))()}}},
/*!***************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/peer-distance-list.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! xor-distance */240),i=r(/*! ./utils */26),s=r(/*! async/map */116);e.exports=class{constructor(e,t){this.originDhtKey=e,this.capacity=t,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(e=>e.peerId)}add(e,t){if(this.peerDistances.find(t=>t.peerId.id.equals(e.id)))return t();i.convertPeerId(e,(r,i)=>{if(r)return t(r);const s={peerId:e,distance:n(this.originDhtKey,i)};this.peerDistances.push(s),this.peerDistances.sort((e,t)=>n.compare(e.distance,t.distance)),this.peerDistances=this.peerDistances.slice(0,this.capacity),t()})}anyCloser(e,t){return e.length?this.length?void s(e,(e,t)=>i.convertPeerId(e,t),(e,r)=>{if(e)return t(e);const i=this.peerDistances[this.peerDistances.length-1].distance;for(const e of r){const r=n(this.originDhtKey,e);if(n.compare(r,i)<0)return t(null,!0)}return t(null,!1)}):t(null,!0):t(null,!1)}}},
/*!*******************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/query/path.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../peer-queue */996),i=r(/*! ../utils */26),s=3e4;e.exports=class{constructor(e,t){if(this.run=e,this.queryFunc=i.withTimeout(t,s),!this.queryFunc)throw new Error("Path requires a `queryFn` to be specified");if("function"!=typeof this.queryFunc)throw new Error("Path expected `queryFn` to be a function. Got "+typeof this.queryFunc);this.initialPeers=[],this.peersToQuery=null}addInitialPeer(e){this.initialPeers.push(e)}async execute(){const e=await n.fromKey(this.run.query.key);this.peersToQuery=e,await Promise.all(this.initialPeers.map(e=>this.addPeerToQuery(e))),await this.run.workerQueue(this)}async addPeerToQuery(e){this.run.query.dht._isSelf(e)||this.run.peersSeen.has(e)||await this.peersToQuery.enqueue(e)}}},
/*!*******************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/peer-queue.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! heap */997),i=r(/*! xor-distance */240),s=r(/*! debug */1),o=r(/*! promisify-es6 */9),a=r(/*! ./utils */26),c=s("libp2p:dht:peer-queue");class u{static async fromPeerId(e){const t=await o(t=>a.convertPeerId(e,t))();return new u(t)}static async fromKey(e){const t=await o(t=>a.convertBuffer(e,t))();return new u(t)}constructor(e){c("create: %b",e),this.from=e,this.heap=new n(a.xorCompare)}async enqueue(e){c("enqueue %s",e.toB58String());const t=await o(t=>a.convertPeerId(e,t))(),r={id:e,distance:i(this.from,t)};this.heap.push(r)}dequeue(){const e=this.heap.pop();return c("dequeue %s",e.id.toB58String()),e.id}get length(){return this.heap.size()}}e.exports=u},
/*!************************************!*\
  !*** ./node_modules/heap/index.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ./lib/heap */998)},
/*!***************************************!*\
  !*** ./node_modules/heap/lib/heap.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n,i,s;(function(){var r,o,a,c,u,h,l,f,d,p,A,g,y,m,_;a=Math.floor,p=Math.min,o=function(e,t){return e<t?-1:e>t?1:0},d=function(e,t,r,n,i){var s;if(null==r&&(r=0),null==i&&(i=o),r<0)throw new Error("lo must be non-negative");for(null==n&&(n=e.length);r<n;)i(t,e[s=a((r+n)/2)])<0?n=s:r=s+1;return[].splice.apply(e,[r,r-r].concat(t)),t},h=function(e,t,r){return null==r&&(r=o),e.push(t),m(e,0,e.length-1,r)},u=function(e,t){var r,n;return null==t&&(t=o),r=e.pop(),e.length?(n=e[0],e[0]=r,_(e,0,t)):n=r,n},f=function(e,t,r){var n;return null==r&&(r=o),n=e[0],e[0]=t,_(e,0,r),n},l=function(e,t,r){var n;return null==r&&(r=o),e.length&&r(e[0],t)<0&&(t=(n=[e[0],t])[0],e[0]=n[1],_(e,0,r)),t},c=function(e,t){var r,n,i,s,c,u;for(null==t&&(t=o),c=[],n=0,i=(s=function(){u=[];for(var t=0,r=a(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)u.push(t);return u}.apply(this).reverse()).length;n<i;n++)r=s[n],c.push(_(e,r,t));return c},y=function(e,t,r){var n;if(null==r&&(r=o),-1!==(n=e.indexOf(t)))return m(e,0,n,r),_(e,n,r)},A=function(e,t,r){var n,i,s,a,u;if(null==r&&(r=o),!(i=e.slice(0,t)).length)return i;for(c(i,r),s=0,a=(u=e.slice(t)).length;s<a;s++)n=u[s],l(i,n,r);return i.sort(r).reverse()},g=function(e,t,r){var n,i,s,a,h,l,f,A,g;if(null==r&&(r=o),10*t<=e.length){if(!(s=e.slice(0,t).sort(r)).length)return s;for(i=s[s.length-1],a=0,l=(f=e.slice(t)).length;a<l;a++)r(n=f[a],i)<0&&(d(s,n,0,null,r),s.pop(),i=s[s.length-1]);return s}for(c(e,r),g=[],h=0,A=p(t,e.length);0<=A?h<A:h>A;0<=A?++h:--h)g.push(u(e,r));return g},m=function(e,t,r,n){var i,s,a;for(null==n&&(n=o),i=e[r];r>t&&n(i,s=e[a=r-1>>1])<0;)e[r]=s,r=a;return e[r]=i},_=function(e,t,r){var n,i,s,a,c;for(null==r&&(r=o),i=e.length,c=t,s=e[t],n=2*t+1;n<i;)(a=n+1)<i&&!(r(e[n],e[a])<0)&&(n=a),e[t]=e[n],n=2*(t=n)+1;return e[t]=s,m(e,c,t,r)},r=function(){function e(e){this.cmp=null!=e?e:o,this.nodes=[]}return e.push=h,e.pop=u,e.replace=f,e.pushpop=l,e.heapify=c,e.updateItem=y,e.nlargest=A,e.nsmallest=g,e.prototype.push=function(e){return h(this.nodes,e,this.cmp)},e.prototype.pop=function(){return u(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return f(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return c(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return y(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),i=[],void 0===(s="function"==typeof(n=function(){return r})?n.apply(t,i):n)||(e.exports=s)}).call(this)},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/query/workerQueue.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/queue */444),i=r(/*! promisify-es6 */9),s=r(/*! promise-to-callback */90);e.exports=class{constructor(e,t,r,n){this.dht=e,this.run=t,this.path=r,this.log=n,this.concurrency=this.dht.concurrency,this.queue=this.setupQueue(),this.execution=null}setupQueue(){const e=n((e,t)=>{s(this.processNext(e))(t)},this.concurrency);return e.error=e=>{this.log.error("queue",e),this.stop(e)},e.drain=()=>{this.log("queue:drain"),this.stop()},e.unsaturated=()=>{this.running&&this.fill()},e.buffer=0,e}stop(e){this.running&&(this.running=!1,this.queue.kill(),this.log("worker:stop, %d workers still running",this.run.workers.filter(e=>e.running).length),e?this.execution.reject(e):this.execution.resolve())}async execute(){this.running=!0,this.execution={};const e=new Promise((e,t)=>Object.assign(this.execution,{resolve:e,reject:t}));this.fill(),await e}fill(){for(;this.queue.running()+this.queue.length()<this.concurrency&&this.path.peersToQuery.length>0;)this.queue.push(this.path.peersToQuery.dequeue())}async processNext(e){if(!this.running)return;if(this.run.peersSeen.has(e))return;let t,r,n,i;try{t=await this.run.continueQuerying(this)}catch(e){r=e}if(this.running){if(r)throw r;if(t){if(!this.run.peersSeen.has(e)){this.run.peersSeen.add(e),this.log("queue:work");try{n=await this.execQuery(e)}catch(e){i=e}if(this.running){if(this.log("queue:work:done",i,n),i)throw i;if(n&&n.queryComplete)return this.log("query:complete"),void this.run.stop();n&&n.pathComplete&&this.stop()}}}else this.stop()}}async execQuery(e){let t,r;try{t=await this.path.queryFunc(e)}catch(e){r=e}if(this.running)if(r)this.run.errors.push(r);else{if(await i(t=>this.run.peersQueried.add(e,t))(),t.pathComplete||t.queryComplete)return this.path.res=t,{pathComplete:t.pathComplete,queryComplete:t.queryComplete};t.closerPeers&&t.closerPeers.length>0&&await Promise.all(t.closerPeers.map(async e=>{this.dht._isSelf(e.id)||(e=this.dht.peerBook.put(e),this.dht._peerDiscovered(e),await this.path.addPeerToQuery(e.id))}))}}}},
/*!**********************************************!*\
  !*** ./node_modules/async/internal/queue.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var h=(0,u.default)(e),l=0,f=[],d=!1;function p(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(y.started=!0,(0,i.default)(e)||(e=[e]),0===e.length&&y.idle())return(0,a.default)((function(){y.drain()}));for(var n=0,o=e.length;n<o;n++){var c={data:e[n],callback:r||s.default};t?y._tasks.unshift(c):y._tasks.push(c)}d||(d=!0,(0,a.default)((function(){d=!1,y.process()})))}function A(e){return function(t){l-=1;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=(0,n.default)(f,s,0);0===o?f.shift():o>0&&f.splice(o,1),s.callback.apply(s,arguments),null!=t&&y.error(t,s.data)}l<=y.concurrency-y.buffer&&y.unsaturated(),y.idle()&&y.drain(),y.process()}}var g=!1,y={_tasks:new c.default,concurrency:t,payload:r,saturated:s.default,unsaturated:s.default,buffer:t/4,empty:s.default,drain:s.default,error:s.default,started:!1,paused:!1,push:function(e,t){p(e,!1,t)},kill:function(){y.drain=s.default,y._tasks.empty()},unshift:function(e,t){p(e,!0,t)},remove:function(e){y._tasks.remove(e)},process:function(){if(!g){for(g=!0;!y.paused&&l<y.concurrency&&y._tasks.length;){var e=[],t=[],r=y._tasks.length;y.payload&&(r=Math.min(r,y.payload));for(var n=0;n<r;n++){var i=y._tasks.shift();e.push(i),f.push(i),t.push(i.data)}l+=1,0===y._tasks.length&&y.empty(),l===y.concurrency&&y.saturated();var s=(0,o.default)(A(e));h(t,s)}g=!1}},length:function(){return y._tasks.length},running:function(){return l},workersList:function(){return f},idle:function(){return y._tasks.length+l===0},pause:function(){y.paused=!0},resume:function(){!1!==y.paused&&(y.paused=!1,(0,a.default)(y.process))}};return y};var n=h(r(/*! lodash/_baseIndexOf */1001)),i=h(r(/*! lodash/isArray */79)),s=h(r(/*! lodash/noop */42)),o=h(r(/*! ./onlyOnce */105)),a=h(r(/*! ./setImmediate */135)),c=h(r(/*! ./DoublyLinkedList */1005)),u=h(r(/*! ./wrapAsync */33));function h(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!*********************************************!*\
  !*** ./node_modules/lodash/_baseIndexOf.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseFindIndex */1002),i=r(/*! ./_baseIsNaN */1003),s=r(/*! ./_strictIndexOf */1004);e.exports=function(e,t,r){return t==t?s(e,t,r):n(e,i,r)}},
/*!***********************************************!*\
  !*** ./node_modules/lodash/_baseFindIndex.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}},
/*!*******************************************!*\
  !*** ./node_modules/lodash/_baseIsNaN.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return e!=e}},
/*!***********************************************!*\
  !*** ./node_modules/lodash/_strictIndexOf.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},
/*!*********************************************************!*\
  !*** ./node_modules/async/internal/DoublyLinkedList.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(){this.head=this.tail=null,this.length=0}function i(e,t){e.length=1,e.head=e.tail=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},n.prototype.empty=function(){for(;this.head;)this.shift();return this},n.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},n.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},n.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):i(this,e)},n.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):i(this,e)},n.prototype.shift=function(){return this.head&&this.removeLink(this.head)},n.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},n.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,r=0;r<this.length;r++)e[r]=t.data,t=t.next;return e},n.prototype.remove=function(e){for(var t=this.head;t;){var r=t.next;e(t)&&this.removeLink(t),t=r}return this},e.exports=t.default},
/*!****************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/network.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream */25),i=r(/*! async/timeout */160),s=r(/*! pull-length-prefixed */30),o=r(/*! async/setImmediate */32),a=r(/*! err-code */8),c=r(/*! ./rpc */1007),u=r(/*! ./constants */91),h=r(/*! ./message */57),l=r(/*! ./utils */26);function f(e,t,r){n(n.values([t]),s.encode(),e,n.filter(e=>e.length<u.maxMessageSize),s.decode(),n.collect((e,t)=>{if(e)return r(e);if(0===t.length)return r(a(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED"));let n;try{n=h.deserialize(t[0])}catch(e){return r(a(e,"ERR_FAILED_DESERIALIZE_RESPONSE"))}r(null,n)}))}e.exports=class{constructor(e){this.dht=e,this.readMessageTimeout=u.READ_MESSAGE_TIMEOUT,this._log=l.logger(this.dht.peerInfo.id,"net"),this._rpc=c(this.dht),this._onPeerConnected=this._onPeerConnected.bind(this),this._running=!1}start(e){const t=t=>o(()=>e(t));return this._running?t(a(new Error("Network is already running"),"ERR_NETWORK_ALREADY_RUNNING")):this.dht.isStarted?(this._running=!0,this.dht.switch.handle(u.PROTOCOL_DHT,this._rpc),this.dht.switch.on("peer-mux-established",this._onPeerConnected),void t()):t(a(new Error("Can not start network"),"ERR_CANNOT_START_NETWORK"))}stop(e){const t=t=>o(()=>e(t));if(!this.dht.isStarted&&!this.isStarted)return t(a(new Error("Network is already stopped"),"ERR_NETWORK_ALREADY_STOPPED"));this._running=!1,this.dht.switch.removeListener("peer-mux-established",this._onPeerConnected),this.dht.switch.unhandle(u.PROTOCOL_DHT),t()}get isStarted(){return this._running}get isConnected(){return this.dht.isStarted&&this.isStarted}_onPeerConnected(e){if(!this.isConnected)return this._log.error("Network is offline");this.dht.switch.dial(e,u.PROTOCOL_DHT,(t,r)=>{if(t)return this._log("%s does not support protocol: %s",e.id.toB58String(),u.PROTOCOL_DHT);n(n.empty(),r),this.dht._add(e,t=>{if(t)return this._log.error("Failed to add to the routing table",t);this._log("added to the routing table: %s",e.id.toB58String())})})}sendRequest(e,t,r){if(!this.isConnected)return r(a(new Error("Network is offline"),"ERR_NETWORK_OFFLINE"));this._log("sending to: %s",e.toB58String()),this.dht.switch.dial(e,u.PROTOCOL_DHT,(e,n)=>{if(e)return r(e);this._writeReadMessage(n,t.serialize(),r)})}sendMessage(e,t,r){if(!this.isConnected)return o(()=>r(a(new Error("Network is offline"),"ERR_NETWORK_OFFLINE")));this._log("sending to: %s",e.toB58String()),this.dht.switch.dial(e,u.PROTOCOL_DHT,(e,n)=>{if(e)return r(e);this._writeMessage(n,t.serialize(),r)})}_writeReadMessage(e,t,r){i(f,this.readMessageTimeout)(e,t,r)}_writeMessage(e,t,r){n(n.values([t]),s.encode(),e,n.onEnd(r))}}},
/*!******************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/rpc/index.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream */25),i=r(/*! pull-length-prefixed */30),s=r(/*! ../message */57),o=r(/*! ./handlers */1009),a=r(/*! ../utils */26),c=r(/*! ../constants */91);e.exports=e=>{const t=a.logger(e.peerInfo.id,"rpc"),r=o(e);return function(o,a){a.getPeerInfo((o,u)=>{if(o)return t.error("Failed to get peer info"),void t.error(o);t("from: %s",u.id.toB58String()),n(a,i.decode(),n.filter(e=>e.length<c.maxMessageSize),n.map(e=>{let r;try{r=s.deserialize(e)}catch(e){return void t.error("failed to read incoming message",e)}return r}),n.filter(Boolean),n.asyncMap((n,i)=>(function(n,i,s){e._add(n,e=>{e&&(t.error("Failed to update the kbucket store"),t.error(e));const o=r(i.type);if(!o)return t.error(`no handler found for message type: ${i.type}`),s();o(n,i,s)})})(u,n,i)),n.filter(Boolean),n.map(e=>{let r;try{r=e.serialize()}catch(e){return void t.error("failed to send message",e)}return r}),n.filter(Boolean),i.encode(),a)})}}},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/message/dht.proto.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports='// can\'t use, because protocol-buffers doesn\'t support imports\n// so we have to duplicate for now :(\n// import "record.proto";\n\nmessage Record {\n  // adjusted for javascript\n  optional bytes key = 1;\n  optional bytes value = 2;\n  optional bytes author = 3;\n  optional bytes signature = 4;\n  optional string timeReceived = 5;\n}\n\nmessage Message {\n  enum MessageType {\n    PUT_VALUE = 0;\n    GET_VALUE = 1;\n    ADD_PROVIDER = 2;\n    GET_PROVIDERS = 3;\n    FIND_NODE = 4;\n    PING = 5;\n  }\n\n  enum ConnectionType {\n    // sender does not have a connection to peer, and no extra information (default)\n    NOT_CONNECTED = 0;\n\n    // sender has a live connection to peer\n    CONNECTED = 1;\n\n    // sender recently connected to peer\n    CAN_CONNECT = 2;\n\n    // sender recently tried to connect to peer repeatedly but failed to connect\n    // ("try" here is loose, but this should signal "made strong effort, failed")\n    CANNOT_CONNECT = 3;\n  }\n\n  message Peer {\n    // ID of a given peer.\n    optional bytes id = 1;\n\n    // multiaddrs for a given peer\n    repeated bytes addrs = 2;\n\n    // used to signal the sender\'s connection capabilities to the peer\n    optional ConnectionType connection = 3;\n  }\n\n  // defines what type of message it is.\n  optional MessageType type = 1;\n\n  // defines what coral cluster level this query/response belongs to.\n  // in case we want to implement coral\'s cluster rings in the future.\n  optional int32 clusterLevelRaw = 10;\n\n  // Used to specify the key associated with this message.\n  // PUT_VALUE, GET_VALUE, ADD_PROVIDER, GET_PROVIDERS\n  // adjusted for javascript\n  optional bytes key = 2;\n\n  // Used to return a value\n  // PUT_VALUE, GET_VALUE\n  // adjusted Record to bytes for js\n  optional bytes record = 3;\n\n  // Used to return peers closer to a key in a query\n  // GET_VALUE, GET_PROVIDERS, FIND_NODE\n  repeated Peer closerPeers = 8;\n\n  // Used to return Providers\n  // GET_VALUE, ADD_PROVIDER, GET_PROVIDERS\n  repeated Peer providerPeers = 9;\n}'},
/*!***************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/rpc/handlers/index.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../../message */57).TYPES;e.exports=e=>{const t={[n.GET_VALUE]:r(/*! ./get-value */1010)(e),[n.PUT_VALUE]:r(/*! ./put-value */1011)(e),[n.FIND_NODE]:r(/*! ./find-node */1012)(e),[n.ADD_PROVIDER]:r(/*! ./add-provider */1013)(e),[n.GET_PROVIDERS]:r(/*! ./get-providers */1014)(e),[n.PING]:r(/*! ./ping */1015)(e)};return function(e){return t[e]}}},
/*!*******************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/rpc/handlers/get-value.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/parallel */56),i=r(/*! libp2p-record */118).Record,s=r(/*! err-code */8),o=r(/*! ../../message */57),a=r(/*! ../../utils */26);e.exports=e=>{const t=a.logger(e.peerInfo.id,"rpc:get-value");return function(r,c,u){const h=c.key;if(t("key: %b",h),!h||0===h.length)return u(s(new Error("Invalid key"),"ERR_INVALID_KEY"));const l=new o(o.TYPES.GET_VALUE,h,c.clusterLevel);if(a.isPublicKeyKey(h)){t("is public key");const r=a.fromPublicKeyKey(h);let n;if(e._isSelf(r)?n=e.peerInfo:e.peerBook.has(r)&&(n=e.peerBook.get(r)),n&&n.id.pubKey)return t("returning found public key"),l.record=new i(h,n.id.pubKey.bytes),u(null,l)}n([t=>e._checkLocalDatastore(h,t),t=>e._betterPeersToQuery(c,r,t)],(e,r)=>{if(e)return u(e);const n=r[0],i=r[1];n&&(t("got record"),l.record=n),i.length>0&&(t("got closer %s",i.length),l.closerPeers=i),u(null,l)})}}},
/*!*******************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/rpc/handlers/put-value.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../../utils */26),i=r(/*! err-code */8),s=r(/*! promise-to-callback */90);e.exports=e=>{const t=n.logger(e.peerInfo.id,"rpc:put-value");return function(r,o,a){const c=o.key;t("key: %b",c);const u=o.record;if(!u){const e=`Empty record from: ${r.id.toB58String()}`;return t.error(e),a(i(new Error(e),"ERR_EMPTY_RECORD"))}e._verifyRecordLocally(u,r=>{if(r)return t.error(r.message),a(r);u.timeReceived=new Date;const i=n.bufferToKey(u.key);s(e.datastore.put(i,u.serialize()))(e=>{if(e)return a(e);a(null,o)})})}}},
/*!*******************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/rpc/handlers/find-node.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! async/waterfall */54),i=r(/*! ../../message */57),s=r(/*! ../../utils */26);e.exports=e=>{const r=s.logger(e.peerInfo.id,"rpc:find-node");return function(s,o,a){r("start"),n([t=>{if(o.key.equals(e.peerInfo.id.id))return t(null,[e.peerInfo]);e._betterPeersToQuery(o,s,t)},(e,n)=>{const a=new i(o.type,t.alloc(0),o.clusterLevel);e.length>0?a.closerPeers=e:r("handle FindNode %s: could not find anything",s.id.toB58String()),n(null,a)}],a)}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/rpc/handlers/add-provider.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! cids */4),i=r(/*! err-code */8),s=r(/*! promise-to-callback */90),o=r(/*! ../../utils */26);e.exports=e=>{const t=o.logger(e.peerInfo.id,"rpc:add-provider");return function(r,o,a){if(t("start"),!o.key||0===o.key.length)return a(i(new Error("Missing key"),"ERR_MISSING_KEY"));let c;try{c=new n(o.key)}catch(e){const t=`Invalid CID: ${e.message}`;return a(i(new Error(t),"ERR_INVALID_CID"))}let u=!1;o.providerPeers.forEach(n=>{n.id.isEqual(r.id)?n.multiaddrs.size<1?t("no valid addresses for provider %s. Ignore",r.id.toB58String()):(t("received provider %s for %s (addrs %s)",r.id.toB58String(),c.toBaseEncodedString(),n.multiaddrs.toArray().map(e=>e.toString())),e._isSelf(n.id)||(u=!0,e.peerBook.put(n),s(e.providers.addProvider(c,n.id))(e=>a(e)))):t("invalid provider peer %s from %s",n.id.toB58String(),r.id.toB58String())}),u||s(e.providers.addProvider(c,r.id))(e=>a(e))}}},
/*!***********************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/rpc/handlers/get-providers.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! cids */4),i=r(/*! peer-info */21),s=r(/*! promise-to-callback */90),o=r(/*! err-code */8),a=r(/*! ../../message */57),c=r(/*! ../../utils */26);e.exports=e=>{const t=c.logger(e.peerInfo.id,"rpc:get-providers");return function(r,u,h){s(async function(r,s){let u;try{u=new n(s.key)}catch(e){throw o(new Error(`Invalid CID: ${e.message}`),"ERR_INVALID_CID")}t("%s",u.toBaseEncodedString());const h=c.bufferToKey(u.buffer),[l,f,d]=await Promise.all([e.datastore.has(h),e.providers.getProviders(u),e._betterPeersToQueryAsync(s,r)]),p=f.map(t=>e.peerBook.has(t)?e.peerBook.get(t):e.peerBook.put(new i(t)));l&&p.push(e.peerInfo);const A=new a(s.type,s.key,s.clusterLevel);return p.length>0&&(A.providerPeers=p),d.length>0&&(A.closerPeers=d),t("got %s providers %s closerPeers",p.length,d.length),A}(r,u))(h)}}},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/rpc/handlers/ping.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../../utils */26);e.exports=e=>{const t=n.logger(e.peerInfo.id,"rpc:ping");return function(e,r,n){t("from %s",e.id.toB58String()),n(null,r)}}},
/*!****************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/private.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! peer-id */7),i=r(/*! libp2p-record */118),s=r(/*! async/timeout */160),o=r(/*! peer-info */21),a=r(/*! promisify-es6 */9),c=r(/*! promise-to-callback */90),u=r(/*! err-code */8),h=r(/*! ./utils */26),l=r(/*! ./message */57),f=r(/*! ./constants */91),d=r(/*! ./query */443),p=r(/*! ./limited-peer-list */1017),A=i.Record;e.exports=e=>({_nearestPeersToQuery(e,t){c(this._nearestPeersToQueryAsync(e))(t)},async _nearestPeersToQueryAsync(t){const r=await a(h.convertBuffer)(t.key);return e.routingTable.closestPeers(r,e.kBucketSize).map(t=>e.peerBook.has(t)?e.peerBook.get(t):e.peerBook.put(new o(t)))},_betterPeersToQuery(e,t,r){c(this._betterPeersToQueryAsync(e,t))(r)},_betterPeersToQueryAsync:async(t,r)=>(e._log("betterPeersToQuery"),(await e._nearestPeersToQueryAsync(t)).filter(t=>e._isSelf(t.id)?(e._log.error("trying to return self as closer"),!1):!t.id.isEqual(r.id))),_checkLocalDatastore(e,t){c(this._checkLocalDatastoreAsync(e))(t)},async _checkLocalDatastoreAsync(t){e._log("checkLocalDatastore: %b",t);const r=h.bufferToKey(t);let n;try{n=await e.datastore.get(r)}catch(e){if("ERR_NOT_FOUND"===e.code)return;throw e}const i=A.deserialize(n);if(!i)throw u("Invalid record","ERR_INVALID_RECORD");if(!(null==i.timeReceived||h.now()-i.timeReceived>f.MAX_RECORD_AGE))return i;await e.datastore.delete(r)},_add(e,t){c(this._addAsync(e))(e=>t(e))},async _addAsync(t){t=e.peerBook.put(t),await a(r=>e.routingTable.add(t.id,r))()},_verifyRecordLocally(e,t){c(this._verifyRecordLocallyAsync(e))(e=>t(e))},async _verifyRecordLocallyAsync(t){e._log("verifyRecordLocally"),await a(r=>i.validator.verifyRecord(e.validators,t,r))()},_closerPeersSingle(e,t,r){c(this._closerPeersSingleAsync(e,t))(r)},_closerPeersSingleAsync:async(t,r)=>(e._log("_closerPeersSingle %b from %s",t,r.toB58String()),(await e._findPeerSingleAsync(r,new n(t))).closerPeers.filter(t=>!e._isSelf(t.id)).map(t=>e.peerBook.put(t))),_isSelf:t=>t&&e.peerInfo.id.id.equals(t.id),_findPeerSingle(e,t,r){c(this._findPeerSingleAsync(e,t))(r)},async _findPeerSingleAsync(t,r){e._log("_findPeerSingle %s",t.toB58String());const n=new l(l.TYPES.FIND_NODE,r.id,0);return a(r=>e.network.sendRequest(t,n,r))()},_putValueToPeer(e,t,r,n){c(this._putValueToPeerAsync(e,t,r))(n)},async _putValueToPeerAsync(t,r,n){const i=new l(l.TYPES.PUT_VALUE,t,0);if(i.record=r,!(await a(t=>e.network.sendRequest(n,i,t))()).record.value.equals(A.deserialize(r).value))throw u(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")},_putLocal(e,t,r){c(this._putLocalAsync(e,t))(e=>r(e))},async _putLocalAsync(t,r){await e.datastore.put(h.bufferToKey(t),r)},_get(e,t,r){c(this._getAsync(e,t))(r)},async _getAsync(t,r){e._log("_get %b",t);const n=await a(n=>e.getMany(t,f.GET_MANY_RECORD_COUNT,r,n))(),s=n.map(e=>e.val);let o=0;try{o=i.selection.bestRecord(e.selectors,t,s)}catch(e){if("ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"!==e.code)throw e}const c=s[o];if(e._log("GetValue %b %s",t,c),!c)throw u(new Error("best value was not found"),"ERR_NOT_FOUND");return await this._sendCorrectionRecord(t,n,c),c},async _sendCorrectionRecord(t,r,n){const i=await a(e=>h.createPutRecord(t,n,e))();return Promise.all(r.map(async r=>{if(!r.val.equals(n))if(e._isSelf(r.from))try{await e._putLocalAsync(t,i)}catch(t){e._log.error("Failed error correcting self",t)}else try{await e._putValueToPeerAsync(t,i,r.from)}catch(t){e._log.error("Failed error correcting entry",t)}}))},_getLocal(e,t){c(this._getLocalAsync(e))(t)},async _getLocalAsync(t){e._log("getLocal %b",t);const r=await e.datastore.get(h.bufferToKey(t));e._log("found %b in local datastore",t);const n=A.deserialize(r);return await e._verifyRecordLocallyAsync(n),n},_getValueOrPeers(e,t,r){c(this._getValueOrPeersAsync(e,t))((e,t)=>{if(e)return r(e);r(null,t.record,t.peers)})},async _getValueOrPeersAsync(t,r){const n=await a(n=>e._getValueSingle(t,r,n))(),i=n.closerPeers,s=n.record;if(s){try{await e._verifyRecordOnlineAsync(s)}catch(t){const r="invalid record received, discarded";throw e._log(r),u(new Error(r),"ERR_INVALID_RECORD")}return{record:s,peers:i}}if(i.length>0)return{peers:i};throw u(new Error("Not found"),"ERR_NOT_FOUND")},_getValueSingle(e,t,r){c(this._getValueSingleAsync(e,t))(r)},async _getValueSingleAsync(t,r){const n=new l(l.TYPES.GET_VALUE,r,0);return a(r=>e.network.sendRequest(t,n,r))()},_verifyRecordOnline(e,t){c(this._verifyRecordOnlineAsync(e))(e=>t(e))},async _verifyRecordOnlineAsync(t){await a(r=>i.validator.verifyRecord(e.validators,t,r))()},_getPublicKeyFromNode(e,t){c(this._getPublicKeyFromNodeAsync(e))(t)},async _getPublicKeyFromNodeAsync(t){const r=h.keyForPublicKey(t),i=await a(n=>e._getValueSingle(t,r,n))();if(!i.record||!i.record.value)throw u(`Node not responding with its public key: ${t.toB58String()}`,"ERR_INVALID_RECORD");const s=await a(e=>n.createFromPubKey(i.record.value,e))();if(!s.isEqual(t))throw u("public key does not match id","ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");return s.pubKey},_findNProviders(e,t,r,n){c(this._findNProvidersAsync(e,t,r))(n)},async _findNProvidersAsync(t,r,n){const i=new p(n);if((await e.providers.getProviders(t)).forEach(t=>{let r;r=e.peerBook.has(t)?e.peerBook.get(t):e.peerBook.put(new o(t)),i.push(r)}),i.length>=n)return i.toArray();const l=[],f=new d(e,t.buffer,(r,s)=>{const o=h.pathSize(n-i.length,s),a=new p(o);return l.push(a),async r=>{const n=await e._findProvidersSingleAsync(r,t),i=n.providerPeers;return e._log("(%s) found %s provider entries",e.peerInfo.id.toB58String(),i.length),i.forEach(t=>{a.push(e.peerBook.put(t))}),a.length>=o?{pathComplete:!0}:{closerPeers:n.closerPeers}}}),A=e.routingTable.closestPeers(t.buffer,e.kBucketSize);try{await a(e=>s(e=>{c(f.run(A))(e)},r)(e))()}catch(e){if("ETIMEDOUT"!==e.code)throw e}finally{f.stop()}if(l.forEach(e=>{e.toArray().forEach(e=>{i.push(e)})}),0===i.length)throw u(new Error("no providers found"),"ERR_NOT_FOUND");return i.toArray()},_findProvidersSingle(e,t,r){c(this._findProvidersSingleAsync(e,t))(r)},async _findProvidersSingleAsync(t,r){const n=new l(l.TYPES.GET_PROVIDERS,r.buffer,0);return a(r=>e.network.sendRequest(t,n,r))()}})},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/limited-peer-list.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./peer-list */1018);e.exports=class extends n{constructor(e){super(),this.limit=e}push(e){return this.length<this.limit&&super.push(e)}}},
/*!******************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/peer-list.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=class{constructor(){this.list=[]}push(e){return!this.has(e)&&(this.list.push(e),!0)}has(e){const t=this.list.find(t=>t.id.isEqual(e.id));return Boolean(t)}toArray(){return this.list.slice()}pop(){return this.list.pop()}get length(){return this.list.length}}},
/*!******************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/providers.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! hashlru */223),i=r(/*! varint */23),s=r(/*! peer-id */7),o=r(/*! interface-datastore */14).Key,{default:a}=r(/*! p-queue */45),c=r(/*! ./constants */91),u=r(/*! ./utils */26);function h(e){return e="string"==typeof e?e:u.encodeBase32(e.buffer),c.PROVIDERS_KEY_PREFIX+e}function l(e){const t=e.toString().split("/");if(4!==t.length)throw new Error("incorrectly formatted provider entry key in datastore: "+e);return{cid:t[2],peerId:t[3]}}function f(e){return i.decode(e)}e.exports=class{constructor(e,t,r){this.datastore=e,this._log=u.logger(t,"providers"),this.cleanupInterval=c.PROVIDERS_CLEANUP_INTERVAL,this.provideValidity=c.PROVIDERS_VALIDITY,this.lruCacheSize=r||c.PROVIDERS_LRU_CACHE_SIZE,this.providers=n(this.lruCacheSize),this.syncQueue=new a({concurrency:1})}stop(){this._cleaner&&(clearInterval(this._cleaner),this._cleaner=null)}_cleanup(){return this.syncQueue.add(async()=>{this._log("start cleanup");const e=Date.now();let t=0,r=0;const n=new Map,i=this.datastore.batch(),s=this.datastore.query({prefix:c.PROVIDERS_KEY_PREFIX});for await(const e of s)try{const{cid:s,peerId:o}=l(e.key),a=f(e.value),c=Date.now(),u=c-a,h=u>this.provideValidity;if(this._log("comparing: %d - %d = %d > %d %s",c,a,u,this.provideValidity,h?"(expired)":""),h){r++,i.delete(e.key);const t=n.get(s)||new Set;t.add(o),n.set(s,t)}t++}catch(e){this._log.error(e.message)}this._log("deleting %d / %d entries",r,t),n.size&&await i.commit();for(const[e,t]of n){const r=h(e),n=this.providers.get(r);if(n){for(const e of t)n.delete(e);0===n.size?this.providers.remove(r):this.providers.set(r,n)}}this._log("Cleanup successful (%dms)",Date.now()-e)})}async _getProvidersMap(e){const t=h(e);let r=this.providers.get(t);return r||(r=await async function(e,t){const r=new Map,n=e.query({prefix:h(t)});for await(const e of n){const{peerId:t}=l(e.key);r.set(t,f(e.value))}return r}(this.datastore,e),this.providers.set(t,r)),r}get cleanupInterval(){return this._cleanupInterval}set cleanupInterval(e){this._cleanupInterval=e,this._cleaner&&clearInterval(this._cleaner),this._cleaner=setInterval(()=>this._cleanup(),this.cleanupInterval)}async addProvider(e,r){return this.syncQueue.add(async()=>{this._log("addProvider %s",e.toBaseEncodedString());const n=await this._getProvidersMap(e);this._log("loaded %s provs",n.size);const s=Date.now();n.set(u.encodeBase32(r.id),s);const a=h(e);return this.providers.set(a,n),async function(e,r,n,s){const a=[h(r),"/",u.encodeBase32(n.id)].join(""),c=new o(a),l=t.from(i.encode(s));return e.put(c,l)}(this.datastore,e,r,s)})}async getProviders(e){return this.syncQueue.add(async()=>{return this._log("getProviders %s",e.toBaseEncodedString()),[...(await this._getProvidersMap(e)).keys()].map(e=>new s(u.decodeBase32(e)))})}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/random-walk.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9),i=r(/*! libp2p-crypto */36),s=n(r(/*! multihashing-async */441)),o=r(/*! peer-id */7),a=r(/*! assert */24),c=r(/*! abort-controller */1021),u=r(/*! err-code */8),h=r(/*! p-times */1022),l=r(/*! ./constants */91),{logger:f}=r(/*! ./utils */26);e.exports=class{constructor(e,t){a(e,"Random Walk needs an instance of the Kademlia DHT"),this._options={...l.defaultRandomWalk,...t},this._kadDHT=e,this.log=f(e.peerInfo.id,"random-walk"),this._timeoutId=void 0}start(){!this._timeoutId&&this._options.enabled&&(this._timeoutId=setTimeout(()=>{this._runPeriodically()},this._options.delay))}stop(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=void 0),this._controller&&this._controller.abort()}async _runPeriodically(){for(;this._timeoutId;){try{await this._walk(this._options.queriesPerPeriod,this._options.timeout)}catch(e){this._kadDHT._log.error("random-walk:error",e)}await new Promise(e=>{this._timeoutId=setTimeout(e,this._options.interval)})}}async _walk(e,t){this.log("start"),this._controller=new c;try{await h(e,async e=>{this.log("running query %d",e);try{const e=await this._randomPeerId();if(!this._controller)return;await this._query(e,{timeout:t,signal:this._controller.signal})}catch(t){if(t&&"ETIMEDOUT"!==t.code)throw this.log.error("query %d finished with error",e,t),t}this.log("finished query %d",e)})}finally{this._controller=null,this.log("finished queries")}}async _query(e,t){let r;this.log("query:%s",e.toB58String());try{r=await n(r=>this._kadDHT.findPeer(e,t,r))()}catch(e){if(e&&"ERR_NOT_FOUND"===e.code)return;throw e}throw this.log("query:found",r),u(`random-walk: ACTUALLY FOUND PEER: ${r}, ${e.toB58String()}`,"ERR_FOUND_RANDOM_PEER")}async _randomPeerId(){const e=await s(i.randomBytes(16),"sha2-256");return new o(e)}}},
/*!**************************************************!*\
  !*** ./node_modules/abort-controller/browser.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{AbortController:n,AbortSignal:i}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=n,e.exports.AbortSignal=i,e.exports.default=n},
/*!***************************************!*\
  !*** ./node_modules/p-times/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! p-map */1023),i=async(e,t,r)=>n(new Array(e).fill(),(e,r)=>t(r),r);e.exports=i,e.exports.default=i},
/*!*************************************!*\
  !*** ./node_modules/p-map/index.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=(e,t,r)=>new Promise((n,i)=>{if(r=Object.assign({concurrency:1/0},r),"function"!=typeof t)throw new TypeError("Mapper function is required");const{concurrency:s}=r;if(!("number"==typeof s&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);const o=[],a=e[Symbol.iterator]();let c=!1,u=!1,h=0,l=0;const f=()=>{if(c)return;const e=a.next(),r=l;if(l++,e.done)return u=!0,void(0===h&&n(o));h++,Promise.resolve(e.value).then(e=>t(e,r)).then(e=>{o[r]=e,h--,f()},e=>{c=!0,i(e)})};for(let e=0;e<s&&(f(),!u);e++);});e.exports=n,e.exports.default=n},
/*!**********************************************************!*\
  !*** ./node_modules/libp2p-kad-dht/src/query-manager.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=class{constructor(){this.queries=new Set,this.running=!1}queryStarted(e){this.queries.add(e)}queryCompleted(e){this.queries.delete(e)}start(){this.running=!0}stop(){this.running=!1;for(const e of this.queries)e.stop();this.queries.clear()}}},
/*!******************************************!*\
  !*** ./node_modules/libp2p/src/index.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! fsm-event */119),i=r(/*! events */5).EventEmitter,s=r(/*! debug */1),o=s("libp2p");o.error=s("libp2p:error");const a=r(/*! err-code */8),c=r(/*! promisify-es6 */9),u=r(/*! async/each */152),h=r(/*! async/series */89),l=r(/*! async/parallel */56),f=r(/*! async/nextTick */35),d=r(/*! peer-book */340),p=r(/*! peer-info */21),A=r(/*! ./switch */1027),g=r(/*! ./ping */1051),y=r(/*! libp2p-websockets */415),m=r(/*! ./connection-manager */1055),{emitFirst:_}=r(/*! ./util */1097),b=r(/*! ./peer-routing */1098),w=r(/*! ./content-routing */1099),v=r(/*! ./dht */1100),E=r(/*! ./pubsub */1101),{getPeerInfoRemote:S}=r(/*! ./get-peer-info */161),C=r(/*! ./config */1102).validate,{codes:k}=r(/*! ./errors */252),I=(e,t)=>a(new Error(`libp2p cannot ${e} when not started; state is ${t}`),k.ERR_NODE_NOT_STARTED);class T extends i{constructor(e){if(super(),this._options=C(e),this.datastore=this._options.datastore,this.peerInfo=this._options.peerInfo,this.peerBook=this._options.peerBook||new d,this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=[],this._switch=new A(this.peerInfo,this.peerBook,this._options.switch),this._switch.on("error",(...e)=>this.emit("error",...e)),this.stats=this._switch.stats,this.connectionManager=new m(this,this._options.connectionManager),this._modules.streamMuxer){this._modules.streamMuxer.forEach(e=>this._switch.connection.addStreamMuxer(e)),this._switch.connection.reuse(),this._switch.connection.enableCircuitRelay(this._config.relay),this._switch.on("peer-mux-established",e=>{this.emit("peer:connect",e)}),this._switch.on("peer-mux-closed",e=>{this.emit("peer:disconnect",e)})}if(this._switch.on("connection:start",e=>{this.emit("connection:start",e)}),this._switch.on("connection:end",e=>{this.emit("connection:end",e)}),this._modules.connEncryption){this._modules.connEncryption.forEach(e=>{this._switch.connection.crypto(e.tag,e.encrypt)})}if(this._modules.connProtector)this._switch.protector=this._modules.connProtector;else if(t.env.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._config.dht.enabled){const e=this._modules.dht;this._dht=new e(this._switch,{datastore:this.datastore,...this._config.dht})}this._modules.pubsub&&!1!==this._config.pubsub.enabled&&(this.pubsub=E(this,this._modules.pubsub,this._config.pubsub)),this.peerRouting=b(this),this.contentRouting=w(this),this.dht=v(this),g.mount(this._switch),this.state=new n("STOPPED",{STOPPED:{start:"STARTING",stop:"STOPPED"},STARTING:{done:"STARTED",abort:"STOPPED",stop:"STOPPING"},STARTED:{stop:"STOPPING",start:"STARTED"},STOPPING:{stop:"STOPPING",done:"STOPPED"}}),this.state.on("STARTING",()=>{o("libp2p is starting"),this._onStarting()}),this.state.on("STOPPING",()=>{o("libp2p is stopping"),this._onStopping()}),this.state.on("STARTED",()=>{o("libp2p has started"),this.emit("start")}),this.state.on("STOPPED",()=>{o("libp2p has stopped"),this.emit("stop")}),this.state.on("error",e=>{o.error(e),this.emit("error",e)}),this.state.on("STARTED",()=>{this.peerBook.getAllArray().forEach(e=>{this.emit("peer:discovery",e),this._maybeConnect(e)})}),this._peerDiscovered=this._peerDiscovered.bind(this),["start","stop","dial","dialProtocol","dialFSM","hangUp","ping"].forEach(e=>{this[e]=c(this[e],{context:this})})}emit(e,...t){"error"!==e||this._events.error?super.emit(e,...t):o.error(...t)}start(e=(()=>{})){_(this,["error","start"],e),this.state("start")}stop(e=(()=>{})){_(this,["error","stop"],e),this.state("stop")}isStarted(){return!!this.state&&"STARTED"===this.state._state}dial(e,t){this.dialProtocol(e,null,t)}dialProtocol(e,t,r){if(!this.isStarted())return r(I("dial",this.state._state));"function"==typeof t&&(r=t,t=void 0),S(e,this).then(e=>{this._switch.dial(e,t,r)},r)}dialFSM(e,t,r){if(!this.isStarted())return r(I("dial",this.state._state));"function"==typeof t&&(r=t,t=void 0),S(e,this).then(e=>{this._switch.dialFSM(e,t,r)},r)}hangUp(e,t){S(e,this).then(e=>{this._switch.hangUp(e,t)},t)}ping(e,t){if(!this.isStarted())return t(I("ping",this.state._state));S(e,this).then(e=>{t(null,new g(this._switch,e))},t)}handle(e,t,r){this._switch.handle(e,t,r)}unhandle(e){this._switch.unhandle(e)}_onStarting(){if(!this._modules.transport)return this.emit("error",new Error("no transports were present")),this.state("abort");let e;const t=[],r=[];this.peerInfo.multiaddrs.toArray().forEach(e=>{e.getPeerId()||(t.push(e),r.push(e.encapsulate("/p2p/"+this.peerInfo.id.toB58String())))}),this.peerInfo.multiaddrs.replace(t,r);const n=this.peerInfo.multiaddrs.toArray();this._modules.transport.forEach(t=>{let r;(r="function"==typeof t?new t({libp2p:this}):t).filter(n).length>0?this._switch.transport.add(r.tag||r[Symbol.toStringTag],r):y.isWebSockets(r)&&(e=r),this._transport.push(r)}),h([e=>{this.connectionManager.start(),this._switch.start(e)},t=>{e&&this._switch.transport.add(e.tag||e.constructor.name,e),this.peerInfo.multiaddrs.toArray().forEach(e=>{e.toString().match(/\/p2p-circuit($|\/)/)||this._transport.find(t=>t.filter(e).length>0)||this.peerInfo.multiaddrs.delete(e)}),t()},e=>{this._dht?this._dht.start(()=>{this._dht.on("peer",this._peerDiscovered),e()}):e()},e=>{if(this.pubsub)return this.pubsub.start(e);e()},e=>{this._modules.peerDiscovery?this._setupPeerDiscovery(e):e()}],e=>{if(e)return o.error(e),this.emit("error",e),this.state("stop");this.state("done")})}_onStopping(){h([e=>{l(this._discovery.map(e=>(e.removeListener("peer",this._peerDiscovered),t=>e.stop(e=>{o.error("an error occurred stopping the discovery service",e),t()}))),e)},e=>{if(this.pubsub)return this.pubsub.stop(e);e()},e=>{if(this._dht)return this._dht.removeListener("peer",this._peerDiscovered),this._dht.stop(e);e()},e=>{this.connectionManager.stop(),this._switch.stop(e)},e=>{this._switch.transport.removeAll(()=>e())}],e=>{e&&(o.error(e),this.emit("error",e)),this.state("done")})}_peerDiscovered(e){e.id.toB58String()!==this.peerInfo.id.toB58String()?(e=this.peerBook.put(e),this.isStarted()&&(this.emit("peer:discovery",e),this._maybeConnect(e))):o.error(new Error(k.ERR_DISCOVERED_SELF))}_maybeConnect(e){if(!0===this._config.peerDiscovery.autoDial&&!e.isConnected()){(this._options.connectionManager.minPeers||0)>Object.keys(this._switch.connection.connections).length&&(o("connecting to discovered peer"),this._switch.dialer.connect(e,e=>{e&&o.error("could not connect to discovered peer",e)}))}}_setupPeerDiscovery(e){for(const e of this._modules.peerDiscovery){let t={enabled:!0};if(e.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[e.tag]&&(t={...t,...this._config.peerDiscovery[e.tag]}),t.enabled){let r;(r="function"==typeof e?new e(Object.assign({},t,{peerInfo:this.peerInfo})):e).on("peer",this._peerDiscovered),this._discovery.push(r)}}u(this._discovery,(e,t)=>{e.start(t)},e)}}e.exports=T,e.exports.createLibp2p=c((e,t)=>{if(e.peerInfo)return f(t,null,new T(e));p.create((r,n)=>{if(r)return t(r);e.peerInfo=n,t(null,new T(e))})})}).call(this,r(/*! ./../../process/browser.js */2))},
/*!***********************************!*\
  !*** ./node_modules/fsm/index.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e,t){for(var r in e){t(e[r],r,e)}}function n(e){return Object.keys(e).sort()}function i(e,t){return~e.indexOf(t)}function s(e,t){return e.filter((function(e){return i(t,e)}))}t.validate=function(e){Object.keys(e);return r(e,(function(t,n){r(t,(function(t,r){if(!e[t])throw new Error("invalid transition from state:"+n+" to state:"+t+" on event:"+r)}))})),!0};var o=t.reachable=function(e){var t={},n=!1;do{n=!1,r(e,(function(e,i){var s=t[i]=t[i]||{};r(e,(function(e,t){s[e]||(s[e]=[t],n=!0)})),r(e,(function(e,i){r(t[e],(function(e,t){s[t]||(s[t]=[i].concat(e),n=!0)}))}))}))}while(n);return t};t.terminal=t.deadlock=function(e){var t=[];return r(e,(function(e,r){(function(e){for(var t in e)return!1;return!0})(e)&&t.push(r)})),t};t.livelock=function(e,t){var n=o(e),s=[];return r(n,(function(e,n){i(t,n)||r(t,(function(t){e[t]||i(s,n)||s.push(n)}))})),s.sort()};function a(e){var t=[];return r(e,(function(e,n){r(e,(function(e,r){i(t,r)||t.push(r)}))})),t.sort()}t.combine=function(e,t,r,o){var c,u,h={},l=a(e),f=a(t),d=(u=f,(c=l).filter((function(e){return!i(u,e)})).concat(u.filter((function(e){return!i(c,e)}))).sort());return function r(i,o){var a,c=i+"-"+o;h[c]||(h[c]={}),a=h[c];var u=n(e[i]),l=n(t[o]);return s(u,l).forEach((function(n){a[n]=e[i][n]+"-"+t[o][n],h[a[n]]||r(e[i][n],t[o][n])})),s(d,u).forEach((function(t){a[t]=e[i][t]+"-"+o,h[a[t]]||r(e[i][t],o)})),s(d,l).forEach((function(e){a[e]=i+"-"+t[o][e],h[a[e]]||r(i,t[o][e])})),h[c]}(r,o),h}},
/*!*************************************************!*\
  !*** ./node_modules/libp2p/src/switch/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! fsm-event */119),i=r(/*! events */5).EventEmitter,s=r(/*! async/each */152),o=r(/*! async/eachSeries */445),a=r(/*! async/series */89),c=r(/*! ../circuit */241),u=r(/*! ./transport */1034),h=r(/*! ./connection/manager */1039),{getPeerInfo:l}=r(/*! ../get-peer-info */161),f=r(/*! ./dialer */1040),d=r(/*! ./connection/handler */1044),p=r(/*! ./protocol-muxer */1046),A=r(/*! ./plaintext */448),g=r(/*! ./observer */1047),y=r(/*! ./stats */1048),m=r(/*! assert */24),_=r(/*! ./errors */162),b=r(/*! debug */1),w=b("libp2p:switch");w.error=b("libp2p:switch:error");e.exports=class extends i{constructor(e,t,r){super(),m(e,"You must provide a `peerInfo`"),m(t,"You must provide a `peerBook`"),this._peerInfo=e,this._peerBook=t,this._options=r||{},this.setMaxListeners(1/0),this.transports={},this.conns={},this.protocols={},this.muxers={},this.identify=!1,this.crypto=A,this.protector=this._options.protector||null,this.transport=new u(this),this.connection=new h(this),this.observer=g(this),this.stats=y(this.observer,this._options.stats),this.protocolMuxer=p(this.protocols,this.observer),this._connectionHandler=d(this),this.state=new n("STOPPED",{STOPPED:{start:"STARTING",stop:"STOPPING"},STARTING:{done:"STARTED",stop:"STOPPING"},STARTED:{stop:"STOPPING",start:"STARTED"},STOPPING:{stop:"STOPPING",done:"STOPPED"}}),this.state.on("STARTING",()=>{w("The switch is starting"),this._onStarting()}),this.state.on("STOPPING",()=>{w("The switch is stopping"),this._onStopping()}),this.state.on("STARTED",()=>{w("The switch has started"),this.emit("start")}),this.state.on("STOPPED",()=>{w("The switch has stopped"),this.emit("stop")}),this.state.on("error",e=>{w.error(e),this.emit("error",e)}),this.dialer=f(this),this.dial=this.dialer.dial,this.dialFSM=this.dialer.dialFSM}availableTransports(e){const t=e.multiaddrs.toArray();return Object.keys(this.transports).filter(e=>this.transports[e].filter(t).length>0).sort((e,t)=>e===c.tag?1:t===c.tag?-1:e<t?-1:1)}handle(e,t,r){this.protocols[e]={handlerFunc:t,matchFunc:r},this._peerInfo.protocols.add(e)}unhandle(e){this.protocols[e]&&delete this.protocols[e],this._peerInfo.protocols.delete(e)}hangUp(e,t){const r=l(e,this._peerBook).id.toB58String(),n=[...this.connection.getAllById(r)];s(n,(e,t)=>{e.once("close",t),e.close()},t)}hasTransports(){const e=Object.keys(this.transports).filter(e=>e!==c.tag);return e&&e.length>0}start(e=(()=>{})){this.once("start",e),this.state("start")}stop(e=(()=>{})){this.once("stop",e),this.state("stop")}_onStarting(){this.stats.start(),o(this.availableTransports(this._peerInfo),(e,t)=>{this.transport.listen(e,{},null,t)},e=>{if(e)return w.error(e),this.emit("error",e),this.state("stop");this.state("done")})}_onStopping(){this.stats.stop(),a([e=>{s(this.transports,(e,t)=>{s(e.listeners,(e,t)=>{e.close(e=>{e&&w.error(e),t()})},t)},e)},e=>s(this.connection.getAll(),(e,t)=>{e.once("close",t),e.close()},e)],e=>{this.state("done")})}},e.exports.errors=_},
/*!*****************************************!*\
  !*** ./node_modules/async/eachLimit.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o){(0,n.default)(t)(e,(0,i.default)((0,s.default)(r)),o)};var n=o(r(/*! ./internal/eachOfLimit */408)),i=o(r(/*! ./internal/withoutIndex */409)),s=o(r(/*! ./internal/wrapAsync */33));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!****************************************************!*\
  !*** ./node_modules/libp2p/src/circuit/circuit.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! mafmt */43),i=r(/*! multiaddr */15),s=r(/*! ./circuit/dialer */1030),o=r(/*! ./circuit/utils */120),a=r(/*! debug */1);a("libp2p:circuit:transportdialer").err=a("libp2p:circuit:error:transportdialer");const c=r(/*! ./listener */1031);e.exports=class{static get tag(){return"Circuit"}constructor(e,t){this.options=t||{},this.swarm=e,this.dialer=null,this.utils=o(e),this.peerInfo=this.swarm._peerInfo,this.relays=this.filter(this.peerInfo.multiaddrs.toArray()),0===this.relays.length&&this.peerInfo.multiaddrs.add(`/p2p-circuit/ipfs/${this.peerInfo.id.toB58String()}`),this.dialer=new s(e,t),this.swarm.on("peer-mux-established",e=>{this.dialer.canHop(e)}),this.swarm.on("peer-mux-closed",e=>{this.dialer.relayPeers.delete(e.id.toB58String())})}_dialSwarmRelays(){this.relays.forEach(e=>{e.toString().split("/p2p-circuit").filter(e=>e.length).forEach(e=>{const t=this.utils.peerInfoFromMa(i(e));this.dialer._dialRelay(t)})})}dial(e,t,r){return this.dialer.dial(e,t,r)}createListener(e,t){"function"==typeof e&&(t=e,e=this.options||{});const r=c(this.swarm,e,t);return r.on("listen",this._dialSwarmRelays.bind(this)),r}filter(e){return Array.isArray(e)||(e=[e]),e.filter(e=>n.Circuit.matches(e))}}},
/*!***********************************************************!*\
  !*** ./node_modules/libp2p/src/circuit/circuit/dialer.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! once */31),i=r(/*! peer-id */7),s=r(/*! async/waterfall */54),o=r(/*! async/setImmediate */32),a=r(/*! multiaddr */15),c=r(/*! interface-connection */38).Connection,u=r(/*! ./utils */120),h=r(/*! ./stream-handler */242),l=r(/*! debug */1),f=l("libp2p:circuit:dialer");f.err=l("libp2p:circuit:error:dialer");const d=r(/*! ../multicodec */243),p=r(/*! ../protocol */121);e.exports=class{constructor(e,t){this.swarm=e,this.relayPeers=new Map,this.relayConns=new Map,this.options=t,this.utils=u(e)}_dialRelayHelper(e,t){return this.relayConns.has(e.id.toB58String())?t(null,this.relayConns.get(e.id.toB58String())):this._dialRelay(e,t)}dial(e,t){t=t||(()=>{});const r=e.toString();if(!r.includes("/p2p-circuit"))return f.err("invalid circuit address"),t(new Error("invalid circuit address"));const n=r.split("p2p-circuit"),i="/"===n[0]?null:a(n[0]),s=a(n[1]||n[0]),u=new c;return o(this._dialPeer.bind(this),s,i,(e,r)=>{if(e)return f.err(e),t(e);u.setInnerConn(r),t(null,u)}),u}canHop(e,t){t=n(t||(()=>{})),this._dialRelayHelper(e,(r,n)=>{if(r)return t(r);const i=new h(n);s([e=>i.write(p.CircuitRelay.encode({type:p.CircuitRelay.Type.CAN_HOP}),e),e=>i.read(e)],(r,n)=>{if(r)return t(r);if(p.CircuitRelay.decode(n).code!==p.CircuitRelay.Status.SUCCESS){const r=new Error(`HOP not supported, skipping - ${this.utils.getB58String(e)}`);return f(r),t(r)}f("HOP supported adding as relay - %s",this.utils.getB58String(e)),this.relayPeers.set(this.utils.getB58String(e),e),i.close(),t()})})}_dialPeer(e,t,r){if("function"==typeof t&&(r=t,t=null),r||(r=()=>{}),e=a(e),t)return this._negotiateRelay(t,e,(e,t)=>e?(f.err("An error has occurred negotiating the relay connection",e),r(e)):r(null,t));{const t=Array.from(this.relayPeers.values()),n=i=>{if(!i){const e="no relay peers were found or all relays failed to dial";return f.err(e),r(e)}return this._negotiateRelay(i,e,(e,i)=>{if(e)return f.err(e),n(t.shift());r(null,i)})};n(t.shift())}}_negotiateRelay(e,t,r){t=a(t),e=this.utils.peerInfoFromMa(e);const n=this.swarm._peerInfo.multiaddrs.toArray();this._dialRelayHelper(e,(e,o)=>{if(e)return f.err(e),r(e);const a=new h(o);s([e=>{let r;f("negotiating relay for peer %s",t.getPeerId());try{r=i.createFromB58String(t.getPeerId()).id}catch(t){return e(t)}a.write(p.CircuitRelay.encode({type:p.CircuitRelay.Type.HOP,srcPeer:{id:this.swarm._peerInfo.id.id,addrs:n.map(e=>e.buffer)},dstPeer:{id:r,addrs:[t.buffer]}}),e)},e=>a.read(e)],(e,t)=>{if(e)return r(e);const n=p.CircuitRelay.decode(t);return n.type!==p.CircuitRelay.Type.STATUS?r(new Error("Got invalid message type - "+`expected ${p.CircuitRelay.Type.STATUS} got ${n.type}`)):n.code!==p.CircuitRelay.Status.SUCCESS?r(new Error(`Got ${n.code} error code trying to dial over relay`)):void r(null,new c(a.rest()))})})}_dialRelay(e,t){t=n(t||(()=>{})),this.swarm.dial(e,d.relay,n((e,r)=>{if(e)return f.err(e),t(e);t(null,r)}))}}},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p/src/circuit/listener.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/setImmediate */32),i=r(/*! ./multicodec */243),s=r(/*! events */5).EventEmitter,o=r(/*! multiaddr */15),a=r(/*! mafmt */43),c=r(/*! ./circuit/stop */1032),u=r(/*! ./circuit/hop */1033),h=r(/*! ./protocol */121),l=r(/*! ./circuit/utils */120),f=r(/*! ./circuit/stream-handler */242),d=r(/*! debug */1),p=d("libp2p:circuit:listener");p.err=d("libp2p:circuit:error:listener"),e.exports=(e,t,r)=>{const d=new s,A=l(e);return d.stopHandler=new c(e),d.stopHandler.on("connection",e=>d.emit("connection",e)),d.hopHandler=new u(e,t.hop),d.listen=(t,s)=>{s=s||(()=>{}),e.handle(i.relay,(e,t)=>{const n=new f(t);n.read((e,t)=>{if(e)return void p.err(e);let i=null;try{i=h.CircuitRelay.decode(t)}catch(e){return A.writeResponse(n,h.CircuitRelay.Status.MALFORMED_MESSAGE)}switch(i.type){case h.CircuitRelay.Type.CAN_HOP:case h.CircuitRelay.Type.HOP:return d.hopHandler.handle(i,n);case h.CircuitRelay.Type.STOP:return d.stopHandler.handle(i,n,r);default:return A.writeResponse(n,h.CircuitRelay.Status.INVALID_MSG_TYPE),n.close()}})}),n(()=>d.emit("listen")),s()},d.close=t=>{e.unhandle(i.relay),n(()=>d.emit("close")),t()},d.getAddrs=t=>{let r=e._peerInfo.multiaddrs.toArray();const n=r.filter(t=>a.Circuit.matches(t)&&!t.toString().includes(e._peerInfo.id.toB58String()));n.length&&(r=n);const i=[];r.forEach(t=>{const r=`/p2p-circuit/ipfs/${e._peerInfo.id.toB58String()}`;if(t.toString()!==r)if(a.Circuit.matches(t))i.push(t.encapsulate(`/ipfs/${e._peerInfo.id.toB58String()}`));else if(t.getPeerId())i.push(o("/p2p-circuit").encapsulate(t));else{const r=`${t}/ipfs/${e._peerInfo.id.toB58String()}`;i.push(o("/p2p-circuit").encapsulate(r))}else i.push(o(r))}),t(null,i)},d}},
/*!*********************************************************!*\
  !*** ./node_modules/libp2p/src/circuit/circuit/stop.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/setImmediate */32),i=r(/*! events */5).EventEmitter,s=r(/*! interface-connection */38).Connection,o=r(/*! ./utils */120),a=r(/*! peer-info */21),c=r(/*! ../protocol */121).CircuitRelay,u=r(/*! async/series */89),h=r(/*! debug */1),l=h("libp2p:circuit:stop");l.err=h("libp2p:circuit:error:stop");e.exports=class extends i{constructor(e){super(),this.swarm=e,this.utils=o(e)}handle(e,t,r){r=r||(()=>{}),u([r=>this.utils.validateAddrs(e,t,c.Type.STOP,r),e=>this.utils.writeResponse(t,c.Status.Success,e)],i=>{if(i)return r(),l(i);const o=new a(this.utils.peerIdFromId(e.srcPeer.id));e.srcPeer.addrs.forEach(e=>o.multiaddrs.add(e));const c=new s(t.rest());c.setPeerInfo(o),n(()=>this.emit("connection",c)),r(c)})}}},
/*!********************************************************!*\
  !*** ./node_modules/libp2p/src/circuit/circuit/hop.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream/pull */17),i=r(/*! debug */1),s=r(/*! peer-info */21),o=r(/*! peer-id */7),a=r(/*! events */5).EventEmitter,c=r(/*! once */31),u=r(/*! ./utils */120),h=r(/*! ./stream-handler */242),l=r(/*! ../protocol */121).CircuitRelay,f=r(/*! multiaddr */15),d=r(/*! async/series */89),p=r(/*! async/waterfall */54),A=r(/*! async/setImmediate */32),g=r(/*! ./../multicodec */243),y=i("libp2p:circuit:relay");y.err=i("libp2p:circuit:error:relay");e.exports=class extends a{constructor(e,t){super(),this.swarm=e,this.peerInfo=this.swarm._peerInfo,this.utils=u(e),this.config=t||{active:!1,enabled:!1},this.active=this.config.active}handle(e,t){if(!this.config.enabled)return this.utils.writeResponse(t,l.Status.HOP_CANT_SPEAK_RELAY),t.close();if(e.type===l.Type.CAN_HOP)return this.utils.writeResponse(t,l.Status.SUCCESS),t.close();let r=null,n=null;try{r=o.createFromBytes(e.srcPeer.id).toB58String(),n=o.createFromBytes(e.dstPeer.id).toB58String()}catch(e){if(y.err(e),!r)return this.utils.writeResponse(t,l.Status.HOP_SRC_MULTIADDR_INVALID),t.close();if(!n)return this.utils.writeResponse(t,l.Status.HOP_DST_MULTIADDR_INVALID),t.close()}if(r===n)return this.utils.writeResponse(t,l.Status.HOP_CANT_RELAY_TO_SELF),t.close();if(!e.dstPeer.addrs.length){const t=f(`/p2p-circuit/ipfs/${n}`).buffer;e.dstPeer.addrs.push(t)}y("trying to establish a circuit: %s <-> %s",r,n);const i=()=>(this.utils.writeResponse(t,l.Status.HOP_NO_CONN_TO_DST),t.close()),s=e=>{let t;try{if(!(t=this.swarm._peerBook.get(n)).isConnected()&&!this.active){const t=new Error(`No Connection to peer ${n}`);return i(),e(t)}}catch(t){if(!this.active)return i(),e(t)}e()};d([r=>this.utils.validateAddrs(e,t,l.Type.HOP,r),e=>s(e),r=>this._circuit(t,e,r)],e=>{if(e)return y.err(e),t.close(),A(()=>this.emit("circuit:error",e));A(()=>this.emit("circuit:success"))})}_connectToStop(e,t,r){this._dialPeer(e,(e,n)=>e?(this.utils.writeResponse(t,l.Status.HOP_CANT_DIAL_DST),y.err(e),r(e)):this.utils.writeResponse(t,l.Status.SUCCESS,e=>e?(y.err(e),r(e)):r(null,n)))}_negotiateStop(e,t,r,n){const i=Object.assign({},r,{type:l.Type.STOP});e.write(l.encode(i),r=>{if(r)return this.utils.writeResponse(t,l.Status.HOP_CANT_OPEN_DST_STREAM),y.err(r),n(r);e.read((e,t)=>{if(e)return y.err(e),n(e);return l.decode(t).code!==l.Status.SUCCESS?n(new Error("Unable to create circuit!")):n(null,t)})})}_circuit(e,t,r){let i=null;p([r=>this._connectToStop(t.dstPeer,e,r),(r,n)=>{i=new h(r),this._negotiateStop(i,e,t,n)}],s=>{if(s)return e&&e.close(),i&&i.close(),r(s);const a=e.rest(),c=i.rest(),u=o.createFromBytes(t.srcPeer.id).toB58String(),h=o.createFromBytes(t.dstPeer.id).toB58String();n(a,c,a),y("circuit %s <-> %s established",u,h),r()})}_dialPeer(e,t){const r=new s(o.createFromBytes(e.id));e.addrs.forEach(e=>r.multiaddrs.add(e)),this.swarm.dial(r,g.relay,c((e,r)=>{if(e)return y.err(e),t(e);t(null,r)}))}}},
/*!*****************************************************!*\
  !*** ./node_modules/libp2p/src/switch/transport.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/parallel */56),i=r(/*! once */31),s=r(/*! debug */1)("libp2p:switch:transport"),o=r(/*! ./limit-dialer */1035),{DIAL_TIMEOUT:a}=r(/*! ./constants */245),{uniqueBy:c}=r(/*! ./utils */246),u=8;class h{constructor(e){this.switch=e,this.dialer=new o(u,this.switch._options.dialTimeout||a)}add(e,t){if(s("adding %s",e),this.switch.transports[e])throw new Error("There is already a transport with this key");this.switch.transports[e]=t,this.switch.transports[e].listeners||(this.switch.transports[e].listeners=[])}remove(e,t){if(t=t||function(){},!this.switch.transports[e])return t();this.close(e,r=>{delete this.switch.transports[e],t(r)})}removeAll(e){const t=Object.keys(this.switch.transports).map(e=>t=>{this.remove(e,t)});n(t,e)}dial(e,t,r){const n=this.switch.transports[e];let i=t.multiaddrs.toArray();Array.isArray(i)||(i=[i]),i=h.dialables(n,i,this.switch._peerInfo),s("dialing %s",e,i.map(e=>e.toString())),this.dialer.dialMany(t.id,n,i,(e,n)=>{if(e)return r(e);t.connect(n.multiaddr),r(null,n.conn)})}listen(e,t,r,s){r=this.switch._connectionHandler(e,r);const o=this.switch.transports[e];let a=this.switch._peerInfo.multiaddrs.toArray();a=c(a,e=>{const t=Number(e.toOptions().port);return isNaN(t)||0===t?e.toString():t});const u=h.dialables(o,a);o.listeners||(o.listeners=[]);let l=[];const f=u.map(e=>t=>{const n=i(t),s=o.createListener(r);s.once("error",n),s.listen(e,e=>{if(e)return n(e);s.removeListener("error",n),s.getAddrs((e,t)=>{if(e)return n(e);l=l.concat(t),o.listeners.push(s),n()})})});n(f,e=>{if(e)return s(e);this.switch._peerInfo.multiaddrs.replace(u,l),s()})}close(e,t){const r=this.switch.transports[e];if(!r)return t(new Error(`Trying to close non existing transport: ${e}`));n(r.listeners.map(e=>t=>{e.close(t)}),t)}static dialables(e,t,r){if(!e||!e.filter)return[];const n=e.filter(t);if(!r||!n.length)return n;const i=function(e){const t=e.id.toB58String();return e.multiaddrs.toArray().reduce((e,r)=>{const n=r.getPeerId();r=r.toString();const i=n?r.slice(0,r.lastIndexOf(`/ipfs/${n}`)):`${r}/ipfs/${t}`;return e.concat([r,i])},[]).filter(e=>Boolean(e)).concat(`/ipfs/${t}`)}(r);return n.filter(e=>!i.some(t=>(function(e){const t=e.protoNames().reverse().find(e=>l.includes(e));return e=e.toString(),t?e.slice(e.lastIndexOf(t)+t.length):e})(e).startsWith(t)))}}const l=["p2p-circuit","p2p-websocket-star","p2p-webrtc-star","p2p-stardust"];e.exports=h},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p/src/switch/limit-dialer/index.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/tryEach */244),i=r(/*! debug */1)("libp2p:switch:dialer"),s=r(/*! ./queue */1036);e.exports=class{constructor(e,t){i("create: %s peer limit, %s dial timeout",e,t),this.perPeerLimit=e,this.dialTimeout=t,this.queues=new Map}dialMany(e,t,r,s){i("dialMany:start");const o={cancel:!1},a=[],c=r.map(r=>n=>this.dialSingle(e,t,r,o,(e,t)=>e?(a.push(e),n(e)):n(null,t)));n(c,(e,t)=>{if(t&&t.conn)return i("dialMany:success"),s(null,t);i("dialMany:error"),s(a)})}dialSingle(e,t,r,n,o){const a=e.toB58String();let c;i("dialSingle: %s:%s",a,r.toString()),this.queues.has(a)?c=this.queues.get(a):(c=new s(this.perPeerLimit,this.dialTimeout),this.queues.set(a,c)),c.push(t,r,n,o)}}},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p/src/switch/limit-dialer/queue.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! interface-connection */38).Connection,i=r(/*! pull-stream/pull */17),s=r(/*! pull-stream/sources/empty */109),o=r(/*! async/timeout */160),a=r(/*! async/queue */444),c=r(/*! debug */1),u=r(/*! once */31),h=c("libp2p:switch:dialer:queue");h.error=c("libp2p:switch:dialer:queue:error");e.exports=class{constructor(e,t){this.dialTimeout=t,this.queue=a((e,t)=>{this._doWork(e.transport,e.addr,e.token,t)},e)}_doWork(e,t,r,o){o=u(o),h("work:start"),this._dialWithTimeout(e,t,(a,c)=>{if(a)return h.error(`${e.constructor.name}:work`,a),o(a);if(r.cancel)return h("work:cancel"),i(s(),c),"function"==typeof c.close?c.close(e=>o(null)):o(null);r.cancel=!0,h("work:success"),(new n).setInnerConn(c),o(null,{multiaddr:t,conn:c})})}_dialWithTimeout(e,t,r){o(r=>{const n=e.dial(t,e=>{if(e)return r(e);r(null,n)})},this.dialTimeout)(r)}push(e,t,r,n){this.queue.push({transport:e,addr:t,token:r},n)}}},
/*!******************************************************!*\
  !*** ./node_modules/libp2p/src/identify/listener.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! pull-stream/pull */17),i=r(/*! pull-stream/sources/values */55),s=r(/*! pull-length-prefixed */30),o=r(/*! ./message */248);e.exports=(e,r)=>{e.getObservedAddrs((a,c)=>{if(a)return;c=c[0];let u=t.alloc(0);r.id.pubKey&&(u=r.id.pubKey.bytes);const h=o.encode({protocolVersion:"ipfs/0.1.0",agentVersion:"na",publicKey:u,listenAddrs:r.multiaddrs.toArray().map(e=>e.buffer),observedAddr:c?c.buffer:t.from(""),protocols:Array.from(r.protocols)});n(i([h]),s.encode(),e)})}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!****************************************************!*\
  !*** ./node_modules/libp2p/src/identify/dialer.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! peer-info */21),i=r(/*! peer-id */7),s=r(/*! multiaddr */15),o=r(/*! pull-stream/pull */17),a=r(/*! pull-stream/throughs/take */222),c=r(/*! pull-stream/sinks/collect */85),u=r(/*! pull-length-prefixed */30),h=r(/*! ./message */248);e.exports=(e,t,r)=>{"function"==typeof t&&(r=t,t=null,console.warn("WARNING: no expected peer info was given, identify will not be able to verify peer integrity")),o(e,u.decode(),a(1),c((e,o)=>{if(e)return r(e);if(0===o.length)return r(new Error("conn was closed, did not receive data"));const a=h.decode(o[0]);i.createFromPubKey(a.publicKey,(e,i)=>{if(e)return r(e);const o=new n(i);if(t&&t.id.toB58String()!==i.toB58String())return r(new Error("invalid peer"));try{a.listenAddrs.map(s).forEach(e=>o.multiaddrs.add(e))}catch(e){return r(e)}let c;try{c=function(e){if(!function(e){return e.observedAddr&&e.observedAddr.length>0}(e))return[];let t=e.observedAddr;Array.isArray(t)||(t=[t]);return t.map(e=>s(e))}(a)}catch(e){return r(e)}o.protocols=new Set(a.protocols),r(null,o,c)})}))}},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p/src/switch/connection/manager.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../../identify */247),i=r(/*! multistream-select */117),s=r(/*! debug */1)("libp2p:switch:conn-manager"),o=r(/*! once */31),a=r(/*! ../connection */446),{msHandle:c,msSelect:u,identifyDialer:h}=r(/*! ../utils */246),l=r(/*! ../../circuit */241),f=r(/*! ../plaintext */448);e.exports=class{constructor(e){this.switch=e,this.connections={}}add(e){this.connections[e.theirB58Id]=this.connections[e.theirB58Id]||[],this.get(e)||(this.connections[e.theirB58Id].push(e),this.switch.emit("connection:start",e.theirPeerInfo),"MUXED"===e.getState()?(this.switch.emit("peer-mux-established",e.theirPeerInfo),this.switch.dialer.clearDenylist(e.theirPeerInfo)):e.once("muxed",()=>{this.switch.emit("peer-mux-established",e.theirPeerInfo),this.switch.dialer.clearDenylist(e.theirPeerInfo)}))}get(e){if(!this.connections[e.theirB58Id])return null;for(let t=0;t<this.connections[e.theirB58Id].length;t++)if(this.connections[e.theirB58Id][t]===e)return this.connections[e.theirB58Id][t];return null}getOne(e){if(this.connections[e])for(var t=0;t<this.connections[e].length;t++)if("MUXED"===this.connections[e][t].getState())return this.connections[e][t];return null}remove(e){if(this.connections[e.theirB58Id]){for(let t=0;t<this.connections[e.theirB58Id].length;t++)if(this.connections[e.theirB58Id][t]===e){this.connections[e.theirB58Id].splice(t,1);break}0===this.connections[e.theirB58Id].length&&(delete this.connections[e.theirB58Id],e.theirPeerInfo.disconnect(),this.switch.emit("peer-mux-closed",e.theirPeerInfo)),this.switch.emit("connection:end",e.theirPeerInfo)}else e.theirPeerInfo&&(e.theirPeerInfo.disconnect(),this.switch.emit("peer-mux-closed",e.theirPeerInfo))}getAll(){let e=[];for(const t of Object.values(this.connections))e=[...e,...t];return e}getAllById(e){return this.connections[e]||[]}addStreamMuxer(e){this.switch.muxers[e.multicodec]=e,this.switch.handle(e.multicodec,(t,r)=>{const l=e.listener(r);return l.on("stream",this.switch.protocolMuxer(null)),this.switch.identify&&r.getPeerInfo((e,t)=>{!e&&t||s("crypto peerInfo wasnt found"),r.getPeerInfo=async e=>{const r=l.newStream(),s=new i.Dialer;let a;e=o(e);try{await c(s,r);const e=await u(s,n.multicodec);a=await h(e,t)}catch(t){return l.end(()=>{e(t,null)})}const{peerInfo:f}=a;f&&r.setPeerInfo(f),e(null,f)},r.getPeerInfo((e,t)=>{if(e)return s("identify not successful");const n=t.id.toB58String();t=this.switch._peerBook.put(t);const i=new a({_switch:this.switch,peerInfo:t,muxer:l,conn:r,type:"inc"});this.switch.connection.add(i),t.isConnected()||(t.multiaddrs.size>0?t.connect(t.multiaddrs.toArray()[0]):t.connect(`/ipfs/${n}`)),l.once("close",()=>{i.close()})})}),r})}crypto(e,t){e||t||(e=f.tag,t=f.encrypt),this.switch.crypto={tag:e,encrypt:t}}enableCircuitRelay(e){(e=e||{}).enabled&&(e.hop||Object.assign(e,{hop:{enabled:!1,active:!1}}),this.switch.transport.add(l.tag,new l(this.switch,e)))}reuse(){this.switch.identify=!0,this.switch.handle(n.multicodec,(e,t)=>{n.listener(t,this.switch._peerInfo)})}}},
/*!********************************************************!*\
  !*** ./node_modules/libp2p/src/switch/dialer/index.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./queueManager */1041),{getPeerInfo:i}=r(/*! ../../get-peer-info */161),{DENY_ATTEMPTS:s,DENY_TTL:o,MAX_COLD_CALLS:a,MAX_PARALLEL_DIALS:c,PRIORITY_HIGH:u,PRIORITY_LOW:h}=r(/*! ../constants */245);e.exports=function(e){const t=new n(e);function r({peerInfo:r,protocol:n,options:s,callback:o}){"function"==typeof n&&(o=n,n=null);try{r=i(r,e._peerBook)}catch(e){return o(e)}t.add({peerInfo:r,protocol:n,options:s,callback:o})}return e.state.on("STARTED:enter",(function(e){t.start(),e()})),e.state.on("STOPPING:enter",(function(e){t.stop(),e()})),{connect:function(e,t,n){"function"==typeof t&&(n=t,t=null),r({peerInfo:e,protocol:null,options:t={useFSM:!1,priority:h,...t},callback:n})},dial:function(e,t,n){r({peerInfo:e,protocol:t,options:{useFSM:!1,priority:u},callback:n})},dialFSM:function(e,t,n){r({peerInfo:e,protocol:t,options:{useFSM:!0,priority:u},callback:n})},clearDenylist:function(e){t.clearDenylist(e)},DENY_ATTEMPTS:isNaN(e._options.denyAttempts)?s:e._options.denyAttempts,DENY_TTL:isNaN(e._options.denyTTL)?o:e._options.denyTTL,MAX_COLD_CALLS:isNaN(e._options.maxColdCalls)?a:e._options.maxColdCalls,MAX_PARALLEL_DIALS:isNaN(e._options.maxParallelDials)?c:e._options.maxParallelDials}}},
/*!***************************************************************!*\
  !*** ./node_modules/libp2p/src/switch/dialer/queueManager.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! once */31),i=r(/*! ./queue */1042),{DIAL_ABORTED:s}=r(/*! ../errors */162),o=r(/*! async/nextTick */35),a=r(/*! retimer */449),{QUARTER_HOUR:c,PRIORITY_HIGH:u}=r(/*! ../constants */245),h=r(/*! debug */1)("libp2p:switch:dial:manager"),l=()=>{};e.exports=class{constructor(e){this._queue=new Set,this._coldCallQueue=new Set,this._dialingQueues=new Set,this._queues={},this.switch=e,this._cleanInterval=a(this._clean.bind(this),c),this.start()}_clean(){Object.values(this._queues).forEach(e=>{if(e.denylisted===1/0)return e.abort(),void delete this._queues[e.id];if(!e.denylisted&&!e.isRunning&&e.length<1){let t=!1;try{const r=this.switch._peerBook.get(e.id);t=Boolean(r.isConnected())}catch(e){}t||(e.abort(),delete this._queues[e.id])}}),this._cleanInterval.reschedule(c)}start(){this.isRunning=!0}stop(){this.isRunning=!1,this._queue.clear(),this._coldCallQueue.clear(),this._cleanInterval.clear(),Object.values(this._queues).forEach(e=>{e.abort(),delete this._queues[e.id]})}add({peerInfo:e,protocol:t,options:r,callback:i}){i=i?n(i):l;const a=this.getQueue(e);if(r.priority>u){if(this._coldCallQueue.size>=this.switch.dialer.MAX_COLD_CALLS)return o(i,s());if(this._queue.has(a.id))return o(i,s())}a.add(t,r.useFSM,i),e.isConnected()?a.start():a.isDialAllowed()&&(a.isRunning||(r.priority<=u?(this._queue.add(a.id),this._coldCallQueue.delete(a.id)):this._coldCallQueue.add(a.id)),this.run())}run(){if(this.isRunning&&this._dialingQueues.size<this.switch.dialer.MAX_PARALLEL_DIALS){let e={done:!0};if(this._queue.size>0?(e=this._queue.values().next(),this._queue.delete(e.value)):this._coldCallQueue.size>0&&(e=this._coldCallQueue.values().next(),this._coldCallQueue.delete(e.value)),e.done)return;const t=this._queues[e.value];if(!t)return void h("missing queue %s, maybe it was aborted?",e.value);this._dialingQueues.add(t.id),t.start()}}clearDenylist(e){const t=this.getQueue(e);t.denylisted=null,t.denylistCount=0}_onQueueStopped(e){this._dialingQueues.delete(e),this.run()}getQueue(e){const t=e.id.toB58String();return this._queues[t]=this._queues[t]||new i(t,this.switch,this._onQueueStopped.bind(this)),this._queues[t]}}},
/*!********************************************************!*\
  !*** ./node_modules/libp2p/src/switch/dialer/queue.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../connection */446),{DIAL_ABORTED:i,ERR_DENIED:s}=r(/*! ../errors */162),o=r(/*! async/nextTick */35),a=r(/*! once */31),c=r(/*! debug */1),u=c("libp2p:switch:dial");function h({protocol:e,connection:t,callback:r}){if(!e)return r();t.shake(e,(e,n)=>{if(!n)return r(e);n.setPeerInfo(t.theirPeerInfo),r(null,n)})}u.error=c("libp2p:switch:dial:error");e.exports=class{constructor(e,t,r){this.id=e,this.switch=t,this._queue=[],this.denylisted=null,this.denylistCount=0,this.isRunning=!1,this.onStopped=r}get length(){return this._queue.length}add(e,t,r){if(!this.isDialAllowed())return o(r,s());this._queue.push({protocol:e,useFSM:t,callback:r})}isDialAllowed(){return!this.denylisted||Date.now()>this.denylisted&&(this.denylisted=null,!0)}start(){return!this.isRunning&&(u("starting dial queue to %s",this.id),this.isRunning=!0,this._run(),!0)}stop(){this.isRunning&&(u("stopping dial queue to %s",this.id),this.isRunning=!1,this.onStopped(this.id))}abort(){for(;this.length>0;){this._queue.shift().callback(i())}this.stop()}denylist(){if(this.denylistCount++,this.denylistCount>=this.switch.dialer.DENY_ATTEMPTS)return void(this.denylisted=1/0);let e=this.switch.dialer.DENY_TTL*Math.pow(this.denylistCount,3);const t=.9*e,r=1.1*e;e=Math.floor(Math.random()*(r-t)+t),this.denylisted=Date.now()+e,this.abort()}_getOrCreateConnection(e){let t=this.switch.connection.getOne(this.id),r=!1;return t||(t=new n({_switch:this.switch,peerInfo:e,muxer:null,conn:null}),this.switch.connection.add(t),t.once("connected",()=>t.protect()),t.once("private",()=>t.encrypt()),t.once("encrypted",()=>t.upgrade()),r=!0),{connectionFSM:t,didCreate:r}}_run(){if(this.length<1||!this.isRunning)return u("stopping the queue for %s",this.id),this.stop();const e=a(()=>{u("starting next dial to %s",this.id),this._run()}),t=this.switch._peerBook.get(this.id),r=this._queue.shift(),{connectionFSM:n,didCreate:i}=this._getOrCreateConnection(t);if(r.useFSM&&o(r.callback,null,n),["MUXED","CONNECTED"].includes(n.getState()))return r.connection=n,h(r),void e();n.once("error",e=>{r.callback(e),t.protocols.size>0&&t.isConnected()||this.denylist()}),n.once("close",()=>{e()}),n.once("muxed",()=>{this.denylistCount=0,r.connection=n,h(r),e()}),n.once("unmuxed",()=>{this.denylistCount=0,r.connection=n,h(r),e()}),i&&n.dial()}}},
/*!**********************************************!*\
  !*** ./node_modules/retimer/time-browser.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(){return Date.now()}},
/*!**************************************************************!*\
  !*** ./node_modules/libp2p/src/switch/connection/handler.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1),i=r(/*! ./incoming */1045),s=r(/*! ../observe-connection */249);e.exports=function(e){const t=n("libp2p:switch:listener");return function(r,n){return function(o){t("received incoming connection for transport %s",r),o.getPeerInfo((a,c)=>{const u=r?s(r,null,o,e.observer):o,h=new i({connection:u,_switch:e,transportKey:r,peerInfo:c});h.once("error",e=>t(e)),h.once("private",e=>{if(n)return n(e);h.encrypt()}),h.once("encrypted",()=>h.upgrade()),h.protect()})}}}},
/*!***************************************************************!*\
  !*** ./node_modules/libp2p/src/switch/connection/incoming.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! fsm-event */119),i=r(/*! multistream-select */117),s=r(/*! class-is */34),o=r(/*! ./base */447);e.exports=s(class extends o{constructor({connection:e,_switch:t,transportKey:r,peerInfo:s}){super({_switch:t,name:`inc:${t._peerInfo.id.toB58String().slice(0,8)}`}),this.conn=e,this.theirPeerInfo=s||null,this.theirB58Id=this.theirPeerInfo?this.theirPeerInfo.id.toB58String():null,this.ourPeerInfo=this.switch._peerInfo,this.transportKey=r,this.protocolMuxer=this.switch.protocolMuxer(this.transportKey),this.msListener=new i.Listener,this._state=n("DIALED",{DISCONNECTED:{disconnect:"DISCONNECTED"},DIALED:{privatize:"PRIVATIZING",encrypt:"ENCRYPTING"},PRIVATIZING:{done:"PRIVATIZED",disconnect:"DISCONNECTING"},PRIVATIZED:{encrypt:"ENCRYPTING"},ENCRYPTING:{done:"ENCRYPTED",disconnect:"DISCONNECTING"},ENCRYPTED:{upgrade:"UPGRADING",disconnect:"DISCONNECTING"},UPGRADING:{done:"MUXED"},MUXED:{disconnect:"DISCONNECTING"},DISCONNECTING:{done:"DISCONNECTED"}}),this._state.on("DISCONNECTED",()=>this._onDisconnected()),this._state.on("PRIVATIZING",()=>this._onPrivatizing()),this._state.on("PRIVATIZED",()=>this._onPrivatized()),this._state.on("ENCRYPTING",()=>this._onEncrypting()),this._state.on("ENCRYPTED",()=>{this.log("successfully encrypted connection to %s",this.theirB58Id||"unknown peer"),this.emit("encrypted",this.conn)}),this._state.on("UPGRADING",()=>this._onUpgrading()),this._state.on("MUXED",()=>{this.log("successfully muxed connection to %s",this.theirB58Id||"unknown peer"),this.emit("muxed",this.conn)}),this._state.on("DISCONNECTING",()=>{this._state("done")})}_onEncrypting(){this.log("encrypting connection via %s",this.switch.crypto.tag),this.msListener.addHandler(this.switch.crypto.tag,(e,t)=>{this.conn=this.switch.crypto.encrypt(this.ourPeerInfo.id,t,void 0,e=>{if(e)return this.close(e);this.conn.getPeerInfo((e,t)=>{this.theirPeerInfo=t,this._state("done")})})},null),this.msListener.handle(this.conn,e=>{e&&this.emit("crypto handshaking failed",e)})}_onUpgrading(){this.log("adding the protocol muxer to the connection"),this.protocolMuxer(this.conn,this.msListener),this._state("done")}},{className:"IncomingConnectionFSM",symbolName:"libp2p-switch/IncomingConnectionFSM"})},
/*!**********************************************************!*\
  !*** ./node_modules/libp2p/src/switch/protocol-muxer.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! multistream-select */117),i=r(/*! ./observe-connection */249),s=r(/*! debug */1),o=s("libp2p:switch:protocol-muxer");o.error=s("libp2p:switch:protocol-muxer:error"),e.exports=function(e,t){return r=>(s,a)=>{const c=a||new n.Listener;let u;u=r&&!a?i(r,null,s,t):s,Object.keys(e).forEach(r=>{if(!r)return;c.addHandler(r,(r,n)=>{o("registering handler with protocol %s",r);const s=e[r];if(s){const e=s&&s.handlerFunc;if(e){e(s,i(null,r,n,t))}}},e[r].matchFunc)}),c.handle(u,e=>{e&&o.error("multistream handshake failed",e)})}}},
/*!****************************************************!*\
  !*** ./node_modules/libp2p/src/switch/observer.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream/throughs/map */65),i=r(/*! events */5);e.exports=e=>{const t=Object.assign(new i,{incoming:r("in"),outgoing:r("out")});return e.on("peer-mux-established",e=>{t.emit("peer:connected",e.id.toB58String())}),e.on("peer-mux-closed",e=>{t.emit("peer:closed",e.id.toB58String())}),t;function r(e){return(r,i,s)=>n(n=>(function(e,r,n,i,s){e.then(e=>{if(e){const o=e.id.toB58String();t.emit("message",o,r,n,i,s)}})}(s,r,i,e,n.length),n))}}},
/*!*******************************************************!*\
  !*** ./node_modules/libp2p/src/switch/stats/index.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5),i=r(/*! ./stat */1049),s=r(/*! ./old-peers */1050),o={computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50},a=["dataReceived","dataSent"],c={in:"dataReceived",out:"dataSent"};e.exports=(e,t)=>{const r=Object.assign({},o,t),u=new i(a,r),h=Object.assign(new n,{start:function(){e.on("message",A),u.start();for(const e of f.values())e.start();for(const e of d.values())e.start()},stop:function(){e.removeListener("message",A),u.stop();for(const e of f.values())e.stop();for(const e of d.values())e.stop()},global:u,peers:()=>Array.from(f.keys()),forPeer:e=>f.get(e)||l.get(e),transports:()=>Array.from(d.keys()),forTransport:e=>d.get(e),protocols:()=>Array.from(p.keys()),forProtocol:e=>p.get(e)});u.on("update",g);const l=s(r.maxOldPeersRetention),f=new Map,d=new Map,p=new Map;return e.on("peer:closed",e=>{const t=f.get(e);t&&(t.removeListener("update",g),t.stop(),f.delete(e),l.set(e,t))}),h;function A(e,t,n,s,o){const h=c[s];if(t){u.push(h,o);let t=f.get(e);t||((t=l.get(e))?l.delete(e):t=new i(a,r),t.on("update",g),t.start(),f.set(e,t)),t.push(h,o)}if(t){let e=d.get(t);e||((e=new i(a,r)).on("update",g),d.set(t,e)),e.push(h,o)}if(n){let e=p.get(n);e||((e=new i(a,r)).on("update",g),p.set(n,e)),e.push(h,o)}}function g(){h.emit("update")}}},
/*!******************************************************!*\
  !*** ./node_modules/libp2p/src/switch/stats/stat.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5),i=r(/*! bignumber.js */48),s=r(/*! moving-average */384),o=r(/*! retimer */449);e.exports=class extends n{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);const r=this._options.movingAverageIntervals;for(var n=0;n<e.length;n++){var o=e[n];this._stats[o]=i(0),this._movingAverages[o]={};for(var a=0;a<r.length;a++){var c=r[a];(this._movingAverages[o][c]=s(c)).push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._queue.push([e,t,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout?this._timeout.reschedule(this._nextTimeout()):this._timeout=o(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const t=e=this._queue.shift();this._applyOp(t)}this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;Object.keys(this._stats).forEach(r=>{this._updateFrequencyFor(r,t,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,t,r){const n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const i=n/(t||1)*1e3;let o=this._movingAverages[e];o||(o=this._movingAverages[e]={});const a=this._options.movingAverageIntervals;for(var c=0;c<a.length;c++){var u=a[c],h=o[u];h||(h=o[u]=s(u)),h.push(r,i)}}_applyOp(e){const t=e[0],r=e[1];if("number"!=typeof r)throw new Error("invalid increment number:",r);let n;n=Object.prototype.hasOwnProperty.call(this._stats,t)?this._stats[t]:this._stats[t]=i(0),this._stats[t]=n.plus(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}},
/*!***********************************************************!*\
  !*** ./node_modules/libp2p/src/switch/stats/old-peers.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! hashlru */223);e.exports=e=>{const t=n(e);return t.delete=t.remove,t}},
/*!***********************************************!*\
  !*** ./node_modules/libp2p/src/ping/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./handler */1052);(t=e.exports=r(/*! ./ping */1053)).mount=n.mount,t.unmount=n.unmount},
/*!*************************************************!*\
  !*** ./node_modules/libp2p/src/ping/handler.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream/pull */17),i=r(/*! pull-handshake */67),s=r(/*! ./constants */250),o=s.PROTOCOL,a=s.PING_LENGTH,c=r(/*! debug */1),u=c("libp2p-ping");u.error=c("libp2p-ping:error"),(t=e.exports).mount=function(e){e.handle(o,(e,t)=>{const r=i({timeout:0}),s=r.handshake;n(t,r,t),function e(){s.read(a,(t,r)=>{if(!0!==t)return t?u.error(t):(s.write(r),e())})}()})},t.unmount=function(e){e.unhandle(o)}},
/*!**********************************************!*\
  !*** ./node_modules/libp2p/src/ping/ping.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5).EventEmitter,i=r(/*! pull-stream/pull */17),s=r(/*! pull-stream/sources/empty */109),o=r(/*! pull-handshake */67),a=r(/*! ./constants */250),c=r(/*! ./util */1054).rnd,u=r(/*! debug */1),h=u("libp2p-ping");h.error=u("libp2p-ping:error");const l=a.PROTOCOL,f=a.PING_LENGTH;e.exports=class extends n{constructor(e,t){super(),this._stopped=!1,this.peer=t,this.swarm=e}start(){h("dialing %s to %s",l,this.peer.id.toB58String()),this.swarm.dial(this.peer,l,(e,t)=>{if(e)return this.emit("error",e);const r=o({timeout:0});this.shake=r.handshake,i(r,t,r);const n=this;!function e(){const t=new Date,r=c(f);n.shake.write(r),n.shake.read(f,(i,s)=>{const o=new Date;if(i||!r.equals(s)){const e=new Error("Received wrong ping ack");return n.emit("error",e)}n.emit("ping",o-t),n._stopped||e()})}()})}stop(){!this._stopped&&this.shake&&(this._stopped=!0,i(s(),this.shake.rest()))}}},
/*!**********************************************!*\
  !*** ./node_modules/libp2p/src/ping/util.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! libp2p-crypto */36),i=r(/*! ./constants */250);e.exports.rnd=e=>(e||(e=i.PING_LENGTH),n.randomBytes(e))},
/*!*************************************************************!*\
  !*** ./node_modules/libp2p/src/connection-manager/index.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! events */5),i=r(/*! latency-monitor */1056).default,s=r(/*! debug */1)("libp2p:connection-manager"),o={maxPeers:1/0,minPeers:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,movingAverageInterval:6e4,defaultPeerValue:1};function a(e,t){return e[1]-t[1]}function c(e){return e.name.toLowerCase()}e.exports=class extends n{constructor(e,t){if(super(),this._libp2p=e,this._options=Object.assign({},o,t),this._options.maxPeersPerProtocol=function(e){e||(e={});return Object.keys(e).forEach(t=>{const r=e[t];delete e[t],e[t.toLowerCase()]=r}),e}(this._options.maxPeersPerProtocol),s("options: %j",this._options),this._stats=e.stats,t&&!this._stats)throw new Error("No libp2p.stats");this._peerValues=new Map,this._peers=new Map,this._peerProtocols=new Map,this._peerCountPerProtocol=new Map,this._onStatsUpdate=this._onStatsUpdate.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._libp2p.isStarted()?this._onceStarted():this._libp2p.once("start",this._onceStarted.bind(this))}start(){this._stats.on("update",this._onStatsUpdate),this._libp2p.on("connection:start",this._onPeerConnect),this._libp2p.on("connection:end",this._onPeerDisconnect),this._latencyMonitor=new i({dataEmitIntervalMs:this._options.pollInterval}),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure)}stop(){this._stats.removeListener("update",this._onStatsUpdate),this._libp2p.removeListener("connection:start",this._onPeerConnect),this._libp2p.removeListener("connection:end",this._onPeerDisconnect),this._latencyMonitor.removeListener("data",this._onLatencyMeasure)}setPeerValue(e,t){if(t<0||t>1)throw new Error("value should be a number between 0 and 1");e.toB58String&&(e=e.toB58String()),this._peerValues.set(e,t)}_onceStarted(){this._peerId=this._libp2p.peerInfo.id.toB58String()}_onStatsUpdate(){const e=this._stats.global.movingAverages,t=e.dataReceived[this._options.movingAverageInterval].movingAverage();this._checkLimit("maxReceivedData",t);const r=e.dataSent[this._options.movingAverageInterval].movingAverage();this._checkLimit("maxSentData",r);const n=t+r;this._checkLimit("maxData",n),s("stats update",n)}_onPeerConnect(e){const t=e.id.toB58String();s("%s: connected to %s",this._peerId,t),this._peerValues.set(t,this._options.defaultPeerValue),this._peers.set(t,e),this.emit("connected",t),this._checkLimit("maxPeers",this._peers.size),function(e){const t=new Set;return e.multiaddrs.forEach(e=>{e.protos().map(c).forEach(e=>{t.add(e)})}),Array.from(t)}(e).forEach(e=>{this._peerCountPerProtocol[e]||(this._peerCountPerProtocol[e]=0),this._peerCountPerProtocol[e]++;let r=this._peerProtocols[t];r||(r=this._peerProtocols[t]=new Set),r.add(e),this._checkProtocolMaxPeersLimit(e,this._peerCountPerProtocol[e])})}_onPeerDisconnect(e){const t=e.id.toB58String();s("%s: disconnected from %s",this._peerId,t),this._peerValues.delete(t),this._peers.delete(t);const r=this._peerProtocols[t];r&&Array.from(r).forEach(e=>{this._peerCountPerProtocol[e]&&this._peerCountPerProtocol[e]--}),this.emit("disconnected",t)}_onLatencyMeasure(e){this._checkLimit("maxEventLoopDelay",e.avgMs)}_checkLimit(e,t){const r=this._options[e];s("checking limit of %s. current value: %d of %d",e,t,r),t>r&&(s("%s: limit exceeded: %s, %d",this._peerId,e,t),this.emit("limit:exceeded",e,t),this._maybeDisconnectOne())}_checkProtocolMaxPeersLimit(e,t){s("checking protocol limit. current value of %s is %d",e,t),t>this._options.maxPeersPerProtocol[e]&&(s("%s: protocol max peers limit exceeded: %s, %d",this._peerId,e,t),this.emit("limit:exceeded",e,t),this._maybeDisconnectOne())}_maybeDisconnectOne(){if(this._options.minPeers<this._peerValues.size){const e=Array.from(this._peerValues).sort(a);s("%s: sorted peer values: %j",this._peerId,e);const t=e[0];if(t){const e=t[0];s("%s: lowest value peer is %s",this._peerId,e),s("%s: forcing disconnection from %j",this._peerId,e),this._disconnectPeer(e)}}}_disconnectPeer(e){s("preemptively disconnecting peer",e),this.emit("%s: disconnect:preemptive",this._peerId,e);const t=this._peers.get(e);this._libp2p.hangUp(t,e=>{e&&this.emit("error",e)})}}},
/*!***********************************************!*\
  !*** ./node_modules/latency-monitor/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r(/*! ./dist/LatencyMonitor */1057).default},
/*!*************************************************************!*\
  !*** ./node_modules/latency-monitor/dist/LatencyMonitor.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=c(r(/*! events */5)),s=c(r(/*! lodash/get */1058)),o=c(r(/*! lodash/isFunction */228)),a=c(r(/*! ./VisibilityChangeEmitter */1094));function c(e){return e&&e.__esModule?e:{default:e}}var u=r(/*! debug */451)("latency-monitor:LatencyMonitor"),h=function(t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.latencyCheckIntervalMs,i=t.dataEmitIntervalMs,o=t.asyncTestFn,c=t.latencyRandomPercentage;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),l=h;return l.latencyCheckIntervalMs=n||500,l.latencyRandomPercentage=c||10,l._latecyCheckMultiply=l.latencyRandomPercentage/100*2*l.latencyCheckIntervalMs,l._latecyCheckSubtract=l._latecyCheckMultiply/2,l.dataEmitIntervalMs=null===i||0===i?void 0:i||5e3,u("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",l.latencyCheckIntervalMs,l.dataEmitIntervalMs),l.dataEmitIntervalMs?u("Expecting ~%s events per summary",l.latencyCheckIntervalMs/l.dataEmitIntervalMs):u("Not emitting summaries"),l.asyncTestFn=o,e&&e.hrtime?(u("Using process.hrtime for timing"),l.now=e.hrtime,l.getDeltaMS=function(e){var t=l.now(e);return 1e3*t[0]+t[1]/1e6}):"undefined"!=typeof window&&(0,s.default)(window,"performance.now")?(u("Using performance.now for timing"),l.now=window.performance.now.bind(window.performance),l.getDeltaMS=function(e){return Math.round(l.now()-e)}):(u("Using Date.now for timing"),l.now=Date.now,l.getDeltaMS=function(e){return l.now()-e}),l._latencyData=l._initLatencyData(),"undefined"!=typeof window&&(l._visibilityChangeEmitter=new a.default,l._visibilityChangeEmitter.on("visibilityChange",(function(e){e?l._startTimers():(l._emitSummary(),l._stopTimers())}))),l._visibilityChangeEmitter&&!l._visibilityChangeEmitter.isVisible()||l._startTimers(),h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),n(r,[{key:"_startTimers",value:function(){var e=this;this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval((function(){return e._emitSummary()}),this.dataEmitIntervalMs),(0,o.default)(this._emitIntervalID.unref)&&this._emitIntervalID.unref()))}},{key:"_stopTimers",value:function(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=void 0),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=void 0)}},{key:"_emitSummary",value:function(){var e=this.getSummary();e.events>0&&this.emit("data",e)}},{key:"getSummary",value:function(){var e={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),u("Summary: %O",e),e}},{key:"_checkLatency",value:function(){var e=this,t=this,r=Math.random()*t._latecyCheckMultiply-t._latecyCheckSubtract,n={deltaOffset:Math.ceil(t.latencyCheckIntervalMs+r),startTime:t.now()},i=function(){if(e._checkLatencyID){var r=t.getDeltaMS(n.startTime)-n.deltaOffset;t._checkLatency(),t._latencyData.events++,t._latencyData.minMs=Math.min(t._latencyData.minMs,r),t._latencyData.maxMs=Math.max(t._latencyData.maxMs,r),t._latencyData.totalMs+=r,u("MS: %s Data: %O",r,t._latencyData)}};u("localData: %O",n),this._checkLatencyID=setTimeout((function(){t.asyncTestFn?(n.deltaOffset=0,n.startTime=t.now(),t.asyncTestFn(i)):(n.deltaOffset-=1,i())}),n.deltaOffset),(0,o.default)(this._checkLatencyID.unref)&&this._checkLatencyID.unref()}},{key:"_initLatencyData",value:function(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}]),r}(i.default);t.default=h}).call(this,r(/*! ./../../process/browser.js */2))},
/*!************************************!*\
  !*** ./node_modules/lodash/get.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseGet */1059);e.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},
/*!*****************************************!*\
  !*** ./node_modules/lodash/_baseGet.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_castPath */1060),i=r(/*! ./_toKey */1093);e.exports=function(e,t){for(var r=0,s=(t=n(t,e)).length;null!=e&&r<s;)e=e[i(t[r++])];return r&&r==s?e:void 0}},
/*!******************************************!*\
  !*** ./node_modules/lodash/_castPath.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./isArray */79),i=r(/*! ./_isKey */1061),s=r(/*! ./_stringToPath */1062),o=r(/*! ./toString */1091);e.exports=function(e,t){return n(e)?e:i(e,t)?[e]:s(o(e))}},
/*!***************************************!*\
  !*** ./node_modules/lodash/_isKey.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./isArray */79),i=r(/*! ./isSymbol */251),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||(o.test(e)||!s.test(e)||null!=t&&e in Object(t))}},
/*!**********************************************!*\
  !*** ./node_modules/lodash/_stringToPath.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_memoizeCapped */1063),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,r,n,i){t.push(n?i.replace(s,"$1"):r||e)})),t}));e.exports=o},
/*!***********************************************!*\
  !*** ./node_modules/lodash/_memoizeCapped.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./memoize */1064),i=500;e.exports=function(e){var t=n(e,(function(e){return r.size===i&&r.clear(),e})),r=t.cache;return t}},
/*!****************************************!*\
  !*** ./node_modules/lodash/memoize.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_MapCache */1065),i="Expected a function";function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(s.Cache||n),r}s.Cache=n,e.exports=s},
/*!******************************************!*\
  !*** ./node_modules/lodash/_MapCache.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_mapCacheClear */1066),i=r(/*! ./_mapCacheDelete */1086),s=r(/*! ./_mapCacheGet */1088),o=r(/*! ./_mapCacheHas */1089),a=r(/*! ./_mapCacheSet */1090);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=o,c.prototype.set=a,e.exports=c},
/*!***********************************************!*\
  !*** ./node_modules/lodash/_mapCacheClear.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_Hash */1067),i=r(/*! ./_ListCache */1078),s=r(/*! ./_Map */1085);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||i),string:new n}}},
/*!**************************************!*\
  !*** ./node_modules/lodash/_Hash.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_hashClear */1068),i=r(/*! ./_hashDelete */1074),s=r(/*! ./_hashGet */1075),o=r(/*! ./_hashHas */1076),a=r(/*! ./_hashSet */1077);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=o,c.prototype.set=a,e.exports=c},
/*!*******************************************!*\
  !*** ./node_modules/lodash/_hashClear.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_nativeCreate */163);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},
/*!**********************************************!*\
  !*** ./node_modules/lodash/_baseIsNative.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./isFunction */228),i=r(/*! ./_isMasked */1070),s=r(/*! ./isObject */201),o=r(/*! ./_toSource */1072),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,h=c.toString,l=u.hasOwnProperty,f=RegExp("^"+h.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||i(e))&&(n(e)?f:a).test(o(e))}},
/*!******************************************!*\
  !*** ./node_modules/lodash/_isMasked.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n,i=r(/*! ./_coreJsData */1071),s=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!s&&s in e}},
/*!********************************************!*\
  !*** ./node_modules/lodash/_coreJsData.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_root */154)["__core-js_shared__"];e.exports=n},
/*!******************************************!*\
  !*** ./node_modules/lodash/_toSource.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},
/*!******************************************!*\
  !*** ./node_modules/lodash/_getValue.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},
/*!********************************************!*\
  !*** ./node_modules/lodash/_hashDelete.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},
/*!*****************************************!*\
  !*** ./node_modules/lodash/_hashGet.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_nativeCreate */163),i="__lodash_hash_undefined__",s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return r===i?void 0:r}return s.call(t,e)?t[e]:void 0}},
/*!*****************************************!*\
  !*** ./node_modules/lodash/_hashHas.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_nativeCreate */163),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},
/*!*****************************************!*\
  !*** ./node_modules/lodash/_hashSet.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_nativeCreate */163),i="__lodash_hash_undefined__";e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?i:t,this}},
/*!*******************************************!*\
  !*** ./node_modules/lodash/_ListCache.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_listCacheClear */1079),i=r(/*! ./_listCacheDelete */1080),s=r(/*! ./_listCacheGet */1082),o=r(/*! ./_listCacheHas */1083),a=r(/*! ./_listCacheSet */1084);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=o,c.prototype.set=a,e.exports=c},
/*!************************************************!*\
  !*** ./node_modules/lodash/_listCacheClear.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(){this.__data__=[],this.size=0}},
/*!*************************************************!*\
  !*** ./node_modules/lodash/_listCacheDelete.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_assocIndexOf */164),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}},
/*!***********************************!*\
  !*** ./node_modules/lodash/eq.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},
/*!**********************************************!*\
  !*** ./node_modules/lodash/_listCacheGet.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_assocIndexOf */164);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},
/*!**********************************************!*\
  !*** ./node_modules/lodash/_listCacheHas.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_assocIndexOf */164);e.exports=function(e){return n(this.__data__,e)>-1}},
/*!**********************************************!*\
  !*** ./node_modules/lodash/_listCacheSet.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_assocIndexOf */164);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},
/*!*************************************!*\
  !*** ./node_modules/lodash/_Map.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_getNative */450)(r(/*! ./_root */154),"Map");e.exports=n},
/*!************************************************!*\
  !*** ./node_modules/lodash/_mapCacheDelete.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_getMapData */165);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},
/*!*******************************************!*\
  !*** ./node_modules/lodash/_isKeyable.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},
/*!*********************************************!*\
  !*** ./node_modules/lodash/_mapCacheGet.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_getMapData */165);e.exports=function(e){return n(this,e).get(e)}},
/*!*********************************************!*\
  !*** ./node_modules/lodash/_mapCacheHas.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_getMapData */165);e.exports=function(e){return n(this,e).has(e)}},
/*!*********************************************!*\
  !*** ./node_modules/lodash/_mapCacheSet.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_getMapData */165);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},
/*!*****************************************!*\
  !*** ./node_modules/lodash/toString.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_baseToString */1092);e.exports=function(e){return null==e?"":n(e)}},
/*!**********************************************!*\
  !*** ./node_modules/lodash/_baseToString.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_Symbol */229),i=r(/*! ./_arrayMap */440),s=r(/*! ./isArray */79),o=r(/*! ./isSymbol */251),a=1/0,c=n?n.prototype:void 0,u=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return i(t,e)+"";if(o(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-a?"-0":r}},
/*!***************************************!*\
  !*** ./node_modules/lodash/_toKey.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./isSymbol */251),i=1/0;e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},
/*!**********************************************************************!*\
  !*** ./node_modules/latency-monitor/dist/VisibilityChangeEmitter.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(/*! events */5),o=(n=s)&&n.__esModule?n:{default:n};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=r(/*! debug */451)("latency-monitor:VisibilityChangeEmitter"),u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"undefined"==typeof document?(c('This is not a browser, no "document" found. Stopping.'),a(e)):(e._initializeVisibilityVarNames(),e._addVisibilityChangeListener(),e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"_initializeVisibilityVarNames",value:function(){var e=void 0,t=void 0;void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),this._hidden=e,this._visibilityChange=t}},{key:"_addVisibilityChangeListener",value:function(){void 0===document.addEventListener||void 0===document[this._hidden]?c("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}},{key:"isVisible",value:function(){if(void 0!==this._hidden&&void 0!==document[this._hidden])return!document[this._hidden]}},{key:"_handleVisibilityChange",value:function(){var e=!document[this._hidden];c(e?"Page Visible":"Page Hidden"),this.emit("visibilityChange",e)}}]),t}(o.default);t.default=u},
/*!**********************************************************************!*\
  !*** ./node_modules/latency-monitor/node_modules/debug/src/debug.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n;function i(e){function r(){if(r.enabled){var e=r,i=+new Date,s=i-(n||i);e.diff=s,e.prev=n,e.curr=i,n=i;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;c++;var i=t.formatters[n];if("function"==typeof i){var s=o[c];r=i.call(e,s),o.splice(c,1),c--}return r})),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,i=0;i<n;i++)r[i]&&("-"===(e=r[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(/*! ms */1096),t.names=[],t.skips=[],t.formatters={}},
/*!***************************************************************!*\
  !*** ./node_modules/latency-monitor/node_modules/ms/index.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=1e3,n=60*r,i=60*n,s=24*i,o=365.25*s;function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*o;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?a(c=e,s,"day")||a(c,i,"hour")||a(c,n,"minute")||a(c,r,"second")||c+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},
/*!***********************************************!*\
  !*** ./node_modules/libp2p/src/util/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! once */31);e.exports.emitFirst=function(e,t,r){r=n(r),t.forEach(n=>{e.once(n,(...n)=>{t.forEach(t=>{e.removeListener(t,r)}),r.apply(e,n)})})}},
/*!*************************************************!*\
  !*** ./node_modules/libp2p/src/peer-routing.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/tryEach */244),i=r(/*! err-code */8),s=r(/*! promisify-es6 */9);e.exports=e=>{const t=e._modules.peerRouting||[];return e._dht&&t.unshift(e._dht),{findPeer:s((e,r,s)=>{"function"==typeof r&&(s=r,r={}),t.length||s(i(new Error("No peer routers available"),"NO_ROUTERS_AVAILABLE"));const o=t.map(t=>n=>t.findPeer(e,r,(e,t)=>e?n(e):t&&0!==Object.keys(t).length?void n(null,t):n(i(new Error("not found"),"NOT_FOUND"),null)));n(o,(e,t)=>{if(e)return s(e);s(null,t=t||[])})})}}},
/*!****************************************************!*\
  !*** ./node_modules/libp2p/src/content-routing.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/tryEach */244),i=r(/*! async/parallel */56),s=r(/*! err-code */8),o=r(/*! promisify-es6 */9);e.exports=e=>{const t=e._modules.contentRouting||[];return e._dht&&t.unshift(e._dht),{findProviders:o((e,r,i)=>{if("function"==typeof r?(i=r,r={}):"number"==typeof r&&(r={maxTimeout:r}),!t.length)return i(s(new Error("No content routers available"),"NO_ROUTERS_AVAILABLE"));const o=t.map(t=>n=>t.findProviders(e,r,(e,t)=>e?n(e):t&&0!==Object.keys(t).length?void n(null,t):n(s(new Error("not found"),"NOT_FOUND"),null)));n(o,(e,t)=>{if(e&&"NOT_FOUND"!==e.code)return i(e);i(null,t=t||[])})}),provide:o((e,r)=>{if(!t.length)return r(s(new Error("No content routers available"),"NO_ROUTERS_AVAILABLE"));i(t.map(t=>r=>t.provide(e,r)),r)})}}},
/*!****************************************!*\
  !*** ./node_modules/libp2p/src/dht.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/nextTick */35),i=r(/*! err-code */8),s=r(/*! promisify-es6 */9),{messages:o,codes:a}=r(/*! ./errors */252);e.exports=e=>({put:s((t,r,s)=>{if(!e._dht)return n(s,i(new Error(o.DHT_DISABLED),a.DHT_DISABLED));e._dht.put(t,r,s)}),get:s((t,r,s)=>{if("function"==typeof r&&(s=r,r={}),!e._dht)return n(s,i(new Error(o.DHT_DISABLED),a.DHT_DISABLED));e._dht.get(t,r,s)}),getMany:s((t,r,s,c)=>{if("function"==typeof s&&(c=s,s={}),!e._dht)return n(c,i(new Error(o.DHT_DISABLED),a.DHT_DISABLED));e._dht.getMany(t,r,s,c)})})},
/*!*******************************************!*\
  !*** ./node_modules/libp2p/src/pubsub.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! async/nextTick */35),{messages:i,codes:s}=r(/*! ./errors */252),o=r(/*! promisify-es6 */9),a=r(/*! err-code */8);e.exports=(e,r,c)=>{const u=new r(e,c);return{subscribe:(t,r,o,c)=>{if("function"==typeof o&&(c=o,o={}),!e.isStarted()&&!u.started){const e=a(new Error(i.NOT_STARTED_YET),s.PUBSUB_NOT_STARTED);return c?n(()=>c(e)):Promise.reject(e)}return 0===u.listenerCount(t)&&u.subscribe(t),u.on(t,r),c?n(()=>c()):Promise.resolve()},unsubscribe:(t,r,o)=>{if(!e.isStarted()&&!u.started){const e=a(new Error(i.NOT_STARTED_YET),s.PUBSUB_NOT_STARTED);return o?n(()=>o(e)):Promise.reject(e)}return r?u.removeListener(t,r):u.removeAllListeners(t),0===u.listenerCount(t)&&u.unsubscribe(t),o?n(()=>o()):Promise.resolve()},publish:o((r,o,c)=>{if(!e.isStarted()&&!u.started)return n(c,a(new Error(i.NOT_STARTED_YET),s.PUBSUB_NOT_STARTED));try{o=t.from(o)}catch(e){return n(c,a(new Error("data must be convertible to a Buffer"),"ERR_DATA_IS_NOT_VALID"))}u.publish(r,o,c)}),ls:o(t=>{if(!e.isStarted()&&!u.started)return n(t,a(new Error(i.NOT_STARTED_YET),s.PUBSUB_NOT_STARTED));const r=Array.from(u.subscriptions);n(()=>t(null,r))}),peers:o((t,r)=>{if(!e.isStarted()&&!u.started)return n(r,a(new Error(i.NOT_STARTED_YET),s.PUBSUB_NOT_STARTED));"function"==typeof t&&(r=t,t=null);const o=Array.from(u.peers.values()).filter(e=>!t||e.topics.has(t)).map(e=>e.info.id.toB58String());n(()=>r(null,o))}),setMaxListeners:e=>u.setMaxListeners(e),start:o(e=>u.start(e)),stop:o(e=>u.stop(e))}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************!*\
  !*** ./node_modules/libp2p/src/config.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! merge-options */51),{struct:i,superstruct:s}=r(/*! superstruct */205),{optional:o,list:a}=i,c={connectionManager:{minPeers:25},config:{dht:{enabled:!1,kBucketSize:20,randomWalk:{enabled:!1,queriesPerPeriod:1,interval:3e5,timeout:1e4}},peerDiscovery:{autoDial:!0},pubsub:{enabled:!0,emitSelf:!0,signMessages:!0,strictSigning:!0},relay:{enabled:!0,hop:{enabled:!1,active:!1}}}},u=s({types:{transport:e=>0===e.length?"ERROR_EMPTY":(e.forEach(e=>{if(!e.dial)return"ERR_NOT_A_TRANSPORT"}),!0),protector:e=>!!e.protect||"ERR_NOT_A_PROTECTOR"}}),h=u({connEncryption:o(a([u("object|function")])),connProtector:u("undefined|protector"),contentRouting:o(a(["object"])),dht:o(u("null|function|object")),pubsub:o(u("null|function|object")),peerDiscovery:o(a([u("object|function")])),peerRouting:o(a(["object"])),streamMuxer:o(a([u("object|function")])),transport:"transport"}),l=u({peerDiscovery:"object?",relay:"object?",dht:"object?",pubsub:"object?"}),f=u({switch:"object?",connectionManager:"object?",datastore:"object?",peerInfo:"object",peerBook:"object?",modules:h,config:l});e.exports.validate=e=>{e=n(c,e);const[t,r]=f.validate(e);if(t)throw new Error(`${t.message}${t.reason?" - "+t.reason:""}`);return(r.config.dht.enabled&&u("function|object")(r.modules.dht),r)}},
/*!*******************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/stop.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! callbackify */19);e.exports=e=>n(async()=>{if(e.log("stop"),"stopped"===e.state.state())throw new Error("Already stopped");if("running"!==e.state.state())throw new Error("Not able to stop from state: "+e.state.state());e.state.stop(),e._blockService.unsetExchange(),e._bitswap.stop(),e._preload.stop();const t=e.libp2p;e.libp2p=null;try{await Promise.all([e._ipns.republisher.stop(),e._mfsPreload.stop(),t.stop(),e._repo.close()]),e.state.stopped(),e.emit("stop")}catch(t){throw e.emit("error",t),t}})},
/*!************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/is-online.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e){return()=>Boolean(e._bitswap&&e.libp2p&&e.libp2p.isStarted())}},
/*!**********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/version.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../../../package.json */452),i=r(/*! callbackify */19);e.exports=function(e){return i(async()=>{const t=await e.repo.version();return{version:n.version,repo:t,commit:""}})}},
/*!*****************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/id.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! callbackify */19),i=r(/*! ../../../package.json */452).version;e.exports=function(e){return n(async()=>({id:e._peerInfo.id.toB58String(),publicKey:e._peerInfo.id.pubKey.bytes.toString("base64"),addresses:e._peerInfo.multiaddrs.toArray().map(e=>e.toString()).filter(e=>e.indexOf("ipfs")>=0).sort(),agentVersion:`js-ipfs/${i}`,protocolVersion:"9000"}))}},
/*!*********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/pin/gc.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! cids */4),i=r(/*! base32.js */142),s=r(/*! callbackify */19),{cidToString:o}=r(/*! ../../../utils/cid */122),a=r(/*! debug */1)("ipfs:gc"),{default:c}=r(/*! p-queue */45),{MFS_ROOT_KEY:u}=r(/*! ipfs-mfs/src/core/utils/constants */46),{Errors:h}=r(/*! interface-datastore */14),l=h.notFoundError().code,f=256;async function d(e){const t=new Set,r=e=>{a(`Found ${e.length} pinned blocks`),e.forEach(e=>{t.add(o(new n(e),{base:"base32"}))})};return await Promise.all([e.pin.ls().then(e=>e.map(e=>e.hash)).then(r),e.pin.pinManager.getInternalBlocks().then(r),e._repo.root.get(u).then(t=>(async function(e,t){const r=await e.refs(t,{recursive:!0}),i=[t,...r.map(e=>new n(e.ref))];return a(`Found ${i.length} MFS blocks`),i})(e,new n(t))).then(r).catch(e=>{if(e.code===l)return a("No blocks in MFS"),[];throw e})]),t}function p(e){const r=(new i.Decoder).write(e.toString().slice(1)).finalize();return new n(t.from(r))}e.exports=function(e){return s(async()=>{const t=Date.now();a("Creating set of marked blocks");const r=await e._gcLock.writeLock();try{const[n,i]=await Promise.all([e._repo.blocks.query({keysOnly:!0}),d(e)]),s=await async function(e,t,r){const n=[],i=[],s=new c({concurrency:f});for await(const{key:o}of r)try{const r=p(o),a=r.toV1().toString("base32");t.has(a)||(n.push(r),s.add(async()=>{const t={cid:r};try{await e._repo.blocks.delete(r)}catch(e){t.err=new Error(`Could not delete block with CID ${r}: ${e.message}`)}i.push(t)}))}catch(e){const t=`Could not convert block with key '${o}' to CID`;a(t,e),i.push({err:new Error(t+`: ${e.message}`)})}return await s.onIdle(),a(`Marked set has ${t.size} unique blocks. Blockstore has ${r.length} blocks. `+`Deleted ${n.length} blocks.`),i}(e,i,n);return a(`Complete (${Date.now()-t}ms)`),s}finally{r()}})}}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/init.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! peer-id */7),i=r(/*! merge-options */51),s=r(/*! callbackify */19),o=r(/*! promisify-es6 */9),a=r(/*! ../runtime/config-nodejs.js */253),c=r(/*! libp2p-keychain */372),{DAGNode:u}=r(/*! ipld-dag-pb */29),h=r(/*! ipfs-unixfs */39),l=r(/*! multicodec */27),f=r(/*! ../ipns */385),d=r(/*! ../ipns/routing/offline-datastore */391),p=r(/*! ./init-assets */1110),{profiles:A}=r(/*! ./config */454);function g(e,r){return r.privateKey?(e.log("using user-supplied private-key"),"object"==typeof r.privateKey?r.privateKey:o(n.createFromPrivKey)(t.from(r.privateKey,"base64"))):(r.log(`generating ${r.bits}-bit RSA keypair...`,!1),e.log("generating peer id: %s bits",r.bits),o(n.create)({bits:r.bits}))}async function y(e,t){if("uninitialized"!==e.state.state())throw new Error("Not able to init from state: "+e.state.state());if(e.state.init(),e.log("init"),t.repo)return void(e._repo=t.repo);t.emptyRepo=t.emptyRepo||!1,t.bits=Number(t.bits)||2048,t.log=t.log||function(){};const r=i(a(),e._options.config);!function(e,t,r){if(r.profiles)for(const n of r.profiles){const r=A[n];if(!r)throw new Error(`Could not find profile with name '${n}'`);e.log(`applying profile ${n}`),r.transform(t)}}(e,r,t);const n=await e._repo.exists();if(e.log("repo exists?",n),!0===n)throw Error("repo already exists");const s=await g(e,t);e.log("identity generated"),r.Identity={PeerID:s.toB58String(),PrivKey:s.privKey.bytes.toString("base64")};const o=s.privKey;if(t.pass&&(r.Keychain=c.generateOptions()),t.log("done"),t.log("peer identity: "+r.Identity.PeerID),await e._repo.init(r),await e._repo.open(),e.log("repo opened"),t.pass){e.log("creating keychain");const n=Object.assign({passPhrase:t.pass},r.Keychain);e._keychain=new c(e._repo.keys,n),await e._keychain.importPeer("self",{privKey:o})}const y=new d(e._repo);return e._ipns=new f(y,e._repo.datastore,e._peerInfo,e._keychain,e._options),async function(e,t,r){if(r.emptyRepo)return;e.log("adding assets");const n=new u(new h("directory").marshal()),i=await e.dag.put(n,{version:0,format:l.DAG_PB,hashAlg:l.SHA2_256});if(await e._ipns.initializeKeyspace(t,i.toBaseEncodedString()),e.log("Initialised keyspace"),"function"==typeof p)return e.log("Adding default assets"),p(e,r.log)}(e,o,t)}e.exports=function(e){return s.variadic(async t=>{t=t||{},await y(e,t),e.log("Created repo"),await e.preStart(),e.log("Done pre-start"),e.state.initialized(),e.emit("init")})}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************************!*\
  !*** ./node_modules/ipfs-unixfs/src/unixfs.proto.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports="message Data {\n  enum DataType {\n    Raw = 0;\n    Directory = 1;\n    File = 2;\n    Metadata = 3;\n    Symlink = 4;\n    HAMTShard = 5;\n  }\n\n  required DataType Type = 1;\n  optional bytes Data = 2;\n  optional uint64 filesize = 3;\n  repeated uint64 blocksizes = 4;\n\n  optional uint64 hashType = 5;\n  optional uint64 fanout = 6;\n}\n\nmessage Metadata {\n  optional string MimeType = 1;\n}"},
/*!*******************************!*\
  !*** ./init-assets (ignored) ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/bootstrap.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../runtime/config-nodejs.js */253),i=r(/*! mafmt */43).IPFS.matches,s=r(/*! callbackify */19);function o(e){try{return i(e)}catch(e){return!1}}function a(e){return new Error(`${e} is not a valid Multiaddr`)}e.exports=function(e){return{list:s(async()=>{return{Peers:(await e._repo.config.get()).Bootstrap}}),add:s.variadic(async(t,r={default:!1})=>{if(t&&!o(t))throw a(t);const i=await e._repo.config.get();return r.default?i.Bootstrap=n().Bootstrap:t&&-1===i.Bootstrap.indexOf(t)&&i.Bootstrap.push(t),await e._repo.config.set(i),{Peers:r.default?n().Bootstrap:[t]}}),rm:s.variadic(async(t,r={all:!1})=>{if(t&&!o(t))throw a(t);const n=await e._repo.config.get();r.all?n.Bootstrap=[]:n.Bootstrap=n.Bootstrap.filter(e=>e!==t),await e._repo.config.set(n);const i=[];return!r.all&&t&&i.push(t),{Peers:i}})}}},
/*!********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/block.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-block */97),i=r(/*! multihashing-async */341),s=r(/*! cids */4),o=r(/*! callbackify */19),a=r(/*! err-code */22),c=r(/*! async-iterator-all */123),{PinTypes:u}=r(/*! ./pin/pin-manager */455);function h(e){if(s.isCID(e))return e;try{return new s(e)}catch(e){throw a(e,"ERR_INVALID_CID")}}e.exports=function(e){async function*t(t,r){r=r||{},Array.isArray(t)||(t=[t]);const n=await e._gcLock.writeLock();try{for(let n of t){const t={hash:(n=h(n)).toString()};try{const t=await e.pin.pinManager.isPinnedWithType(n,u.all);if(t.pinned){if(s.isCID(t.reason))throw a(new Error(`pinned via ${t.reason}`));throw a(new Error(`pinned: ${t.reason}`))}if(!await e._blockService._repo.blocks.has(n))throw a(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await e._blockService.delete(n)}catch(e){r.force||(t.error=`cannot remove ${n}: ${e.message}`)}r.quiet||(yield t)}}finally{n()}}return{get:o.variadic(async(t,r)=>(r=r||{},t=h(t),!1!==r.preload&&e._preload(t),e._blockService.get(t))),put:o.variadic(async(t,r)=>{if(r=r||{},Array.isArray(t))throw new Error("Array is not supported");if(!n.isBlock(t))if(r.cid&&s.isCID(r.cid))t=new n(t,r.cid);else{const e=r.mhtype||"sha2-256",o=r.format||"dag-pb";let a;a=null==r.version?"sha2-256"===e&&"dag-pb"===o?0:1:r.version;const c=await i(t,e),u=new s(a,o,c);t=new n(t,u)}const o=await e._gcLock.readLock();try{return await e._blockService.put(t),!1!==r.preload&&e._preload(t.cid),t}finally{o()}}),rm:o.variadic(async(e,r)=>c(t(e,r))),_rmAsyncIterator:t,stat:o.variadic(async(t,r)=>{r=r||{},t=h(t),!1!==r.preload&&e._preload(t);const n=await e._blockService.get(t);return{key:t.toString(),size:n.data.length}})}}},
/*!*********************************************!*\
  !*** ./node_modules/dag-cbor-sync/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){const n=r(/*! borc */282),i=r(/*! cids */4),s=r(/*! ipfs-block */97),o=r(/*! is-circular */289),a=r(/*! multihashing-async */1114),c=(0,r(/*! util */99).promisify)(a),u=42;function h(e){return"string"==typeof e?e=new i(e).buffer:i.isCID(e)&&(e=e.buffer),new n.Tagged(u,t.concat([t.from("00","hex"),e]))}e.exports=e=>{let r=new n.Decoder({tags:{[u]:e=>(e=e.slice(1),new i(e))},size:e});const a=e=>{let r=function(e){let r;try{r=o(e)}catch(e){r=!1}if(r)throw new Error("The object passed has circular references");return function e(r){if(!r||t.isBuffer(r)||"string"==typeof r)return r;if(Array.isArray(r))return r.map(e);if(i.isCID(r))return h(r);const n=Object.keys(r);if(1===n.length&&"/"===n[0])return h(r["/"]);if(n.length>0){const t={};return n.forEach(n=>{"object"==typeof r[n]?t[n]=e(r[n]):t[n]=r[n]}),t}return r}(e)}(e);return n.encode(r)};return{serialize:a,deserialize:e=>r.decodeFirst(e),mkblock:async(e,t="sha2-256")=>{let r=a(e),n=await c(r,t),o=new i(1,"dag-cbor",n);return new s(r,o)}}}}).call(this,r(/*! ./../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*********************************************************************************!*\
  !*** ./node_modules/dag-cbor-sync/node_modules/multihashing-async/src/index.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! err-code */1115),s=r(/*! multihashes */13),o=r(/*! ./crypto */1116);async function a(e,t,r){const n=await a.digest(e,t,r);return s.encode(n,t,r)}a.Buffer=n,a.multihash=s,a.digest=async(e,t,r)=>{const n=a.createHash(t),i=await n(e);return r?i.slice(0,r):i},a.createHash=function(e){if(!e)throw i(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=s.coerceCode(e),!a.functions[e])throw i(new Error(`multihash function '${e}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return a.functions[e]},a.functions={0:o.identity,17:o.sha1,18:o.sha2256,19:o.sha2512,20:o.sha3512,21:o.sha3384,22:o.sha3256,23:o.sha3224,24:o.shake128,25:o.shake256,26:o.keccak224,27:o.keccak256,28:o.keccak384,29:o.keccak512,34:o.murmur3128,35:o.murmur332,86:o.dblSha2256},o.addBlake(a.functions),a.validate=async(e,t)=>{const r=await a(e,s.decode(t).name);return 0===n.compare(t,r)},e.exports=a},
/*!*******************************************************************!*\
  !*** ./node_modules/dag-cbor-sync/node_modules/err-code/index.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?r=t:null!=t&&(e.code=t),r)for(n in r)e[n]=r[n];return e}},
/*!**********************************************************************************!*\
  !*** ./node_modules/dag-cbor-sync/node_modules/multihashing-async/src/crypto.js ***!
  \**********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! js-sha3 */49),s=r(/*! murmurhash3js-revisited */133),o=r(/*! ./sha */1117),{fromNumberTo32BitBuf:a}=r(/*! ./utils */1118),c=e=>async t=>{switch(e){case"sha3-224":return n.from(i.sha3_224.arrayBuffer(t));case"sha3-256":return n.from(i.sha3_256.arrayBuffer(t));case"sha3-384":return n.from(i.sha3_384.arrayBuffer(t));case"sha3-512":return n.from(i.sha3_512.arrayBuffer(t));case"shake-128":return n.from(i.shake128.create(128).update(t).arrayBuffer());case"shake-256":return n.from(i.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return n.from(i.keccak224.arrayBuffer(t));case"keccak-256":return n.from(i.keccak256.arrayBuffer(t));case"keccak-384":return n.from(i.keccak384.arrayBuffer(t));case"keccak-512":return n.from(i.keccak512.arrayBuffer(t));case"murmur3-128":return n.from(s.x64.hash128(t),"hex");case"murmur3-32":return a(s.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};e.exports={identity:e=>n.from(e),sha1:o("sha1"),sha2256:o("sha2-256"),sha2512:o("sha2-512"),dblSha2256:o("dbl-sha2-256"),sha3224:c("sha3-224"),sha3256:c("sha3-256"),sha3384:c("sha3-384"),sha3512:c("sha3-512"),shake128:c("shake-128"),shake256:c("shake-256"),keccak224:c("keccak-224"),keccak256:c("keccak-256"),keccak384:c("keccak-384"),keccak512:c("keccak-512"),murmur3128:c("murmur3-128"),murmur332:c("murmur3-32"),addBlake:r(/*! ./blake */1119)}},
/*!***************************************************************************************!*\
  !*** ./node_modules/dag-cbor-sync/node_modules/multihashing-async/src/sha.browser.js ***!
  \***************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=self.crypto||self.msCrypto;e.exports=e=>{if("undefined"==typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return async t=>{switch(e){case"sha1":return n.from(await i.subtle.digest({name:"SHA-1"},t));case"sha2-256":return n.from(await i.subtle.digest({name:"SHA-256"},t));case"sha2-512":return n.from(await i.subtle.digest({name:"SHA-512"},t));case"dbl-sha2-256":{const e=await i.subtle.digest({name:"SHA-256"},t);return n.from(await i.subtle.digest({name:"SHA-256"},e))}default:throw new Error(`${e} is not a supported algorithm`)}}}},
/*!*********************************************************************************!*\
  !*** ./node_modules/dag-cbor-sync/node_modules/multihashing-async/src/utils.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0);e.exports={fromNumberTo32BitBuf:e=>{const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return n.from(t)}}},
/*!*********************************************************************************!*\
  !*** ./node_modules/dag-cbor-sync/node_modules/multihashing-async/src/blake.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{Buffer:n}=r(/*! buffer */0),i=r(/*! blakejs */50),s={init:i.blake2bInit,update:i.blake2bUpdate,digest:i.blake2bFinal},o={init:i.blake2sInit,update:i.blake2sUpdate,digest:i.blake2sFinal},a=(e,t)=>async r=>{const i=t.init(e,null);return t.update(i,r),n.from(t.digest(i))};e.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/pin/pin-set.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! multihashes */13),i=r(/*! cids */4),s=r(/*! protons */28),o=r(/*! fnv1a */1121),a=r(/*! varint */23),{DAGNode:c,DAGLink:u}=r(/*! ipld-dag-pb */29),h=r(/*! multicodec */27),{default:l}=r(/*! p-queue */45),f=r(/*! dag-cbor-links */456),d=r(/*! debug */1)("ipfs:pin:pin-set"),p=r(/*! ./pin.proto */1122),A=n.fromB58String("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),g=256,y=8192,m=s(p);function _(e){return new i(e).toBaseEncodedString()}e.exports=function(e){const r={hasDescendant:async(r,n)=>{if("dag-pb"!==r.codec&&"dag-cbor"!==r.codec)return!1;const{value:s}=await e.get(r,{preload:!1}),o=new l({concurrency:100});(i.isCID(n)||t.isBuffer(n))&&(n=_(n));let a=!1;const c={};function u(t){return async()=>{if(!a)try{const{value:r}=await e.get(t,{preload:!1});h(t,r)}catch(e){d(e)}}}function h(e,t){let r=[];"dag-pb"===e.codec?r=t.Links:"dag-cbor"===e.codec&&(r=function*(e){for(const[t,r]of f(e))yield r}(t));for(const t of r){const r="dag-pb"===e.codec?t.Hash:t[1],i=_(r);if(i===n)return o.clear(),void(a=!0);c[i]||(c[i]=!0,"dag-pb"!==r.codec&&"dag-cbor"!==r.codec||o.add(u(r)))}}return h(r,s),await o.onIdle(),a},storeSet:async n=>{const s=n.map(e=>(("string"==typeof e||t.isBuffer(e))&&(e=new i(e)),{key:e,data:null})),o=await r.storeItems(s);return{node:o,cid:await e.put(o,{version:0,format:h.DAG_PB,hashAlg:h.SHA2_256,preload:!1})}},storeItems:async r=>{return async function r(n,i){const s=m.Set.encode({version:1,fanout:g,seed:i});const l=t.concat([t.from(a.encode(s.length)),s]);const f=[];for(let e=0;e<g;e++)f.push(new u("",1,A));if(n.length<=y){const e=n.map(e=>({link:new u("",1,e.key),data:e.data||t.alloc(0)})).sort((e,r)=>t.compare(e.link.Hash.buffer,r.link.Hash.buffer)),r=f.concat(e.map(e=>e.link)),i=t.concat([l].concat(e.map(e=>e.data)));return new c(i,r)}{const e=n.reduce((e,r)=>{const n=function(e,r){const n=t.alloc(4);n.writeUInt32LE(e,0);const i=t.concat([n,t.from(_(r))]);return o(i.toString("binary"))}(i,r.key)%g;return e[n]=n in e?e[n].concat([r]):[r],e},[]);let s=0;for(const t of e){const e=await r(t,i+1);await d(e,s),s++}return new c(l,f)}async function d(t,r){const n={version:0,format:h.DAG_PB,hashAlg:h.SHA2_256,preload:!1},i=await e.put(t,n);f[r]=new u("",t.size,i)}}(r,0)},loadSet:async(t,n)=>{const i=t.Links.find(e=>e.Name===n);if(!i)throw new Error("No link found with name "+n);const s=await e.get(i.Hash,"",{preload:!1}),o=[];return await r.walkItems(s.value,{stepPin:e=>o.push(e.Hash)}),o},walkItems:async(t,{stepPin:n=(()=>{}),stepBin:i=(()=>{})})=>{const s=function(e){const t=e.Data,r=a.decode(t),n=a.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>t.length)throw new Error("Impossibly large set header length");const i=t.slice(n,r+n),s=m.Set.decode(i);if(1!==s.version)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:t.slice(r+n)}}(t);let o=0;for(const a of t.Links){if(o<s.header.fanout){const t=a.Hash.buffer;if(!A.equals(t)){i(a,o,s.data);const c=await e.get(t,"",{preload:!1});await r.walkItems(c.value,{stepPin:n,stepBin:i})}}else n(a,o,s.data);o++}},getInternalCids:async t=>{const n=[new i(A)],s=e=>n.push(e.Hash);for(const i of t.Links){n.push(i.Hash);const t=await e.get(i.Hash,"",{preload:!1});await r.walkItems(t.value,{stepBin:s})}return n}};return r}}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************!*\
  !*** ./node_modules/fnv1a/index.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e){for(var t=r.BASE,n=0,i=e.length;n<i;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}r.BASE=2166136261,e.exports=r},
/*!****************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/pin/pin.proto.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports='\n  syntax = "proto2";\n\n  package ipfs.pin;\n\n  option go_package = "pb";\n\n  message Set {\n    optional uint32 version = 1;\n    optional uint32 fanout = 2;\n    optional fixed32 seed = 3;\n  }\n'},
/*!*********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/object.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! callbackify */19),i=r(/*! ipld-dag-pb */29),s=i.DAGNode,o=i.DAGLink,a=r(/*! cids */4),c=r(/*! multihashes */13),u=r(/*! multicodec */27),h=r(/*! ipfs-unixfs */39),l=r(/*! err-code */22);function f(e,r){switch(r){case"json":return function(e){let r,n;try{const i=JSON.parse(e.toString());n=(i.Links||[]).map(e=>new o(e.Name||e.name,e.Size||e.size,c.fromB58String(e.Hash||e.hash||e.multihash))),r=t.from(i.Data)}catch(e){throw new Error("failed to parse JSON: "+e)}return new s(r,n)}(e);case"protobuf":return function(e){return i.util.deserialize(e)}(e);default:throw new Error(`unkown encoding: ${r}`)}}e.exports=function(e){async function r(t,r,n){n=n||{};const i=await e.object.get(t,n),s=await e._ipld.put(r(i),u.DAG_PB,{cidVersion:0,hashAlg:u.SHA2_256});return!1!==n.preload&&e._preload(s),s}return{new:n.variadic(async(r,n)=>{let i;if(n=n||{},r&&"string"!=typeof r&&(n=r,r=null),r){if("unixfs-dir"!==r)throw new Error("unknown template");i=new h("directory").marshal()}else i=t.alloc(0);const o=new s(i),a=await e._ipld.put(o,u.DAG_PB,{cidVersion:0,hashAlg:u.SHA2_256});return!1!==n.preload&&e._preload(a),a}),put:n.variadic(async(r,n)=>{const i=(n=n||{}).enc;let o;if(t.isBuffer(r))o=i?await f(r,i):new s(r);else if(s.isDAGNode(r))o=r;else{if("object"!=typeof r)throw new Error("obj not recognized");o=new s(r.Data,r.Links)}const a=await e._gcLock.readLock();try{const t=await e._ipld.put(o,u.DAG_PB,{cidVersion:0,hashAlg:u.SHA2_256});return!1!==n.preload&&e._preload(t),t}finally{a()}}),get:n.variadic(async(r,n)=>{let i,s;n=n||{};try{i=function(e,r){if("string"==typeof e)return"base58"!==r&&r?t.from(e,r):e;if(t.isBuffer(e))return e;if(a.isCID(e))return e.buffer;throw new Error("unsupported multihash")}(r,n.enc)}catch(e){throw l(e,"ERR_INVALID_MULTIHASH")}try{s=new a(i)}catch(e){throw l(e,"ERR_INVALID_CID")}return 1===n.cidVersion&&(s=s.toV1()),!1!==n.preload&&e._preload(s),e._ipld.get(s)}),data:n.variadic(async(t,r)=>{return r=r||{},(await e.object.get(t,r)).Data}),links:n.variadic(async(t,r)=>{r=r||{};const n=new a(t),i=await e.dag.get(n,r);if("raw"===n.codec)return[];if("dag-pb"===n.codec)return i.value.Links;if("dag-cbor"===n.codec)return function e(t,r=[]){for(const n in t){const i=t[n];if("/"===n&&1===Object.keys(t).length)try{r.push(new o("",0,new a(i)));continue}catch(e){}a.isCID(i)?r.push(new o("",0,i)):(Array.isArray(i)&&e(i,r),"object"!=typeof i||i instanceof String||e(i,r))}return r}(i);throw new Error(`Cannot resolve links from codec ${n.codec}`)}),stat:n.variadic(async(t,r)=>{r=r||{};const n=await e.object.get(t,r),s=i.util.serialize(n),o=await i.util.cid(s,{cidVersion:0}),a=s.length,c=n.Links.reduce((e,t)=>e+t.Tsize,0);return{Hash:o.toBaseEncodedString(),NumLinks:n.Links.length,BlockSize:a,LinksSize:a-n.Data.length,DataSize:n.Data.length,CumulativeSize:a+c}}),patch:{addLink:n.variadic(async(e,t,n)=>r(e,e=>(e.addLink(t),e),n)),rmLink:n.variadic(async(e,t,n)=>r(e,e=>(e.rmLink(t.Name||t.name),e),n)),appendData:n.variadic(async(e,n,i)=>r(e,e=>{const r=t.concat([e.Data,n]);return new s(r,e.Links)},i)),setData:n.variadic(async(e,t,n)=>r(e,e=>new s(t,e.Links),n))}}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!******************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/dag.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! callbackify */19),i=r(/*! cids */4),s=r(/*! async-iterator-all */123),o=r(/*! err-code */22),a=r(/*! multicodec */27);e.exports=function(e){return{put:n.variadic(async(t,r)=>{if((r=r||{}).cid&&(r.format||r.hashAlg))throw new Error("Can't put dag node. Please provide either `cid` OR `format` and `hashAlg` options.");if(r.format&&!r.hashAlg||!r.format&&r.hashAlg)throw new Error("Can't put dag node. Please provide `format` AND `hashAlg` options.");const n={format:a.DAG_CBOR,hashAlg:a.SHA2_256};if(r.format&&"string"==typeof r.format){const e=r.format.toUpperCase().replace(/-/g,"_");r.format=a[e]}if(r.hashAlg&&"string"==typeof r.hashAlg){const e=r.hashAlg.toUpperCase().replace(/-/g,"_");r.hashAlg=a[e]}void 0===(r=r.cid?r:Object.assign({},n,r)).version&&(r.format===a.DAG_PB&&r.hashAlg===a.SHA2_256?r.version=0:r.version=1);const i=await e._ipld.put(t,r.format,{hashAlg:r.hashAlg,cidVersion:r.version});return!1!==r.preload&&e._preload(i),i}),get:n.variadic(async(r,n,s)=>{if(s=s||{},void 0!==n&&"string"!=typeof n&&(s=n,n=void 0),"string"==typeof r){const e=r.split("/");try{r=new i(e[0])}catch(e){throw o(e,"ERR_INVALID_CID")}e.shift(),n=e.length>0?e.join("/"):n||"/"}else if(t.isBuffer(r))try{r=new i(r)}catch(e){throw o(e,"ERR_INVALID_CID")}if(!1!==s.preload&&e._preload(r),null==n||"/"===n){return{value:await e._ipld.get(r),remainderPath:""}}{let t;for await(const i of e._ipld.resolve(r,n)){if(s.localResolve)return i;t=i}return t}}),tree:n.variadic(async(t,r,n)=>{if(n=n||{},void 0!==r&&"string"!=typeof r&&(n=r,r=void 0),"string"==typeof t){const e=t.split("/");try{t=new i(e[0])}catch(e){throw o(e,"ERR_INVALID_CID")}e.shift(),r=e.length>0?e.join("/"):void 0}return!1!==n.preload&&e._preload(t),s(e._ipld.tree(t,r,n))})}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/swarm.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! callbackify */19),i=r(/*! ../utils */66).OFFLINE_ERROR;e.exports=function(e){return{peers:n.variadic(async t=>{if(t=t||{},!e.isOnline())throw new Error(i);const r=t.v||t.verbose,n=[];return Object.values(e._peerInfoBook.getAll()).forEach(e=>{const t=e.isConnected();if(!t)return;const i={addr:t,peer:e.id};r&&(i.latency="n/a"),n.push(i)}),n}),addrs:n(async()=>{if(!e.isOnline())throw new Error(i);return Object.values(e._peerInfoBook.getAll())}),localAddrs:n(async()=>{if(!e.isOnline())throw new Error(i);return e.libp2p.peerInfo.multiaddrs.toArray()}),connect:n(async t=>{if(!e.isOnline())throw new Error(i);return e.libp2p.dial(t)}),disconnect:n(async t=>{if(!e.isOnline())throw new Error(i);return e.libp2p.hangUp(t)}),filters:n(async()=>{throw new Error("Not implemented")})}}},
/*!*******************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/ping.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9),i=r(/*! pull-stream/pull */17);e.exports=function(e){return n((t,r,n)=>{"function"==typeof r&&(n=r,r={}),i(e.pingPullStream(t,r),i.collect(n))})}},
/*!*******************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/ping-pull-stream.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1),i=r(/*! ../utils */66).OFFLINE_ERROR,s=r(/*! peer-id */7),o=r(/*! pull-stream */25),a=r(/*! pull-pushable */64),c=n("ipfs:pingPullStream");function u(e){return Object.assign({success:!0,time:0,text:""},e)}c.error=n("ipfs:pingPullStream:error"),e.exports=function(e){return(t,r)=>{if(!e.isOnline())return o.error(new Error(i));r=Object.assign({count:10},r);const n=a();return function(e,t,r,n){let i,o;try{i=s.createFromB58String(r)}catch(e){return n(e)}try{o=e.peerBook.get(i)}catch(s){return c("Peer not found in peer book, trying peer routing"),t.push(u({text:`Looking up peer ${r}`})),e.peerRouting.findPeer(i,n)}n(null,o)}(e.libp2p,n,t,(t,i)=>{if(t)return c.error(t),void n.end(t);!function(e,t,r,n,i){e.ping(n,(e,s)=>{if(e)return i(e);let o=0,a=0;t.push(u({text:`PING ${n.id.toB58String()}`})),s.on("ping",e=>{if(t.push(u({time:e})),a+=e,++o>=r){const e=a/r;s.stop(),t.push(u({text:`Average latency: ${e}ms`})),t.end()}}),s.on("error",e=>{c.error(e),s.stop(),i(e)}),s.start()})}(e.libp2p,n,r.count,i,e=>{e&&(c.error(e),n.push(u({success:!1,text:e.toString()})),n.end())})}),n}}},
/*!***********************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/ping-readable-stream.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream-to-stream */68);e.exports=function(e){return(t,r)=>n.source(e.pingPullStream(t,r))}},
/*!******************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/pin.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! callbackify */19),i=r(/*! err-code */22),s=r(/*! multibase */72),{resolvePath:o}=r(/*! ../utils */66),a=r(/*! ./pin/pin-manager */455),c=a.PinTypes;e.exports=e=>{const t=e.dag,r=new a(e._repo,t);return{add:n.variadic(async(n,i)=>{const s=!1!==(i=i||{}).recursive,a=await o(e.object,n),c=async()=>{const e=[];for(const n of a){const o=n.toBaseEncodedString();if(s){if(r.recursivePins.has(o)){e.push(o);continue}await r.fetchCompleteDag(o,{preload:i.preload}),e.push(o)}else{if(r.recursivePins.has(o))throw new Error(`${o} already pinned recursively`);r.directPins.has(o)||await t.get(n,{preload:i.preload}),e.push(o)}}const n=s?r.recursivePins:r.directPins;return e.forEach(e=>n.add(e)),await r.flushPins(),e.map(e=>({hash:e}))};if(!Boolean(i.lock))return c();const u=await e._gcLock.readLock();try{await c()}finally{u()}}),rm:n.variadic(async(t,n)=>{const a=null==(n=n||{}).recursive||n.recursive;if(n.cidBase&&!s.names.includes(n.cidBase))throw i(new Error("invalid multibase"),"ERR_INVALID_MULTIBASE");const u=await o(e.object,t),h=await e._gcLock.readLock(),l=[];try{for(const e of u){const t=await r.isPinnedWithType(e,c.all),{pinned:n,reason:i}=t,s=e.toBaseEncodedString();if(!n)throw new Error(`${s} is not pinned`);switch(i){case c.recursive:if(!a)throw new Error(`${s} is pinned recursively`);l.push(s);break;case c.direct:l.push(s);break;default:throw new Error(`${s} is pinned indirectly under ${i}`)}}return l.forEach(e=>{a&&r.recursivePins.has(e)?r.recursivePins.delete(e):r.directPins.delete(e)}),await r.flushPins(),e.log(`Removed pins: ${l}`),l.map(e=>({hash:e}))}finally{h()}}),ls:n.variadic(async(t,n)=>{n=n||{};let i=c.all;if(t&&t.type&&(n=t,t=null),n.type){i=n.type,"string"==typeof n.type&&(i=n.type.toLowerCase());const e=a.checkPinType(i);if(e)throw e}if(t){const n=await o(e.object,t),s=[];for(const e of n){const{key:t,reason:n,pinned:o}=await r.isPinnedWithType(e,i);if(o)switch(n){case c.direct:case c.recursive:s.push({hash:t,type:n});break;default:s.push({hash:t,type:`${c.indirect} through ${n}`})}}if(!s.length)throw new Error(`path '${t}' is not pinned`);return s}let s=[];if(i!==c.direct&&i!==c.all||(s=s.concat(Array.from(r.directPins).map(e=>({type:c.direct,hash:e})))),i!==c.recursive&&i!==c.all||(s=s.concat(Array.from(r.recursivePins).map(e=>({type:c.recursive,hash:e})))),i===c.indirect||i===c.all){const e=await r.getIndirectKeys(n);return s=s.filter(({hash:t})=>!e.includes(t)||e.includes(t)&&!r.directPins.has(t)).concat(e.map(e=>({type:c.indirect,hash:e})))}return s}),pinManager:r}}},
/*!**********************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/index.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=e=>{const t={add:r(/*! ./add */457)(e),addFromFs:r(/*! ./add-from-fs */1131)(e),addFromStream:r(/*! ./add-from-stream */1133)(e),addFromURL:r(/*! ./add-from-url */1134)(e),addPullStream:r(/*! ./add-pull-stream */1135)(e),addReadableStream:r(/*! ./add-readable-stream */1136)(e),_addAsyncIterator:r(/*! ./add-async-iterator */1142)(e),cat:r(/*! ./cat */1171)(e),catPullStream:r(/*! ./cat-pull-stream */1172)(e),catReadableStream:r(/*! ./cat-readable-stream */1180)(e),get:r(/*! ./get */1181)(e),getPullStream:r(/*! ./get-pull-stream */1182)(e),getReadableStream:r(/*! ./get-readable-stream */1183)(e),ls:r(/*! ./ls */1184)(e),lsPullStream:r(/*! ./ls-pull-stream */1185)(e),lsReadableStream:r(/*! ./ls-readable-stream */1186)(e),refs:r(/*! ./refs */467)(e),refsReadableStream:r(/*! ./refs-readable-stream */1187)(e),refsPullStream:r(/*! ./refs-pull-stream */1188)(e)};return t.refs.local=r(/*! ./refs-local */1190)(e),t.refs.localReadableStream=r(/*! ./refs-local-readable-stream */1191)(e),t.refs.localPullStream=r(/*! ./refs-local-pull-stream */1192)(e),t}},
/*!****************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/add-from-fs.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=e=>r(/*! ../../runtime/add-from-fs-nodejs */1132)(e)},
/*!*******************************************************************!*\
  !*** ./node_modules/ipfs/src/core/runtime/add-from-fs-browser.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! callbackify */19);e.exports=()=>n(async()=>{throw new Error("not available in the browser")})},
/*!********************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/add-from-stream.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=e=>r(/*! ./add */457)(e)},
/*!*****************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/add-from-url.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const{URL:n}=r(/*! iso-url */132),i=r(/*! promise-nodeify */254),{default:s}=r(/*! ky-universal */255);e.exports=e=>{return(r,o,a)=>("function"==typeof o&&(a=o,o={}),i((async(r,i)=>{i=i||{};const o=await s.get(r),a=decodeURIComponent(new n(o.url).pathname.split("/").pop()),c=t.from(await o.arrayBuffer());return e.add({content:c,path:a},i)})(r,o),a))}}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/add-pull-stream.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async-iterator-to-pull-stream */69);e.exports=function(e){return function(t){return n.transform(r=>e._addAsyncIterator(r,t))}}},
/*!************************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/add-readable-stream.js ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! it-to-stream */1137);e.exports=function(e){return function(t){return n.transform(r=>e._addAsyncIterator(r,t),{objectMode:!0})}}},
/*!************************************************!*\
  !*** ./node_modules/it-to-stream/src/index.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./transform */1138),i=r(/*! ./duplex */459);function s(e,t){return i({source:e},t)}e.exports=s,e.exports.readable=s,e.exports.writable=function(e,t){return i({sink:e},t)},e.exports.transform=n,e.exports.duplex=i},
/*!****************************************************!*\
  !*** ./node_modules/it-to-stream/src/transform.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! ./duplex */459),i=r(/*! p-defer */460);e.exports=function(e,t){const{promise:r,resolve:s}=i(),o=async function*(){const e=await r;for await(const t of e)yield t}();return n({sink:t=>s(e(t)),source:o},t)}},
/*!**************************************!*\
  !*** ./node_modules/p-fifo/index.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! fast-fifo */1140),i=r(/*! p-defer */460);e.exports=class{constructor(){this._buffer=new n,this._waitingConsumers=new n}push(e){const{promise:t,resolve:r}=i();return this._buffer.push({chunk:e,resolve:r}),this._consume(),t}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){const e=this._waitingConsumers.shift(),t=this._buffer.shift();e.resolve(t.chunk),t.resolve()}}shift(){const{promise:e,resolve:t}=i();return this._waitingConsumers.push({resolve:t}),this._consume(),e}isEmpty(){return this._buffer.isEmpty()}}},
/*!*****************************************!*\
  !*** ./node_modules/fast-fifo/index.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! ./fixed-size */1141);e.exports=class{constructor(e){this.hwm=e||16,this.head=new n(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){const t=this.head;this.head=t.next=new n(2*this.head.buffer.length),this.head.push(e)}}shift(){const e=this.tail.shift();if(void 0===e&&this.tail.next){const e=this.tail.next;return this.tail.next=null,this.tail=e,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}},
/*!**********************************************!*\
  !*** ./node_modules/fast-fifo/fixed-size.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=class{constructor(e){if(!(e>0)||0!=(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}},
/*!***********************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/add-async-iterator.js ***!
  \***********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ipfs-unixfs-importer */461),i=r(/*! ipfs-utils/src/files/normalise-input */1167),{parseChunkerString:s}=r(/*! ./utils */125),o=r(/*! it-pipe */1170);function a(){}r(/*! debug */1)("ipfs:add").error=r(/*! debug */1)("ipfs:add:error"),e.exports=function(e){return async function*(r,c){const u=s((c=c||{}).chunker),h=Object.assign({},{shardSplitThreshold:e._options.EXPERIMENTAL.sharding?1e3:1/0},c,{strategy:"balanced",chunker:u.chunker,chunkerOptions:u.chunkerOptions});h.hashAlg&&1!==h.cidVersion&&(h.cidVersion=1),h.trickle&&(h.strategy="trickle"),delete h.trickle;let l=0;const f=h.progress||a;h.progress=e=>{f(l+=e)};const d=o(i(r),function(e,t){return async function*(r){yield*n(r,e._ipld,t)}}(e,h),function(e,r){return async function*(n){for await(const i of n){let n=i.cid;const s=n.toBaseEncodedString();let o=i.path?i.path:s;if(r.wrapWithDirectory&&!i.path&&(o=""),r.onlyHash)return void(yield{path:o,hash:s,size:i.unixfs.fileSize()});const a=await e.object.get(i.cid,Object.assign({},r,{preload:!1}));1===r.cidVersion&&(n=n.toV1());let c=a.size;t.isBuffer(a)&&(c=a.length),yield{path:o,hash:s,size:c}}}}(e,h),function(e,t){return async function*(r){for await(const n of r){(!n.path||t.wrapWithDirectory?""===n.path:!n.path.includes("/"))&&!t.onlyHash&&!1!==t.preload&&e._preload(n.hash),yield n}}}(e,h),function(e,t){return async function*(r){for await(const n of r){const r=!("pin"in t)||t.pin,i=!n.path.includes("/");r&&i&&!t.onlyHash&&!t.hashAlg&&await e.pin.add(n.hash,{preload:!1,lock:!1}),yield n}}}(e,h)),p=await e._gcLock.readLock();try{yield*d}finally{p()}}}}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/dag-builder/index.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./dir */1144),i=r(/*! ./file */1145),s=r(/*! ../chunker */1149),o=r(/*! ./validate-chunks */1156);e.exports=async function*(e,t,r){for await(const a of e)if(a.path&&("./"===a.path.substring(0,2)&&(r.wrapWithDirectory=!0),a.path=a.path.split("/").filter(e=>e&&"."!==e).join("/")),a.content){let e=a.content;(e[Symbol.asyncIterator]||e[Symbol.iterator])&&void 0===e.length||(e={[Symbol.iterator]:function*(){yield a.content}});const n=s(r.chunker,o(e),r.chunkerOptions);yield i(a,n,t,r)}else yield n(a,t,r)}},
/*!******************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/dag-builder/dir.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-unixfs */39),i=r(/*! ../utils/persist */167),{DAGNode:s}=r(/*! ipld-dag-pb */29);e.exports=async(e,t,r)=>{const o=new n("directory"),a=new s(o.marshal(),[]);return{cid:await i(a,t,r),path:e.path,unixfs:o,node:a}}},
/*!*************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/dag-builder/file/index.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */124),i=r(/*! ipfs-unixfs */39),s=r(/*! ../../utils/persist */167),{DAGNode:o,DAGLink:a}=r(/*! ipld-dag-pb */29),c=r(/*! async-iterator-all */123),u={flat:r(/*! ./flat */1146),balanced:r(/*! ./balanced */1147),trickle:r(/*! ./trickle */1148)};e.exports=async(e,t,r,h)=>{const l=u[h.strategy];if(!l)throw n(new Error(`Unknown importer build strategy name: ${h.strategy}`),"ERR_BAD_STRATEGY");const f=await c(l(async function*(e,t,r){let n,a=-1;for await(const c of e){let e,u;a++,r.progress(c.length);const h={...r};r.rawLeaves?(e=c,h.codec="raw",h.cidVersion=1):(u=new i(r.leafType,c),e=new o(u.marshal()));const l={cid:await s(e,t,h),unixfs:u,node:e};0!==a?(1===a&&(yield n,n=null),yield l):n=l}n&&(n.single=!0,yield n)}(t,r,h),((e,t,r)=>(async function(n){if(1===n.length&&n[0].single&&r.reduceSingleLeafToSelf){const t=n[0];return{cid:t.cid,path:e.path,name:(e.path||"").split("/").pop(),unixfs:t.unixfs,node:t.node}}const c=new i("file"),u=n.filter(e=>!("raw"!==e.cid.codec||!e.node.length)||(!(e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs.data.length))).map(e=>"raw"===e.cid.codec?(c.addBlockSize(e.node.length),new a(e.name,e.node.length,e.cid)):(e.unixfs.data?c.addBlockSize(e.unixfs.data.length):c.addBlockSize(e.unixfs.fileSize()),new a(e.name,e.node.size,e.cid))),h=new o(c.marshal(),u);return{cid:await s(h,t,r),path:e.path,unixfs:c,node:h,size:h.size}}))(e,r,h),h.builderOptions));if(f.length>1)throw n(new Error("expected a maximum of 1 roots and got "+f.length),"ETOOMANYROOTS");return f[0]}},
/*!************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/dag-builder/file/flat.js ***!
  \************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async-iterator-batch */257);e.exports=async function*(e,t){const r=[];for await(const i of n(e,1/0))r.push(await t(i));yield r[0]}},
/*!****************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/dag-builder/file/balanced.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async-iterator-batch */257);e.exports=async function*(e,t,r){yield await async function e(t,r,i){const s=[];for await(const e of n(t,i.maxChildrenPerNode))s.push(await r(e));if(s.length>1)return e(s,r,i);return s[0]}(e,t,r)}},
/*!***************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/dag-builder/file/trickle.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async-iterator-batch */257);e.exports=function*(e,t,r){yield async function(e,t,r){let o,a=0,c=1,u=o=new s(r.layerRepeat);for await(const s of n(e,r.maxChildrenPerNode))u.isFull()&&(u!==o&&o.addChild(await u.reduce(t)),a&&a%r.layerRepeat==0&&c++,u=new i(c,r.layerRepeat,a),a++),u.append(s);u&&u!==o&&o.addChild(await u.reduce(t));return o.reduce(t)}(e,t,r)};class i{constructor(e,t,r){this.maxDepth=e,this.layerRepeat=t,this.currentDepth=1,this.iteration=r,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const e=this._findParent(this.node,this.currentDepth);return!e||(this._addNextNodeToParent(e),!1)}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let r=[];return e.children.length&&(r=await Promise.all(e.children.filter(e=>e.data).map(e=>this._reduce(e,t)))),t(e.data.concat(r))}_findParent(e,t){const r=e.parent;if(r&&0!==r.depth)return r.children.length!==r.maxChildren&&r.maxChildren?r:this._findParent(r,t)}}class s extends i{constructor(e){super(0,e),this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e(this.root.data.concat(this.root.children))}}},
/*!****************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/chunker/index.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */124),i={fixed:r(/*! ../chunker/fixed-size */1150),rabin:r(/*! ../chunker/rabin */1151)};e.exports=(e,t,r)=>{const s=i[e];if(!s)throw n(new Error(`Unknkown chunker named ${e}`),"ERR_UNKNOWN_CHUNKER");return s(t,r)}},
/*!*********************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/chunker/fixed-size.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! bl */462);e.exports=async function*(e,t){let r=new n,i=0,s=!1;const o=t.maxChunkSize;for await(const t of e)for(r.append(t),i+=t.length;i>=o;)if(yield r.slice(0,o),s=!0,o===r.length)r=new n,i=0;else{const e=new n;e.append(r.shallowSlice(o)),r=e,i-=o}s&&!i||(yield r.slice(0,i))}},
/*!****************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/chunker/rabin.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! bl */462),{create:i}=r(/*! rabin-wasm */1152),s=r(/*! err-code */124);e.exports=async function*(e,t){const r=o();let n,i,a;if(t.minChunkSize&&t.maxChunkSize&&t.avgChunkSize)a=t.avgChunkSize,n=t.minChunkSize,i=t.maxChunkSize;else{if(!t.avgChunkSize)throw s(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");n=(a=t.avgChunkSize)/3,i=a+a/2}if(n<16)throw s(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");i<n&&(i=n),a<n&&(a=n);const c=Math.floor(Math.log2(a));for await(const s of r(e,{min:n,max:i,bits:c,window:t.window,polynomial:t.polynomial}))yield s};const o=()=>(async function*(e,r){const s=await i(r.bits,r.min,r.max,r.window),o=new n;let a=[];for await(const r of e){o.append(r),a.push(r);const e=s.fingerprint(t.concat(a));a=[];for(let t=0;t<e.length;t++){var c=e[t],u=o.slice(0,c);o.consume(c),yield u}}o.length&&(yield o.slice(0))})}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!**********************************************!*\
  !*** ./node_modules/rabin-wasm/src/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! ./rabin */1153),i=r(/*! ../dist/rabin-wasm.node.js */1154);e.exports={Rabin:n,create:async(e,t,r,s)=>{const o=await i();return new n(e,t,r,s,o)}}},
/*!**********************************************!*\
  !*** ./node_modules/rabin-wasm/src/rabin.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=class{constructor(e=12,t=8192,r=32768,n=64,i){this.bits=e,this.min=t,this.max=r,this.asModule=i,this.rabin=new i.Rabin(e,t,r,n)}fingerprint(e){const t=new Int32Array(Math.ceil(e.length/this.min)),r=this.asModule.newArray(t),n=this.asModule.newArray(e);this.rabin.fingerprint(n,r);const i=this.asModule.getArray(Int32Array,r);this.asModule.freeArray(r),this.asModule.freeArray(n);const s=[];for(let e=0;e<i.length&&0!==i[e];e++)s[e]=i[e];return s}}},
/*!****************************************************!*\
  !*** ./node_modules/rabin-wasm/dist/rabin-wasm.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const{instantiateStreaming:n}=r(/*! assemblyscript/lib/loader */1155);function i(e={}){if(!i.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,90,16,96,0,0,96,2,127,127,1,127,96,4,127,127,127,127,0,96,1,127,1,127,96,3,127,127,127,0,96,1,126,1,127,96,2,126,126,1,126,96,5,127,127,127,127,127,1,127,96,3,127,127,126,0,96,2,127,127,1,126,96,3,127,127,127,1,127,96,1,127,0,96,2,127,127,0,96,1,127,1,126,96,2,127,126,0,96,0,1,127,2,13,1,3,101,110,118,5,97,98,111,114,116,0,2,3,57,56,3,3,12,3,3,15,5,6,1,8,4,1,9,11,7,4,10,10,11,0,0,0,3,12,3,12,3,12,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,4,4,1,112,0,1,5,3,1,0,1,6,26,5,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,7,253,6,44,6,109,101,109,111,114,121,2,0,5,116,97,98,108,101,1,0,6,100,101,103,114,101,101,0,7,3,109,111,100,0,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,23,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,24,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,25,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,26,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,27,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,28,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,29,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,30,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,31,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,32,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,33,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,34,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,35,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,36,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,37,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,38,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,39,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,40,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,41,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,42,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,43,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,44,27,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,95,100,101,103,114,101,101,0,45,27,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,95,100,101,103,114,101,101,0,46,26,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,95,115,104,105,102,116,0,47,26,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,95,115,104,105,102,116,0,48,22,82,97,98,105,110,35,103,101,116,58,97,118,101,114,97,103,101,95,98,105,116,115,0,49,22,82,97,98,105,110,35,115,101,116,58,97,118,101,114,97,103,101,95,98,105,116,115,0,50,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,51,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,52,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,53,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,54,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,55,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,56,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,15,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,16,14,109,101,109,111,114,121,46,99,111,109,112,97,114,101,0,18,15,109,101,109,111,114,121,46,97,108,108,111,99,97,116,101,0,4,11,109,101,109,111,114,121,46,102,114,101,101,0,19,12,109,101,109,111,114,121,46,114,101,115,101,116,0,20,8,1,21,9,7,1,0,65,0,11,1,22,10,188,30,56,104,1,3,127,32,0,65,128,128,128,128,4,75,4,64,0,11,35,1,34,1,32,0,65,1,32,0,65,1,75,27,106,65,7,106,65,120,113,34,0,63,0,34,2,65,16,116,75,4,64,32,2,32,0,32,1,107,65,255,255,3,106,65,128,128,124,113,65,16,118,34,3,32,2,32,3,74,27,64,0,65,0,72,4,64,32,3,64,0,65,0,72,4,64,0,11,11,11,32,0,36,1,32,1,11,51,1,1,127,32,0,65,248,255,255,255,3,75,4,64,65,0,65,200,0,65,26,65,2,16,0,0,11,65,1,65,32,32,0,65,7,106,103,107,116,16,1,34,1,32,0,54,2,0,32,1,11,145,3,1,1,127,32,1,69,4,64,15,11,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,4,64,15,11,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,4,64,15,11,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,4,64,15,11,65,0,32,0,107,65,3,113,34,2,32,0,106,34,0,65,0,54,2,0,32,1,32,2,107,65,124,113,34,1,32,0,106,65,4,107,65,0,54,2,0,32,1,65,8,77,4,64,15,11,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,4,64,15,11,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,65,4,113,65,24,106,34,2,32,0,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,6,0,32,0,16,1,11,76,1,1,127,65,128,16,16,2,34,1,65,8,106,65,128,16,16,3,32,0,69,4,64,65,12,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,32,1,54,2,0,32,0,65,0,54,2,4,32,0,65,128,16,54,2,8,32,0,11,8,0,65,12,16,1,16,5,11,70,2,1,127,1,126,66,128,128,128,128,128,128,128,128,128,127,33,2,3,64,2,64,32,1,65,192,0,78,13,0,32,0,32,2,131,66,0,86,4,64,65,63,32,1,107,15,5,32,2,66,1,136,33,2,32,1,65,1,106,33,1,12,2,11,0,11,11,65,127,11,175,2,2,1,127,2,126,3,64,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,0,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,2,127,32,1,33,4,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,3,32,4,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,78,4,64,32,1,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,0,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,1,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,107,172,134,32,0,133,33,0,12,1,11,11,32,0,11,96,1,1,127,32,1,65,248,255,255,255,3,75,4,64,65,0,65,8,65,23,65,34,16,0,0,11,32,1,16,2,34,2,65,8,106,32,1,16,3,32,0,69,4,64,65,12,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,32,2,54,2,0,32,0,65,0,54,2,4,32,0,32,1,54,2,8,32,0,11,49,0,32,1,32,0,40,2,8,65,3,118,79,4,64,65,0,65,8,65,50,65,63,16,0,0,11,32,0,40,2,4,32,0,40,2,0,32,1,65,3,116,106,106,32,2,55,3,8,11,43,0,32,1,32,0,40,2,8,79,4,64,65,0,65,8,65,50,65,63,16,0,0,11,32,0,40,2,4,32,1,32,0,40,2,0,106,106,32,2,58,0,8,11,41,0,32,1,32,0,40,2,8,79,4,64,65,0,65,8,65,39,65,63,16,0,0,11,32,0,40,2,4,32,1,32,0,40,2,0,106,106,45,0,8,11,47,0,32,1,32,0,40,2,8,65,3,118,79,4,64,65,0,65,8,65,39,65,63,16,0,0,11,32,0,40,2,4,32,0,40,2,0,32,1,65,3,116,106,106,41,3,8,11,166,10,2,3,127,5,126,35,2,69,4,64,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,4,32,0,41,3,72,33,6,3,64,2,127,32,4,33,5,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,107,172,134,32,5,133,33,4,12,1,11,11,65,0,33,1,3,64,32,1,32,0,40,2,4,65,1,107,72,4,64,32,5,66,8,134,33,4,32,0,41,3,72,33,6,3,64,2,127,32,4,33,5,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,107,172,134,32,5,133,33,4,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,35,4,32,2,32,5,16,10,32,2,65,1,106,33,2,12,1,11,11,2,127,32,0,41,3,72,33,4,66,128,128,128,128,128,128,128,128,128,127,33,5,65,0,33,2,3,64,32,2,65,192,0,72,4,64,65,63,32,2,107,32,4,32,5,131,66,0,86,13,2,26,32,5,66,1,136,33,5,32,2,65,1,106,33,2,12,1,11,11,65,127,11,172,33,8,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,3,33,3,32,2,172,32,8,134,33,5,32,0,41,3,72,33,6,3,64,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,107,172,134,32,5,133,33,5,12,1,11,11,32,3,32,2,32,2,172,32,8,134,32,5,132,16,10,32,2,65,1,106,33,2,12,1,11,11,65,1,36,2,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,65,0,16,11,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,12,33,1,32,0,40,2,0,32,0,40,2,8,65,1,16,11,32,0,32,0,41,3,40,35,4,32,1,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,1,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,66,1,132,55,3,40,32,0,32,0,41,3,40,35,3,32,1,65,255,1,113,16,13,133,55,3,40,11,234,1,0,32,0,69,4,64,65,128,1,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,66,0,55,3,104,32,0,66,0,55,3,112,32,0,66,0,55,3,120,32,0,32,1,173,55,3,96,32,0,32,2,173,55,3,104,32,0,32,3,173,55,3,112,32,0,65,12,16,1,32,4,16,9,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,0,41,3,96,134,66,1,125,55,3,120,32,0,66,243,130,183,218,216,230,232,30,55,3,72,32,0,66,53,55,3,80,32,0,32,0,41,3,80,66,8,125,55,3,88,32,0,16,14,32,0,11,206,4,1,5,127,32,1,40,2,8,33,4,32,1,40,2,0,65,8,106,33,5,3,64,2,127,65,0,33,3,3,64,32,3,32,4,72,4,64,32,3,32,5,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,12,33,6,32,0,40,2,0,32,0,40,2,8,32,1,16,11,32,0,32,0,41,3,40,35,4,32,6,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,6,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,32,1,173,132,55,3,40,32,0,32,0,41,3,40,35,3,32,6,65,255,1,113,16,13,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,2,127,32,0,41,3,16,32,0,41,3,104,90,34,1,4,64,32,0,41,3,40,32,0,41,3,120,131,66,0,81,33,1,11,32,1,69,11,4,127,32,0,41,3,16,32,0,41,3,112,90,5,32,1,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,65,0,16,11,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,12,33,1,32,0,40,2,0,32,0,40,2,8,65,1,16,11,32,0,32,0,41,3,40,35,4,32,1,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,1,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,66,1,132,55,3,40,32,0,32,0,41,3,40,35,3,32,1,65,255,1,113,16,13,133,55,3,40,32,3,65,1,106,12,3,5,32,3,65,1,106,33,3,12,2,11,0,11,11,65,127,11,34,1,65,0,78,4,64,32,4,32,1,107,33,4,32,1,32,5,106,33,5,32,7,34,1,65,1,106,33,7,32,2,40,2,4,32,2,40,2,0,32,1,65,2,116,106,106,32,0,41,3,56,62,2,8,32,2,40,2,4,32,2,40,2,0,32,1,65,2,116,106,106,40,2,8,26,12,1,11,11,11,88,1,1,127,32,0,32,1,70,4,64,65,0,15,11,3,64,32,2,65,0,71,34,3,4,64,32,0,45,0,0,32,1,45,0,0,70,33,3,11,32,3,4,64,32,2,65,1,107,33,2,32,0,65,1,106,33,0,32,1,65,1,106,33,1,12,1,11,11,32,2,4,127,32,0,45,0,0,32,1,45,0,0,107,5,65,0,11,11,10,0,32,0,32,1,32,2,16,17,11,3,0,1,11,6,0,35,0,36,1,11,19,0,65,136,1,36,0,35,0,36,1,16,6,36,3,16,6,36,4,11,3,0,1,11,7,0,32,0,40,2,0,11,9,0,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,7,0,32,0,41,3,104,11,9,0,32,0,32,1,55,3,104,11,7,0,32,0,41,3,112,11,9,0,32,0,32,1,55,3,112,11,7,0,32,0,41,3,120,11,9,0,32,0,32,1,55,3,120,11,11,128,1,2,0,65,8,11,57,27,0,0,0,126,0,108,0,105,0,98,0,47,0,105,0,110,0,116,0,101,0,114,0,110,0,97,0,108,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,200,0,11,59,28,0,0,0,126,0,108,0,105,0,98,0,47,0,105,0,110,0,116,0,101,0,114,0,110,0,97,0,108,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,32,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,14,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return n(new Response(new Blob([t],{type:"application/wasm"})),e)}i.supported="undefined"!=typeof WebAssembly,e.exports=i},
/*!*********************************************************!*\
  !*** ./node_modules/assemblyscript/lib/loader/index.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n="undefined"!=typeof BigUint64Array,i=Symbol();function s(e,t,r){var n=r+4>>>1,i=e[r>>>2],s=[];for(;i>1024;){let e=t[n+1024-1],r=e>=55296&&e<56320?1023:1024,o=t.subarray(n,n+=r);s.push(String.fromCharCode.apply(String,o)),i-=r}return s.join("")+String.fromCharCode.apply(String,t.subarray(n,n+i))}function o(e){var t={};function r(e,t){if(!e)return"<yet unknown>";var r=e.buffer;return s(new Uint32Array(r),new Uint16Array(r),t)}var n=e.env=e.env||{};return n.abort=n.abort||function(e,i,s,o){var a=t.memory||n.memory;throw Error("abort: "+r(a,e)+" at "+r(a,i)+":"+s+":"+o)},n.trace=n.trace||function(e,i){var s=t.memory||n.memory;console.log("trace: "+r(s,e)+(i?" ":"")+Array.prototype.slice.call(arguments,2,2+i).join(", "))},e.Math=e.Math||Math,e.Date=e.Date||Date,t}function a(e,t){var r,i,o,a,u,l,f,d,p,A,g,y=t.exports,m=y.memory,_=y["memory.allocate"],b=y["memory.fill"],w=y["memory.free"],v=y.table,E=y._setargc||function(){};function S(){r!==m.buffer&&(r=m.buffer,i=new Int8Array(r),o=new Uint8Array(r),a=new Int16Array(r),u=new Uint16Array(r),l=new Int32Array(r),f=new Uint32Array(r),n&&(A=new BigInt64Array(r),g=new BigUint64Array(r)),d=new Float32Array(r),p=new Float64Array(r))}return S(),e.newString=function(e){var t=e.length,r=_(4+(t<<1)),n=4+r>>>1;S(),f[r>>>2]=t;for(let r=0;r<t;++r)u[n+r]=e.charCodeAt(r);return r},e.getString=function(e){return S(),s(f,u,e)},e.newArray=function(e,t,n){var i=e.constructor;i===Function?(i=e,e=null):void 0===t&&(t=e.length);var s=i.BYTES_PER_ELEMENT;if(!s)throw Error("not a typed array");var o=s*t,a=_(12),c=_(function(e){return 1<<32-Math.clz32(e+8-1)}(o));if(S(),f[a>>>2]=c,f[a+4>>>2]=0,f[a+8>>>2]=o,f[c>>>2]=o,f[c+4>>>2]=0,e){if(new i(r,c+8,t).set(e),e.length<t&&!n){let t=s*e.length;b(c+8+t,0,o-t)}}else n||b(c+8,0,o);return a},e.getArray=function(e,t){var n=e.BYTES_PER_ELEMENT;if(!n)throw Error("not a typed array");S();var i=f[t>>>2],s=f[t+4>>>2],o=f[t+8>>>2];return new e(r,i+8+s,(o-s)/n)},e.freeArray=function(e){S();var t=f[e>>>2];w(t),w(e)},e.newFunction=function(e){"function"==typeof e.original&&(e=e.original);var t=v.length;return v.grow(1),v.set(t,e),t},e.getFunction=function(e){return c(v.get(e),E)},e.memory=e.memory||m,e.table=e.table||v,h(y,Object.defineProperties(e,{I8:{get:function(){return S(),i}},U8:{get:function(){return S(),o}},I16:{get:function(){return S(),a}},U16:{get:function(){return S(),u}},I32:{get:function(){return S(),l}},U32:{get:function(){return S(),f}},I64:{get:function(){return S(),A}},U64:{get:function(){return S(),g}},F32:{get:function(){return S(),d}},F64:{get:function(){return S(),p}}}))}function c(e,t){var r=(...r)=>(t(r.length),e(...r));return r.original=e,r}function u(e,t){return a(o(t||(t={})),new WebAssembly.Instance(e,t))}function h(e,t){var r=t?Object.create(t):{},n=e._setargc||function(){};function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}for(let t in e){if(!s(e,t))continue;let o=e[t],a=t.split("."),u=r;for(;a.length>1;){let e=a.shift();s(u,e)||(u[e]={}),u=u[e]}let h=a[0],l=h.indexOf("#");if(l>=0){let r=h.substring(0,l),a=u[r];if(void 0===a||!a.prototype){let e=function(...t){return e.wrap(e.prototype.constructor(0,...t))};e.prototype={},e.wrap=function(t){return Object.create(e.prototype,{[i]:{value:t,writable:!1}})},a&&Object.getOwnPropertyNames(a).forEach(t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))),u[r]=e}if(h=h.substring(l+1),u=u[r].prototype,/^(get|set):/.test(h)){if(!s(u,h=h.substring(4))){let r=e[t.replace("set:","get:")],n=e[t.replace("get:","set:")];Object.defineProperty(u,h,{get:function(){return r(this[i])},set:function(e){n(this[i],e)},enumerable:!0})}}else"constructor"===h?u[h]=c(o,n):Object.defineProperty(u,h,{value:function(...e){return n(e.length),o(this[i],...e)}})}else/^(get|set):/.test(h)?s(u,h=h.substring(4))||Object.defineProperty(u,h,{get:e[t.replace("set:","get:")],set:e[t.replace("get:","set:")],enumerable:!0}):u[h]="function"==typeof o?c(o,n):o}return r}t.instantiate=u,t.instantiateBuffer=function(e,t){return u(new WebAssembly.Module(e),t)},t.instantiateStreaming=async function(e,t){return a(o(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance)},t.demangle=h},
/*!******************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/dag-builder/validate-chunks.js ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! err-code */124);e.exports=async function*(e){for await(const r of e){if(void 0===r.length)throw n(new Error("Content was invalid"),"ERR_INVALID_CONTENT");"string"==typeof r||r instanceof String?yield t.from(r,"utf8"):Array.isArray(r)?yield t.from(r):yield r}}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/tree-builder.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./dir-flat */1158),i=r(/*! ./flat-to-shard */1159),s=r(/*! ./dir */258),o=r(/*! ./utils/to-path-components */1165),a=r(/*! err-code */124),c=r(/*! async-iterator-first */1166);async function u(e,t,r){const a=o(e.path||""),c=a.length-1;let u=t,h="";for(let o=0;o<a.length;o++){const l=a[o];h+=`${h?"/":""}${l}`;const f=o===c;if(u.dirty=!0,u.cid=null,u.size=null,f)await u.put(l,e),t=await i(null,u,r.shardSplitThreshold,r);else{let e=await u.get(l);e&&e instanceof s||(e=new n({dir:!0,parent:u,parentKey:l,path:h,dirty:!0,flat:!0},r)),await u.put(l,e),u=e}}return t}e.exports=async function*(e,t,r){let i=new n({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r);for await(const t of e)i=await u(t,i,r),yield t;if(i){if(!r.wrapWithDirectory){if(i.childCount()>1)throw a(new Error("detected more than one root"),"ERR_MORE_THAN_ONE_ROOT");const e=await c(i.eachChildSeries());if(!e)return;i=e.child}if(!i.dir)return;for await(const e of i.flush(i.path,t))yield e}}},
/*!***********************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/dir-flat.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{DAGLink:n,DAGNode:i}=r(/*! ipld-dag-pb */29),s=r(/*! ipfs-unixfs */39),o=r(/*! ./dir */258),a=r(/*! ./utils/persist */167);e.exports=class extends o{constructor(e,t){super(e,t),this._children={}}put(e,t){this.cid=void 0,this.size=void 0,this._children[e]=t}get(e){return this._children[e]}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const r=e[t];yield{key:r,child:this._children[r]}}}async*flush(e,t){const r=Object.keys(this._children),o=[];for(let e=0;e<r.length;e++){let i=this._children[r[e]];if("function"==typeof i.flush)for await(const e of i.flush(i.path,t))i=e,yield i;o.push(new n(r[e],i.node.length||i.node.size,i.cid))}const c=new s("directory"),u=new i(c.marshal(),o),h=await a(u,t,this.options);this.cid=h,this.size=u.size,yield{cid:h,unixfs:c,path:e,node:u}}}},
/*!****************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/flat-to-shard.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./dir-sharded */168);e.exports=async function e(t,r,i,s){let o=r;r.flat&&r.directChildrenCount()>=i&&(o=await async function(e,t){const r=new n({root:e.root,dir:!0,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:!1},t);for await(const{key:t,child:n}of e.eachChildSeries())await r.put(t,n);return r}(r,s));const a=o.parent;return a&&(o!==r&&(t&&(t.parent=o),await a.put(o.parentKey,o)),a)?e(o,a,i,s):o}},
/*!*************************************************!*\
  !*** ./node_modules/hamt-sharding/src/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./bucket */259);e.exports=function(e){return new n(e)},e.exports.isBucket=n.isBucket},
/*!********************************************!*\
  !*** ./node_modules/sparse-array/index.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";function n(e,t){return e+i(t)}function i(e){let t=e;return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24}function s(e,t){return e[0]-t[0]}function o(e){return e[1]}e.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let r=this._internalPositionFor(e,!1);if(void 0===t)-1!==r&&(this._unsetInternalPos(r),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let n=!1;-1===r?(r=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(r,e,t,n),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);if(-1!==t)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,r=new Array(this.length);for(;t<this.length;)r[t]=e(this.get(t),t,this),t++;return r}reduce(e,t){let r=0,n=t;for(;r<this.length;){n=e(n,this.get(r),r),r++}return n}find(e){let t,r,n=0;for(;n<this.length&&!t;)t=e(r=this.get(n)),n++;return t?r:void 0}_internalPositionFor(e,t){const r=this._bytePosFor(e,t);if(r>=this._bitArrays.length)return-1;const s=this._bitArrays[r],o=e-7*r;return(s&1<<o)>0?this._bitArrays.slice(0,r).reduce(n,0)+i(s&~(4294967295<<o+1))-1:-1}_bytePosFor(e,t){const r=Math.floor(e/7),n=r+1;for(;!t&&this._bitArrays.length<n;)this._bitArrays.push(0);return r}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}_setInternalPos(e,t,r,n){const i=this._data,s=[t,r];if(n)this._sortData(),i[e]=s;else{if(i.length)if(i[i.length-1][0]>=t)i.push(s);else if(i[0][0]<=t)i.unshift(s);else{const e=Math.round(i.length/2);this._data=i.slice(0,e).concat(s).concat(i.slice(e))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(s),this._changedData=!1}bitField(){const e=[];let t,r=8,n=0,i=0;const s=this._bitArrays.slice();for(;s.length||n;){0===n&&(t=s.shift(),n=7);const o=Math.min(n,r);i|=(t&~(255<<o))<<8-r,t>>>=o,n-=o,(r-=o)&&(n||s.length)||(e.push(i),i=0,r=8)}for(var o=e.length-1;o>0;o--){if(0!==e[o])break;e.pop()}return e}compactArray(){return this._sortData(),this._data.map(o)}}},
/*!***********************************************************!*\
  !*** ./node_modules/hamt-sharding/src/consumable-hash.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ./consumable-buffer */1163);e.exports=function(e){return function(t){return t instanceof i?t:new i(t,e)}};class i{constructor(e,r){if("string"!=typeof e&&!t.isBuffer(e))throw new Error("can only hash strings or buffers");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let r=0;for(;t>0;){const e=this._buffers[this._currentBufferIndex],n=Math.min(e.availableBits(),t);r=(r<<n)+e.take(n),t-=n,this._availableBits-=n,0===e.availableBits()&&this._currentBufferIndex++}return r}untake(e){let t=e;for(;t>0;){const e=this._buffers[this._currentBufferIndex],r=Math.min(e.totalBits()-e.availableBits(),t);e.untake(r),t-=r,this._availableBits+=r,this._currentBufferIndex>0&&e.totalBits()===e.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth?this._value+this._depth:this._value,t=await this._hashFn(e),r=new n(t);this._buffers.push(r),this._availableBits+=r.availableBits()}}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*************************************************************!*\
  !*** ./node_modules/hamt-sharding/src/consumable-buffer.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=[255,254,252,248,240,224,192,128],i=[1,3,7,15,31,63,127,255];function s(e,t,r){return(e&function(e,t){return n[e]&i[Math.min(t+e-1,7)]}(t,r))>>>t}e.exports=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(e){let t=e,r=0;for(;t&&this._haveBits();){const e=this._value[this._currentBytePos],n=this._currentBitPos+1,i=Math.min(n,t);r=(r<<i)+s(e,n-i,i),t-=i,this._currentBitPos-=i,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return r}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}},
/*!*****************************************************!*\
  !*** ./node_modules/deep-extend/lib/deep-extend.js ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){
/*!
 * @description Recursive object extending
 * @author Viacheslav Lotsmanov <lotsmanov89@gmail.com>
 * @license MIT
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2013-2018 Viacheslav Lotsmanov
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
function r(e){return e instanceof t||e instanceof Date||e instanceof RegExp}function n(e){if(e instanceof t){var r=t.alloc?t.alloc(e.length):new t(e.length);return e.copy(r),r}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);throw new Error("Unexpected situation")}function i(e){var t=[];return e.forEach((function(e,s){"object"==typeof e&&null!==e?Array.isArray(e)?t[s]=i(e):r(e)?t[s]=n(e):t[s]=o({},e):t[s]=e})),t}function s(e,t){return"__proto__"===t?void 0:e[t]}var o=e.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var e,t,a=arguments[0],c=Array.prototype.slice.call(arguments,1);return c.forEach((function(c){"object"!=typeof c||null===c||Array.isArray(c)||Object.keys(c).forEach((function(u){return t=s(a,u),(e=s(c,u))===a?void 0:"object"!=typeof e||null===e?void(a[u]=e):Array.isArray(e)?void(a[u]=i(e)):r(e)?void(a[u]=n(e)):"object"!=typeof t||null===t||Array.isArray(t)?void(a[u]=o({},e)):void(a[u]=o(t,e))}))})),a}}).call(this,r(/*! ./../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-importer/src/utils/to-path-components.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)},
/*!****************************************************!*\
  !*** ./node_modules/async-iterator-first/index.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=async e=>{for await(const t of e)return t}},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs-utils/src/files/normalise-input.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */1168),{Buffer:i}=r(/*! buffer */0),s=r(/*! pull-stream-to-async-iterator */256),{isSource:o}=r(/*! is-pull-stream */463),a=r(/*! ../globalthis */1169),{Readable:c}=r(/*! stream */137),u=r(/*! readable-stream */37);function h(e){const t={path:e.path||""};return e.content?t.content=l(e.content):e.path||(t.content=l(e)),t}function l(e){if(p(e)||"string"==typeof e)return async function*(){yield d(e)}();if(A(e))return function(e){if("function"==typeof e.stream)return async function*(e){const t=e.stream().getReader();for(;;){const e=await t.read();if(e.done)return;yield e.value}}(e);return async function*(e,t){t=t||{};const r=new a.FileReader,n=t.chunkSize||1048576;let s=t.offset||0;const o=()=>new Promise((t,i)=>{r.onloadend=e=>{const r=e.target.result;t(0===r.byteLength?null:r)},r.onerror=i;const o=s+n,a=e.slice(s,o);r.readAsArrayBuffer(a),s=o});for(;;){const e=await o();if(null==e)return;yield i.from(e)}}(e)}(e);if(f(e)&&(e=y(e)),e[Symbol.iterator])return async function*(){const t=e[Symbol.iterator](),r=t.next();if(r.done)return t;if(Number.isInteger(r.value))yield d(Array.from(function*(){yield r.value,yield*t}()));else{if(!p(r.value))throw n(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT");yield d(r.value);for(const e of t)yield d(e)}}();if(e[Symbol.asyncIterator])return async function*(){for await(const t of e)yield d(t)}();if(o(e))return s(e);throw n(new Error(`Unexpected input: ${e}`,"ERR_UNEXPECTED_INPUT"))}function f(e){return!e[Symbol.iterator]&&!e[Symbol.asyncIterator]&&Boolean(e.readable)}function d(e){return p(e)?e:i.from(e)}function p(e){return i.isBuffer(e)||ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function A(e){return void 0!==a.Blob&&e instanceof a.Blob}function g(e){return"object"==typeof e&&(e.path||e.content)}function y(e){return e[Symbol.asyncIterator]||e[Symbol.iterator]?e:(e[Symbol.asyncIterator]=c.prototype[Symbol.asyncIterator]||u.prototype[Symbol.asyncIterator],e)}e.exports=function(e){if(null==e)throw n(new Error(`Unexpected input: ${e}`,"ERR_UNEXPECTED_INPUT"));if("string"==typeof e||e instanceof String)return async function*(){yield h(e)}();if(p(e)||A(e))return async function*(){yield h(e)}();if(f(e)&&(e=y(e)),e[Symbol.iterator])return async function*(){const t=e[Symbol.iterator](),r=t.next();if(r.done)return t;if(Number.isInteger(r.value)||p(r.value))yield h(function*(){yield r.value,yield*t}());else{if(!g(r.value)&&!A(r.value)&&"string"!=typeof r.value)throw n(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT");yield h(r.value);for(const e of t)yield h(e)}}();if(e[Symbol.asyncIterator])return async function*(){const t=e[Symbol.asyncIterator](),r=await t.next();if(r.done)return t;if(p(r.value))yield h(async function*(){yield r.value,yield*t}());else{if(!g(r.value)&&!A(r.value)&&"string"!=typeof r.value)throw n(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT");yield h(r.value);for await(const e of t)yield h(e)}}();if(g(e))return async function*(){yield h(e)}();if(o(e))return async function*(){const t=s(e)[Symbol.asyncIterator](),r=await t.next();if(r.done)return t;if(p(r.value))yield h(async function*(){yield r.value,yield*t}());else{if(!g(r.value)&&!A(r.value)&&"string"!=typeof r.value)throw n(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT");yield h(r.value);for await(const e of t)yield h(e)}}();throw n(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}},
/*!****************************************************************!*\
  !*** ./node_modules/ipfs-utils/node_modules/err-code/index.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e,t,r){var n;if(!(e instanceof Error))throw new TypeError("Please pass an Error to err-code");if("object"==typeof t?r=t:null!=t&&(e.code=t),r)for(n in r)e[n]=r[n];return e}},
/*!***************************************************!*\
  !*** ./node_modules/ipfs-utils/src/globalthis.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){"object"!=typeof globalThis&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),e.exports=globalThis},
/*!***************************************!*\
  !*** ./node_modules/it-pipe/index.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){const r=(...e)=>{let t;for(;e.length;)t=e.shift()(t);return t},n=e=>e&&("function"==typeof e[Symbol.asyncIterator]||"function"==typeof e[Symbol.iterator]||"function"==typeof e.next),i=e=>e&&"function"==typeof e.sink&&n(e.source),s=e=>t=>(e.sink(t),e.source),o=(...e)=>{if(i(e[0])){const t=e[0];e[0]=()=>t.source}else if(n(e[0])){const t=e[0];e[0]=()=>t}if(e.length>1&&i(e[e.length-1])&&(e[e.length-1]=e[e.length-1].sink),e.length>2)for(let t=1;t<e.length-1;t++)i(e[t])&&(e[t]=s(e[t]));return r(...e)};e.exports=o,e.exports.pipe=o,e.exports.rawPipe=r,e.exports.isIterable=n,e.exports.isDuplex=i},
/*!********************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/cat.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! promisify-es6 */9),i=r(/*! pull-stream */25);e.exports=function(e){return n((r,n,s)=>{"function"==typeof n&&(s=n,n={}),i(e.catPullStream(r,n),i.collect((e,r)=>{if(e)return s(e);s(null,t.concat(r))}))})}}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/cat-pull-stream.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-unixfs-exporter */52),i=r(/*! pull-defer */114),s=r(/*! async-iterator-to-pull-stream */69),{normalizePath:o}=r(/*! ./utils */125);e.exports=function(e){return function(t,r){if("function"==typeof t)throw new Error("You must supply an ipfsPath");r=r||{};const a=(t=o(t)).split("/");!1!==r.preload&&e._preload(a[0]);const c=i.source();return n(t,e._ipld,r).then(e=>e.unixfs&&e.unixfs.type.includes("dir")?c.abort(new Error("this dag node is a directory")):e.content?void c.resolve(s.source(e.content(r))):c.abort(new Error("this dag node has no content")),e=>{c.abort(e)}),c}}},
/*!******************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/resolvers/index.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */70),i={"dag-pb":r(/*! ./unixfs-v1 */1174),raw:r(/*! ./raw */1178),"dag-cbor":r(/*! ./dag-cbor */1179)},s=(e,t,r,o,a,c)=>{const u=i[e.codec];if(!u)throw n(new Error(`No resolver for codec ${e.codec}`),"ERR_NO_RESOLVER");return u(e,t,r,o,s,a,c)};e.exports=s},
/*!****************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/resolvers/unixfs-v1/index.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */70),i=r(/*! ipfs-unixfs */39),s=r(/*! ../../utils/find-cid-in-shard */1175),o={raw:r(/*! ./content/file */464),file:r(/*! ./content/file */464),directory:r(/*! ./content/directory */1176),"hamt-sharded-directory":r(/*! ./content/hamt-sharded-directory */1177),metadata:(e,t,r,n,i,s,o)=>{},symlink:(e,t,r,n,i,s,o)=>{}};e.exports=async(e,t,r,a,c,u,h)=>{const l=await h.get(e);let f,d;t||(t=e.toBaseEncodedString());try{f=i.unmarshal(l.Data)}catch(e){throw n(e,"ERR_NOT_UNIXFS")}if(r||(r=t),a.length){let e;if(!(e=f&&"hamt-sharded-directory"===f.type?await s(l,a[0],h):((e,t)=>{const r=e.Links.find(e=>e.Name===t);return r&&r.Hash})(l,a[0])))throw n(new Error("file does not exist"),"ERR_NOT_FOUND");const t=a.shift();d={cid:e,toResolve:a,name:t,path:`${r}/${t}`}}return{entry:{name:t,path:r,cid:e,node:l,content:o[f.type](e,l,f,r,c,u,h),unixfs:f,depth:u},next:d}}},
/*!**************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/utils/find-cid-in-shard.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! hamt-sharding/src/bucket */259),i=r(/*! ipfs-unixfs-importer/src/dir-sharded */168),s=e=>e.toString("16").toUpperCase().padStart(2,"0").substring(0,2),o=async(e,t,r,a)=>{a||((a={rootBucket:new n({hashFn:i.hashFn}),hamtDepth:1}).lastBucket=a.rootBucket),await((e,t,r)=>Promise.all(e.map(e=>{if(2===e.Name.length){const r=parseInt(e.Name,16);return t._putObjectAt(r,new n({hashFn:i.hashFn},t,r))}return r.put(e.Name.substring(2),!0)})))(e.Links,a.lastBucket,a.rootBucket);const c=await a.rootBucket._findNewBucketAndPos(t);let u=s(c.pos);const h=(e=>{let t=e.bucket;const r=[];for(;t._parent;)r.push(t),t=t._parent;return r.push(t),r.reverse()})(c);h.length>a.hamtDepth&&(a.lastBucket=h[a.hamtDepth],u=s(a.lastBucket._posAtParent));const l=e.Links.find(e=>{const r=e.Name.substring(0,2),n=e.Name.substring(2);if(r===u&&(!n||n===t))return!0});return l?l.Name.substring(2)===t?l.Hash:(a.hamtDepth++,e=await r.get(l.Hash),o(e,t,r,a)):null};e.exports=o},
/*!****************************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/resolvers/unixfs-v1/content/directory.js ***!
  \****************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=(e,t,r,n,i,s,o)=>(async function*(e={}){const r=e.offset||0,a=e.length||t.Links.length,c=t.Links.slice(r,a);for(const e of c){const t=await i(e.Hash,e.Name,`${n}/${e.Name}`,[],s+1,o);yield t.entry}})},
/*!*****************************************************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/resolvers/unixfs-v1/content/hamt-sharded-directory.js ***!
  \*****************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=(e,t,r,n,i,s,o)=>(e={})=>(async function*e(t,r,n,i,s,o){const a=t.Links;for(const c of a){const a=c.Name.substring(2);if(a){const e=await n(c.Hash,a,`${r}/${a}`,[],i+1,s);yield e.entry}else{t=await s.get(c.Hash);for await(const a of e(t,r,n,i,s,o))yield a}}})(t,n,i,s,o,e)},
/*!****************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/resolvers/raw.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! err-code */70),i=r(/*! ../utils/extract-data-from-block */465),s=r(/*! ../utils/validate-offset-and-length */466),o=e=>(function*(t={}){const{offset:r,length:n}=s(e.length,t.offset,t.length);yield i(e,0,r,r+n)});e.exports=async(e,t,r,i,s,a,c)=>{if(i.length)throw n(new Error(`No link named ${r} found in raw node ${e.toBaseEncodedString()}`),"ERR_NOT_FOUND");const u=await c.get(e);return{entry:{name:t,path:r,cid:e,node:u,content:o(u),depth:a}}}},
/*!*********************************************************************!*\
  !*** ./node_modules/ipfs-unixfs-exporter/src/resolvers/dag-cbor.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! cids */4),i=r(/*! err-code */70);e.exports=async(e,t,r,s,o,a,c)=>{const u=await c.get(e);let h=u,l=r;for(;s.length;){const o=s[0];if(!(o in h))throw i(new Error(`No property named ${o} found in cbor node ${e.toBaseEncodedString()}`),"ERR_NO_PROP");if(s.shift(),l=`${l}/${o}`,n.isCID(h[o]))return{entry:{name:t,path:r,cid:e,node:u,depth:a},next:{cid:h[o],name:o,path:l,toResolve:s}};h=h[o]}return{entry:{name:t,path:r,cid:e,node:u,depth:a}}}},
/*!************************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/cat-readable-stream.js ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream-to-stream */68);e.exports=function(e){return(t,r)=>n.source(e.catPullStream(t,r))}},
/*!********************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/get.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! promisify-es6 */9),i=r(/*! pull-stream */25);e.exports=function(e){return n((r,n,s)=>{"function"==typeof n&&(s=n,n={}),n=n||{},i(e.getPullStream(r,n),i.asyncMap((e,r)=>{e.content?i(e.content,i.collect((n,i)=>{if(n)return r(n);e.content=t.concat(i),r(null,e)})):r(null,e)}),i.collect(s))})}}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/get-pull-stream.js ***!
  \********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-unixfs-exporter */52),i=r(/*! async-iterator-to-pull-stream */69),s=r(/*! err-code */22),o=r(/*! pull-stream/pull */17),a=r(/*! pull-stream/sources/error */218),c=r(/*! pull-stream/throughs/map */65),{normalizePath:u,mapFile:h}=r(/*! ./utils */125);e.exports=function(e){return(t,r)=>{if(!1!==(r=r||{}).preload){let r;try{r=u(t).split("/")}catch(e){return a(s(e,"ERR_INVALID_PATH"))}e._preload(r[0])}return o(i.source(n.recursive(t,e._ipld,r)),c(h({...r,includeContent:!0})))}}},
/*!************************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/get-readable-stream.js ***!
  \************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream */25),i=r(/*! pull-stream-to-stream */68);e.exports=function(e){return(t,r)=>(r=r||{},i.source(n(e.getPullStream(t,r),n.map(e=>(e.content&&(e.content=i.source(e.content),e.content.pause()),e)))))}},
/*!*******************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/ls.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9),i=r(/*! pull-stream */25);e.exports=function(e){return n((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{},i(e.lsPullStream(t,r),i.collect((e,t)=>{if(e)return n(e);n(null,t)}))})}},
/*!*******************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/ls-pull-stream.js ***!
  \*******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-unixfs-exporter */52),i=r(/*! pull-defer */114),s=r(/*! pull-stream/pull */17),o=r(/*! pull-stream/sources/once */217),a=r(/*! pull-stream/throughs/map */65),c=r(/*! pull-stream/throughs/filter */148),u=r(/*! err-code */22),h=r(/*! async-iterator-to-pull-stream */69),{normalizePath:l,mapFile:f}=r(/*! ./utils */125);e.exports=function(e){return function(t,r){r=r||{};const d=l(t),p=r.recursive,A=d.split("/");!1!==r.preload&&e._preload(A[0]);const g=i.source();return n(t,e._ipld,r).then(t=>t.unixfs?"file"===t.unixfs.type?g.resolve(o(f(r)(t))):t.unixfs.type.includes("dir")?p?g.resolve(s(h.source(n.recursive(t.cid,e._ipld,r)),c(e=>t.cid.toBaseEncodedString()!==e.cid.toBaseEncodedString()),a(f(r)))):g.resolve(s(h.source(t.content()),a(f(r)),a(e=>(e.depth--,e)))):void g.abort(u(new Error(`Unknown UnixFS type ${t.unixfs.type}`),"EUNKNOWNUNIXFSTYPE")):g.abort(u(new Error("dag node was not a UnixFS node"),"ENOTUNIXFS")),e=>{g.abort(e)}),g}}},
/*!***********************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/ls-readable-stream.js ***!
  \***********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream-to-stream */68);e.exports=function(e){return(t,r)=>n.source(e.lsPullStream(t,r))}},
/*!*************************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/refs-readable-stream.js ***!
  \*************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream-to-stream */68);e.exports=function(e){return(t,r)=>n.source(e.refsPullStream(t,r))}},
/*!*********************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/refs-pull-stream.js ***!
  \*********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream */25),i=r(/*! pull-defer */114),s=r(/*! pull-traverse */1189),o=r(/*! pull-cat */411),a=r(/*! is-ipfs */62),c=r(/*! cids */4),{DAGNode:u}=r(/*! ipld-dag-pb */29),{normalizePath:h}=r(/*! ./utils */125),{Format:l}=r(/*! ./refs */467),{Errors:f}=r(/*! interface-datastore */14),d=f.notFoundError().code;e.exports=function(e){return function(t,r){if(0===(r=r||{}).maxDepth)return n.empty();if(r.edges&&r.format&&r.format!==l.default)return n.error(new Error("Cannot set edges to true and also specify format"));let f;r.format=r.edges?l.edges:r.format||l.default,"number"!=typeof r.maxDepth&&(r.maxDepth=r.recursive?1/0:1);try{f=(Array.isArray(t)?t:[t]).map(t=>(function(e,t,r){const n=h(t),i=n.split("/")[0];if(!a.cid(i))throw new Error(`Error resolving path '${n}': '${i}' is not a valid CID`);!1!==r.preload&&e._preload(i);return"/ipfs/"+n})(e,t,r))}catch(e){return n.error(e)}return o(f.map(t=>(function(e,t,r){const o=i.source();return e.resolve(t,(t,a)=>{if(t)return o.resolve(n.error(t));const h=a.split("/")[2];o.resolve(n(function(e,t,r,o){const a=new Set,h={node:{cid:t},depth:0};return s.depthFirst(h,t=>{const{node:s,depth:h}=t,l=h+1;if(l>r)return n.empty();if(o){if(a.has(s.cid.toString()))return t.isDuplicate=!0,n.empty();a.add(s.cid.toString())}const f=i.source();return function(e,t,r){e._ipld.get(new c(t)).then(e=>{let t;t=u.isDAGNode(e)?e.Links.map(({Name:e,Hash:t})=>({name:e,cid:new c(t)})):function e(t,r=""){let n=[];for(const[i,s]of Object.entries(t))c.isCID(s)?n.push({name:r+i,cid:s}):"object"==typeof s&&(n=n.concat(e(s,r+i+"/")));return n}(e),r(null,t)}).catch(r)}(e,s.cid,(e,t)=>{if(e)return e.code===d&&(e.message=`Could not find object with CID: ${s.cid}`),f.resolve(n.error(e));const r=t.map(e=>({parent:s,node:e,depth:l}));f.resolve(n.values(r))}),f})}(e,h,r.maxDepth,r.unique),n.filter(e=>Boolean(e.parent)),n.filter(e=>!e.isDuplicate),n.map(e=>(function(e,t,r,n){let i=n.replace(/<src>/g,e.toString());return i=(i=i.replace(/<dst>/g,t.toString())).replace(/<linkname>/g,r)})(e.parent.cid,e.node.cid,e.node.name,r.format)),n.map(e=>({ref:e}))))}),o})(e,t,r)))}}},
/*!*********************************************!*\
  !*** ./node_modules/pull-traverse/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=t.once=function(e){return function(t,r){if(t)return r(t);if(null!=e){var n=e;e=null,r(null,n)}else r(!0)}};t.depthFirst=function(e,t){var n,i=[];return i.unshift(r(e)),function e(r,s){return i.length?n?s(n):void i[0](r,(function(r,o){if(r){if(!0!==r){for(n=r,i.shift();i.length;)i.shift()(r,(function(){}));return s(r)}return i.shift(),e(null,s)}i.unshift(t(o)),s(r,o)})):s(!0)}},t.widthFirst=function(e,t){var n=[];return n.push(r(e)),function e(r,i){if(!n.length)return i(!0);n[0](r,(function(r,s){if(r)return n.shift(),e(null,i);n.push(t(s)),i(r,s)}))}},t.leafFirst=function(e,t){var n=[],i=[];return n.push(r(e)),function e(r,s){n[0](r,(function(r,o){if(r)return n.shift(),i.length?s(null,i.shift()):s(!0);n.unshift(t(o)),i.unshift(o),e(null,s)}))}}},
/*!***************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/refs-local.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! promisify-es6 */9),i=r(/*! pull-stream */25);e.exports=function(e){return n(t=>{i(e.refs.localPullStream(),i.collect((e,r)=>{if(e)return t(e);t(null,r)}))})}},
/*!*******************************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/refs-local-readable-stream.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream-to-stream */68);e.exports=function(e){return(t,r)=>n.source(e.refs.localPullStream())}},
/*!***************************************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-regular/refs-local-pull-stream.js ***!
  \***************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! cids */4),i=r(/*! base32.js */142),s=r(/*! async-iterator-to-pull-stream */69);function o(e){try{const r=new i.Decoder,s=t.from(r.write(e.toString().slice(1)).finalize());return{ref:new n(s).toString()}}catch(t){return{err:`Could not convert block with key '${e}' to CID: ${t.message}`}}}e.exports=function(e){return()=>s(async function*(){for await(const t of e._repo.blocks.query({keysOnly:!0}))yield o(t.key)}())}}).call(this,r(/*! ./../../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/files-mfs.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! ipfs-mfs/core */1194),i=r(/*! is-pull-stream */463),s=r(/*! async-iterator-to-pull-stream */69),o=r(/*! async-iterator-to-stream */1222),a=r(/*! pull-stream-to-async-iterator */256),c=r(/*! async-iterator-all */123),u=r(/*! promise-nodeify */254),h=r(/*! stream */37).PassThrough,l=r(/*! pull-stream/pull */17),f=r(/*! pull-stream/throughs/map */65),d=r(/*! is-ipfs */62),{cidToString:p}=r(/*! ../../utils/cid */122),A=e=>{const t=(e=e||{}).long||e.l;return r=>({hash:t?p(r.cid,{base:e.cidBase}):"",name:r.name,type:t?r.type:0,size:t&&r.size||0})};e.exports=e=>{const r=n({ipld:e._ipld,blocks:e._blockService,datastore:e._repo.root,repoOwner:e._options.repoOwner}),p=t=>(...r)=>{const n=r.filter(e=>d.ipfsPath(e)||d.cid(e));if(n.length){const t=r[r.length-1];t&&!1!==t.preload&&n.forEach(t=>e._preload(t))}return t(...r)},g={...r,cp:p(r.cp),ls:p(r.ls),mv:p(r.mv),read:p(r.read),stat:p(r.stat)};return{cp:(e,t,r,n)=>("function"==typeof r&&(n=r,r={}),u(g.cp(e,t,r),n)),mkdir:(e,t,r)=>("function"==typeof t&&(r=t,t={}),u(g.mkdir(e,t),r)),stat:(e,t,r)=>{return"function"==typeof t&&(r=t,t={}),u((async(e,t={})=>{const r=await g.stat(e,t);return r.hash=r.cid.toBaseEncodedString(t&&t.cidBase),delete r.cid,r})(e,t),r)},rm:(e,t,r)=>("function"==typeof t&&(r=t,t={}),u(g.rm(e,t),r)),read:(e,r,n)=>{return"function"==typeof r&&(n=r,r={}),u((async(e,r={})=>t.concat(await c(g.read(e,r))))(e,r),n)},readReadableStream:(e,t={})=>o(g.read(e,t)),readPullStream:(e,t={})=>s.source(g.read(e,t)),write:(e,t,r,n)=>{return"function"==typeof r&&(n=r,r={}),u((async(e,t,r={})=>{i.isSource(t)&&(t=a(t)),await g.write(e,t,r)})(e,t,r),n)},mv:(e,t,r,n)=>("function"==typeof r&&(n=r,r={}),u(g.mv(e,t,r),n)),flush:(e,t)=>("function"==typeof e&&(t=e,e=void 0),u(g.flush(e),t)),ls:(e,t,r)=>{return"function"==typeof e&&(r=e,e="/",t={}),"function"==typeof t&&(r=t,t={}),u((async(e,t={})=>{return(await c(g.ls(e,t))).map(A(t))})(e,t),r)},lsReadableStream:(e,t={})=>{const r=o.obj(g.ls(e,t)),n=new h({objectMode:!0});return r.on("data",e=>{n.write(A(t)(e))}),r.on("error",e=>{n.destroy(e)}),r.on("end",(e,r,i)=>{e&&(e=A(t)(e)),n.end(e,r,i)}),n},lsPullStream:(e,t={})=>l(s.source(g.ls(e,t)),f(A(t)))}}}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!***************************************!*\
  !*** ./node_modules/ipfs-mfs/core.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=r(/*! ./src/core */1195)},
/*!*************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/index.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! assert */24),i=r(/*! ./utils/create-lock */468),s={stat:r(/*! ./stat */171)},o={cp:r(/*! ./cp */478),flush:r(/*! ./flush */1214),mkdir:r(/*! ./mkdir */261),mv:r(/*! ./mv */1215),rm:r(/*! ./rm */480)},a={write:r(/*! ./write */1217),read:r(/*! ./read */1220),ls:r(/*! ./ls */1221)},c=({options:e,mfs:t,operations:r,lock:n})=>{Object.keys(r).forEach(i=>{t[i]=n(r[i](e))})},u={repoOwner:!0,ipld:null,repo:null};e.exports=e=>{const{repoOwner:t}=Object.assign({},u||{},e);n(e.ipld,"MFS requires an IPLD instance"),n(e.blocks,"MFS requires an BlockStore instance"),n(e.datastore,"MFS requires a DataStore instance"),e.repo={blocks:e.blocks,datastore:e.datastore};const r=i(t),h={};return c({options:e,mfs:h,operations:s,lock:e=>r.readLock(e)}),c({options:e,mfs:h,operations:o,lock:e=>r.writeLock(e)}),Object.keys(a).forEach(t=>{h[t]=a[t](e)}),h}},
/*!******************************************!*\
  !*** ./node_modules/mortice/lib/node.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){(function(t){const n=r(/*! events */5).EventEmitter,i=r(/*! shortid */470),{WORKER_REQUEST_READ_LOCK:s,WORKER_RELEASE_READ_LOCK:o,MASTER_GRANT_READ_LOCK:a,WORKER_REQUEST_WRITE_LOCK:c,WORKER_RELEASE_WRITE_LOCK:u,MASTER_GRANT_WRITE_LOCK:h}=r(/*! ./constants */471);let l;const f=(e,t,r,n,i)=>(s,o)=>{o&&o.type===r&&e.emit(t,o.name,()=>(s.send({type:i,name:o.name,identifier:o.identifier}),new Promise(e=>{const t=r=>{r&&r.type===n&&r.identifier===o.identifier&&(s.removeListener("message",t),e())};s.on("message",t)})))},d=(e,r,n,s)=>()=>{const o=i.generate();return t.send({type:r,identifier:o,name:e}),new Promise(r=>{const i=a=>{a&&a.type===n&&a.identifier===o&&(t.removeListener("message",i),r(()=>{t.send({type:s,identifier:o,name:e})}))};t.on("message",i)})};e.exports=e=>{try{if(l=r(/*! cluster */1205),!Object.keys(l).length)return}catch(e){return}if(l.isMaster||e.singleProcess){const e=new n;return l.on("message",f(e,"requestReadLock",s,o,a)),l.on("message",f(e,"requestWriteLock",c,u,h)),e}return{isWorker:!0,readLock:e=>d(e,s,a,o),writeLock:e=>d(e,c,h,u)}}}).call(this,r(/*! ./../../process/browser.js */2))},
/*!*******************************************!*\
  !*** ./node_modules/shortid/lib/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./alphabet */170),i=r(/*! ./build */1199),s=r(/*! ./is-valid */1203),o=r(/*! ./util/cluster-worker-id */1204)||0;function a(){return i(o)}e.exports=a,e.exports.generate=a,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return o=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.isValid=s},
/*!*************************************************************!*\
  !*** ./node_modules/shortid/lib/random/random-from-seed.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=1;e.exports={nextValue:function(){return(n=(9301*n+49297)%233280)/233280},seed:function(e){n=e}}},
/*!*******************************************!*\
  !*** ./node_modules/shortid/lib/build.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n,i,s=r(/*! ./generate */1200),o=(r(/*! ./alphabet */170),1567752802062),a=7;e.exports=function(e){var t="",r=Math.floor(.001*(Date.now()-o));return r===i?n++:(n=0,i=r),t+=s(a),t+=s(e),n>0&&(t+=s(n)),t+=s(r)}},
/*!**********************************************!*\
  !*** ./node_modules/shortid/lib/generate.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./alphabet */170),i=r(/*! ./random/random-byte */1201),s=r(/*! nanoid/format */1202);e.exports=function(e){for(var t,r=0,o="";!t;)o+=s(i,n.get(),1),t=e<Math.pow(16,r+1),r++;return o}},
/*!****************************************************************!*\
  !*** ./node_modules/shortid/lib/random/random-byte-browser.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n,i="object"==typeof window&&(window.crypto||window.msCrypto);n=i&&i.getRandomValues?function(e){return i.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],r=0;r<e;r++)t.push(Math.floor(256*Math.random()));return t},e.exports=n},
/*!***********************************************!*\
  !*** ./node_modules/nanoid/format.browser.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=Math.ceil(1.6*n*r/t.length),s="";;)for(var o=i,a=e(o);o--;)if((s+=t[a[o]&n]||"").length===+r)return s}},
/*!**********************************************!*\
  !*** ./node_modules/shortid/lib/is-valid.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./alphabet */170);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},
/*!********************************************************************!*\
  !*** ./node_modules/shortid/lib/util/cluster-worker-id-browser.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=0},
/*!*************************!*\
  !*** cluster (ignored) ***!
  \*************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!*********************************************!*\
  !*** ./node_modules/mortice/lib/browser.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! events */5).EventEmitter,i=r(/*! shortid */470),{WORKER_REQUEST_READ_LOCK:s,WORKER_RELEASE_READ_LOCK:o,MASTER_GRANT_READ_LOCK:a,WORKER_REQUEST_WRITE_LOCK:c,WORKER_RELEASE_WRITE_LOCK:u,MASTER_GRANT_WRITE_LOCK:h}=r(/*! ./constants */471),l=r(/*! observable-webworkers */472),f=r(/*! globalthis */1207)(),d=(e,t,r,n,i)=>(s,o)=>{if(!o||!o.data||o.data.type!==r)return;const a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};e.emit(t,a.name,()=>(s.postMessage({type:i,name:a.name,identifier:a.identifier}),new Promise(e=>{const t=r=>{if(!r||!r.data)return;const i={type:r.data.type,name:r.data.name,identifier:r.data.identifier};i&&i.type===n&&i.identifier===a.identifier&&(s.removeEventListener("message",t),e())};s.addEventListener("message",t)})))},p=(e,t,r,n)=>()=>{const s=i.generate();return f.postMessage({type:t,identifier:s,name:e}),new Promise(t=>{const i=o=>{if(!o||!o.data)return;const a={type:o.data.type,identifier:o.data.identifier};a&&a.type===r&&a.identifier===s&&(f.removeEventListener("message",i),t(()=>{f.postMessage({type:n,identifier:s,name:e})}))};f.addEventListener("message",i)})},A={singleProcess:!1};e.exports=e=>{if(e=Object.assign({},A,e),!!f.document||e.singleProcess){const e=new n;return l.addEventListener("message",d(e,"requestReadLock",s,o,a)),l.addEventListener("message",d(e,"requestWriteLock",c,u,h)),e}return{isWorker:!0,readLock:e=>p(e,s,a,o),writeLock:e=>p(e,c,h,u)}}},
/*!******************************************!*\
  !*** ./node_modules/globalthis/index.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! define-properties */473),i=r(/*! ./implementation */475),s=r(/*! ./polyfill */476),o=r(/*! ./shim */1210),a=s(),c=function(){return a};n(c,{getPolyfill:s,implementation:i,shim:o}),e.exports=c},
/*!*******************************************!*\
  !*** ./node_modules/object-keys/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=Array.prototype.slice,i=r(/*! ./isArguments */474),s=Object.keys,o=s?function(e){return s(e)}:r(/*! ./implementation */1209),a=Object.keys;o.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return i(e)?a(n.call(e)):a(e)}):Object.keys=o;return Object.keys||o},e.exports=o},
/*!****************************************************!*\
  !*** ./node_modules/object-keys/implementation.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=r(/*! ./isArguments */474),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(e){var t=e.constructor;return t&&t.prototype===e},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!f["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{l(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===s.call(e),n=o(e),a=t&&"[object String]"===s.call(e),f=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var p=u&&r;if(a&&e.length>0&&!i.call(e,0))for(var A=0;A<e.length;++A)f.push(String(A));if(n&&e.length>0)for(var g=0;g<e.length;++g)f.push(String(g));else for(var y in e)p&&"prototype"===y||!i.call(e,y)||f.push(String(y));if(c)for(var m=function(e){if("undefined"==typeof window||!d)return l(e);try{return l(e)}catch(e){return!1}}(e),_=0;_<h.length;++_)m&&"constructor"===h[_]||!i.call(e,h[_])||f.push(h[_]);return f}}e.exports=n},
/*!*****************************************!*\
  !*** ./node_modules/globalthis/shim.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! define-properties */473),i=r(/*! ./polyfill */476);e.exports=function(){var e=i();if(n.supportsDescriptors){var t=Object.getOwnPropertyDescriptor(e,"globalThis");(!t||t.configurable&&(t.enumerable||t.writable||globalThis!==e))&&Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!1})}else"object"==typeof globalThis&&globalThis===e||(e.globalThis=e);return e}},
/*!***********************************************!*\
  !*** ./node_modules/promise-timeout/index.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n;e.exports.timeout=function(e,t){var r,i=new n;return Promise.race([e,new Promise((function(e,n){r=setTimeout((function(){n(i)}),t)}))]).then((function(e){return clearTimeout(r),e}),(function(e){throw clearTimeout(r),e}))};(n=e.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"}).prototype=Object.create(Error.prototype),n.prototype.name="TimeoutError"},
/*!*************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/create-node.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-unixfs */39),{DAGNode:i}=r(/*! ipld-dag-pb */29),s=r(/*! multicodec */27),o=r(/*! multihashes */13);e.exports=async(e,t,r)=>{const a=s[r.format.toUpperCase().replace(/-/g,"_")],c=o.names[r.hashAlg],u=new i(new n(t).marshal());return{cid:await e.ipld.put(u,a,{cidVersion:r.cidVersion,hashAlg:c}),node:u}}},
/*!****************************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/to-sources-and-destination.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./to-sources */262);e.exports=async function(e,t){const{sources:r,options:i}=await n(e,t);return{destination:r.pop(),sources:r,options:i}}},
/*!*************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/flush.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./utils/apply-default-options */53),i=r(/*! ./stat */171),{FILE_SEPARATOR:s}=r(/*! ./utils/constants */46),o={};e.exports=e=>(async function(t=s,r=o){r=n(r,o),await i(e)(t,r)})},
/*!**********************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/mv.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ./utils/apply-default-options */53),i=r(/*! ./utils/to-sources */262),s=r(/*! ./cp */478),o=r(/*! ./rm */480),a={parents:!1,recursive:!1,flush:!0,format:"dag-pb",hashAlg:"sha2-256",shardSplitThreshold:1e3};e.exports=e=>(async function(...t){Array.isArray(t[0])&&(t=t[0].concat(t.slice(1)));const{sources:r}=await i(e,t),c=n(t,a),u=r.map(e=>e.path).concat(c),h=r.slice(0,-1).map(e=>e.path).concat(Object.assign(c,{recursive:!0}));await s(e).apply(null,u),await o(e).apply(null,h)})},
/*!*************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/remove-link.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const{DAGNode:n,DAGLink:i}=r(/*! ipld-dag-pb */29),s=r(/*! cids */4),o=r(/*! debug */1)("ipfs:mfs:core:utils:remove-link"),a=r(/*! ipfs-unixfs */39),{generatePath:c,updateHamtDirectory:u}=r(/*! ./hamt-utils */479),h=r(/*! err-code */44),l=r(/*! multicodec */27),f=r(/*! multihashes */13),d=async(e,t)=>{const r=l[t.format.toUpperCase().replace(/-/g,"_")],n=f.names[t.hashAlg];t.parent.rmLink(t.name);const i=await e.ipld.put(t.parent,r,{cidVersion:t.cidVersion,hashAlg:n});return o(`Updated regular directory ${i}`),{node:t.parent,cid:i}},p=async(e,t)=>{const{rootBucket:r,path:n}=await c(e,t.name,t.parent);await r.del(t.name);const{node:i}=await A(e,n,{name:t.name,cid:t.cid,size:t.size,hashAlg:t.hashAlg,format:t.format,cidVersion:t.cidVersion,flush:t.flush},t);return u(e,i.Links,r,t)},A=async(e,t,r,i)=>{const{bucket:s,prefix:a,node:c}=t.pop(),l=c.Links.find(e=>e.Name.substring(0,2)===a);if(!l)throw h(new Error(`No link found with prefix ${a} for file ${r.name}`),"ERR_NOT_FOUND");if(l.Name===`${a}${r.name}`)return o(`Removing existing link ${l.Name}`),c.rmLink(l.Name),await s.del(r.name),u(e,c.Links,s,i);o(`Descending into sub-shard ${l.Name} for ${a}${r.name}`);const f=await A(e,t,r,i);let d=a;1===f.node.Links.length&&(o(`Removing subshard for ${a}`),f.cid=f.node.Links[0].Hash,f.node=f.node.Links[0],d=`${a}${f.node.Name.substring(2)}`),o(`Updating shard ${a} with name ${d}`);const p=n.isDAGNode(f.node)?f.node.size:f.node.Tsize;return g(e,s,c,a,d,p,f.cid,i)},g=(e,t,r,n,s,o,a,c)=>(r.rmLink(n),r.addLink(new i(s,o,a)),u(e,r.Links,t,c));e.exports=async(e,t)=>{if(!t.parentCid&&!t.parent)throw h(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(t.parentCid&&!s.isCID(t.parentCid))throw h(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");if(t.parent||(o(`Loading parent node ${t.parentCid}`),t.parent=await e.ipld.get(t.parentCid)),!t.name)throw h(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");return"hamt-sharded-directory"===a.unmarshal(t.parent.Data).type?(o(`Removing ${t.name} from sharded directory`),p(e,t)):(o(`Removing link ${t.name} regular directory`),d(e,t))}},
/*!*************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/write.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! debug */1)("ipfs:mfs:write"),i=r(/*! ipfs-unixfs-importer */461),s=r(/*! ./stat */171),o=r(/*! ./mkdir */261),a=r(/*! ./utils/add-link */174),c=r(/*! ./utils/apply-default-options */53),u=r(/*! ./utils/create-lock */468),h=r(/*! ./utils/to-async-iterator */1218),l=r(/*! ./utils/to-mfs-path */71),f=r(/*! ./utils/to-path-components */260),d=r(/*! ./utils/to-trail */263),p=r(/*! ./utils/update-tree */173),A=r(/*! ./utils/update-mfs-root */172),g=r(/*! err-code */44),{MAX_CHUNK_SIZE:y}=r(/*! ./utils/constants */46),m=r(/*! async-iterator-last */169),_={offset:0,length:void 0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",format:"dag-pb",parents:!1,progress:()=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};e.exports=e=>(async function(t,r,i){let s,o,a;if(n("Hello world, writing",t,r,i),i=c(i,_),n("Reading source, destination and parent"),await u().readLock(async()=>{s=await h(r,i),o=await l(e,t),a=await l(e,o.mfsDirectory)})(),n("Read source, destination and parent"),!i.parents&&!a.exists)throw g(new Error("directory does not exist"),"ERR_NO_EXIST");if(!i.create&&!o.exists)throw g(new Error("file does not exist"),"ERR_NO_EXIST");return b(e,t,s,o,i)});const b=async(e,t,r,n,i)=>{const c=await w(e,r,n,i);await u().writeLock(async()=>{const r=f(t),n=r.pop();let u=!1;try{await s(e)(`/${r.join("/")}`,i),u=!0}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}u||await o(e)(`/${r.join("/")}`,i);const h=await l(e,t),y=await d(e,h.mfsDirectory,i),m=y[y.length-1];if(!m.type.includes("directory"))throw g(new Error(`cannot write to ${m.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const _=await e.ipld.get(m.cid),b=await a(e,{parent:_,name:n,cid:c.cid,size:c.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,format:i.format,hashAlg:i.hashAlg,cidVersion:i.cidVersion});m.cid=b.cid;const w=await p(e,y,i);await A(e,w)})()},w=async(e,t,r,s)=>{r.exists?n(`Overwriting file ${r.cid} offset ${s.offset} length ${s.length}`):n(`Writing file offset ${s.offset} length ${s.length}`);const o=[];s.offset>0&&(r.unixfs&&r.unixfs.fileSize()>s.offset?(n(`Writing first ${s.offset} bytes of original file`),o.push(()=>r.content({offset:0,length:s.offset}))):(n(`Writing zeros for first ${s.offset} bytes`),o.push(E(s.offset)))),o.push(v(t,s.length));const a=C(S(o),e=>{if(r.unixfs&&!s.truncate){const t=r.unixfs.fileSize();if(t>e)return n(`Writing last ${t-e} of ${t} bytes from original file starting at offset ${e}`),r.content({offset:e});n("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}),c=await m(i([{content:a}],e.ipld,{progress:s.progress,hashAlg:s.hashAlg,cidVersion:s.cidVersion,strategy:s.strategy,rawLeaves:s.rawLeaves,reduceSingleLeafToSelf:s.reduceSingleLeafToSelf,leafType:s.leafType}));return n(`Wrote ${c.cid}`),{cid:c.cid,size:c.size}},v=(e,t)=>(async function*(){let r=0;for await(const n of e){if((r+=n.length)>t)return void(yield n.slice(0,t-r));yield n}}),E=(e,r=y)=>{const n=t.alloc(r,0),i={[Symbol.asyncIterator]:function*(){for(;;)yield n.slice()}};return v(i,e)},S=async function*(e){for(let t=0;t<e.length;t++)for await(const r of e[t]())yield r},C=async function*(e,t){let r=0;for await(const t of e)r+=t.length,yield t;for await(const e of t(r))r+=e.length,yield e}}).call(this,r(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/utils/to-async-iterator.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t,n){const i=r(/*! err-code */44),s=r(/*! fs */1219),o=r(/*! debug */1)("ipfs:mfs:utils:to-async-iterator"),{MAX_CHUNK_SIZE:a}=r(/*! ./constants */46);e.exports=e=>{if(!e)throw i(new Error("paths must start with a leading /"),"ERR_INVALID_PATH");if("string"==typeof e||e instanceof String)return o("Content was a path"),s.createReadStream(e);if(e.length)return o("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield e}};if(e[Symbol.asyncIterator])return o("Content was an async iterator"),e;if(e[Symbol.iterator])return o("Content was an iterator"),e;if(t.Blob&&e instanceof t.Blob){o("Content was an HTML5 Blob");let r=0;const i={next:()=>r>e.size?{done:!0}:new Promise((i,s)=>{const o=e.slice(r,a);r+=a;const c=new t.FileReader,u=e=>{if(c.removeEventListener("loadend",u,!1),e.error)return s(e.error);i({done:!1,value:n.from(c.result)})};c.addEventListener("loadend",u),c.readAsArrayBuffer(o)})};return{[Symbol.asyncIterator]:()=>i}}throw i(new Error(`Don't know how to convert ${e} into an async iterator`),"ERR_INVALID_PARAMS")}}).call(this,r(/*! ./../../../../webpack/buildin/global.js */10),r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!********************!*\
  !*** fs (ignored) ***!
  \********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},
/*!************************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/read.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-unixfs-exporter */52),i=r(/*! ./utils/apply-default-options */53),s=r(/*! ./utils/to-mfs-path */71),o=r(/*! err-code */44),a={offset:0,length:1/0};e.exports=e=>(function(t,r={}){return r=i(r,a),{[Symbol.asyncIterator]:async function*(){const i=await s(e,t),a=await n(i.mfsPath,e.ipld);if("file"!==a.unixfs.type)throw o(new Error(`${t} was not a file`),"ERR_NOT_FILE");if(!a.content)throw o(new Error(`Could not load content stream from ${t}`),"ERR_NO_CONTENT");for await(const e of a.content({offset:r.offset,length:r.length}))yield e}}})},
/*!**********************************************!*\
  !*** ./node_modules/ipfs-mfs/src/core/ls.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-unixfs-exporter */52),i=r(/*! ./utils/apply-default-options */53),s=r(/*! ./utils/to-mfs-path */71),{FILE_SEPARATOR:o,FILE_TYPES:a}=r(/*! ./utils/constants */46),c={},u=e=>{let t=0,r=e.node.size||e.node.length;return e.unixfs&&(r=e.unixfs.fileSize(),t=a[e.unixfs.type]),{cid:e.cid,name:e.name,type:t,size:r}};e.exports=e=>(async function*(t=o,r={}){"object"!=typeof t||t instanceof String||(r=t,t=o),r=i(r,c);const a=await s(e,t),h=await n(a.mfsPath,e.ipld);if(h.unixfs&&h.unixfs.type.includes("directory"))for await(const e of h.content(r))yield u(e);else yield u(h)})},
/*!*************************************************************!*\
  !*** ./node_modules/async-iterator-to-stream/dist/index.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t,r,n,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var o=e.apply(t,r);function a(e){i(o,n,s,a,c,"next",e)}function c(e){i(o,n,s,a,c,"throw",e)}a(void 0)}))}}const o=r(/*! readable-stream */37).Readable,a="function"==typeof Symbol?e=>{const t=Symbol[e];return void 0!==t?t:`@@${e}`}:e=>`@@${e}`,c=l.$$asyncIterator=a("asyncIterator"),u=l.$$iterator=a("iterator"),h=e=>{let t;return"function"==typeof(t=e[c])?t.call(e):"function"==typeof(t=e[u])?t.call(e):e};function l(e,r){if("function"==typeof e)return function(){return l(e.apply(this,arguments),r)};const n=e.then;if("function"==typeof n)return n.call(e,e=>l(e,r));const i=h(e),a="return"in i,c=r instanceof o?r:new o(r);var u;a&&(c._destroy=(u=s((function*(e,t){try{yield null!=e?i.throw(e):i.return()}catch(e){return t(e)}t(e)})),function(e,t){return u.apply(this,arguments)}));let f=!1;var d;return c._read=(d=s((function*(e){if(!f){f=!0;try{let t;do{let r=i.next(e);if("function"==typeof r.then)r=yield r;else for(;!r.done&&null!=(t=r.value)&&"function"==typeof t.then;){try{t=yield t}catch(e){r=i.throw(e);continue}r=i.next(t)}if(r.done)return c.push(null);t=r.value}while(void 0===t||c.push(t))}catch(e){t.nextTick(c.emit.bind(c,"error",e))}finally{f=!1}}})),function(e){return d.apply(this,arguments)}),c}e.exports=l,l.obj=(e,t)=>l(e,n({objectMode:!0},t))}).call(this,r(/*! ./../../process/browser.js */2))},
/*!*********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/pubsub.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! callbackify */19),i=r(/*! ../utils */66).OFFLINE_ERROR,s=r(/*! err-code */22);e.exports=function(e){function t(){if(!e.isOnline())throw s(new Error(i),"ERR_OFFLINE");if(!e.libp2p.pubsub)throw s(new Error("pubsub is not enabled"),"ERR_PUBSUB_DISABLED")}return{subscribe:(r,n,i,s)=>{if("function"==typeof i&&(s=i,i={}),"function"!=typeof s){try{t()}catch(e){return Promise.reject(e)}return e.libp2p.pubsub.subscribe(r,n,i)}try{t()}catch(e){return s(e)}e.libp2p.pubsub.subscribe(r,n,i,s)},unsubscribe:(r,n,i)=>{if("function"!=typeof i){try{t()}catch(e){return Promise.reject(e)}return e.libp2p.pubsub.unsubscribe(r,n)}try{t()}catch(e){return i(e)}e.libp2p.pubsub.unsubscribe(r,n,i)},publish:n(async(r,n)=>{t(),await e.libp2p.pubsub.publish(r,n)}),ls:n(async()=>(t(),e.libp2p.pubsub.ls())),peers:n(async r=>(t(),e.libp2p.pubsub.peers(r))),setMaxListeners(r){t(),e.libp2p.pubsub.setMaxListeners(r)}}}},
/*!******************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/dht.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! callbackify */19),i=r(/*! peer-id */7),s=r(/*! peer-info */21),o=r(/*! cids */4),{every:a,forEach:c}=r(/*! p-iteration */1225),u=r(/*! err-code */22),h=r(/*! debug */1),l=h("ipfs:dht");l.error=h("ipfs:dht:error"),e.exports=e=>({get:n.variadic(async(r,n)=>{if(n=n||{},!t.isBuffer(r))try{r=new o(r).buffer}catch(e){throw l.error(e),u(e,"ERR_INVALID_CID")}return e.libp2p.dht.get(r,n)}),put:n(async(r,n)=>{if(!t.isBuffer(r))try{r=new o(r).buffer}catch(e){throw l.error(e),u(e,"ERR_INVALID_CID")}return e.libp2p.dht.put(r,n)}),findProvs:n.variadic(async(t,r)=>{if(r=r||{},"string"==typeof t)try{t=new o(t)}catch(e){throw l.error(e),u(e,"ERR_INVALID_CID")}return e.libp2p.contentRouting.findProviders(t,r)}),findPeer:n(async t=>("string"==typeof t&&(t=i.createFromB58String(t)),e.libp2p.peerRouting.findPeer(t))),provide:n.variadic(async(t,r)=>{if(r=r||{},Array.isArray(t)||(t=[t]),!await a(t,t=>e._repo.blocks.has(t))){const e="block(s) not found locally, cannot provide";throw l.error(e),u(e,"ERR_BLOCK_NOT_FOUND")}if(r.recursive)throw u("not implemented yet","ERR_NOT_IMPLEMENTED_YET");await c(t,t=>e.libp2p.contentRouting.provide(t))}),query:n(async t=>{if("string"==typeof t)try{t=i.createFromB58String(t)}catch(e){throw l.error(e),e}try{return(await e.libp2p._dht.getClosestPeers(t.toBytes())).map(e=>new s(e))}catch(e){throw l.error(e),e}})})}).call(this,r(/*! ./../../../../node-libs-browser/node_modules/buffer/index.js */0).Buffer)},
/*!*******************************************!*\
  !*** ./node_modules/p-iteration/index.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! ./lib/static-methods */482),i=r(/*! ./lib/instance-methods */1226);e.exports=Object.assign(n,{instanceMethods:i})},
/*!**********************************************************!*\
  !*** ./node_modules/p-iteration/lib/instance-methods.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){const n=r(/*! ./static-methods */482);Object.keys(n).forEach(e=>{const r=e.charAt(0).toUpperCase()+e.slice(1);t[`async${r}`]=async function(...t){return n[e](this,...t)}})},
/*!******************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/dns.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../runtime/dns-nodejs */1228),i=r(/*! callbackify */19);e.exports=()=>i.variadic(async(e,t)=>{if(t=t||{},"string"!=typeof e)throw new Error("Invalid arguments, domain must be a string");return e=function(e){return e.endsWith(".eth")&&(e=e.replace(/.eth$/,".eth.link")),e}(e),n(e,t)})},
/*!***********************************************************!*\
  !*** ./node_modules/ipfs/src/core/runtime/dns-browser.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ../../utils/tlru */387),{default:i}=r(/*! p-queue */45),{default:s}=r(/*! ky-universal */255),o=new n(1e3),a=new i({concurrency:4}),c=s.create({prefixUrl:"https://ipfs.io/api/v0/",hooks:{afterResponse:[async(e,t,r)=>{const n=new URL(r.url).search.slice(1),i=await r.json();o.set(n,i,6e4)}]}}),u=e=>{if(e.Path)return e.Path;throw new Error(e.Message)};e.exports=async(e,t)=>{return(async(e,t)=>{t=t||{};const r=new URLSearchParams(t);r.set("arg",e);const n=r.toString();if(!t.nocache&&o.has(n)){const e=o.get(n);return u(e)}const i=await a.add(()=>c.get("dns",{searchParams:r}).json());return u(i)})(e,t)}},
/*!******************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/key.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! callbackify */19);e.exports=function(e){return{gen:n.variadic(async(t,r)=>(r=r||{},e._keychain.createKey(t,r.type,r.size))),info:n(async t=>e._keychain.findKeyByName(t)),list:n(async()=>e._keychain.listKeys()),rm:n(async t=>e._keychain.removeKey(t)),rename:n(async(t,r)=>{const n=await e._keychain.renameKey(t,r);return{was:t,now:n.name,id:n.id,overwrite:!1}}),import:n(async(t,r,n)=>e._keychain.importKey(t,r,n)),export:n(async(t,r)=>e._keychain.exportKey(t,r))}}},
/*!********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/stats.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const n=r(/*! callbackify */19),i=r(/*! bignumber.js */48),s=r(/*! pull-pushable */64),o=r(/*! human-to-milliseconds */483),a=r(/*! pull-stream-to-stream */68),c=r(/*! err-code */22);function u(e,t){let r;if(!(r=t.peer?e.libp2p.stats.forPeer(t.peer):t.proto?e.libp2p.stats.forProtocol(t.proto):e.libp2p.stats.global))return{totalIn:new i(0),totalOut:new i(0),rateIn:new i(0),rateOut:new i(0)};const n=r.snapshot,s=r.movingAverages;return{totalIn:n.dataReceived,totalOut:n.dataSent,rateIn:new i(s.dataReceived[6e4].movingAverage()/60),rateOut:new i(s.dataSent[6e4].movingAverage()/60)}}e.exports=function(e){const i=r=>{r=r||{};let n=null;const i=s(!0,()=>{n&&clearInterval(n)});if(r.poll){let s;try{s=o(r.interval||"1s")}catch(e){t.nextTick(()=>{i.end(c(e,"ERR_INVALID_POLL_INTERVAL"))})}n=setInterval(()=>{i.push(u(e,r))},s)}else i.push(u(e,r)),i.end();return i.source};return{bitswap:r(/*! ./bitswap */481)(e).stat,repo:r(/*! ./repo */453)(e).stat,bw:n.variadic(async t=>u(e,t=t||{})),bwReadableStream:e=>a.source(i(e)),bwPullStream:i}}}).call(this,r(/*! ./../../../../process/browser.js */2))},
/*!**********************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/resolve.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! is-ipfs */62),i=r(/*! cids */4),s=r(/*! promise-nodeify */254),{cidToString:o}=r(/*! ../../utils/cid */122);e.exports=e=>{return(t,r,a)=>("function"==typeof r&&(a=r,r={}),s((async(t,r)=>{if(r=r||{},!n.path(t))throw new Error("invalid argument "+t);n.ipnsPath(t)&&(t=await e.name.resolve(t,r));const[,,s,...a]=t.split("/"),c=new i(s);if(0===a.length)return`/ipfs/${o(c,{base:r.cidBase})}`;const u=a.join("/"),h=e._ipld.resolve(c,u);let l=c,f=u;for await(const e of h)i.isCID(e.value)&&(l=e.value,f=e.remainderPath);return`/ipfs/${o(l,{base:r.cidBase})}${f?"/"+f:""}`})(t,r=r||{}),a))}},
/*!*******************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/name.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1),i=r(/*! callbackify */19),s=r(/*! human-to-milliseconds */483),o=r(/*! libp2p-crypto */36),a=r(/*! err-code */22),c=r(/*! merge-options */51),u=r(/*! multihashes */13),h=r(/*! is-domain-name */1233),l=r(/*! promisify-es6 */9),f=n("ipfs:name");f.error=n("ipfs:name:error");const d=r(/*! ./name-pubsub */1234),p=r(/*! ../utils */66),A=r(/*! ../ipns/path */386),g=async(e,t)=>{if("self"===t)return e._peerInfo.id.privKey;try{const r=e._options.pass,n=await e._keychain.exportKey(t,r);return await l(o.keys.import.bind(o.keys))(n,r)}catch(e){throw f.error(e),a(e,"ERR_CANNOT_GET_KEY")}},y=async(e,t)=>(e=await e,t.length?e+"/"+t.join("/"):e);e.exports=function(e){return{publish:i.variadic(async(t,r)=>{const n=!(!1===(r=r||{}).resolve),i=r.lifetime||"24h",o=r.key||"self";if(!e.isOnline())throw a(new Error(p.OFFLINE_ERROR),"OFFLINE_ERROR");try{t=p.normalizePath(t)}catch(e){throw f.error(e),e}let c;try{c=(c=s(i)).toFixed(6)}catch(e){throw f.error(e),e}const u=await Promise.all([g(e,o),"true"===n.toString()?A.resolvePath(e,t):Promise.resolve()]);return e._ipns.publish(u[0],t,c)}),resolve:i.variadic(async(t,r)=>{r=c({nocache:!1,recursive:!0},r||{});const n=e._options.offline;if(n&&r.nocache)throw a(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");t||(t=e._peerInfo.id.toB58String()),t.startsWith("/ipns/")||(t=`/ipns/${t}`);const[i,s,...o]=t.slice(1).split("/");try{u.fromB58String(s)}catch(t){if(h(s))return y(e.dns(s,r),o);throw f.error(t),a(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}if(!e.isOnline()&&!n)throw a(new Error(p.OFFLINE_ERROR),"OFFLINE_ERROR");return y(e._ipns.resolve(`/${i}/${s}`,r),o)}),pubsub:d(e)}}},
/*!**********************************************!*\
  !*** ./node_modules/is-domain-name/index.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;e.exports=function(e,t){if(null==t&&(t=!1),e.length<2)return!1;if(e.length>255)return!1;var r=e[e.length-1];if(t){if("."!==r)return!1}else if("."===r)return!1;return n.test(e)}},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/name-pubsub.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1),i=r(/*! err-code */22),s=r(/*! callbackify */19),o=r(/*! ../ipns/routing/pubsub-datastore */389);n("ipfs:name-pubsub").error=n("ipfs:name-pubsub:error");const a=e=>{try{return Boolean(c(e))}catch(e){return!1}},c=e=>{if(!e._ipns||!e._options.EXPERIMENTAL.ipnsPubsub)throw i(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(o.isIpnsPubsubDatastore(e._ipns.routing))return e._ipns.routing;const t=(e._ipns.routing.stores||[]).find(e=>o.isIpnsPubsubDatastore(e));if(!t)throw i(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return t};e.exports=function(e){return{state:s(async()=>({enabled:a(e)})),cancel:s(async t=>{return c(e).cancel(t)}),subs:s(async()=>{return c(e).getSubscriptions()})}}},
/*!**************************************************************!*\
  !*** ./node_modules/ipfs/src/core/components/pin/gc-lock.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! pull-stream/pull */17),i=r(/*! pull-stream/throughs/through */221),s=r(/*! pull-stream/throughs/async-map */220),o=r(/*! ../../../utils/mutex */1236),a=r(/*! debug */1)("ipfs:gc:lock");class c{constructor(e,t){this.mutex=e,this.type=t,this.releaseLock=null}take(){return s((e,t)=>{if(this.releaseLock)return t(null,e);this.mutex[this.type]().then(r=>{this.releaseLock=r,t(null,e)},t)})}release(){return i(null,e=>{this.releaseLock(e)})}}e.exports=class{constructor(e,t){t=t||{},this.mutex=new o(e,{...t,log:a})}readLock(){return this.mutex.readLock()}writeLock(){return this.mutex.writeLock()}pullReadLock(e){return this.pullLock("readLock",e)}pullWriteLock(e){return this.pullLock("writeLock",e)}pullLock(e,t){const r=new c(this.mutex,e);return n(r.take(),t(),r.release())}}},
/*!**********************************************!*\
  !*** ./node_modules/ipfs/src/utils/mutex.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! assert */24),i=r(/*! mortice */469),s=()=>{};e.exports=class{constructor(e,t){t=t||{},this.mutex=i(t.morticeId,{singleProcess:e}),this.log=t.log||s,this.lockId=0}readLock(){return this._lock("readLock")}writeLock(){return this._lock("writeLock")}async _lock(e){n("string"==typeof e,`first argument to Mutex.${e}() must be a string, got ${typeof e}`);const t=this.lockId++;this.log(`[${t}] ${e} requested`);const r=await this.mutex[e]();return this.log(`[${t}] ${e} started`),()=>{this.log(`[${t}] ${e} released`),r()}}}},
/*!************************************************************!*\
  !*** ./node_modules/ipfs/src/core/runtime/repo-browser.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! ipfs-repo */206);e.exports=e=>{return new n(e||"ipfs")}},
/*!***********************************************!*\
  !*** ./node_modules/ipfs/src/core/preload.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! async/setImmediate */32),i=r(/*! async/retry */1239),s=r(/*! multiaddr-to-uri */416),o=r(/*! debug */1),a=r(/*! cids */4),c=r(/*! array-shuffle */1241),u=r(/*! ./runtime/preload-nodejs */1242),h=o("ipfs:preload");h.error=o("ipfs:preload:error");const l=e=>{e&&h.error(e)};e.exports=e=>{const t=e._options.preload||{};if(t.enabled=Boolean(t.enabled),t.addresses=t.addresses||[],!t.enabled||!t.addresses.length){h("preload disabled");const e=(e,t)=>{t&&n(()=>t())};return e.start=()=>{},e.stop=()=>{},e}let r=!0,o=[];const f=t.addresses.map(s),d=(e,t)=>{if(t=t||l,"string"!=typeof e)try{e=new a(e).toBaseEncodedString()}catch(e){return n(()=>t(e))}const s=c(f);let d;const p=Date.now();i({times:s.length},t=>{if(r)return t(new Error(`preload aborted for ${e}`));o=o.filter(e=>e!==d);const n=s.shift();d=u(`${n}/api/v0/refs?r=true&arg=${encodeURIComponent(e)}`,t),o=o.concat(d)},r=>{if(o=o.filter(e=>e!==d),r)return t(r);h(`preloaded ${e} in ${Date.now()-p}ms`),t()})};return d.start=()=>{r=!1},d.stop=()=>{r=!0,h(`canceling ${o.length} pending preload request(s)`),o.forEach(e=>e.cancel()),o=[]},d}},
/*!*************************************!*\
  !*** ./node_modules/async/retry.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var o=5,a=0,c={times:o,intervalFunc:(0,i.default)(a)};arguments.length<3&&"function"==typeof e?(r=t||n.default,t=e):(!function(e,t){if("object"==typeof t)e.times=+t.times||o,e.intervalFunc="function"==typeof t.interval?t.interval:(0,i.default)(+t.interval||a),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||o}}(c,e),r=r||n.default);if("function"!=typeof t)throw new Error("Invalid arguments for async.retry");var u=(0,s.default)(t),h=1;!function e(){u((function(t){t&&h++<c.times&&("function"!=typeof c.errorFilter||c.errorFilter(t))?setTimeout(e,c.intervalFunc(h)):r.apply(null,arguments)}))}()};var n=o(r(/*! lodash/noop */42)),i=o(r(/*! lodash/constant */1240)),s=o(r(/*! ./internal/wrapAsync */33));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},
/*!*****************************************!*\
  !*** ./node_modules/lodash/constant.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return function(){return e}}},
/*!*********************************************!*\
  !*** ./node_modules/array-shuffle/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";e.exports=function(e){if(!Array.isArray(e))throw new TypeError("Expected Array, got "+typeof e);for(var t,r,n=e.length,i=e.slice();n;)t=Math.floor(Math.random()*n--),r=i[n],i[n]=i[t],i[t]=r;return i}},
/*!***************************************************************!*\
  !*** ./node_modules/ipfs/src/core/runtime/preload-browser.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";(function(t){const{default:n}=r(/*! p-queue */45),{default:i}=r(/*! ky-universal */255),s=r(/*! debug */1),o=s("ipfs:preload");o.error=s("ipfs:preload:error");const a=new n({concurrency:4});e.exports=function(e,r){o(e);const n=new AbortController,s=n.signal,c=()=>t(r);return a.add(()=>i.get(e,{signal:s})).then(c,c),{cancel:()=>n.abort()}}}).call(this,r(/*! ./../../../../timers-browserify/main.js */41).setImmediate)},
/*!***************************************************!*\
  !*** ./node_modules/ipfs/src/core/mfs-preload.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1),i=n("ipfs:mfs-preload");i.error=n("ipfs:mfs-preload:error"),e.exports=e=>{const t=e._options.preload||{};if(t.interval=t.interval||3e4,!t.enabled)return i("MFS preload disabled"),{start:async()=>{},stop:async()=>{}};let r,n;const s=()=>{e.files.stat("/").then(o=>{if(r!==o.hash)return i(`preloading updated MFS root ${r} -> ${o.hash}`),e._preload(o.hash,e=>{if(n=setTimeout(s,t.interval),e)return i.error(`failed to preload MFS root ${o.hash}`,e);r=o.hash});n=setTimeout(s,t.interval)},e=>{n=setTimeout(s,t.interval),i.error("failed to stat MFS root for preload",e)})};return{async start(){const o=await e.files.stat("/");r=o.hash,i(`monitoring MFS root ${r}`),n=setTimeout(s,t.interval)},stop(){clearTimeout(n)}}}},
/*!************************************************************!*\
  !*** ./node_modules/ipfs/src/core/runtime/ipld-browser.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! merge-options */51),i=r(/*! ipld-dag-cbor */280),s=r(/*! ipld-dag-pb */29),o=r(/*! ipld-raw */297);e.exports=(e,t)=>(t=t||{},n.call({concatArrays:!0},{blockService:e,formats:[i,s,o]},t))},
/*!*********************************************!*\
  !*** ./node_modules/ipfs/src/core/state.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";const n=r(/*! debug */1),i=n("ipfs:state");i.error=n("ipfs:state:error");const s=r(/*! fsm-event */119);e.exports=e=>{const t=s("uninitialized",{uninitialized:{init:"initializing",initialized:"stopped"},initializing:{initialized:"stopped"},stopped:{start:"starting"},starting:{started:"running"},running:{stop:"stopping"},stopping:{stopped:"stopped"}});return t.on("error",e=>i.error(e)),t.on("done",()=>i("-> "+t._state)),t.init=()=>{t("init")},t.initialized=()=>{t("initialized")},t.stop=()=>{t("stop")},t.stopped=()=>{t("stopped")},t.start=()=>{t("start")},t.started=()=>{t("started")},t.state=()=>t._state,t}},
/*!*******************************************!*\
  !*** ./node_modules/@nimiq/core-web sync ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=1246},
/*!**********************************!*\
  !*** ./src/index.ts + 3 modules ***!
  \**********************************/
/*! exports provided: Components, Shop, Backend */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@nimiq/core-web/web.esm.js (<- Module uses injected variables (Buffer, __dirname, global)) */
/*! ModuleConcatenation bailout: Cannot concat with ./src/components/checkout-button.ts because of ./src/components/shop.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/components/shop.ts (<- Module uses eval()) */
/*! ModuleConcatenation bailout: Cannot concat with ./src/shop.ts because of ./src/components/shop.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/storage/encryption/webcrypto.ts because of ./src/storage/index.ts */function(e,t,r){"use strict";r.r(t);r(492),r(493);var n,i=r(484),s=r(126),o=r(92);!function(e){e[e.paid=0]="paid",e[e.done=1]="done",e[e.underFunded=2]="underFunded"}(n||(n={}));var a=r(175),c=r(127);const u=new TextDecoder;class h extends o.a{constructor(e,t){super(e),this.nimiq=new Promise(e=>this.loadNimiq().then(e)),this.privateKey="string"==typeof t?JSON.parse(t):t}async sync(){const e=await this.getLatestTransactions(),t=await Promise.all(e.filter(e=>e.data&&e.data.raw.length>0).map(async e=>{const t=u.decode(e.data.raw);try{const r=await this.storage.load(t,this.privateKey);return{order:r,txHash:e.transactionHash.toHex(),state:1e5*this.sumUp(r.products)>e.value?n.underFunded:n.paid}}catch(r){"Non-base58 character"==r.message?console.warn(`Invalid order ID ${t} in TX ${e.transactionHash.toHex()}`):0==r.code&&"OperationError"==r.name?console.warn(`Failed decrypting order ${t} for TX ${e.transactionHash.toHex()}`):(console.warn(`No order found for ${t} from TX ${e.transactionHash.toHex()}`),console.log(r))}}));this.addOrders(t.filter(e=>!!e))}async getLatestTransactions(){const e=await this.nimiq,t=localStorage.lastTx,r=await e.getTransactionsByAddress(this.configuration.address),n=r.sort((e,t)=>e.timestamp-t.timestamp);console.log(n);const i=n.findIndex(e=>e.transactionHash.toHex()==t);console.log(i),console.log(n.slice(0,Math.max(i,0)));const s=r.sort((e,t)=>e.timestamp-t.timestamp).slice(r.findIndex(e=>e.transactionHash.toHex()==t)+1);return s.length>0&&(localStorage.lastTx=s[s.length-1].transactionHash.toHex()),s}async loadNimiq(){await c.a.load(location.origin+"/backend/wasm/"),this.configuration.live||this.configuration.force.mainnet?c.a.GenesisConfig.main():c.a.GenesisConfig.test();const e=c.a.Client.Configuration.builder().instantiateClient();return await e.waitForConsensusEstablished(),e}list(){return JSON.parse(localStorage.orders||"[]")}clearCache(){localStorage.orders=[]}addOrders(e){localStorage.orders=JSON.stringify([...this.list(),...e])}static async generateCrypto(){const e=new a.a,t=await e.generateKeyPair(),r=await e.exportKey(t.privateKey),n=await e.exportKey(t.publicKey);return{privateKey:r,publicKey:n,id:await e.hash(n.n)}}static generateConfiguration(e,t){return{name:"A name for your shop - customers will see this during the payment - short and easy to recognize",address:"Your Nimiq address to receive payments on",logo:"URL of a 128x128px PNG file showing the logo of your shop on transparent background (optional)",live:!1,id:t,publicKey:e}}}r.d(t,"Components",(function(){return l})),r.d(t,"Shop",(function(){return o.a})),r.d(t,"Backend",(function(){return h}));const l={NimiqShop:i.a,CheckoutButton:s.a}}]);